<!DOCTYPE html><html><head><title>专利 CN101170575A - 服务器设备和屏幕共享方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="服务器设备和屏幕共享方法"><meta name="DC.contributor" content="后藤真孝" scheme="inventor"><meta name="DC.contributor" content="山口健作" scheme="inventor"><meta name="DC.contributor" content="川添博史" scheme="inventor"><meta name="DC.contributor" content="村井信哉" scheme="inventor"><meta name="DC.contributor" content="株式会社东芝" scheme="assignee"><meta name="DC.date" content="2007-8-24" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供一种在服务器设备中进行与客户终端共享将要在屏幕上显示的图像的屏幕共享方法，该方法包括：更新帧缓冲器中的部分图像；产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图像的第一图像、以及由序列号计数器分配的序列号的第一数据包并传输该第一数据包；将一组第一区域信息和序列号储存在存储器中；从客户终端接收包括序列号的再传输请求；通过参考所述存储器检测在传输第一图像之后在对应于再传输请求中包括的序列号的第一图像中未被更新的第二区域；从帧缓冲器获取第二区域中的第二图像。"><meta name="DC.date" content="2008-4-30"><meta name="citation_patent_publication_number" content="CN:101170575:A"><meta name="citation_patent_application_number" content="CN:200710146918"><link rel="canonical" href="https://www.google.com/patents/CN101170575A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101170575A?cl=zh"/><meta name="title" content="专利 CN101170575A - 服务器设备和屏幕共享方法"/><meta name="description" content="本发明提供一种在服务器设备中进行与客户终端共享将要在屏幕上显示的图像的屏幕共享方法，该方法包括：更新帧缓冲器中的部分图像；产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图像的第一图像、以及由序列号计数器分配的序列号的第一数据包并传输该第一数据包；将一组第一区域信息和序列号储存在存储器中；从客户终端接收包括序列号的再传输请求；通过参考所述存储器检测在传输第一图像之后在对应于再传输请求中包括的序列号的第一图像中未被更新的第二区域；从帧缓冲器获取第二区域中的第二图像。"/><meta property="og:title" content="专利 CN101170575A - 服务器设备和屏幕共享方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101170575A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101170575A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101170575A&amp;usg=AFQjCNGF7L74aszYYuOkjw_8CbHm7yjatw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/e2f8ce79b581df22563f/CN101170575A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/e2f8ce79b581df22563f/CN101170575A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101170575A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101170575A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101170575A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101170575B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101170575A?cl=zh" style="display:none"><span itemprop="description">本发明提供一种在服务器设备中进行与客户终端共享将要在屏幕上显示的图像的屏幕共享方法，该方法包括：更新帧缓冲器中的部分图像；产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图像的...</span><span itemprop="url">https://www.google.com/patents/CN101170575A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101170575A - 服务器设备和屏幕共享方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101170575A - 服务器设备和屏幕共享方法" title="专利 CN101170575A - 服务器设备和屏幕共享方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101170575 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200710146918</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2008年4月30日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2007年8月24日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2006年10月24日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101170575B?hl=zh-CN&amp;cl=zh">CN101170575B</a>, </span><span class="patent-bibdata-value"><a href="/patents/US7783700?hl=zh-CN&amp;cl=zh">US7783700</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20080095151?hl=zh-CN&amp;cl=zh">US20080095151</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200710146918.7, </span><span class="patent-bibdata-value">CN 101170575 A, </span><span class="patent-bibdata-value">CN 101170575A, </span><span class="patent-bibdata-value">CN 200710146918, </span><span class="patent-bibdata-value">CN-A-101170575, </span><span class="patent-bibdata-value">CN101170575 A, </span><span class="patent-bibdata-value">CN101170575A, </span><span class="patent-bibdata-value">CN200710146918, </span><span class="patent-bibdata-value">CN200710146918.7</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%90%8E%E8%97%A4%E7%9C%9F%E5%AD%9D%22">后藤真孝</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B1%B1%E5%8F%A3%E5%81%A5%E4%BD%9C%22">山口健作</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B7%9D%E6%B7%BB%E5%8D%9A%E5%8F%B2%22">川添博史</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%91%E4%BA%95%E4%BF%A1%E5%93%89%22">村井信哉</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%E4%B8%9C%E8%8A%9D%22">株式会社东芝</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101170575A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101170575A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101170575A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (5),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (13),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200710146918&amp;usg=AFQjCNEXB0DK8IQB8nF7J6Qxd772vT0O7Q"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101170575A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNFzRggx3U1Jx__agEKtLuRTT12Vrw"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT70606608" lang="ZH" load-source="patent-office">服务器设备和屏幕共享方法</invention-title>
      </span><br><span class="patent-number">CN 101170575 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA38376296" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供一种在服务器设备中进行与客户终端共享将要在屏幕上显示的图像的屏幕共享方法，该方法包括：更新帧缓冲器中的部分图像；产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图像的第一图像、以及由序列号计数器分配的序列号的第一数据包并传输该第一数据包；将一组第一区域信息和序列号储存在存储器中；从客户终端接收包括序列号的再传输请求；通过参考所述存储器检测在传输第一图像之后在对应于再传输请求中包括的序列号的第一图像中未被更新的第二区域；从帧缓冲器获取第二区域中的第二图像。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(14)</span></span></div><div class="patent-text"><div mxw-id="PCLM5836603" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种与客户终端共享将要在屏幕上显示的图像的服务器设备，其特征在于，该服务器设备包括：    配置成储存将要显示在屏幕上的图像的帧缓冲器；    配置成将帧缓冲器中的图像显示在屏幕上的显示控制单元；    配置成更新帧缓冲器中的部分图像的更新处理单元；    配置成产生将要给予各个数据包的序列号的序列号计数器；    配置成产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图像的第一图像、和由序列号计数器分配的序列号的第一数据包，并将第一数据包传输至客户终端的第一传输单元；    配置成储存一组第一区域信息和序列号的传输历史存储单元；    配置成从客户终端接收包括序列号的再传输请求的再传输请求接收单元；    配置成通过参考传输历史存储单元检测在传输第一图像之后在对应于再传输请求中包括的序列号的第一图像中未被更新的第二区域，并从帧缓冲器获取第二区域中的第二图像的再传输图像产生单元；和    配置成产生包括指示第二区域的第二区域信息、第二图像、和从序列号计数器分配的序列号的第二数据包，将第二数据包传输至客户终端，并请求传输历史存储单元储存一组第二区域信息和与第二数据包中包括的序列号相同的序列号的第二传输单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 如权利要求1所述的服务器设备，其特征在于，其中再传输图像产生单元检测从由 对应于再传输请求中包括的序列号的第一区域信息指示的区域中排除与由对应于比再传 输请求中包括的序列号新的序列号的第一区域信息指示的区域重叠的区域获得的作为第 二区域的区域。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 如权利要求1所述的服务器设备，其特征在于，其中再传输图像产生单元从帧缓冲 器获取作为第二图像的包括第二区域的矩形区域的图像，以及第二传输单元包括作为第二区域信息的指示第二数据包中的矩形区域的信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 如权利要求1所述的服务器设备，其特征在于，其中再传输图像产生单元将第二区域划分为多个矩形区域，并从帧缓冲器获取作为第二图像的各个划分区域中的图像，以及 第二传输单元产生包括作为第二区域信息的指示各个划分区域的信息的第二数据包。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 如权利要求1所述的服务器设备，其特征在于，其中传输历史存储单元删除已经储 存了预定时间的组。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6. 如权利要求1所述的服务器设备，其特征在于，其中再传输请求接收单元从客户终 端接收包括指定客户终端已经接收到的序列号的信息的数据包，以及传输历史存储单元删除具有已接收序列号或者比已接收序列号老的序列号的组。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7. 如权利要求1所述的服务器设备，其特征在于，其中再传输请求接收单元接收包括 多个序列号的再传输请求，以及再传输图像产生单元从各个第一图像的总和中检测在传输对应于多个序列号的各个第 一图像之后未被更新的作为第二区域的区域。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8. &#8212;种在服务器设备中进行与客户终端共享将要在屏幕上显示的图像的屏幕共享方 法，其特征在于，该方法包括：在帧缓冲器中存储将要显示在屏幕上的图像；将帧缓冲器中的图像显示在屏幕上；更新帧缓冲器中的部分图像；产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图 像的第一图像、和由序列号计数器分配的序列号的第一数据包； 将第一数据包传输至客户终端；将一组第一区域信息和序列号储存在传输历史存储单元中； 从客户终端接收包括序列号的再传输请求；通过参考传输历史存储单元检测在传输第一图像之后在对应于再传输请求中包括的 序列号的第一图像中未被更新的第二区域； 从帧缓冲器获取第二区域中的第二图像； 产生包括指示第二区域的第二区域信息、第二图像、和从序列号计数器分配的序列号 的第二数据包；将第二数据包传输至客户终端；和将一组第二区域信息和与第二数据包中包括的序列号相同的序列号存储在传输历史 存储单元中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9. 如权利要求8所述的方法，其特征在于，其中检测第二区域包括检测从由对应于再 传输请求中包括的序列号的第一区域信息指示的区域中排除与由对应于比再传输请求中 包括的序列号新的序列号的第一区域信息指示的区域重叠的区域获得的作为第二区域的 区域。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 如权利要求8所述的方法，其特征在于，其中获取第二图像包括从帧缓冲器获取 作为第二图像的包括第二区域的矩形区域的图像，以及指示矩形区域的信息作为第二区域信息被包括在第二数据包中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11. 如权利要求8所述的方法，其特征在于，其中检测第二区域包括将第二区域划分 为多个矩形区域，获取第二图像包括从帧缓冲器获取作为第二图像的各个划分区域中的图像，以及 产生第二数据包包括产生包括作为第二区域信息的指示各个划分区域的信息的第二数 据包。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12. 如权利要求8所述的方法，其特征在于，该方法进一步包括从传输历史存储单元 中删除已经储存了预定时间的组。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13. 如权利要求8所述的方法，其特征在于，该方法进一步包括从客户终端接收包括 指定客户终端已经接收到的序列号的信息的数据包，以及从传输历史存储单元中删除具有已接收序列号或者比已接收序列号老的序列号的组。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14. 如权利要求8所述的方法，其特征在于，其中接收再传输请求包括接收包括多个 序列号的再传输请求，以及检测第二区域包括从各个第一图像的总和中检测作为第二区域的在传输对应于多个序 列号的各个第一图像之后未被更新的区域。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES10544884" lang="ZH" load-source="patent-office" class="description">
    <p>服务器设备和屏幕共享方法 技术领域</p>
    <p>本发明涉及服务器设备以及与客户终端共享屏幕上显示的图像的屏幕共享方法。</p>
    <p>背景技术</p>
    <p>有一种"屏幕共享系统"，该系统实时分包服务器设备的桌面图像，并将其从服务器设 备传送至通过网络连接的客户终端。根据该系统，彼此远离的用户可以通过网络分享和参 考一侧的桌面图像，以及在两点之间实现有效的合作工作环境。</p>
    <p>在建立屏幕共享系统时存在各种方法，如以预定的时间间隔分包服务器设备的整个桌 面区域的绘图内容并将其传送至客户终端的方法，以及每次更新桌面区域的绘图内容时只 将被更新部分与其绘图坐标一起分包并传送的方法。根据传送差别的后一个方法，只根据 绘图内容的变化产生必需部分的数据，因而存在这样的优势，即不仅能比前一个方法更有 效地利用网络带宽，而且能增加单位时间的绘图帧数量。因此，在当前提供的屏幕共享系 统中，各种服务经常在只传送差别数据的配置中提供。</p>
    <p>在屏幕共享系统中， 一些从服务器设备传送到客户终端的图像包可能会丢失，因而重 要的是进行控制从而使这样情形中的影响最小化。出于该原因，通常使用由TCP (Transmission Control Protocol,传输控制协议）表示的具有再传输被丢失数据包的功能的 通信控制协议。对于这样的再传输功能，服务器设备传输带有对其分配的指示时间序列的 序列号的图像包，而客户终端监控所接收数据包中包括的序列号,并检测在图像包的接收 中是否发生丢失。在检测数据包丢失时，客户终端将包括相应序列号的再传输请求数据包 传输到服务器设备，并且接收到该数据包的服务器设备搜索储存在自身存储区域中的过去 已经传输的图像包列表，选择并提取对应于该序列号的数据包，并将该数据包再传输至客 户终端。</p>
    <p>然而，该方法引起了一个问题，即存在从服务器设备传输至客户终端的再传输数据包 的数据量可能不必要地增长的可能性。也就是，当对应于来自客户终端的再传输请求的区 域通过即时后续更新用另一幅图像重写并更新时，即使发送了再传输数据包，在客户终端</p>
    <p>处绘图也会立即用后续图像重写。对于在特定区域频繁进行更新的情形，举例来说，当在 桌面上再现视频内容时，估计有可能发生这样的情况。</p>
    <p>此外，服务器设备需要储存过去长时间的图像包传输历史以产生再传输数据包。这样 会使储存历史所需的存储区域非常紧张。</p>
    <p>附带提及，JP-A2005-20590 (Kokai)指出上述屏幕共享系统会损害实时性的问题并对 此提出其对策，也就是，即使流逝了允许的时间间隔以后客户终端仍未接收到上次接收到 的数据包之后应该接收到的数据包，客户终端应向服务器设备发送再传输请求。</p>
    <p>发明内容</p>
    <p>根据本发明的一个方面提供一种与客户终端共享将要在屏幕上显示的图像的服务器</p>
    <p>设备，该服务器设备包括：</p>
    <p>配置成储存将要显示在屏幕上的图像的帧缓冲器； 配置成将帧缓冲器中的图像显示在屏幕上的显示控制单元； 配置成更新帧缓冲器中的部分图像的更新处理单元； 配置成产生将要给予各个数据包的序列号的序列号计数器；</p>
    <p>配置成产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之 后的图像的第一图像、和由序列号计数器分配的序列号的第一数据包，并将第一数据包传 输至客户终端的第一传输单元；</p>
    <p>配置成储存一组第一区域信息和序列号的传输历史存储单元；</p>
    <p>配置成从客户终端接收包括序列号的再传输请求的再传输请求接收单元；</p>
    <p>配置成通过参考传输历史存储单元检测在传输第一图像之后在对应于再传输请求中 包括的序列号的第一图像中未被更新的第二区域，并从帧缓冲器获取第二区域中的第二图 像的再传输图像产生单元；和</p>
    <p>配置成产生包括指示第二区域的第二区域信息、第二图像、和从序列号计数器分配的 序列号的第二数据包，将第二数据包传输至客户终端，并请求传输历史存储单元储存一组 第二区域信息和与第二数据包中包括的序列号相同的序列号的第二传输单元。</p>
    <p>根据本发明的一个方面提供一种在服务器设备中进行与客户终端共享将要在屏幕上 显示的图像的屏幕共享方法，该方法包括：</p>
    <p>在帧缓冲器中存储将要显示在屏幕上的图像；</p>
    <p>将帧缓冲器中的图像显示在屏幕上； 更新帧缓冲器中的部分图像；</p>
    <p>产生包括指示图像中更新的第一区域的第一区域信息、作为第一区域中更新之后的图 像的第一图像、和由序列号计数器分配的序列号的第一数据包； 将第一数据包传输至客户终端；</p>
    <p>将一组第一区域信息和序列号储存在传输历史存储单元中； 从客户终端接收包括序列号的再传输请求；</p>
    <p>通过参考传输历史存储单元检测在传输第一图像之后在对应于再传输请求中包括的 序列号的第一图像中未被更新的第二区域； 从帧缓冲器获取第二区域中的第二图像；</p>
    <p>产生包括指示第二区域的第二区域信息、第二图像、和从序列号计数器分配的序列号 的第二数据包；</p>
    <p>将第二数据包传输至客户终端；和</p>
    <p>将一组第二区域信息和与第二数据包中包括的序列号相同的序列号存储在传输历史 存储单元中。</p>
    <p>附图说明</p>
    <p>图1显示根据本发明的实施例的屏幕共享系统的配置；</p>
    <p>图2显示服务器设备的配置；</p>
    <p>图3显示客户终端的配置；</p>
    <p>图4是服务器设备中产生更新图像时的顺序图；</p>
    <p>图5是服务器设备中接收到再传输请求时的顺序图；</p>
    <p>图6是服务器设备的流程图；</p>
    <p>图7是客户终端的流程图；</p>
    <p>图8说明区域信息；</p>
    <p>图9显示图像包中包括的区域信息的实例； 图IO显示图像包中包括的区域信息的实例； 图ll显示再传输区域信息的实例；以及 图12显示再传输区域信息的另一个实例。</p>
    <p>具体实施方式</p>
    <p>下文将参照附图更具体地说明本发明的实施例。</p>
    <p>图1显示作为本发明的实施例的服务器设备配备的屏幕共享系统的配置。该配置包括 执行服务器的功能的信息处理设备（服务器设备）1，和执行通过网络3连接到一起的客 户的功能的信息处理终端（客户终端)2。</p>
    <p>图2示意性地显示服务器设备1的配置。</p>
    <p>作为其组件，服务器设备l包括，更新图像产生单元（更新处理单元）11，帧缓冲器 12，显示控制单元13，图像传输单元14，再传输图像产生单元15，再传输请求接收单元 16和传输历史存储单元17。图像传输单元14包括第一传输单元，第二传输单元和序列号 计数器。</p>
    <p>更新图像产生单元11根据服务器设备1上执行的OS (Operating System (操作系统）） 和应用软件的运行条件产生将要在显示屏幕（桌面）上更新的区域的更新后图像（更新图 像）和指示待更新区域的位置的信息（区域信息）。更新图像是对应于部分桌面的矩形屏 幕数据。更新图像对应于第一图像。区域信息是指示更新图像在桌面上的显示位置的数值 (当将更新图像储存在帧缓冲器12中时，该数值指示存储位置）。该区域信息对应于第一 区域信息。</p>
    <p>帧缓冲器12具有储存显示屏幕的整个图像（对应于整个桌面的屏幕数据）的存储区 域。帧缓冲器12将由更新图像产生单元11产生的更新图像储存（重写）在由更新图像产 生单元11产生的区域信息中指示的区域中。帧缓冲器12可以根据来自诸如再传输图像产 生单元15的外部的指令输出其本身中储存的所有或部分屏幕数据。</p>
    <p>显示控制单元13显示帧缓冲器12中储存的整个图像。</p>
    <p>图像传输单元14从更新图像产生单元11接收更新图像和区域信息，产生包括接收到 的更新图像、区域信息和指示数据包的时间传输顺序的序列号的图像包（第一数据包）， 并将所产生的图像包通过网络3传输至客户终端2。图像传输单元14具有储存序列号计数 值的序列号存储器，并包括上述图像数据包中作为序列号的储存在序列号存储器中的序列 号计数值。图像传输单元14在产生图像包之后将序列号存储器中的序列号计数值递增1。 即，图像传输单元14具有产生将要分配给各个数据包的序列号的序列号计数器。</p>
    <p>传输历史存储单元17从图像传输单元14接收作为一组数据的与上述图像包中包括的 序列号和区域信息相同的序列号和区域信息，并以列表格式将其储存在自身的存储区域</p>
    <p>中。</p>
    <p>再传输请求接收单元16通过网络3从客户终端2接收包括序列号的再传输请求数据 包，并从接收到的再传输请求数据包提取序列号。再传输请求接收单元16将所提取的序 列号移交给再传输图像产生单元15。</p>
    <p>再传输图像产生单元15从传输历史存储单元17获取对应于来自从再传输请求接收单 元16向前移交的序列号的所有序列号的区域信息。再传输图像产生单元15从与序列号对 应的区域信息中指示的区域中获取排除与相应于比从再传输请求接收单元16移交的序列 号新的所有序列号的区域信息中指示的区域重叠的区域产生的作为再传输区域（在传输与 再传输请求数据包中包括的序列号对应的图像之后未被更新的区域）的区域。再传输图像 产生单元15从帧缓冲器12获取作为再传输图像的再传输区域中的图像。该再传输图像对 应于第二图像。</p>
    <p>图像传输单元14从再传输图像产生单元15接收再传输图像和指示上述再传输区域的 位置的信息（再传输区域信息），产生包括再传输图像、再传输区域信息和序列号存储器 中的序列号计数值的再传输图像包（第二数据包），将产生的再传输图像包通过网络3传 输至客户终端2。在产生再传输图像包之后，图像传输单元14将上述序列号存储器中的序 列号计数值递增l。该再传输区域信息对应于第二区域信息。</p>
    <p>图3示意性地显示客户终端2的配置。</p>
    <p>客户终端2作为其组件具有图像接收单元21，帧缓冲器22，显示控制单元23和再传 输请求传输单元24。</p>
    <p>图像接收单元21从通过网络3接收自服务器设备1的图像包或再传输图像包（总称 为"被接收数据包"）提取更新图像或再传输图像（总称为"被接收图像"），区域信息或再传 输区域信息（总称为"接收区域信息"）以及序列号。此外，图像接收单元21具有存储序列 号计数值的序列号存储器，并且基于接收到的数据包中包括的序列号和该序列号计数值判 断再传输的必要性。具体而言，当接收到的数据包中包括的序列号符合该序列号计数值时， 图像接收单元21判断不需要任何再传输，而当序列号是比该序列号计数值新的数值时， 图像接收单元21判断需要再传输。举例来说，假定序列号计数值是100而序列号是103。 图像接收单元21判断必须再传输与序列号100， 101和102对应的被接收数据包。通过将 需要再传输的被接收数据包的序列号移交给再传输请求传输单元24，图像接收单元21指 令再传输请求传输单元24向服务器设备1发送再传输被接收数据包的请求。</p>
    <p>正如服务器设备1的帧缓冲器12 &#8212;样，帧缓冲器22具有储存显示屏幕的整个图像(对 应于整个桌面的屏幕数据）的存储区域。帧缓冲器22将图像接收单元21接收到的被接收 数据包中包括的接收图像储存在被接收数据包中包括的接收区域信息中指示的区域中。</p>
    <p>显示控制单元23显示帧缓冲器22中储存的屏幕数据。</p>
    <p>再传输请求传输单元24产生包括接收自图像接收单元21的序列号的再传输请求数据 包，并通过网络3将其传输至服务器设备1。</p>
    <p>以下参照适当的附图说明由根据该实施例的屏幕共享系统进行的处理。服务器设备1 和客户终端2通过网络3互相连接，并假定两个终端都在进行屏幕共享。</p>
    <p>首先，参照图2，图4，图5和图6说明由服务器设备1进行的处理。图4说明产生 更新图像时执行的序列，图5说明从客户终端2接收到再传输请求时执行的序列，图6是 显示服务器设备1的总体处理流程的流程图。</p>
    <p>当进行屏幕共享时，更新图像产生单元11进行检查以发现将要呈现给用户的视频信息 中是否存在由于服务器设备l上执行的OS和应用软件的运行条件发生改变而引起的更新， 并且在存在更新时（S101:是）产生更新图像（步骤S107)。所述更新图像涉及如上所述 对应于部分桌面的矩形屏幕数据。更新图像产生单元11不仅产生更新图像，而且计算更新 图像的区域信息（步骤S107)。区域信息是如上所述指示更新图像在桌面上的显示位置的 数值。这里，如图8所示，假定区域信息是更新图像矩形左上顶点的坐标值（左，上）和 右下顶点的坐标值（右，下），假定桌面的左上角为xy坐标平面的原点，桌面的横宽为" 宽度"，桌面的竖宽为"高度"。更新图像产生单元11将所产生的更新图像和所计算的区域 信息输入至帧缓冲器12。帧缓冲器12用更新图像重写并更新自身存储区域的区域信息中 指示的区域。显示控制单元13显示帧缓冲器12中的屏幕数据。此外，更新图像产生单元 11将所产生的更新图像和所计算的区域信息输入至图像传输单元14,从而请求传输更新图 像（图4中AU)。处理流程移动至步骤S105。</p>
    <p>在步骤S105中，接收到传输更新图像请求的图像传输单元14参考自身序列号存储器 中储存的序列号计数值，并将该序列号计数值用作序列号产生包括序列号、更新图像和区 域信息的图像包（第一数据包）。当开始屏幕共享时图像传输单元14将该序列号计数值重 置为零，并且其后每次在该步骤S105中产生一个图像包时将该计数值递增1。当序列号计 数值超过指定值时（举例来说，2的32次方减1)，图像传输单元14再次将计数值重置为 零。</p>
    <p>图像传输单元14将所产生的图像包通过网络3传输至客户终端2。当图像包被传输时， 图像传输单元14将与图像包中包括的区域信息和序列号相同的区域信息和序列号作为一 组数据输出至传输历史存储单元17，并请求传输历史存储单元17记录该组数据（图4中 A12)。处理流程移动至步骤S106。</p>
    <p>在步骤S106中，传输历史存储单元17将输入自图像传输单元14的一组区域信息和 序列号储存在自身的存储区域中。传输历史存储单元17以列表格式管理各个数据组，并 将输入的数据组增加至该列表。在将所输入的数据组增加至所述列表之后，传输历史存储 单元17通知图像传输单元14该增加处理（图4中A13)。接收到增加至列表的处理已经完 成的信息时，图像传输单元14通知更新图像产生单元11图像数据包已经发送至客户终端 2 (图4中A14)。</p>
    <p>此后，判断用户是否给出结束屏幕共享的指令（S10S)，当给出指令时（步骤S108: 是）处理结束，或者当未给出指令时（步骤S108:否）处理返回至S101。</p>
    <p>另一方面，当呈现给用户的视频信息在步骤S101中没有更新时（步骤S101:否），处 理流程移动至步骤S102。</p>
    <p>在步骤S102中，再传输请求接收单元16确认是否通过网络3接收到来自客户终端2 的再传输请求数据包。当未接收到再传输请求数据包时（S102:否），处理流程返回至步 骤S101。当接收到再传输请求数据包时（S102:是），再传输请求接收单元16提取再传输 请求数据包的有效载荷部分中包括的序列号。通过将该序列号输入至再传输图像产生单元 15，再ft输请求接收单元16请求产生再传输图像（图5中Bl 1 )。处理流程移动至步骤S103。</p>
    <p>在步骤S103中，已从再传输请求接收单元16接收到产生再传输图像请求的再传输图 像产生单元15将输入自再传输请求接收单元16的序列号输出至传输历史存储单元17,并 请求向前从序列号获取所有区域信息（图5中B12)。响应该请求，传输历史存储单元17 搜索自身的存储区域，检测具有与输入序列号相同的或比其新的序列号的数据组中包括的 区域信息，并将该区域信息返回至再传输图像产生单元15 (图5中B13)。假定对应于输 入至传输历史存储单元17的序列号的区域信息为"请求区域信息"，而对应于比该序列号新 的序列号的区域信息为"已传输区域信息"，再传输图像产生单元15从请求区域信息中指示 的区域中计算排除与已传输区域信息中指示的区域重叠的区域得到的作为再传输区域的 区域。假定指示该再传输区域的信息为"再传输区域信息"，再传输图像产生单元15将该再 传输区域信息输入至帧缓冲器12，并请求获取再传输区域中存在的图像（最新图像）（图</p>
    <p>5中B14)。后文将详细说明再传输区域的计算方法。处理流程移动至步骤S104。</p>
    <p>在步骤S104中从再传输图像产生单元15接收到获取最新图像请求的帧缓冲器12从 自身的存储区域获取输入自再传输图像产生单元15的再传输图像信息中指示的区域的图 像，并将其作为再传输图像返回至再传输图像产生单元15 (图5中B15)。再传输图像产 生单元15将接收到的再传输图像和再传输区域信息输入至图像传输单元14，从而请求传 输再传输图像（图5中B16)。当再传输图像和再传输区域信息的数据组的数量大于一时， 传输请求被以适当的次序逐一发送。处理流程移动至步骤S105。</p>
    <p>在步骤S105中，接收到传输再传输图像请求的图像传输单元14参考自身的存储区域 中存储的序列号计数值，并产生包括该序列号计数值、再传输图像和再传输区域信息的再 传输图像包（第二数据包）。图像传输单元14将再传输图像包通过网络3传输至客户终端 2。在传输再传输图像包之后，图像传输单元14将一组再传输区域信息和序列号输出至传 输历史存储单元17，并请求记录该数据组（图5中B17)。处理流程移动至步骤S106。当 再传输区域信息指示零区域时，图像传输单元14可以结束该步骤S105而不产生任何再传 输图像包，并进一步省略下个步骤S106。</p>
    <p>在步骤S106中，传输历史存储单元17将输入自图像传输单元14的一组传输区域信 息和序列号存储在自身的存储区域中。传输历史存储单元17以列表格式管理各个数据组， 并将输入的数据组增加至所述列表。在增加该数据组之后，传输历史存储单元17通知图 像传输单元14该增加处理（图5中B18)，并且接收到该信息的图像传输单元14通知再传 输图像产生单元15再传输图像包已经传输至客户终端2 (图5中B19)。接收到该信息的 再传输图像产生单元15将已经产生再传输图像的信息返回至再传输请求接收单元16 (图 5中B20)。</p>
    <p>此后，判断用户是否给出结束屏幕共享的指令（S108)，当给出该指令时（S108:是） 处理结束，或者当未给出该指令时（S108:否）处理返回至SIOI。</p>
    <p>接着，参照图3和图7说明在该屏幕共享系统的客户终端2的处理。图7是显示在客 户终端2的处理流程的流程图。</p>
    <p>在步骤S201中，正与服务器设备1进行屏幕共享的客户终端2的图像接收单元21确 认图像包或再传输图像包（总称为"被接收数据包"）是否通过网络3从服务器设备1到达 接收缓冲器（未显示）。当被接收数据包已经到达时（S201:是），处理流程移动至步骤S202。 当被接收数据包未到达时（S201:否），重复进行该步骤中的处理，直到能确认被接收数据包到达。</p>
    <p>在步骤S202中，图像接收单元21从接收缓冲器提取被接收数据包，并提取被接收数 据包的有效载荷部分中包括的更新图像或再传输图像（总称为"被接收图像"），区域信息或 再传输区域信息（总称为"接收区域信息"）以及序列号。图像接收单元21将所提取的被接 收图像和所提取的接收区域信息输入至帧缓冲器22。当被接收图像和接收区域信息从图像 接收单元21输入时，帧缓冲器22用该被接收图像重写并更新自身的存储区域的接收区域 信息中指示的区域。帧缓冲器22将所储存的桌面屏幕的图像输出至显示控制单元23，并 且显示控制单元23显示该图像。处理流程移动至步骤S203。</p>
    <p>在步骤S203中，图像接收单元21基于提取自被接收数据包的序列号判断是否必须请 求再传输。具体而言，图像接收单元21参考自身的序列号计数值存储器中储存的序列号 计数值，并检&#26619;所提取的序列号是否符合该序列号计数值。在符合的情形中，图像接收单 元21判断不需要再传输请求（S203:否）。</p>
    <p>在不符合的情形中并且当所提取的序列号比序列号计数值新时，图像接收单元21判 断再传输请求必须（S203:是）。举例来说，假定序列号计数值是100而序列号是103。图 像接收单元21判断对应于序列号100， 101和102的被接收数据包已经丢失，并判断必须 请求再传输这些数据包。另一方面，当序列号比序列号计数值老时（例如，98)，图像接 收单元21判断之前到达的被接收数据包已冗余到达，并丢弃该被接收数据包（判断不需 要再传输请求)。</p>
    <p>当序列号和序列号计数值相符时，图像接收单元21将序列号计数值递增1。即，图像 接收单元21将序列号计数值更新为向序列号增加1所得的数值。此外，当序列号比序列 号计数值新时，也用向序列号增加l所得的数值更新序列号计数值。举例来说，当序列号 计数值是100而序列号是103时，序列号计数值被更新为104 (=103+1)。当屏幕共享开始 时序列号计数值被重置为零，并且当序列号计数值超过指定值（与服务器设备l中的图像 传输单元14的序列号计数值的指定值相同的值）时被再次重置为零。</p>
    <p>当以上判断再传输请求必须时（S203:是），处理流程移动至步骤S204，并且当判断 再传输请求不必时（S203:否），处理流程返回至步骤S201。</p>
    <p>在步骤S204中，图像接收单元21将需要为其发送再传输请求的被接收数据包的序列 号输入至再传输请求传输单元24，从而指令向服务器设备1传输再传输请求。再传输请求 传输单元24产生包括该输入序列号的再传输请求数据包，并将其通过网络3传输至服务</p>
    <p>器设备1。当为其发送再传输请求的被接收数据包的数量多于一个时， 一个再传输请求数 据包可以包括所有对应的序列号，或者可以产生多个再传输请求数据包。当再传输请求数 据包的传输完成时，判断用户是否给出结束屏幕共享的指令（S205)，当给出指令时（S205: 是）处理结束，或者当未给出指令时（S205:否）处理流程返回至步骤S201。</p>
    <p>此处，将参照图9，图10和图11用具体实例说明图6的步骤S103中实行的再传输区 域信息的计算处理的细节。</p>
    <p>图9分别显示从服务器设备1传输至客户终端2的四个图像包中包括的区域信息和序 列号数据组的实例。在这些实例中，假定桌面的横宽（宽度）为640，竖宽（高度）为480。 此外，序列号从O开始，并且在该实例中从0到3显示区域信息IOOOA， IOOOB， 1000C 和IOOOD。图IO说明由这些规则表示的区域。服务器设备1以序列号的升序传输图像包， 并将这些区域信息和序列号储存在传输历史存储单元17中。</p>
    <p>此处将说明序列号1的图像包在网络3上丢失的情形中的处理。假定客户终端2的图 像接收单元21已经完成接收对应于序列号O的图像包，并且图像接收单元21的存储区域 中储存的序列号计数值是l。此时，假定由图像接收单元21新接收的图像包中包括的序列 号是2。作为根据步骤S203中的程序与对应序列号比较序列号计数值的结果，图像接收单 元21判断序列号1的数据包已经丢失，并判断必须传输再传输请求。结果，再传输请求 传输单元24产生包括序列号1的再传输请求数据包，并将其传输至服务器设备1 。</p>
    <p>通过再传输请求接收单元16接收到再传输请求数据包中包括的序列号1时，服务器 设备1的再传输图像产生单元15将其输入至传输历史存储单元17。传输历史存储单元17 参考存储信息，并作为响应输出对应于序列号1的区域信息IOOOB，以及对应于比系列号 l新的序列号即序列号2， 3的区域信息1000C, IOOOD。</p>
    <p>接着，再传输图像产生单元15假定图像信息1000B为"请求区域信息"，区域信息 IOOOC， IOOOD为"已传输区域信息"。于是再传输图像产生单元15从请求区域信息中指示 的区域中计算排除与已传输区域信息重叠的部分的作为再传输区域的结果。S卩，再传输图 像产生单元15实行这样的计算，即从区域信息1000B的区域中削除与区域信息IOOOC， IOOOD重叠的区域，并作为结果获取图11所示的再传输区域1020。再传输图像产生单元 15假定指示再传输区域1020的信息为"再传输区域信息"。再传输区域1020可以表示为多 个矩形区域的总和。在图11的实例中，该信息可以表示为两个矩形区域1020A和1020B 的总和。接着，再传输图像产生单元15将再传输区域1020输入至帧缓冲器12，并获取对</p>
    <p>应于该再传输区域1020的图像（最新图像）。</p>
    <p>如上所述，在图6的步骤S106中，进行将一组区域信息和序列号以列表格式储存在 传输历史存储单元17中的处理。在该处理中， 一组新输入的区域信息和序列号被增加至 列表尾端，并且该数据组一旦储存就一直维持储存直至屏幕共享结束。因此，因为所述列 表信息无限增加，因此就有传输历史存储单元17的存储区域可能迟早会耗尽的可能性。 可以使用以下方法作为处理该问题的方法。</p>
    <p>第一方法是以适当的定时时刻擦除所述列表的信息的方法。再传输图像产生单元15 在每次新请求传输历史存储单元17储存数据组时都将计时器设定为适当的时间，并且在 计时器在设定时间通知的时刻从所述列表删除该对应的数据组。根据该方法，有这样的可 能性，即当接收到再传输请求数据包时对应于从客户终端2指定的序列号的数据组可能已 经删除，但通过采用足够长的计时器设定时间，这样的事件可以避免。在接收到对应于已 删除序列号的再传输请求数据包的情形中，传输历史存储单元17通知再传输图像产生单 元15不存在具有该序列号的数据组，并且在接收到该信息时，再传输图像产生单元15可 以放弃再传输并且不产生任何再传输图像包。使用上述方法，可以相对简单地抑制传输历 史存储单元17中的信息量。</p>
    <p>作为第二方法，也可以使用客户终端2定时通知服务器设备1图像接收单元21中储 存的序列号计数值的方法。在该情形中，服务器设备1的再传输图像产生单元15可以将 从所通知的序列号计数值递减1所得的数值视为客户终端2最新成功接收的数据包的序列 号。因此，比该数值老的序列号被视为已经由客户终端2接收，并且判断具有这些老序列 号的数据组不再必须，传输历史存储单元17被请求擦除这些数据组。使用上述方法也可 以抑制传输历史存储单元17中的信息量。</p>
    <p>此处对图7中的步骤S204所进行的说明是，当请求其再传输的被接收数据包（图像 包或再传输图像包）的数量多于一个时，客户终端2可以将对应于所有再传输请求数据包 的序列号包括在一个再传输请求数据包中。因此，当再传输请求数据包中包括的序列号数 量多于一个时，服务器设备1也可以对于多个序列号产生一个再传输图像包，而非对于多 个序列号单独产生再传输图像数据包。下文将使用图9和图10说明其实例。</p>
    <p>假定客户终端2接收对应于序列号0和1的图像包失败。此时，图像接收单元21通 过再传输请求传输单元24将关于序列号0和1的再传输请求发送到服务器设备1 。响应该 请求，服务器设备1中的再传输图像产生单元15如下产生对应于两个序列号0和1的一 个再传输图像包。</p>
    <p>再传输图像产生单元15将序列号0和1输出至传输历史存储单元17，并自序列号0 向前从传输历史存储单元17获取区域信息。在自序列号0向前接收区域信息时，传输图 像产生单元15假定对应于序列号0和1的区域信息为"请求区域信息"，并且假定对应于比 序列号0和1新的序列号的区域信息（此处对应于序列号2和3)为"已传输区域信息"， 然后实行以下处理。</p>
    <p>首先，在计算所有请求区域信息中指示的区域的总和（逻辑和）之后，通过从所计算 的总和区域中排除与已传输区域信息相重叠的区域获得的结果被计算为再传输区域，并且 指示该区域的信息被假定为"再传输区域信息"。图12显示该再传输区域信息的实例。参考 数字1030表示一个再传输区域。此后，再传输图像产生单元15将再传输区域信息输入至 帧缓冲器12，获取对应于该再传输区域的图像（最新图像），并将所获取的最新图像通过 图像传输单元14传输至服务器设备1。使用上述方法，可以节省时间和避免两次传输与序 列号0和1重叠的区域的麻烦，并且降低所使用的通信带宽。</p>
    <p>如上所述，根据该实施例，服务器设备将过去传输的图像包中包括的一组区域信息和 序列号作为历史储存，并且当接收到再传输请求时计算从对应于该序列号的区域信息中指 示的区域中排除与对应于比已请求其再传输的序列号新的所有序列号的区域信息中指示 的区域相重叠的区域获得的作为再传输区域的区域，以及从帧缓冲器获取再传输区域中的 图像并传输该图像。通过该方法，服务器设备可以减少再传输的数据量，不再需要分别储 存过去传输的图像包中包括的图像，从而减少存储区域。本发明也可方便地应用于如基于 多频道方案或类似方案传送桌面的情形中服务器设备的通信频带上的负载可能增加的情 形，并且能够期待本发明将发挥其全部效用。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101339497B?cl=zh">CN101339497B</a></td><td class="patent-data-table-td patent-date-value">2008年8月28日</td><td class="patent-data-table-td patent-date-value">2011年3月30日</td><td class="patent-data-table-td ">青岛海信移动通信技术股份有限公司</td><td class="patent-data-table-td ">一种显示Java软件运行时产生的图像的方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101977324A?cl=zh">CN101977324A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年11月9日</td><td class="patent-data-table-td patent-date-value">2011年2月16日</td><td class="patent-data-table-td ">青岛海信宽带多媒体技术有限公司</td><td class="patent-data-table-td ">一种实现屏幕共享的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103218162A?cl=zh">CN103218162A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年3月26日</td><td class="patent-data-table-td patent-date-value">2013年7月24日</td><td class="patent-data-table-td ">广东欧珀移动通信有限公司</td><td class="patent-data-table-td ">一种终端操作方法及装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103338181A?cl=zh">CN103338181A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年2月17日</td><td class="patent-data-table-td patent-date-value">2013年10月2日</td><td class="patent-data-table-td ">株式会社东芝</td><td class="patent-data-table-td ">服务器、屏幕传送系统和屏幕传送方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103595715A?cl=zh">CN103595715A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年11月8日</td><td class="patent-data-table-td patent-date-value">2014年2月19日</td><td class="patent-data-table-td ">腾讯科技(成都)有限公司</td><td class="patent-data-table-td ">用于桌面直播的信息共享方法及装置</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04N0007173000">H04N7/173</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012700000">H04L12/70</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012953000">H04L12/953</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012911000">H04L12/911</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04N0021240000">H04N21/24</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0013000000">G06F13/00</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012801000">H04L12/801</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04N0021238000">H04N21/238</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029080000">H04L29/08</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G09G0005000000">G09G5/00</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F3/1454">G06F3/1454</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YqRcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G09G2330/08">G09G2330/08</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">G06F3/14T</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2008年4月30日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2008年6月25日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年4月6日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/e2f8ce79b581df22563f/CN101170575A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E5%A4%87%E5%92%8C%E5%B1%8F%E5%B9%95%E5%85%B1%E4%BA%AB%E6%96%B9%E6%B3%95.pdf?id=YqRcBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0s41UC_2CYePvF9lqpTNZNHcGK3g"},"sample_url":"https://www.google.com/patents/reader?id=YqRcBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>