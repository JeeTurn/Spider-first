<!DOCTYPE html><html><head><title>专利 CN103164227A - 一种窗口图像的采集方法及装置 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种窗口图像的采集方法及装置"><meta name="DC.contributor" content="季光" scheme="inventor"><meta name="DC.contributor" content="北京视博云科技有限公司" scheme="assignee"><meta name="DC.date" content="2013-3-28" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种窗口图像的采集方法及装置，解决现有窗口图像采集方法无法采集全部应用的窗口图像以及工作量大，效率低的问题。本方法包括：获取待采集窗口图像的窗口句柄，为该句柄创建设定大小的缩略图，拦截D3D API调用，获取对应该缩略图的窗口纹理在显存中的存储地址信息，根据该地址从显存中采集窗口图像。本发明中为窗口句柄创建缩略图时，操作系统会自动在显存中为该缩略图创建窗口纹理，只需要通过拦截D3D API调用，即可获取显存中对应的窗口纹理的存储地址，从而获取该窗口图像，简便有效；并且本发明实施例提供的采集方法，可以采集任何应用的窗口图像，节省了开发的时间和成本，提高了窗口图像的采集效率。"><meta name="DC.date" content="2013-6-19"><meta name="DC.relation" content="CN:101154150:A" scheme="references"><meta name="DC.relation" content="CN:101527690:A" scheme="references"><meta name="DC.relation" content="CN:102800122:A" scheme="references"><meta name="DC.relation" content="US:20100277598:A1" scheme="references"><meta name="DC.relation" content="WO:1997038365:A1" scheme="references"><meta name="citation_reference" content="BART DE SMET: &quot;Programming the Windows Vista DWM in C#&quot;, 《HTTP://COMMUNITY.BARTDESMET.NET/BLOGS/BART/ARCHIVE/2006/10/05/4495.ASPX》, 5 October 2006 (2006-10-05)"><meta name="citation_reference" content="JUSTIN STENNING: &quot;C# &#8211; SCREEN CAPTURE WITH VISTA&quot;, 《HTTP://SPAZZARAMA.COM/2009/02/12/SCREEN-CAPTURE-WITH-VISTA-DWM/》, 12 February 2009 (2009-02-12)"><meta name="citation_reference" content="LORENZCK: &quot;Is it possible to capture a window with windows 7 DWM thumbnail in it?&quot;, 《HTTP://STACKOVERFLOW.COM/QUESTIONS/2196268/IS-IT-POSSIBLE-TO-CAPTURE-A-WINDOW-WITH-WINDOWS-7-DWM-THUMBNAIL-IN-IT》, 1 June 2010 (2010-06-01)"><meta name="citation_patent_publication_number" content="CN:103164227:A"><meta name="citation_patent_application_number" content="CN:201310105105"><link rel="canonical" href="https://www.google.com/patents/CN103164227A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN103164227A?cl=zh"/><meta name="title" content="专利 CN103164227A - 一种窗口图像的采集方法及装置"/><meta name="description" content="本发明公开了一种窗口图像的采集方法及装置，解决现有窗口图像采集方法无法采集全部应用的窗口图像以及工作量大，效率低的问题。本方法包括：获取待采集窗口图像的窗口句柄，为该句柄创建设定大小的缩略图，拦截D3D API调用，获取对应该缩略图的窗口纹理在显存中的存储地址信息，根据该地址从显存中采集窗口图像。本发明中为窗口句柄创建缩略图时，操作系统会自动在显存中为该缩略图创建窗口纹理，只需要通过拦截D3D API调用，即可获取显存中对应的窗口纹理的存储地址，从而获取该窗口图像，简便有效；并且本发明实施例提供的采集方法，可以采集任何应用的窗口图像，节省了开发的时间和成本，提高了窗口图像的采集效率。"/><meta property="og:title" content="专利 CN103164227A - 一种窗口图像的采集方法及装置"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN103164227A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN103164227A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=1-y-CAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN103164227A&amp;usg=AFQjCNEpZuhBuRsuZOInsdKKVX5opndbNQ" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/12348cfe09072ae93378/CN103164227A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/12348cfe09072ae93378/CN103164227A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN103164227A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN103164227A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN103164227A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种窗口图像的采集方法及装置，解决现有窗口图像采集方法无法采集全部应用的窗口图像以及工作量大，效率低的问题。本方法包括：获取待采集窗口图像的窗口句柄，为该句柄创建设定大小的缩略图，拦截D3D API调用，获取对应该缩略图的窗口纹理在显存中的存储地址信息，根据该地址从显存中采集窗口图像。本发明中为窗口句柄创建缩略图时，操作系统会自动在显存中为该缩略图创建窗口纹理，只需要通过拦截D3D...</span><span itemprop="url">https://www.google.com/patents/CN103164227A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN103164227A - 一种窗口图像的采集方法及装置</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN103164227A - 一种窗口图像的采集方法及装置" title="专利 CN103164227A - 一种窗口图像的采集方法及装置"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN103164227 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201310105105</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2013年6月19日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2013年3月28日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2013年3月28日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201310105105.9, </span><span class="patent-bibdata-value">CN 103164227 A, </span><span class="patent-bibdata-value">CN 103164227A, </span><span class="patent-bibdata-value">CN 201310105105, </span><span class="patent-bibdata-value">CN-A-103164227, </span><span class="patent-bibdata-value">CN103164227 A, </span><span class="patent-bibdata-value">CN103164227A, </span><span class="patent-bibdata-value">CN201310105105, </span><span class="patent-bibdata-value">CN201310105105.9</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%AD%A3%E5%85%89%22">季光</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8C%97%E4%BA%AC%E8%A7%86%E5%8D%9A%E4%BA%91%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">北京视博云科技有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103164227A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103164227A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103164227A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (5),</span> <span class="patent-bibdata-value"><a href="#npl-citations">非专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=1-y-CAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201310105105&amp;usg=AFQjCNH55hKqx2UAqIO04BUxhjaCnaswTA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=1-y-CAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D103164227A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHADm4bINTld_4RnPtePKckKTtQlA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT125223427" lang="ZH" load-source="patent-office">一种窗口图像的采集方法及装置</invention-title>
      </span><br><span class="patent-number">CN 103164227 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA116482621" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种窗口图像的采集方法及装置，解决现有窗口图像采集方法无法采集全部应用的窗口图像以及工作量大，效率低的问题。本方法包括：获取待采集窗口图像的窗口句柄，为该句柄创建设定大小的缩略图，拦截D3D&#160;API调用，获取对应该缩略图的窗口纹理在显存中的存储地址信息，根据该地址从显存中采集窗口图像。本发明中为窗口句柄创建缩略图时，操作系统会自动在显存中为该缩略图创建窗口纹理，只需要通过拦截D3D&#160;API调用，即可获取显存中对应的窗口纹理的存储地址，从而获取该窗口图像，简便有效；并且本发明实施例提供的采集方法，可以采集任何应用的窗口图像，节省了开发的时间和成本，提高了窗口图像的采集效率。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(10)</span></span></div><div class="patent-text"><div mxw-id="PCLM53363802" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种窗口图像的采集方法，其特征在于，所述方法包括:  采集装置获取待采集窗口图像的窗口句柄；  通过桌面管理系统的缩略图应用程序编程接口 DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图；  拦截DWM的Direct3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；  根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.如权利要求1所述的采集方法，其特征在于，所述在显存中过滤出新建的与该设定大小对应的窗口纹理的存储地址信息后,所述方法还包括:  将所述存储地址信息传递给其他装置，使其他装置通过所述存储地址信息，获取显存中保存的窗口图像数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.如权利要求2所述的采集方法，其特征在于，将所述存储地址信息传递给其他装置包括:  将所述存储地址信息包装为Direct3D共享资源；  将所述共享资源的句柄传递给其他装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.如权利要求1所述的采集方法，其特征在于，当窗口被最小化后还原或DWM被操作系统临时禁用后重新启用时，所述方法还包括:  通过DWM Thum bnail API，为所述窗口句柄创建设定大小的缩略图；  拦截DWM的Direct3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；  根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求1所述的采集方法，其特征在于，所述设定大小的缩略图包括:  与窗口尺寸相等的缩略图、大于窗口尺寸的缩略图和小于窗口尺寸的缩略图。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6.一种窗口图像的采集装置，其特征在于，所述装置包括:  获取模块，用于获取待采集窗口图像的窗口句柄；  创建模块，用于通过桌面管理系统的缩略图应用程序编程接口 DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图；  拦截模块，用于拦截DWM的Direct3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；  采集模块，用于根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求6所述的装置，其特征在于，所述装置还包括:  传递模块，用于将所述存储地址信息传递给其他装置，使其他装置通过所述存储地址信息，获取显存中保存的窗口图像数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.如权利要求7所述的装置，其特征在于，所述传递模块，具体用于将所述存储地址信息包装为Direct3D共享资源；将所述共享资源的句柄传递给其他装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.如权利要求6所述的装置，其特征在于，所述装置还包括:  判断模块，用于当前状态是否为窗口被最小化后还原或DWM被操作系统临时禁用后重新启用状态，当判断结果为是时，调用所述创建模块；  所述创建模块，用于通过DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图；  所述拦截模块，用于拦截DWM的Direct3D API调用，在显存中过滤出新建的与该设定大小对应的窗口纹理的存储地址信息；  所述采集模块，用于根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.如权利要求6所述的装置，其特征在于，所述采集模块，具体用于根据所述存储地址信息，周期性地采集显存中该地址保存的窗口图像数据。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES60407234" lang="ZH" load-source="patent-office" class="description">
    <p>一种窗口图像的采集方法及装置</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及视频图像处理技术领域，尤其涉及一种窗口图像的采集方法及装置。背景技术</p>
    <p>[0002]	窗口采集可以将在Windows系统中运行的各应用的窗口图像采集下来，并保存为位图。如果只采集某一时间点的窗口图像，则可以获得静止的、该时间点的窗口图像的截图；如果采集连续时间段内的窗口图像，则可以获得动态的、该连续时间段内的窗口图像的视频。</p>
    <p>[0003]	现有技术在进行窗口图像的采集时，可以基于Windows图形设备接口(GraphicsDevice Interface, GDI)应用程序编程接口(Application Programming Interface, API)进行窗口图像采集，或者也可以采用特定类型的API进行窗口图像的采集。</p>
    <p>[0004]	具体的，在基于Windows⑶I API进行窗口图像的采集时，需要先获得指定窗口的上下文句柄(Handle of Device Context, HDC),再利用GDI API的BitBlt等函数,将窗口图像拷贝到指定位置。该方法只能采集到基于GDI渲染的窗口图像，而很多应用的窗口图像并不是基于⑶I渲染的，比如很多游戏应用、视频应用等并不是基于⑶I渲染的。因此采用该方法采集窗口图像时，只能采集到基于GDI渲染的应用的窗口图像，无法采集到非基于⑶I渲染的应用的窗口图像。</p>
    <p>[0005]	采用特定类型的API进行窗口图像的采集时，以Direct3D (以下简称D3D)API为例进行说明:通过开发拦截工具，拦截D3D API的调用，获取基于D3D的应用窗口图像的地址，进而获得图像。利用这种方式进行窗口图像的采集时，只能采集到基于该特定类型的API渲染的窗口图像，但游戏、视频等大量应用基于的API类型繁多，如D3D，DirectDraw和OpenGL等API类型，并且同一类型的API又有多个不同的版本，因此采用该方法采集窗口图像时，需要针对每种类型的API的每个版本都开发拦截工具，工作量很大，并且每种拦截工具的使用范围极小，从而影响了窗口图像的采集效率。</p>
    <p>发明内容</p>
    <p>[0006]	本发明实施例提供一种窗口图像的采集方法及装置，用以解决现有技术采集窗口图像时，无法采集全部应用的窗口图像，以及在窗口图像采集时工作量大、效率低的问题。</p>
    <p>[0007]	本发明实施例提供一种窗口图像的采集方法，所述方法包括:</p>
    <p>[0008]	采集装置获取待采集窗口图像的窗口句柄；</p>
    <p>[0009]	通过桌面管理系统的缩略图应用程序编程接口 DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图；</p>
    <p>[0010]	拦截DWM的Direct3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；</p>
    <p>[0011 ] 根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0012]	本发明实施例提供一种窗口图像的采集装置，所述装置包括:[0013]	获取模块，用于获取待采集窗口图像的窗口句柄；</p>
    <p>[0014]	创建模块，用于通过桌面管理系统的缩略图应用程序编程接口 DWM ThumbnailAPI，为所述窗口句柄创建设定大小的缩略图；</p>
    <p>[0015]	拦截模块，用于拦截DWM的Direct3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；</p>
    <p>[0016]	采集模块，用于根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0017]	本发明实施例提供一种窗口图像的采集方法及装置，该方法包括:获取待采集窗口图像的窗口句柄，为该句柄创建设定大小的缩略图，拦截D3D API调用，获取对应该缩略图的窗口纹理在显存中的存储地址信息，根据该地址从显存中采集窗口图像。在本发明中为窗口句柄创建缩略图时，操作系统会自动在显存中为该缩略图创建窗口纹理，此时只需要通过拦截D3D API调用，即可获取显存中该缩略图对应的窗口纹理的存储地址，从而获取该窗口图像数据，简便有效；并且本发明实施例提供的方法可以采集任何应用的窗口图像数据，节省了开发的时间和成本，提高了窗口图像的采集效率。</p>
    <p>附图说明</p>
    <p>[0018]图1为本发明实施例提供的一种窗口图像的采集过程示意图；</p>
    <p>[0019]	图2A为本发明实施例提供的Windows桌面的示意图；</p>
    <p>[0020]	图2B为本发明实施例提供的显存中纹理存储的示意图；</p>
    <p>[0021]图3为本发明实施例提供的该窗口图像的详细采集过程示意图；</p>
    <p>[0022]	图4为发明实施例提供的该窗口图像的另一采集过程示意图；</p>
    <p>[0023]图5为本发明实施例提供的一种窗口图像的采集装置结构示意图。</p>
    <p>具体实施方式</p>
    <p>[0024]	本发明为了减小窗口图像采集软件的开发周期及成本，提高窗口图像的采集效率，提供了 一种窗口图像的采集方法及装置。</p>
    <p>[0025]	下面结合说明书附图，对本发明进行详细说明。</p>
    <p>[0026]图1为本发明实施例提供的一种窗口图像的采集过程示意图，该过程包括以下步骤:</p>
    <p>[0027]	SlOl:采集装置获取待采集窗口图像的窗口句柄。</p>
    <p>[0028]	句柄是操作系统为应用程序中不同对象分配的标识，例如窗口、按键、滚动条、输出设备等都有其对应的句柄，因此通过句柄可以访问相应的对象的信息。在本发明实施例中为了采集窗口图像，在此获取了待采集窗口图像的窗口句柄。具体的，在本发明实施例中可以通过Windows API来获取待采集窗口图像的窗口句柄。</p>
    <p>[0029]	另外，本发明实施例中的窗口图像，可以是基于任何类型的API渲染的窗口图像。</p>
    <p>[0030]	S102:通过DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图。</p>
    <p>[0031]	DWM Thumbnail API可以为任意窗口创建缩略图。为了实现窗口图像的采集，在本发明实施例中需要通过DWM Thumbnail API，为该待采集窗口图像的窗口句柄创建缩略图，其中该缩略图可以为系统资源可承受下的任意大小，该缩略图的宽度方向可以包括w个像素，高度方向可以包括h个像素，其中w和h都为大于O的正整数。[0032]	该设定大小的缩略图包括:与窗口尺寸相等的缩略图、大于窗口尺寸的缩略图和小于窗口尺寸的缩略图。</p>
    <p>[0033]	S103:拦截DWM的D3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息。</p>
    <p>[0034]	DWM将桌面上的窗口图像拆分成若干素材，将这些素材以D3D纹理的方式保存在显存中。当DWM接收到创建缩略图的命令后，通过D3D API对这些纹理进行组合，从而形成窗口。此时拦截DWM的D3D API调用即可获取该显存中新建的宽度包含w个像素点，高度包含h个像素点的窗口纹理的存储地址信息。</p>
    <p>[0035]	S104:根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0036]	当获取了显存中该窗口图像的纹理的存储地址信息后，访问显存，根据该存储地址信息即可采集到该窗口图像数据。</p>
    <p>[0037]	由于在本发明实施例中为窗口句柄创建缩略图，此时系统会在显存中为该缩略图创建窗口纹理，此时只需要通过拦截D3D API调用，即可获取显存中该缩略图对应的窗口纹理的存储地址，从而获取该窗口图像。并且本发明实施例提供的该窗口图像的采集方法，可以采集任何应用的窗口图像，节省了开发的周期和成本，提高了窗口图像的采集效率。另夕卜，本发明实施例提供的窗口图像的采集方法，从显存读取窗口图像的D3D API被显卡硬件加速，因此提高了窗口图像采集的效率。</p>
    <p>[0038]	Microsoft Windows为了实现更好的用户体验,采用了先进的桌面窗口管理系统&#8212;&#8212;DWM。DWM将桌面上的窗口图像拆分成若干素材,例如可以为窗口内的动态画面和控件等,之后DWM将这些素材以D3D纹理的方式保存在显存中。</p>
    <p>[0039]	图2A和图2B为本发明实施例提供的Windows桌面及显存中纹理存储的示意图，Windows桌面上显示有窗口图像2、窗口图像上方的标题栏1、缩略图23和任务栏24、其中窗口图像又包括动态画面21和控件22。DWM将桌面上显示的各部分拆分为若干个素材，将这些素材以D3D纹理的形式保存在显存中。具体的显存中保存的各纹理的示意图如图2B所示，这些纹理分别为动态画面21、控件22、缩略图23和任务栏24。</p>
    <p>[0040]	这些纹理虽然保存在显存中，但是对于用户来说，其并不知道显存中每一部分保存的是哪个纹理信息，当需要获取窗口图像时，无法准确的从显存中准确的获取纹理的信息。另外，即使从显存中获取了窗口图像的纹理，但是由于组成窗口图像的纹理可能包括多个，对于用户来说其并不知道哪个纹理代表的是窗口图像的哪部分，因此也就没办法准确的获取窗口图像。</p>
    <p>[0041]	因此，在本发明实施例中为了准确的获取窗口图像，在从显存中获取窗口图像的纹理之前，首先通过DWM Thumbnail API为窗口句柄创建一个设定大小的缩略图，该缩略图可以为系统资源承受下的任意大小，该设定大小的缩略图可以是与窗口图像大小相等的缩略图，此时采集到的窗口图像将会与原始窗口图像大小相等无变形，当该设定大小的缩略图是比窗口图像大的缩略图时，采集到的窗口图像将会比原始窗口图像大，当该设定大小的缩略图是比窗口图像小的缩略图时，采集到的窗口图像将会比原始窗口图像小。</p>
    <p>[0042]	当DWM Thumbnail API根据该设定大小的缩略图，在显存中进行缩略图的创建时，拦截DWM的D3D API调用，从而获取显存中该缩略图对应的窗口纹理的存储地址信息，并进一步据此获得窗口图像。其中拦截DWM的D3D API调用属于本领域的公知技术，在本发明实施例中对此不再进行赘述，相信本领域技术人员可以根据本发明实施例描述的方案中获知相应的调用方法。</p>
    <p>[0043]	拦截DWM的D3D调用获取了窗口纹理的存储地址信息后，可以随时根据窗口图像采集的命令，借助显卡硬件加速的D3D API从显存的该存储地址中将窗口图像的信息读取出来。如果在该过程中只接收到一次窗口图像的采集命令，则可以获得当前采集时间点对应的窗口图像的静态截图，如果周期性的接收到窗口图像的采集命令，则可以得到窗口图像的动态视频。</p>
    <p>[0044]	由于D3D API都是显卡硬件直接支持的操作，直接在硬件上执行，相比于其他图像设备操作的API，没有中间处理步骤，执行速度非常快。</p>
    <p>[0045]	另外，本发明实施例提供的该窗口图像的采集方法，当获取了显存中窗口图像的存储地址后，可以随时采集该存储地址中保存的窗口图像数据。但是当当前窗口被最小化后还原，其窗口图像的对应纹理在显存中存储的位置会发生变化，采用之前获取的存储地址，将无法获取其窗口图像；另外当DWM被操作系统临时禁用后重新启用后，由于DWM在中间被禁用，因此将导致重新启用后的DWM无法获得显存中窗口图像的纹理对应的存储地址。</p>
    <p>[0046]	在本发明实施例中为了克服该问题，当窗口被最小化后还原或DWM被操作系统临时禁用后重新启用时，为了采集到窗口图像，该采集方法还包括:</p>
    <p>[0047]	通过DWM Thumbnail API，为所述窗口句柄重新创建设定大小的缩略图；</p>
    <p>[0048]	拦截DWM的Direct3D API调用，在显存中再次过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；</p>
    <p>[0049]	根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0050]	图3为本发明实施例提供的该窗口图像的详细采集过程示意图，该过程包括以下步骤:</p>
    <p>[0051]	S301:采集装置获取待采集窗口图像的窗口句柄。</p>
    <p>[0052]	S302:通过DWM Thumbnail API，为所述窗口句柄创建宽度方向包含w个像素点，高度方向包含h个像素点的缩略图，其中w和h为大于O的正整数。</p>
    <p>[0053]	S303:拦截DWM的D3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息。</p>
    <p>[0054]	S304:根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0055]	S305:判断当前是否为窗口被最小化后还原或DWM被操作系统临时禁用后重新启用的状态，当判断结果为是时，进行步骤S302，否则，进行步骤S305。</p>
    <p>[0056]	在本发明的上述实施例中，S305可以位于S302之后的任意两步骤之间，若当前为窗口被最小化后还原或DWM被操作系统临时禁用后重新启用状态时，需要重新采用上述S302&#12316;S304的方式获取窗口图像数据。</p>
    <p>[0057]	采集装置采集到了窗口图像数据后，当其他装置也需要获取该窗口图像数据时，例如当该其他装置为编码装置时，采集装置需要将该窗口图像数据提供给该其他装置。一般采集装置在向其他装置提供窗口图像数据时，将该窗口图像数据拷贝到临时缓冲区内，其他装置再从该临时缓冲区中获取该窗口图像数据。但是该方法中对窗口图像数据需要进行两次拷贝，才能将该窗口图像数据提供给其他装置，从而影响了窗口图像数据的提供效率，并影响了其他装置采用该窗口图像数据进行后续处理的效率。</p>
    <p>[0058]	在本发明实施例中为了有效的提高窗口图像数据，从采集装置到其他装置的传送效率，该窗口图像的采集过程还包括:</p>
    <p>[0059]	所述在显存中过滤出新建的与该设定大小对应的窗口纹理的存储地址信息后，将所述存储地址信息传递给其他装置，使其他装置通过所述存储地址信息，获取显存中保存的窗口图像数据。</p>
    <p>[0060]	受制于操作系统本身的设计，在两个不同的装置之间，通过不同进程直接传递数据存储地址信息是无效的。因此，具体的，在本发明实施例中将所述存储地址信息传递给其他装置包括:</p>
    <p>[0061 ] 将所述存储地址信息包装为D3D共享资源；</p>
    <p>[0062]	将所述共享资源的句柄传递给其他装置。</p>
    <p>[0063]	例如，在本发明实施例中编码装置需要将采集装置采集的窗口图像数据进行编码，当采集装置获取到窗口图像的纹理在显存中的存储地址信息后，将该存储地址信息包装为共享资源发送给编码装置，编码装置接收到该共享资源后解析获得该存储地址信息，从显存中对应地址获取窗口图像数据并编码。</p>
    <p>[0064]	图4为发明实施例提供的该窗口图像的另一采集过程示意图，该过程包括以下步骤:</p>
    <p>[0065]	S401:采集装置获取待采集窗口图像的窗口句柄。</p>
    <p>[0066]	S402:通过DWM Thumbnail API，为所述窗口句柄创建宽度方向包含w个像素点，高度方向包含h个像素点的缩略图，其中w和h为大于O的正整数。</p>
    <p>[0067]	S403:拦截DWM的D3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息。</p>
    <p>[0068]	S404:采用D3D API将该存储地址信息包装为共享资源，传递给编码装置。</p>
    <p>[0069]	S405:编码装置解析该共享资源获取该存储地址信息，从显存中对应地址获取该窗口图像数据进行编码。</p>
    <p>[0070]	S406:根据所述存储地址信息，采集装置采集显存中该地址保存的窗口图像数据。</p>
    <p>[0071]	在上述过程中步骤S404&#12316;S405与S406在执行时不分先后顺序，采集装置可以先获取该存储地址信息，也可以是其他装置先获取该存储地址信息，并不受本发明上述实施例描述的步骤的限制。</p>
    <p>[0072]	具体的，在本发明实施例中采集装置采用D3D API将该存储地址信息包装为D3D共享资源，采集装置中自身的进程将该共享资源句柄通过进程间通信的方式，传递给编码装置的进程，编码装置能够从该句柄中解析出该存储地址信息，从而获得该窗口图像数据并编码。</p>
    <p>[0073]	本发明实施例中在将采集装置采集到的窗口的图像信息，传递给其他装置时，通过进程间传递共享资源句柄，达到传递窗口图像数据的目的，无需进行两次窗口图像数据的拷贝，节省了数据提供的时间，提高了数据提供的效率。</p>
    <p>[0074]	图5为本发明实施例提供的一种窗口图像的采集装置结构示意图，所述装置包括:</p>
    <p>[0075]	获取模块51，用于获取待采集窗口图像的窗口句柄；[0076]	创建模块52，用于通过DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图；</p>
    <p>[0077]	拦截模块53，用于拦截DWM的D3D API调用，在显存中过滤出新建的与该缩略图对应的窗口纹理的存储地址信息；</p>
    <p>[0078]	采集模块54，用于根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0079]	所述装置还包括:</p>
    <p>[0080]	传递模块55，用于将所述存储地址信息传递给其他装置，使其他装置通过所述存储地址信息，获取显存中保存的窗口图像数据。</p>
    <p>[0081]	所述传递模块55，具体用于将所述存储地址信息包装为D3D共享资源；将所述共享资源的句柄传递给其他装置。</p>
    <p>[0082]	所述装置还包括:</p>
    <p>[0083]	判断模块56，用于当前状态是否为窗口被最小化后还原或DWM被操作系统临时禁用后重新启用状态，当判断结果为是时，调用所述创建模块；</p>
    <p>[0084]	所述创建模块52，用于通过DWM Thumbnail API，为所述窗口句柄创建设定大小的缩略图；</p>
    <p>[0085]	所述拦截模块53，用于拦截DWM的D3D API调用，在显存中过滤出新建的与该设定大小对应的窗口纹理的存储地址信息；</p>
    <p>[0086]	所述采集模块54，用于根据所述存储地址信息，采集显存中该地址保存的窗口图像数据。</p>
    <p>[0087]	所述采集模块54，具体用于根据所述存储地址信息，周期性的采集显存中该地址保存的窗口图像数据。</p>
    <p>[0088]	本发明实施例提供一种窗口图像的采集方法及装置，该方法包括:获取待采集窗口图像的窗口句柄，为该句柄创建设定大小的缩略图，拦截D3D API调用，获取对应该缩略图的窗口纹理在显存中的存储地址信息，根据该地址从显存中采集窗口图像。在本发明中为窗口句柄创建缩略图是，操作系统会自动在显存中为该缩略图创建新建窗口纹理，此时只需要通过拦截D3D API调用，即可获取显存中该缩略图对应的窗口纹理的存储地址，从而获取该窗口图像数据，简便有效；并且本发明实施例提供的方法可以采集任何应用的窗口图像数据，节省了开发的时间和成本，提高了窗口图像的采集效率。另外，本发明实施例提供的窗口图像的采集方法，从显存读取窗口图像的D3D API被显卡硬件加速，因此提高了窗口图像采集的效率。</p>
    <p>[0089]	本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质(包括但不限于磁盘存储器、CD-ROM、光学存储器等)上实施的计算机程序产品的形式。</p>
    <p>[0090]	本申请是参照根据本申请实施例的方法、设备(系统)、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。</p>
    <p>[0091]	这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。</p>
    <p>[0092]	这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。</p>
    <p>[0093]	尽管已描述了本申请的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本申请范围的所有变更和修改。</p>
    <p>[0094]	显然，本领域的技术人员可以对本申请进行各种改动和变型而不脱离本申请的精神和范围。这样，倘若本申请的这些修改和变型属于本申请权利要求及其等同技术的范围之内，则本申请也意图包含这些改动和变型在内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101154150A?cl=zh">CN101154150A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2006年9月27日</td><td class="patent-data-table-td patent-date-value">2008年4月2日</td><td class="patent-data-table-td ">联想(北京)有限公司</td><td class="patent-data-table-td ">获取计算机屏幕图像的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101527690A?cl=zh">CN101527690A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年4月13日</td><td class="patent-data-table-td patent-date-value">2009年9月9日</td><td class="patent-data-table-td ">腾讯科技（北京）有限公司</td><td class="patent-data-table-td ">一种截取动态图像的方法、系统及设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102800122A?cl=zh">CN102800122A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年6月20日</td><td class="patent-data-table-td patent-date-value">2012年11月28日</td><td class="patent-data-table-td ">广东威创视讯科技股份有限公司</td><td class="patent-data-table-td ">基于Direct3D技术的图像处理方法及其装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20100277598">US20100277598</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value"></td><td class="patent-data-table-td patent-date-value">2010年11月4日</td><td class="patent-data-table-td ">Mwstory Co., Ltd.</td><td class="patent-data-table-td ">Method and apparatus for capturing anti-aliasing directx multimedia contents moving picture</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO1997038365A1?cl=zh">WO1997038365A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">1997年4月2日</td><td class="patent-data-table-td patent-date-value">1997年10月16日</td><td class="patent-data-table-td ">Anysoft Ltd.</td><td class="patent-data-table-td ">Apparatus for and method of acquiring, processing and routing data contained in a gui window</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="npl-citations"></a><div class="patent-section-header"><span class="patent-section-title">非专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th colspan="3"class="patent-data-table-th">参考文献</th></tr></thead><tr><td class="patent-data-table-td ">1</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">BART DE SMET: "<a href='http://scholar.google.com/scholar?q="Programming+the+Windows+Vista+DWM+in+C%23"'>Programming the Windows Vista DWM in C#</a>", 《HTTP://COMMUNITY.BARTDESMET.NET/BLOGS/BART/ARCHIVE/2006/10/05/4495.ASPX》, 5 October 2006 (2006-10-05)</td></tr><tr><td class="patent-data-table-td ">2</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">JUSTIN STENNING: "<a href='http://scholar.google.com/scholar?q="C%23+%E2%80%93+SCREEN+CAPTURE+WITH+VISTA"'>C# &#8211; SCREEN CAPTURE WITH VISTA</a>", 《HTTP://SPAZZARAMA.COM/2009/02/12/SCREEN-CAPTURE-WITH-VISTA-DWM/》, 12 February 2009 (2009-02-12)</td></tr><tr><td class="patent-data-table-td ">3</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">LORENZCK: "<a href='http://scholar.google.com/scholar?q="Is+it+possible+to+capture+a+window+with+windows+7+DWM+thumbnail+in+it%3F"'>Is it possible to capture a window with windows 7 DWM thumbnail in it?</a>", 《HTTP://STACKOVERFLOW.COM/QUESTIONS/2196268/IS-IT-POSSIBLE-TO-CAPTURE-A-WINDOW-WITH-WINDOWS-7-DWM-THUMBNAIL-IN-IT》, 1 June 2010 (2010-06-01)</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=1-y-CAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0009440000">G06F9/44</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2013年6月19日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年7月24日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/12348cfe09072ae93378/CN103164227A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E7%AA%97%E5%8F%A3%E5%9B%BE%E5%83%8F%E7%9A%84%E9%87%87%E9%9B%86%E6%96%B9%E6%B3%95%E5%8F%8A%E8%A3%85.pdf?id=1-y-CAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U2iQYfZ4hbkuAeZ2MoAkSQZw-HGJw"},"sample_url":"https://www.google.com/patents/reader?id=1-y-CAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>