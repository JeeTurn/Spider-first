<!DOCTYPE html><html><head><title>专利 CN102333071A - 一种工程机械车辆联网通信方法及工程机械车辆联网系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种工程机械车辆联网通信方法及工程机械车辆联网系统"><meta name="DC.contributor" content="刘云海" scheme="inventor"><meta name="DC.contributor" content="杨瑞" scheme="inventor"><meta name="DC.contributor" content="陈文聪" scheme="inventor"><meta name="DC.contributor" content="浙江大学" scheme="assignee"><meta name="DC.date" content="2011-5-26" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种工程机械车辆联网通信方法及工程机械车辆联网系统。该工程机械车辆联网通信方法，包括：步骤1，工程机械车辆或客户终端与服务器建立TCP/IP连接；步骤2，工程机械车辆或客户终端向服务器发送请求验证消息；步骤3，服务器解析请求验证消息，并向工程机械车辆或客户终端发送请求验证响应；步骤4，工程机械车辆或客户终端解析请求验证响应，得到自身的在线标识符。本发明有效地保证了所述服务器和终端之间的通信连接和数据服务，以及在多种工程机械车辆终端和服务器通信的兼容性，很好地促进数据服务协议在工程机械车辆联网系统上的应用。"><meta name="DC.date" content="2012-1-25"><meta name="DC.relation" content="CN:101095104:A" scheme="references"><meta name="DC.relation" content="CN:1510875:A" scheme="references"><meta name="citation_patent_publication_number" content="CN:102333071:A"><meta name="citation_patent_application_number" content="CN:201110138504"><link rel="canonical" href="https://www.google.com/patents/CN102333071A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102333071A?cl=zh"/><meta name="title" content="专利 CN102333071A - 一种工程机械车辆联网通信方法及工程机械车辆联网系统"/><meta name="description" content="本发明公开了一种工程机械车辆联网通信方法及工程机械车辆联网系统。该工程机械车辆联网通信方法，包括：步骤1，工程机械车辆或客户终端与服务器建立TCP/IP连接；步骤2，工程机械车辆或客户终端向服务器发送请求验证消息；步骤3，服务器解析请求验证消息，并向工程机械车辆或客户终端发送请求验证响应；步骤4，工程机械车辆或客户终端解析请求验证响应，得到自身的在线标识符。本发明有效地保证了所述服务器和终端之间的通信连接和数据服务，以及在多种工程机械车辆终端和服务器通信的兼容性，很好地促进数据服务协议在工程机械车辆联网系统上的应用。"/><meta property="og:title" content="专利 CN102333071A - 一种工程机械车辆联网通信方法及工程机械车辆联网系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102333071A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102333071A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=qs6EBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102333071A&amp;usg=AFQjCNGLIji-fOSYjqOmViSh7pAU7R3GWQ" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/85040aa5058c535216d8/CN102333071A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/85040aa5058c535216d8/CN102333071A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102333071A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102333071A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102333071A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种工程机械车辆联网通信方法及工程机械车辆联网系统。该工程机械车辆联网通信方法，包括：步骤1，工程机械车辆或客户终端与服务器建立TCP/IP连接；步骤2，工程机械车辆或客户终端向服务器发送请求验证消 ...</span><span itemprop="url">https://www.google.com/patents/CN102333071A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102333071A - 一种工程机械车辆联网通信方法及工程机械车辆联网系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102333071A - 一种工程机械车辆联网通信方法及工程机械车辆联网系统" title="专利 CN102333071A - 一种工程机械车辆联网通信方法及工程机械车辆联网系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102333071 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201110138504</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2012年1月25日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年5月26日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年5月26日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201110138504.6, </span><span class="patent-bibdata-value">CN 102333071 A, </span><span class="patent-bibdata-value">CN 102333071A, </span><span class="patent-bibdata-value">CN 201110138504, </span><span class="patent-bibdata-value">CN-A-102333071, </span><span class="patent-bibdata-value">CN102333071 A, </span><span class="patent-bibdata-value">CN102333071A, </span><span class="patent-bibdata-value">CN201110138504, </span><span class="patent-bibdata-value">CN201110138504.6</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%88%98%E4%BA%91%E6%B5%B7%22">刘云海</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%A8%E7%91%9E%22">杨瑞</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%99%88%E6%96%87%E8%81%AA%22">陈文聪</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%B5%99%E6%B1%9F%E5%A4%A7%E5%AD%A6%22">浙江大学</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102333071A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102333071A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102333071A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (1),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (3),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=qs6EBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201110138504&amp;usg=AFQjCNHXwAALL9b1lHVKmqDfkJKb7ayTiA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=qs6EBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102333071A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNF_a3G1PRPJLFoZz50t_xwUkH4P-A"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT110167013" lang="ZH" load-source="patent-office">一种工程机械车辆联网通信方法及工程机械车辆联网系统</invention-title>
      </span><br><span class="patent-number">CN 102333071 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA92390590" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种工程机械车辆联网通信方法及工程机械车辆联网系统。该工程机械车辆联网通信方法，包括：步骤1，工程机械车辆或客户终端与服务器建立TCP/IP连接；步骤2，工程机械车辆或客户终端向服务器发送请求验证消息；步骤3，服务器解析请求验证消息，并向工程机械车辆或客户终端发送请求验证响应；步骤4，工程机械车辆或客户终端解析请求验证响应，得到自身的在线标识符。本发明有效地保证了所述服务器和终端之间的通信连接和数据服务，以及在多种工程机械车辆终端和服务器通信的兼容性，很好地促进数据服务协议在工程机械车辆联网系统上的应用。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(10)</span></span></div><div class="patent-text"><div mxw-id="PCLM39648838" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种工程机械车辆联网通信方法，其特征在于，包括：步骤1，工程机械车辆或客户终端与服务器建立TCP/IP连接；步骤2，工程机械车辆或客户终端向服务器发送请求验证消息，请求验证消息中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度和有效负载；协议标识表示请求验证消息为服务器可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证服务；会话标识符为工程机械车辆或客户终端的初始化在线标识符；目的标识符为服务器在线标识符；有效负载为工程机械车辆或客户终端的唯一身份标识；有效负载长度为工程机械车辆或客户终端的唯一身份标识的长度；步骤3，服务器解析请求验证消息，并向工程机械车辆或客户终端发送请求验证响应； 请求验证响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度和有效负载；协议标识表示请求验证响应为工程机械车辆或客户终端可解析的消息； 服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证响应服务；会话标识符为服务器在线标识符；目的标识符为工程机械车辆或客户终端的初始化在线标识符；有效负载为服务器为工程机械车辆或客户终端分配的在线标识符；有效负载长度为服务器为工程机械车辆或客户终端分配的在线标识符的长度；步骤4，工程机械车辆或客户终端解析请求验证响应，得到自身的在线标识符。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.如权利要求1所述的工程机械车辆联网通信方法，其特征在于，该工程机械车辆联网通信方法还包括：步骤5，发送方向接收方发送数据服务请求；数据服务请求中包含协议标识、服务类型、服务标识符、会话标识符以及目的标识符；协议标识表示数据服务请求为接收方可解析的消息；服务类型为状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务或者文件服务；服务标识符表示对应于该状态数据服务、控制数据服务、控制运动服务、 传输总线服务、音视频服务或者文件服务的数据服务；会话标识符为发送方的在线标识符； 目的标识符为接收方的在线标识符；发送方为客户终端或者工程机械车辆而接收方为客户终端、工程机械车辆或者服务器，或者发送方为服务器而接收方为客户终端或者工程机械车辆；步骤6，服务器接收数据服务请求并解析；如果接收方为服务器，则服务器向发送方发送数据服务响应；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为服务器的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度；如果接收方为客户终端或者工程机械车辆，则服务器向接收方转发数据服务请求，接收方解析数据服务请求，并向发送方发送数据服务响应，服务器将数据服务响应转发至发送方；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为接收方的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度； 步骤7，发送方收到数据服务响应进行解析并得到数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.如权利要求2所述的工程机械车辆联网通信方法，其特征在于， 状态数据服务表示提供工程机械车辆的状态数据的服务；控制数据服务表示提供工程机械车辆的数据控制的服务； 控制运动服务表示提供工程机械车辆的运动控制的服务； 传输总线服务表示提供工程机械车辆的传输总线控制的服务； 音视频服务表示提供工程机械车辆的网络音视频的服务； 文件服务表示提供服务器或客户终端或工程机械车辆文件的服务。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.如权利要求1所述的工程机械车辆联网通信方法，其特征在于，步骤3中，优先将服务器收回的在线标识符分配给请求验证的客户终端或者工程机械车辆；收回的在线标识符是与服务器终止连接的客户终端或者工程机械车辆的标识符；不存在收回的在线标识符时，将正在使用的最大在线标识符加1后分配给请求验证的客户终端或者工程机械车辆； 客户终端或者工程机械车辆使用的初始化在线标识符相同。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求1所述的工程机械车辆联网通信方法，其特征在于，客户终端与服务器之间通过有线或者无线网络连接，服务器与工程机械车辆之间通过无线网络连接；无线网络经过受托代理与服务器连接；工程机械车辆定期向受托代理发送心跳包，以维持工程机械车辆之间的通信连接。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6.	一种工程机械车辆联网系统，包括客户终端、服务器和工程机械车辆终端，其特征在于，工程机械车辆终端或客户终端，用于与服务器建立TCP/IP连接；向服务器发送请求验证消息，请求验证消息中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、 有效负载长度和有效负载；协议标识表示请求验证消息为服务器可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证服务；会话标识符为工程机械车辆终端或客户终端的初始化在线标识符；目的标识符为服务器在线标识符；有效负载为工程机械车辆终端或客户终端的唯一身份标识；有效负载长度为工程机械车辆终端或客户终端的唯一身份标识的长度；解析请求验证响应，得到自身的在线标识符；服务器，用于解析请求验证消息，并向工程机械车辆终端或客户终端发送请求验证响应；请求验证响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度和有效负载；协议标识表示请求验证响应为工程机械车辆终端或客户终端可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证响应服务；会话标识符为服务器在线标识符；目的标识符为工程机械车辆终端或客户终端的初始化在线标识符；有效负载为服务器为工程机械车辆终端或客户终端分配的在线标识符； 有效负载长度为服务器为工程机械车辆终端或客户终端分配的在线标识符的长度。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求6所述的工程机械车辆联网系统，其特征在于，在客户终端或者工程机械车辆终端为发送方而客户终端、工程机械车辆终端或者服务器为接收方，或者服务器为发送方而客户终端或者工程机械车辆终端为接收方时：发送方，用于向接收方发送数据服务请求；数据服务请求中包含协议标识、服务类型、 服务标识符、会话标识符以及目的标识符；协议标识表示数据服务请求为接收方可解析的消息；服务类型为状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务或者文件服务；服务标识符表示对应于该状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务或者文件服务的数据服务；会话标识符为发送方的在线标识符； 目的标识符为接收方的在线标识符服务器，用于接收数据服务请求并解析：在接收方为服务器时，服务器向发送方发送数据服务响应；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为服务器的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度；在接收方为客户终端或者工程机械车辆终端时，服务器向接收方转发数据服务请求， 接收方解析数据服务请求，并向发送方发送数据服务响应，服务器将数据服务响应转发至发送方；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、 有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同； 会话标识符为接收方的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度； 发送方，还用于对收到数据服务响应进行解析并得到数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.如权利要求7所述的工程机械车辆联网系统，其特征在于， 状态数据服务表示提供工程机械车辆终端的状态数据的服务； 控制数据服务表示提供工程机械车辆终端的数据控制的服务； 控制运动服务表示提供工程机械车辆终端的运动控制的服务； 传输总线服务表示提供工程机械车辆终端的传输总线控制的服务； 音视频服务表示提供工程机械车辆终端的网络音视频的服务；文件服务表示提供服务器或客户终端或工程机械车辆终端文件的服务。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.如权利要求6所述的工程机械车辆联网系统，其特征在于，服务器优先将收回的在线标识符分配给请求验证的客户终端或者工程机械车辆终端；收回的在线标识符是与服务器终止连接的客户终端或者工程机械车辆终端的标识符；不存在收回的在线标识符时，月艮务器将正在使用的最大在线标识符加1后分配给请求验证的客户终端或者工程机械车辆终端；客户终端或者工程机械车辆终端使用的初始化在线标识符相同。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.如权利要求7所述的工程机械车辆联网系统，其特征在于，客户终端与服务器之间通过有线或者无线网络连接，服务器与工程机械车辆终端之间通过无线网络连接；无线网络经过受托代理与服务器连接；工程机械车辆终端定期向受托代理发送心跳包，以维持工程机械车辆终端之间的通信连接。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES45156369" lang="ZH" load-source="patent-office" class="description">
    <p>一种工程机械车辆联网通信方法及工程机械车辆联网系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及通信领域，尤其涉及一种工程机械车辆联网通信方法及工程机械车辆联网系统。</p>
    <p>背景技术</p>
    <p>[0002]	随着新一代信息技术的发展，通信技术的逐步成熟，物联网概念以及物联网实践也越来越重要。物联网通过将物体联网、并获取信息，提供信息服务，目的是实现物与物、物与人的连接，方便识别、管理和控制。工程机械车辆联网是物联网的一个重要领域，用现代通信技术带动传统工程机械行业发展，具有重大的经济效益和社会价值。</p>
    <p>[0003]	工程机械车辆包括挖掘机、旋挖钻机、凿岩钻机、装载机、起重机、压桩机、压路机、 推土机等等各种工程车辆，在重大工程建设、矿山开采等领域发挥巨大作用。随着经济的发展和工程建设的需要，对车辆的全程调度、车辆维护保养、故障预警、车辆租赁、抵押、保险服务等提出更高的需求。对于工程车辆的联网，大部分工程机械制造商着重车辆本身控制系统的发明和创新，而对联网通信协议方面没有足够的重视，不同的制造商通信协议不兼容，协议简单、不完备，不能应用到一个大型的车辆联网系统，并提供复杂的数据服务。在已有的技术专利中，主要侧重汽车车辆的联网，提供车辆联网诊断、防盗报警、商业应用等，涉及工程车辆并与工程车辆施工作业相关的数据联网较少。本发明正是基于工程车辆的特殊性，提出联网通信的方法和系统。</p>
    <p>发明内容</p>
    <p>[0004]	针对工程机械车辆的特殊应用和现有技术存在的问题，本发明提供了一种工程机械车辆联网通信方法及工程机械车辆联网系统。</p>
    <p>[0005]	本发明提供了一种工程机械车辆联网通信方法，包括：</p>
    <p>[0006]	步骤1，工程机械车辆或客户终端与服务器建立TCP/IP连接；</p>
    <p>[0007]	步骤2，工程机械车辆或客户终端向服务器发送请求验证消息，请求验证消息中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度和有效负载； 协议标识表示请求验证消息为服务器可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证服务；会话标识符为工程机械车辆或客户终端的初始化在线标识符；目的标识符为服务器在线标识符；有效负载为工程机械车辆或客户终端的唯一身份标识；有效负载长度为工程机械车辆或客户终端的唯一身份标识的长度；</p>
    <p>[0008]	步骤3，服务器解析请求验证消息，并向工程机械车辆或客户终端发送请求验证响应；请求验证响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度和有效负载；协议标识表示请求验证响应为工程机械车辆或客户终端可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证响应服务；会话标识符为服务器在线标识符；目的标识符为工程机械车辆或客户终端的初始化在线标识符；有效负载为服务器为工程机械车辆或客户终端分配的在线标识符；有效负载长度为服务器为工程机械车辆或客户终端分配的在线标识符的长度；</p>
    <p>[0009]	步骤4，工程机械车辆或客户终端解析请求验证响应，得到自身的在线标识符。</p>
    <p>[0010]	在一个示例中，该工程机械车辆联网通信方法还包括：</p>
    <p>[0011]	步骤5，发送方向接收方发送数据服务请求；数据服务请求中包含协议标识、服务类型、服务标识符、会话标识符以及目的标识符；协议标识表示数据服务请求为接收方可解析的消息；服务类型为状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务或者文件服务；服务标识符表示对应于该状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务或者文件服务的数据服务；会话标识符为发送方的在线标识符；目的标识符为接收方的在线标识符；发送方为客户终端或者工程机械车辆而接收方为客户终端、工程机械车辆或者服务器，或者发送方为服务器而接收方为客户终端或者工程机械车辆；</p>
    <p>[0012]	步骤6，服务器接收数据服务请求并解析；</p>
    <p>[0013]	如果接收方为服务器，则服务器向发送方发送数据服务响应；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为服务器的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度；</p>
    <p>[0014]	如果接收方为客户终端或者工程机械车辆，则服务器向接收方转发数据服务请求，接收方解析数据服务请求，并向发送方发送数据服务响应，服务器将数据服务响应转发至发送方；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；月艮务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为接收方的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度；</p>
    <p>[0015]	步骤7，发送方收到数据服务响应进行解析并得到数据。</p>
    <p>[0016]	在一个示例中，状态数据服务表示提供工程机械车辆的状态数据的服务；</p>
    <p>[0017]	控制数据服务表示提供工程机械车辆的数据控制的服务；</p>
    <p>[0018]	控制运动服务表示提供工程机械车辆的运动控制的服务；</p>
    <p>[0019]	传输总线服务表示提供工程机械车辆的传输总线控制的服务；</p>
    <p>[0020]	音视频服务表示提供工程机械车辆的网络音视频的服务；</p>
    <p>[0021]	文件服务表示提供服务器或客户终端或工程机械车辆文件的服务。</p>
    <p>[0022]	在一个示例中，步骤3中，优先将服务器收回的在线标识符分配给请求验证的客户终端或者工程机械车辆；收回的在线标识符是与服务器终止连接的客户终端或者工程机械车辆的标识符；不存在收回的在线标识符时，将正在使用的最大在线标识符加1后分配给请求验证的客户终端或者工程机械车辆；客户终端或者工程机械车辆使用的初始化在线标识符相同。</p>
    <p>[0023]	在一个示例中，客户终端与服务器之间通过有线或者无线网络连接，服务器与工程机械车辆之间通过无线网络连接；无线网络经过受托代理与服务器连接；工程机械车辆定期向受托代理发送心跳包，以维持工程机械车辆之间的通信连接。</p>
    <p>[0024]	本发明提供了一种工程机械车辆联网系统，包括客户终端、服务器和工程机械车辆终端，</p>
    <p>[0025]	工程机械车辆终端或客户终端，用于与服务器建立TCP/IP连接；向服务器发送请求验证消息，请求验证消息中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度和有效负载；协议标识表示请求验证消息为服务器可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证服务；会话标识符为工程机械车辆终端或客户终端的初始化在线标识符；目的标识符为服务器在线标识符； 有效负载为工程机械车辆终端或客户终端的唯一身份标识；有效负载长度为工程机械车辆终端或客户终端的唯一身份标识的长度；解析请求验证响应，得到自身的在线标识符；</p>
    <p>[0026]	服务器，用于解析请求验证消息，并向工程机械车辆终端或客户终端发送请求验证响应；请求验证响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、 有效负载长度和有效负载；协议标识表示请求验证响应为工程机械车辆终端或客户终端可解析的消息；服务类型为请求响应服务；服务标识符表示对应于请求响应服务的请求验证响应服务；会话标识符为服务器在线标识符；目的标识符为工程机械车辆终端或客户终端的初始化在线标识符；有效负载为服务器为工程机械车辆终端或客户终端分配的在线标识符；有效负载长度为服务器为工程机械车辆终端或客户终端分配的在线标识符的长度。</p>
    <p>[0027]	在一个示例中，在客户终端或者工程机械车辆终端为发送方而客户终端、工程机械车辆终端或者服务器为接收方，或者服务器为发送方而客户终端或者工程机械车辆终端为接收方时：</p>
    <p>[0028]	发送方，用于向接收方发送数据服务请求；数据服务请求中包含协议标识、服务类型、服务标识符、会话标识符以及目的标识符；协议标识表示数据服务请求为接收方可解析的消息；服务类型为状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务或者文件服务；服务标识符表示对应于该状态数据服务、控制数据服务、控制运动服务、 传输总线服务、音视频服务或者文件服务的数据服务；会话标识符为发送方的在线标识符； 目的标识符为接收方的在线标识符；</p>
    <p>[0029]	服务器，用于接收数据服务请求并解析：</p>
    <p>[0030]	在接收方为服务器时，服务器向发送方发送数据服务响应；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载； 协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为服务器的在线标识符；目的标识符为发送方的在线标识符；有效负载为对应于发送方请求的数据；有效负载长度为对应于发送方请求的数据的长度；</p>
    <p>[0031]	在接收方为客户终端或者工程机械车辆终端时，服务器向接收方转发数据服务请求，接收方解析数据服务请求，并向发送方发送数据服务响应，服务器将数据服务响应转发至发送方；数据服务响应中包含协议标识、服务类型、服务标识符、会话标识符、目的标识符、有效负载长度以及有效负载；协议标识表示数据服务响应为发送方可解析的消息；服务类型与数据服务请求中的服务类型相同；服务标识符与数据服务请求中的服务标识符相同；会话标识符为接收方的在线标识符；目的标识符为发送方的在线标识符；有效负载为</p>
    <p>7对应于发送方请求的数据；有 效负载长度为对应于发送方请求的数据的长度；</p>
    <p>[0032]	发送方，还用于对收到数据服务响应进行解析并得到数据。</p>
    <p>[0033]	在一个示例中，状态数据服务表示提供工程机械车辆终端的状态数据的服务；</p>
    <p>[0034]	控制数据服务表示提供工程机械车辆终端的数据控制的服务；</p>
    <p>[0035]	控制运动服务表示提供工程机械车辆终端的运动控制的服务；</p>
    <p>[0036]	传输总线服务表示提供工程机械车辆终端的传输总线控制的服务；</p>
    <p>[0037]	音视频服务表示提供工程机械车辆终端的网络音视频的服务；</p>
    <p>[0038]	文件服务表示提供服务器或客户终端或工程机械车辆终端文件的服务。</p>
    <p>[0039]	在一个示例中，服务器优先将收回的在线标识符分配给请求验证的客户终端或者工程机械车辆终端；收回的在线标识符是与服务器终止连接的客户终端或者工程机械车辆终端的标识符；不存在收回的在线标识符时，服务器将正在使用的最大在线标识符加1后分配给请求验证的客户终端或者工程机械车辆终端；客户终端或者工程机械车辆终端使用的初始化在线标识符相同。</p>
    <p>[0040]	在一个示例中，客户终端与服务器之间通过有线或者无线网络连接，服务器与工程机械车辆终端之间通过无线网络连接；无线网络经过受托代理与服务器连接；工程机械车辆终端定期向受托代理发送心跳包，以维持工程机械车辆终端之间的通信连接。</p>
    <p>[0041]	本发明有效地保证了所述服务器和终端之间的通信连接和服务质量，以及在多种工程机械车辆终端和服务器通信的兼容性，很好地促进该协议在工程机械车辆联网系统上的应用。</p>
    <p>附图说明</p>
    <p>[0042]	下面结合附图来对本发明作进一步详细说明，其中：</p>
    <p>[0043]	图1为本发明的工程机械车辆联网系统示意图，基于有线和无线通信的与以太网连接的车辆联网系统结构，其中服务器与工程机械车辆终端通信须经过一个受托代理以实现无线通信；</p>
    <p>[0044]	图2为本发明的工程机械车辆联网通信协议数据格式示意图，显示了服务器1、客户终端2、工程机械车辆终端3之间传输数据的分组报文格式；</p>
    <p>[0045]	图3为本发明的服务器1分配在线ID的分配空间示意图，在线ID的寻址空间大小为2个字节，工程机械车辆联网系统最大支持的终端在线数量为65534 ；</p>
    <p>[0046]	图4为本发明的通信协议数据格式的消息数据在服务器和终端之间传输的示意图，服务器和终端必须严格按照一定的通信步骤才能正确地收发数据；</p>
    <p>[0047]	图5为本发明服务器对终端进行身份验证的验证流程示意图；身份验证过程在 TCP/IP连接成功之后，在线ID的分配由服务器进行解释和管理，终端初始化在线固定ID则不需向服务器请求；</p>
    <p>[0048]	图6为本发明基于通信协议数据格式在车联网系统中客户终端和服务器之间传输方法示意图；</p>
    <p>[0049]	图7为本发明的工程机械车辆终端和服务器之间传输方法示意图；</p>
    <p>[0050]	图8为本发明的工程机械车辆终端和客户终端之间通信的示意图，其中，工程机械车辆和客户终端到服务器的消息数据的目的ID不为服务器ID，经服务器发出的消息数据的会话ID不为服务器ID;</p>
    <p>[0051]	图9为本发明的工程机械车辆和服务器之间心跳包收发和检测的示意图，心跳包通信以保证工程机械车辆网络的稳定性。</p>
    <p>具体实施方式</p>
    <p>[0052]	如图1所示，工程机械车辆联网系统包括了服务器1、客户终端2、工程机械车辆终端3。其中，服务器包括应用服务器和数据库服务器，应用服务器为整个工程机械车辆联网系统提供TCP/IP连接端口，开放整个车联网系统的通信服务，对通信协议数据格式的消息数据具有解释权，数据库服务器存储着终端的相关数据，方便工程机械车辆的数据采集和更新，以及客户的查询和修改等等；客户终端2采用有线和无线通信方式与服务器1通信， 客户终端2的可用服务命令需要经过服务器1中转后方可到达工程机械车辆终端3，客户终端2在服务器1的授权范围内来请求、访问、管理、控制服务器1或工程机械车辆终端3 ；工程机械车辆终端3采用无线通信方式与服务器1通信，工程机械车辆终端3需主动或被动地向服务器1提交相关数据，执行服务器1或客户终端2的控制命令，实现系统的功能和服务要求。</p>
    <p>[0053]	如图1所示，工程机械车辆联网系统还包括一些必要的通信传输设备和受托代理，实现服务器1、客户终端2、工程机械车辆终端3的网络通信。由于工程机械车辆终端分布零散、机动灵活，采用无线通信方式与服务器1通信，因此，需要一个受托代理或移动通信服务商向工程机械车辆终端3分配虚拟IP地址，以实现服务器1和工程机械车辆终端3 的无线通信连接。</p>
    <p>[0054]	如图2所示，描述了工程机械车辆联网通信协议数据格式的分组报文结构。统一的分组报文结构不仅减轻了服务器的处理数据负担，而且有效地节约了网络通信资源，降低了系统硬件的成本和无线通信的费用。在特殊服务命令时，可以和普通分组报文结构不同，譬如，运动控制服务的消息数据中，有效负载字段可以为空，心跳包消息可以为某些字符等，这样，更进一步节约了网络通信资源。</p>
    <p>[0055]	如图2所示，工程机械车辆联网通信协议数据格式包括8个字段：协议标识头41、 协议版本号42、服务类型字段43、服务ID字段44、会话ID字段45、目的ID字段46、有效负载长度47和有效负载数据48。其中，协议标识头41和协议版本号42为协议标识字段，会话ID字段45和目的ID字段46为在线ID字段，有效负载长度47和有效负载数据为有效负载字段。在下述所有说明中，存在上述8个字段的数据格式。</p>
    <p>[0056]	本发明中，协议标识头41被分配2个字节，是消息数据的第一组字段，只有当输入相同的协议标识头41时，才能被服务器和终端所接收，然后进行接下来的相关数据处理， 否则服务器和终端将抛弃该通信数据消息。协议标识头41由服务器1来定义，相应地，客户终端2和工程机械车辆终端3也将采用相同的协议标识头41进行组织报文。协议标识头41为无符号整型，范围为0&#12316;65535，如0x8A9B(在以下说明文档中，所有数据表示均为十六进制，所有示例协议标识头为0x8A9B)。</p>
    <p>[0057]	协议版本号42被分配1个字节，表示消息数据使用的通信协议的版本信息，该空间为通信协议提供了升级空间。现行通信协议版本要对早期版本兼容。协议版本号为无符号整型，当通信协议升级时，该协议版本号要加1，协议版本号42的初始值为0x01 (在以下说明文档中，所有示例协议版本号为0x01)，定为通信协议版本1. 0。</p>
    <p>[0058] 	服务类型字段43被分配1个字节，表示消息数据的服务类型，该服务类型包括：请求响应服务、状态数据服务、控制数据服务、控制运动服务、传输总线服务、音视频服务和文件服务。服务类型字段43决定了服务ID字段44的范围和内容。消息数据的服务类型必须在服务器1开放的服务类型范围内，才能被服务器和终端所接收和解析，否则将不能被服务器和终端解析而被抛弃。服务类型字段43的范围为0&#12316;255，满足系统通信服务的需求，剩余空间可用来继续定义新的服务类型。</p>
    <p>[0059]	状态数据服务，所述工程机械车辆终端的状态数据，用于在线工程机械车辆终端主动发送，或由所述服务器和所述客户终端采集的可用服务，该服务不影响工程机械车辆终端的工作运行或内部参数；</p>
    <p>[0060]	控制数据服务，所述工程机械车辆终端的数据控制，用于由所述服务器和所述客户终端请求的在线工程机械车辆终端的数据修改、复位、刷新的可用服务，该服务影响工程机械车辆终端的工作运行或内部参数；</p>
    <p>[0061]	控制运动服务，所述工程机械车辆终端的运动控制，用于由所述服务器和所述客户终端请求的在线工程机械车辆终端的运行、行走、工作控制的可用服务；</p>
    <p>[0062]	传输总线服务，所述工程机械车辆终端的传输总线控制，用于由所述服务器和所述客户终端请求的在线工程机械车辆终端传输总线的收发控制无缝接入的可用服务；</p>
    <p>[0063]	音视频服务，所述工程机械车辆终端的网络音视频服务，用于由所述服务器和所述客户终端请求的在线工程机械车辆终端的在线音视频监控的可用服务；和</p>
    <p>[0064]	文件服务，所述服务器和所述终端的文件服务，用于所述终端向所述服务器上传、 下载文件或数据流的可用服务。</p>
    <p>[0065]	服务ID字段44被分配1个字节，表示消息数据在服务类型定义下的服务内容，月艮务ID字段44是对服务类型字段43的服务补充，在消息数据中，不同的服务类型，服务ID 会有不同的解释。服务类型字段43和服务ID字段44共同确定和解释了消息数据的服务， 单一的服务类型或服务ID并不能够说明服务。服务类型字段43和服务ID字段44决定了本发明通信协议的最大支持服务数量为65536，满足系统的服务需求。</p>
    <p>[0066]	在线ID字段划分为会话ID字段45和目的ID字段46，在线ID字段被分配4个字节，因此，在线ID被分配2个字节。如图3所示的在线ID寻址空间，本发明的服务器1最大支持在线终端数量为65534。会话ID字段45和目的ID字段46的前后顺序表示了消息数据的传输方向。其中包括：客户终端1至服务器2、服务器1至客户终端2、工程机械车辆终端3至服务器1、服务器1至工程机械车辆终端3、客户终端2经服务器1至工程机械车辆终端3、工程机械车辆终端3经服务器1至客户终端2。会话ID字段45和目的ID字段 46的分配原则将在下面中说明。</p>
    <p>[0067]	系统通信时，当消息数据的传输方向为后两种方式时，会话终端的消息数据中，会话ID为会话终端ID(发送消息数据的终端），目的ID为目的终端ID(接收消息数据的终端），而不为服务器ID(虽然服务器是接收了消息数据）；当服务器中转消息数据时，服务器的消息数据中，会话ID为会话终端ID(虽然服务器是发送了消息数据），目的ID为目的终端ID。</p>
    <p>[0068]	有效负载长度47和有效负载数据48组成有效负载字段。有效负载长度47是有效负载数据的长度信息，保证解析有效负载数据时的准确性，有效负载数据是服务下的消息内容。服务不同，有效负载长度47和有效负载数据48的内容也不同，特殊情况下，有效负载长度47或有效负载数据48可以为空，具有一定的灵活性。其中，有效负载数据包括： 状态信息服务数据、控制数据服务数据、控制运动服务数据、传输总线服务数据、音视频服务数据、文件服务数据。</p>
    <p>[0069]	如图3所示，示意图为服务器1分配在线ID的寻址空间，在线ID被分配了 2个字节。其中，本发明规定：终端初始化在线固定ID 49为0x0000，服务器在线固定ID 50为 0x0001，终端在线ID 51为服务器1分配值。终端初始化在线固定ID 49为所有终端（客户终端2、工程机械车辆终端幻在请求验证时报文中使用，当终端取得了终端在线ID51以后， 终端的消息数据不再使用终端初始化在线固定ID49，而使用验证分配的终端在线ID51，否则所有的消息数据服务器1将不予以处理而被抛弃，因此，终端初始化在线固定ID49只有在终端请求验证时有效。服务器ID被固定分配，服务器与终端通信时，服务器的ID即为服务器在线固定ID50。在下述所有通信流程中，均使用到这三种在线ID。</p>
    <p>[0070]	服务器1的在线ID分配原则包括：①终端初始化在线固定ID和服务器在线固定 ID已保留和占用，不再被分配给终端；②终端与服务器1终止连接后，该终端的在线ID被释放；③服务器1向新连接终端分配在线ID时，服务器1可以向新连接的终端分配先前被释放的在线ID ；④服务器1向新连接终端分配在线ID时，如果当前最大在线ID范围内的所有在线ID已被完全占用，分配给新连接终端的在线ID在当前最大在线ID基础上加1来生成；⑤服务器1分配终端在线ID时采用先占用当前最大在线ID范围内空闲的ID，后占用当前最大在线ID上加1生成的ID的原则；⑥终端连接终止时，服务器1必须收回该终端在线ID，保证终端在线状态的可靠性和在线ID的利用率。</p>
    <p>[0071]	在下述所有的通信流程中，存在请求连接消息52、确定请求连接响应53、否定请求连接响应M、请求验证消息55、确定请求验证响应56、否定请求验证响应57、数据消息 58、同步消息59、请求心跳包消息60、确定心跳包响应61、否定心跳包响应62、终止连接消息63。除采用TCP/IP标准协议的消息和响应（请求连接消息52、确定请求连接响应53、否定请求连接响应M、终止连接消息6&#190;外，所有的消息和响应均采用本发明的通信数据格式。</p>
    <p>[0072]	消息和响应报文结构采用公共报文头（Packet Header)，大小共9个字节，包括协议标识头、协议版本号、服务类型、服务ID、会话ID、目的ID。如0x8A9B01040200010002, 表示消息和响应报文采用的协议为0x8A9B，版本号为0x01，服务内容（0x0402)为请求一级锁车服务，会话ID和目的ID分别为0x0001和0x0002。有效负载字段作为报文数据 (PacketData)，表示服务内容定义下的有效负载长度和有效负载数据，如0x030402FF，表示 3字节长度的有效负载数据，有效负载数据为0x0402FF。在不同的服务内容下，有效负载字段有着不同的解释。</p>
    <p>[0073]	服务器和所有终端当接收到消息和响应报文后，解析工作按照先解析公共报文头 (Packet Header)后解析报文数据（Packet Data)、字段先后顺序的原则。报文数据的解析原则会根据公共报文头的解析内容有不同的变化。当解析后的字段内容不是系统使用的协议数据格式和服务原则，该条数据将被视为无效数据而被抛弃掉。如服务器接收到一条数据为0X8A9B01040200020001，按照数据格式和先后顺序进行解析到协议0x8A9B、版本号0x01、服务类型0x04、服务ID 0x02、会话ID 0002、目的0001，当解析到的字段内容不是符</p>
    <p>合应用系统所制定的协议内容时，数据将立即被视为无效数据而停止解析工作。</p>
    <p>[0074]	如图4所示 ，示意图为工程机械车辆联网系统中服务器1、客户终端2、工程机械车辆终端3传输数据的必要步骤，所述传输数据的方法包括：</p>
    <p>[0075]	步骤501 ：客户终端2或工程机械车辆终端3向服务器1发送请求连接消息52，确认服务器1开放的通信接口，以建立TCP/IP连接。该建立过程由TCP/IP协议确定，客户终端2使用SOCKET方式建立连接，工程机械车辆终端3使用AT命令建立连接；</p>
    <p>[0076]	步骤502 ：服务器1对客户终端2或工程机械车辆终端3的请求连接消息52进行判定，确认客户终端2或工程机械车辆终端3是否有对服务器1的TCP/IP访问权，然后服务器1根据判定结果向客户终端2或工程机械车辆终端3发送确定请求连接响应53或否定请求连接响应54，通知客户终端2或工程机械车辆终端3的TCP/IP请求建立成功与否；</p>
    <p>[0077]	步骤503 ：客户终端2或工程机械车辆终端3与服务器1成功建立连接之后，向服务器1发送请求验证消息55，以验证终端身份的合法性，并取得终端在线ID51和可用服务。 其中，请求验证消息52报文中，服务类型字段43为系统自定义的服务类型值，验证消息的服务ID字段44为系统自定义的验证服务ID值，会话ID字段45为终端初始化在线固定ID 49，目的ID字段46为服务器在线固定ID 50，有效负载长度字段47和有效负载字段48为终端唯一身份标识的长度和内容。否则，服务器1将不能正确解析请求验证消息55，所接收到的消息数据将被抛弃掉。例如，系统定义请求响应服务类型值为0x01，请求验证服务 ID为0x01，一个终端唯一身份标识为0xF8E6A245D0C0 (终端唯一身份标识长度和内容不固定），则其请求验证消息 55 为 0x8A9B0101010000000106F8E6A24OT0C0 ；</p>
    <p>[0078]	步骤504 ：服务器1对客户终端2或工程机械车辆终端3的请求验证消息55进行解析验证，验证客户终端2或工程机械车辆终端3身份标识是否是合法的，是否是向客户终端2或工程机械车辆终端3分配在线ID和可用服务。服务器1向客户终端2或工程机械车辆终端3发送请求验证响应，通知客户终端2或工程机械车辆终端3的身份验证结果。如果验证合法，则发送确定请求验证响应56，确定请求验证响应56的有效负载数据48为分配的终端在线ID 51 ；如果验证不合法，则发送否定请求验证响应57，否定请求验证响应57的有效负载数据48为空，客户终端2或工程机械车辆终端3需重新向服务器1发送请求验证消息55。例如，系统自定义请求验证响应服务ID为0x02，分配的终端在线ID 51为0x0002， 则确定请求验证响应56为0x8A9B01010200010000020002 ；当验证不合法时，而否定请求验证响应57为0x8A9B01010200010000，此时终端在线ID 51为空，客户终端2或工程机械车辆终端3须重新进行身份验证；</p>
    <p>[0079]	步骤505 ：客户终端2或工程机械车辆终端3接收到来自服务器1的确定请求验证响应56后，取得终端在线ID 51，与服务器1之间正常传输数据消息58，执行和完成所要求的功能和操作。例如服务器1向工程机械车辆终端3请求采集导航信息服务，系统自定义状态数据服务类型值为0x02，请求导航信息服务ID为0x01，则服务器1发送的服务命令的数据消息58为0x8A9B01020100010002，由于该消息数据58的报文头能充分解释服务内容，因此，有效负载长度和数据可以为空；</p>
    <p>[0080]	步骤506 ：服务器1和客户终端2或工程机械车辆终端3在执行完成对方的数据消息58后，对方要求回馈数据的，本方需向对方发送数据，以满足对方的请求数据需要；对方要求回馈处理结果的，本方需向对方回馈处理结果，以通知对方的命令执行情况。例如，工程机械车辆终端3向服务器1回馈请求采集导航信息服务的数据，系统自定义回馈导航信息服务ID为0x02，则工程机械车辆终端3发送的数据消息58为 0x8A9B01020200020001XXXX，其中，XXXX为导航信息的长度和内容，该部分的有效长度字段 47和有效负载数据字段48由系统自定义来决定；</p>
    <p>[0081]	步骤507 ：服务器1和客户终端2或工程机械车辆终端3之间进行文件传输或多条数据消息58完成某一服务时，需要一个同步消息59对传输的数据进行同步，保证文件传输的连续性；</p>
    <p>[0082]	步骤508 ：服务器1在与客户终端2、工程机械车辆终端3经过无线方式进行通信时，需经过一个受托代理机构。一段时间内，如果无线终端没有任何数据传输，则受托代理机构会收回发放给无线终端的虚拟IP地址。因此，为了保证服务器与终端的正常通信连接，该虚拟IP地址不能被收回，因此，服务器与终端之间要有数据传输，该数据称为心跳包。因此，客户终端2或工程机械车辆终端3向服务器1周期性地向发送请求心跳包消息 60，服务器1向该客户终端2或工程机械车辆终端3发送确定心跳包响应61或否定心跳包响应62，终端根据接收到的心跳包响应判断自身的通信连接状态，并且达到延长通信连接时间的目的；同时，服务器1会定时检测客户终端2或工程机械车辆终端3是否发送了请求心跳包消息60，以确认该客户终端2或工程机械车辆终端3的通信连接状态。例如，工程机械车辆终端3与服务器1之间进行收发心跳包，系统自定义请求心跳包消息服务ID为 0x03，确定心跳包响应服务ID为0x04，否定心跳包响应服务ID为0x05，则工程机械车辆终端3发送的请求心跳包消息60为0X8A9B01010300020001，服务器1发送的确定心跳包响应 61为0X8A9B01010400020001，表示工程机械车辆终端3的连接正常；服务器1发送的否定心跳包响应62为0x8A9B01010500020001，通知工程机械车辆终端3的在线连接资源异常， 需进行修正或重新连接。在实际应用中，系统可以有目的的来精简心跳包，以达到节约网络资源成本，如可以采用单字节心跳包或校验码心跳包，达到延长通信连接时间的目的；</p>
    <p>[0083]	步骤509 ：服务器1与客户终端2、工程机械车辆终端3终止通信连接，终止方主动发送终止连接消息63，双方及时释放本次通信的在线连接资源，服务器1收回客户终端2或工程机械车辆终端3的终端在线ID51和释放该连接的终端在线列表项，客户终端2或工程机械车辆终端3释放在线连接资源寄存器，此次服务器1与客户终端2或工程机械车辆终端3的通信连接结束。</p>
    <p>[0084]	在传输数据的方法步骤中，步骤509终止通信连接时，请求方发送终止连接消息， 待等到接收到终止连接响应后，才可释放本次连接资源，接收方发送终止连接后，才可释放本次连接资源。服务器1对客户终端2或工程机械车辆终端3的身份验证和发放终端在线 ID过程将在下面阐述，以及数据传输过程也将在下文具体说明。</p>
    <p>[0085]	如图5所示，服务器1对客户终端2、工程机械车辆终端3的身份验证过程也是服务器1向其分配终端在线ID 51和可用服务的过程，是终端提交命令和消息数据的必要条件。身份验证过程如下：</p>
    <p>[0086]	1)初始化。服务器1在对客户终端2或工程机械车辆终端3进行身份验证之前， 需做好准备工作。服务器1需有在其上已授权的所有终端身份标识列表（客户表table_A 和工程机械车辆表table_B)，和当前所有在线的终端在线列表（table_C)；[0087]	2)解析验证消息。服务器1根据通信协议数据格式判定验证消息服务，解析消息数据获取有效负载数据，得到终端的终端类型和终端唯一身份标识，进入验证阶段。其中， 终端的终端类型包括客户终端2和工程机械车辆终端3。例如，工程机械车辆终端3发送的请求验证消息55为0x8A9B0101010000000106F8E6A245D0C0，服务器1解析到该终端的唯一身份标识为0xF8E6A24OT0C0 ；</p>
    <p>[0088]	3)身份标识验证。服务器1根据上述得到的终端类型选择合适的终端身份标识列表table_A或table_B，将上述得到的终端身份标识与列表中的身份标识单元对照，如果该终端身份标识与列表中的某一身份标识单元一致，则终端身份标识是服务器1已授权的， 进入在线验证阶段；如果该终端身份标识与列表中的所有身份标识单元不一致，则终端身份标识是服务器1未授权的，不能分配到在线ID和可用服务，服务器1向该终端发送否认身份验证响应57，该终端验证过程结束；</p>
    <p>[0089]	4)在线验证。服务器1将上述得到的终端身份标识与终端在线列表table_C中的终端身份标识单元对照，如果该终端身份标识与列表中的某一身份标识单元一致，则说明该终端在终端在线列表table_C中已存在，需进入IP/PORT验证阶段进行验证；如果该终端身份标识与列表中的所有身份标识单元不一致，则说明该终端在终端在线列表table_C中不存在，服务器1可以向该终端分配终端在线ID和可用服务，进入分配阶段；</p>
    <p>[0090]	5) IP/PORT验证。服务器1获取当前TCP/IP连接的IP/P0RT，与该终端身份标识与终端在线列表table_C中的某一身份标识单元一致所在行的IP/PORT单元对照，如果两者一致，则当前连接与终端在线列表table_C*所保存的原连接相同，该终端不需要分配新的终端在线ID和可用服务，向终端发送确定验证响应56，分配的终端在线ID51为原连接的终端在线ID ；如果两者不一致，则说明当前连接与终端在线列表table_C中所保存的原连接不相同，服务器1终止原连接，收回终端在线ID51和可用服务，进入分配阶段；</p>
    <p>[0091]	6)分配。服务器1按照终端在线ID的分配原则向该终端分配终端在线ID51和可用服务。服务器1向终端发送确定验证响应56，确定验证响应56中有效负载数据字段48 为新分配的终端在线ID51。例如，确定验证响应56为：0x8A9B01000100000102020002 ；</p>
    <p>[0092]	7)保存。服务器1成功发送确定验证响应56后，将当前连接的终端在线ID51、IP/ PORT和终端身份标识绑定，并保存到终端在线列表table_C中，作为新的终端在线列表项， 一方面为新的终端身份验证过程做准备工作，另一方面为客户终端2提供在线工程机械车辆列表table_D，以便客户对工程机械车辆的在线监控和管理；和</p>
    <p>[0093]	8)验证结束。等待新的终端身份验证。 </p>
    <p>[0094]	客户终端2或工程机械车辆终端3成功完成身份验证后，取得终端在线ID51，即可与服务器1进行正常通信服务，或者通过服务器1中转控制命令和消息数据，完成访问和控制其他终端的目的。</p>
    <p>[0095]	本发明中，服务器1与客户终端2的通信和服务器1与工程机械车辆终端3的通信基本一致，如图6、图7所示，基于本发明所述的车联网系统针对工程机械车辆终端所展开，因此，将详细阐述服务器1与工程机械车辆终端3的通信方法，具体描述服务器1与工程机械车辆终端3的通信连接建立、数据传输、心跳包、同步、终止过程。</p>
    <p>[0096]	如图6所示，服务器1与工程机械车辆终端3通信的方法要按照如图4所示的基本方法，传输的消息数据按照本发明的通信协议数据格式，所述的方法包括：[0097]	步骤601 ：服务器1开放指定的IP地址、PORT端口，允许终端进行TCP/IP连接；</p>
    <p>[0098]	步骤602 ：工程机械车辆终端3使用AT命令，向服务器1发送请求连接消息52来发起TCP/IP连接请求；</p>
    <p>[0099]	步骤603 ：服务器1对工程机械车辆终端3的TCP/IP连接请求消息52进行判定， 确定连接则发送确定请求连接响应53以通知工程机械车辆终端3的TCP/IP连接请求成功；否定连接则发送否定请求连接响应54以通知工程机械车辆终端3的TCP/IP连接请求失败；</p>
    <p>[0100]	步骤604 ：工程机械车辆终端3接收到TCP/IP请求连接响应，如果TCP/IP连接成功，则工程机械车辆终端3可以与服务器1正常的TCP/IP通信；如果TCP/IP连接失败，则工程机械车辆终端3需要重 新发起TCP/IP建立连接请求，取得成功后才能与服务器1进行正常的TCP/IP通信；</p>
    <p>[0101]	步骤605 ：工程机械车辆终端3与服务器1成功建立TCP/IP连接之后，按照通信协议数据格式来组织请求验证消息55，并向服务器1发送该请求验证消息55，请求服务器1 向其分配终端在线ID51和可用服务，否则，工程机械车辆终端3与服务器1的通信连接不能被识别，服务器1将判定从此连接所接收到的数据无效；</p>
    <p>[0102]	步骤606 ：服务器1接收到来自工程机械车辆终端3的请求验证消息55，按照身份验证方法步骤进行验证和分配终端在线ID51、可用服务，保存该终端的连接资源，并向其发送验证响应。发送确定验证响应56，则分配终端在线ID51和可用服务；发送否定验证响应 57，则工程机械车辆终端3需重新发送请求验证消息55来再次验证身份；</p>
    <p>[0103]	步骤607 ：工程机械车辆终端3接收到来自服务器1的验证响应并以解析。如果为确定验证响应56，则获取终端在线ID51，工程机械车辆终端3可以与服务器1正常执行通信协议定义的服务；如果为否定验证响应57，则工程机械车辆终端3需重新组织和发送请求验证消息55，以获取终端在线ID51和可用服务；</p>
    <p>[0104]	步骤608 ：工程机械车辆终端3获取终端在线ID51后，可以与服务器1进行正常的通信服务。工程机械车辆终端3可以进行更新检测，获取新版本协议、内部文件等；可以主动向服务器1发送导航、状态、保养、报警等终端属性信息；可以接收来自服务器1的数据消息、执行命令并向服务器1发送回馈数据消息。其中，报警信息可以采用报警代码来表示，如0x01表示机器柴油机水温过高等等；保养信息的有效负载字段可以进行再次细化以节省服务ID字段，如0x8A9B01030300020001为单项保养信息报文头，有效负载长度和数据为0x03010A00，则该保养项ID为0x01，保养项值为OxOAOO，表示为柴油机机油的保养值信</p>
    <p>思寸寸；</p>
    <p>[0105]	步骤609 ：服务器1在成功识别工程机械车辆终端3后，可以与工程机械车辆终端 3进行正常的通信服务。服务器1接收工程机械车辆终端3的更新检测请求，并提示是否有新更新信息和发送更新信息数据；接收工程机械车辆终端3的导航、状态、保养、报警等信息数据，并且相关信息数据保存入数据库；发送服务器1的控制命令和接收终端执行命令的回馈响应，相关命令操作及执行结果予以记录备份。例如，服务器1向工程机械车辆终端3进行一级锁车，一级锁车命令的数据消息58为0X8A9B01040100010002，并在服务器 1上记录操作，工程机械车辆终端3执行一级锁车命令，并将一级锁车命令的执行结果回馈给服务器1以通知命令执行情况，回馈的数据消息58报文头为0x8A9B01040200010002，有效负载数据字段为执行结果情况，服务器1根据回馈的数据消息58进行判断，并将一级锁车命令的执行结果备录。</p>
    <p>[0106]	步骤610 ：服务器1在成功识别工程机械车辆终端3后，可以实现客户终端2与工程机械车辆终端3正常通信。服务器1中转客户终端2的命令和数据，以达到客户终端2 的期望和目的；</p>
    <p>[0107]	步骤611 ：工程机械车辆终端3获取终端在线ID后，可以与客户终端2正常通信。 工程机械车辆终端3接收来自客户终端2的命令和数据，执行服务和命令操作，并向客户终端2发送回馈响应；</p>
    <p>[0108]	步骤612 ：服务器1中转工程机械车辆终端3向客户终端2发送的回馈响应，相关命令操作在服务器1上备录。当客户终端2在线时，向该客户终端2发送工程机械车辆终端3的回馈数据消息；当客户终端2不在线时，则不发送工程机械车辆终端3的回馈数据消息；</p>
    <p>[0109]	步骤613 ：服务器1与工程机械车辆终端3进行文件传输或多条消息数据时，需发送文件同步消息59，保证传输文件或数据的同步性和连续性；</p>
    <p>[0110]	步骤614 ：工程机械车辆终端3周期性地向服务器1发送请求心跳包消息60，检测与服务器1的通信连接状态，并达到延长托代理机构分配给工程机械车辆终端3虚拟IP地址时间的目的。同时，接收来自服务器1的确定心跳包响应61或否定心跳包响应62，判定通信连接状态和进行相关后续处理；</p>
    <p>[0111]	步骤615 ：服务器1接收来自工程机械车辆终端3的请求心跳包消息60，并向工程机械车辆终端3发送确定心跳包响应61或否定心跳包响应62 ；</p>
    <p>[0112]	步骤616 ：服务器1定时检测工程机械车辆终端3的请求心跳包消息60。如果在周期内接收到工程机械车辆终端3的请求心跳包消息60，则判定工程机械车辆终端3的通信连接状态正常，通信连接得以延续；如果在周期内没有接收到工程机械车辆终端3的请求心跳包消息60，则判定工程机械车辆终端3的连接状态不正常，释放该终端在服务器上的连接资源；</p>
    <p>[0113]	步骤617 ：工程机械车辆终端3使用AT命令，向服务器1发送终止连接消息63，释放终端上保存的在线连接资源寄存器，与服务器1的TCP/IP通信连接结束；</p>
    <p>[0114]	步骤618 ：服务器1接收到来自工程机械车辆终端3的请求终止连接消息63，释放该终端在服务器上保存的在线连接资源，如终端在线ID51、在线列表项等，服务器1与该工程机械车辆终端3的TCP/IP通信服务结束。</p>
    <p>[0115]	其中，步骤601、步骤602、步骤603、步骤617、步骤618是基于TCP/IP协议的，所述的消息并不是本发明的通信协议数据格式的消息，而其它步骤方法是基于本发明通信协议的，须严格遵循本发明通信协议所述的内容。</p>
    <p>[0116]	服务器1在中转客户终端2或工程机械车辆终端3的命令和数据时，关键命令和数据要在服务器1上记录备份，以达到后期服务器1的相关维护工作，具体记录内容由服务器1来规定。</p>
    <p>[0117]	步骤610、步骤611、步骤612简述在服务器1和工程机械车辆终端3 &#8212;侧的通信情况，具体完整的客户终端2-服务器1-工程机械车辆终端3的传输方式将在下文进行详细说明。[0118]	工程机械车辆终端3是周期性地向服务器1发送请求心跳包消息60，达到检测通信连接状态和延续连接时间的目的；服务器1则是不定时检测工程机械车辆终端3的请求心跳包消息60，实现检测工程机械车辆终端3的通信连接状态，及时清除终端伪在线连接状态。</p>
    <p>[0119]	如图7所示，示意图为服务器1与客户终端2之间的通信方法，服务器1与客户终端2之间通信和服务器1与工程机械车辆终端3之间通信的步骤方法基本一致，区别在于各自的可用服务不同，客户主动与工程机械车辆进行通信，而工程机械车辆则被动接收客户命令并执行和回馈数据消息。服务器1与客户终端2的通信方法可参考上文所述的服务器1与工程机械车辆终端3的通信方法。其通信方法包括：</p>
    <p>[0120]	步骤701 ：服务器1开放指定的IP、PORT,允许终端进行TCP/IP连接；</p>
    <p>[0121]	步骤702 ：客户终端2向服务器1发起TCP/IP建立连接请求；</p>
    <p>[0122]	步骤703 ：服务器1对客户终端2的TCP/IP连接请求验证，确定连接则通知客户终端2的TCP/IP连接成功；否定连接则通知客户终端2的TCP/IP连接失败；</p>
    <p>[0123]	步骤704 ：客户终端2接收到TCP/IP连接响应，如果TCP/IP连接成功，则客户终端2可以与服务器1正常通信；如果TCP/IP连接失败，则客户终端2需重新发起TCP/IP建立连接请求，才能与服务器1进行正常通信；</p>
    <p>[0124]	步骤705 ：客户终端2成功建立连接之后，按照本发明通信协议数据格式组织验证消息报文，并向服务器1发送该请求验证消息，请求服务器1向其分配终端在线ID和可用服务，否则，客户终端2与服务器1的连接不能被识别，服务器1将判定接收到的消息数据无效而被抛弃；</p>
    <p>[0125]	步骤706 ：服务器1接收到来自客户终端2的请求验证消息，按照身份验证方法步骤进行验证和分配终端在线ID、可用服务，保存连接资源，并向该终端发送验证响应。确定验证，则分配终端在线ID和可用服务；否定验证，则客户终端2重新发送请求验证消息；</p>
    <p>[0126]	步骤707 ：客户终端2接收到来自服务器1的验证响应并以解析。如果为确定验证响应，则获取终端在线ID，客户终端2可以与服务器1正常执行通信协议定义的服务；如果为否定验证响应，则客户终端2需重新组织和发送请求验证消息，以获取终端在线ID和可用服务；</p>
    <p>[0127]	步骤708 ：客户终端2获取终端在线ID后，可以与服务器1正常通信。客户终端 2可以进行更新检测，获取新版本协议、内部文件等；可以主动向服务器1发送导航、状态、 保养、报警等信息数据；可以接收来自服务器1的命令，执行命令并向服务器1发送回馈响应；</p>
    <p>[0128]	步骤709 ：服务器1在成功识别客户终端2后，可以与客户终端2正常通信。服务器1接收终端的更新检测请求，并提示是否有新更新信息和发送更新信息数据；接收来自客户终端2的数据，相关信息数据入数据库；发送服务器1的命令和接收终端回馈响应，相关命令操作予以记录备份；</p>
    <p>[0129]	步骤710 ：服务器1在成功识别客户终端2后，可以实现客户终端2与工程机械车辆3正常通信。服务器1中转客户终端2的命令和数据，以达到客户终端2的目的和期望；</p>
    <p>[0130]	步骤711 ：客户终端2获取终端在线ID后，可以与工程机械车辆3正常通信。工程机械车辆3接收来自客户终端2的命令和数据，执行服务和命令操作，并向客户终端2发送回馈响应；</p>
    <p>[0131]	步骤712 ：服务器1中转工程机械车辆3向客户终端2发送的回馈响应，相关命令操作在服务器1上记录备份。当客户终端2在线时，向该客户终端2发送工程机械车辆3 的回馈响应；当客户终端2不在线时，则不发送工程机械车辆3的回馈响应；</p>
    <p>[0132]	步骤713 ：服务器1与客户终端2进行文件流传输时，需发送文件同步消息，保证传输文件的同步性和连续性；</p>
    <p>[0133]	步骤714 ：客户终端2周期性地向服务器1发送请求心跳包消息，以检测与服务器 1通信连接状态，并达到延长托代理机构分配给客户终端2虚拟IP地址时间的目的。同时， 接收来自服务器1的确定心跳包响应和否定心跳包响应，判定连接状态和进行相关后续处理；</p>
    <p>[0134]	步骤715 ：服务器1接收来自客户终端2的请求心跳包消息，并向客户终端2发送确定心跳包响应或否定心跳包响应；</p>
    <p>[0135]	步骤716 ：服务器1定时检测客户终端2的请求心跳包消息。如果周期内接收到客户终端2的请求心跳包消息，则判定客户终端2的连接状态正常，连接得以延续；如果周期内没有接收到客户终端2的请求心跳包消息，则判定客户终端2的连接状态不正常，释放该终端在服务器上的连接资源；</p>
    <p>[0136]	步骤717 ：客户终端2向服务器1发送终止连接，释放终端上保存的连接资源，与服务器1的TCP/IP通信连接结束；</p>
    <p>[0137]	步骤718 ：服务器1接收到来自客户终端2的请求终止连接消息，释放该终端的连接资源，如终端在线ID、在线列表项等，服务器1与该终端的TCP/IP通信连接结束。</p>
    <p>[0138]	如图8所示，描述了客户终端2经服务器1与工程机械车辆终端3进行通信的流程，即客户终端2-服务器1-工程机械车辆终端3传输方式，是本发明所述的工程机械车辆联网系统的重要内容，实现客户对工程机械车辆的监控和管理。两者之间的通信一般由客户终端2所发起，工程机械车辆终端3所接收和执行并回馈数据消息。因此，结合客户终端 (0x0002)向工程机械车辆终端（0x0003)经过服务器（0x0001)进行一级锁车命令服务示例，所使用的通信协议的标识头和版本号为0x8A9B01，请求一级锁车服务为0x0402，回馈一级锁车服务为0x0403，所有终端在线状态为TRUE和FALSE，服务器1向所有终端中转发送数据消息状态为DONE和UNDO，客户终端2与工程机械车辆终端3的通信方法如下：</p>
    <p>[0139]	步骤801 ：客户终端2向在线工程机械车辆终端3发送命令数据消息58，数据消息58按照本发明通信协议数据格式进行组织，会话ID字段为自身的在线ID，目的ID字段 46为工程机械车辆终端3的在线ID。因此，客户终端（0x0002)向服务器（0x0001)发送的一级锁车命令数据消息58为0X8A9B01040200020003，其中，目的ID为工程机械车辆终端 (0x0003)，而不是服务器（0x0001)；</p>
    <p>[0140]	步骤802 ：服务器1解析客户终端2的命令数据消息58，得到相关信息，如会话ID、 目的ID、服务内容等。如果服务器1不能正确解析命令数据消息58，则终止此次服务。月艮务器（0x0001)接收到一级锁车命令消息58并解析，获取服务内容（0x0402-请求一级锁车服务）、会话终端的在线ID和终端类型（0x0002-客户终端）、目的终端的在线ID和终端类型（0x0003-工程机械车辆终端)；</p>
    <p>[0141]	步骤803 ：服务器1根据得到的目的ID判断工程机械车辆终端3当前是否在线，并向客户终端2发送工程机械车辆终端3是否在线的回馈响应。如果工程机械车辆终端3 在线状态为TRUE，则服务器1继续执行操作，并通知客户终端2，客户终端2则得知工程机械车辆终端3在线状态TRUE，客户终端2继续等待操作响应；如果工程机械车辆终端3在线状态为FALSE，则服务器1终止此次服务，并通知客户终端2，客户终端2得知工程机械车辆终端3在线状态FALSE，将刷新本地工程机械车辆终端3在线列表，终止此次服务而进行其他操作。因此，设定工程机械车辆终端（0x000:3)在线，在执行一级锁车命令时，服务器 (0x0001)向客户终端（0x000》发送工程机械车辆终端（0x000:3)的在线状态数据消息58 为0x8A9B01010A0003000201FF (其中，OxOlOA为在线状态服务，0x01为有效负载长度，在线状态TRUE以OxFF表示，在线状态FALSE以0x00表示)；</p>
    <p>[0142]	步骤804 ：服务器1向工程机械车辆终端3中转发送客户终端2的命令数据消息 58，并将客户终端2的服务操作备录，向客户终端2通知发送命令数据消息状态DONE或 UNDO。如果服务器1中转发送命令数据消息状态DONE，则服务器1中转命令成功，记录客户终端2操作内容和操作状态DONE，并通知客户终端2，客户终端2得知命令数据消息状态DONE，客户终端2继续等待操作响应；如果服务器1中转发送命令数据消息状态UNDO， 则服务器1中转命令失败，记录客户终端2操作内容和操作状态UNDO，并通知客户终端2， 客户终端2得知命令数据消息状态UNDO，将可以选择重新发送命令数据消息58再次进行操作，或终止此次服务而进行其他操作。设定服务器（0x0001)中转发送命令数据消息成功，服务器（0x0001)向工程机械车辆终端（0x000:3)发送的一级锁车命令消息数据58为 0x8A9B01040200020003，其中，会话ID为客户终端（0x000》而不为服务器（0x0001)，以便工程机械车辆终端（0x000:3)得知与之通信的具体客户终端；服务器（0x0001)向客户终端 (0x0002)发送中转一级锁车命令成功的数据消息58为0x8A9B01010B0001000205FF040200 03 (其中，OxOlOB为中转命令状态服务，0x05为有效负载长度，中转状态DONE以OxFF表示， 中转状态UNDO以0x00表示，0x04020003为工程机械车辆终端（0x000:3)执行一级锁车命令）；</p>
    <p>[0143]	步骤805 ：工程机械车辆终端3接收和解析来自服务器1中转客户终端2的命令数据消息58，获取客户终端2及服务的相关数据，如会话终端的在线ID、服务内容等；如果解析出的目的ID与自身在线ID不一致，则视为不能正确解析；如果不能正确解析数据消息，则抛弃掉该条数据消息。例如，工程机械车辆终端（0x0003)接收到服务器（0x0001) 中转发送的一级锁车命令数据消息58为0x8A9B01040200020003，获取会话ID为客户终端 (0x0002)、服务内容0x0402为请求一级锁车；</p>
    <p>[0144]	步骤806 ：工程机械车辆终端3执行客户终端2的命令和操作，向客户终端2回馈命令数据消息58，此时，发送的回馈命令数据消息58的会话ID为自身在线ID，目的ID 为解析获取的客户终端2的在线ID，回馈命令数据消息58的有效负载会根据不同的请求服务而有所改变，具体内容应由应用此通信方法的系统所规定。例如，工程机械车辆终端 (0x0003)成功执行了一级锁车命令，并向客户终端（0x0002)发送的回馈命令数据消息58 为0x8A9B01040300030002030401FF(其中，0x0403为回馈一级锁车服务，0x03为有效负载长度，0x0401为执行的请求一级锁车服务，执行成功以OxFF表示，执行失败以0x00表示）；</p>
    <p>[0145]	步骤807 ：服务器1接收和解析工程机械车辆终端3的回馈命令数据消息58，获取相关信息，如会话ID、目的ID、服务内容、有效负载数据等。服务器（0x0001)接收到回馈一级锁车数据消息并解析，获取服务内容（回馈一级锁车服务)、会话ID和终端类型 (0x0003-工程机械车辆终端）、目的ID和终端类型（0x0002-客户终端）、有效数据（执行请求一级锁车命令成功）；</p>
    <p>[0146] 	步骤808 ：当回馈命令数据消息58为重要内容时，服务器1可保存相关数据入数据库（如保养信息等），备录工程机械车辆终端3的操作结果（如锁车、复位等），以便服务器1对工程机械车辆终端3的后期管理和维护；并检测客户终端2在线状态，如果客户终端2在线状态为TRUE，将继续执行下述中转过程；如果客户终端2在线状态为FALSE，将终止下述中转过程，当数据消息为重要操作时，以文字方式记录之，以待客户终端2下次在线时，通知其上次未收到的命令操作结果。设客户终端（0x0002)在线状态为TRUE，服务器 (0x0001)获取得知工程机械车辆终端（0x0002)执行一级锁车成功，并备录工程机械车辆终端（0x0003)执行一级锁车成功操作；</p>
    <p>[0147]	步骤809 ：服务器1向在线客户终端2中转发送工程机械车辆终端3的回馈命令数据消息58，以完成客户终端2的期望和目的。如果中转发送状态为DONE，则服务器1完成向客户终端2中转回馈命令数据消息过程；如果中转发送状态为UNDO，则服务器1没有完成向客户终端2中转回馈命令数据消息过程，当数据消息为重要操作时，以文字方式记录之， 以待客户终端2下次在线时，通知其上次未收到的命令操作结果。设中转发送状态为DONE， 服务器（0x0001)向客户终端（0x0002)中转发送的执行一级锁车成功的回馈命令数据消息 58为0x8A9B01040300030002030401FF (其中，会话ID为工程机械车辆终端（0x0003)，而不是服务器（0x0001)，以便客户终端（0x0002)得知是工程机械车辆终端（0x0003)完成的回馈命令）；</p>
    <p>[0148]	步骤810 ：客户终端2接收和解析来自服务器1中转发送的工程机械车辆终端3的回馈命令数据消息58，获取相关数据，如会话ID、服务内容等，最后呈现给客户终端2或进行其它后续操作。例如，客户终端（0x0002)接收到服务器（0x0001)中转发送的执行一级锁车成功的回馈命令数据消息58为0x8A9B01040300030002030401FF，得知工程机械车辆终端（0x0003)完成了所要求的一级锁车命令。</p>
    <p>[0149]	其中，上述步骤所使用到的服务器1、客户终端2、工程机械车辆终端3代表系统通用概念，所使用到的服务器（0x0001)、客户终端（0x0002)、工程机械车辆终端（0x0003)代表系统中的具体设备。上述方法为一次完整的客户终端2访问工程机械车辆终端3的通信服务。</p>
    <p>[0150]	客户终端2的有些命令数据消息并不需要回馈命令数据消息，只需要工程机械车辆终端3执行即可，服务器1也可以不进行记录备份某些命令和操作，工程机械车辆终端3 也可以不进行回馈响应。如果中间某环节发生中断或终止，客户终端2对工程机械车辆终端3的本次通信服务结束。</p>
    <p>[0151]	如图9所示，为了所有终端与服务器1通信连接和持续性和可靠性，所有终端须周期性地向服务器1发送请求心跳包消息，服务器1定时检测终端的请求心跳包消息，以检测和判定终端的通信连接状态。图9描述了心跳包消息收发和检测的方法，具体步骤如下：</p>
    <p>[0152]	步骤901 ：终端心跳包消息周期为T ；终端接收到服务器1发送的确定验证响应时，记为心跳包零点，心跳包定时器开始计时；终端上次接收到来自服务器1的确定心跳包响应时，记为本次心跳包起点；终端在心跳包定时器经时间T后，向服务器1发送本次请求心跳包消息；</p>
    <p>[0153]	步骤902 ：服务器1接收到来自终端的请求心跳包消息后，向该终端发送确定心跳包响应；</p>
    <p>[0154]	步骤903 ：终端接收到来自服务器1的确定心跳包响应后，确认当前连接正常，心跳包定时器清零，记为下次心跳包起点；和终端接收到来自服务器1的否定心跳包响应后， 确认当前连接不正常，回收连接资源。</p>
    <p>[0155]	步骤904 ：服务器1定时检测心跳包周期为Tl，且Tl &gt; T ；服务器1向终端发送确定验证响应后，记为该终端检测零点，定时器开始计时；服务器1在定时周期内接收到来自终端的请求心跳包消息后，向该终端发送确定心跳包响应，定时器重新计时，记为该终端下一检测起点；和服务器1在定时周期内没有接收到来自终端的请求心跳包消息后，判定该终端已终止连接，释放该终端连接资源。</p>
    <p>[0156]	在进行通信服务时，通信协议报文采用相同的报文头结构，一方面方便服务器和终端进行解析服务命令，另一方面节约网络资源成本。在订制服务命令时，相同服务内容的命令成对存在，譬如请求一级锁车服务命令的服务类型和服务ID为0x0402，则回馈一级锁车的服务类型和服务ID为0x0403，以完成请求和执行服务命令。同一服务类型可以占用更多的空间，譬如状态数据服务可占用服务类型字段0x01&#12316;0x03的范围空间，以满足应用服务的需要。</p>
    <p>[0157]	进行传输总线服务时，服务器1或客户终端2向工程机械车辆终端3发送服务命令的报文头采用车辆联网通信协议的公共报文头结构，公共报文头中的服务类型和服务ID 阐述了传输总线的物理结构和传输总线采用的控制协议（如1939协议），服务命令的有效负载为该传输总线采用的控制协议的远程帧（请参考控制协议帧结构）。当工程机械车辆终端3接收到该服务命令后，解析公共报文头获知该服务命令为传输总线服务命令和传输总线的物理地址，工程机械车辆终端3只需将服务命令的有效负载作为传输总线远程帧直接挂载到该传输总线上，等待接收终端设备发送的数据帧，工程机械车辆终端3将接收到的数据帧作为回叫传输总线服务命令的有效负载，与公共报文头共同组成回叫传输服务命令发送给服务器1或客户终端2，服务器1或客户终端2接收到回叫响应后，只需按照传输总线控制协议来解析有效负载，获取要请求的数据，完成传输总线服务。</p>
    <p>[0158]	如上述本发明的基于有线和无线通信的工程机械车辆联网通信协议及使用该协议的车联网系统和方法，有效地保证了所述服务器和所述终端之间的通信连接和服务质量，以及在多种工程机械车辆终端和服务器通信的兼容性，很好地促进该协议在工程机械车辆联网系统上的应用。</p>
    <p>[0159]	本发明的通信协议预留了很大的空间，以满足不同的厂商和不同的服务的需要， 如协议标识字段有两个字节，可服务类型和服务ID共两个字节，可以最大支持65536种服务，服务内容可以根据不同的要求进行必要的添加和删除；在线ID可以最大支持65534个终端在线，基本满足一台服务器同时连接最大支持的终端数量。</p>
    <p>[0160]	本发明所述的车辆联网系统为客户提供了移动控制平台，使得客户更加人性化地访问、监控和管理工程机械车辆，客户体验和售后服务也得到进一步的提升，适应了市场的需求。</p>
    <p>[0161]	本发明所述的车辆联网系统为工程机械车辆提供多种通信服务，实现客户与工程</p>
    <p>21机械车辆之间的交互访问，工程机械车 辆亦及时地呈报各种信息，方便了厂商对工程机械车辆的信息采集和统计，加快了厂商的产品升级和科研步伐，更有利于厂商的企业发展和生存。</p>
    <p>[0162]	同时，本发明所述的工程机械车辆联网通信协议及使用该协议的车联网系统和方法，并不限制使用者的字段内容和服务内容的订制，使用者应当注意：根据自身和环境需要，以最低成本实现整个车联网系统的通信服务，达到人机交互、终端智能化的目的。</p>
    <p>[0163]	以上所述仅为本发明的优选实施方式，但本发明保护范围并不局限于此。任何本领域的技术人员在本发明公开的技术范围内，均可对其进行适当的改变或变化，而这种改变或变化都应涵盖在本发明的保护范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1510875A?cl=zh">CN1510875A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2003年12月2日</td><td class="patent-data-table-td patent-date-value">2004年7月7日</td><td class="patent-data-table-td ">索尼株式会社</td><td class="patent-data-table-td ">用于控制信息处理设备的系统和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101095104A?cl=zh">CN101095104A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2005年12月27日</td><td class="patent-data-table-td patent-date-value">2007年12月26日</td><td class="patent-data-table-td ">三星电子株式会社</td><td class="patent-data-table-td ">终端数据格式和使用该终端数据格式的通信控制系统及方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102621902A?cl=zh">CN102621902A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年2月21日</td><td class="patent-data-table-td patent-date-value">2012年8月1日</td><td class="patent-data-table-td ">浙江大学</td><td class="patent-data-table-td ">一种工程机械车辆联网应用的凿岩钻车数据处理方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=qs6EBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029120000">H04L29/12</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=qs6EBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029060000">H04L29/06</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=qs6EBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012280000">H04L12/28</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2012年1月25日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2012年3月14日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年11月12日</td><td class="patent-data-table-td ">C02</td><td class="patent-data-table-td ">Deemed withdrawal of patent application after publication (patent law 2001)</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/85040aa5058c535216d8/CN102333071A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%B7%A5%E7%A8%8B%E6%9C%BA%E6%A2%B0%E8%BD%A6%E8%BE%86%E8%81%94%E7%BD%91%E9%80%9A%E4%BF%A1%E6%96%B9.pdf?id=qs6EBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1VC9UCB5PWOdYTYYQxZZ3JZvGuTg"},"sample_url":"https://www.google.com/patents/reader?id=qs6EBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>