<!DOCTYPE html><html><head><title>专利 CN101035004A - 基于号码携带业务的计费方法、及其相关设备 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="基于号码携带业务的计费方法、及其相关设备"><meta name="DC.contributor" content="张俐" scheme="inventor"><meta name="DC.contributor" content="华为技术有限公司" scheme="assignee"><meta name="DC.date" content="2007-4-12" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种对呼叫类业务进行计费的方法，拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息，所述请求消息中携带被叫用户信息；根据被叫用户信息查询号码携带数据库，在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点；业务控制点在请求消息中携带有被叫用户路由号码时，将被叫用户作为网外用户对主叫用户计费，及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户计费。本发明还公开了一种对基于号码携带的增值业务进行计费的方法。本发明可以在开展MNP业务的网络环境中对呼叫类业务、各种增值业务进行正确计费。"><meta name="DC.date" content="2007-9-12"><meta name="citation_patent_publication_number" content="CN:101035004:A"><meta name="citation_patent_application_number" content="CN:200710095887"><link rel="canonical" href="https://www.google.com/patents/CN101035004A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101035004A?cl=zh"/><meta name="title" content="专利 CN101035004A - 基于号码携带业务的计费方法、及其相关设备"/><meta name="description" content="本发明公开了一种对呼叫类业务进行计费的方法，拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息，所述请求消息中携带被叫用户信息；根据被叫用户信息查询号码携带数据库，在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点；业务控制点在请求消息中携带有被叫用户路由号码时，将被叫用户作为网外用户对主叫用户计费，及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户计费。本发明还公开了一种对基于号码携带的增值业务进行计费的方法。本发明可以在开展MNP业务的网络环境中对呼叫类业务、各种增值业务进行正确计费。"/><meta property="og:title" content="专利 CN101035004A - 基于号码携带业务的计费方法、及其相关设备"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101035004A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101035004A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101035004A&amp;usg=AFQjCNH-aTqKb5c567Ztm9Ab4cy1LIrRHg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/f72592b413e7ede67077/CN101035004A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/f72592b413e7ede67077/CN101035004A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101035004A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101035004A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101035004A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN100558040C?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101035004A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种对呼叫类业务进行计费的方法，拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息，所述请求消息中携带被叫用户信息；根据被叫用户信息查询号码携带数据库，在查询到...</span><span itemprop="url">https://www.google.com/patents/CN101035004A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101035004A - 基于号码携带业务的计费方法、及其相关设备</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101035004A - 基于号码携带业务的计费方法、及其相关设备" title="专利 CN101035004A - 基于号码携带业务的计费方法、及其相关设备"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101035004 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200710095887</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2007年9月12日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2007年4月12日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年4月12日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN100558040C?hl=zh-CN&amp;cl=zh">CN100558040C</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2117162A1?hl=zh-CN&amp;cl=zh">EP2117162A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2117162A4?hl=zh-CN&amp;cl=zh">EP2117162A4</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20100015946?hl=zh-CN&amp;cl=zh">US20100015946</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2008125034A1?hl=zh-CN&amp;cl=zh">WO2008125034A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200710095887.7, </span><span class="patent-bibdata-value">CN 101035004 A, </span><span class="patent-bibdata-value">CN 101035004A, </span><span class="patent-bibdata-value">CN 200710095887, </span><span class="patent-bibdata-value">CN-A-101035004, </span><span class="patent-bibdata-value">CN101035004 A, </span><span class="patent-bibdata-value">CN101035004A, </span><span class="patent-bibdata-value">CN200710095887, </span><span class="patent-bibdata-value">CN200710095887.7</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%BC%A0%E4%BF%90%22">张俐</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8D%8E%E4%B8%BA%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">华为技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101035004A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101035004A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101035004A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (17),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (14),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (4)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200710095887&amp;usg=AFQjCNEZ_sctZookk4WcutykI9lERxxJsg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101035004A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGnuh3gqbCmfBmnPcCLn1VugzPctA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT121956930" lang="ZH" load-source="patent-office">基于号码携带业务的计费方法、及其相关设备</invention-title>
    </span><br><span class="patent-number">CN 101035004 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA108190578" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种对呼叫类业务进行计费的方法，拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息，所述请求消息中携带被叫用户信息；根据被叫用户信息查询号码携带数据库，在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点；业务控制点在请求消息中携带有被叫用户路由号码时，将被叫用户作为网外用户对主叫用户计费，及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户计费。本发明还公开了一种对基于号码携带的增值业务进行计费的方法。本发明可以在开展MNP业务的网络环境中对呼叫类业务、各种增值业务进行正确计费。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(18)</span></span></div><div class="patent-text"><div mxw-id="PCLM50778133" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种对呼叫类业务进行计费的方法，其特征在于，包括步骤：后付费主叫用户拜访的交换设备判断接收到的路由查询响应消息中是否携带被叫用户的路由号码信息；以及在判断结果为携带时将所述路由号码信息写入话单；计费设备识别出在话单中已写入路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在识别出话单中未写入路由号码时，将被叫用户作为网内用户对主叫用户进行计费。</div>
    </div>
    </div> <div class="claim"> <div num="2" class="claim">
      <div class="claim-text">2.一种交换设备，其特征在于，包括：在后付费主叫用户呼叫被叫用户时，判断接收到的路由查询响应消息中是否携带被叫用户的路由号码信息的单元；和用于在判断出接收到的路由查询响应消息中携带有路由号码信息时，将所述路由号码信息写入话单的单元。</div>
    </div>
    </div> <div class="claim"> <div num="3" class="claim">
      <div class="claim-text">3.一种计费设备，其特征在于，包括：用于识别在话单中是否写入有路由号码信息的单元；和用于在话单中已写入路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在话单中未写入路由号码时，将被叫用户作为网内用户对主叫用户进行计费的单元。</div>
    </div>
    </div> <div class="claim"> <div num="4" class="claim">
      <div class="claim-text">4.一种对呼叫类业务进行计费的方法，其特征在于，包括步骤：拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息，所述请求消息中携带被叫用户信息；根据被叫用户信息查询号码携带数据库，在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点；所述业务控制点在请求消息中携带有被叫用户路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户进行计费。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求4所述的方法，其特征在于，所述请求消息为初始检测点消息。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6.一种移动号码携带信号中继设备，其特征在于，包括：用于拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息的单元，所述请求消息中携带被叫用户信息；用于根据被叫用户信息查询号码携带数据库的单元；和用于在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点的单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求6所述的设备，其特征在于，所述请求消息为初始检测点消息。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8.一种业务控制点，其特征在于，包括：用于识别预付费主叫用户拜访的交换设备发来的请求消息中是否携带被叫用户路由号码信息的单元；和用于在所述请求消息中携带被叫用户路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户进行计费的单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.如权利要求8所述的业务控制点，其特征在于，所述请求消息为初始检测点消息。</div>
    </div>
    </div> <div class="claim"> <div num="10" class="claim">
      <div class="claim-text">10.一种对基于号码携带的增值业务进行计费的方法，其特征在于，包括步骤：拦截增值业务设备向归属位置寄存器发送的用于查询接收用户路由信息的查询请求消息；根据所述查询请求消息中携带的接收用户信息查询号码携带数据库，以及根据查询结果将所述查询请求消息路由到对应网络中的归属位置寄存器；所述对应网络中的归属位置寄存器向增值业务设备反馈携带有接收用户路由信息的响应消息；所述增值业务设备根据接收到的响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息；以及在发送用户为预付费用户的情况下，若分析得到接收用户的路由号码信息时，则将得到的路由号码信息携带在计费请求消息中上报给业务控制点；所述业务控制点在计费请求消息中携带接收用户路由号码时，将接收用户作为网外用户对发送用户进行计费，以及在计费请求消息中未携带接收用户路由号码时，将接收用户作为网内用户对发送用户进行计费。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.如权利要求10所述的方法，其特征在于，还包括步骤：所述增值业务设备在接收到业务控制点下发的连接指示时，根据接收到的响应消息中携带的接收用户路由信息，执行消息下发处理。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.如权利要求10或11所述的方法，其特征在于，所述增值业务设备为：短消息业务中心；或互联网消息业务网关；或多媒体消息业务中心；或网关移动定位中心。</div>
    </div>
    </div> <div class="claim"> <div num="13" class="claim">
      <div class="claim-text">13.一种移动号码携带信号中继设备，其特征在于，包括：用于拦截增值业务设备向归属位置寄存器发送的用于查询接收用户路由信息的查询请求消息的单元；用于根据所述查询请求消息中携带的接收用户信息查询号码携带数据库的单元；以及用于根据查询结果将所述查询请求消息路由到对应网络中的归属位置寄存器的单元。</div>
    </div>
    </div> <div class="claim"> <div num="14" class="claim">
      <div class="claim-text">14.一种增值业务设备，其特征在于，包括：用于根据对应网络中的归属位置寄存器发来的路由查询响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息的单元；用于在发送用户为预付费用户的情况下，在分析得到接收用户的路由号码信息时，将得到的路由号码信息携带在计费请求消息中上报给业务控制点的单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.如权利要求14所述的增值业务设备，其特征在于，所述增值业务设备为：短消息业务中心；或互联网消息业务网关；或多媒体消息业务中心；或网关移动定位中心。</div>
    </div>
    </div> <div class="claim"> <div num="16" class="claim">
      <div class="claim-text">16.一种业务控制点，其特征在于，包括：用于识别增值业务设备发来的计费请求消息中是否携带接收用户路由号码信息的单元；和用于在所述计费请求消息中携带接收用户路由号码时，将接收用户作为网外用户对发送用户进行计费，以及在请求消息中未携带接收用户路由号码时，将接收用户作为网内用户对发送用户进行计费的单元。</div>
    </div>
    </div> <div class="claim"> <div num="17" class="claim">
      <div class="claim-text">17.一种对基于号码携带的增值业务进行计费的方法，其特征在于，包括步骤：拦截增值业务设备向归属位置寄存器发送的用于查询接收用户路由信息的查询请求消息；根据所述查询请求消息中携带的接收用户信息查询号码携带数据库，以及根据查询结果将所述查询请求消息路由到对应网络中的归属位置寄存器；所述对应网络中的归属位置寄存器向增值业务设备反馈携带有接收用户路由信息的响应消息；所述增值业务设备根据接收到的响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息；以及在发送用户为后付费用户的情况下，若分析得到接收用户的路由号码信息时，则将得到的路由号码信息写入话单；计费设备识别出在话单中已写入路由号码时，将发送用户作为网外用户对接收用户进行计费，以及在识别出话单中未写入路由号码时，将发送用户作为网内用户对接收用户进行计费。</div>
    </div>
    </div> <div class="claim"> <div num="18" class="claim">
      <div class="claim-text">18.一种增值业务设备，其特征在于，包括：用于根据对应网络中的归属位置寄存器发来的路由查询响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息的单元；用于在发送用户为后付费用户的情况下，在分析得到接收用户的路由号码信息时，将得到的路由号码信息写入话单的单元。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES57837472" lang="ZH" load-source="patent-office" class="description">
    <invention-title lang="ZH">基于号码携带业务的计费方法、及其相关设备</invention-title>
    <technical-field>
      <p>技术领域</p>
      <p>本发明涉及号码携带技术，更具体的涉及一种对呼叫类业务进行计费的方法及其相关设备、对基于号码携带的增值业务进行计费的方法及其相关设备。</p>
    </technical-field>
    <background-art>
      <p>背景技术</p>
      <p>移动号码携带业务(MNP，Mobile&#160;Number&#160;Portability)，是指允许移动用户在同一个国家内改变签约网络时，不需要改变原有的移动台ISDN号码(MSISDN，Mobile&#160;Station&#160;ISDN&#160;Number)，即用户拥有永久的移动电话号码(称为可携带号码)，当用户移动到其他签约网络后，仍可使用原来的电话号码，因此MNP业务为移动用户带来了很多方便之处。基于MNP业务，用户使用原始的电话号码签约在其他网络中后，新的签约网络将分配新的国际移动台识别号码(IMSI，International&#160;Mobile&#160;Subscriber&#160;Identification&#160;Number)给携带入网(Ported&#160;in)的移动用户，其各种通信业务改由新的签约网络提供，并与该新的签约网络下其他用户享有同样的补充业务和增值业务，这些通信业务不会受到旧的签约网络的影响。</p>
      <p>然而，MNP业务的开展不可避免的将带来下面两点技术问题：路由问题：在MNP用户通信过程中，如何区分用户是否发生了MNP，将通信信令或通信消息正确路由到用户当前真正的签约网络；计费问题：在MNP用户通信过程中，业务侧如何区分用户是否发生了MNP，以对携带入网(Ported&#160;in)或携带出网(Ported&#160;out)的用户予以正确的区分计费。</p>
      <p>目前3GPP&#160;22.066/23.066协议已经对GSM、UMTS网络实现MNP业务的要求给出了规范性建议，该规范明确规定和描述了MNP业务的基本实现原理，并主要描述了两种MNP实现方案：第一种方案，在网络中增加类似MNP信号中继功能(MNP-SRF，MNPSignalling&#160;Relay&#160;Function)的设备，并将该设备放置在MSC/GMSC与HLR之间。当MSC/GMSC向HLR发出路由查询(SRI，Send&#160;Routing&#160;Info)请求时，MNP-SRP会拦截SRI消息，并根据该消息中携带的号码信息查询号码携带数据库(NPDB，Number&#160;Portability&#160;Database)，一旦发现该号码已携带出网(Portedout)，则向MSC返回RN+MSISDN，其中RN指路由号码(Routing&#160;Number)，MSC根据RN信息将呼叫转接到GMSC上，而GMSC则根据RN信息将呼叫转发给移动用户当前新签约在的网络。</p>
      <p>第二种方案，和上述第一种方案的实现原理相似，但是需要将针对已携带出网(Ported&#160;out)的号码的呼叫触发到智能网(IN，Intelligent&#160;Network)，由智能网查询NPDB后在移动用户的MSISDN号码前添加RN进行接续。</p>
      <p>但是上述两种MNP实现方案都只是从呼叫业务的正确路由上给出了描述和规定，而对于其他非呼叫类移动增值业务，例如移动数据业务、位置相关业务等并没有给出具体的路由处理方式和计费处理方式，同时对于呼叫类业务的正确计费问题也没有给出相关描述。</p>
    </background-art>
    <disclosure>
      <p>发明内容</p>
      <p>本发明实施例提出一种对呼叫类业务进行计费的方法及其相关的设备，以解决在开展了MNP业务的网络环境中对呼叫类业务进行正确计费的问题。</p>
      <p>本发明实施例还提出一种对基于号码携带的增值业务进行计费的方法及其相关的设备，以解决在开展了MNP业务的网络环境中对各种增值业务进行正确计费的问题。</p>
      <p>本发明实施例提出一种对呼叫类业务进行计费的方法，包括步骤：后付费主叫用户拜访的交换设备判断接收到的路由查询响应消息中是否携带被叫用户的路由号码信息；以及在判断结果为携带时将所述路由号码信息写入话单；计费设备识别出在话单中已写入路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在识别出话单中未写入路由号码时，将被叫用户作为网内用户对主叫用户进行计费。</p>
      <p>本发明实施例还提出一种交换设备，包括在后付费主叫用户呼叫被叫用户时，判断接收到的路由查询响应消息中是否携带被叫用户的路由号码信息的单元；和用于在判断出接收到的路由查询响应消息中携带有路由号码信息时，将所述路由号码信息写入话单的单元。</p>
      <p>本发明实施例还提出一种计费设备，包括用于识别在话单中是否写入有路由号码信息的单元；和用于在话单中已写入路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在话单中未写入路由号码时，将被叫用户作为网内用户对主叫用户进行计费的单元。</p>
      <p>本发明实施例还提出一种对呼叫类业务进行计费的方法，包括步骤：拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息，所述请求消息中携带被叫用户信息；根据被叫用户信息查询号码携带数据库，在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点；所述业务控制点在请求消息中携带有被叫用户路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户进行计费。</p>
      <p>本发明实施例还提出一种移动号码携带信号中继设备，包括用于拦截预付费主叫用户拜访的交换设备向业务控制点发送的用于触发预付费业务的请求消息的单元，所述请求消息中携带被叫用户信息；用于根据被叫用户信息查询号码携带数据库的单元；和用于在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息携带在所述请求消息中后转发给业务控制点的单元。</p>
      <p>本发明实施例还提出一种业务控制点，包括用于识别预付费主叫用户拜访的交换设备发来的请求消息中是否携带被叫用户路由号码信息的单元；和用于在所述请求消息中携带被叫用户路由号码时，将被叫用户作为网外用户对主叫用户进行计费，以及在请求消息中未携带被叫用户路由号码时，将被叫用户作为网内用户对主叫用户进行计费的单元。</p>
      <p>本发明实施例还提出一种对基于号码携带的增值业务进行计费的方法，包括步骤：拦截增值业务设备向归属位置寄存器发送的用于查询接收用户路由信息的查询请求消息；根据所述查询请求消息中携带的接收用户信息查询号码携带数据库，以及根据查询结果将所述查询请求消息路由到对应网络中的归属位置寄存器；所述对应网络中的归属位置寄存器向增值业务设备反馈携带有接收用户路由信息的响应消息；所述增值业务设备根据接收到的响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息；以及在发送用户为预付费用户的情况下，若分析得到接收用户的路由号码信息时，则将得到的路由号码信息携带在计费请求消息中上报给业务控制点；所述业务控制点在计费请求消息中携带接收用户路由号码时，将接收用户作为网外用户对发送用户进行计费，以及在计费请求消息中未携带接收用户路由号码时，将接收用户作为网内用户对发送用户进行计费。</p>
      <p>本发明实施例还提出一种移动号码携带信号中继设备，包括用于拦截增值业务设备向归属位置寄存器发送的用于查询接收用户路由信息的查询请求消息的单元；用于根据所述查询请求消息中携带的接收用户信息查询号码携带数据库的单元；以及用于根据查询结果将所述查询请求消息路由到对应网络中的归属位置寄存器的单元。</p>
      <p>本发明实施例还提出一种增值业务设备，包括用于根据对应网络中的归属位置寄存器发来的路由查询响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息的单元；用于在发送用户为预付费用户的情况下，在分析得到接收用户的路由号码信息时，将得到的路由号码信息携带在计费请求消息中上报给业务控制点的单元。</p>
      <p>本发明实施例还提出一种业务控制点，包括用于识别增值业务设备发来的计费请求消息中是否携带接收用户路由号码信息的单元；和用于在所述计费请求消息中携带接收用户路由号码时，将接收用户作为网外用户对发送用户进行计费，以及在请求消息中未携带接收用户路由号码时，将接收用户作为网内用户对发送用户进行计费的单元。</p>
      <p>发明实施例还提出一种对基于号码携带的增值业务进行计费的方法，包括步骤：拦截增值业务设备向归属位置寄存器发送的用于查询接收用户路由信息的查询请求消息；根据所述查询请求消息中携带的接收用户信息查询号码携带数据库，以及根据查询结果将所述查询请求消息路由到对应网络中的归属位置寄存器；所述对应网络中的归属位置寄存器向增值业务设备反馈携带有接收用户路由信息的响应消息；所述增值业务设备根据接收到的响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息；以及在发送用户为后付费用户的情况下，若分析得到接收用户的路由号码信息时，则将得到的路由号码信息写入话单；计费设备识别出在话单中已写入路由号码时，将发送用户作为网外用户对接收用户进行计费，以及在识别出话单中未写入路由号码时，将发送用户作为网内用户对接收用户进行计费。</p>
      <p>发明实施例还提出一种增值业务设备，包括用于根据对应网络中的归属位置寄存器发来的路由查询响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的路由号码信息的单元；用于在发送用户为后付费用户的情况下，在分析得到接收用户的路由号码信息时，将得到的路由号码信息写入话单的单元。</p>
      <p>本发明实施例基于MNP标准协议，通过少量的能力扩展，实现了对基于MNP业务环境下的呼叫类业务进行计费的方案，相应地也实现了基于MNP业务环境下对非呼叫类增值业务进行计费的方案，从而为更好的在通信网络系统中开展MNP业务提供了有利保障。</p>
    </disclosure>
    <description-of-drawings>
      <p>附图说明</p>
      <p>图1为基于MNP网络环境下对后付费用户进行计费的第一实施例处理过程示意图；图2为基于MNP网络环境下对后付费用户进行计费的第二实施例处理过程示意图；图3为在MNP网络环境下本发明实现对预付费用户进行计费的网络框架示意图；图4为对短消息业务进行计费及其路由处理的第一实施例处理过程示意图；图5为对短消息业务进行计费及其路由处理的第二实施例处理过程示意图。</p>
    </description-of-drawings>
    <mode-for-invention>
      <p>具体实施方式</p>
      <p>本发明实施例首先提出在MNP网络环境中，在被叫用户属于网内用户或网外用户的情况下，如何对主叫用户进行区分计费的方案。</p>
      <p>其中对呼叫类业务进行计费又可分为对后付费用户进行计费、以及对预付费用户进行计费两种情况，在开展了MNP业务的网络环境中，对后付费呼叫用户进行计费的实现原理是：后付费主叫用户拜访的交换设备(如MSC)判断接收到的路由查询响应消息(SRI_ACK)中是否携带有被叫用户的路由号码信息(RN)，其中在判断结果为SRI响应消息中携带有被叫用户的RN信息时，将该SRI响应消息中携带的RN信息写入话单；计费设备(如BOSS系统)在识别出话单中已写入路由号码时，将被叫用户作为网外用户对主叫用户进行计费处理，以及在识别出话单中未写入路由号码时，将被叫用户作为网内用户对主叫用户进行计费处理。</p>
      <p>如图1所示，为基于MNP网络环境下对后付费用户进行计费的第一实施例处理过程示意图，其中：</p>
      <p>1)主叫用户发起呼叫，呼叫被叫用户，其拜访的VMSC/GMSC根据被呼叫的用户信息发送SRI消息给对应的归属位置寄存器，以查询被叫用户的路由信息；2)处于VMSC/GMSC和HLR之间的MNP-SRF拦截VMSC/GMSC发来的SRI消息，根据SRI消息中携带的被叫用户信息执行NPDB查询操作，若通过查询发现被叫用户已经携带出网(ported&#160;out)，或被叫用户本身就属于外网用户，则在被叫用户的MSISDN号码前添加被叫用户的RN，然后将处理后的被叫用户号码信息携带在SRI_ACK消息中返回给主叫用户拜访的VMSC/GMSC；3)主叫用户拜访的VMSC/GMSC根据SRI_ACK消息中携带的RN把呼叫路由到相应外网的GMSC，由该外网的GMSC接续被叫用户；4)主叫用户拜访的VMSC/GMSC还要进而将SRI_ACK消息中携带的RN信息写入话单，计费部件(如BOSS系统)识别到话单中已经写入了被叫用户的RN信息时，则将被叫用户作为网外用户对主叫用户进行计费处理。</p>
      <p>如图2所示，为基于MNP网络环境下对后付费用户进行计费的第二实施例处理过程示意图，其中：1)主叫用户发起呼叫，呼叫被叫用户，其拜访的VMSC/GMSC根据被呼叫的用户信息发送SRI消息给对应的归属位置寄存器，以查询被叫用户的路由信息；2)处于VMSC/GMSC和HLR之间的MNP-SRF拦截VMSC/GMSC发来的SRI消息，根据SRI消息中携带的被叫用户信息执行NPDB查询操作，若通过查询发现被叫用户已经携带入网(ported&#160;in)，或被叫用户本身就属于本网用户，则直接将接收到的SRI消息路由到本网的HLR；3)本网的HLR根据SRI消息中携带的被叫用户信息查询到被叫用户的移动漫游号码信息(MSRN)，则将查询到的被叫用户MSRN信息携带在SRI_ACK消息中返回给主叫用户拜访的VMSC/GMSC，主叫用户拜访的VMSC/GMSC根据SRI_ACK消息中携带的MSRN信息把呼叫接续到被叫用户；4)由于SRI_ACK消息中未携带被叫用户的RN信息，因此主叫用户拜访的VMSC/GMSC不再执行将RN写入话单操作，计费部件(如BOSS系统)识别到话单中未写入被叫用户的RN信息时，则将被叫用户作为网内用户对主叫用户进行计费处理。</p>
      <p>基于上述在MNP网络环境下对后付费用户进行计费的实现方案，需要对现有的交换设备(如MSC等)和计费设备(如BOSS系统等)进行改造。其中需要交换设备具有在后付费主叫用户呼叫被叫用户时，判断接收到的路由查询响应消息中是否携带被叫用户的路由号码信息的单元，和在判断出接收到的路由查询响应消息中携带有路由号码信息时，将该路由号码信息写入对应话单的单元，具有这些处理能力的交换设备都属于本发明的保护范围之列，且实现有这些处理能力的组成部分可以由相应的软件实现，如基于软件程序编写上述的处理能力，然后将编写有这些处理能力的软件程序安装到现有的交换设备中运行，便可以实现本发明实施例欲保护的交换设备；当然这里的处理能力也可以基于相应的硬件能力来实现。</p>
      <p>此外，为实现上述在MNP网络环境下对后付费用户进行计费的方案，需要计费设备具有识别在话单中是否写入有被叫用户的路由号码信息的单元，和在话单中已写入被叫用户的路由号码信息时，将被叫用户作为网外用户对主叫用户进行计费，以及在话单中未写入被叫用户的路由号码信息时，将被叫用户作为网内用户对主叫用户进行计费的单元，同理这里的处理单元可以基于软件程序来实现，也可以基于相应的硬件来实现。</p>
      <p>在开展有MNP业务的网络环境下，本发明实施例提出的对预付费用户进行计费的实现原理是：拦截预付费主叫用户拜访的交换设备(如MSC)向SCP发送的用于触发预付费业务的请求消息(通常为初始检测点IDP消息)，其中该发送的请求消息中携带有被叫用户信息；根据请求消息中携带的被叫用户信息查询号码携带数据库(NPDB)，在查询到被叫用户属于网外用户时，将查询到的被叫用户路由号码信息(RN)携带在该请求消息中后转发给SCP；SCP在该请求消息中携带有被叫用户路由号码信息时，将被叫用户作为网外用户对主叫用户进行计费处理，以及在请求消息中未携带被叫用户路由号码信息时，将被叫用户作为网内用户对主叫用户进行计费处理。</p>
      <p>如图3所示，为在MNP网络环境下本发明实现对预付费用户进行计费的网络框架示意图，由于通常情况下MNP-SRF是通过识别事务能力应用部分(TCAP，Transaction&#160;Capability&#160;Application&#160;Part)的操作码来拦截SRI消息的，而从网络分层角度来说智能网应用协议(INAP，Intelligent&#160;Network&#160;ApplicationProtocol)也是TCAP的用户层，因此也可以采用同样的处理方式增强MNP-SRF的消息拦截能力(也就是说在网络层次结构上，TCAP处于INAP的下层，而IDP消息属于INAP层次的消息，现有技术是通过TCAP的操作码来识别SRI消息做拦截的，因此就可以通过对MNP-SRF设备的消息拦截功能进行增强，来拦截并识别出IDP消息)，即对MNP-SRF增加对初始检测点(IDP，InitialDetect&#160;Point)消息的拦截，然后在MNP-SRF处做好MNP分析处理，将必要的MNP信息添加到IDP消息中。这种改进对智能网业务的影响较小，只需要号码分析即可完成预付费呼叫业务的路由和计费处理。</p>
      <p>其中在现有的交换设备和SCP之间增加一个MNP-SRF设备，用以拦截交换设备发送给SCP的用以触发预付费业务的IDP消息，MNP-SRF设备根据IDP消息中携带的被叫用户信息查询NPDB数据库，通过查询如果发现被叫用户已携带出网(Ported&#160;out)或被叫用户本身就属于外网用户，则会在拦截的IDP消息中增加查询到的被叫用户RN信息，然后将增加了被叫用户RN信息的IDP消息上报给SCP，由SCP来根据IDP消息中是否携带被叫用户的RN信息来对主叫用户进行区分计费。基于图3所示的系统结构，实施对预付费呼叫业务进行计费的处理过程如下：预付费主叫用户发起智能呼叫，其拜访的SSP/VMSC上报IDP消息给SCP，以触发SCP对用户进行预扣费处理，其中上报的IDP消息中携带有被叫用户信息(如被叫用户号码信息)；MNP-SRF设备拦截IDP消息后，根据IDP消息中携带的被叫用户信息查询NPDB，如果发现被叫用户号码是ported&#160;out的被叫用户号码，则在IDP消息中的被叫用户号码参数前增加查询到的被叫用户RN信息前缀；MNP-SRF设备将处理后的IDP消息转发到SCP上以触发预扣费业务，此时SCP不需要再查询NPDB数据库，只需要根据IDP消息中携带的RN号码前缀(号码分析即可)就可确定被叫用户是网内用户还是网外用户，以此来对主叫用户进行区分计费。</p>
      <p>SCP完成预扣费处理后，如果确定用户可以继续呼叫，则需要继而下发CONNECT消息(CONNECT消息中携带RN前缀号码)到主叫用户拜访的VMSC，VMSC进而根据CONNECT消息中携带RN前缀号码将呼叫继续接续到被叫用户。</p>
      <p>基于上述在MNP网络环境下对预付费用户进行计费的实现方案，需要对现有的MNP-SRF设备进行升级改造。其中需要MNP-SRF设备具有用于拦截预付费主叫用户拜访的交换设备(如MSC)向SCP发送的用于触发预付费业务的请求消息的单元，其中该请求消息通常为IDP消息，且其中携带有被叫用户信息(如被叫用户号码信息)；用于根据接收到的请求消息中携带的被叫用户信息查询NPDB数据库的单元，和用于在查询到被叫用户属于网外用户时，将查询到的被叫用户RN信息携带在该请求消息中后转发给SCP的单元。上述改造可以基于软件程序来实现，也可以基于对硬件的改进来实现。</p>
      <p>为实现在MNP网络环境下对预付费用户进行计费的方案，还需要对现有的SCP进行改进，其中需要SCP具有用于识别预付费主叫用户拜访的交换设备发来的请求消息(如IDP消息)中是否携带被叫用户RN信息的单元，和用于在识别到该请求消息中携带有被叫用户RN信息时，将被叫用户作为网外用户对主叫用户进行计费处理，以及在请求消息中未携带被叫用户RN信息时，将被叫用户作为网内用户对主叫用户进行计费处理的单元。同理这里的对SCP的改进可以基于软件程序来实现，也可以基于对硬件的改进来实现。</p>
      <p>本发明实施例在提出对呼叫类业务进行计费的方案之外，还提出在开展了MNP业务的网络环境中如何对非呼叫类业务(如一些移动增值业务，包括短消息SMS业务、多媒体消息MMS业务、位置业务等等)进行计费及其路由的方案。本发明实施例提出的对基于MNP的增值业务进行计费的方法原理是：拦截增值业务设备向HLR发送的用于查询接收用户路由信息的查询请求消息(如可以为SRI消息)；根据该查询请求消息中携带的接收用户信息(可以是接收用户号码信息)查询NPDB数据库，以及根据查询结果：当接收用户属于本网用户、或是其它网络的用户发生携带入网时，将该查询请求消息路由到本网内的HLR，当接收用户属于外网用户、或是本网用户发生了携带出网时，将该查询请求消息路由到外网相应的HLR，对应网络中的HLR向增值业务设备反馈携带有接收用户路由信息的响应消息；增值业务设备根据接收到的响应消息中携带的接收用户路由信息，分析是否能够得到该接收用户的RN信息，由于接收用户路由信息中通常会包括接收用户的IMSI号码信息，这样可以根据该接收用户的IMSI号码信息查询网络编码规则，如果接收用户属于外网用户或是携带出网，则可以查找到该接收用户的RN信息；如果发送用户属于预付费用户时，增值业务设备在分析得到接收用户的RN信息时，将得到的RN信息携带在计费请求消息中上报给SCP，SCP在计费请求消息中携带接收用户RN信息时，将接收用户作为网外用户对发送用户进行计费，以及在计费请求消息中未携带接收用户RN信息时，将接收用户作为网内用户对发送用户进行计费；如果发送用户属于后付费用户时，增值业务设备在分析得到接收用户的RN信息时，将得到的RN信息写入话单，相应的计费设备识别出在话单中已写入路由号码时，将发送用户作为网外用户对接收用户进行计费处理，以及在识别出话单中未写入路由号码时，将发送用户作为网内用户对接收用户进行计费处理。</p>
      <p>进一步的，SCP在对用户进行预扣费后，会向对应的增值业务设备下发连接指示消息(CONNECT消息)，增值业务设备在接收到SCP下发的连接指示消息时，进而根据接收到的响应消息中携带的接收用户路由信息，执行消息下发处理。其中的增值业务设备可以但不限于为短消息业务中心(SMSC，ShortMessage&#160;Service&#160;Centre)、多媒体消息业务中心(MMSC，Multi&#160;Message&#160;ServiceContre)或是网关移动定位中心(GMLC，Gateway&#160;Mobile&#160;Location&#160;Contre)、互联网消息业务网关(IMSG，International&#160;Message&#160;Service&#160;Gateway)等。</p>
      <p>基于本发明方案原理，在MNP网络环境下实现对一些增值业务进行正确计费及其路由处理需要在对应的增值业务设备和HLR之间增设一个MNP-SRF，并增强其消息拦截功能，使其能够拦截增值业务设备发送给HLR的位置查询请求消息，并能够根据位置查询请求消息中携带的接收用户信息查询NPDB数据库，得到接收用户当前所签约网路的HLR，然后根据该查询结果将该位置查询请求消息正确路由到接收用户当前签约网络的HLR。这样本发明实施例提出一种MNP-SRF设备，其具有用于拦截增值业务设备向HLR发送的用于查询接收用户路由信息的查询请求消息的单元；用于根据该接收到的查询请求消息中携带的接收用户信息查询NPDB数据库的单元，以及用于根据查询结果将该查询请求消息正确路由到对应网络中的HLR的单元。该些功能组成部分可以基于软件程序来实现，也可以基于硬件方式来实现。</p>
      <p>如图4所示，为对短消息业务进行计费及其路由处理的第一实施例处理过程示意图，其具体的实施过程如下：1)发送方发送SM到SMSC，SMSC接收到SM后发送SRI_for_SM消息给HLR，以查询SM接收方的路由信息；2)MNP-SRF设备拦截SMSC发出的SRI_for_SM消息，并根据SRI_for_SM消息中携带的SM接收方用户号码信息查询NPDB，通过查询如果发现接收方用户属于ported&#160;in用户，或接收方用户本身就属于本网用户，则将该SRI_for_SM消息路由到本网的HLR；3)本网的HLR根据接收到的SRI_for_SM消息中携带的SM接收方用户号码信息查询接收方路由信息，并将查询到的路由信息携带在SRI_for_SM响应消息中反馈给SMSC，其中接收方路由信息包含接收方用户当前拜访的MSC信息(即接收方的VMSC)和接收方用户的IMSI；4)如果SM发送方是预付费(PPS，Pre-Paid&#160;Service)用户，则在SMSC直连SCP的情况下，SMSC直接向SCP发送扣费请求消息，而在SMSC通过计费部件连接SCP的情况下，需要SMSC通过计费部件向SCP上报计费请求消息；SCP在识别到SMSC发来的扣费请求消息中未携带接收方用户的RN信息时，直接将SM接收方作为本网用户对SM发送方用户进行预扣费处理；5)SCP在预扣费处理完成后会向SMSC发送CONNECT消息，SMSC接收到SCP下发的CONNECT消息后，根据接收到的SRI_for_SM响应消息中携带的接收方路由信息，执行后续的MT&#160;SMS处理。</p>
      <p>如图5所示，为对短消息业务进行计费及其路由处理的第二实施例处理过程示意图，其具体的实施过程如下：1)发送方发送SM到SMSC，SMSC接收到SM后发送SRI_for_SM消息给HLR，以查询SM接收方的路由信息；2)MNP-SRF设备拦截SMSC发出的SRI_for_SM消息，并根据SRI_for_SM消息中携带的SM接收方用户号码信息查询NPDB，通过查询如果发现接收方用户属于ported&#160;out用户，或接收方用户本身就属于外网用户，则根据查询结果将该SRI_for_SM消息路由到相应外网的HLR；3)对应外网的HLR根据接收到的SRI_for_SM消息中携带的SM接收方用户号码信息查询接收方路由信息，并将查询到的路由信息携带在SRI_for_SM响应消息中反馈给SMSC，其中接收方路由信息包含接收方用户当前拜访的MSC信息(即接收方的VMSC)和接收方用户的IMSI；SMSC根据接收到的SRI_for_SM响应消息中包含的接收方用户IMSI，通过查询网络编码规则可以得到接收方用户的RN信息；4)如果SM发送方是预付费(PPS，Pre-Paid&#160;Service)用户，则在SMSC直连SCP的情况下，SMSC直接向SCP发送扣费请求消息，而在SMSC通过计费部件连接SCP的情况下，需要SMSC通过计费部件向SCP上报计费请求消息；SMSC向SCP上报的计费请求消息中携带的接收方用户MSISDN前面带有接收方用户的RN；SCP在识别到SMSC发来的扣费请求消息中携带有接收方用户的RN信息时，将SM接收方作为外网用户对SM发送方用户进行预扣费处理；5)SCP在预扣费处理完成后会向SMSC发送CONNECT消息，SMSC接收到SCP下发的CONNECT消息后，根据接收到的SRI_for_SM响应消息中携带的接收方路由信息，执行后续的MT&#160;SMS处理。</p>
      <p>此外，这种情况下SMSC在生成话单时，也需要在接收方用户MSISDN前面增加RN信息，以使计费部分能够区分计费。</p>
      <p>当然对于多媒体业务消息的计费及其路由过程也可以和上述短消息业务的计费及路由过程相似。为了不更改现有的多媒体消息处理协议，也可以借助于上述的短消息处理过程，即MMSC可以通过SMSC查询MM接收方的路由信息，MM接收方的路由查询过程请参见上述的SMS处理部分，其中SMSC和MMSC之间可以采用私有接口。MMSC根据SMSC返回的SRI_for_SM响应消息中携带的接收方IMSI，查询本地静态路由表就可以得知MM接收方的路由信息，如果接收方是外网用户或是Ported&#160;out用户，还可以进而得知MM接收方的RN信息；如果MM发送方是PPS用户，且分析得到MM接收方为外网用户或Ported&#160;out用户时，则MMSC需要在上报给计费部件的接收方用户MSISDN前面添加相应的RN，计费部件向SCP发起的扣费请求中也要透传MMSC上报来的接收方MSISDN和接收方RN信息，使得SCP能够根据计费请求消息中是否携带接收方RN信息来对MM发送方用户进行区分计费。此外MMSC在生成话单时，也需要在接收方MSISDN前面增加RN信息，供计费部件区分计费。</p>
      <p>同理，对位置业务实现计费及其路由处理的简单过程为网关移动定位中心(GMLC)采用标准的SRI_for_LCS消息向HLR查询用户的路由信息，处于GMLC和HLR之间的MNP-SRF设备类似拦截SRI_for_SM一样，需要增强对GMLC发出的SRI_for_LCS消息进行拦截的功能，然后根据拦截的SRI_for_LCS消息中携带的被查询用户信息查询NPDB数据库，然后根据查询结果信息将SRI_for_LCS消息路由到相应网络中的HLR，由对应网络中的HLR将被查询用户的路由信息通过SRI_for_LCS响应消息反馈给GMLC，进而由GMLC分析判断是否能够得到被查询用户的RN信息，如果GMLC发起方是PPS用户，且分析得到被查询用户的RN信息时，则GMLC需要在上报给SCP的计费请求消息中携带的被查询用户MSISDN号码前加上被查询用户的RN信息，使得SCP能够根据计费请求消息中是否携带被查询用户的RN信息对查询用户进行区分计费。GMLC也需要在生成话单时，在被查询用户的MSISDN前面增加RN信息，以供计费部件进行区分计费。</p>
      <p>为实现在MNP网络环境下，上述对各非呼叫移动增值业务的计费及其路由处理，需要增值业务设备具有用于根据对应网络中的HLR发来的路由查询响应消息中携带的接收用户路由信息，分析是否能够得到接收用户的RN信息的单元；还包括一个单元，用于在分析得到接收用户的RN信息时，在发送用户属于预付费用户的情况下，将得到的RN信息携带在计费请求消息中上报给SCP，或者在发送用户属于后付费用户的情况下，将得到的RN信息写入话单。这里的增值业务设备可以但不限于为SMSC、MMSC、GMLC或IMSG等。</p>
      <p>此外，为实现对各非呼叫移动增值业务的计费及其路由处理，需要SCP具有用于识别增值业务设备发来的计费请求消息中是否携带接收用户RN信息的单元，和用于在接收到的计费请求消息中携带接收用户RN时，将接收用户作为网外用户对发送用户进行计费处理，以及在接收到的请求消息中未携带接收用户RN时，将接收用户作为网内用户对发送用户进行计费处理的单元。</p>
      <p>综上，在开展了MNP业务的网络环境下，如果被叫用户或接收方用户发生携带出网现象，会统一要求各业务部件在上报给计费部件的被叫用户MSISDN号码前加入相应的RN信息；对于预付费，计费部件在上报给SCP的扣费请求消息中，也要透传业务部件上报来的被叫用户MSISDN号码和RN信息，这样计费部件或SCP根据业务部件上报的RN字段可以实现对主叫或发送方进行区分计费，不需要查询MNP数据库。各业务设备在计费部件的话单中也可以写入被叫用户或接收方用户的RN信息，以方便查询或对帐。</p>
      <p>本发明实施例基于MNP标准协议，通过少量的能力扩展，实现了对基于MNP业务环境下的呼叫类业务进行计费的方案，也实现了基于MNP业务环境下对非呼叫类增值业务进行计费及其路由的方案，从而为更好的开展MNP业务提供了有利保障。</p>
      <p>显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。</p>
    </mode-for-invention>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101291234B?cl=zh">CN101291234B</a></td><td class="patent-data-table-td patent-date-value">2008年6月6日</td><td class="patent-data-table-td patent-date-value">2011年8月24日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">用于ocs的用户网络类型信息获取方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101448253B?cl=zh">CN101448253B</a></td><td class="patent-data-table-td patent-date-value">2008年2月26日</td><td class="patent-data-table-td patent-date-value">2011年10月26日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">预付费用户采用信令中继功能实现移动号码携带的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102045665B?cl=zh">CN102045665B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年10月23日</td><td class="patent-data-table-td patent-date-value">2016年1月20日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">短消息拦截的方法、装置及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102065403A?cl=zh">CN102065403A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月31日</td><td class="patent-data-table-td patent-date-value">2011年5月18日</td><td class="patent-data-table-td ">姜媛媛</td><td class="patent-data-table-td ">电话携号转网支持系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102065403B?cl=zh">CN102065403B</a></td><td class="patent-data-table-td patent-date-value">2010年12月31日</td><td class="patent-data-table-td patent-date-value">2013年6月26日</td><td class="patent-data-table-td ">杜晓花</td><td class="patent-data-table-td ">电话携号转网支持系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102118876B?cl=zh">CN102118876B</a></td><td class="patent-data-table-td patent-date-value">2010年1月4日</td><td class="patent-data-table-td patent-date-value">2014年8月13日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">一种非智能用户进行二次接续的方法或装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102217344A?cl=zh">CN102217344A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年5月18日</td><td class="patent-data-table-td patent-date-value">2011年10月12日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">号码携带实现方法和互联互通网关</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102217344B?cl=zh">CN102217344B</a></td><td class="patent-data-table-td patent-date-value">2011年5月18日</td><td class="patent-data-table-td patent-date-value">2013年8月7日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">号码携带实现方法和互联互通网关</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102316424A?cl=zh">CN102316424A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年3月4日</td><td class="patent-data-table-td patent-date-value">2012年1月11日</td><td class="patent-data-table-td ">华为软件技术有限公司</td><td class="patent-data-table-td ">信息计费方法，终端和服务器</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102651859A?cl=zh">CN102651859A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年5月9日</td><td class="patent-data-table-td patent-date-value">2012年8月29日</td><td class="patent-data-table-td ">中国联合网络通信集团有限公司</td><td class="patent-data-table-td ">识别号码携带用户的运营商归属的方法、设备及网络</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102651859B?cl=zh">CN102651859B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年5月9日</td><td class="patent-data-table-td patent-date-value">2015年2月4日</td><td class="patent-data-table-td ">中国联合网络通信集团有限公司</td><td class="patent-data-table-td ">识别号码携带用户的运营商归属的方法、设备及网络</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102882873A?cl=zh">CN102882873A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年9月29日</td><td class="patent-data-table-td patent-date-value">2013年1月16日</td><td class="patent-data-table-td ">深圳市博瑞得科技有限公司</td><td class="patent-data-table-td ">一种智能网话单合成的方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102882873B?cl=zh">CN102882873B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年9月29日</td><td class="patent-data-table-td patent-date-value">2015年3月18日</td><td class="patent-data-table-td ">深圳市博瑞得科技有限公司</td><td class="patent-data-table-td ">一种智能网话单合成的方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US8396495">US8396495</a></td><td class="patent-data-table-td patent-date-value">2010年6月1日</td><td class="patent-data-table-td patent-date-value">2013年3月12日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">Method and system of charging for short message value-added service, data center for short message service</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2008125034A1?cl=zh">WO2008125034A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年3月4日</td><td class="patent-data-table-td patent-date-value">2008年10月23日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">Charging method, routing method and relative device based on number portability</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2010045882A1?cl=zh">WO2010045882A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年10月23日</td><td class="patent-data-table-td patent-date-value">2010年4月29日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">一种呼叫属性判断方法、设备和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2010139148A1?cl=zh">WO2010139148A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年9月24日</td><td class="patent-data-table-td patent-date-value">2010年12月9日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">移动号码携带业务的业务统计装置、系统及方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04W0004240000">H04W4/24</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04M0015000000">H04M15/00</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012560000">H04L12/56</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04M0017000000">H04M17/00</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012140000">H04L12/14</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M17/00">H04M17/00</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M2215/2026">H04M2215/2026</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04W4/24">H04W4/24</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M15/00">H04M15/00</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=H32HAAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/14">H04L12/14</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">H04W4/24</span>, <span class="nested-value">H04L12/14</span>, <span class="nested-value">H04M15/00</span>, <span class="nested-value">H04M17/00</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2007年9月12日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2007年11月7日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年11月4日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年6月4日</td><td class="patent-data-table-td ">C17</td><td class="patent-data-table-td ">Cessation of patent right</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/f72592b413e7ede67077/CN101035004A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E5%9F%BA%E4%BA%8E%E5%8F%B7%E7%A0%81%E6%90%BA%E5%B8%A6%E4%B8%9A%E5%8A%A1%E7%9A%84%E8%AE%A1%E8%B4%B9%E6%96%B9%E6%B3%95.pdf?id=H32HAAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0yKFjCPFTSf5JtB1e3x5gSBVG1QA"},"sample_url":"https://www.google.com/patents/reader?id=H32HAAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>