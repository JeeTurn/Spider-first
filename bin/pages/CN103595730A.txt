<!DOCTYPE html><html><head><title>专利 CN103595730A - 一种密文云存储方法和系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种密文云存储方法和系统"><meta name="DC.contributor" content="陈驰" scheme="inventor"><meta name="DC.contributor" content="杨腾飞" scheme="inventor"><meta name="DC.contributor" content="田雪" scheme="inventor"><meta name="DC.contributor" content="王朝刚" scheme="inventor"><meta name="DC.contributor" content="于晶" scheme="inventor"><meta name="DC.contributor" content="申培松" scheme="inventor"><meta name="DC.contributor" content="朱晓杰" scheme="inventor"><meta name="DC.contributor" content="刘华骏" scheme="inventor"><meta name="DC.contributor" content="黄超麟" scheme="inventor"><meta name="DC.contributor" content="中国科学院信息工程研究所" scheme="assignee"><meta name="DC.date" content="2013-11-28" scheme="dateSubmitted"><meta name="DC.description" content="本发明涉及一种密文云存储方法和系统，在至少一个客户端和云端服务器组成的系统中，存储方法为：1）用户在客户端存放数据中选择采用密文和/或明文进行数据同步，并对密文选择加密算法；2）使用基于用户身份提供的认证参数生成主密钥，在客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并对该主密钥进行备份；3）在客户端和云端同步密文及密文索引；或在云端和客户端同步明文同步数据后在云端建立明文索引；4）将明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商存储服务器。本发明在终端丢失不会丢失数据，且若防护不当仅损失文件的密文形式，同时存储系统可对接多个云服务提供商。"><meta name="DC.date" content="2014-2-19"><meta name="DC.relation" content="CN:102024054:A" scheme="references"><meta name="DC.relation" content="CN:102075542:A" scheme="references"><meta name="DC.relation" content="CN:102428686:A" scheme="references"><meta name="DC.relation" content="CN:102708216:A" scheme="references"><meta name="DC.relation" content="CN:103345526:A" scheme="references"><meta name="DC.relation" content="CN:1588365:A" scheme="references"><meta name="citation_patent_publication_number" content="CN:103595730:A"><meta name="citation_patent_application_number" content="CN:201310626060"><link rel="canonical" href="https://www.google.com/patents/CN103595730A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN103595730A?cl=zh"/><meta name="title" content="专利 CN103595730A - 一种密文云存储方法和系统"/><meta name="description" content="本发明涉及一种密文云存储方法和系统，在至少一个客户端和云端服务器组成的系统中，存储方法为：1）用户在客户端存放数据中选择采用密文和/或明文进行数据同步，并对密文选择加密算法；2）使用基于用户身份提供的认证参数生成主密钥，在客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并对该主密钥进行备份；3）在客户端和云端同步密文及密文索引；或在云端和客户端同步明文同步数据后在云端建立明文索引；4）将明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商存储服务器。本发明在终端丢失不会丢失数据，且若防护不当仅损失文件的密文形式，同时存储系统可对接多个云服务提供商。"/><meta property="og:title" content="专利 CN103595730A - 一种密文云存储方法和系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN103595730A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN103595730A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=EaryCAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN103595730A&amp;usg=AFQjCNEqtU20L_CeXB6TZ0s0jQN33szMIg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/8fe87780172339fb5b69/CN103595730A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/8fe87780172339fb5b69/CN103595730A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN103595730A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN103595730A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN103595730A?cl=zh" style="display:none"><span itemprop="description">本发明涉及一种密文云存储方法和系统，在至少一个客户端和云端服务器组成的系统中，存储方法为：1）用户在客户端存放数据中选择采用密文和/或明文进行数据同步，并对密文选择加密算法；2）使用基于用户身份提供的认证...</span><span itemprop="url">https://www.google.com/patents/CN103595730A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN103595730A - 一种密文云存储方法和系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN103595730A - 一种密文云存储方法和系统" title="专利 CN103595730A - 一种密文云存储方法和系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN103595730 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201310626060</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2014年2月19日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2013年11月28日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2013年11月28日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201310626060.X, </span><span class="patent-bibdata-value">CN 103595730 A, </span><span class="patent-bibdata-value">CN 103595730A, </span><span class="patent-bibdata-value">CN 201310626060, </span><span class="patent-bibdata-value">CN-A-103595730, </span><span class="patent-bibdata-value">CN103595730 A, </span><span class="patent-bibdata-value">CN103595730A, </span><span class="patent-bibdata-value">CN201310626060, </span><span class="patent-bibdata-value">CN201310626060.X</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%99%88%E9%A9%B0%22">陈驰</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%A8%E8%85%BE%E9%A3%9E%22">杨腾飞</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%94%B0%E9%9B%AA%22">田雪</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%8E%8B%E6%9C%9D%E5%88%9A%22">王朝刚</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BA%8E%E6%99%B6%22">于晶</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%94%B3%E5%9F%B9%E6%9D%BE%22">申培松</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9C%B1%E6%99%93%E6%9D%B0%22">朱晓杰</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%88%98%E5%8D%8E%E9%AA%8F%22">刘华骏</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%BB%84%E8%B6%85%E9%BA%9F%22">黄超麟</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%AD%E5%9B%BD%E7%A7%91%E5%AD%A6%E9%99%A2%E4%BF%A1%E6%81%AF%E5%B7%A5%E7%A8%8B%E7%A0%94%E7%A9%B6%E6%89%80%22">中国科学院信息工程研究所</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103595730A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103595730A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103595730A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (6),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (1)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=EaryCAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201310626060&amp;usg=AFQjCNGiohL52IU-1dJORhCH0__SFGhVlQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=EaryCAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D103595730A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEII5fynrvkvRZ5KjtU8eIMncVaJA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT133569308" lang="ZH" load-source="patent-office">一种密文云存储方法和系统</invention-title>
      </span><br><span class="patent-number">CN 103595730 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA130613117" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明涉及一种密文云存储方法和系统，在至少一个客户端和云端服务器组成的系统中，存储方法为：1）用户在客户端存放数据中选择采用密文和/或明文进行数据同步，并对密文选择加密算法；2）使用基于用户身份提供的认证参数生成主密钥，在客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并对该主密钥进行备份；3）在客户端和云端同步密文及密文索引；或在云端和客户端同步明文同步数据后在云端建立明文索引；4）将明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商存储服务器。本发明在终端丢失不会丢失数据，且若防护不当仅损失文件的密文形式，同时存储系统可对接多个云服务提供商。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(11)</span></span></div><div class="patent-text"><div mxw-id="PCLM59261681" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种密文云存储方法，在客户端和云端建立同步连接，其步骤为:  1)用户在客户端存放的数据中选择采用密文和/或明文进行数据同步，并对所述密文选择加密算法；  2)使用基于用户身份提供的认证参数生成主密钥，并根据所述主密钥获取密文预置加解密密钥或生成对应的密文加解密密钥，在所述客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并建立密文索引并对该主密钥进行备份；  3)在所述客户端和云端同步所述密文及密文索引并删除在客户端上的密文索引和密文同步的数据；或在所述云端和客户端同步所述明文同步数据后在所述云端建立明文索引；并实现加解密过程对用户的透明:  4)将所述明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商的存储服务器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.如权利要求1所述的密文云存储方法，其特征在于，同步所述明文的方法包括数据的上传、下载或删除，通过下述方法实现对用户明文同步数据的同步和更新:  O启动时加载数据监控服务，并根据本地数据库读取到的数据列表生成或维护数据监控列表；  2)根据获取的数据监控列表，依照数据名字段和数据在服务器上的路径字段产生数据和列表的一一映射，将监控列表里的数据与本地数据关联；若是自动同步，则数据监控器监控本地数据的状态，若数据状态包括属性同步的最新时间，数据修改时间，数据哈希值发生改变，则触发数据同步的事件；若是手动出发同步操作，则直接触发数据同步的事件；  3)所述数据监控器获取同步操作，检查客户端本地数据是否存在，若所述本地数据存在，检测本地属性的元数据信息是否与云存储服务器相同，所述本地属性的元数据信息包括数据修改时间和固定长度的数据散列值，以及数据同步时间；  4)若数据不存在，则驱动进行下载数据属性元数据和明文同步数据；  5)若所述云存储服务器数据修改，则经驱动进行下载，将云服务器数据拉取至本地，并更新本地数据属性元数据；  6)若所述客户端本地数据修改则包括:初次上传、服务端未有元数据的情况，经驱动进行上传，将客户端本地数据、数据属性元数据上传至云存储服务器；  7)若所述云存储服务器数据和客户端数据同时被修改，则根据用户选择经驱动进行包括:取消操作、重写数据、附加保留的冲突解决。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.如权利要求1所述的密文云存储方法，其特征在于，同步所述密文的方法包括数据的上传、下载或删除，通过下述方法实现对用户密文同步数据的同步和更新:  1）启动时加载数据监控服务，并根据本地数据库读取到的数据列表生成或维护数据监控列表；  2)根据获取的数据监控列表，依照数据名字段和数据在服务器上的路径字段产生数据和列表的一一映射，将监控列表里的数据与本地数据关联；若是自动同步，则数据监控器监控本地数据的状态，若数据状态包括属性同步的最新时间，数据修改时间，数据哈希值发生改变，则触发数据同步的事件；若是手动出发同步操作，则直接触发数据同步的事件；  3)所述数据监控器获取同步操作，检查客户端本地数据是否存在，若所述本地数据存在，检测本地属性的元数据信息是否与云存储服务器相同，所述本地属性的元数据信息包括数据修改时间和固定长度的数据散列值，以及数据同步时间；4)若数据不存在，则驱动进行下载数据属性元数据和明文同步数据；5)若所述云存储服务器数据修改，则经驱动进行下载，将云服务器数据拉取至本地，并更新本地数据属性元数据；6)若所述客户端本地数据修改则包括:初次上传、服务端未有元数据的情况，经驱动进行上传，将客户端本地数据、数据属性元数据上传至云存储服务器；7)对于上传，需要依次生成密文索引，加密数据生成密文，然后经驱动将密文数据、密文索引、及密文元数据属性上传到云存储服务器；8)对于下载，由于密文数据不能实现增量更新，故在冲突处理时判断是否为密文，若为密文，则根据用户判断之进行取消操作或重写文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.如权利要求1或3所述的密文云存储方法，其特征在于，所述同步明密文数据类型包括:文件、sqlite 数据库、SharedPreferences。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求1所述的密文云存储方法，其特征在于，所述两级密钥加密通过下述方法实现:1)运行时从内存读取主密钥同时从内存缓存或者数据库中读取存储的加解密密钥，2)在用户第一次使用客户端时，根据用户提供的相应认证参数，生成所述主密钥，同时对该主密钥进行备份；3)用户每次在进行密文云存储时，根据所述认证参数从存储数据库中读取所述存储的主密钥的固定长度的单项散列值，与用户所提供的所述认证参数利用相同算法生成密钥的固定长度的单项散列值进行比对；4)当查找所述加解密密钥时，依据数据加密属性元数据信息和用户加密方案查找存储的加解密密钥，并使用主密钥解密所述存储的加解密密钥；5)若未查找到所 述存储的加解密密钥，则生成加解密密钥，并进行密钥备份；将主密钥的固定长度的单项散列值，以及经主密钥加密后的加解密密钥备份到数据库和云端服务器；同时将加密后的加解密密钥和数据映射关系表也备份到云端。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.如权利要求5所述的密文云存储方法，其特征在于，所述主密钥的认证参数包括:用户口令或者用户指纹、声音、虹膜的生物特征。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求1所述的密文云存储方法，其特征在于，通过下述方法实现加解密过程对用户的透明:1)用户首次使用时，选择所需加密上传的文件，此时文件做上传预处理；2)获取密钥和算法，对所选文件进行加密、上传并保存文件属性信息到数据库，所述所选文件的原明文文件在上传成功后被删除；3)用户对密文请求读取或修改操作时，调用相应抽象密码设备组件进行解密操作，生成明文临时文件，并保存明文临时文件属性信息元数据到临时文件表，并将明文临时文件交给上层应用程序；4)用户使用应用程序对文件的操作均针对于明文临时文件，在进行下一个文件操作或同步刷新时进行临时文件属性与所存储原文件属性元数据进行对比；5)若文件没有进行修改，则删除临时文件，文件不进行同步；若文件经过修改，则调用密码设备单元对所述临时明文文件进行加密操作，并同步，在上传成功后删除所述临时明文文件。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8.&#8212;种密文云存储系统,包括:一个或多个客户端和云端服务器，其特征在于，  用户在客户端存放的数据中选择采用密文和/或明文进行数据同步；  使用基于用户身份提供的认证参数生成主密钥，并根据所述主密钥获取密文预置加解密密钥或生成对应的密文加解密密钥，在所述客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并建立密文索引；  在所述云端和客户端同步所述密文及密文索引并删除在客户端上的密文索引和密文同步的数据；同时在所述云端和客户端同步所述明文同步数据后建立明文索引；  将所述明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商的存储服务器；  所述客户端还包括用来进行加解密操作的加解密模块(I)、用于完成与个人身份绑定的主密钥和与数据绑定的加解密密钥两级密钥管理的密钥管理模块(2)、用于密文索引生成的索引模块(3)、用以实现明密文的检索，对于密文检索生成相应查询语句的分词和单向散列，并与云端交互的查询模块(4)、同步模块(5)和管理模块(6)；  所述同步模块(5)与透明加解密模块(I)和索引模块(3)连接用于调用和接受生成的密文和索引，完成密文及索引同步的功能；  所述管理模块(6)与透明加解密模块(I)、密钥管理模块(2)连接为用户提供操作接口，以设定密文安全策略，包括获取所述认证参数和加解密算法；  在所述云端同步所述明文同时在云端建立明文索引或同步所述密文及密文索引后删除在客户端上的密文索引和需&#183;要加密数据；将所述明文和/或密文存储在本地的存储服务器或者根据用户请求的挂载点存储在云存储提供商的存储服务接口；  所述云服务器端还包括与客户端同步模块(5)连接的同步模块(7)用于实现密文同步，密文索引同步；用以创建明文索引的索引模块(8)、查询模块(9)、用以实现与其他云平台的对接，扩展存储能力的对接模块(10)、密钥管理模块(11)、用户管理模块(12)；  所述查询模块(9)与客户端的查询模块(4)连接，用以支持索引的明密文查询和支持顺序扫描的密文查询，最后返回查询结果；  所述密钥管理模块(11)与客户端的密钥管理模块(2)连接，用于存储备份用户的主密钥单项散列值、使用主密钥加密的加解密密钥，用户数据属性的元信息值，采用数据库实现；提供接口接受用户请求，进行密钥恢复；  所述用户管理模块(12)实现对用户帐号的管理和访问控制，包括注册用户、维护超级管理员用户和普通用户。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.如权利要求8所述的密文云存储系统，其特征在于，在所述存储系统中根据用户设定，采用优先级控制策略，对于优先级高的数据，在得到用户请求后立即得到响应，进行建立索引、加密数据、同步更新的操作；对于优先级低的数据，则在客户端接入电源或静止状态时，自动进行索引建立、加密数据、同步更新的操作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.如权利要求8所述的密文云存储系统，其特征在于，所述扩展存储能力的对接模块(10)，包括:挂载控制功能模块和数据操作系统，其中挂载控制功能模块的主要分为增加挂载点子模块、删除挂载点子模块、获得挂载点信息子模块，数据操作模块主要分为通用操作接口子模块及外部存储接口实现子模块；所述增加挂载点子模块:用户增加外部云存储挂载点，并将挂载点信息写入相应的配置文件中；所述删除挂载点子模块:删除已挂载的外部云存储挂载点，并更新相应的配置文件； 所述获得挂载点信息子模块:获得用户当前的所有挂载点信息；所述通用操作接口子模块:提供与所有外部存储云平台对接并进行数据交互的通用的访问接口。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.如权利要求10所述的密文云存储系统，其特征在于，所述扩展存储能力的对接模块(10)还包括Amazon S3、Dropbox、HDFS外部存储类型对所述通用操作接口进行具体实现。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES66588932" lang="ZH" load-source="patent-office" class="description">
    <p>一种密文云存储方法和系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及信息安全领域，具体地说，涉及一种云存储环境下实现用户数据加密 存储和明密文查询的方法和系统。</p>
    <p>背景技术</p>
    <p>[0002]	随着智能手机的出现，网络接入设备日益多元化。这些接入网络的智能终端往往 也具备一定的数据获取、存储和处理能力。从用户的视角来看，同时拥有多个智能计算设备 (如PC、笔记本、智能手机、平板电脑等)已经成为常态，如何在多个异构终端之间维护一个 统一的用户文件视图成为必要的需求。</p>
    <p>[0003]	与此同时，云计算的日渐普及为用户实现异构平台上的数据同步提供了一种解决 方案。云计算是一种新型的计算模型，它可以将网络、存储、应用和服务等资源管理在一个 可配置的共享资源池之内，并将这些资源以服务的形式提供给用户，用户可以便捷地从资 源池中获取资源而不必自行维护和管理基础设施。例如:百度云盘为用户提供IT的免费在 线存储空间，用户可以将自己的数据文件上传至云端，并在其它的终端上获取这些文件的 副本。亚马逊的云服务则同时提供存储空间和计算能力，用户仅需要支付很低的费用即可 获取大量的计算和存储资源。</p>
    <p>[0004]	这些云计算方案在一定程度上解决了用户备份文件的需求，但在安全性方面存在 着显著的缺陷。由于云模式的特点，数据所有者不再维护存储数据的载体，用户不管选择哪 家云服务提供商都必须对其完全信任。但在现实中，用户的数据，尤其是使用智能终端采集 的数据(例如:个人照片、通信记录等)往往与隐私相关，用户并不希望将其完全的托付给存 储服务商。缺乏有效的数据安全防护手段已成为阻碍云服务推广的最重要原因之一。现有 的技术方案所面临的主要挑战包括:</p>
    <p>[0005]	I)终端丢失的风险。数据随终端的丢失而丢失，即便采用了云同步方案，以明文形 式存在于终端的数据也会产生泄密风险。</p>
    <p>[0006]	2)云服务提供商滥用权限的风险。云服务提供商基于商业目的对用户数据进行窥 探和分析。例如=Google和Baidu等公司普遍采用的分析引擎，可能涉及用户的使用习惯 等隐私信息。</p>
    <p>[0007]	3)云服务提供商防护不当的风险。云服务提供商没有提供足够的安全防护，管理 上出现漏洞或遭受黑客攻击，导致的用户数据泄漏。例如=Google DOC发生的泄密事件，用 户看到了不属于自己的数据。</p>
    <p>[0008]	4)云服务提供商倒闭的风险。一旦云服务提供商倒闭，用户是否能取回存在放在 云端的数据将成为一个重要问题。雅虎于2013年关闭了邮件业务，如果此类事件出现在云 服务提供商身上，类似问题也会凸显。</p>
    <p>[0009]	已公开的发明专利申请，公开号:CN102428686用于安全保护云中的数据的系统 和方法，提供了一种安全可集成的数据存储到云计算资源中并与云计算资源传送数据的任 意合适系统中的安全数据解析器。该安全数据解析器解析数据，然后将该数据分割为独立存储或传送的多个部分。为了增加安全性，可利用原始数据、数据的部分或者这二者的加密。该方法主要提供安全的存储和传输安全。未提供密钥管理的详细策略，单一密钥没有二级密钥能保证数据安全。不能对密文进行检索，没有提供客户端的文件操作流程。不能有效解决与第三方云存储服务器的对接。</p>
    <p>[0010]	已公开的发明专利申请，申请号:201010595149.0 &#8212;种面向密文云存储的文档检索方法与系统，该方法以云计算为背景，使用客户端生成的对称密钥分别加密索引文件的索引词、原文件生成密文索引文件和密文，使用用户主密钥加密对称密钥生成密钥密文，存储在云端。其中，服务器端保存一个索引表，用于存储用户用其索引密钥加密所上传文档的属性元信息所得到的密文；在检索时，客户端先从服务器端得到用户索引密钥的密文，然后利用用户的主密钥进行解密，然后用得到的索引密钥对属性元信息加密并将属性元信息密文发送到服务器端，服务器端利用该属性元信息密文对索引表进行检索，从而得到满足条件的文档记录并返回给客户端。该方法不提供明文的查询，功能不全；不提供对第三方云提供商的对接功能，成本高；密钥管理功能薄弱，不能更新用户的密钥，且不提供客户端的密钥存储、获取、更新、备份等一系列解决方案；不提供客户端的同步功能及同步策略，用户文件只能一次加密云存储，不提供客户端的基于透明加解密功能的文件操作流程；且该方案的安全性存在漏洞，由于对索引词和原文使用同一加密密钥，而索引词都是经过分词之后的简单的关键字，根据频度的密码分析可以对其破译，获取对称密钥，从而可以获得原文的信息。</p>
    <p>发明内容</p>
    <p>[0011]	针对上述问题，本发明的目的在于提出一种密文云存储方法和系统，为用户提供了较为完备的数据安全防护手段。这一方法可以有效地提升用户的数据安全防护和隐私保护能力。可以打消用户选用云方案的顾虑，对于促进云计算的发展、增加信息系统的使用效率、促进节能减排都具有十分重要的意义。</p>
    <p>[0012]	为了实现上述目的，本发明的技术方案为:一种密文云存储方法，在客户端和云端建立同步连接，其步骤为:</p>
    <p>[0013]	I)用户在客户端存放的数据中选择采用密文和/或明文进行数据同步，并对所述密文选择加密算法；</p>
    <p>[0014]	2)使用基于用户身份提供的认证参数生成主密钥，并根据所述主密钥获取密文预置加解密密钥或生成对应的密文加解密密钥，在所述客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并建立密文索引并对该主密钥进行备份；</p>
    <p>[0015]	3)在所述客户端和云端同步所述密文及密文索引并删除在客户端上的密文索引和密文同步的数据；或在所述云端和客户端同步所述明文同步数据后在所述云端建立明文索引；并实现加解密过程对用户的透明:</p>
    <p>[0016]	4)将所述明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商的存储服务器。</p>
    <p>[0017]	更进一步，同步所述明文的方法包括数据的上传、下载或删除，通过下述方法实现对用户明文同步数据的同步和更新:</p>
    <p>[0018]	I)启动时加载数据监控服务，并根据本地数据库读取到的数据列表生成或维护数据监控列表；</p>
    <p>[0019]	2)根据获取的数据监控列表，依照数据名字段和数据在服务器上的路径字段产生 数据和列表的一一映射，将监控列表里的数据与本地数据关联；若是自动同步，则数据监控 器监控本地数据的状态，若数据状态包括属性同步的最新时间，数据修改时间，数据哈希值 发生改变，则触发数据同步的事件；若是手动出发同步操作，则直接触发数据同步的事件；</p>
    <p>[0020]	3)所述数据监控器获取同步操作，检查客户端本地数据是否存在，若所述本地数 据存在，检测本地属性的元数据信息是否与云存储服务器相同，所述本地属性的元数据信 息包括数据修改时间和固定长度的数据散列值，以及数据同步时间；</p>
    <p>[0021]	4)若数据不存在，则驱动进行下载数据属性元数据和明文同步数据；</p>
    <p>[0022]	5)若所述云存储服务器数据修改，则经驱动进行下载，将云服务器数据拉取至本 地，并更新本地数据属性元数据；</p>
    <p>[0023]	6)若所述客户端本地数据修改则包括:初次上传、服务端未有元数据的情况，经驱 动进行上传，将客户端本地数据、数据属性元数据上传至云存储服务器；</p>
    <p>[0024]	7)若所述云存储服务器数据和客户端数据同时被修改，则根据用户选择经驱动进 行包括:取消操作、重写数据、附加保留的冲突解决。</p>
    <p>[0025]	更进一步，同步所述密文的方法包括数据的上传、下载或删除，通过下述方法实现 对用户密文同步数据的同步和更新:</p>
    <p>[0026]	I)启动时加载数据监控服务，并根据本地数据库读取到的数据列表生成或维护 数据监控列表；</p>
    <p>[0027]	2)根据获取的数据监控列表，依照数据名字段和数据在服务器上的路径字段产生 数据和列表的一一映射，将监控列表里的数据与本地数据关联；若是自动同步，则数据监控 器监控本地数据的状态，若数据状态包括属性同步的最新时间，数据修改时间，数据哈希值 发生改变，则触发数据同步的事件；若是手动出发同步操作，则直接触发数据同步的事件；</p>
    <p>[0028]	3)所述数据监控器获取同步操作，检查客户端本地数据是否存在，若所述本地数 据存在，检测本地属性的元数据信息是否与云存储服务器相同，所述本地属性的元数据信 息包括数据修改时间和固定长度的数据散列值，以及数据同步时间；</p>
    <p>[0029]	4)若数据不存在，则驱动进行下载数据属性元数据和明文同步数据；</p>
    <p>[0030]	5)若所述云存储服务器数据修改，则经驱动进行下载，将云服务器数据拉取至本 地，并更新本地数据属性元数据；</p>
    <p>[0031]	6)若所述客户端本地数据修改则包括:初次上传、服务端未有元数据的情况，经驱 动进行上传，将客户端本地数据、数据属性元数据上传至云存储服务器；</p>
    <p>[0032]	7)对于上传，需要依次生成密文索引，加密数据生成密文，然后经驱动将密文数 据、密文索引、及密文元数据属性上传到云存储服务器；</p>
    <p>[0033]	8)对于下载，由于密文数据不能实现增量更新，故在冲突处理时判断是否为密文， 若为密文，则根据用户判断之进行取消操作或重写文件。</p>
    <p>[0034]	更进一步，所述同步明密文数据类型包括:文件、sqlite数据库、 SharedPreferences0</p>
    <p>[0035]	更进一步，所述两级密钥加密通过下述方法实现:</p>
    <p>[0036]	I)运行时从内存读取主密钥同时从内存缓存或者数据库中读取存储的加解密密钥，</p>
    <p>[0037]	2)在用户第一次使用客户端时，根据用户提供的相应认证参数，生成所述主密钥，同时对该主密钥进行备份；</p>
    <p>[0038]	3)用户每次在进行密文云存储时，根据所述认证参数从存储数据库中读取所述存储的主密钥的固定长度的单项散列值，与用户所提供的所述认证参数利用相同算法生成密钥的固定长度的单项散列值进行比对；</p>
    <p>[0039]	4)当查找所述加解密密钥时，依据数据加密属性元数据信息和用户加密方案查找存储的加解密密钥，并使用主密钥解密所述存储的加解密密钥；</p>
    <p>[0040]	5)若未查找到所述存储的加解密密钥，则生成加解密密钥，并进行密钥备份；将主密钥的固定长度的单项散列值，以及经主密钥加密后的加解密密钥备份到数据库和云端服务器；同时将加密后的加解密密钥和数据映射关系表也备份到云端。</p>
    <p>[0041]	更进一步，所述主密钥的认证参数包括:用户口令或者用户指纹、声音、虹膜的生物特征。</p>
    <p>[0042]	更进一步，通过下述方法实现加解密过程对用户的透明:</p>
    <p>[0043]	I)用户首次使用时，选择所需加密上传的文件，此时文件做上传预处理；</p>
    <p>[0044]	2)获取密钥和算法，对所选文件进行加密、上传并保存文件属性信息到数据库，所述所选文件的原明文文件在上传成功后被删除；</p>
    <p>[0045]	3)用户对密文请求读取或修改操作时，调用相应抽象密码设备组件进行解密操作，生成明文临时文件，并保存明文临时文件属性信息元数据到临时文件表，并将明文临时文件交给上层应用程序；</p>
    <p>[0046]	4)用户使用应用程序对文件的操作均针对于明文临时文件，在进行下一个文件操作或同步刷新时进行临时文件属性与所存储原文件属性元数据进行对比；</p>
    <p>[0047]	5)若文件没有进行修改，则删除临时文件，文件不进行同步；若文件经过修改，则调用密码设备单元对所述临时明文文件进行加密操作，并同步，在上传成功后删除所述临时明文文件。</p>
    <p>[0048]	本发明还提出一种密文云存储系统，包括:一个或多个客户端和云端服务器，其特征在于，</p>
    <p>[0049]	用户在客户端存放的数据中选择采用密文和/或明文进行数据同步；</p>
    <p>[0050]	使用基于用户身份提供的认证参数生成主密钥，并根据所述主密钥获取密文预置加解密密钥或生成对应的密文加解密密钥，在所述客户端采用主密钥+加解密密钥的两级密钥对密文同步的数据进行加密并建立密文索引；</p>
    <p>[0051]	在所述云端和客户端同步所述密文及密文索引并删除在客户端上的密文索引和密文同步的数据；同时在所述云端和客户端同步所述明文同步数据后建立明文索引；</p>
    <p>[0052]	将所述明文和/或密文存储在本地私有云存储服务器或者根据用户请求的挂载点，存储在云存储提供商的存储服务器；</p>
    <p>[0053]	所述客户端还包括用来进行加解密操作的加解密模块(I)、用于完成与个人身份绑定的主密钥和与数据绑定的加解密密钥两级密钥管理的密钥管理模块(2)、用于密文索引生成的索引模块(3)、用以实现明密文的检索，对于密文检索生成相应查询语句的分词和单向散列，并与云端交互的查询模块(4)、同步模块(5)和管理模块(6)；[0054]	所述同步模块(5)与透明加解密模块(I)和索引模块(3)连接用于调用和接受生 成的密文和索引，完成密文及索引同步的功能；</p>
    <p>[0055]	所述管理模块(6)与透明加解密模块(I)、密钥管理模块(2)连接为用户提供操作 接口，以设定密文安全策略，包括获取所述认证参数和加解密算法；</p>
    <p>[0056]	在所述云端同步所述明文同时在云端建立明文索引或同步所述密文及密文索引 后删除在客户端上的密文索引和需要加密数据；将所述明文和/或密文存储在本地的存储 服务器或者根据用户请求的挂载点存储在云存储提供商的存储服务接口；</p>
    <p>[0057]	所述云服务器端还包括与客户端同步模块(5)连接的同步模块(7)用于实现密文 同步，密文索引同步；用以创建明文索引的索引模块(8)、查询模块(9)、用以实现与其他云 平台的对接，扩展存储能力的对接模块(10)、密钥管理模块(11)、用户管理模块(12)；</p>
    <p>[0058]	所述查询模块(9)与客户端的查询模块(4)连接，用以支持索引的明密文查询和 支持顺序扫描的密文查询，最后返回查询结果；</p>
    <p>[0059]	所述密钥管理模块(11)与客户端的密钥管理模块(2)连接，用于存储备份用户的 主密钥单项散列值、使用主密钥加密的加解密密钥，用户数据属性的元信息值，采用数据库 实现；提供接口接受用户请求，进行密钥恢复；</p>
    <p>[0060]	所述用户管理模块(12)实现对用户帐号的管理和访问控制，包括注册用户、维护 超级管理员用户和普通用户。</p>
    <p>[0061]	更进一步，在所述存储系统中根据用户设定，采用优先级控制策略，对于优先级高 的数据，在得到用户请求后立即得到响应，进行建立索引、加密数据、同步更新的操作；对于 优先级低的数据，则在客户端接入电源或静止状态时，自动进行索引建立、加密数据、同步 更新的操作。</p>
    <p>[0062]	更进一步，所述扩展存储能力的对接模块(10)，包括:挂载控制功能模块和数据 操作模块，其中挂载控制功能模块的主要分为增加挂载点子模块、删除挂载点子模块、获得 挂载点信息子模块，数据操作模块主要分为通用操作接口子模块及外部存储接口实现子模 块；</p>
    <p>[0063]	所述增加挂载点子模块:用户增加外部云存储挂载点，并将挂载点信息写入相应 的配置文件中；</p>
    <p>[0064]	所述删除挂载点子模块:删除已挂载的外部云存储挂载点，并更新相应的配置文 件；</p>
    <p>[0065]	所述获得挂载点信息子模块:获得用户当前的所有挂载点信息；</p>
    <p>[0066]	所述通用操作接口子模块:提供与所有外部存储云平台对接并进行数据交互的通 用的访问接口。</p>
    <p>[0067]	更进一步，所述扩展存储能力的对接模块(10)还包括Amazon S3、Dropbox、HDFS 外部存储类型对所述通用操作接口进行具体实现。</p>
    <p>[0068]	通过本发明公开的方法和系统，完善的解决了背景技术中提到的，现有技术方案 的缺陷和风险，在索引方面，对于明文在云端建立索引，对于密文在客户端建立索引并根据 文件的安全性和索引效率选择在不同的环境中建立索引。在二级密钥管理方面，其中主密 钥与个人身份绑定。异构云平台方面，解决了多个云服务提供商之间自主确定API，导致不 能统一协作，管理混乱的问题。使得对于上层管理员提供统一的管理接口，和简单操作。并且能够保证安全性的同时降低存储成本，本发明的有益效果如下:</p>
    <p>[0069]	1.终端丢失不会丢失数据。明文文件与密文文件在选定后都被同步到云端服务器，用户可以在另一台客户端上通过主密钥认证(即身份认证)后选择这些文件进行下载。用户若将文件加密，那么不管在终端还是云端，敏感文件都是以密文形式存在，即使终端丢失也不会泄漏信息，攻击者获取明文的难度与攻击密码算法的难度相同。</p>
    <p>[0070]	2.云服务提供商看不到明文文件。解密解密密钥的主密钥，通过认证与用户绑定，云服务提供商无法解密用户数据，因此也无法滥用。</p>
    <p>[0071]	3.防护不当仅损失文件的密文形式。即便云服务提供商被黑客攻陷，黑客只能得到文件的密文形式，攻击者获取明文的难度与攻击密码算法的难度相同。</p>
    <p>[0072]	4.可对接多个云服务提供商。提供对接模块，用户可以将数据分布在不同的云服务提供商提供的存储上，其中一家云服务提供商倒闭也不会影响其他副本的存活。</p>
    <p>附图说明</p>
    <p>[0073]	图1是本发明密文云存储系统的结构示意图；</p>
    <p>[0074]	图2是本发明密文云存储系统的密钥管理模块结构图；</p>
    <p>[0075]	图3是本发明密文云存储方法的密钥管理模块关系示意图；</p>
    <p>[0076]	图4是本发明密文云存储方法的密钥管理模块的获取密钥过程图；</p>
    <p>[0077]	图5是本发明密文云存储系统的加解密模块结构图；</p>
    <p>[0078]	图6是本发明密文云存储方法的加解密模块的加密流程图；</p>
    <p>[0079]	图7是本发明密文云存储方法的加解密模块的揭秘流程图；</p>
    <p>[0080]	图8是本发明密文云存储方法的同步模块的客户端同步预处理过程图；</p>
    <p>[0081]	图9是本发明密文云存储方法的同步模块的客户端同步操作过程图；</p>
    <p>[0082]	图10是本发明密文云存储方法的同步模块的云端服务器同步操作过程图；</p>
    <p>[0083]	图11是本发明密文云存储系统的对接模块结构图；</p>
    <p>[0084]	图12是本发明密文云存储方法的对接模块的异构云平台中间件实现过程图；</p>
    <p>[0085]	图13是本发明密文云存储方法的索引模块的密文索引子模块工作示意图；</p>
    <p>[0086]	图14是本发明密文云存储方法的索引模块的明文索引子模块工作示意图；</p>
    <p>[0087]图15是本发明密文云存储方法的查询模块的客户端查询子模块工作示意图；</p>
    <p>[0088]	图16是本发明密文云存储方法的查询模块的云端查询处理子模块工作示意图；</p>
    <p>[0089]	图17是本发明密文云存储方法的密文云存储方法基本步骤图；</p>
    <p>[0090]	图18是本发明密文云存储方法的密文云存储的检索方法图；</p>
    <p>[0091]	图19是本发明密文云存储方法的客户端文件操作作处理的基本步骤图；</p>
    <p>具体实施方式</p>
    <p>[0092]	下面结合附图和具体实施例对本发明做进一步详细的说明，但不以任何方式限制本发明的范围。</p>
    <p>[0093]	在本发明的一实施例中，对密文的云存储方法为:</p>
    <p>[0094]	a)(用户)对客户端上的选定文件进行加密；对于一个或多个客户端中的一个或多个文件，用户即数据所有者可使用相同或不同的密码设备单元，在客户端上以相同或不同的密钥对其进行透明的加解密；所述客户端可能是各种智能计算设备，包括移动智能终端 (例如:智能手机、PAD、PDA或其他移动智能设备)和传统互联网接入设备(例如:笔记本电 脑、PC或服务器等)；</p>
    <p>[0095]	b)设置所述选定文件按照明文或者密文的形式同步到云端或保存至本地客户端； 为数据所有者提供同步策略选项，使其可以设置选定的文件以明文或密文的形式同步至云 端，或仅保存在客户端而不同步；同步功能组件根据数据所有者选定的同步策略，将需要同 步的文件的明文或密文形式及描述其属性的元数据上传到云端；并在需要的时候同步至相 同或不同的客户端；</p>
    <p>[0096]	c)主密钥与个人身份绑定，只能由该用户提供操作，如利用指纹特征、虹膜特征等 生成固定的主密钥，该主密钥不会由其他人提供的特征生成，从而实现与个人身份绑定。明 文不与主密钥绑定，即明文不进行加密操作，不需要使用主密钥解密加解密密钥。明文在客 户端明文存储，上传到云端建立明文索引并存储。主密钥由用户提供，用来解密获取加解密 密钥。加解密密钥是跟文件绑定主密钥时用的，即每个文件都有一个加密密密钥，这些加解 密密钥之间可以不同。本发明提出的与个人身份绑定的主密钥和与文件绑定的加解密密钥 两级密钥管理方法，提供:身份认证，密钥产生，密钥更新，密钥存储，密钥备份，密钥恢复和 密钥销毁功能。</p>
    <p>[0097]	d)用户发出同步请求，将加密和/或明文文件同步到云端；数据所有者请求将文 件同步至云端，客户端依据所有者设定的策略，检查是否为加密上传，若是加密上传，则按 照如下步骤操作:在客户端上创建密文索引，加密数据，加密索引，上传加密后的文件和索 弓丨，待云端返回上传成功的消息后删除终端上的明文文件和索引；若不是加密上传，则上传 文件的明文，并在云端建立明文文件索引。</p>
    <p>[0098]	e)云存储服务器包括一个异构云平台对接组件，对接组件用于连接一个或多个云 存储设备，实现挂载控制功能和数据控制功能；其中云存储设备可以是本地的存储服务器， 也可以是云存储提供商的存储服务接口(例如:S3等)。所述挂载控制功能，包括增加、删除 挂载点、获取挂载点信息等；所述数据控制功能，包括上传、下载、删除外部存储中的文件。 通过异构的云平台对接组件可提供可兼容扩展的数据存储，用户数据可以存放在这些云存 储服务商，但是数据安全性不会丢失，从而降低云存储的成本和维护的风险。</p>
    <p>[0099]	f)根据用户设定，采用优先级控制策略，对于优先级高的文件，在得到用户请求后 立即得到响应，进行建立索引、加密文件、同步更新的操作；对于优先级低的文件，则在客户 端接入电源或静止状态时，自动进行索引建立、加密文件、同步更新的操作。</p>
    <p>[0100]	在本本发明另一实施例中，一个密文云存储系统，包括:</p>
    <p>[0101]	一个或多个客户端和云端服务器；</p>
    <p>[0102]	所述客户端包括透明加解密模块1、密钥管理模块2、索引模块3、查询模块4、同步 模块5和管理模块6 ；</p>
    <p>[0103]	所述透明加解密模块I和索引模块3分别用来进行加解密操作和密文索引生成；</p>
    <p>[0104]	所述密钥管理模块2完成与个人身份绑定的主密钥和与文件绑定的加解密密钥 两级密钥管理；</p>
    <p>[0105]	所述查询模块4用以实现明密文的检索，对于密文检索生成相应查询语句的分词 和单向散列，并与云端交互。[0106]	所述同步模块5与透明加解密模块I和索引模块3连接用于调用和接受生成的密文和索引，完成S文及索引&#20875;步的功能；</p>
    <p>[0107]	所述管理模块6与透明加解密模块1、密钥管理模块2连接为用户提供操作接口，以设定密文安全策略，包括获取所述认证参数和加解密算法；</p>
    <p>[0108]	所述云服务器端包括同步模块7、索引模块8、查询模块9、对接模块10、密钥管理模块11、用户管理模块12 ；</p>
    <p>[0109]	所述同步模块7与客户端同步模块5连接，实现密文同步，密文索引同步功能；</p>
    <p>[0110]	所述索引模块8用以创建明文索引；</p>
    <p>[0111]	所述查询模块9与客户端的查询模块4连接，用以支持索引的明密文查询和支持顺序扫描的密文查询，最后返回查询结果。</p>
    <p>[0112]	所述对接模块10用以实现与其他云平台的对接，扩展存储能力。</p>
    <p>[0113]	所述密钥管理模块11与客户端的密钥管理模块2连接，用于存储备份用户的主密钥单项散列值、使用主密钥加密的加解密密钥，用户文件属性的元信息值，采用数据库实现。提供接口接受用户请求，进行密钥恢复。</p>
    <p>[0114]	所述用户管理模块12实现对用户帐号的管理和访问控制，包括注册用户、维护超级管理员用户和普通用户等。</p>
    <p>[0115]	本实施例采用如图1所示的密文云存储系统结构，包括客户端、云端存储服务器、客户端通过网络与云端服务器建立连接。</p>
    <p>[0116]	在客户端包括(透明)加解密模块1、密钥管理模块2、索引模块3、查询模块4、同步模块5和管理模块6 ；</p>
    <p>[0117](透明)加解密模块I和索引模块3分别用来进行加解密操作和密文索引生成；</p>
    <p>[0118]	密钥管理模块2用来完成与个人身份绑定的主密钥和与文件绑定的加解密密钥两级密钥管理；</p>
    <p>[0119]	查询模块4用以实现明密文的检索，对于密文检索生成相应查询语句的分词和单向散列，并与云端交互。</p>
    <p>[0120]	同步模块5与透明加解密模块I和索引模块3连接用于调用和接受生成的密文和索引，完成S文及索引&#20875;步的功能；</p>
    <p>[0121]	管理模块6与透明加解密模块1、密钥管理模块2连接为用户提供操作接口，以设定密文安全策略，包括获取所述认证参数和加解密算法；</p>
    <p>[0122]	在本具体实施实例中客户端为安装有上述模块的应用的Android手机。</p>
    <p>[0123]	云服务器端包括同步模块7、索引模块8、查询模块9、对接模块10、密钥管理模块11、用户管理模块12 ；</p>
    <p>[0124]	云端同步模块7与客户端同步模块5连接，实现密文同步，密文索引同步功能；</p>
    <p>[0125]	云端索引模块8用以创建明文索引；</p>
    <p>[0126]	云端查询模块9与客户端的查询模块4连接，用以支持索引的明密文查询和支持顺序扫描的密文查询，最后返回查询结果。</p>
    <p>[0127]	对接模块10用以实现与其他云平台的对接，扩展存储能力。</p>
    <p>[0128]	云端密钥管理模块11与客户端的密钥管理模块2连接，用于存储备份用户的主密钥单项散列值、使用主密钥加密的加解密密钥，用户文件属性的元信息值，采用数据库实现。提供接口接收用户请求，进行密钥恢复。</p>
    <p>[0129]	用户管理模块12实现对用户帐号的管理和访问控制，包括注册用户、维护超级管理员用户和普通用户等。</p>
    <p>[0130]	在本具体实施实例中云端服务器为安装有上述模块的搭建为Hadoop的Linux云服务平台。</p>
    <p>[0131]	在本发明密文云存储方法和系统中，密钥管理模块、加解密模块、同步模块、对接模块、查询模块是其重要实现核心。</p>
    <p>[0132]	本发明步骤c)所述的密钥管理机制中的密钥产生过程，包括主密钥产生、加解密密钥产生和密钥获取。通过下述方法实现:</p>
    <p>[0133]	I)所述密钥产生模块需要作为服务随机启动，运行时主密钥从内存读取，存储的加解密密钥从内存缓存或者数据库中读取；</p>
    <p>[0134]	2)在用户第一次使用时，该模块依据用户提供的相应认证参数，生成所述主密钥， 产生后调用密钥备份模块进行备份。所述认证参数包括但不仅限于用户名口令或者用户指纹、声音等生物特征；</p>
    <p>[0135]	3)当透明加解密模块请求加解密密钥时，依据文件加密属性元数据信息和用户加密方案查找存储的加解密密钥，并使用主密钥解密所述存储的加解密密钥，提供给加解密模块；若未查找到所述存储的加解密密钥，则生成足够随机的长度安全可靠的加解密密钥， 提供给加解密模块，并使用所述密钥备份模块进行备份</p>
    <p>[0136]	本发明步骤c)所述的密钥管理机制如下，</p>
    <p>[0137]	认证过程:从存储数据库中读取所述存储的主密钥的固定长度的单项散列值，与用户所提供的所述认证参数利用相同算法生成密钥的固定长度的单项散列值值进行比对。 若相同，则通过认证；否则，弹出警告，并退出系统。</p>
    <p>[0138]	密钥更新过程:当用户发出更新请求，并通过所述身份认证后，利用新的认证参数，重新调用所述密钥产生模块生成新的主密钥，并通过所述密钥备份模块进行 备份。</p>
    <p>[0139]	密钥备份过程:将主密钥的固定长度的单项散列值，及经主密钥加密后的加解密密钥备份到数据库和云端服务器；同时将加密后的加解密密钥和文件映射关系表也备份到</p>
    <p>~&#8226;&#19972;山</p>
    <p>石父而。</p>
    <p>[0140]	密钥恢复过程:根据用户名和口令，将该用户主密钥的固定长度的单项散列值、加密后的加解密密钥以及加密密钥和文件映射关系表从云端到客户端的恢复。</p>
    <p>[0141]	密钥销毁过程:根据用户请求，将主密钥和加解密密钥同时在数据库和云端的擦除销毁。</p>
    <p>[0142]	如图2所示，在本发明密文云存储方法的密钥管理中实现了与个人身份绑定的主密钥和与文件绑定的加解密密钥两级密钥管理方法。主要分为六大部分，每一部分是一个或几个单独的子模块组成，完成一个相对独立的功能。如图3所示，在本具体实施实例中密钥管理模块不同部分之间协同工作的关系:</p>
    <p>[0143]	密钥产生模块:包括主密钥产生，加密密钥产生，密钥获取。主要完成主密钥、加密密钥的产生和主密钥对加密密钥的加解密。</p>
    <p>[0144]	①用户在第一次使用该应用时注册用户名和密码，由该模块依据相应的认证参数 (口令+用户名，指纹等生物特征)生成主密钥KEYMast&#8222;。(产生之后即调用密钥备份模块保存)</p>
    <p>[0145]	②当加解密模块请求加密密钥KEYarayptim时，依据文件加密属性和用户加密方案查找相应加密密钥KEYfirayptim并用主密钥KEYilaste,解密提供给加解密模块，如未找到则生成相应加密密钥KEYarayptim，提供给加解密模块并用主密钥KEYMastOT加密fen_(KEYEn_im，KEYMaster)(即调用密钥备份模块进行备份)。另外作为这个模块的主线程，要随机启动，运行期间主密钥从内存读取，加密密钥可以从内存缓存中读取，或者读取数据库。</p>
    <p>[0146]	密钥更新模块:主要完成是根据用户管理界面的命令来完成密钥的更新操作。当用户发出更新命令时，需要输入旧的认证参数，如口令或生物特征，以及新的认证参数，调用认证模块，当旧的认证参数认证通过时，就用旧的主密钥解密所有加解密密钥，并使用新的认证参数生成新的主密钥，并对加解密密钥加密存储。(调用密钥备份模块进行客户端和云端的双备份)。</p>
    <p>[0147]	密钥认证模块:主要完成对用户身份的认证。根据用户的认证参数生成的主密钥HASH值存储到客户端上的DB中，并在需要验证时计算用户输入的认证参数生成主密钥HASH值和DB中的HASH值比对。</p>
    <p>[0148]	密钥备份模块:主要完成将主密钥HASH值，加密密钥备份到DB和云端；并且把和加密密钥有关的其他数据库文件(比如加密密钥和文件的对应关系表，用户表等)也备份到</p>
    <p>~.&#19972;山</p>
    <p>石父而。</p>
    <p>[0149]	①当主密钥产生时即刻备份到DB并把修改的DB表备份到云端；</p>
    <p>[0150]	②同样，当加密密钥产生后，将加密密钥的密文做同样的备份，同时把和加密密钥关联的加密密钥和被加密文件的对应表也备份到云端。</p>
    <p>[0151]	密钥恢复模块:主要完成根据用户名和用户密码将该用户主密钥HASH值、加密密钥以及和加密密钥相关的DB从云端到客户端的恢复。当用户移动到一个新的手机客户端时或者手机端密钥丢失时，可以从云端恢复这些数据，供用户进行认证和加解密数据。</p>
    <p>[0152]	密钥销毁模块:主要完成主密钥和加密密钥密文在DB和云端的销毁。当用户特殊需要时可以将用户的密钥全部销毁。</p>
    <p>[0153]	如图4所示，密钥管理模块的获取密钥过程的具体实施实例如下:</p>
    <p>[0154]	步骤1.判断加解密密钥存储数据库是否存在。</p>
    <p>[0155]	步骤2.若存在，则提示用户输入主密钥KEYMaste,，使用KEYMaste,解密数据库中存储的加解密密钥，并返回。</p>
    <p>[0156]	步骤3.若不存在，则调用密钥产生模块，生成加解密密钥，存储在内存缓冲中。</p>
    <p>[0157]	步骤4.使用用户输入的主密钥KEYMastOT加密加解密密钥，存储在数据库中。并调用密钥备份模块，将数据库上传到云端数据库中。</p>
    <p>[0158]	如图5所示，在本发明密文云存储法的加解密模块用来执行对文件具体的加解密操作。主要分为六个部分，每一部分是一个或几个单独的子模块组成，完成一个相对独立的功能。</p>
    <p>[0159]	用户应用程序扩展模块，用以监控用户应用程序对数据的操作，包括通讯录、日历、联系人、相册、文档等应用程序，控制文件的打开方式；</p>
    <p>[0160]	抽象加解密模块，用以连接其他组件，提供通用的加解密接口，该接口可以通过开源算法库实现如openssl等，也可以自己实现加解密算法；[0161]	数据封装模块，用以屏蔽不同数据类型对加解密算法的影响，实现对通讯录、短 信、文件的统一封装，提高通用性；</p>
    <p>[0162]	加解密配置模块，用以和用户交互在管理界面选择加解密算法如3DES、AES、 Blowfish等,保存在配置文件中。</p>
    <p>[0163]	如图6所示，在本具体实施实例中加解密模块的具体加密流程如下:</p>
    <p>[0164]	步骤1.通过用户应用程序扩展模块得到需要加密的明文及相关信息。</p>
    <p>[0165]	步骤2.通过抽象加解密模块将明文传入数据封装模块。</p>
    <p>[0166]	步骤3.对传入的不同格式的明文信息，进行分块和封装，得到统一格式。</p>
    <p>[0167]	步骤4.通过抽象加解密模块向加解密配置模块请求查询用户保存的加解密算 法。</p>
    <p>[0168]	步骤5.加解密配置模块访问缓存的配置文件,如Android下的sharedpreference 等，将查询到的加解密算法返回给抽象加解密模块。</p>
    <p>[0169]	步骤6.通过抽象加解密模块向密钥管理模块请求获取加解密密钥。</p>
    <p>[0170]	步骤7.密钥管理模块访问内存缓存中存放的加解密密钥，使用主密钥解密返回 给抽象加解密模块。</p>
    <p>[0171]	步骤8.调用抽象加解密的具体实现接口，将明文、算法类型、加解密密钥作为参 数传入。</p>
    <p>[0172]	步骤9.具体加解密的实现可以是开源算法库，如openssl等，或者用户自定义的 函数，对分块的明文加密并返回。</p>
    <p>[0173]	步骤10.抽象加解密模块向上层返回加密后的密文。</p>
    <p>[0174]	如图7所示，在本具体实施实例中加解密模块的具体解密流程如下:</p>
    <p>[0175]	步骤1.通过用户应用程序扩展模块得到需要解密的密文，并对密文进行分块。</p>
    <p>[0176]	步骤2.通过抽象加解密模块向加解密配置模块请求查询用户保存的加解密算 法。</p>
    <p>[0177]	步骤3.加解密配置模块访问缓存的配置文件,如Android下的sharedpreference 等，将查询到的加解密算法返回给抽象加解密模块。</p>
    <p>[0178]	步骤4.通过抽象加解密模块向密钥管理模块请求获取加解密密钥。</p>
    <p>[0179]	步骤5.密钥管理模块访问内存缓存中存放的加解密密钥，使用主密钥解密返回 给抽象加解密模块。</p>
    <p>[0180]	步骤6.调用抽象加解密的具体实现接口，将密文、算法类型、加解密密钥作为参 数传入。</p>
    <p>[0181]	步骤7.具体加解密的实现可以是开源算法库，如openssl等，或者用户自定义的 函数，对分块的密文解密并返回。</p>
    <p>[0182]	步骤8.通过抽象加解密模块将解密的封装的明文传入数据封装模块。</p>
    <p>[0183]	步骤9.数据封装模块对解密的封装的明文，转为原明文数据返回给抽象加解密 模块</p>
    <p>[0184]	步骤10.抽象加解密模块向上层返回解密后的明文。</p>
    <p>[0185]	在本发明密文云存储方法实施实例中的同步模块，完成终端数据向云端服务器进 行双向同步，包括数据的上传和下载，以及数据的更新和删除。其中数据类型包括:文件、sqlite 数据库、SharedPreferences 等。</p>
    <p>[0186]	本发明步骤b)所述的明文同步机制，包括文件的上传、下载或删除，通过下述方法实现对用户数据的同步和更新:</p>
    <p>[0187]	I)在客户端启动的同时，启动文件监控服务；</p>
    <p>[0188]	2)从数据库中获取文件监控列表，映射并调用文件监控器；</p>
    <p>[0189]	3 )所述文件监控器获取同步操作，检查客户端本地文件是否存在，若文件不存在，则驱动下载器模块下载文件属性元数据和明文文件；</p>
    <p>[0190]	4)若所述本地文件存在，检测本地属性的元数据信息是否与服务器相同，包括文件修改时间和固定长度的文件散列值，以及文件同步时间。所述文件单项散列值包括HASH值，SHA-1值等；</p>
    <p>[0191]	5)若所述云存储服务器文件修改，则驱动下载器模块，将云服务器文件拉取至本地；</p>
    <p>[0192]	6)若所述客户端本地文件修改，即本地文件比服务器文件新，该情况包括初次上传，服务端未有元数据的情况，则驱动上传器模块，将客户端本地文件上传至服务器存储；</p>
    <p>[0193]	7)若所述云存储服务器文件和客户端文件同时被修改，则驱动冲突处理模块，包括取消操作、重写文件、 附加保留等解决策略。</p>
    <p>[0194]	步骤b)所述的密文同步机制，与所述的明文同步机制相比对下层的调用相同，增加下述方法解决密文同步:</p>
    <p>[0195]	I)对于上传，在获取所述同步操作后，先进行所述文件的同步密文预处理过程，该预处理模块获取用户操作文件，依次调用索引模块，生成密文索引；透明加解密模块，生成密文文件；</p>
    <p>[0196]	2)将所述密文文件和密文索引按照明文上传的步骤，交给下层组件进行上传过程;</p>
    <p>[0197]	3)对于下载亦与所述明文同步更新相似，由于密文文档不能实现增量更新，故在冲突处理模块判断是否为密文，若为密文，则根据用户判断只进行取消操作或重写文件。</p>
    <p>[0198]	如图8所示，在本发明同步模块的客户端同步预处理过程的具体实施实例步骤如下:</p>
    <p>[0199]	步骤1.在客户端启动时加载文件监控服务file_observation,该服务生命周期为系统生命周期。</p>
    <p>[0200]	步骤2.从数据库file_list.db中读取文件列表file_list。该列表包括文件的一系列本发明中定义的元数据属性如下:</p>
    <p>[0201]</p>
    <p>            [H	I字段描述</p>
    <p> id	Integer	文件的 id</p>
    <p> filename	Text	文件名</p>
    <p> path	Text	文件在服务器上的路径</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00181.png"> <img id="idf0001" file="CN103595730AD00181.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00181.png" class="patent-full-image" alt="Figure CN103595730AD00181"> </a> </div>
    <p>[0202]	步骤3.初始化文件监控服务中的文件监控列表file_list。由文件监控器负责调度维护。文件列表是数据库中存放的所要同步的文件的元数据属性的列表，文件监控列表是由监控服务在内存中根据从数据库读取到的文件列表生成维护的文件列表。</p>
    <p>[0203]	步骤4.文件监控器获取文件监控列表，依照filename字段和path字段，产生文件和列表的一一映射，将监控列表里的文件与本地文件关联。</p>
    <p>[0204]	步骤5.对于自动同步来说，文件监控器监控本地文件的状态，若文件状态包括属性同步的最新时间，文件修改时间，文件哈希值等发生改变，则触发文件同步的事件。对于手动出发同步操作来说，则直接触发文件同步的事件。</p>
    <p>[0205]	步骤6.事件处理机制获取文件目录路径，以及该路径下的文件列表。执行具体的同步操作过程。</p>
    <p>[0206]	如图9所示，在本发明提出的同步模块的客户端同步操作过程的具体实施实例步骤如下:在本具体实施实例中假定，手动选择同步文件test, txto</p>
    <p>[0207]	步骤1.检查本地文件test, txt是否存在，若不存在，则向云端服务器发送下载命令。</p>
    <p>[0208]	步骤2.若本地文件test, txt存在，则将云端服务器存放文件元数据的数据库 server_filelist.db 下载到本地。</p>
    <p>[0209]	步骤3.判断本地文件test, txt是否改变，依据本地文件元数据中文件的修改时间modified是否大于文件内容的同步时间last_sync_date_for_data。[0210]	步骤4.进一步判断服务器的test, txt是否改变，依据服务器元数据中文件的修改时间modified是否大于本地元数据中文件内容修改同步时间last_sync_date_for_data。</p>
    <p>[0211]步骤	5.若本地文件 test, txt 兀数据的 modif ied〈last_sync_date_for_data 且服务器test, txt元数据的modif ied〈last_sync_date_for_data,则表示本地和服务器文件test, txt都没有改变,不需要同步更新。</p>
    <p>[0212]步骤	6.若本地文件 test, txt 兀数据的 modified〈last_sync_date_for_data 且服务器 test, txt 兀数据的 modified&gt;last_sync_date_for_data,则表不服务器 test, txt文件发生改动，向云端服务器发送下载命令get请求,通过webdav协议的get过程具体实现。</p>
    <p>[0213]步骤	7.若本地文件 test, txt 兀数据的 modif ied&gt;last_sync_date_for_data 且服务器test, txt元数据的modif ied&gt;last_sync_date_for_data,则表示本地和服务器文件都发生改动，进行冲突处理。提示用户选择:1.取消同步，2.采用服务器文件覆盖本地文件，3.两者都重命名保留。</p>
    <p>[0214]步骤	8.若本地文件 test, txt 兀数据的 modif ied&gt;last_sync_date_for_data 且服务器test, txt元数据的modif ied〈last_sync_date_for_data,则表示本地文件发生改动，需上传到云端服务器，向云端服务器发送上传命令put请求,通过webdav协议的put过程具体实现。</p>
    <p>[0215]	如图10所示，在本发明同步模块的云端服务器同步操作过程的具体实施实例步骤如下:假设用户选择的最终操作是将本地文件上传到云端服务器操作，下载操作与该流程类似。</p>
    <p>[0216]	①接收客户端同步请求；</p>
    <p>[0217]	②判断是否是put请求，如果是打开文件，创建同步对象，并将同步文件读入；否则进行其它文件操作，如删除文件请求，更新文件请求；</p>
    <p>[0218]	③验证文件的MD5值，验证通过则为文件分配存储位置，默认为当前用户的主目录下;</p>
    <p>[0219]	④调用文件存入方法，将文件分片写入存储系统。</p>
    <p>[0220]	如图11所示，在本发明密文云存储方法的具体实施实例中对接模块用来实现异构云平台对接组件的所有功能，实现与其它云存储平台如与Amazon S3、Dropbox、HDFS动态无缝地对接功能，从而可以实现云数据的可扩展性存储。异构云平台对接软件总体结构主要分为两个部分，其一是挂载控制功能模块，其二是数据操作模块，其中挂载控制功能模块的主要分为增加挂载点子模块、删除挂载点子模块、获得挂载点信息子模块，数据操作模块主要分为通用操作接口子模块及外部存储接口实现子模块。</p>
    <p>[0221]	增加挂载点子模块:用户增加外部云存储挂载点，并将挂载点信息写入相应的配置文件中。当进行外部云存储挂载时用户需要向中间件提供相应的参数，如:挂载点、所挂载的外部存储类型、用户名等信息。增加挂载点成功后，用户就可以像操作自己的云平台一样操作相应的外部存储云。</p>
    <p>[0222]	删除挂载点子模块:删除已挂载的外部云存储挂载点，并更新相应的配置文件。用户需要提供挂载点、用户名等参数信息。删除了该挂载点后，用户就不能通过私有云与外部云存储进行数据交互。</p>
    <p>[0223]	获得挂载点信息子模块:获得用户当前的所有挂载点信息。当软件程序初始化或 刷新的时候需要知道当前用户的挂载点信息，得到了这些挂载点信息后才能将放在外部存 储的文件显示给用户。</p>
    <p>[0224]	通用操作接口子模块:提供与所有外部存储云平台对接并进行数据交互的通用的 访问接口。</p>
    <p>[0225]	外部存储接口实现子模块:该模块包括Amazon S3、Dropbox, HDFS外部存储类型 对通用操作接口的具体实现。当用户使用通用接口时，就会间接地调用相应外部存储类型 的接口实现，从而达到对外部存储进行操作的功能。</p>
    <p>[0226]	本发明步骤e)所述的异构云平台对接中间件，通过下述方法实现:</p>
    <p>[0227]	I)用户将需要的所述外部第三方云提供服务商的挂载信息写入配置文件中，所述 挂载信息包括用户名、存储类型等；</p>
    <p>[0228]	2)当用户发起挂载请求时，所述对接中间件获取配置文件信息，构造相应的抽象 操作接口 ；</p>
    <p>[0229]	3 )该所述抽象操作接口模块对上层提供通用的数据访问接口，对下层针对各个云 服务商交互，实现不同存储类型对应的抽象操作。所述云服务商存储类型包括但不限于: Amazon S3、Dropbox、HDFS等,所述抽象操作包括fopen等文件操作接口、mkdir等目录操 作接口，并可以根据需求动态的扩展。</p>
    <p>[0230]	如图12所示，在本发明密文云存储方法的具体实施实例中异构云平台中间件实 现过程如下:</p>
    <p>[0231]	步骤1.用户产生增加挂载点、删除挂载点或获取挂载点信息的请求。</p>
    <p>[0232]	步骤2.根据用户的相应请求生成相应的基本参数，并根据用户的类型是否为 personal用户创建相应的挂载点。</p>
    <p>[0233]	步骤3.从配置文件mount, json中读取挂载点信息到数组$mountPoints中，根据 相应的请求跳转到相应的子模块实现。</p>
    <p>[0234]	步骤4.判断挂载点信息数组$m0UntP0ints中是否已经存在当前组或用户的挂载 条目。</p>
    <p>[0235]	步骤5.将新的挂载点信息写入$mountPoints数组中。</p>
    <p>[0236]	步骤6.判断挂载条目中是否存在当前申请的用户或组数据，若存在，将新挂载点 添加到该用户或组后面，否则就新建该用户。</p>
    <p>[0237]	步骤7.将更新过的所有挂载点信息$mountPoints数组写入配置文件mount, json中。</p>
    <p>[0238]	步骤8.判断所请求的外部存储类是否存在或支持操作。</p>
    <p>[0239]	步骤9.进行创建挂载点失败的处理。</p>
    <p>[0240]	步骤10.创建一个该存储类的实例，与外部存储实现对接。</p>
    <p>[0241]	步骤11.将所要删除的挂载点信息从$m0UntP0ints数组删除。</p>
    <p>[0242]	步骤12.更新配置文件mount, json。</p>
    <p>[0243]	步骤13.判断用户是以GROUP形式挂载还是以USER形式挂载。</p>
    <p>[0244]	步骤14.将获得的信息进行规范化处理，统一显示格式，如将外部存储转化为\\OC\\Files| I Storage\\ 类名。</p>
    <p>[0245]	步骤15.将获得挂载点信息返回。</p>
    <p>[0246]	在本发明密文云存储方法实施实例中的索引模块，依据用户对文件检索的需求建立同步文件的检索索引。在本实施实例中索引基于关键字，分为明文索引子模块和密文索引子模块。</p>
    <p>[0247]	如图13所示，在本发明密文云存储方法实施实例中的密文索引子模块，由于同步的数据以密文的方式存储，不能在云端索引器中构建索引，密文索引子模块的索引部分是在客户端创建的，可以建立索引的文本文件的类型包括txt、pdf、word等非结构化数据。对索引中的关键字加密和对索引中的实体加密采用两种不同的加密算法，关键字采用SHA-1哈希算法进行单向散列加密。然后将加密的索引同步到云端，由同步模块将其存储到指定的目录下。该模块是客户端的核心模块，它将调用加解密模块和密钥管理模块的外部接口进行索引的加密，也将调用同步模块实现密文索引文件的上传。密文索引创建的过程具体实施实例如下:</p>
    <p>[0248]	步骤1.对明文文件进行预处理，包括去除冗余字段、停用词、标点符号等。</p>
    <p>[0249]	步骤2.采用AKanalyzer分词系统进行分词处理，得到关键字。</p>
    <p>[0250]	步骤3.对每个关键字进行评分，采用IF*IDF算法。</p>
    <p>[0251]	步骤4.索引写入磁盘前，在索引缓存区调用加解密模块SHA-1算法加密索引中的关键字部分。</p>
    <p>[0252]	步骤5.在内存中生成密文索引树，创建索引。该索引索引元数据结构如下:</p>
    <p>[0253]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00211.png"> <img id="idf0002" file="CN103595730AD00211.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00211.png" class="patent-full-image" alt="Figure CN103595730AD00211"> </a> </div>
    <p>[0254]	步骤6.将加密后的索引写入磁盘存储器。</p>
    <p>[0255]	步骤7.调用同步模块，将密文索引同步到云端服务器。</p>
    <p>[0256]	如图14所示，在本发明密文云存储方法实施实例中的明文索引子模块，由于同步的数据以明文的方式存储，所以明文索引在服务器端创建，该模块通过公共接口获得同步模块传输的数据，对数据进行预处理，索引创建由Iucene实现，无需对其进行扩展，然后输出索引存储到指定目录。由于云端的基础是hadoop,hadoop的MapReduce框架能够实现高并发并行计算，所以在进行云端索引模块设计时采用MapRedcue框架。在本发明中提出的明文索引创建的过程具体实施实例如下:</p>
    <p>[0257]	步骤1.文件同步任务完成后通知云端服务器明文索引模块创建明文索引。</p>
    <p>[0258]	步骤2.传入明文文本，Hadoop的JobTracker以每个文件世纪存储的物理位置所为Key，对文件数据进行分割。</p>
    <p>[0259]	步骤3.将分割后的文本数据分配给各个TaskTracker,每个TaskTracker启动2 个Map索引处理任务，并监控Map执行状态，生成单独的倒排索引。</p>
    <p>[0260]	步骤4.Reduce将单独的倒排索引合并成为一个整体。</p>
    <p>[0261]	步骤5.将明文索引保存在云端服务器相应的目录下。该明文索引元数据的结构信息如下:</p>
    <p>[0262]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00221.png"> <img id="idf0003" file="CN103595730AD00221.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00221.png" class="patent-full-image" alt="Figure CN103595730AD00221"> </a> </div>
    <p>[0263]	在本发明密文云存储方法实施实例中的查询模块，依据索引模块建立的明文或密文文件索引，进行明密文关键字的查询，分为客户端查询子模块和云端查询子模块、云端查询处理模块。</p>
    <p>[0264]	如图15所示，客户端查询子模块的过程具体实施实例如下:</p>
    <p>[0265]	步骤1.在客户端查询界面中输入所要查找的关键字，然后选择密文查询、明文查询、或者综合查询。</p>
    <p>[0266]	步骤2.根据用户选择，若选择为密文查询或综合查询，则对查询关键字进行加密处理即调用加解密模块的SHA-1算法对关键字求哈希。</p>
    <p>[0267]	步骤3.根据关键字的哈希值，生成密文的查询语句。</p>
    <p>[0268]	步骤4.根据明文关键字，生成明文的查询语句。</p>
    <p>[0269]	步骤5.客户端通过http协议向云端服务器发送固定格式的查询请求。格式形如:http://192.168.111.83:8080/index.jsp?plain=test&amp;encrypt=aJaaaaaaLasaaaaaaa</p>
    <p>a,	plain代表明文关键字，encrypt代表密文关键字。</p>
    <p>[0270]	步骤6.云端服务器调用云端查询处理模块，进行查询处理，得到文件列表。</p>
    <p>[0271]	步骤7.云端服务器将查询到的文件列表返回给客户端，客户端在查询结果界面进行显示。</p>
    <p>[0272]	云端查询子模块的过程类似客户端查询子模块，即将客户端查询子模块的流程移植到网页端，使得用户可以通过网页访问云端数据的同时可以进行明密文查询操作。</p>
    <p>[0273]	如图16所示，云端查询处理模块主要功能是在云端服务器支持对生成索引进行明密文查询，被上层模块调用，提供统一的接口。使用MapReduce结构，在所有Slave节点都部署查询模块。查询过程中，由Master节点对倒排索引库进行分段,每个Slave节点只检索一段索引，获得部分匹配结果集，经Master汇总排序后由Web服务器向用户呈现最终查询结果。云端查询处理过程的具体实施实例如下:</p>
    <p>[0274]	步骤1.云端服务器接收客户端发送来的查询请求。</p>
    <p>[0275]	步骤2.对查询请求中的字符串解析生成查询请求Query,根据plain或encrypt字段划分明文查询或者密文查询，分别调用相应的处理模块。</p>
    <p>[0276]	步骤3.根据明文查询请求生成查询树，并向各个服务器查(Slave节点)发出，每个查询服务器检索倒排索引，且只完成部分查询结果，所有查询结果经汇总后得出明文查询结果。</p>
    <p>[0277]	步骤4.根据密文查询请求生成查询树，并向各个服务器查(Slave节点)发出，每个查询服务器检索倒排索引，且只完成部分查询结果，所有查询结果经汇总后得出密文查询结果。</p>
    <p>[0278]	步骤5.合并明密文结果。</p>
    <p>[0279]	步骤6.将查询所得的文件列表返回上层应用。该文件列表存放云端元数据信息，通过查找存储在云端数据的元数据信息能够准确定位到所要查找的文件，并将文件相对地址列表反馈给客户端。此表的主键为path，其结构如下所示:</p>
    <p>[0280]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00231.png"> <img id="idf0004" file="CN103595730AD00231.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00231.png" class="patent-full-image" alt="Figure CN103595730AD00231"> </a> </div>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00241.png"> <img id="idf0005" file="CN103595730AD00241.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103595730A/CN103595730AD00241.png" class="patent-full-image" alt="Figure CN103595730AD00241"> </a> </div>
    <p>[0281]	在本发明中，主要实现对用户数据的密文云存储方法，即客户端加密的密文数据上传到云服务器端。</p>
    <p>[0282]	如图17所示，本发明的密文云存储方法具体实施实例的基本步骤为:</p>
    <p>[0283]	步骤1.首先在客户端启动时，用户输入主密钥，通过密钥认证，进入系统；若是首次启动则进入管理配置界面，用户根据加解密算法列表，选择用于加解密的算法，如 AES_192_ofb,将用户选择保存在配置文件中，然后进入系统。</p>
    <p>[0284]	步骤2.用户选择选择需要上传的文件test, txt,并指定是密文上传存储。</p>
    <p>[0285]	步骤3.文件监控器将用户选择的文件test, txt加入文件监控列表，此后客户端该文件在经过用户修改，删除等操作后，文件变化将自动同步到云端服务器，或者云端服务器上的该test, txt文件被修改,删除,也将被同步到客户端。</p>
    <p>[0286]	步骤4.调用索引模块对用户选择的文件test, txt的内容创建密文索引，生成的密文索引存储在客户端的应用程序沙箱中。</p>
    <p>[0287]	步骤5.获得用户选择的文件test, txt的相关属性元数据，并将数据库表项存储在本地数据库中。</p>
    <p>[0288]	步骤6.对用户选择的文件test, txt调用加解密模块和密钥管理模块，在密钥产生子模块，使用用户输入主密钥解密加解密密钥或者产生随机的加解密密钥，然后采用加密算法AES_192_ofb,对称分组加密test, txt,得到密文test, txt存储到相应的目录下。</p>
    <p>[0289]	步骤7.调用同步模块，通过其具体实现的同步策略和同步协议，将产生的密文 test, txt、test, txt的明文文件属性元数据表项以及密文索引，同步到云端服务器，在同步成功后，删除本地的密文索引。</p>
    <p>[0290]	步骤8.云端服务器接收test, txt的文件属性元数据对服务器端文件元数据进行更新，得到新的文件列表。</p>
    <p>[0291]	步骤9.云端服务器对接收的密文文件test, txt分片存储。</p>
    <p>[0292]	步骤10.云端服务器的索引模块接收上传的密文索引，将密文索引存储在相应的目录下。</p>
    <p>[0293]	在本发明中，还实现对用户数据的密文云存储的检索方法，即客户端对加密上传到云端服务器的密文数据进行检索。</p>
    <p>[0294]	本发明a)所述的透明加解密由抽象密码设备组件所提供的统一接口实现，所述抽象密码设备组件读取用户设备配置，获取加解密算法，并由密钥管理模块获得加解密密钥，驱动密码设备单元实施加解密操作。所述密码设备单元由抽象密码设备组件管理，可以是使用硬件加密设备或软件加密设备实现，可动态扩展密码算法。通过下述方法实现加解密过程对数据所有者的透明:</p>
    <p>[0295]	I)用户首次使用时，选择所需加密上传的文件，此时文件被同步组件做上传预处理。[0296]	2)由抽象密码设备组件获取密钥和算法，对所选文件进行加密、上传并保存文件属性信息到数据库。所述所选文件的原明文文件在上传成功后被删除。</p>
    <p>[0297]	3)用户对密文请求读取或修改操作时，调用抽象密码设备组件进行解密操作，生成明文临时文件，并保存明文临时文件属性信息元数据到临时文件表。并将明文临时文件交给上层应用程序。</p>
    <p>[0298]	4)用户使用应用程序对文件的操作均针对于明文临时文件。在进行下一个文件操作或同步刷新时进行临时文件属性与所存储原文件属性元数据进行对比。</p>
    <p>[0299]	5)若文件没有进行修改，则删除临时文件，文件不进行同步。若文件经过修改，则调用密码设备单元对所述临时明文文件进行加密操作，并同步。在上传成功后删除所述临时明文文件。</p>
    <p>[0300]	如图18所示，本发明的密文云存储的检索方法具体实施实例的基本步骤为:</p>
    <p>[0301]	步骤1.用户提供主密钥，通过身份认证，进入系统。</p>
    <p>[0302]	步骤2.用户进入查询界面输入查询语句Information Security,选择明密文查询。</p>
    <p>[0303]	步骤3.调用客户端查询子模块，进行词法分析生成明文关键字，对每个关键字采用SHA-1算法生成明文关键字相应的Hash，构造相应的查询请求。</p>
    <p>[0304]	步骤4.云端查询处理模块接收查询请求，进行查询请求解析，并调用分布式的明密文索引查询，合并生成文件查询结果的列表，并将该包含关键字的密文文件test, txt列表返回至客户端。</p>
    <p>[0305]	步骤5.客户端接收云端服务器返回的文件列表，并在查询结果界面显示包含密文文件test, txt的文件列表。</p>
    <p>[0306]	步骤6.用户选择需要下载到客户端本地的密文文件test, txt，客户端同步处理过程进行向云端服务器发送请求，并将密文文件test, txt的属性元数据同步到客户端，进行冲突检测和处理，若需要下载该密文文件则向服务端发送get请求。</p>
    <p>[0307]	步骤7.云端服务器的同步模块接收客户端发来的同步请求，将存储的密文文件test, txt通过网络下载到客户端。</p>
    <p>[0308]	步骤8.当用户通过客户端打开所下载的密文文件test, txt时,请求用户验证主密钥，通过后，调用密钥管理模块获取加解密密钥，以及获取加解密算法AES_192_ofb，调用加解密模块的抽象加解密子模块对密文文件test, txt进行解密，得到存储在应用程序沙箱里临时的明文文件test, txt ο</p>
    <p>[0309]	步骤9.客户端文件操作处理过程，客户端对明文的临时文件test, txt进行操作处理，包括打开修改等。</p>
    <p>[0310]	在本发明中，还实现对用户数据的密文云存储的明密文文件操作方法，即客户端对存储的明密文进行打开，修改，重命名的操作过程，如图19所示，本发明的密文云存储的文件打开修改操作的具体实施实例的基本步骤如下:</p>
    <p>[0311]	步骤1.用户选择需要打开的文件，该文件可以为密文文件也可以为明文文件。</p>
    <p>[0312]	步骤2.从文件元数据属性数据库中查找该文件路径，判断数据库中是否存在该文件的信息。</p>
    <p>[0313]	步骤3.若件元数据属性数据库存在该文件信息，则打开从文件元数据数据库中临时文件信息表temp_list，查找是否存在该文件的元属性信息，从而判断该文件是否已经 是临时文件。</p>
    <p>[0314]	步骤4.若文件为临时文件，则从应用程序沙箱私有空间中的临时文件夹获取临 时文件直接交给上层应用程序如金山WPS等，进行打开、编辑、关闭等操作，生成新的临时 明文文件。</p>
    <p>[0315]	步骤5.若文件不是临时文件，表示打开的是另一个文件。通过对比临时文件的修 改时间modified与文件元数据属性数据库中存储的文件修改时间modified对比,判断临 时文件是否是被修改的最新文件。</p>
    <p>[0316]	步骤6.请求用户验证主密钥，通过后，调用密钥管理模块获取加解密密钥，以及 获取加解密算法AES_192_ofb，调用加解密模块的抽象加解密子模块对临时文件夹下的临 时文件进行加密，根据文件元数据数据库中临时文件信息表temp_list中存储的文件路 径，存放到客户端相应的目录下。</p>
    <p>[0317]	步骤7.获取临时文件夹下的临时文件的元数据属性信息更新到文件元数据属性 数据库中。</p>
    <p>[0318]	步骤8.将临时文件夹下的临时文件擦除。</p>
    <p>[0319]	步骤9.由于打开的是新的文件，打开该文件元数据属性的数据库，根据字段 encryption判断文件是否为密文。</p>
    <p>[0320]	步骤10.获取传进来的明文文件，直接交给上层应用程序如金山WPS等，进行打 开、编辑、关闭等操作，生成新的明文文件，并更新文件元数据。</p>
    <p>[0321]	步骤11.若新打开的文件是密文，则请求用户验证主密钥，通过后，调用密钥管理 模块获取加解密密钥，以及获取加解密算法AES_192_ofb，调用加解密模块的抽象加解密 子模块对该文件进行解密，解密后的临时文件存放在应用程序沙箱私有空间的临时文件夹 下。</p>
    <p>[0322]	步骤12.获取临时明文文件的元数据属性，更新到数据库中。</p>
    <p>[0323]	通过本发明公开的方法和系统，完善的解决了背景技术中提到的现有技术方案的 缺陷和风险，使得终端丢失不会丢失数据，云服务提供商不能恶意的窥探用户的数据，云服 务提供商被攻陷仅损失文件密文，并可以对接多个云服务提供商。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1588365A?cl=zh">CN1588365A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2004年8月2日</td><td class="patent-data-table-td patent-date-value">2005年3月2日</td><td class="patent-data-table-td ">中国科学院计算机网络信息中心</td><td class="patent-data-table-td ">密文全文检索技术</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102024054A?cl=zh">CN102024054A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月10日</td><td class="patent-data-table-td patent-date-value">2011年4月20日</td><td class="patent-data-table-td ">中国科学院软件研究所</td><td class="patent-data-table-td ">一种面向密文云存储的文档检索方法与系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102075542A?cl=zh">CN102075542A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年1月26日</td><td class="patent-data-table-td patent-date-value">2011年5月25日</td><td class="patent-data-table-td ">中国科学院软件研究所</td><td class="patent-data-table-td ">一种云计算数据安全支撑平台</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102428686A?cl=zh">CN102428686A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年5月19日</td><td class="patent-data-table-td patent-date-value">2012年4月25日</td><td class="patent-data-table-td ">安全第一公司</td><td class="patent-data-table-td ">用于安全保护云中的数据的系统和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102708216A?cl=zh">CN102708216A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年6月28日</td><td class="patent-data-table-td patent-date-value">2012年10月3日</td><td class="patent-data-table-td ">北京邮电大学</td><td class="patent-data-table-td ">一种面向密文搜索的分词组织方法和聚类方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103345526A?cl=zh">CN103345526A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年7月22日</td><td class="patent-data-table-td patent-date-value">2013年10月9日</td><td class="patent-data-table-td ">武汉大学</td><td class="patent-data-table-td ">一种云环境下高效的隐私保护密文查询方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=EaryCAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029060000">H04L29/06</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=EaryCAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029080000">H04L29/08</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2014年2月19日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/8fe87780172339fb5b69/CN103595730A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%AF%86%E6%96%87%E4%BA%91%E5%AD%98%E5%82%A8%E6%96%B9%E6%B3%95%E5%92%8C%E7%B3%BB%E7%BB%9F.pdf?id=EaryCAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3EM_qVuUrLBbTKNK8RiAhYiU-qSg"},"sample_url":"https://www.google.com/patents/reader?id=EaryCAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>