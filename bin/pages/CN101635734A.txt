<!DOCTYPE html><html><head><title>专利 CN101635734A - 非易失性存储介质上的下载数据存储管理方法及装置 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="非易失性存储介质上的下载数据存储管理方法及装置"><meta name="DC.contributor" content="付国为" scheme="inventor"><meta name="DC.contributor" content="彭晓宇" scheme="inventor"><meta name="DC.contributor" content="上海聚力传媒技术有限公司" scheme="assignee"><meta name="DC.date" content="2008-7-22" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供了一种新的用于非易失性存储介质上的下载数据存储管理的方法及装置，其中，当计算机设备磁盘上的预定存储区域的空闲空间不足以保存需要保存的已下载或待下载数据时，计算机设备根据该预定存储空间上已经存储的各个数据集合的重要性信息来从中确定待清除数据，并将确定的待清除数据由该预定存储空间中清除，继而保存那些需要保存的已下载或待下载数据。这样，可以自动保留用户最需要的已存储数据集合、淘汰用户最不需要的已存储数据集合，十分有利于节约有限的非易失性存储介质的存储空间。"><meta name="DC.date" content="2010-1-27"><meta name="citation_patent_publication_number" content="CN:101635734:A"><meta name="citation_patent_application_number" content="CN:200810040838"><link rel="canonical" href="https://www.google.com/patents/CN101635734A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101635734A?cl=zh"/><meta name="title" content="专利 CN101635734A - 非易失性存储介质上的下载数据存储管理方法及装置"/><meta name="description" content="本发明提供了一种新的用于非易失性存储介质上的下载数据存储管理的方法及装置，其中，当计算机设备磁盘上的预定存储区域的空闲空间不足以保存需要保存的已下载或待下载数据时，计算机设备根据该预定存储空间上已经存储的各个数据集合的重要性信息来从中确定待清除数据，并将确定的待清除数据由该预定存储空间中清除，继而保存那些需要保存的已下载或待下载数据。这样，可以自动保留用户最需要的已存储数据集合、淘汰用户最不需要的已存储数据集合，十分有利于节约有限的非易失性存储介质的存储空间。"/><meta property="og:title" content="专利 CN101635734A - 非易失性存储介质上的下载数据存储管理方法及装置"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101635734A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101635734A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=hsh2BwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101635734A&amp;usg=AFQjCNElnyIjtALUB48-3f3pSY3Ri6yyaw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/65bf9c1bfd7218fa8dfd/CN101635734A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/65bf9c1bfd7218fa8dfd/CN101635734A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101635734A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101635734A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101635734A?cl=zh" style="display:none"><span itemprop="description">本发明提供了一种新的用于非易失性存储介质上的下载数据存储管理的方法及装置，其中，当计算机设备磁盘上的预定存储区域的空闲空间不足以保存需要保存的已下载或待下载数据时，计算机设备根据该预定存储空间上已经存...</span><span itemprop="url">https://www.google.com/patents/CN101635734A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101635734A - 非易失性存储介质上的下载数据存储管理方法及装置</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101635734A - 非易失性存储介质上的下载数据存储管理方法及装置" title="专利 CN101635734A - 非易失性存储介质上的下载数据存储管理方法及装置"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101635734 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200810040838</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2010年1月27日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2008年7月22日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2008年7月22日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200810040838.8, </span><span class="patent-bibdata-value">CN 101635734 A, </span><span class="patent-bibdata-value">CN 101635734A, </span><span class="patent-bibdata-value">CN 200810040838, </span><span class="patent-bibdata-value">CN-A-101635734, </span><span class="patent-bibdata-value">CN101635734 A, </span><span class="patent-bibdata-value">CN101635734A, </span><span class="patent-bibdata-value">CN200810040838, </span><span class="patent-bibdata-value">CN200810040838.8</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BB%98%E5%9B%BD%E4%B8%BA%22">付国为</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%BD%AD%E6%99%93%E5%AE%87%22">彭晓宇</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%8A%E6%B5%B7%E8%81%9A%E5%8A%9B%E4%BC%A0%E5%AA%92%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">上海聚力传媒技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101635734A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101635734A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101635734A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (7),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=hsh2BwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200810040838&amp;usg=AFQjCNEylnlGTYjMlki2sEOGSmgJFJiVQQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=hsh2BwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101635734A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHayFTEehpOwXSwYFKP2WEbm_pVJA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT92289448" lang="ZH" load-source="patent-office">非易失性存储介质上的下载数据存储管理方法及装置</invention-title>
      </span><br><span class="patent-number">CN 101635734 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA73455924" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供了一种新的用于非易失性存储介质上的下载数据存储管理的方法及装置，其中，当计算机设备磁盘上的预定存储区域的空闲空间不足以保存需要保存的已下载或待下载数据时，计算机设备根据该预定存储空间上已经存储的各个数据集合的重要性信息来从中确定待清除数据，并将确定的待清除数据由该预定存储空间中清除，继而保存那些需要保存的已下载或待下载数据。这样，可以自动保留用户最需要的已存储数据集合、淘汰用户最不需要的已存储数据集合，十分有利于节约有限的非易失性存储介质的存储空间。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(17)</span></span></div><div class="patent-text"><div mxw-id="PCLM29057445" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种在计算机设备中对基于文件分片的下载数据在非易失性存储介质上的存储进行管理的方法，其中，包括以下步骤：    a.当将在该非易失性存储介质的预定存储空间中保存待下载或已下载的一个或多个数据集合时，获取所述一个或多个数据集合的大小；    b.将所述预定存储空间的空闲空间大小与所述一个或多个数据集合的大小进行比较；    c.当所述预定存储空间的空闲空间大小与所述一个或多个数据集合的大小之差值小于预定阈值时，执行以下过程：    i.根据所述差值和/或所述预定存储空间中的一个或多个已保存数据集合的重要性信息来确定所述一个或多个已保存数据集合中的待清除数据；    ii.将所确定的待清除数据由所述预定存储空间中清除。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 根据权利要求1所述的方法，其特征在于，所述重要性信息包括 以下各项中的4壬一项或4壬多项：-相应已保存凝:据集合的局部访问历史信息； -相应已保存数据集合的自定义优先级信息； -相应已保存凄i据集合的内容属性信息；-用于指示本计算机设备的一个或多个对端设备对相应已保存数据 集合的占用情况的指示信息；-相应已保存数据集合的全局访问历史信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 根据权利要求2所述的方法，其特征在于，当所述重要性信息包 括相应已保存数据集合的访问历史信息时，所述步骤i包括：-由一个或多个较久未被本计算机设备的用户或所述一个或多个对 端设备的用户访问的已保存数据集合中确定所述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 根据权利要求3所述的方法，其特征在于，还包括：述一个或多个已保存数据集合的访问，以记录或更新所述各个已保存内容的访问历史信 息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 根据权利要求2所述的方法，其特征在于，当所述重要性信息包 括相应数据集合的自定义优先级信息时，所述步骤i包括：-由一个或多个具有较低自定义优先级的已保存数据集合中确定所 述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6. 根据权利要求2所述的方法，其特征在于，当所述重要性信息包 括相应已保存数据集合的内容属性信息时，所述步骤i包括：i1. 对所述一个或多个已保存数据集合中的数据进行解析，以得到与 所述各个已保存数据集合相对应的解析结果；i2. 根据预定规则以及所述解析结果，由所述一个或多个已保存数据 集合中确定所述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7. 根据权利要求2所述的方法，其特征在于，当所述重要性信息包 括用于指示其它一个或多个计算机设备对相应已保存数据集合的占有 情况的指示信息时，所述步骤i包括：-由被较多的对端设备占有的一个或多个已保存数据集合中确定所 述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8. 根据权利要求2所述的方法，其特征在于，当所述重要性信息包 括用于指示相应已保存数据集合的全局访问历史信息时，所述步骤i包 括：-获得各个已保存数据集合的全局访问历史信息，其用于指示本计 算机设备及所述各个对端设备对相应已保存数据集合或其在任一对端 设备上的副本的访问频率和/或最近访问时间；-根据所述全局访问历史信息，由其自身或其副本受访问频率较低 和/或较久未被访问的一个或多个已保存数据集合中确定所述待清除数 据。</div>
    </div>
    </div> <div class="claim"> <div num="9" class="claim">
      <div class="claim-text">9. 一种在计算机设备中对基于文件分片的下载数据在非易失性存 储介质上的存储进行管理的管理装置，其中，包括：获取装置，用于当将在该非易失性存储介质的预定存储空间中保存 待下载或已下载的一个或多个数据集合时，获取所述一个或多个数据集合的大小；比较装置，用于将所述预定存储空间的空闲空间大小与所述一个或 多个数据集合的大小进行比较；还包括以下装置，用于当所述预定存储空间的空闲空间大小与所述 一个或多个数据集合的大小之差值小于预定阈值时，执行相应操作： 确定装置，用于根据所述差值和/或所述预定存储空间中的一个或多 个已保存数据集合的重要性信息来确定所述一个或多个已保存数据集 合中的待清除数据；清除装置，用于将所确定的待清除数据由所述预定存储空间中清除。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 根据权利要求9所述的管理装置，其特征在于，所述重要性信 息包括以下各项中的任一项或任多项：-相应已保存数据集合的局部访问历史信息； -相应已保存数据集合的自定义优先级信息； -相应已保存数据集合的内容属性信息；-用于指示本计算机设备的一个或多个对端设备对相应已保存数据 集合的占用情况的指示信息；-相应已保存数据集合的全局访问历史信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11. 根据权利要求IO所述的管理装置，其特征在于，当所述重要性 信息包括相应已保存数据集合的访问历史信息时，所述确定装置还用于，由一个或多个较久未被本计算机设备的用户 或所述一个或多个对端设备的用户访问的已保存数据集合中确定所述 待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12. 根据权利要求IO所述的管理装置，其特征在于，还包括：备的用户对所述一个或多个已保存数据集合的访问，以记录或更新所述 各个已保存内容的访问历史信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13. 根据权利要求IO所述的管理装置，其特征在于，当所述重要性 信息包括相应数据集合的自定义优先级信息时，所述确定装置还用于，由一个或多个具有较低自定义优先级的已保 存数据集合中确定所述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14. 根据权利要求IO所述的管理装置，其特征在于，当所述重要性 信息包括相应已保存数据集合的内容属性信息时，所述确定装置包括：解析装置，用于对所述一个或多个已保存数据集合中的数据进行解 析，以得到与所述各个已保存数据集合相对应的解析结果；第一从确定装置，用于根据预定规则以及所述解析结果，由所述一 个或多个已保存数据集合中确定所述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15. 根据权利要求IO所述的管理装置，其特征在于，当所述重要性 信息包括用于指示其它一个或多个计算机设备对相应已保存数据集合 的占有情况的指示信息时，所述确定装置还用于，由被较多的对端设备占有的一个或多个已保 存数据集合中确定所述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16. 根据权利要求IO所述的管理装置，其特征在于，当所述重要性 信息包括用于指示相应已保存数据集合的全局访问历史信息时，所述确 定装置包括-.获得装置，用于获得各个已保存数据集合的全局访问历史信息，其 用于指示本计算机设备及所述各个对端设备对相应已保存数据集合或 其在任一对端设备上的副本的访问频率和/或最近访问时间；第二从确定装置，用于根据所述全局访问历史信息，由其自身或其 副本受访问频率较低和/或较久未被访问的一个或多个已保存数据集合 中确定所述待清除数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17. &#8212;种计算机设备，其特征在于，包括根据权利要求9至16中任 一项所述的用于对基于文件分片的下载数据在非易失性存储介质上的 存储进行管理的管理装置。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES35535098" lang="ZH" load-source="patent-office" class="description">
    <p>非易失性存储介质上的下载数据存储管理方法及装置</p>
    <p>技术领域</p>
    <p>本发明涉及计算机设备中存储介质的存储空间管理，尤其涉及基于点对点协议的计算机设备中用于对非掉电易失性存储器中下载数据的存储管理方法和装置。</p>
    <p>背景技术</p>
    <p>对等网络也称点对点（P2P)网络，是一种新型的网络传输技术，人们对其作了大量的相关研究，也产生了大量应用于此项技术的相关软件，在实际应用中取得了较好的效果。该技术在流媒体方面的应用使得每个用户在线观看影片的同时，也在上传数据以满足其他用户的视频数据需求。最近几年，视频点播（Video on Demand, VOD)受到了极大的关注，有着广泛的市场前景。据市场研究司InformaTelecoms &amp; Media最新发表的研究寺艮告称，2012年全^求一见频点播服务收入将超过100亿美元，届时，全球将有9.09亿家庭采用视频点播服务或者接近视频点播服务的技术，占全球电视机家庭用户的78%。</p>
    <p>基于P2P的数据下载、视频点播（Video on Demand, VOD )需要依赖非掉电易失性存储器海量和长期的存储能力，目前，使用最广泛的非掉电易失性存储器当属磁盘，譬如个人电脑上的硬盘（Harddisk)、移动设备如个人数字助理（PDA)等上的存储卡，如SD、 CF、MS-PRO (DUO)等等。其中，点播系统要求用户利用计算机设备的非易失性存储介质空间上的部分预定存储空间来存储因VOD业务而下载的视频数据，即使这些数据所对应的视频片段已经由该用户所使用的计算机设备给该用户播放过，换言之，即使这些数据所对应的视频片段对于该用户而言已经不再重要。按照上述要求，理论上计算机设备会将为VOD业务下载的视频</p>
    <p>数据全部存储在本地磁盘上的预定存储空间，随着用户点播过的视频越来越多，即使为此而不断地扩大这一预定存储空间在磁盘上所占的比例，预定存储空间最终还是会被充满。在扩大预定存储空间这一办法既不实用也不经济的情况下，如何优化地利用有限的预定存储空间，就成为了亟待解决的技术问题。</p>
    <p>发明内容</p>
    <p>鉴于现有技术的如上现状，本发明的目的在于提供一种新的用于非易失性存储介质上的下载数据存储管理的方法及装置，其中，当计算机设备磁盘上的预定存储区域的空闲空间不足以保存需要保存的已下载或待下载数据时，计算机设备根据该预定存储空间上已经存储的各个数据集合的重要性信息来从中确定待清除数据，并将确定的待清除数据由该预定存储空间中清除，继而保存那些需要保存的已下载或待下载数据。</p>
    <p>为实现上述目的，根据本发明的第一方面，提供了一种在计算机设备中对基于文件分片的下载数据在非易失性存储介质上的存储进行管</p>
    <p>理的方法，其中，包括以下步骤：当将在该非易失性存储介质的预定存储空间中保存待下载或已下载的一个或多个数据集合时，获取所述一个或多个数据集合的大小；将所述预定存储空间的空闲空间大小与所述一个或多个数据集合的大小进行比较；当所述预定存储空间的空闲空间大小与所述一个或多个数据集合的大小之差值小于预定阈值时，执行以下过程：根据所述差值和/或所述预定存储空间中的一个或多个已保存数据集合的重要性信息来确定所述一个或多个已保存数据集合中的待清除数据；将所确定的待清除数据由所述预定存储空间中清除。</p>
    <p>为实现上述目的，根据本发明的第二方面，提供了一种在计算机设备中对基于文件分片的下载数据在非易失性存储介质上的存储进行管理的管理装置，其中，包括：获取装置，用于当将在该非易失性存储介质的预定存储空间中保存待下载或已下载的 一个或多个数据集合时，获</p>
    <p>7取所述一个或多个数据集合的大小；比较装置，用于将所述预定存储空间的空闲空间大小与所述一个或多个数据集合的大小进行比较；还包括以下装置，用于当所述预定存储空间的空闲空间大小与所述一个或多个数据集合的大小之差值小于预定阈值时，执行相应操作：确定装置，用于根据所述差值和/或所述预定存储空间中的一个或多个已保存数据集合的重要性信息来确定所述一个或多个已保存数据集合中的待清除数据；清除装置，用于将所确定的待清除数据由所述预定存储空间中清除。采用本发明提供的方法和装置，计算机设备能够在其非易失性存储介质的预定存储空间不足以存储待下载或已下载的数据集合时，根据各个已存储的数据集合的重要性信息来智能地从中挑选重要性较低的数据集合，将挑选出的数据集合中的部分或全部数据清除。这十分有利于节约有限的非易失性存储介质的存储空间，本发明的多个优选实施例还使得自动保留用户最需要的已存储数据集合、淘汰用户最不需要的已存储数据集合成为可能。</p>
    <p>附图说明</p>
    <p>通过阅读参照以下附图所作的对非限制性实施例所作的详细描述，本发明的其它特征、目的和优点将会变得更明显：图1为本发明所适用的计算机网络示意图；</p>
    <p>图2为根据本发明的一个具体实施方式的在计算机设备中对基于文件分片的下载数据在非易失性存储介质上的存储进行管理的方法流程图；</p>
    <p>图3为根据本发明的一个具体实施例的磁盘缓存示意图；</p>
    <p>图4为根据本发明的一个具体实施方式的磁盘&#32233;存初始化流程</p>
    <p>图；</p>
    <p>图5为根据本发明的一个具体实施方式的在计算机设备中对基于文件分片的下载数据在非易失性存储介质上的存储进行管理的管理装置框图。</p>
    <p>其中，相同或相似的附图标记表示相同或相似的步骤特征或装置/模块。</p>
    <p>具体实施方式</p>
    <p>本发明的 一 个示例性的实施场景如图1所示的基于P2P协议的计算机网络，其中，该网络包括可以经由互联网（Internet)或企业内部互联网（Intranet)通信的用户设备1: 一台个人台式电脑、用户设备2: &#8212;台笔记本电脑、用户设备3: &#8212;台网络服务器、用户设备4: 一台PDA、用户设备5:机顶盒，且这些设备均支持P2P协议。</p>
    <p>本例中，用户设备1-5互为对端设备，也即，用户设备l-5中的任一方基于P2P协议来对等地为其它四方提供数据分片，并且，其中任一 方基于P2P协议来从其它四方下载数据分片。</p>
    <p>以用户设备l为例，其正在使用基于P2P协议的VOD业务，具体地，用户设备1处的非易失性存储介质为一块120G的硬盘，为适应VOD服务等需要，该硬盘上预先定义了一块预定存储空间，该预定存储空间的示意图如图3所示，总的大小为1G字节。本文中为表述方便，将该硬盘上的预定存储空间称为磁盘&#32233;存，本领域技术人员理解，因本文中所述的；兹盘&#32233;存实际上由^兹盘的一部分组成，因此其存储性质与磁盘一样，为非易失性存储介质。这不同于作为硬盘内部存储和外界接口之间的1&#163;冲器（Cache memory) ， Cache memory贝'J是加装在硬盘上的一块内存芯片，具有断电易失性和极快的存取速度。当然，缓冲器也参与磁盘缓存与外界接口之间的数据交换。磁盘&#32233;存的定义也即初始化将在下文中结合另 一流程图进行描述。</p>
    <p>由图3可见，磁盘&#32233;存中保存了用户设备1处的用户此前点播过的4个多媒体内容的数据，分别为电视剧《Lost》的第4季第1集、动画剧集《火影忍者》第286集、动画剧集《死神》第175集以及动画电影《功夫熊猫》。其中，四个多媒体内容在磁盘&#32233;存共1G的存储空间中总共占用了 800M的空间，空闲空间大小为200M。</p>
    <p>依照本发明，以下任一项都可被称为一个数据集合：</p>
    <p>1)    一个完整的多媒体文件，如电影《功夫熊猫》；2) 多个文件分片；</p>
    <p>3) &#8212;个文件分片。</p>
    <p>本领域技术人员理解，上述各种数据集合的定义方式主要区别在于粒度的大小，在实际应用中，本领域技术人员可以对任一种或任多种粒度下数据集合适用本发明。</p>
    <p>通过本段文字的描述，本领域技术人员可以清楚地知晓步骤S20的具体实施方式，譬如，当本发明被应用于为未下载的数据集合创造存储空间时，步骤S20可以为：通过对发往网卡的数据的监视，判断本用户设备是否发出对某一数据集合的基于P2P的下载请求。而当本发明被应用于为已经下载的数据集合创造存储空间时，步骤S20可以为：判断磁盘&#32233;存写入事件触发器是否被触发，其中，为实现此功能，具体实现本发明的软件或装置需要监视操作系统中与磁盘缓存的读、写有关的事件。具体地，可以定义一个特殊的变量，该变量在磁盘&#32233;存中任意位置处发生写操作时被置为"l",于是，上述软件或装置只需定期检查该变量的取值即可知晓是否发生了在磁盘缓存上的写操作。为了已经查出的写操作不影响下一次判断的结果，可以在知晓发生写操作之后将该变量再归零。此外，还可以使用本领域技术人员熟</p>
    <p>知的上升沿、下降沿判断方式。</p>
    <p>本例中，用户设备1可以通过以下方式来判断本用户设备1是否发出或即将发出对一个数据内容的点播请求，即：用户点击某部影片链接，用户设备l中的交互模块通过对链接内容的解析，得到待播放影片的唯一标识信息，并将其通知给下层点播模块，点播模块根据该标识信息进行p2p下载。于是，在判断出本用户设备1发出了或即将发出对一个数据内容即电影《集结号》的点播请求后，该方法进入步骤S21,其中，用户设备1通过下载并检查该多媒体文件的文件控制信息来获得该电影文件的大小，通常，对于流式和非流式多媒体文件，其文件控制信息均位于整个文件首部的至少一个分片中。当然，特别对于点播业务，网络中应该存在至少一个多媒体服务器，其维护了供用户进行点播的各个多媒体内容的相关信息，其中也包含文件大小，</p>
    <p>10于是，用户设备1也可以利用该文件的文件名作为^:索入口 ，向该多媒体服务器查询相应多媒体文件的大小。</p>
    <p>本例中，步骤S21中获得的电影《集结号》的大小如450M。于是，在此后的步骤S22中，用户设备1将磁盘&#32233;存上的空闲空间大小与未下载待保存的数据集合的大小进行比较。具体地，判断二者之差是否大于一个预定阈值，本例中该预定阈值为O。于是，步骤S21等价于判断200M的空闲空间是否足以保存450M的数据集合。显然，将得到否定的判断结果。</p>
    <p>在对得到否定判断结果之后的处理步骤进行进一步阐述之前，为更清楚地介绍本发明，对本文中已经或即将出现的一些概念稍作解释如下：由于"下载"在严格意义上对应于设备间的数据传递过程，而上</p>
    <p>的下载之前，也可以发生在下载之后，因此此处将《集结号》称为未下载待保存的数据集合，类似地，如果一个数据集合首先下载到用户设备l的本地内存中，尚未保存到磁盘&#32233;存中，而上述比较过程发生在所述下载之后和所述保存之前，则相应数据集合可适当地称为已下载待保存的数据集合。</p>
    <p>回到对步骤流程的描述中，步骤S23中判断出200M的空闲空间不足以保存450M的数据集合后，用户设备l需要一种方法来解决二者之间的矛盾，其中，可以采耳又以下几种方式：</p>
    <p>方式1:随机地从已保存数据集合中删除数据</p>
    <p>参看图3。由于待保存数据集合大小与空闲空间大小之差为250M,因此，在淘汰粒度为文件时，用户设备1将从图3所示的四个已保存数据集合中随机地删除一至多个，被删除的数据集合大小之和大于等于250M。例如，删除《Lost》4-1和《火影忍者》第286集。</p>
    <p>方式2:将待保存的数据删除</p>
    <p>仍参看图3。既然《集结号》过大而无法全部存入磁盘&#32233;存，用户设备1丢弃所有因点播《集结号》而下载的文件分片。优选地，该&#19999;弃过程发生在将该分片中的数据推入播放器进行播放之后，因为在播放之后，相应文件分片中的数据对于用户设备1处的本地用户而言意义不大。当然，用户设备l也可以用《集结号》的多个分片来填充图3所示的空闲空间，当其最终被充满后，再将后续的分片&#19999;弃。此后，如果用户点播其它多媒体内容，下载的文件分片将在其中数据全部推入播放器播放后被&#19999;弃。</p>
    <p>方式2的一个问题在于，由于视频点播一般是一个长期的行为，因此，永远有限的磁盘&#32233;存无法从根本上应付源源不断的待保存数据，于是，总有一个时刻，在该时刻之后，所有下载的数据都将无法保存在磁盘缓存中，也就无法向其他用户提供，或者方便本地用户的再次访问。</p>
    <p>因此，根据本发明的一个优选的实施例，在步骤S23中，用户设备1根据各个已保存数据集合的重要性信息来从中确定待清除的数据。本文中所谓的清除是指将相应的数据移出磁盘&#32233;存，其中包括了在磁盘的其它位置另行保存相应数据的情形，以及将其彻底地删除的情形。</p>
    <p>本文中，重要性信息是一个十分重要的概念，其可以有多种含义，也即，以图3所示的《功夫熊猫》为例，其重要性信息可以包括以下各项中的任一项或者任多项：</p>
    <p>&#9830;   该数据集合的局部访问历史信息</p>
    <p>其用于指示保存在本用户设备的磁盘上的该数据集合在最近一段时间被用户设备1的用户或用户设备2-5访问的记录信息，譬如，记录该数据集合最后一次被访问的时间。不失一般性地，当该数据集合中的部分数据因用户设备1的用户点播该数据集合所对应的多媒体内容而被推入用户设备1的播放器时，即可认为该数据集合被用户设备1的用户所访问，这种^皮本地用户的访问包括第一次下载相应分片时的访问，也即，如果一个数据集合在被首次点播并下载播放后，并未被本地用户再次点播过，则该数据集合的最近被访问时间优选地设置为该数据集合下载的完成时间或开始时间。当用户设备2-5中至少一个用户设备向用户设备1请求下载该数据集合中的至少一个文件分片时，即可认为该数据</p>
    <p>12集合被用户设备l的对端设备的用户所访问。为实现根据局部访问历史信息的已保存数据淘汰策略，用户设备1需要适时地记录本地用户及其</p>
    <p>他用户对本地磁盘上的各数据集合的访问情况，包括但不限于：最后被访问时间、被访问频率。</p>
    <p>本例中，图3所示4个多媒体内容的局部访问历史信息记录形如表</p>
    <p>1:</p>
    <p>表l:局部访问历史信息示意&lt;table&gt;table see original document page 13&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;</p>
    <p>当重要性信息包括且仅包括各个数据集合的局部访问历史信息时，用户设备1将最久未被用户设备1处的用户或其对端设备的用户访问的数据集合中的部分或全部数据清除出所述磁盘&#32233;存，或者，将被访问频率最低的数据集合中的部分或全部数据清除出去。优选地，清除的数据量根据《集结号》与磁盘&#32233;存的空闲空间大小之差来确定，如，清除的数据量减去所述大小之差所得的结果大于等于另一预定阈值。本领域技术人员理解，所述另 一预定阈值可以与步骤S22中所述的预定阈值相同，也可不同。本领域技术人员理解，表l所示仅为示例，不构成对本发明保护范围的限制。</p>
    <p>&#9830;     相应已保存数据集合的自定义优先级信息</p>
    <p>可以理解，   一个用户对于不同的数据集合尤其是不同的多媒体文件</p>
    <p>或许存在偏好，因此可选地，本发明在用户i殳备1处的用户使用输入设备来对一个多媒体文件进行点播时，或者，当用户设备l应用户的点播需求而将一个多J?某体文件下载完成时，通过人机交互界面来提示用户赋予该多媒体文件相应的自定义优先级信息，如高、中、低等。</p>
    <p>本例中，图3所示的各个数据集合的自定义优先级信息如表2所示：</p>
    <p>表2:自定义优先级信息示意</p>
    <p>数据集合名称	自定义优先级</p>
    <p>《Lost》4-1	普通</p>
    <p>《火影忍者》第286集	较高</p>
    <p>《死神》第175集	低</p>
    <p>《功夫熊猫》	最高</p>
    <p>于是，当重要性信息包括且仅包括各个数据集合的自定义优先级信息时，用户设备1将优先级最低的一个或多个数据集合中的部分或全部数据清除出所述^t盘&#32233;存，同样，清除的数据量根据《集结号》与磁盘&#32233;存的空闲空间大小之差来确定，如，清除的数据量减去所述大小之差所得的结果大于等于另一预定阈值。本领域技术人员理解，所述另一预</p>
    <p>定阈值可以与步骤S22中所述的预定阈值相同，也可不同。</p>
    <p>本领域技术人员理解，表2所示仅为示例，不构成对本发明保护范围的限制。</p>
    <p>表2中仅体现了多媒体内容的自定义优先级，如本文中反复强调的，本发明同样适用于其它类型文件的基于P2P的下载和保存过程，因此，用户可以通过使用承载本发明的软件的界面来定义不同类型文件所对应的数据集合在面临淘汰时的优先级，例如，.doc文件的数据集合优先级最高，其次为.exe文件所对应的数据集合，再次为.avi文件所对应的数据集合，然后是.rm及其他类型文件的数据集合。</p>
    <p>上文中，数据集合这一概念体现为一个完整的多媒体文件，事实上，待保存的数据集合也好，被清除的数据集合中的数据也罢，均可以以文件分片为单位，甚至可以是单个的文件分片。换言之，本发明适用于以下情形：以图3所示为例，并考虑一个多媒体文件的各个文</p>
    <p>述步骤S20-S22及相应后续步骤，由于当前200M的空闲空间对于一个文件分片而言是比较大的，因此，多次的步骤S22中均将得到肯定的判断结果，用户设备1将为点播《集结号》而下载的相应文件分片保存在图3所示的空闲空间中，于是，该空闲空间不断地缩小再缩小，最终缩小至小于一个文件分片大小。此时，当再次执行步骤S22时，将得到否定的判断结果，于是，优选地，用户设备l以文件分片的粒度来淘汰已保存的数据。为适应这种淘汰粒度，表l、表2中的最左一栏将细化为各个数据集合中的各个文件分片的编号，而其它表项也将细化为与各个文件分片对应的信息。此处不再赘述。</p>
    <p>下面这一情形尤其适用于本发明为每个文件分片执行所述步骤S20至25的场景，详细描述如下。其中，数据集合的概念优选地应理解为文件分片，且数据集合的重要性信息包含且仅包含：</p>
    <p>&#9830;   相应已保存数据集合的内容属性信息</p>
    <p>上文中，在对根据用户自定义优先级信息进行数据淘汰进行讨论时，谈及了属于不同类型文件的分片可以被用户自定义为不同的优先级。事实上，不同类型文件所对应的数据集合的优先级可以是预先设置好的，不需要用户的认为参与来定义，或者，用户设备l可以根据用户对该设备的使用习惯来自动且智能地为不同类型的文件定义不同的优先级。例如，.exe, .doc等类型文件在承载本发明的应用软件出场时即被分别赋予了不同的优先级，而这些优先级体现为相应已保存数据集合的内容属性信息。在需要进行已保存数据的淘汰时，用户设备l可以根 据不同数据集合的内容属性信息来确定待清除数据。</p>
    <p>根据本领域技术人员的常识，采用P2P技术的下载软件会针对文 件分片的文件名、分片编号和写入的&#32233;存位置来建立索引。由此，本 地用户再次访问相应文件分片时，能够根据该索引快速查询、访问存</p>
    <p>储在磁盘&#32233;存上的数据。同样，在执行步骤S24中的待清除数据的确 定时，用户设备1可以根据各个文件分片所对应的文件名尤其是扩展 名来确定待清除数据。此外，此后执行的步骤S24也可以依赖这些索 引项，来准确地定位待清除文件分片并将其清除。</p>
    <p>根据本发明的一个特殊实施例，其尤其适用于已保存的数据集合 为视频数据分片或其集合的情形。在步骤S24中，用户设备l根据各 个电影、剧集的文件控制信息，确定位于其该文件头部中特定位置的 若干个文件分片作为待清除的数据。这一做法的可行性依赖于， 一般 情形下，电影、剧集的高潮发生在其中后部，删除前部的文件分片对 于整体精彩性的影响较低。</p>
    <p>&#9830;用于指示本计算机设备的一个或多个对端设备对相应已保存数 据集合的占用情况的指示信息</p>
    <p>在P2P网络中，存在用于指示本计算机设备的一个或多个对端设备 对相应已保存数据集合的占用情况的指示信息，例如健康度。健康度 243%表示：将现在正在下载同一文件的用户的已下载数据进行组合，可 以构成2.43个完整文件。于是，当一个文件的健康度大于100%,就存 在理论上完整下载该文件的可能。</p>
    <p>于是，考虑到P2P网络要求各个用户在下载的同时尽量提供上传， 因此， 一个文件的健康度越高，就表示网络中这个文件的可供下载的资 源越丰富，本用户设备将其保留而不删除的意义就越小。于是，将该文 件所对应的全部或部分文件分片确定为待清除数据。</p>
    <p>当然，现有意义上的健康度通常针对一个完整的文件。为以各种形 式实现本发明，还可以灵活地定义各种粒度的数据集合的等价于健康度</p>
    <p>16的指示信息。例如，对于每个文件分片，定义一个信息，该信息指示所 有正在下载该文件的用户设备中共有多少用户设备下载了该文件分片。 于是，已经下载一个文件分片的用户设备越多，用户设备l保留该文件 分片而不将其清除的意义就越小。因此，优选地将其确定为待清除数据。 &#9830;相应已保存数据集合的全局访问历史信息。</p>
    <p>在单独基于此种信息进行已保存数据集合中待清除数据的确定</p>
    <p>时，用户设备1所依赖的是一种全局的统计信息，因此，步骤S23中</p>
    <p>包括一个子步骤，其中，用户设备1向一个负责记录并更新上述统计 信息的网络服务器获取这一信息，并依此进行确定操作。其中，获得 的全局访问历史信息可以多个如表1所示的局部访问历史信息的代数 加和，〗旦也不限于jt匕。</p>
    <p>在本例中，用户设备1将最近一段时间内最少被网络中的用户访 问的数据集合中的部分或全部数据确定为待清除数据，或者，将最后 一次^^皮访问的时间距当前时间最远的 一 个或多个数据集合中的部分 或全部数据确定为待清除数据。</p>
    <p>上文中，针对用户设备1单独地根据一种重要性信息来决定是否 清除一个数据集合的情形进行了阐述。事实上，本发明完全可以适用 于用户设备l联合考虑各个数据集合的各类重要性信息从而决定清除</p>
    <p>哪些数据的情形。在上文的详细介绍的基础上，筒要描述如下：</p>
    <p>本发明可以为 一个数据集合的不同的重要性信息赋予不同的权 重，包括但不限于：</p>
    <p>-相应已保存数据集合的局部访问历史信息：权重为0.5;</p>
    <p>-相应已保存数据集合的自定义优先级信息：权重为0.2;</p>
    <p>-相应已保存数据集合的内容属性信息：权重为0.1;</p>
    <p>-用于指示本计算机设备的一个或多个对端设备对相应已保存数据 集合的占用情况的指示信息：权重为0.1;</p>
    <p>-相应已保存数据集合的全局访问历史信息：权重为0.1。</p>
    <p>在此基础上，根据各个已保存数据集合在各项重要性信息上的排名，为其l!武予一个相应的^皮加片又值。例如，当图3所示的《Lost》4-1、 《火影忍者》第286集、《死神》第175集和《功夫熊猫》在局部访 问历史信息的自定义优先级递增时，各个数据集合的与自定义优先级 信息相对应的被加权值依次为1、 2、 3、 4,也即，越可能被最先清除， 被加权值越低。本领域技术人员理解，已保存数据集合的各类重要性 信息所对应的被加权值的赋值原则应是一致的，且在不同的已保存数 据集合之间，这一原则也应一致。这样，即可根据相应的赋值原则来 选择加权求和后结果最高/最低的数据集合为确定结果。对于上述情 形，即：自定义优先级越低则一皮加权值越低，则应选择加一又求和的结 果最低的数据集合中的部分或全部数据作为待清除数据。</p>
    <p>步骤S25涉及对所确定的待清除数据的清除，其实质内容在上文 中已经详细述及。</p>
    <p>本领域技术人员理解，以上结合VOD进行的描述仅为示例，本 发明并不限于VOD，甚至不限于多媒体数据的下载和保存，事实上， 其适用于任何基于文件分片的下载、保存过程中需要进行已保存数据 的淘汰的场景，甚至可以应用于基于服务器/用户端（C/S)模式的用 户设备。</p>
    <p>在结合图2对本发明所提供的方法进行了较为详细的描述之后， 再来对磁盘&#32233;存的初始化过程进行一些介绍。参看图4,其中提供了 该过程的详细流程。图中未示出基本参数初始化的过程，磁盘&#32233;存空 间预设大小Sl,如图3所示情形中的1G。系统分区预留大小S2，非 系统分区预留大小S3，且满足S2〉S3。</p>
    <p>实际系统中，S1可以取1G， S2可以取1G, S3可以取0.5G。触 发器可以用操作系统提供的消息机制来实现，这在上文中已经提及。 本领域技术人员理解，磁盘&#32233;存通常无需为每次下载来重复执行，因 此，图4所示的流程或许在相当长的时间内仅^丸行一次。</p>
    <p>步骤S30:扫描系统，获得非移动磁盘，如：IDE， SCIC,的逻 辑分区信息，其中，逻辑分区信息主要包括，磁盘是否为系统盘，磁</p>
    <p>18盘空闲空间大小等等。</p>
    <p>步骤S31:在系统分区中选取剩余磁盘空间最大的分区，其剩余 空间大小记为S4;在非系统分区中选取剩余空间最大的分区，其剩 余空间大小记为S5。</p>
    <p>步骤S32:判断是否满足S5:^4且S5-S3〉S1，如果满足，则进入 步骤S33',否则转入步骤S33。</p>
    <p>步骤S33:判断是否满足S4&gt;S5且S4-S2&gt;S1，如果满足进入步 骤S34,否则转入步骤S34'。</p>
    <p>步骤S34，：判断是否满足S5&lt;S4&amp;S4-S2&lt;S1&amp;S5-S3&gt;S1,如果满 足进入步骤S33，，否则转入步骤S35'。</p>
    <p>步骤S33，：在S5所对应的分区上分配Sl的空间作为磁盘&#32233;存空 间。进入步骤S35。</p>
    <p>步骤S34，：在S4所对应的分区上分配Sl的空间作为磁盘&#32233;存空 间，进入步骤S35。</p>
    <p>步骤35，： 向上层模块返回磁盘缓存初始化失败消息。磁盘初始 化过程结束。其中，初始化失败信息可以为一个布尔值，为0。用于 判断初始化是否成功。通常，即使磁盘缓存初始化失败，也不会影响 其他模块运行，用户设备l依然能够下载数据，只是数据下载后推入 播放器中播放后将被直接遗弃，而不会在本地磁盘上保存。</p>
    <p>步骤35:返回磁盘&#32233;存初始化成功消息，磁盘初始化结束。初始 化成功信息可以为一个布尔值，为1。用于判断初始化是否成功。</p>
    <p>以下，结合图5对本发明所提供的管理装置进行详细介绍。该管 理装置50包括：获取装置500、比较装置501、确定装置502、清除 装置503和监视装置504,其中，该确定装置502进一步包括：解析 装置5020、第一从确定装置5021、获得装置5022和第二从确定装置 5023。其中，获取装置500通过下载并检查该多媒体文件的文件控制 信息来获得该电影文件的大小，通常，对于流式和非流式多媒体文件， 其文件控制信息均位于整个文件首部的至少一个分片中。当然，特别对于点播业务，网络中应该存在至少一个多媒体服务器，其维护了供 用户进行点播的各个多媒体内容的相关信息，其中也包含文件大小，</p>
    <p>于是，用户i殳备1也可以利用该文件的文件名作为^r索入口 ，向该多 媒体服务器查询相应多媒体文件的大小。</p>
    <p>本例中，获取装置500所获得的电影《集结号》的大小如450M, 并将该大小信息告知比较装置501,于是，此后由比较装置501来将 磁盘缓存上的空闲空间大小与未下载待保存的数据集合的大小进行 比较。具体地，判断二者之差是否大于一个预定阈值，本例中该预定 阈值为0。于是，比较装置501所执行的比较步骤等价于判断200M 的空闲空间是否足以保存450M的数据集合。显然，将得到否定的判 断结果。</p>
    <p>由比较装置501判断出200M的空闲空间不足以保存450M的数 据集合后，用户设备1需要一种方法来解决二者之间的矛盾，其中， 可以采耳又以下几种方式：</p>
    <p>方式l:随机地从已保存数据集合中删除数据</p>
    <p>参看图3。由于待保存数据集合大小与空闲空间大小之差为 250M,因此，在淘汰粒度为文件时，用户设备1将&#20034;人图3所示的四 个已保存数据集合中随机地删除一至多个，被删除的数据集合大小之 和大于等于250M。例如，删除《Lost》4-1和《火影忍者》第286集。</p>
    <p>方式2:将待保存的数据删除</p>
    <p>仍参看图3。既然《集结号》过大而无法全部存入磁盘&#32233;存，用 户设备1&#19999;弃所有因点播《集结号》而下载的文件分片。优选地，该 &#19999;弃过程发生在将该分片中的数据推入播放器进行播放之后，因为在 播放之后，相应文件分片中的数据对于用户设备1处的本地用户而言 意义不大。当然，用户设备l也可以用《集结号》的多个分片来填充 图3所示的空闲空间，当其最终被充满后，再将后续的分片&#19999;弃。此 后，如果用户点播其它多媒体内容，下载的文件分片将在其中数据全 部推入播放器播放后被丢弃。</p>
    <p>方式2的一个问题在于，由于视频点播一般是一个长期的行为，</p>
    <p>20因此，永远有限的磁盘&#32233;存无法从根本上应付源源不断的待保存数 据，于是，总有一个时刻，在该时刻之后，所有下载的数据都将无法 保存在磁盘&#32233;存中，也就无法向其他用户提供，或者方便本地用户的 再次访问。</p>
    <p>因此，根据本发明的一个优选的实施例，用户设备l处的确定装</p>
    <p>置502根据各个已保存数据集合的重要性信息来从中确定待清除的数 据。本文中所谓的清除是指将相应的数据移出磁盘&#32233;存，其中包括了 在磁盘的其它位置另行保存相应数据的情形，以及将其彻底地删除的 情形。</p>
    <p>本文中，重要性信息是一个十分重要的概念，其可以有多种含义， 也即，以图3所示的《功夫熊猫》为例，其重要性信息可以包括以下 各项中的任一项或者任多项：</p>
    <p>&#9830; 该数据集合的局部访问历史信息</p>
    <p>其用于指示保存在本用户设备的磁盘上的该数据集合在最近一段 时间一皮用户设备1的用户或用户设备2-5访问的记录信息，譬如，记录 该数据集合最后一次被访问的时间。不失一般性地，当该数据集合中的 部分数据因用户设备1的用户点播该数据集合所对应的多媒体内容而被 推入用户设备1的播放器时，即可认为该数据集合被用户设备1的用户 所访问，这种被本地用户的访问包括第一次下载相应分片时的访问，也 即，如果一个数据集合在被首次点播并下载播放后，并未被本地用户再 次点播过，则该数据集合的最近被访问时间优选地设置为该数据集合下 载的完成时间或开始时间。当用户设备2-5中至少一个用户设备向用户 设备1请求下载该数据集合中的至少一个文件分片时，即可认为该数据 集合被用户设备1的对端设备的用户所访问。为实现根据局部访问历史 信息的已保存数据淘汰策略，用户设备1处的监视装置504负责适时地 记录本地用户及其他用户对本地磁盘上的各数据集合的访问情况，包括 但不限于：最后&#31056;:访问时间、^皮访问频率。</p>
    <p>本例中，图3所示4个多媒体内容的局部访问历史信息记录形如上 文中的表1所示。当重要性信息包括且仅包括各个数据集合的局部访问历史信息时， 用户设备1处的确定装置502将最久未被用户设备1处的用户或其对端 设备的用户访问的数据集合中的部分或全部数据确定为待清除数据，或 者，将被访问频率最低的数据集合中的部分或全部数据确定为待清除数 据。优选地，待清除数据的数据量根据《集结号》与磁盘&#32233;存的空闲空 间大小之差来确定，如，待清除数据的数据量减去所述大小之差所得的 结果大于等于另一预定阈值。本领域技术人员理解，所述另一预定阈值 可以上文中所述的预定阈值相同，也可不同。本领域技术人员理解，表 1所示仅为示例，不构成对本发明保护范围的限制。</p>
    <p>&#9830;     相应已保存数据集合的自定义优先级信息</p>
    <p>可以理解， 一个用户对于不同的数据集合尤其是不同的多媒体文件 或许存在偏好，因此可选地，本发明在用户设备1处的用户使用输入设 备来对一个多媒体文件进行点播时，或者，当用户设备l应用户的点播 需求而将一个多媒体文件下载完成时，通过人机交互界面来提示用户赋 予该多媒体文件相应的自定义优先级信息，如高、中、低等。</p>
    <p>本例中，图3所示的各个数据集合的自定义优先级信息如上文中的 表2所示。</p>
    <p>于是，当重要性信息包括且仅包括各个数据集合的自定义优先级信 息时，用户设备1处的确定装置502将优先级最低的一个或多个数据集 合中的部分或全部数据确定为待清除数据。同样，待清除数据的数据量 根据《集结号》与磁盘&#32233;存的空闲空间大小之差来确定，如，待清除数 据的数据量减去所述大小之差所得的结果大于等于另一预定阈值。本领 域技术人员理解，所述另 一预定阈值可以上文中所述的预定阈值相同， 也可不同。</p>
    <p>本领域技术人员理解，表2所示仅为示例，不构成对本发明保护范 围的限制。</p>
    <p>表2中仅体现了多媒体内容的自定义优先级，如本文中反复强调的， 本发明同样适用于其它类型文件的基于P2P的下载和保存过程，因此， 用户可以通过使用承载本发明的软件的界面来定义不同类型文件所对应的数据集合在面临淘汰时的优先级，例如，.doc文件的数据集合优先 级最高，其次为.exe文件所对应的数据集合，再次为.avi文件所对应的 数据集合，然后是.rm及其他类型文件的数据集合。</p>
    <p>上文中，数据集合这一概念体现为一个完整的多媒体文件，事实 上，待保存的数据集合也好，被清除的数据集合中的数据也罢，均可 以以文件分片为单位，甚至可以是单个的文件分片。换言之，本发明 适用于以下情形：以图3所示为例，并考虑一个多媒体文件的各个文 件分片大小相同，其中，获取装置500、比较装置501以及确定装置 502为每个待下载的文件分片单独执行相应操作，其它装置也相应地 执行后续操作。由于当前200M的空闲空间对于一个文件分片而言是 比较大的，因此，比较装置501多次比较均得到肯定的结果，即所述 空闲空间大小足以保存待保存的文件分片，用户设备1将为点播《集 结号》而下载的相应文件分片保存在图3所示的空闲空间中，于是， 该空闲空间不断地缩小再缩小，最终缩小至小于一个文件分片大小。 此时，当比较装置501再次进行比较时，将得到否定的判断结果，于 是，优选地，确定装置502以文件分片的粒度来确定待清除数据。为 适应这种淘汰粒度，表l、表2中的最左一栏将细化为各个数据集合 中的各个文件分片的编号，而其它表项也将细化为与各个文件分片对 应的信息。此处不再赘述。</p>
    <p>&#9830;相应已保存数据集合的内容属性信息</p>
    <p>上文中，在对根据用户自定义优先级信息进行数据淘汰进行讨论 时，谈及了属于不同类型文件的分片可以被用户自定义为不同的优先 级。事实上，不同类型文件所对应的数据集合的优先级可以是预先设置 好的，不需要用户的认为参与来定义，或者，用户设备l可以根据用户 对该设备的使用习惯来自动且智能地为不同类型的文件定义不同的优 先级。例如，.exe, .doc等类型文件在承载本发明的应用软件出场时即 被分别赋予了不同的优先级，而这些优先级体现为相应已保存数据集合的内容属性信息。在需要进行已保存数据的淘汰时，可以由解析装置 5020来对各个已保存的数据集合的内容进行解析，并由第一从确定装置</p>
    <p>5021来根据不同数据集合的内容属性信息来确定待清除数据。</p>
    <p>根据本领域技术人员的常识，采用P2P技术的下载软件会针对文</p>
    <p>件分片的文件名、分片编号和写入的缓存位置来建立索引。由此，本 地用户再次访问相应文件分片时，能够根据该索引快速查询、访问存</p>
    <p>储在磁盘上的数据。同样，解析装置5020可以解析出已保存数据集 合（文件）的文件名，并由第一从确定装置5021来根据各个文件分 片所对应的文件名尤其是扩展名来确定待清除数据。此后，清除装置 503也可以依赖这些索引项来准确地定位待清除文件分片并将其清 除。</p>
    <p>根据本发明的 一个特殊实施例，其尤其适用于已保存的数据集合 为视频数据分片或其集合的情形。解析装置5020根据各个电影、剧 集的文件控制信息，辅助第一从确定装置5021确定位于其该文件头 部中特定位置的若干个文件分片作为待清除的数据。这 一 做法的可行 性依赖于， 一般情形下，电影、剧集的高潮发生在其中后部，删除前 部的文件分片对于整体精彩性的影响较低。</p>
    <p>&#9830;用于指示本计算机设备的一个或多个对端设备对相应已保存数 据集合的占用情况的指示信息</p>
    <p>在P2P网络中，存在用于指示本计算机设备的一个或多个对端设备 对相应已保存数据集合的占用情况的指示信息，例如健康度。健康度 243%表示：将现在正在下载同一文件的用户的已下载数据进行组合，可 以构成2.43个完整文件。于是，当一个文件的健康度大于100%，就存 在理论上完整下载该文件的可能。</p>
    <p>于是，考虑到P2P网络要求各个用户在下载的同时尽量提供上传， 因此， 一个文件的健康度越高，就表示网络中这个文件的可供下载的资 源越丰富，本用户设备将其保留而不删除的意义就越小。于是，将该文 件所对应的全部或部分文件分片确定为待清除数据。</p>
    <p>24当然，现有意义上的健康度通常针对一个完整的文件。为以各种形 式实现本发明，还可以灵活地定义各种粒度的数据集合的等价于健康度 的指示信息。例如，对于每个文件分片，定义一个信息，该信息指示所 有正在下载该文件的用户设备中共有多少用户设备下载了该文件分片。 于是，已经下载一个文件分片的用户设备越多，用户设备l保留该文件 分片而不将其清除的意义就越小。因此，优选地将其确定为待清除数据。</p>
    <p>&#9830;相应已保存数据集合的全局访问历史信息。</p>
    <p>在单独基于此种信息进行已保存数据集合中待清除数据的确定 时，用户设备1所依赖的是一种全局的统计信息，因此，由确定装置</p>
    <p>502中的一个获得装置5022来向一个负责记录并更新上述统计信息 的网络服务器获得这一信息，并由第二从确定装置5023依此进行确 定操作。其中，获得的全局访问历史信息可以多个如表1所示的局部</p>
    <p>访问历史信息的代数加和，但也不限于此。</p>
    <p>在本例中，第二从确定装置5023将最近一段时间内最少被网络 中的用户访问的数据集合中的部分或全部数据确定为待清除数据，或 者，将最后 一次被访问的时间距当前时间最远的 一个或多个数据集合 中的部分或全部数据确定为待清除数据。</p>
    <p>上文中，针对用户设备1单独地根据一种重要性信息来决定是否 清除一个数据集合的情形进行了阐述。事实上，本发明完全可以适用 于确定装置502联合考虑各个数据集合的各类重要性信息从而决定清 除哪些数据的情形。在上文的详细介绍的基础上，简要描述如下：</p>
    <p>本发明可以为 一个数据集合的不同的重要性信息赋予不同的权 重，包括但不限于：</p>
    <p>-相应已保存数据集合的局部访问历史信息：权重为0.5;</p>
    <p>-相应已保存数据集合的自定义优先级信息：权重为0.2;</p>
    <p>-相应已保存数据集合的内容属性信息：权重为0.1;</p>
    <p>-用于指示本计算机设备的一个或多个对端设备对相应已保存数据 集合的占用情况的指示信息：权重为0.1;-相应已保存数据集合的全局访问历史信息：权重为O.l。 在此基础上，根据各个已保存数据集合在各项重要性信息上的排 名，为其赋予一个相应的被加权值。例如，当图3所示的《Lost》4-1、 《火影忍者》第286集、《死神》第175集和《功夫熊猫》在局部访 问历史信息的自定义优先级递增时，各个数据集合的与自定义优先级 信息相对应的被加权值依次为1、 2、 3、 4,也即，越可能被最先清除， 被加权值越低。本领域技术人员理解，已保存数据集合的各类重要性 信息所对应的被加权值的赋值原则应是一致的，且在不同的已保存数 据集合之间，这一原则也应一致。这样，即可才艮据相应的赋值原则来 选择加权求和后结果最高/最低的数据集合为确定结果。对于上述情 形，即：自定义优先级越低则被加4又值越低，则应选择加权求和的结 果最低的数据集合中的部分或全部数据作为待清除数据。</p>
    <p>清除装置503涉及对所确定的待清除数据的清除，其实质内容在 上文中已经详细述及。</p>
    <p>以上对本发明的具体实施例进行了描述。需要理解的是，本发明 并不局限于上述特定实施方式，本领域技术人员可以在所附权利要求 的范围内做出各种变形或修改。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101819561A?cl=zh">CN101819561A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年4月21日</td><td class="patent-data-table-td patent-date-value">2010年9月1日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">文件下载方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102130963A?cl=zh">CN102130963A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年4月8日</td><td class="patent-data-table-td patent-date-value">2011年7月20日</td><td class="patent-data-table-td ">传聚互动(北京)科技有限公司</td><td class="patent-data-table-td ">客户端网络中存储文件的方法、装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102130963B?cl=zh">CN102130963B</a></td><td class="patent-data-table-td patent-date-value">2011年4月8日</td><td class="patent-data-table-td patent-date-value">2014年2月5日</td><td class="patent-data-table-td ">北京奇艺世纪科技有限公司</td><td class="patent-data-table-td ">客户端网络中存储文件的方法、装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102222094A?cl=zh">CN102222094A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年6月8日</td><td class="patent-data-table-td patent-date-value">2011年10月19日</td><td class="patent-data-table-td ">上海聚力传媒技术有限公司</td><td class="patent-data-table-td ">一种用于基于资源利用率淘汰资源文件的设备和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103049502A?cl=zh">CN103049502A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年12月10日</td><td class="patent-data-table-td patent-date-value">2013年4月17日</td><td class="patent-data-table-td ">航天数字传媒有限公司</td><td class="patent-data-table-td ">一种卫星用户终端的存储器管理方法和管理装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103051975A?cl=zh">CN103051975A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年12月31日</td><td class="patent-data-table-td patent-date-value">2013年4月17日</td><td class="patent-data-table-td ">乐视网信息技术（北京）股份有限公司</td><td class="patent-data-table-td ">一种p2p缓存数据淘汰方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2011130974A1?cl=zh">WO2011130974A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年8月9日</td><td class="patent-data-table-td patent-date-value">2011年10月27日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">文件下载方法及系统</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=hsh2BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029080000">H04L29/08</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2010年1月27日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年9月7日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/65bf9c1bfd7218fa8dfd/CN101635734A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E9%9D%9E%E6%98%93%E5%A4%B1%E6%80%A7%E5%AD%98%E5%82%A8%E4%BB%8B%E8%B4%A8%E4%B8%8A%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%95%B0.pdf?id=hsh2BwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1wHZPCUDoeg1ITgGtwgRgodHxfIA"},"sample_url":"https://www.google.com/patents/reader?id=hsh2BwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>