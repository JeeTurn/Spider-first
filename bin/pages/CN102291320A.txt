<!DOCTYPE html><html><head><title>专利 CN102291320A - Mac地址学习方法和边缘设备 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="Mac地址学习方法和边缘设备"><meta name="DC.contributor" content="周万" scheme="inventor"><meta name="DC.contributor" content="杭州华三通信技术有限公司" scheme="assignee"><meta name="DC.date" content="2011-9-29" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供了MAC地址学习方法和边缘设备。ED在控制平面中的会话缓存表项包括以下内容时：ARP请求报文的目标端IP地址、初始发送端IP地址、初始发送端MAC地址、与初始发送端MAC地址对应的出端口、ARP应答报文的初始发送端MAC地址和与该初始发送端MAC地址对应的出端口，将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，或者，将会话缓存表项中的本地MAC地址通过会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面。"><meta name="DC.date" content="2011-12-21"><meta name="DC.relation" content="CN:101075933:A" scheme="references"><meta name="DC.relation" content="CN:101098291:A" scheme="references"><meta name="DC.relation" content="CN:101488964:A" scheme="references"><meta name="DC.relation" content="CN:102118316:A" scheme="references"><meta name="citation_patent_publication_number" content="CN:102291320:A"><meta name="citation_patent_application_number" content="CN:201110291273"><link rel="canonical" href="https://www.google.com/patents/CN102291320A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102291320A?cl=zh"/><meta name="title" content="专利 CN102291320A - Mac地址学习方法和边缘设备"/><meta name="description" content="本发明提供了MAC地址学习方法和边缘设备。ED在控制平面中的会话缓存表项包括以下内容时：ARP请求报文的目标端IP地址、初始发送端IP地址、初始发送端MAC地址、与初始发送端MAC地址对应的出端口、ARP应答报文的初始发送端MAC地址和与该初始发送端MAC地址对应的出端口，将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，或者，将会话缓存表项中的本地MAC地址通过会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面。"/><meta property="og:title" content="专利 CN102291320A - Mac地址学习方法和边缘设备"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102291320A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102291320A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102291320A&amp;usg=AFQjCNG1Mbv5aXczeAjFa81yMVYFenfekQ" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/c735534e1619f3a644b2/CN102291320A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/c735534e1619f3a644b2/CN102291320A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102291320A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102291320A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN102291320A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN102291320B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102291320A?cl=zh" style="display:none"><span itemprop="description">本发明提供了MAC地址学习方法和边缘设备。ED在控制平面中的会话缓存表项包括以下内容时：ARP请求报文的目标端IP地址、初始发送端IP地址、初始发送端MAC地址、与初始发送端MAC地址对应的出端口、ARP应答报文的初始发送端MAC地...</span><span itemprop="url">https://www.google.com/patents/CN102291320A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102291320A - Mac地址学习方法和边缘设备</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102291320A - Mac地址学习方法和边缘设备" title="专利 CN102291320A - Mac地址学习方法和边缘设备"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102291320 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201110291273</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2011年12月21日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年9月29日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年9月29日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102291320B?hl=zh-CN&amp;cl=zh">CN102291320B</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2761830A1?hl=zh-CN&amp;cl=zh">EP2761830A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2761830A4?hl=zh-CN&amp;cl=zh">EP2761830A4</a>, </span><span class="patent-bibdata-value"><a href="/patents/US9197721?hl=zh-CN&amp;cl=zh">US9197721</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20140198808?hl=zh-CN&amp;cl=zh">US20140198808</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20160044145?hl=zh-CN&amp;cl=zh">US20160044145</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2013044821A1?hl=zh-CN&amp;cl=zh">WO2013044821A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201110291273.2, </span><span class="patent-bibdata-value">CN 102291320 A, </span><span class="patent-bibdata-value">CN 102291320A, </span><span class="patent-bibdata-value">CN 201110291273, </span><span class="patent-bibdata-value">CN-A-102291320, </span><span class="patent-bibdata-value">CN102291320 A, </span><span class="patent-bibdata-value">CN102291320A, </span><span class="patent-bibdata-value">CN201110291273, </span><span class="patent-bibdata-value">CN201110291273.2</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%91%A8%E4%B8%87%22">周万</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%9D%AD%E5%B7%9E%E5%8D%8E%E4%B8%89%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">杭州华三通信技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102291320A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102291320A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102291320A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (4),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (9),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (11),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201110291273&amp;usg=AFQjCNGfg78atHCBzroQBNaK5apIUr3_tg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102291320A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNH1uNXwtCK5uC5HWIC_TJtDWU9TGg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT106021728" lang="ZH" load-source="patent-office">Mac地址学习方法和边缘设备</invention-title>
      </span><br><span class="patent-number">CN 102291320 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA87790045" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供了MAC地址学习方法和边缘设备。ED在控制平面中的会话缓存表项包括以下内容时：ARP请求报文的目标端IP地址、初始发送端IP地址、初始发送端MAC地址、与初始发送端MAC地址对应的出端口、ARP应答报文的初始发送端MAC地址和与该初始发送端MAC地址对应的出端口，将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，或者，将会话缓存表项中的本地MAC地址通过会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(13)</span></span></div><div class="patent-text"><div mxw-id="PCLM38313864" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种MAC地址学习方法，该方法应用于数据中心二层虚拟互联网络中的边缘设备 ED，其特征在于，该方法包括：A，侦听ARP请求报文，在控制平面建立包含以下内容的会话缓存表项：ARP请求报文的目标端Target IP地址、初始发送端knder IP地址、初始发送端MAC地址、以及与初始发送端MAC地址对应的出端口；B，侦听ARP应答报文，在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口，利用该会话缓存表项中与ARP请求报文的初始发送端MAC地址对应的出端口转发该ARP应答报文，执行步骤C;C，将该会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，将该会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面，以指导数据报文的转发。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的方法，其特征在于，步骤C中，会话缓存表项中ARP请求报文的初始发送端MAC地址和ARP应答报文的初始发送端MAC地址中，有一个为本地MAC地址， 对应的出端口为本地ED接入该本地MAC地址的本地端口，另一个为异地ED接入的异地MAC 地址，对应的出端口为本地ED与异地ED之间的虚拟以太网链路。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求1或2所述的方法，其特征在于，步骤A中，在建立会话缓存表项后， 进一步设置该会话缓存表项的状态为第一状态，用于表示MAC地址学习会话正处于建立阶段；步骤B中，在会话缓存表项增加ARP应答报文的初始发送端MAC地址和第二出端口后， 进一步将该会话缓存表项的状态从第一状态更新为第二状态，用于表示MAC地址学习会话已被建立；步骤C中的会话缓存表项为第二状态的会话缓存表项。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求3所述的方法，其特征在于，每一站点的ED进一步执行以下步骤：D，接收发生站点迁移的主机广播的免费ARP报文，并在本地会话缓存表项中找到包含该主机IP地址的会话缓存表项，如果该找到的会话缓存表项当前被设置为第一状态，则根据接收到该免费ARP报文的端口更新该找到的会话缓存表项，如果该找到的会话缓存表项当前被设置为第二状态，则在所述主机当前为本地接入时，删除该找到的会话缓存表项，在所述主机当前为异地站点接入时，更新该找到的会话缓存表项。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求4所述的方法，其特征在于，所述根据接收到免费ARP报文的端口更新该找到的会话缓存表项包括：如果找到的会话缓存表项中不存在所述主机的MAC地址，则在找到的会话缓存表项中增加所述主机的MAC地址和与该主机MAC地址对应的出端口，并将该会话缓存表项的状态更新为第二状态，返回步骤C;如果找到的会话缓存表项中存在所述主机的MAC地址，则将该会话缓存表项中与该主机MAC地址对应的出端口更新为当前接收到免费ARP报文的端口。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求4所述的方法，其特征在于，所述在主机当前为异地站点接入时，更新该找到的会话缓存表项包括：如果该找到的会话缓存表项中所述主机的MAC地址对应的出端口为本地端口，则删除该找到的会话缓存表项；如果该找到的会话缓存表项中所述主机的MAC地址对应的出端口为虚拟以太网链路， 则将该会话缓存表项中与该MAC地址对应的出端口更新为当前接收到免费ARP报文的虚拟以太网链路。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求3所述的方法，其特征在于，该方法进一步包括：在将会话缓存表项的状态设置为第一状态时，启动该会话缓存表项对应的用于标识该会话缓存表项为第一状态的第一定时器；在将会话缓存表项的状态从第一状态更新为第二状态时，关闭该第一定时器，并启动该会话缓存表项对应的用于标识该会话缓存表项为第二状态的第二定时器；当启动的第一定时器或者第二定时器超时时，删除该超时的定时器对应的会话缓存表项，其中，所述第一定时器和所述第二定时器的超时时间无关。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8.	一种边缘设备，该边缘设备为数据中心二层虚拟互联网络的任一边缘设备ED，其特征在于，该ED包括：第一侦听单元，用于侦听ARP请求报文，在控制平面建立包含以下内容的会话缓存表项：该ARP请求报文的目标端Target IP地址、初始发送端knder IP地址、初始发送端MAC 地址、以及与初始发送端MAC地址对应的出端口 ；第二侦听单元，用于侦听ARP应答报文，在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口，利用该会话缓存表项中与ARP请求报文的初始发送端MAC地址对应的出端口转发该ARP应答报文，并发送通知给第一处理单元；第一处理单元，用于接收来自所述第二侦听单元的通知后，将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC 地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面，以指导数据报文转发。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求8所述的边缘设备，其特征在于，第一侦听单元在建立会话缓存表项后，进一步设置该会话缓存表项的状态为第一状态，用于表示MAC地址学习会话正处于建立阶段；第二侦听单元在对会话缓存表项增加ARP应答报文的初始发送端MAC地址和第二出端口后，进一步设置该会话缓存表项的状态为第二状态，用于表示MAC地址学习会话已被建立；所述第一处理单元处理的会话缓存表项为第二状态的会话缓存表项。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求9所述的边缘设备，其特征在于，所述边缘设备进一步包括：第二处理单元、第一更新单元和第二更新单元，其中，所述第二处理单元用于接收发生站点迁移的主机广播的免费ARP报文，并在本地会话缓存表项中找到包含该主机IP地址的会话缓存表项，如果该找到的会话缓存表项当前被设置为第一状态，则发送第一更新通知给第一更新单元，如果该找到的会话缓存表项当前被设置为第二状态，则发送第二更新通知给第二更新单元；所述第一更新单元用于接收到所述第一更新通知时，根据接收到该免费ARP报文的端口更新该找到的会话缓存表项；所述第二更新单元用于接收到所述第二更新通知时，如果所述主机当前为本地接入， 则删除该找到的会话缓存表项，如果所述主机当前为异地站点接入，则更新该找到的会话缓存表项。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求10所述的边缘设备，其特征在于，所述第一更新单元在找到的会话缓存表项不存在所述主机的MAC地址时，在找到的会话缓存表项中增加所述主机的MAC地址和与该主机MAC地址对应的出端口，并将该会话缓存表项的状态更新为第二状态，触发第一处理单元执行相应操作，在该找到的会话缓存表项中存在所述主机的MAC地址时，则将该会话缓存表项中与该主机MAC地址对应的出端口更新为当前接收到免费ARP报文的端</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求10所述的边缘设备，其特征在于，所述第二更新单元在找到的会话缓存表项中所述主机的MAC地址对应的出端口为本地端口时，删除该找到的会话缓存表项，在该找到的会话缓存表项中所述主机的MAC地址对应的出端口为虚拟以太网链路时， 将该会话缓存表项中与该MAC地址对应的出端口更新为当前接收到免费ARP报文的虚拟以太网链路。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求9至12任一所述的边缘设备，其特征在于，该边缘设备进一步包括： 定时器控制单元，用于在所述第一侦听单元将会话缓存表项的状态设置为第一状态时，启动该会话缓存表项对应的用于标识该会话缓存表项为第一状态的第一定时器；用于在第二侦听单元将会话缓存表项的状态从第一状态更新为第二状态时，关闭该第一定时器，并启动该会话缓存表项对应的用于标识该会话缓存表项为第二状态的第二定时器，并在启动的第一定时器或第二定时器超时时，删除该超时的定时器对应的会话缓存表项，其中，所述第一定时器和所述第二定时器的超时时间无关。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES43846195" lang="ZH" load-source="patent-office" class="description">
    <p>MAC地址学习方法和边缘设备</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及网络通信技术，特别涉及MAC地址学习方法和边缘设备。 背景技术</p>
    <p>[0002]	为了更好地提供服务，提供商通常在异地部署多个数据中心实现负载分担和高可靠性，并实现虚拟机在各个数据中心之间的自由迁移。由于虚拟机迁移过程对用户透明，不能改变IP地址，所以必须在分布于异地的数据中心之间实现二层虚拟互联。</p>
    <p>[0003]	参见图1，图1为现有数据中心二层虚拟互联组网示意图。在图1所示的组网中存在以下三个站点：站点（Site)l、Site 2和Site 3。各个站点均部署了数据中心，各自通过自身的边缘设备（ED =Edge Device)连接至IP核心网络，以实现各个站点之间的二层互联。</p>
    <p>[0004]	在图1所示的组网中，每一 ED都要学习各个站点的所有VPN下所有主机的MAC地址。</p>
    <p>[0005]	参见图2，图2为现有MAC地址学习示意图。假设初始时，图2中的EDI、ED2、ED3 的MAC转发表均为空。如果EDl下VPm内的主机A需要与ED3下VPm内的主机B通信， 其中，主机A的MAC地址为MAC_A，IP地址为IP_A (具体可为1. 1. 1. 1)，该主机A只知道主机B的IP地址（即IP_B，比如为1. 1. 1. 2)，但不知道主机B的MAC地址，基于此，就需要学习主机B的MAC地址，之后利用学习到的主机B的MAC地址与主机B进行正常通信。</p>
    <p>[0006]	其中，现有的MAC地址学习方法包括：</p>
    <p>[0007]	主机A首先向VLAN内广播ARP请求报文以学习主机B的MAC地址。其中，该ARP 请求报文中的目标端（Target) IP地址为IP_B，初始发送端（Sender) IP地址为IP_A，初始发送端MAC地址为MAC_A。其中，ARP请求报文的初始发送端为最先发送该ARP请求报文的设备。</p>
    <p>[0008]	该ARP请求报文会先到达主机A所在站点的ED1，当EDl收到主机A广播的ARP 请求报文后学习该ARP请求报文的初始发送端MAC地址即MAC_A，通过ISIS将该学习到的 MAC_A通告给ED2和ED3，并在本地MAC转发表中增加关于MAC_A的表项：VPN为VPNl，MAC 地址为MAC_A，出接口为Portl (其为EDl收到ARP请求报文的接口，由于主机A与EDl处于同一站点，因此，该Portl为本地端口）。</p>
    <p>[0009]	该ARP请求报文也会到达ED2、ED3。当ED2、ED3接收到ARP请求报文后，向其下的主机继续广播该ARP请求报文。</p>
    <p>[0010]	并且，ED2、ED3也会学习到EDl通过ISIS通告的MAC_A。当ED2、ED3学习到EDl 通过ISIS通告的MAC_A时，会在本地MAC转发表中增加关于该MAC_A的表项。其中，ED2在本地MAC转发表中增加的关于该MAC_A的表项为：VPN为VPm，MAC地址为MAC_A，出接口为 Linkl (其为ED2学习到该MAC_A的端口，由于EDl与ED2处于不同站点，因此，该端口具体为ED2与EDl之间的虚拟以太网链路）。ED3在本地MAC转发表中增加的关于该MAC_A的表项为：VPN为VPm，MAC地址为MAC_A，出接口为Link2 (其为ED3学习到该MAC_A的端口， 由于EDl与ED3处于不同站点，因此，该端口具体为ED3与EDl之间的虚拟以太网链路）。[0011]	主机B收到ARP请求报文后，发现该ARP请求报文的目标端IP地址为本机的IP 地址，会回应ARP应答报文。该ARP应答报文中的目标端MAC地址为MAC_A，目标端IP地址为IP_A，初始发送端IP地址为IP_B、初始发送端MAC地址为MAC_B。其中，ARP应答报文的初始发送端为最先发送该ARP应答报文的设备。</p>
    <p>[0012]	至于其他主机，由于ARP请求报文的目标端IP地址不是自身IP地址，其不对该 ARP请求报文作任何回应。</p>
    <p>[0013]	主机B发送的ARP应答报文会先到达其所在站点的ED3，当ED3收到ARP应答报文后，会学习ARP应答报文的初始发送端MAC地址即MAC_B，并在本地MAC转发表中增加关于该MAC_B的表项：VPN为VPm，MAC地址为MAC_B，出接口为portl (其为ED3收到该ARP应答报文的本地端口）。</p>
    <p>[0014]	ED3在本地MAC表中查找到目标端IP地址对应的出端口。因为该目标端IP地址为主机A的IP地址，根据ED3之前基于主机A广播的ARP请求报文在本地MAC表增加的表项可以得到，到达目标端IP地址的出端口为Link2，基于此，ED3就会通过Link2发送ARP 应答报文，同时，通过Link2将MAC_B ISIS通告给EDl和ED2，以供ED1、ED2在本地MAC表中增加关于该MAC_B的表项。</p>
    <p>[0015]	当EDl学习到ED3通告的MAC_B后，在本地MAC转发表中增加关于该MAC_B的表项：VPN为VPm，MAC地址为MAC_B，出接口为Link2 (其为EDl学习到该MAC_B的端口，具体为EDl与ED3之间的虚拟以太网链路）。</p>
    <p>[0016]	当EDl收到ED3发送的ARP应答报文后，在本地MAC表中查找到目标端IP地址对应的出端口。根据EDl基于主机A广播的ARP请求报文在MAC表所增加的表项可以得到， 到达目标端IP地址的出端口为Portl，基于此，EDl就会通过Portl发送ARP应答报文。</p>
    <p>[0017]	当主机A接收到ARP应答报文后，就可知道目标端即主机B的MAC地址，之后利用该MAC地址与主机B正常通信。</p>
    <p>[0018]	至此，完成MAC地址学习的操作。</p>
    <p>[0019]	其实，真正需要通信的是主机A和B，所以只需要主机A所在站点中的EDl和主机 B所在站点中的ED3分别学习主机A和主机B的MAC地址即可。至于ED2，其无需学习主机A和主机B的MAC地址，也即EDl无需通过ISIS通告MAC_A给ED2，ED3无需通过ISIS 通告MAC_B给ED2，进而，ED2也就没有必要在本地MAC表中建立关于主机A、主机B的MAC 地址表项。可以看出，现有的MAC地址学习方法大大浪费了 ED2的MAC表项资源，造成ED2 中MAC表项不必要的占用，并且，由于EDl通过ISIS通告MAC_A给ED2，ED3通过ISIS通告 MAC_B给ED2，也会浪费其他ED的资源。</p>
    <p>发明内容</p>
    <p>[0020]	本发明提供了 MAC地址学习方法和边缘设备，提高ED中MAC表项资源的利用率， 减少无关MAC表项的占用。</p>
    <p>[0021]	本发明提供的技术方案包括：</p>
    <p>[0022]	一种MAC地址学习方法，该方法应用于数据中心二层虚拟互联网络中的ED，其特征在于，该方法包括：</p>
    <p>[0023]	A，侦听ARP请求报文，在控制平面建立包含以下内容的会话缓存表项：该ARP请求报文的目标端Target IP地址、初始发送端knder IP地址、初始发送端MAC地址、以及与初始发送端MAC地址对应的出端口 ；</p>
    <p>[0024]	B，侦听ARP应答报文，在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口，利用该会话缓存表项中与ARP请求报文的初始发送端MAC地址对应的出端口转发该ARP应答报文，执行步骤C;</p>
    <p>[0025]	C，将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、 以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，</p>
    <p>[0026]	将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面，以指导数据报文的转发。</p>
    <p>[0027]	一种ED，该ED为数据中心二层虚拟互联网络的任一 ED，该ED包括：</p>
    <p>[0028]	第一侦听单元，用于侦听ARP请求报文，在控制平面建立包含以下内容的会话缓存表项：该ARP请求报文的目标端Target IP地址、初始发送端knder IP地址、初始发送端MAC地址、以及与初始发送端MAC地址对应的出端口 ；</p>
    <p>[0029]	第二侦听单元，用于侦听ARP应答报文，在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口，利用该会话缓存表项中与ARP请求报文的初始发送端MAC地址对应的出端口转发该ARP应答报文，并发送通知给第一处理单元；</p>
    <p>[0030]	第一处理单元，用于接收来自所述第二侦听单元的通知后，将会话缓存表项中ARP 请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC 地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，</p>
    <p>[0031 ] 将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面，以指导数据报文的转发。</p>
    <p>[0032] 由以上技术方案可以看出，本发明中，ED在侦听到ARP应答报文后，且在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址时，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口时，之后才将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口下发至数据平面，以指导数据报文的转发，这相比于现有技术，避免无关ED接收到不必要的MAC地址，提高了 ED中MAC表项资源的利用率，减少无关MAC表项的占用。附图说明</p>
    <p>[0033]	图1为现有数据中心二层虚拟互联组网示意图；</p>
    <p>[0034]	图2为现有MAC地址学习示意图；</p>
    <p>[0035]	图3为本发明实施例提供的方法流程图；</p>
    <p>[0036]	图4为本发明实施例提供的具体实施例示意图；</p>
    <p>[0037]	图5为本发明实施例提供的另一具体实施例示意图；</p>
    <p>[0038]	图6为本发明实施例提供的边缘设备结构图；</p>
    <p>[0039]	图7为本发明实施例提供的边缘设备另一结构图。</p>
    <p>具体实施方式</p>
    <p>[0040]	为了使本发明的目的、技术方案和优点更加清楚，下面结合附图和具体实施例对本发明进行详细描述。</p>
    <p>[0041]	参见图3，图3为本发明实施例提供的方法流程图。该流程应用于包含两个以上站点的数据中心二层虚拟互联网络中，在该数据中心二层虚拟互联网络中，每一 ED启用了 ARP侦听功能，用于侦听经过该ED转发的所有ARP报文，该ARP报文可包括：ARP请求报文、 ARP应答报文、发生站点迁移的主机广播的免费ARP报文等，本发明并不具体限定。</p>
    <p>[0042]	基于此，每一 ED执行的步骤包括：</p>
    <p>[0043]	步骤301，侦听ARP请求报文，在控制平面建立包含以下内容的会话缓存表项：该 ARP请求报文的目标端IP地址、初始发送端IP地址、初始发送端MAC地址、以及与初始发送端MAC地址对应的出端口。</p>
    <p>[0044]	为便于描述，本步骤301中，将与ARP请求报文的初始发送端MAC地址对应的出端口简称为第一出端口。其中，该第一出端口具体可为接收到ARP请求报文的端口，以便后续通过该端口向该初始发送端MAC地址发送报文。其中，如果所述ARP请求报文为本地接入的主机或路由设备广播的，则该ARP请求报文的初始发送端MAC地址为本地MAC地址，该初始发送端MAC地址对应的第一出端口为本地端口 ；如果所述ARP请求报文为异地ED接入的主机或路由设备广播的，则该ARP请求报文的初始发送端MAC地址为异地MAC地址，该初始发送端MAC地址对应的第一出端口为本地ED与该异地ED之间的虚拟以太网链路。</p>
    <p>[0045]	步骤302，侦听ARP应答报文，在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口，利用该会话缓存表项中的第一出端口转发该ARP应答报文，之后执行步骤303。</p>
    <p>[0046]	本步骤302中的ARP应答报文是对ARP请求报文的应答。</p>
    <p>[0047]	为便于描述，本步骤302将与ARP应答报文的初始发送端MAC地址对应的出端口简称为第二出端口。其中，该第二出端口具体可为接收到ARP应答报文的端口，以便后续通过该端口向该初始发送端MAC地址发送报文。其中，如果所述ARP应答报文为本地接入的主机或路由设备单播发送的，则该ARP应答报文的初始发送端MAC地址为本地MAC地址，该初始发送端MAC地址对应的第二出端口为本地端口 ；如果所述ARP应答报文为异地ED接入的主机或路由设备单播发送的，则该ARP应答报文的初始发送端MAC地址为异地MAC地址， 该初始发送端MAC地址对应的第二出端口为本地ED与异地ED之间的虚拟以太网链路。[0048]	通过步骤301至步骤302可以看出，执行完步骤302所述的增加操作的会话缓存表项中，ARP请求报文的初始发送端MAC地址和ARP应答报文的初始发送端MAC地址中有一个为本地MAC地址，对应的出端口为本地ED接入该本地MAC地址的本地端口，另一个为异地ED接入的异地MAC地址，对应的出端口为本地ED与异地ED之间的虚拟以太网链路。</p>
    <p>[0049]	步骤303，将会话缓存表项中ARP请求报文的初始发送端MAC地址与第一出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与第二出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面，以指导数据报文的转发。</p>
    <p>[0050]	本步骤303中，可利用用于通告MAC地址的协议比如ISIS来通告MAC地址。其中， 通过异地MAC地址对应的出端口通告本地MAC地址可使该出端口所处的虚拟以太网链路连接的对端ED接收到该通告的MAC地址。</p>
    <p>[0051]	另外，步骤303中，将会话缓存表项中ARP请求报文的初始发送端MAC地址与第一出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与第二出端口的对应关系下发至数据平面，或者，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面具体是在数据平面建立包含该下发的对应关系的MAC表项。</p>
    <p>[0052]	至此，完成图3所示的流程。</p>
    <p>[0053]	需要说明的是，上述步骤301中，ARP请求报文是MAC地址学习的一个会话，由于当前还未侦听到针对该ARP请求报文的应答，因此，可认为该会话正处于建立阶段；而当侦听到ARP应答报文，则可认为MAC地址学习的一个会话已建立，为便于区分，本发明可设置步骤301中的会话缓存表项的状态为第一状态，用于表示MAC地址学习会话正处于建立阶段， 该第一状态本实施例可为connecting状态，而步骤302中，在会话缓存表项增加完ARP应答报文的初始发送端MAC地址和第二出端口后，可将该会话缓存表项的状态从第一状态更新为第二状态，用于表示MAC地址学习会话已被建立，该第二状态本实施例可为connected 状态。</p>
    <p>[0054]	为使图3所示的流程更加容易理解，下面以第一状态为connecting状态，第二状态为connected状态为例，通过图4和图5进行举例描述：</p>
    <p>[0055]	参见图4，图4为本发明实施例提供的具体实施例示意图。在图4中，每一 ED启用了 ARP侦听功能。其中，如果主机A需要与主机B通信，但主机A当前仅知道主机B的IP 地址，并不知道主机B的MAC地址，基于此，就需要学习主机B的MAC地址，以便主机A与主机B正常通信。</p>
    <p>[0056]	该学习主机B的MAC地址方法为：</p>
    <p>[0057]	主机A广播ARP请求报文。该ARP请求报文的目标端IP地址为主机B的IP地址即IP_B，初始发送端的IP地址为主机A的IP地址即IP_A，初始发送端的MAC地址为主机 A的MAC地址即MAC_A。</p>
    <p>[0058]	图4中的每一 ED侦听到该ARP请求报文时，在控制平面学习该ARP请求报文携带的内容，并基于步骤301的描述在本地建立会话缓存表项，之后将该会话缓存表项的状态设置为connecting状态。如此，图4中的EDI、ED2、ED3均在本地建立了会话缓存表项，并标识该会话缓存表项为connecting状态。其中，EDl在本地建立的会话缓存表项包括：IP_A，IP_B，（MAC_A，Portl)。ED2在本地建立的会话缓存表项包括：IP_A，IP_B，（MAC_A，虚拟以太网链路1)。ED3在本地建立的会话缓存表项包括：IP_A，IP_B，（MAC_A，虚拟以太网链路 2)。其中，Portl为EDl侦听到ARP请求报文的本地端口，虚拟以太网链路1为ED2侦听到 ARP请求报文的虚拟以太网链路，虚拟以太网链路2为ED3侦听到ARP请求报文的虚拟以太网链路。（MAC_A，Portl)表示MAC_A、Portl具有对应关系，（MAC_A，虚拟以太网链路1)、 (MAC_A，虚拟以太网链路幻类似。</p>
    <p>[0059]	当图4中的每一 ED侦听到ARP请求报文后，该ED还会继续向其接入的主机下发该ARP请求报文。</p>
    <p>[0060]	当图4中的主机B收到ARP请求报文后，发现该ARP请求报文的目标端IP地址为自身的IP地址，则回应单播ARP应答报文，其中，该ARP应答报文中的目标端MAC地址为 MAC_A,目标端IP地址为IP_A，初始发送端MAC地址为MAC_B，初始发送端IP地址为IP_B。 而其他主机不做任何回应。</p>
    <p>[0061]	当图4中的ED3在Portl侦听到其接入的主机B回应的ARP应答报文时，在本地会话缓存表项中找到包含该ARP应答报文的初始发送端IP地址即IP_B和目标端IP地址即IP_A的会话缓存表项，基于上面的描述，可以得到，找到的会话缓存表项为：IP_A，IP_B， (MAC_A，虚拟以太网链路2、。之后ED3在找到的会话缓存表项中增加以下内容：ARP应答报文的初始发送端MAC地址即MAC_B和与该初始发送端MAC地址对应的出端口即Portl。 如此，该找到的会话缓存表项就更新为：IP_A，IP_B，（MAC_A，虚拟以太网链路2)，(MAC B, Portl)，同时ED3将该会话缓存表项的状态更新为connected状态。</p>
    <p>[0062]	之后，ED3将connected状态的会话缓存表项中与ARP应答报文的目标端MAC地址即MAC_A对应的端口即虚拟以太网链路2发送ARP应答报文，以及将本地MAC地址即MAC_ B通过connected状态的会话缓存表项中异地MAC地址即MAC_A对应的出端口即虚拟以太网链路2进行ISIS通告。</p>
    <p>[0063]	由于图4中，ED3通过虚拟以太网链路2与EDl连接，因此，EDl会接收到ED3转发的ARP应答报文和ED3通告的MAC_B。</p>
    <p>[0064]	当EDl从虚拟以太网链路2收到ARP应答报文后，找到包含该ARP应答报文的初始发送端IP地址和目标端IP地址的会话缓存表项：IP_A，IP_B，(MAC_A, Portl)，并在找到的会话缓存表项中增加以下内容：ARP应答报文的初始发送端MAC地址即MAC_B和与该初始发送端MAC地址对应的出端口即虚拟以太网链路2。如此，该找到的会话缓存表项就更新为：IP_A，IP_B，(MAC_A,Portl)，（MAC_B，虚拟以太网链路2)，同时EDl将该会话缓存表项的状态更新为connected状态。在EDl将该会话缓存表项的状态更新为connected状态后， 如果EDl从虚拟以太网链路2收到ED3 ISIS通告过来的MAC_B，则EDl在数据平面将MAC_ B下发到虚拟以太网链路2上，即在数据平面的MAC表中增加MAC表项，具体如图4中EDl 的MAC表所示。同时ED1将该会话缓存表项中的本地MAC地址即MAC_A通过异地MAC地址对应的出端口即虚拟以太网链路2ISIS通告。另外，EDl还通过该会话缓存表项中与该ARP 应答报文的目标端MAC地址即MAC_k对应的端口即Portl继续发送ARP应答报文。</p>
    <p>[0065]	由于图4中，EDl通过虚拟以太网链路2与ED3连接，因此，ED3会接收到EDl通告的MAC_A。当ED3收到EDl从ISIS通告过来的MAC_A后，将MAC_A下发到虚拟以太网链路 2上，即在数据平面建立MAC表，具体如图4中ED3的MAC表所示。[0066]	由于图4中，主机A通过Portl与EDl连接，因此，主机A会收到ARP应答报文。当主机A收到ARP应答报文后，就知道主机B的MAC地址，之后，主机A与主机B之间通信的数据流就可根据MAC地址进行转发。</p>
    <p>[0067]	至此，完成学习主机B的MAC地址流程。</p>
    <p>[0068]	从图4所示的流程可以看出，在学习主机B的MAC地址过程中，由于ED2与真实需要通信的主机A和主机B没有任何关联，因此，其只是建立了一个处于connecting状态的会话缓存表项，该ED2不会通过ISIS在站点间通告该处于connecting状态的会话缓存表项中的MAC地址。这相比于现有技术，提高了 ED中MAC表项资源的利用率，减少无关MAC 表项的占用。</p>
    <p>[0069]	图4是以ED在将会话缓存表项的状态更新为connected状态后，通告MAC地址， 以便其他ED根据该通告的MAC地址建立MAC表项。</p>
    <p>[0070]	优选地，作为图4的一种扩展，本发明中，ED在将会话缓存表项的状态更新为 connected状态后，还可不通告MAC地址，而是替换为：直接将该会话缓存表项中的MAC地址和出端口下发至数据平面，指导数据报文的转发，具体如图5所示。</p>
    <p>[0071]	参见图5，图4为本发明实施例提供的另一具体实施例示意图。在图5中，每一 ED 启用了 ARP侦听功能。与图4类似，主机A需要学习主机B的MAC地址，以便主机A与主机 B正常通信。</p>
    <p>[0072]	在图5所示的MAC地址方法中，与图4不同的是，图5中的ED比如ED3或ED1，在将会话缓存表项的状态更新为connected状态后，并不通告MAC地址，而是直接将该会话缓存表项中的MAC地址和出端口下发至数据平面，以在数据平面建立MAC表项，指导数据报文的转发。下面以ED3为例进行描述，EDl原理类似。</p>
    <p>[0073]	ED3在将该会话缓存表项的状态更新为connected状态后，并不执行将该会话缓存表项中的本地MAC地址即嫩(：_8通过异地MAC地址即MAC_A对应的出端口即虚拟以太网链路2通告，而是直接将connected状态的会话缓存表项中ARP请求报文的初始发送端MAC 地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，以在数据平面建立如图5所示的ED3的MAC表项，以指导数据报文的转发。</p>
    <p>[0074]	通过图5所示的流程可以看出，在学习主机B的MAC地址过程中，由于ED2与真实需要通信的主机A和主机B没有任何关联，因此，其只是建立了一个处于connecting状态的会话缓存表项，而图5中，ED必须在会话缓存表项的状态为connected状态后，才将该会话缓存表项中的MAC地址和出端口下发至数据平面，以在数据平面建立MAC表项，如此，可以得到ED2不会建立有关connecting状态的会话缓存表项中MAC地址的表项，这相比于现有技术，显然可以提高ED中MAC表项资源的利用率，减少无关MAC表项的占用。</p>
    <p>[0075]	需要说明的是，由于每一站点的ED所接入的主机可以在不同站点之间迁移，基于此，每一 ED还执行以下步骤：</p>
    <p>[0076]	接收发生站点迁移的主机广播的免费ARP报文，其中，每一 ED启用的ARP侦听功能可以侦听到该免费ARP报文，并且，该免费ARP报文是主机在迁移成功后广播发送的；</p>
    <p>[0077]	在本地会话缓存表项中找到包含该主机IP地址的会话缓存表项；</p>
    <p>[0078]	如果该找到的会话缓存表项当前被设置为第一状态比如connecting状态，则根据接收到该免费ARP报文的端口更新该找到的会话缓存表项。其中，根据接收到免费ARP 报文的端口更新该找到的会话缓存表项包括：如果该找到的会话缓存表项中不存在所述主机的MAC地址，则在找到的会话缓存表项中增加该主机的MAC地址和与该主机MAC地址对应的出端口，并将该会话缓存表项的状态更新为第二状态，返回上述步骤303 ；如果该找到的会话缓存表项中存在所述主机的地址，则将该会话缓存表项中与该主机的MAC地址对应的出端口更新为当前接收到免费ARP报文的端口。</p>
    <p>[0079]	如果该找到的会话缓存表项当前被设置为第二状态比如connected状态，则在所述主机当前为本地接入时，删除该找到的会话缓存表项，在所述主机当前为异地站点接入时，更新该找到的会话缓存表项。其中，更新该找到的会话缓存表项具体实现时可包括：如果该找到的会话缓存表项中与所述主机的MAC地址对应的出端口为本地端口，则删除该找到的会话缓存表项；如果该找到的会话缓存表项中与所述主机的MAC地址对应的出端口为虚拟以太网链路，则将该会话缓存表项中与所述主机的MAC地址对应的出端口更新为当前接收到免费ARP报文的虚拟以太网链路。</p>
    <p>[0080]	需要说明的是，为节省资源，本发明中，每一 ED还可以执行以下步骤：</p>
    <p>[0081]	在将会话缓存表项的状态设置为第一状态时，启动该会话缓存表项对应的用于标识该会话缓存表项为第一状态的第一定时器；</p>
    <p>[0082]	在将会话缓存表项的状态从第一状态更新为第二状态时，关闭该第一定时器，并启动该会话缓存表项对应的用于标识该会话缓存表项为第二状态的第二定时器；</p>
    <p>[0083]	当任一个定时器超时时，删除该定时器对应的会话缓存表项，其中，所述第一定时器和所述第二定时器的超时时间无关。</p>
    <p>[0084]	至此，完成本发明提供的方法描述。</p>
    <p>[0085]	下面对本发明提供的边缘设备进行描述：</p>
    <p>[0086]	参见图6，图6为本发明提供的ED结构图。如图6所示，该ED可包括：</p>
    <p>[0087]	第一侦听单元，用于侦听ARP请求报文，在控制平面建立包含以下内容的会话缓存表项：该ARP请求报文的目标端Target IP地址、初始发送端knder IP地址、初始发送端MAC地址、以及与初始发送端MAC地址对应的出端口 ；</p>
    <p>[0088]	第二侦听单元，用于侦听ARP应答报文，在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口，利用该会话缓存表项中与ARP请求报文的初始发送端MAC地址对应的出端口转发该ARP应答报文，并发送通知给第一处理单元；</p>
    <p>[0089]	第一处理单元，用于接收来自所述第二侦听单元的通知后，将会话缓存表项中ARP 请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC 地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，</p>
    <p>[0090]	将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口的对应关系下发至数据平面，以指导数据报文转发。</p>
    <p>[0091]	其中，所述第一处理单元处理的会话缓存表项中ARP请求报文的初始发送端MAC 地址和ARP应答报文的初始发送端MAC地址中的一个为本地MAC地址，对应的出端口为本地ED接入该本地MAC地址的本地端口，另一个为异地ED接入的异地MAC地址，对应的出端口为本地ED与异地ED之间的虚拟以太网链路。</p>
    <p>[0092]	优选地，本实施例中，第一侦听单元在建立会话缓存表项后，进一步设置该会话缓存表项的状态为第一状态，用于表示MAC地址学习会话正处于建立阶段；</p>
    <p>[0093]	第二侦听单元在对会话缓存表项增加ARP应答报文的初始发送端MAC地址和第二出端口后，进一步设置该会话缓存表项的状态为第二状态，用于表示MAC地址学习会话已被建立；</p>
    <p>[0094]	所述第一处理单元处理的会话缓存表项为第二状态的会话缓存表项。</p>
    <p>[0095]	本实施例中，如图6所示，所述边缘设备进一步包括：第二处理单元、第一更新单元、第二更新单元和定时器控制单元，其中，</p>
    <p>[0096]	所述第二处理单元用于接收发生站点迁移的主机广播的免费ARP报文，并在本地会话缓存表项中找到包含该主机IP地址的会话缓存表项，如果该找到的会话缓存表项当前被设置为第一状态，则发送第一更新通知给第一更新单元，如果该找到的会话缓存表项当前被设置为第二状态，则发送第二更新通知给第二更新单元；</p>
    <p>[0097]	所述第一更新单元用于接收到所述第一更新通知时，根据接收到该免费ARP报文的端口更新该找到的会话缓存表项；优选地，所述第一更新单元根据接收到该免费ARP报文的端口更新该找到的会话缓存表项包括：所述第一更新单元在找到的会话缓存表项不存在所述主机的MAC地址时，在找到的会话缓存表项中增加所述主机的MAC地址和与该主机 MAC地址对应的出端口，并将该会话缓存表项的状态更新为第二状态，触发第一处理单元执行相应操作，在该找到的会话缓存表项中存在所述主机的MAC地址时，则将该会话缓存表项中与该主机MAC地址对应的出端口更新为当前接收到免费ARP报文的端口。</p>
    <p>[0098]	所述第二更新单元用于接收到所述第二更新通知时，如果所述主机当前为本地接入，则删除该找到的会话缓存表项，如果所述主机当前为异地站点接入，则更新该找到的会话缓存表项。优选地，所述第二更新单元更新该找到的会话缓存表项包括：所述第二更新单元在找到的会话缓存表项中所述主机的MAC地址对应的出端口为本地端口时，删除该找到的会话缓存表项，在该找到的会话缓存表项中所述主机的MAC地址对应的出端口为虚拟以太网链路时，将该会话缓存表项中与该MAC地址对应的出端口更新为当前接收到免费ARP 报文的虚拟以太网链路。</p>
    <p>[0099]	所述定时器控制单元用于在所述第一侦听单元将会话缓存表项的状态设置为第一状态时，启动该会话缓存表项对应的用于标识该会话缓存表项为第一状态的第一定时器；用于在第二侦听单元将会话缓存表项的状态从第一状态更新为第二状态时，关闭该第一定时器，并启动该会话缓存表项对应的用于标识该会话缓存表项为第二状态的第二定时器，并在启动的第一定时器或第二定时器超时时，删除该超时的定时器对应的会话缓存表项，其中，所述第一定时器和所述第二定时器的超时时间无关。</p>
    <p>[0100]	至此，完成本发明提供的边缘设备的结构描述。</p>
    <p>[0101]	以下给出本发明实施例提供的无线网络中ED的组成。该ED是软硬件结合的可编程的设备，具体结果如图7所示。在图7中，ED包括：</p>
    <p>[0102]	处理器，用于与存储器进行通信，负责执行存储器中的代码指令。</p>
    <p>[0103]	代码存储器，用于存储所述代码指令，当该代码指令被执行时完成的操作主要为上述ED执行的所有操作，这里不再赘述。</p>
    <p>[0104]	所述代码存储器是一种处理器可读写介质，包括但不限于非永久存储卡、软盘、磁光盘、硬盘、光盘（如 CD-ROM、CD-R、CD-RW、DVD-ROM、DVD-RAM、DVD-RW、DVD+RW)、闪存、磁带、 ROM等等。</p>
    <p>[0105]	还有，该ED还包括：线卡和报文存储器；其中，</p>
    <p>[0106]	所述线卡，用于通过该线卡上的接口使所述ED连接到网络。其中，线卡上的接口可以是以太网接口、DSL接口、千兆以太网接口、万兆以太网接口等等。</p>
    <p>[0107]	所述报文存储器，用于在所述ED接收、处理和转发报文时，会先暂时缓存ED发送的这些报文，以使ED针对这些报文完成相应的操作后从所述报文存储器中处理该报文。</p>
    <p>[0108]	需要说明的是，图7所示的ED只是一个具体的例子，也可以在其他的与本例描述不同结构的设备上实现。本发明并不具体限定。</p>
    <p>[0109]	由以上技术方案可以看出，本发明中，ED在侦听到ARP应答报文后，且在已建立的会话缓存表项中找到包含以下内容的会话缓存表项：该ARP应答报文的目标端IP地址和初始发送端IP地址时，在找到的会话缓存表项中增加该ARP应答报文的初始发送端MAC地址、以及与该初始发送端MAC地址对应的出端口时，之后才将会话缓存表项中ARP请求报文的初始发送端MAC地址与出端口的对应关系、以及ARP应答报文的初始发送端MAC地址与出端口的对应关系下发至数据平面，以指导数据报文的转发；或者，将会话缓存表项中的本地MAC地址通过该会话缓存表项中异地MAC地址对应的出端口通告，以及接收其他ED通告的MAC地址，将接收的MAC地址和接收到该MAC地址的端口下发至数据平面，以指导数据报文的转发，这相比于现有技术，避免无关ED接收到不必要的MAC地址，提高了 ED中MAC表项资源的利用率，减少无关MAC表项的占用。</p>
    <p>[0110]	以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明保护的范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101075933A?cl=zh">CN101075933A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年6月29日</td><td class="patent-data-table-td patent-date-value">2007年11月21日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">学习mac地址的方法及网元设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101098291A?cl=zh">CN101098291A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2006年6月29日</td><td class="patent-data-table-td patent-date-value">2008年1月2日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">在接入设备上防止介质访问控制地址表扰乱的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101488964A?cl=zh">CN101488964A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年2月20日</td><td class="patent-data-table-td patent-date-value">2009年7月22日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">实现地址解析和实现二层通信的方法、系统和路由器</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102118316A?cl=zh">CN102118316A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年3月7日</td><td class="patent-data-table-td patent-date-value">2011年7月6日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">学习mac地址的方法和设备</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102594943A?cl=zh">CN102594943A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年3月19日</td><td class="patent-data-table-td patent-date-value">2012年7月18日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">用于实现arp侦听的方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102594943B?cl=zh">CN102594943B</a></td><td class="patent-data-table-td patent-date-value">2012年3月19日</td><td class="patent-data-table-td patent-date-value">2014年10月22日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">用于实现arp侦听的方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102710509A?cl=zh">CN102710509A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年5月18日</td><td class="patent-data-table-td patent-date-value">2012年10月3日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">一种数据中心自动配置方法及其设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102710509B?cl=zh">CN102710509B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年5月18日</td><td class="patent-data-table-td patent-date-value">2015年4月15日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">一种数据中心自动配置方法及其设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103369064A?cl=zh">CN103369064A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年7月3日</td><td class="patent-data-table-td patent-date-value">2013年10月23日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">一种arp表项的学习方法和设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2860916A4?cl=zh">EP2860916A4</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年3月30日</td><td class="patent-data-table-td patent-date-value">2016年1月13日</td><td class="patent-data-table-td ">Huawei Tech Co Ltd</td><td class="patent-data-table-td ">Method for notifying transmission path information and route bridging</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US9197721">US9197721</a></td><td class="patent-data-table-td patent-date-value">2012年9月27日</td><td class="patent-data-table-td patent-date-value">2015年11月24日</td><td class="patent-data-table-td ">Hangzhou H3C Technologies Co., Ltd.</td><td class="patent-data-table-td ">Learning a MAC address</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013044821A1?cl=zh">WO2013044821A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年9月27日</td><td class="patent-data-table-td patent-date-value">2013年4月4日</td><td class="patent-data-table-td ">Hangzhou H3C Technologies Co., Ltd.</td><td class="patent-data-table-td ">Learning a mac address</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2014071864A1?cl=zh">WO2014071864A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年11月8日</td><td class="patent-data-table-td patent-date-value">2014年5月15日</td><td class="patent-data-table-td ">Hangzhou H3C Technologies Co., Ltd.</td><td class="patent-data-table-td ">Identifiers for spoke-pes in hub-spoke networks</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012741000">H04L12/741</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029120000">H04L29/12</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L45/742">H04L45/742</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L29/12839">H04L29/12839</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L29/12811">H04L29/12811</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L61/6022">H04L61/6022</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L61/6009">H04L61/6009</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L69/22">H04L69/22</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L49/15">H04L49/15</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/4633">H04L12/4633</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gjWcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L61/103">H04L61/103</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2011年12月21日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2012年3月14日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2015年3月18日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/c735534e1619f3a644b2/CN102291320A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/Mac%E5%9C%B0%E5%9D%80%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95%E5%92%8C%E8%BE%B9%E7%BC%98%E8%AE%BE%E5%A4%87.pdf?id=gjWcBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1APJjC-MPBKkQdYA8eBufjnN81hQ"},"sample_url":"https://www.google.com/patents/reader?id=gjWcBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>