<!DOCTYPE html><html><head><title>专利 CN101316189A - 一种实现网络设备升级的方法、系统和设备 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种实现网络设备升级的方法、系统和设备"><meta name="DC.contributor" content="朱哲蕾" scheme="inventor"><meta name="DC.contributor" content="甘嘉栋" scheme="inventor"><meta name="DC.contributor" content="范德富" scheme="inventor"><meta name="DC.contributor" content="华为技术有限公司" scheme="assignee"><meta name="DC.date" content="2008-5-27" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种实现网络设备升级的方法、系统和设备，属于通信领域。所述方法包括：控制需要联动升级的网络设备进行预升级；判断所述网络设备是否预升级成功；当所述网络设备全部预升级成功，对所述网络设备进行升级确认，完成对所述网络设备的升级。系统包括网络设备和升级控制器。升级控制器包括判断模块，第一处理模块。本发明通过升级控制器的控制实现了针对需要联动升级的产品的升级，通过升级控制器提供分布式事务机制，自动保证升级的完整性和一致性，并且该升级控制器可以支持跨平台使用。"><meta name="DC.date" content="2008-12-3"><meta name="citation_patent_publication_number" content="CN:101316189:A"><meta name="citation_patent_application_number" content="CN:200810108232"><link rel="canonical" href="https://www.google.com/patents/CN101316189A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101316189A?cl=zh"/><meta name="title" content="专利 CN101316189A - 一种实现网络设备升级的方法、系统和设备"/><meta name="description" content="本发明公开了一种实现网络设备升级的方法、系统和设备，属于通信领域。所述方法包括：控制需要联动升级的网络设备进行预升级；判断所述网络设备是否预升级成功；当所述网络设备全部预升级成功，对所述网络设备进行升级确认，完成对所述网络设备的升级。系统包括网络设备和升级控制器。升级控制器包括判断模块，第一处理模块。本发明通过升级控制器的控制实现了针对需要联动升级的产品的升级，通过升级控制器提供分布式事务机制，自动保证升级的完整性和一致性，并且该升级控制器可以支持跨平台使用。"/><meta property="og:title" content="专利 CN101316189A - 一种实现网络设备升级的方法、系统和设备"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101316189A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101316189A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=p-dlBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101316189A&amp;usg=AFQjCNHj9zbPFPdMsJK7IyNZafDpHO2Q9g" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/3dd2669adcbb33983173/CN101316189A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/3dd2669adcbb33983173/CN101316189A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101316189A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101316189A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101316189A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种实现网络设备升级的方法、系统和设备，属于通信领域。所述方法包括：控制需要联动升级的网络设备进行预升级；判断所述网络设备是否预升级成功；当所述网络设备全部预升级成功，对所述网络设备进行升...</span><span itemprop="url">https://www.google.com/patents/CN101316189A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101316189A - 一种实现网络设备升级的方法、系统和设备</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101316189A - 一种实现网络设备升级的方法、系统和设备" title="专利 CN101316189A - 一种实现网络设备升级的方法、系统和设备"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101316189 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200810108232</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2008年12月3日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2008年5月27日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2008年5月27日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200810108232.3, </span><span class="patent-bibdata-value">CN 101316189 A, </span><span class="patent-bibdata-value">CN 101316189A, </span><span class="patent-bibdata-value">CN 200810108232, </span><span class="patent-bibdata-value">CN-A-101316189, </span><span class="patent-bibdata-value">CN101316189 A, </span><span class="patent-bibdata-value">CN101316189A, </span><span class="patent-bibdata-value">CN200810108232, </span><span class="patent-bibdata-value">CN200810108232.3</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9C%B1%E5%93%B2%E8%95%BE%22">朱哲蕾</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%94%98%E5%98%89%E6%A0%8B%22">甘嘉栋</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%8C%83%E5%BE%B7%E5%AF%8C%22">范德富</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8D%8E%E4%B8%BA%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">华为技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101316189A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101316189A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101316189A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (5),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=p-dlBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200810108232&amp;usg=AFQjCNEZjqUWM7zwRw19EM40rgH6XY7uJw"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=p-dlBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101316189A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGiK-KmYnQIqhSkkWXuXRyPgtu3Kw"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT70998251" lang="ZH" load-source="patent-office">一种实现网络设备升级的方法、系统和设备</invention-title>
      </span><br><span class="patent-number">CN 101316189 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA38767939" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种实现网络设备升级的方法、系统和设备，属于通信领域。所述方法包括：控制需要联动升级的网络设备进行预升级；判断所述网络设备是否预升级成功；当所述网络设备全部预升级成功，对所述网络设备进行升级确认，完成对所述网络设备的升级。系统包括网络设备和升级控制器。升级控制器包括判断模块，第一处理模块。本发明通过升级控制器的控制实现了针对需要联动升级的产品的升级，通过升级控制器提供分布式事务机制，自动保证升级的完整性和一致性，并且该升级控制器可以支持跨平台使用。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(16)</span></span></div><div class="patent-text"><div mxw-id="PCLM6145148" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种实现网络设备升级的方法，其特征在于，所述方法包括：    控制需要联动升级的网络设备进行预升级；    判断所述网络设备是否预升级成功；        当所述网络设备全部预升级成功，对所述网络设备进行升级确认，完成对所述网络设备的升级。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 如权利要求1所述的实现网络设备升级的方法，其特征在于，所述控制需要联动升级 的网络设备进行预升级并判断网络设备是否预升级成功具体包括：控制所述需要联动升级的网络设备中的当前网络设备进行预升级时，判断当前网络设备 是否预升级成功，如果判断结果为当前网络设备预升级成功，则执行所述当前网络设备的下 一个网络设备的预升级，如果判断结果为所述当前网络设备预升级失败，则通知所述当前网 络设备之前己进行预升级的网络设备分别回退到各自预升级之前的版本。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 如权利要求1所述的实现网络设备升级的方法，其特征在于，所述控&#37439;需要联动升级 的网络设备进行预升级的步骤之前还包括：获取客户端下发的版本下载命令，所述版本下载命令中携带网络设备标识和升级版本号， 根据所述版本下载命令通知所述网络设备下载所述升级版本号对应的升级版本。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 如权利要求1所述的实现网络设备升级的方法，其特征在于，所述当所述网络设备全 部预升级成功并对所述网络设备进行升级确认，具体为：判断所述网络设备全部预升级成功后，分别向每个网络设备发送升级提交命令，并向所 述客户端返回升级成功响应；所述升级提交命令用于通知所述网络设备执行版本的切换。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 如权利要求1所述的实现网络设备升级的方法，其特征在于，所述网络设备运行在相 同或不同的操作系统。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6. &#8212;种实现网络设备升级的系统，其特征在于，所述系统包括:'网络设备和升级控制器; 其中，所述升级控制器，用于控制需要联动升级的网络设备进行预升级；还用于判断网络设备 是否预升级成功，当所述网络设备全部预升级成功后，对所述网络设备进行升级确认，完成 对所述网络设备的升级；.所述网络设备，用于接收所述升级控制器的发送的升级命令，进行预升级；还用于接收 所述升级控制器发送的升级确认，执行版本的切换。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7. 如权利要求6所述的实现网络设备升级的系统，其特征在于，所述系统还包括： .客户端设备，用于向所述升级控制器下发版本下载命令；所述版本下载命令中携带网络设备标识和升级版本号；当收到所述网络设备发送的版本请求后，向所述网络设备提供与所 述升级版本号对应的升级版本；当收到所述网络设备获取升级版本成功的响应后，通知所述 升级控制器对所述网络设备进行升级； 相应地，所述升级控制器，还用于获取所述客户端设备发送的版本下载命令后，通知所述网络设 备获取升级版本；当收到所述客户端设备发送的升级通知后，启动对所述网络设备的升级。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8. 如权利要求6所述的实现网络设备升级的系统，其特征在于，所述网络设备运行在相 同或者不同的操作系统；所述升级控制器支持至少一种操作系统的控制功能，实现控制所述网络设备升级。</div>
    </div>
    </div> <div class="claim"> <div num="9" class="claim">
      <div class="claim-text">9. 一种升级控制器，其特征在于，所述升级控制器包括-判断模块，判断网络设备是否需要联动升级；第一处理模块，用于当所述判断模块的判断结果为网络设备需要联动升级时，控制所述 网络设备进行预升级；还用于判断网络设备是否预升级成功，当所述网络设备全部预升级成 功，对所述网络设备进行升级确认，完成对所述网络设备的升级。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 如权利要求9所述的升级控制器，其特征在于，所述第一处理模块还用于： 控制所述网络设备进行预升级时，如果当前网络设备预升级失败，则通知已进行预升级的网络设备分别回退到各自预升级之前的版本。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11. 如权利要求9所述的升级控制器，其特征在于，所述升级控制器还包括： 通知模块，用于当获取到客户端设备发送的版本下载命令后，通知所述网络设备获取升级版本；启动模块，用于接收所述客户端设备发送的升级通知，启动对所述网络设备的升级。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12. 如权利要求9所述所述的升级控制器，其特征在于，所述升级控制器还包括： 第二处理模块，用于当所述判断模块的判断结果为网络设备不需要联动升级时，分别升级网络设备。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13. 如权利要求9所述所述的升级控制器，其特征在于，所述升级控制器支持至少一种 操作系统的控制功能，实现控制所述网络设备升级。</div>
    </div>
    </div> <div class="claim"> <div num="14" class="claim">
      <div class="claim-text">14. 一种网络设备，其特征在于，所述网络设备包括： 升级命令接收模块，用于接收升级控制器的发送的升级命令；升级模块，用于收到所述升级命令接收模块接收到的升级命令后，进行预升级；当收到 所述升级控制器发送的升级确认后，执行版本的快速切换完成升级。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15. 如权利要求14所述的网络设备，其特征在于，所述网络设备还包括： 回退模块，用于当收到所述升级控制器发送的失败通知后，回退到预升级之前的版本。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16. 如权利要求14所述的网络设备，其特征在于，所述网络设备还包括： 版本获取模块，用于在所述升级控制器的控制下，完成升级版本的获取a</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES10853348" lang="ZH" load-source="patent-office" class="description">
    <p>一种实现网络设备升级的方法、系统和设备</p>
    <p>技术领域</p>
    <p>本发明涉及通信领域，特别涉及一种实现网络设备升级的方法、系统和设备。 背景技术</p>
    <p>目前，通信设备产品往往都支持基于版本的升级，通过获取新的升级版本进行升级，可 以使升级后的通信设备能够提供更加丰富的功能，从而有效克服了通信设备升级前的漏洞和 不足。</p>
    <p>现有的通信产品的升级，主要是通过通信设备获取用于升级的升级包，然后由客户端（与 每个待升级的通信设备配套对应）向嵌入在通信设备中的代理下发升级命令，代理接收到升 级命令后完成通信设备由低版本向高版本的升级，当通信系统中出现需要联动升级的通信设 备时，由于不同的通信设备对应不同的客户端，需要管理员人工手动保证它们升级的完整性 和一致性，造成通信系统的升级效率的降低。在EMS (Element Management System,网元管 理系统）中，通过部署升级Server (服务器）来控制网元（通信设备）的升级逻辑，不同通 信设备的升级差异通过提供脚本适配来屏蔽，升级Server通过升级任务支持多网元批量升级， 以该EMS系统中的MSC Server (Mobile Switching Center Server,移动交换中心服务器）或 UMG (Universal Media Gateway,通用媒体网关设备）需要进行升级为例，具体升级交互流 程如下：</p>
    <p>1. 集成在EMS中的升级Server向客户端获取下载升级包；通常客户端也支持提供升级 版本的功能；在EMS中，通常客户端和升级设备仍为一一对应的关系（即一个升级 设备独立对应于一个客户端）；</p>
    <p>2. 客户端下发升级命令给升级Server,升级Server获取到升级命令后，控制通信设备的 升级过程；</p>
    <p>3. 升级Server下发升级命令到MSC Server进行升级；若该MSC Server进行升级成功， 则升级完成；若升级失败，则人工手动回退到该MSC Server升级前的版本；相应地， 升级Server向客户端返回该MSC Server进行升级成功/失败的消息；</p>
    <p>4. 同理，升级Server下发升级命令到UMG;该UMG进行升级；该UMG进行升级成功，则升级完成；若升级失败，则人工手动回退到该UMG升级前的版本；相应地，</p>
    <p>升级Server向客户端返回该UMG进行升级成功/失败的消息。 发明人在实现本发明时发现，虽然该EMS支持多网元批量升级，但是当MSC Server和 UMG需要进行联动升级时，若MSC Server或UMG任一升级失败，此时，只能人工手动回 退封失败的设备，再重新对升级失败的设备进行升级，升级成功的设备是无法自动回退的， 不能保证联动升级的完整性和一致性。</p>
    <p>发明内容</p>
    <p>为了提高网络设备产品的升级效率，保证联动升级的完整性和一致性，本发明实施例提</p>
    <p>供了一种实现网络设备升级的方法、系统和设备。所述技术方案如下：</p>
    <p>一种实现网络设备升级的方法，所述方法包括：控制需要联动升级的网络设备进行预升 级；判断所述网络设备是否预升级成功；当所述网络设备全部预升级成功，对所述网络设备</p>
    <p>进行升级确认，完成对所述网络设备的升级。</p>
    <p>.一种实现网络设备升级的系统，所述系统包括：网络设备和升级控制器；其中，</p>
    <p>所述升级控制器，用于控制需要联动升级的网络设备进行预升级；还用于判断网络设备 是否预升级成功，当所述网络设备全部预升级成功后，对所述网络设备进行升级确认，完成 对所述网络设备的升级； &#8226;</p>
    <p>所述网络设备，用于接收所述升级控制器的发送的升级命令，进行预升级；还用于接收 所述升级控制器发送的升级确认，执行版本的切换。</p>
    <p>一种升级控制器，所述升级控制器包括：</p>
    <p>判断模块，判断网络设备是否需要联动升级；</p>
    <p>第一处理模块，用于当所述判断模块的判断结果为网络设备需要联动升级时，控制所述 网络设备进行预升级；还用于判断网络设备是否预升级成功，当所述网络设备全部预升级成 功，对所述网络设备进行升级确认，完成对所述网络设备的升级。</p>
    <p>一种网络设备，所述待升级网络设备包括：</p>
    <p>升级命令接收模块，用于接收升级控制器的发送的升级命令；</p>
    <p>升级模块，用于收到所述升级命令接收模块接收到的升级命令后，进行预升级；当收到 所述升级控制器发送的升级确认后，执行版本的快速切换完成升级。 本发明实施例提供的技术方案的有益效果是：</p>
    <p>通过升级控制器实现控制需要联动升级的网络设备的预升级，当所有的需要联动升级的网络设备预升级成功后，才会通过升级控制器进行升级确认，从而保证了需要联动升级的网 络设备的升级完整性和一致性，提高了升级效率，并且整个升级过程只需要通过升级控制器 进行控制实现，而不需要额外的人为手动控制，从而保证了整个升级过程的自动性和可靠性。</p>
    <p>附图说明</p>
    <p>'图1是本发明实施例1提供的实现网络设备升级的方法流程图；</p>
    <p>图2是本发明实施例1提供的实现网络设备升级的信息流示意图；</p>
    <p>图3是本发明实施例1提供的实现网络设备升级的信息交互示意图；</p>
    <p>图4是本发明实施例2提供的实现网络设备升级系统的结构示意图；</p>
    <p>图5是本发明实施例2提供的实现网络设备升级系统的另一结^J示意图；</p>
    <p>图6是本发明实施例3提供的升级控制器结构示意图；</p>
    <p>图7是本发明实施例3提供的升级控制器另一结构示意图；</p>
    <p>图8是本发明实施例4提供的网络设备结构示意图；</p>
    <p>图9是本发明实施例4提供的网络设备另一结构示意图。</p>
    <p>具体实施方式</p>
    <p>为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合附图对本发明实施方 式作进一步地详细描述。</p>
    <p>本发明实施例提供的实现网络设备升级的方法内容如下：控制需要联动升级的网络设备 进行预升级；判断网络设备是否预升级成功，当网络设备全部预升级成功，对待升级网络设 备进行升级确认，完成对网络设备的升级。其中，当需要联动升级的网络设备收到升级确认 后相应地执行版本的快速切换。从而保证了需要联动升级的网络设备的升级完整性和一致性， 提高了升级效率。下面以具体的实施例进行详细的描述。</p>
    <p>实施例1</p>
    <p>参见图1，本发明实施例提供了一种实现网络设备升级的方法，实现了对需要升级的设 备的自动升级，特别是保证了那些需要联动升级设备的升级完整性和一致性，其中，本实施 例以移动通信网络中的MSC Server和UMG进行升级为例进行说明，内容如'下：</p>
    <p>101:客户端向升级控制器下发版本下载命令；其中，该版本下载命令中携带待升级的</p>
    <p>MSC Server和UMG的设备标识以及新版本号；其中，本发明实施例中涉及的客户端为具有升级命令下发功能的实体，该功能实体既可</p>
    <p>以做为工具进行独立部署，也可以将该功能实体部署在其它的设备上（如集成在EMS中）， 该功能实体可以具有跨平台部署的特点，还可以具有统一的人机交互界面风格的特点，从而 提高用户的使用体验。进一步地，为了方便说明，本实施例以该客户端还具有版本提供功能 为例，此时该客户端还充当了版本服务器，其功能是向待升级的网络设备提供与新版本号对 应的软件包，当然，该客户端所支持的版本提供功能还可以通过独立存在的版本服务器实体 实现。</p>
    <p>其中，上述升级控制器做为功能实体，用于为运行于不同操作平台下的通信产品提供统 一的集成环境，其中，该升级控制器可以做为一个单独的设备进行单独的部署，还可以部署 在其它的设备上（如类似地通过部署在EMS中的升级Server来实现），该功能实体的具体实 现详见下文。</p>
    <p>102:升级控制器收到版本下载命令后，根据其中携带的设备标识和新版本号，分别向 MSC Server和UMG下发版本获取命令，其中，该版本获取命令用于通告MSC Server和UMG 向客户端获取新的版本，进行升级。</p>
    <p>其中，作为可选方案，当MSC Server (或UMG)中的代理需要升级时，同理，升级控 制器还可以从客户端获取到MSC Server (或UMG)代理的版本下载命令，向MSC Server (或 UMG)代理下发版本获取命令，MSC Server (或UMG)代理根据获取到的版本获取命令， 向客户端获取用于升级的版本，然后利用获取到的版本进行升级。从而，有效地克服了现有 技术中通信设备的代理只能进行本地升级（如通过安装盘等）而无法支持远&#31240;自动升级的缺 点。</p>
    <p>103: MSC Server和UMG分别通过升级控制器向客户端发送各自的版本请求命令，该版 本请求命令，用于向客户端请求下载新版本；</p>
    <p>其中，当MSC Server和UMG收到升级控制器发送的版本获取命令后，根据其中携带的 新版本号和本地保存的版本号，获知需要进行版本的升级，从而提供新的版本所支持的功能 业务等，于是MSC Server和UMG分别通过升级控制器向客户端发送各自的版本请求命令。</p>
    <p>由于本发明实施例以客户端还具有版本提供功能为例进行的说明，所以此时客户端支持 向待升级的网络设备提供与新版本号对应的软件包的功能，相应地，MSC Server和UMG需 要向该客户端发送下载新版本的请求。</p>
    <p>本发明实施例采用了版本承载和升级命令控制分离的思想，使得命令控制和版本承载互 不影响，即当需要对升级命令进行更新或者更改时不会对传输的版本造成影响，同样，对版本的改变也不会影响到升级命令具体交互，从而实现提供更为有效和方便的服务。所以当</p>
    <p>MSC Server和UMG向客户端请求新的版本时，将版本请求命令通这升级控制器转发至客户端。</p>
    <p>104:客户端收到来自升级控制器转发的待升级的网络设备的版本请求命令后，向MSC Server和UMG下发其各自的新版本；MSC Server和UMG将接收到的版本保存，并通过升 级控制器向客户端返回成功获取版本的响应；</p>
    <p>其中，客户端提供的新版本对应于用于进行升级的软件包，MSC Server和UMG可以将 接收'到的新版本保存在各自的本地指定目录下，然后通过升级控制器向客户端返回成功获取 版本的确认响应。</p>
    <p>105:客户端收到MSC Server和UMG返回的成功获取版本的响应后，向升级控制器下 发升级命令；</p>
    <p>106:升级控制器收到升级命令后，根据自身预存的信息，判断MSC Server和UMG是</p>
    <p>否需要联动升级，如果是，执行步骤107;否则；执行步骤116;</p>
    <p>其中，升级控制器自身会预存待升级设备的配置文件，从而根据预存的配置文件，判断</p>
    <p>某个待升级的设备是否需要与其它设备一起进行联动升级；所谓联动升级是指：设备A和B 需要在相对统一的版本下配合工作提供业务运行功能，例如针对待升级的设备A和设备B, 只有设备A、 B都成功升级到了最新版本，才能共同完成设备A和B所共同支持提供的业务 的正常运行，如果设备A升级成功，工作在最新的版本3.0下，而设备B升级失败回退到了 版本2.0下，则此时由于设备A和设备B的工作版本相对不一致，会导致无法正常提供业务 服务。所谓回退，即设备在升级过程中出现错误（如通信设备自身数据被非沫修改等）导致 失败，即使获取到了升级软件包，也无法实现对自身的程序进行更新，无法升级到最新的版 本，则回退到了旧的版本下，设备的程序和算法仍以旧的版本运行。</p>
    <p>本实施例中下述步骤107至步骤115，以MSC Server和UMG需要进行联动升级，且在 联动升级的过程中需要对MSC Server进行优先升级为例，进行说明。</p>
    <p>107:升级控制器启动升级，向MSC Server下发升级命令；</p>
    <p>其中，由于升级控制器和MSC Server、 UMG构成分布式系统，由升级控制器对MSC Server、 UMG进行集中控制，分散处理，具体实现时，升级控制器作为整个事务处理过程的 控制者和协调者实现控制。</p>
    <p>108: MSC Server收到升级命令后，进行预升级；</p>
    <p>其中，MSC Server收到升级命令后，进行预升级，所谓预升级是指MSt Server会对自</p>
    <p>9身的程序数据等预处理，但不会影响MSC Server自身提供的业务的正常运行，当MSC Server 预升级成功，MSCServer会更新自身的版本号为最新的版本号，此时，MSC Server随时接收 来自升级控制器的升级提交命令，进行版本的快速切换，由于预升级的过程中对自身的程序 数据的预处理，所以当收到升级提交命令时，通过该升级提交命令的触发可以迅速切换到最 新的版本下运行。</p>
    <p>MSC Server进行预升级后，并通过预升级响应，将预升级后的状态及时向升级控制器 进行反馈。</p>
    <p>109:升级控制器收到MSC Server返回的预升级响应，判断MSC Server是否预升级成功， 如果是，则执行步骤110;否则，执行步骤114;</p>
    <p>其中，该预升级响应中可以携带MSC Server进行预升级后的版本号，此时升级控制器可 以对接收到该MSC Server预升级响应中携带的版本号和在步骤101中获取的来自客户端下发 的MSC Server的最新版本号进行比较，判断MSC Server是否预升级成功，如果一致则表示 MSC Server预升级成功；否则，表示MSC Server预升级失败。其中，由于该通信系统中需 要对MSC Server和UMG执行联动升级，只有在MSC Server和UMG全部预升级成功收到升 级确认后，才完成了此次需要进行联动升级设备的整体升级，而当升级控制器判断MSC Server 的预升级失败，表示此次升级失败，MSC Server预升级失败，执行升级回退，回退到此次预 升级前的版本下，从而保证了需要联动升级的设备（MSCServer、 UMG)的升级的完整性和 一致性。</p>
    <p>110:当MSC Server预升级成功，升级控制器向UMG下发升级命令； 111: UMG收到升级命令后，进行预升级；</p>
    <p>与MSC Server的预升级过程类似，UMG收到升级命令后，进行预升级，对自身的程序 数据等进行预处理，但是不会影响到UMG自身提供的业务的正常运行。UMG进行预升级后， 并通过预升级响应，将预升级后的状态及时向升级控制器进行反馈。</p>
    <p>112:升级控制器收到UMG返回的预升级响应，判断UMG是否预升级成功，如果是， 则执行步骤U3;否则，执行步骤115;</p>
    <p>113:升级控制器分别向MSC Server和UMG下发升级提交命令，并向客户端返回升级 成功响应，流程结束。</p>
    <p>其中，MSC Server和UMG收到由升级控制器下发升级成功的提交命令，才会对自身的 数据、程序进行更新，完成版本的快速切换从而真正实现版本的升级，此时，MSC Server和 UMG分别都工作在各自最新的版本下，从而保证了升级后的MSC Server和UMG配合工作所提供的业务的正常运行。</p>
    <p>114:升级控制器向MSC Server下发预升级失败通知并向客户端返回升级失败响应，表 示MSC Server和UMG的联动升级失败，流程结束。</p>
    <p>其中，当MSC Server收到失败通知后执行升级回退，回退到MSC Server初始未升级状 态（即回退到升级前的版本）。</p>
    <p>115:升级控制器分别向UMG和MSC Server下发预升级失败通知并向客户端返回升级 失败响应，表示此时MSC Server和UMG的联动升级失败，流程结束。</p>
    <p>其中，由于MSC Server和UMG需要联动升级，当UMG预升级失败，需要将UMG回 退到UMG初始的未升级状态，同时为了保证MSC Server和UMG配合工作所提供的业务的 正常的运行，也需要将MSC Server回退到未升级的状态，从而保证了联动升级的完整性和一 致性。</p>
    <p>116:当MSC Server和UMG不需要进行联动升级时，升级控制器分别向MSC Server和 UMG下发各自的升级命令，完成其各自的独立升级，升级成功后流程结束。'</p>
    <p>其中，当MSC Server和UMG不需要进行联动升级时，升级控制器可以分别下发MSC Server和UMG各自的升级命令，当MSC Server和UMG收到各自的升级命令时，可以利用 获取的最新版本进行升级，从而完成自身的升级过程，并及时通过升级控制器向客户端反馈 升级成功/失败的响应。</p>
    <p>其中，上述步骤101至步骤105为待升级网络设备获取升级版本的准备工作，本发明实 施例不限制待升级的网络设备获取升级版本的的具体实现形式。上述本实施例以联动升级的 设备的个数为2个为例进行的说明，当联动升级的设备的个数大于2个时，方法与上述步骤 提供的方法类似，只有当需要联动升级的设备全部都预升级成功后，才会进行各设备的升级 提交，各设备才会完成自身的版本的快速切换；当需要联动升级的设备中，当前进行预升级 的设备失败，则需要对已经进行预升级的设备进行版本的回退，从而保证需要联动升级的设 备提供的业务的正常运行，方法类似，不再赘述。</p>
    <p>本发明实施例提供的实现网络设备升级的方法，充分运用了版本承载和升级命令控制分 离的思想，将升级命令控制流和版本数据流进行有效的隔离，参见图2，为本发明实施例提 供的信息流示意图，如图所示，虚线代表了升级命令控制流，实线代表了版本数据流，利用 升级控制器来进行升级命令的控制，通过充当版本服务器的客户端与各升级设备之间的交互, 来承载升级过程中需要的版本数据，通过升级控制器与各升级设备之间的交互，来达到升级 命令下发和接收，从而实现对设备升级流程的控制，其中，客户端，面向用户其提供的功能包括接收用户升级指令，然后触发升级控制器启动升级 过程，接收升级进度指示并反馈给用户；</p>
    <p>其中，为了给用户更为直观的升级体验，可以实时的接收升级控制器反馈的升级进度， 并以相应的形式（如进度条等）将进度反馈给用户，例如，可以将升级进度鼻化，例如当升 级进行到一半时，向用户指示50%,表示此次升级已经进行了整个升级过程的50%,还可以 采用窗口的形式，将升级过程中每一个阶段和步骤所执行的动作详细的提供给用户。本发明 实施例不限制采用的具体的反馈方式和方法。</p>
    <p>升级控制器，做为整个升级过程的控制者，其主要功能包括控制整个升级过程，根据业 务逻辑触发相应设备进行版本升级，启用分布式事务控制相关设备升级的一致性和可靠性；</p>
    <p>升级设备，用于在升级控制器的控制下，从充当版本服务器的客户端下载升级版本，执 行本设备的具体升级命令，执行版本快速切换和版本回退的具体命令。</p>
    <p>相应地，参见图3，为针对本发明实施例提供的实现网络设备升级的方法，其升级过程 中各实体的信息交互示意图，如图所示，给出了升级命令交互（虚线）和版本数据交互（实 线）的示意，以MSC Server和UMG需要联动升级，且需要优先升级MSC'Server为例进行 说明：</p>
    <p>1.客户端给升级控制器下发版本下载命令，命令中包含MSC Server和UMG的设备标 识以及相应的版本号；</p>
    <p>其中，本领域技术人员可以获知，由于可以通过升级包的形式实现新版本的获取，所以 该版本下载命令具体可以下载升级包命令。</p>
    <p>'2-3.升级控制器基于设备标识和版本号通知MSC Server和UMG到客户端获取升级版本； 4-5. MSC Server和UMG作为获取资源的FTP (File Transfer Protocal，文件传输协议） 客户端，客户端作为提供资源的FTP服务器，MSC Server和UMG基于FTP分别从客户端下 载升级版本到本地指定目录下；并通过升级控制器向客户端返回获取成功的响应；</p>
    <p>6. 客户端收到MSC Server和UMG下载版本成功的响应后，向升级控制器下发启动升 级命令；</p>
    <p>其中，上述交互过程1至6属于待升级网络设备获取升级版本的准备工作，本发明实施 例不限制待升级的网络设备获取升级版本的的具体实现形式。</p>
    <p>7. 升级控制器判断MSC Server和UMG需要进行联动升级，MSC Server和UMG已经 构成了分布式系统，在升级控制器上启动一个分布式事务；</p>
    <p>其中，所谓分布式事务是指在面向对象的设计的过程中，在完成一个任务时至少需要两个子步骤进行处理，此时需要一个协调者来对上述各子步骤进行集中控制和协调，使得子步 骤能够处于集中控制，分散处理的状态，该协调者对各子步骤进行控制，只有当所有的子步 骤按照预设的规则成功完成了处理动作，该协调者才会向各子步骤进行确认，从而实现完成</p>
    <p>需要处理的任务；如果当任一子步骤出现失败时，该协调者会进行协调工作，进行事务的回 滚，从而确保了完成任务的一致性和完整性。</p>
    <p>8. 升级控制器向MSC Server下发升级命令；MSC Server收到该升级命令后，执行自身 的预升级；</p>
    <p>9. 升级控制器判断MSC Server预升级是否成功，成功则执行UMG的预升级；失败则 事务回滚，升级回退；</p>
    <p>10. 当MSC Server预升级失败，升级控制器向客户端返回升级失败的响应；</p>
    <p>11. 当MSC Server预升级成功，升级控制器向UMG下发升级命令；同理，UMG执行 预升级；</p>
    <p>12. 升级控制器判断UMG预升级是否成功，成功则执行下个设备的升级（图中未示出）， 失败则事务回滚（transaction rollback),升级回退；</p>
    <p>所谓事务回滚，是指对于联动操作的步骤，例如，步骤1和步骤2，如臬步骤2出现失 败，则可以把步骤1中已经操作的数据执行还原，从而确保了联动操作的正确性和一致性。</p>
    <p>13. 当UMG预升级失败，升级控制器向客户端返回升级失败的响应；</p>
    <p>14. 升级控制器向MSC Server下发升级提交命令；</p>
    <p>15. 升级控制器向UMG下发升级提交命令；</p>
    <p>当升级控制器判断需要联动升级的MSC Server和UMG都预升级成功后，执行上述步骤 14和15，进行升级提交，且在迸行升级提交时.，可以同时以命令的形式进行升级提交，也可 以以一定的先后顺序以命令的方式进行升级提交。相应地，当待升级网络设备收到升级控制 器下发的升级提交后，执行版本的快速切换，从而完成整个升级过程。</p>
    <p>16. 结束事务。</p>
    <p>17. 升级控制器向客户端返回升级成功响应。</p>
    <p>综上，升级控制器作为事务控制者和协调者，只有MSC Server和UMG都预升级成功， 才能分别下发升级提交，MSC Server和UMG执行版本的快速切换，其中在后执行联动升级 的UMG预升级失败，MSC Server和UMG都需要进行回退。从而保证了 MSC Server和UMG 的升级的完整性和一致性。</p>
    <p>本发明实施例将通信设备的升级的流程划分为：升级前的检&#26619;、升级执行、升级后的验</p>
    <p>13证和升级回退，从而无论是对哪种通信设备而言，如MSC Server或UMG,其升级都需要遵 循该固化的流程，并且基于该流程，提供客户端和升级控制器之间的用于进行命令交互的松 耦合（loosely coupled,其中，将分布式协调中的组件互相依赖的程度称为耦合，相应地， 所谓松耦合是指基于消息的系统，进行交互的组件并不知道对方是如何实现的，由于组件之 间的通讯由消息支配，只要消息符合协商的架构，则组件双方可以根据需要进行相应的更改， 而不必担心会破坏对方组件。）和粗粒度（coarse grain)的接口，实现了一个客户端可以为 多个通信设备提供升级的功能，达到客户端和通信设备的解耦（decouple)的目的。具体实现 可以采用如下方式：</p>
    <p>通过提供原语库，该原语库中保存大量丰富的用于升级的原语，所谓原语是指对升级所 需要的最小操作动作的描述，例如读、写、删等等，例如当设备X需要进行升级时，需要采 用原语A、 B和C构成其升级步骤，而设备Y需要通过原语A、 C、 D、 E构成其升级步骤， 并且各设备采用自身的脚本对各自的原语进行描述，所谓脚本描述就是利用设备自身的配置 文件，将原语描述成适合自身使用的程序语言，其中，设备X和设备Y的脚本可能相同也可 能不同，例如设备X工作在Windows环境下，采用适用于Windows环境的脚本对原语A、 B、 C进行描述；设备Y工作在Linux环境下，采用适用于该Linux的脚本对原语A、 C、 D、 E 进行描述。 '</p>
    <p>本发明实施例提供的升级控制器，通过解释脚本实现获取升级原语从而执行升级流程， 达到完成设备的升级的目的，并且该升级控制器通过采用跨平台的编程语言如Java等实现， 可以提供跨平台（如可以运行在Unix、 Windows和Linux环境)的使用，从而为不同平台和不 同架构下运行的通信设备的升级，提供了一个统一的集成环境。例如针对设备X,由于本发 明实施例提供的升级控制器可以支持跨平台运行，所以获取到设备X上报的Windows环境的 脚本后，可以对该脚本进行解释从而获取升级厚语执行该设备X的升级流程，完成设备X的 升级；同理，由于该升级控制器同样支持Linux，从而获取到设备Y的使用Linux环境的脚 本，同样可以完成该设备Y的升级。</p>
    <p>综上所述，本发明实施例提供的实现网络设备升级的方法，通过升级控制器实现依次对 需要联动升级的通信设备进行预升级，当所有的需要联动升级的通信设备预升级成功后，才 会进行升级确认，从而保证了需要联动升级的通信设备的升级完整性和一致性，提高了升级 效率，并且本发明实施例提供的网络设备的升级方法，适用于不同平台和架构下的通信设备</p>
    <p>的升级，通过编程设计实现为用户提供适用于各通信设备升级的统一的客户端和用户体验； 通过采用升级原语和升级流程脚本的编写和解释，为不同平台和架构下的通信设备提供了统一的升级环境；通过对升级流程的固化，提供了松耦合和粗粒度的升级接口，实现了客户端 和各类通信设备的解耦。</p>
    <p>实施例2</p>
    <p>参见图4，本发明实施例提供了一种实现网络设备升级的系统，包括：升级控制器201;</p>
    <p>和网络设备202，其中，</p>
    <p>升级控制器201,用于控制需要联动升级的网络设备202进行预升级；判断网络设备202 是否预升级成功，当网络设备202全部预升级成功后，对网络设备202进行升级确认，完成 对网络设备202的升级；</p>
    <p>网络设备202，用于接收升级控制器201发送的升级命令，进行预升级；还用于接收升 级控制器201发送的升级提交，执行版本的切换。</p>
    <p>进一步地，参见图5，本发明实施例提供的系统还可以包括：</p>
    <p>客户端设备203，用于向升级控制器201下发版本下载命令；版本下载命令中携带网络 设备标识和升级版本号；当收到网络设备202发送的版本请求后，向网络设备202提供与升 级版本号对应的升级版本；当收到网络设备202获取升级版本成功的响应后，通知升级控制 器201对网络设备202进行升级；</p>
    <p>相应地， '</p>
    <p>升级控制器201，还用于获取客户端设备203发送的版本下载命令后，通知网络设备202 获取升级版本；当收到客户端设备203发送的升级通知后，启动对网络设备202的升级。</p>
    <p>其中，升级控制器201转发客户端设备203和网络设备202的交互命令，网络设备202 和客户端设备203通过该升级控制器201转发的交互命令交互后，从而实现网络设备202获 取用于进行升级切换的升级版本。</p>
    <p>'由于多个网络设备202中的网络设备的操作系统为相同或不同；为了能够支持操作系统 不同的网络设备的升级，相应地，升级控制器201提供支持至少一个操作系统的控制功能服 务，从而确保实现工作在不同的操作系统下的需要联动升级的网络设备的联动升级。</p>
    <p>并且，本发明实施例提供的升级控制器201当判断网络设备202不需要联动升级时，分 别升级网络设备202;网络设备202，还用于当收到升级控制器201发送的失败通知后，执行 回退，回退到预升级之前的版本。</p>
    <p>综上，本发明实施例提供的实现网络设备升级的系统，通过升级控制器实现依次对需要 联动升级的通信设备进行预升级，当所有的需要联动升级的通信设备预升级成功后，才会进行升级确认，从而保证了需要联动升级的通信设备的升级完整性和一致性，提高了升级效率， 并且本发明实施例提供的网络设备的升级系统，适用于不同平台和架构下的通信设备的升级， 为用户提供适用于各通信设备升级的统一的客户端设备和用户体验；通过采用升级原语和升 级流程脚本的编写和解释，为不同操作平台和架构下的通信设备提供了统一的升级环境；通 过对升级流程的固化，提供了松耦合和粗粒度的升级接口，实现了客户端设备和各通信设备 的解耦。</p>
    <p>实施例3</p>
    <p>参见图6，本发明实施例提供了一种升级控制器，该升级控制器包括： 判断模块301,判断网络设备是否需要联动升级；</p>
    <p>第一处理模块302，用于当判断模块301的判断结果为网络设备需要联动升级，控制网 络设备进行预升级；还用于判断网络设备是否预升级成功，当网络设备全部预升级成功后， 对网络设备进行升级确认，完成对网络设备的升级。</p>
    <p>进一步地，</p>
    <p>上述第一处理模块302，还用于控制网络设备进行预升级时，如果当前网络设备预升级 失败，则通知已完成预升级的网络设备分别回退到各自预升级之前的版本。 其中，参见图7，本发明实施例提供的升级控制器还可以包括：</p>
    <p>第二处理模块303，用于当判断模块301的判断结果为网络设备不需要fe动升级，分别 升级网络设备。</p>
    <p>此外，本发明实施例提供的升级控制器还可以用于通知网络设备获取用于进行升级的升 级版本，相应地，本发明实施例提供的升级控制器还包括：</p>
    <p>通知模块304，用于当获取到客户端设备发送的版本下载命令后，通知网络设备获取升 级版本；</p>
    <p>'启动模块306，用于接收客户端设备发送的升级通知后，启动对网络设备的升级。</p>
    <p>其中，本发明实施例提供的升级控制器还可以包括转发模块305，用于当通知模块304 通知了网络设备获取升级版本后，转发客户端设备和网络设备的交互命令，网络设备和客户 端设备通过交互命令交互后，从而实现网络设备获取用于进行升级切换的升级版本</p>
    <p>相应地，上述启动模块306，用于在转发模块305转发了客户端设备和网络设备的交互 命令后，接收客户端设备发送的升级通知后，启动对网络设备的升级。</p>
    <p>由于多个网络设备中的网络设备的操作系统为相同或不同；为了能够支持操作系统不同的网络设备的升级，本发明实施例提供的升级控制器可以支持跨平台的部署，提供支持至少 一个操作系统的服务，从而确保实现工作在不同的操作系统下的需要联动升级的网络设备的 联动升级。</p>
    <p>本发明实施例提供的升级控制器总控整个升级的过程，对需要联动升级的网络设备进行 升级控制（如启用分布式事务的方式），从而确保了需要联动升级的网络设备升级的一致性和 完整性，并且，本发明实施例提供的升级控制器支持跨操作系统平台，能够实现控制工作在 不同的操作系统下的网络设备的升级逻辑；由于不同网络设备基于自身特点编写的升级流程 脚本和升级原语集成在了该升级控制器中，该升级控制器通过解释执行升级流程和升级原语 来完成各网络设备的升级，从而屏蔽了不同的网络设备升级流程的差异和接口的差异。</p>
    <p>实施例4</p>
    <p>参见图8，本发明实施例提供了一种网络设备，该网络设备包括： 升级命令接收模块401，用于接收升级控制器发送的升级命令；</p>
    <p>升级模块402，用于收到升级命令接收模块401接收到的升级命令后，进行预升级；当 收到.升级控制器发送的升级确认后，执行版本的快速切换。</p>
    <p>其中，参见图9，本发明实施例提供的网络设备还包括回退模块403，该回退模块403用 于当收到升级控制器发送的升级失败的通知后，回退到预升级之前的版本。</p>
    <p>其中，进一步地，本发明实施例提供的网络设备还可以包括：</p>
    <p>版本获取模块404，该版本获取模块404用于在升级控制器的掉制下，完成升级版本的 获取。</p>
    <p>本发明实施例提供的网络设备，通过在接收升级控制器发送的升级命令后执行预升级； 当收到升级控制器发送的升级确认后，执行版本的快速切换；当收到升级控制器发送的失败 通知后，回退到预升级之前的版本，从而实现了当多个网络设备需要联动升级时，在升级控 制器的控制下，确保了升级的完整性和一致性，保证了需要联动升级的多个网络设备升级过 程中'所提供业务的可靠性。</p>
    <p>综上，本发明实施例提供的技术方案，对需要联动升级的产品进行升级时，通过升级控 制器提供分布式事务机制，自动保证升级的完整性和一致性，并且能够提供统一的客户端和 用户体验，可以灵活部署，既可以作为工具独立部署运行，又可以部署在其它系统上(如-EMS);提供了统一的跨平台升级控制器，给不同平台和不同架构的并级设备提供统一的二次 开发集成环境，屏蔽不同设备的升级流程差异和接口差异，可以运行在Unix、 Windox和Linux环境下；由于客户端和升级控制器之间统一的粗粒度接口，降低客户端与升级设备之间的耦 合程度。</p>
    <p>综上所述，本发明实施例提供的技术方案，针对需要联动升级的产品升级时，通过升级 控制器提供分布式事务机制，自动保证升级的完整性和一致性，降低了用户升级技能要求， 提高了升级效率；对于不需要进行联动升级的产品的升级，也可以通过该升级控制器实现其 各自的升级，通过提供统一的跨平台升级控制器，给不同平台和不同架构的升级部件提供了 统一的二次开发集成环境，屏蔽了不同部件的升级流程差异和部件对外的接口差异，提高了 升级控制器的复用度。通过客户端灵活部署(既可以作为工具独立部署，又可以部署在其它系 统上，如：网管)和升级控制器的跨平台部署运行（可以运行在Unix、 Windows和Linux),提 高了通信产品升级部署实施的灵活性，降低了现场实施的难度和成本。通过提供客户端和升 级控制器之间统一的粗粒度接口，降低了客户端与部件之间的耦合程度，提高了升级的可扩 展性。</p>
    <p>本发明实施例中的全部或部分步骤，可以利用软件实现，相应的软件程序可以存储在可 读取的存储介质中，如光盘或硬盘等。</p>
    <p>以上仅为本发明的具体实施例，并不用以限制本发明，对于本技术领域的普通技术人员 来说，凡在不脱离本发明原理的前提下，所作的任何修改、等同替换、改进等，均应包含在 本发明的保护范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101521600B?cl=zh">CN101521600B</a></td><td class="patent-data-table-td patent-date-value">2009年4月3日</td><td class="patent-data-table-td patent-date-value">2011年6月15日</td><td class="patent-data-table-td ">中国电信股份有限公司</td><td class="patent-data-table-td ">一种网关设备中业务控制方法和网关设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101894052A?cl=zh">CN101894052A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年3月4日</td><td class="patent-data-table-td patent-date-value">2010年11月24日</td><td class="patent-data-table-td ">成都市华为赛门铁克科技有限公司</td><td class="patent-data-table-td ">一种升级方法、系统和控制器</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101894052B?cl=zh">CN101894052B</a></td><td class="patent-data-table-td patent-date-value">2010年3月4日</td><td class="patent-data-table-td patent-date-value">2012年12月12日</td><td class="patent-data-table-td ">华为数字技术（成都）有限公司</td><td class="patent-data-table-td ">一种升级方法、系统和控制器</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102025778A?cl=zh">CN102025778A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年11月25日</td><td class="patent-data-table-td patent-date-value">2011年4月20日</td><td class="patent-data-table-td ">成都勤智数码科技有限公司</td><td class="patent-data-table-td ">一种基于Shell的软件版本升级工作方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US8782181">US8782181</a></td><td class="patent-data-table-td patent-date-value">2010年11月15日</td><td class="patent-data-table-td patent-date-value">2014年7月15日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">Method and system for upgrading network device</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=p-dlBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012240000">H04L12/24</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=p-dlBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012260000">H04L12/26</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2008年12月3日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年1月28日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年5月11日</td><td class="patent-data-table-td ">C02</td><td class="patent-data-table-td ">Deemed withdrawal of patent application after publication (patent law 2001)</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/3dd2669adcbb33983173/CN101316189A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%8D%87%E7%BA%A7%E7%9A%84%E6%96%B9%E6%B3%95.pdf?id=p-dlBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U2newdTYsVTTeLu3RRGOuQ9-lDpeA"},"sample_url":"https://www.google.com/patents/reader?id=p-dlBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>