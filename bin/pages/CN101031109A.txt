<!DOCTYPE html><html><head><title>专利 CN101031109A - 一种短消息增值业务的互联方法及系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种短消息增值业务的互联方法及系统"><meta name="DC.contributor" content="聂荣初" scheme="inventor"><meta name="DC.contributor" content="李毅" scheme="inventor"><meta name="DC.contributor" content="杨金舟" scheme="inventor"><meta name="DC.contributor" content="中兴通讯股份有限公司" scheme="assignee"><meta name="DC.date" content="2007-4-6" scheme="dateSubmitted"><meta name="DC.description" content="本发明有关于一种短消息增值业务的互联方法及系统，其适用于GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000网络的短消息增值业务，该系统包括短消息增值业务平台网关VPGW，存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息增值业务平台SMVP中，提供SMVP查询外业务区用户的被叫业务签约标志以及提供SMVP与SMVP之间的消息转发功能。本发明还提供了一种相应的短消息主被叫增值业务互联方法。根据本发明的系统和方法能够使短消息增值业务系统经过少量的改造就能平滑的从只支持本业务区的增值业务到支持全网的增值业务。极大加强了整个短消息增值系统的稳定性，提高了增值业务的可扩展性，提升了整个短消息增值业务的品牌形象。"><meta name="DC.date" content="2007-9-5"><meta name="citation_patent_publication_number" content="CN:101031109:A"><meta name="citation_patent_application_number" content="CN:200710090433"><link rel="canonical" href="https://www.google.com/patents/CN101031109A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101031109A?cl=zh"/><meta name="title" content="专利 CN101031109A - 一种短消息增值业务的互联方法及系统"/><meta name="description" content="本发明有关于一种短消息增值业务的互联方法及系统，其适用于GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000网络的短消息增值业务，该系统包括短消息增值业务平台网关VPGW，存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息增值业务平台SMVP中，提供SMVP查询外业务区用户的被叫业务签约标志以及提供SMVP与SMVP之间的消息转发功能。本发明还提供了一种相应的短消息主被叫增值业务互联方法。根据本发明的系统和方法能够使短消息增值业务系统经过少量的改造就能平滑的从只支持本业务区的增值业务到支持全网的增值业务。极大加强了整个短消息增值系统的稳定性，提高了增值业务的可扩展性，提升了整个短消息增值业务的品牌形象。"/><meta property="og:title" content="专利 CN101031109A - 一种短消息增值业务的互联方法及系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101031109A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101031109A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101031109A&amp;usg=AFQjCNFJHCd0y0a6_yf3fPjUh89myDk-6w" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/27d37ccae87a2bf3c0a0/CN101031109A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/27d37ccae87a2bf3c0a0/CN101031109A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101031109A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101031109A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101031109A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN100536590C?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101031109A?cl=zh" style="display:none"><span itemprop="description">本发明有关于一种短消息增值业务的互联方法及系统，其适用于GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000网络的短消息增值业务，该系统包括短消息增值业务平台网关VPGW，存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息 ...</span><span itemprop="url">https://www.google.com/patents/CN101031109A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101031109A - 一种短消息增值业务的互联方法及系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101031109A - 一种短消息增值业务的互联方法及系统" title="专利 CN101031109A - 一种短消息增值业务的互联方法及系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101031109 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200710090433</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2007年9月5日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2007年4月6日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年4月6日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN100536590C?hl=zh-CN&amp;cl=zh">CN100536590C</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200710090433.0, </span><span class="patent-bibdata-value">CN 101031109 A, </span><span class="patent-bibdata-value">CN 101031109A, </span><span class="patent-bibdata-value">CN 200710090433, </span><span class="patent-bibdata-value">CN-A-101031109, </span><span class="patent-bibdata-value">CN101031109 A, </span><span class="patent-bibdata-value">CN101031109A, </span><span class="patent-bibdata-value">CN200710090433, </span><span class="patent-bibdata-value">CN200710090433.0</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%81%82%E8%8D%A3%E5%88%9D%22">聂荣初</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E6%AF%85%22">李毅</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%A8%E9%87%91%E8%88%9F%22">杨金舟</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%AD%E5%85%B4%E9%80%9A%E8%AE%AF%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">中兴通讯股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101031109A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101031109A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101031109A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (4),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200710090433&amp;usg=AFQjCNE87YlABJP-ImOpA5udw_BFKp4LyA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101031109A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEiB92NQ9bWN7zL5Q2DQroGS84q3A"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT121947236" lang="ZH" load-source="patent-office">一种短消息增值业务的互联方法及系统</invention-title>
      </span><br><span class="patent-number">CN 101031109 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA108180887" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明有关于一种短消息增值业务的互联方法及系统，其适用于GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000网络的短消息增值业务，该系统包括短消息增值业务平台网关VPGW，存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息增值业务平台SMVP中，提供SMVP查询外业务区用户的被叫业务签约标志以及提供SMVP与SMVP之间的消息转发功能。本发明还提供了一种相应的短消息主被叫增值业务互联方法。根据本发明的系统和方法能够使短消息增值业务系统经过少量的改造就能平滑的从只支持本业务区的增值业务到支持全网的增值业务。极大加强了整个短消息增值系统的稳定性，提高了增值业务的可扩展性，提升了整个短消息增值业务的品牌形象。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(9)</span></span></div><div class="patent-text"><div mxw-id="PCLM50768426" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种短消息增值业务互联系统，其特征在于包括短消息增值业务平台网关VPGW，存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息增值业务平台SMVP中，提供SMVP查询外业务区用户的被叫业务签约标志，该被叫业务签约标志表示用户是否签约了主叫和被叫业务，以及提供SMVP与SMVP之间的消息转发功能，该短消息增值业务互连系统至少包括：业务控制模块，用于向SMVP同步全网用户的被叫业务签约标志，提供SMVP查询用户的被叫业务签约标志；前端路由模块，用于和SMVP之间的连接，实现SMVP之间的消息转发等功能；路由配置模块，用于配置路由信息；数据库模块，用于存储全网用户的被叫业务签约标志；业务控制模块和前端路由模块是整个系统的中心，它们之间采用内部协议进行通信；业务控制模块与数据库模块之间采用内部协议进行通信；路由配置模块与前端路由模块之间采用内部协议进行通信；其他模块之间不进行通信。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1的短消息增值业务互联系统，其特征在于适用于GSM、GPRS、WCDMA、TDSCDMA、CDMA或CDMA2000网络。</div>
    </div>
    </div> <div class="claim"> <div num="3" class="claim">
      <div class="claim-text">3.一种短消息主被叫增值业务互联方法，用于包括短消息中心SMSC，短消息增值业务平台SMVP以及短消息增值业务平台网关VPGW的短消息增值业务互联系统当中，其特征在于：其中SMSC仅存储本地用户增值业务的签约标志，以便判断用户是否签约了主被叫增值业务，并触发到SMVP平台；SMVP存储本业务区用户主被叫业务签约的详细信息和外业务区用户被叫业务签约标志，以便把本业务区用户签约的被叫业务标志上传给VPGW。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求3所述的短消息主被叫增值业务互联方法，其特征在于还包括在SMVP与VPGW之间采用现有的SMPP协议并新增四对消息：消息A1.设置用户签约标志请求SET_SERVICE，即VPGW发送给SMVP的消息，用于通知SMVP用户是否签约了主被叫业务；消息A2.设置用户签约标志响应SET_SERVICE_RESP，即SMVP返回给VPGW的消息，用于告诉VPGW本次SET_SERVICE操作成功与否；消息B1.更新用户签约标志请求UPDATE_SERVICE，即SMVP发送给VPGW的消息，用于通知VPGW用户是否签约了主被叫业务；消息B2.更新用户签约标志响应UPDATE_SERVICE_RESP，即VPGW返回给SMVP的消息，用于告诉SMVP本次UPDATE_SERVICE操作成功与否；消息C1.查询用户签约标志请求QUERY_SERVICE，即SMVP发送给VPGW的消息，用于向VPGW查询用户被叫业务签约标志；消息C2.查询用户签约标志响应QUERY_SERVICE_RESP，即VPGW返回给SMVP的消息，用于告诉SMVP所查询用户的被叫业务签约；消息D1.前转消息请求FORWARD_SM，即SMVP与SMVP之间的消息，通过VPGW进行中转，用于SMVP把短消息投递到另一个SMVP，此消息还用于状态报告的返回；消息D2.前转消息响应FORWARD_SM_RESP，即SMVP与SMVP之间的消息，通过VPGW进行中转，用于接收方SMVP告知发起方SMVP消息接收的是否成功。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求4所述的短消息主被叫增值业务互联方法，其特征在于还包括以下步骤：步骤E.用户进行增值业务的开户；步骤F.SMVP把用户的增值业务签约的详细信息保存到本系统中，紧接着SMVP通过新增的与SMSC的交互消息SET_SERVICE，将用户签约业务标志发送给SMSC；步骤G.SMSC接收到SMVP的请求后，把用户的业务签约标志保存到本地数据库中；步骤H如果用户签约的是被叫业务那么SMVP通过新增的与VPGW的交互消息UPDATE_SERVICE将用户的被叫业务签约标志发送给VPGW；步骤I.VPGW把用户的被叫业务签约标志保存到本系统中，紧接着把该标志信息通过新增的SET_SERVICE消息转发给其他的SMVP；以及步骤J.SMVP把这些外地用户的被叫业务签约标志保存到本地数据库中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求5所述的短消息主被叫增值业务互联方法，其特征在于其中步骤E中所述增值业务的开户的方式包括短消息方式或营业厅方式。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求5所述的短消息主被叫增值业务互联方法，其特征在于还包括以下步骤：步骤K1.VPGW在接收到SMVP发送上来的用户被叫业务签约标志后先判断该用户是否已经签约过其他被叫业务，如果之前已经签约过，那么VPGW不把被叫业务标志同步到其他SMVP。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求5所述的短消息主被叫增值业务互联方法，其特征在于还包括以下步骤：步骤K2.VPGW在接收到SMVP发送上来的用户被叫业务签约标志后，不做任何判断直接同步到其他SMVP。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求5-8中任一项的短消息主被叫增值业务互联方法，其特征在于还包括以下步骤：步骤L.如果SMSC发现短消息的主被叫用户在本地数据库都查不到相关的数据时，SMSC需要发送QUERY_SERVICE请求到SMVP，查询被叫用户是否签约了被叫业务；步骤M.如果SMVP返回的QUERY_SERVICE_RESP消息表明了被叫用户未签约被叫业务的话，那么SMSC直接把短消息下发到被叫用户的手机上；如果QUERY_SERVICE_RESP消息中表明被叫用户签约了被叫业务的话，SMSC把短消息发送到SMVP；步骤N.SMVP接收到短消息后，把短消息转发给VPGW；步骤O.VPGW根据系统中配置的路由信息，把短消息转发到被叫用户归属的SMVP2上；步骤P.由SMVP2进行具体的短消息增值业务的处理，并把处理后的短消息发送给目的用户归属的SMSC2上；步骤Q.最后由SMSC2将短消息最终下发给被叫用户。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES57827765" lang="ZH" load-source="patent-office" class="description">
    <invention-title lang="ZH">一种短消息增值业务的互联方法及系统</invention-title>
    <technical-field>
      <p>技术领域</p>
      <p>本发明涉及短消息业务，具体涉及到一种短消息增值业务的互联方法和系统。</p>
    </technical-field>
    <background-art>
      <p>背景技术</p>
      <p>随着丰富多彩的短消息增值业务的开展，短消息已完全融入到人们的日常工作和生活中，已成为一个不可或缺的生活元素。同时也随着短消息业务的不断开展用户量已经趋向于饱和，如何能利用现有的用户资源挖掘出新的利润增长点已经成为了电信运营商研究的热门课题。目前国内电信运营商正在积极的改造现有的SMSC(短消息中心)并添加新系统SMVP(短消息增值业务平台)来提供各种基于主被叫的短消息增值业务，例如：短消息呼转，短消息自动恢复，短消息回执，短消息签名等。其中SMSC用于业务的触发，SMVP用于具体的业务控制和实现。</p>
      <p>用户可签约的增值业务划分为主叫类增值业务(简称为主叫业务)和被叫类增值业务(简称为被叫业务)这两大类，此后文中出现的增值业务和主被叫增值业务将特指同一事物。</p>
      <p>主叫业务的定义如下：当用户作为短消息的发送者时才能触发的增值业务称之为主叫业务。如短消息签名，短消息回执等。</p>
      <p>被叫业务的定义如下：当用户作为短消息的接收者时才能触发的增值业务称之为被叫业务。如短消息呼转，短消息自动回复，短消息过滤等。</p>
      <p>相关的现有技术专利文献包括：专利号为CN1852465A，名称为“一种无线网络及其短消息定制增值业务的方法”和专利号为CN1633191A，名称为“短消息增值业务联网系统及联网方法”。</p>
      <p>对于GSM(全球移动通信系统)/GPRS(通用无线分组业务)/WCDMA(宽带码分多址)/TDSCDMA(时分同步码分多址)/CDMA(码分多址)/CDMA2000(码分多址2000)移动网来说，短消息通讯通过以下步骤完成：主叫方A发送消息给被叫方B时，短消息先发送到A所归属的SMSC；SMSC检查到A用户签约了主被叫增值业务，把短消息投递到SMVP；SMVP接收到短消息后，根据A用户签约的详细信息实现增值业务功能，之后把短消息返回给SMSC；SMSC到B所属于的HLR(归属位置寄存器)上查找B的路由信息；HLR返回路由信息给SMSC；</p>
      <p>SMSC把短消息发送给B。</p>
      <p>上述现有技术只能开展和实现本业务区的增值业务，无法实现在全国开展统一的增值业务，因为每个短消息业务系统都是相互独立的。</p>
      <p>本发明提到的业务片区的定义如下：一个SMVP可以管辖多个SMSC，所有归属于这些管辖SMSC的短消息服务区总称为该SMVP的业务片区。举例说明：SMVP1管辖SMSC1，SMSC2，SMSC3；SMVP2管辖SMSC4，SMSC5，SMSC6；如果A用户的归属短消息中心是SMSC1，那么我们就称A用户属于SMVP的业务片区；相对于SMVP1来说，A用户属于本业务片区用户，但相对于SMVP2来说，A用户就成了外业务片区用户。</p>
      <p>参见图1A，如果A归属于SMSC1，B归属于SMSC3，当A给B发送短消息时，短消息先到达SMSC1上。SMSC1根据系统中存在的用户数据判断出A用户签约了增值业务并把短消息提交到SMVP1。由于SMVP1与SMVP2之间没有连接，因此，SMVP1在完成A用户的增值业务后直接把短消息下发给了SMSC1。SMSC1接收到短消息后把此消息最终下发给了用户B。这种处理流程导致了B用户的增值业务得不到触发。</p>
      <p>对于CDMA/CDMA2000移动网来说短消息通讯通过以下步骤完成：主叫方A发送消息给被叫方B时，短消息先发送到A所归属的SMSC1；SMSC1检查到A用户签约了主被叫增值业务，把短消息投递到SMVP；SMVP接收到短消息后，根据A用户签约的详细信息实现增值业务功能，之后把短消息返回给SMSC1；SMSC1把短消息通过网络侧信令的方式，发送到B所属于的SMSC2；SMSC2把短消息发送给B。</p>
      <p>上述现有技术能开展本业务区的增值业务，但在全国开展统一的增值业务将会遇到问题。根本原因在于短消息从SMSC1前转到SMSC2时，是通过信令来实现的，而信令无法承载业务必要的相关信息。因此开展全网业务时，可能会导致一些循环触发的问题。</p>
      <p>例如，短消息自动回复业务是指当被叫终端用户出差、开会或节假日时，当有人向此被叫发送短消息时，此业务就自动向主叫回复一条预先设置的留言短消息。</p>
      <p>参见图1B，示出了短消息自动回复业务的流程：1)当A、B均开通短消息自动回复业务，A归属SMSC1，B归属SMSC3；2)当A给B发信息时，短消息先到达SMSC1上；</p>
      <p>3)SMSC1把此消息通过信令转发给SMSC3；4)SMSC3判断出B用户签约了被叫业务并把短消息提交到SMVP2；5)SMVP2判断B用户签约了短消息自动回复业务，则根据用户的设置，产生一条新的短消息(主叫号码为B，被叫号码为A)，下发给SMSC3；6)SMSC3把短消息通过信令前转到SMSC1；7)由于信令无法承载业务信息，导致SMSC1又去判断A的业务，并且把短消息提交到SMVP1；8)SMVP1判断A用户签约了短消息自动回复业务，则根据用户的设置，产生一条新的短消息(主叫号码为A，被叫号码为B)，下发给SMSC1；9)SMSC1把短消息通过信令前转到SMSC3；10)跳到4)继续运行。</p>
      <p>从上面的描述中可以看出，在开展此被叫业务时，会存在循环触发的危险。</p>
      <p>本发明正是基于对短消息增值业务和对用户需求的理解，提出了一套全新的短消息增值业务互联方法和系统来解决以上提到的问题。</p>
    </background-art>
    <disclosure>
      <p>发明内容</p>
      <p>有鉴于此，本发明的主要目的在于提供一种短消息增值业务互联方法以及系统，能够使短消息增值业务系统经过少量的改造就能平滑的从只支持本业务区的增值业务到支持全网的增值业务。</p>
      <p>本发明适用于GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000网络。</p>
      <p>本发明的主要目的在于提供一种短消息增值业务互联系统，包括短消息增值业务平台网关VPGW，存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息增值业务平台SMVP中，提供SMVP查询外业务区用户的被叫业务签约标志，该被叫业务签约标志表示用户是否签约了主叫和被叫业务，以及提供SMVP与SMVP之间的消息转发功能，其至少包括：业务控制模块，用于向SMVP同步全网用户的被叫业务签约标志，提供SMVP查询用户被叫业务签约标志；前端路由模块，用于和SMVP之间的连接，实现SMVP之间的消息转发等功能；路由配置模块，用于配置路由信息；数据库模块，用于存储全网用户的被叫业务签约标志；业务控制模块和前端路由模块是整个系统的中心，它们之间采用内部协议进行通信；业务控制模块与数据库模块之间采用内部协议进行通信；路由配置模块与前端路由模块之间采用内部协议进行通信；其他模块之间不进行通信。</p>
      <p>本发明还提供一种短消息主被叫增值业务互联方法，用于包括短消息中心SMSC，短消息增值业务平台SMVP以及短消息增值业务平台网关VPGW的短消息增值业务互联系统当中，其中SMSC仅存储本地用户增值业务的签约标志，以便判断用户是否签约了主被叫增值业务，并触发到SMVP平台；SMVP存储本业务区用户主被叫业务签约的详细信息和外业务区用户被叫业务签约标志，以便把本业务区用户签约的被叫业务标志上传给VPGW。</p>
      <p>根据本发明的优选实施例，本发明所述的短消息主被叫增值业务互联方法具体包括以下步骤：步骤1)在SMVP与VPGW之间采用现有的SMPP协议并新增四对消息：消息A1.设置用户签约标志请求SET_SERVICE，即VPGW发送给SMVP的消息，用于通知SMVP用户是否签约了主被叫业务；消息A2.设置用户签约标志响应SET_SERVICE_RESP，即SMVP返回给VPGW的消息，用于告诉VPGW本次SET_SERVICE操作成功与否；消息B1.更新用户签约标志请求UPDATE_SERVICE，即SMVP发送给VPGW的消息，用于通知VPGW用户是否签约了主被叫业务；消息B2.更新用户签约标志响应UPDATE_SERVICE_RESP，即VPGW返回给SMVP的消息，用于告诉SMVP本次UPDATE_SERVICE操作成功与否；消息C1.查询用户签约标志请求QUERY_SERVICE，即SMVP发送给VPGW的消息，用于向VPGW查询用户被叫业务签约标志；消息C2.查询用户签约标志响应QUERY_SERVICE_RESP，即VPGW返回给SMVP的消息，用于告诉SMVP所查询用户的被叫业务签约；消息D1.前转消息请求FORWARD_SM，即SMVP与SMVP之间的消息，通过VPGW进行中转，用于SMVP把短消息投递到另一个SMVP，此消息还用于状态报告的返回；消息D2.前转消息响应FORWARD_SM_RESP，即SMVP与SMVP之间的消息，通过VPGW进行中转，用于接收方SMVP告知发起方SMVP消息接收的是否成功。</p>
      <p>本发明新增的这四对消息是在SMPP协议的基础上扩展而成的，下文还将给出详细的消息结构格式，请参见表1-表9，系统可以在此基础上根据需要对消息做相应的变型。</p>
      <p>根据本发明的优选实施例，本发明所述的短消息主被叫增值业务互联方法具体包括以下步骤：步骤2)业务的开通：步骤E.用户可以通过多种方式进行增值业务的开户；步骤F.SMVP把用户的增值业务签约的详细信息保存到本系统中，紧接着SMVP通过新增的与SMSC的交互消息SET_SERVICE，将用户签约业务标志发送给SMSC；步骤G.SMSC接收到SMVP的请求后，把用户的业务签约标志保存到本地数据库中；步骤H.如果用户签约的是被叫业务，那么SMVP通过新增的与VPGW的交互消息UPDATE_SERVICE将用户的被叫业务签约标志发送给VPGW；步骤I.VPGW把用户的被叫业务签约标志保存到本系统中，紧接着把该标志信息通过新增的SET_SERVICE消息转发给其他的SMVP；步骤J.SMVP把这些外地用户的被叫业务签约标志保存到本地数据库中。</p>
      <p>根据本发明的优选实施例，其中所述步骤E中所述增值业务的开户的方式例如包括短消息方式或营业厅方式。</p>
      <p>进一步的，由于SMVP只需要知道外业务区用户是否签约了被叫业务而不需要知道其具体签约了哪些业务，因此VPGW同步到SMVP的信息分以下几种情况：步骤K1.VPGW在接收到SMVP发送上来的用户被叫业务签约标志后先判断该用户是否已经签约过其他被叫业务，如果之前已经签约过，那么VPGW不把被叫业务标志同步到其他SMVP。</p>
      <p>步骤K2.VPGW在接收到SMVP发送上来的用户被叫业务签约标志后，不做任何判断直接同步到其他SMVP。</p>
      <p>根据本发明的优选实施例，本发明所述的短消息主被叫增值业务互联方法具体包括以下步骤：步骤3)业务的使用：步骤L.如果SMSC发现短消息的主被叫用户在本地数据库都查不到相关的数据时，SMSC需要发送QUERY_SERVICE请求到SMVP，查询被叫用户是否签约了被叫业务；步骤M.如果SMVP返回的QUERY_SERVICE_RESP消息表明了被叫用户未签约被叫业务的话，那么SMSC直接把短消息下发到被叫用户的手机上；如果QUERY_SERVICE_RESP消息中表明被叫用户签约了被叫业务的话，SMSC把短消息发送到SMVP；步骤N.SMVP接收到短消息后，把短消息转发给VPGW；步骤O.VPGW根据系统中配置的路由信息，把短消息转发到被叫用户归属的SMVP2上；步骤P.由SMVP2进行具体的短消息增值业务的处理，并把处理后的短消息发送给目的用户归属的SMSC2上；步骤Q.最后由SMSC2将短消息最终下发给被叫用户。</p>
      <p>采用本发明所述的方法和系统，达到了无缝连接短消息增值业务系统的效果，使得开展本地业务和开展全国业务能很好的结合起来，既能让各地开展自己个性化的增值业务，又让增值业务在全国范围内都能使用。这极大加强了整个短消息增值系统的稳定性，提高了增值业务的可扩展性，提升了整个短消息增值业务的品牌形象。</p>
      <p>本发明的其他优点、目标，和特征在某种程度上将在随后的说明书中进行阐述，并且在某种程度上，基于对下文的考察研究对本领域技术人员而言将是显而易见的，或者可以从本发明的实践中得到教导。本发明的目标和其他优点可以通过下面的说明书以及附图中所特别指出的结构来实现和获得。</p>
    </disclosure>
    <description-of-drawings>
      <p>附图说明</p>
      <p>为了使本发明的目的、技术方案和优点更加清楚，下面将结合附图对本发明作进一步的详细描述，其中：图1A为GSM短消息增值业务系统的组网示意图；图1B为CDMA/CDMA2000短消息增值业务系统的组网示意图；图2为本发明在GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000短消息网络中的组网示意图；图3示出了用户开/销户在整个短消息增值网络中的流程；图4示出了增值业务基本业务在整个短消息增值网络中的流程(开通全网服务)；图5为本发明的VPGW系统的结构图。</p>
    </description-of-drawings>
    <mode-for-invention>
      <p>具体实施方式</p>
      <p>下面结合附图对技术方案的实施作进一步的详细描述：图1A为GSM短消息增值业务系统的组网示意图；图1B为CDMA/CDMA2000短消息增值业务系统的组网示意图。</p>
      <p>从图1中我们可以看出，SMVP之间没有数据交互，SMVP可以管辖几个SMSC，用于并且只用于这几个SMSC的增值业务。</p>
      <p>根据本发明的短消息增值业务互联系统包括短消息增值业务平台网关VPGW，VPGW的主要功能是存储全网用户的被叫业务签约标志并将其同步到与该VPGW相连的短消息增值业务平台SMVP中，提供SMVP查询外业务区用户的被叫业务签约标志(表示用户是否签约了主叫和被叫业务)以及提供SMVP与SMVP之间的消息转发功能，其至少包含以下几个模块：业务控制模块，主要用于向SMVP同步全网用户的被叫业务签约标志，提供SMVP查询用户被叫业务签约标志；前端路由模块，用于和SMVP之间的连接，实现SMVP之间的消息转发等功能；路由配置模块，用于配置路由信息；数据库模块，用于存储全网用户的被叫业务签约标志；业务控制模块和前端路由模块是整个系统的中心，它们之间采用内部协议进行通信；业务控制模块与数据库模块之间采用内部协议进行通信；路由配置模块与前端路由模块之间采用内部协议进行通信；其他模块之间不进行通信。</p>
      <p>参见图5，示出了本发明的VPGW系统结构。下面将对每个模块的实施进行详细的说明。</p>
      <p>前置路由模块主要负责完成以下功能：1)支持扩展的SMPP协议，负责以客户端的身份连接SMVP。</p>
      <p>2)支持SMPP协议的解码功能。包括部分解码和全解码。部分解码表示只解码出重要的信息，如：消息ID，目的号码，网元ID；全解码为把扩展的SMPP消息解码成内部消息。例如：对FORWARD_SM使用的是部分解码，对UPDATE_SERVICE使用的是全解码。</p>
      <p>3)支持SMPP协议的编码功能。把内部消息编码成扩展的SMPP消息。例如：编码成SET_SERVICE发送给SMVP。</p>
      <p>4)负责请求消息的路由转发功能。根据消息的重要信息在路由表中查找到目的号码的地址，并进行转发工作。此部分功能需要使用2)中的部分解码来辅助完成。例如：接收到SMVP1的FORWARD_SM消息后，部分解码出消息ID，目的号码后，查找路由信息表，找到目的号码归属的SMVP2，则直接转发给SMVP2，查找不到则返回失败。</p>
      <p>5)负责请求响应的原路由返回功能。根据响应中的网元ID直接找到请求方的地址，并转发过去。例如：对FORWARD_SM_RESP消息的处理。</p>
      <p>路由配置模块主要负责完成以下功能：1)负责提供友好的人机界面供系统管理员对路由信息进行增、删、改以及查等操作；</p>
      <p>2)负责把路由信息同步到前置路由模块。</p>
      <p>业务控制模块主要负责完成以下功能：1)提供SMVP查询用户的被叫业务签约标志。前置模块接收到SMVP的QUERY_SERVICE请求时会解码成内部消息转发给业务控制模块，业务控制模块从数据库模块获取用户签约的被叫业务签约标志，以内部消息的形式返回给前置路由模块。前置路由模块编码成QUERY_SERVICE_RESP消息转发给SMVP。</p>
      <p>2)支持SMVP上传其所管辖的用户的被叫业务的签约标志。系统接收到UPDATE_SERVICE请求后，由前置模块进行完全解码并转发给业务控制模块，业务控制模块通过数据库模块把信息保存到数据库中。</p>
      <p>3)支持把全网被叫业务的签约标志同步到其他SMVP。当VPGW中的用户签约标志发生变化时，业务控制模块能通过SET_SERVICE消息通知该用户所不归属的其他SMVP(归属的SMVP上已经由数据，无需通知)。</p>
      <p>4)支持SET_SERVICE消息需要有重发机制。当通知某个SMVP失败时，业务控制模块能把此信息保存起来，经过一段时间后继续向该SMVP发送SET_SERVICE消息。</p>
      <p>5)支持批量同步用户签约标志功能。当有一个新的SMVP接入到短消息增值业务网络时，VPGW需要把系统中全部用户的签约标志同步给此SMVP，此功能需要SMVP配合，将在下文中给出具体实施方式。</p>
      <p>数据库模块主要负责完成以下功能：1)提供对物理数据库的增、删、改和查等一系列操作。</p>
      <p>2)提供内存数据库的管理，提供系统的性能。</p>
      <p>3)保存全网用户的签约标志信息。信息包括：用户号码，签约标志(一个BYTE即可，用于记录用户是否签约了被叫业务)。</p>
      <p>其他模块是系统的一些辅助功能模块，可以根据系统的需要另行加入。</p>
      <p>另外为了完成SMVP全网的互联工作，SMVP需要做出以下修改：1)支持保存外业务片区用户的被叫业务标志。当VPGW发送SETSERVICE消息给SMVP时，SMVP需要把此信息保存到本地数据库中，如果数据库中已有则可不进行操作。</p>
      <p>2)支持向VPGW上传本业务片区用户的被叫业务标志。当本业务片区用户的被叫业务签约情况发生变化(从无到有，或是从有到无)时，SMVP需要把此信息通过UPDATE_SERVICE消息发送给VPGW。其他情况均不通知。</p>
      <p>3)具备对UPDATE_SERVICE消息进行重试的功能。但向VPGW发送UPDATE_SERVICE消息失败时，SMVP需要此信息保存起来，经过一段时间后继续向该VPGW发送UPDATE_SERVICE消息</p>
      <p>4)具备判断被叫用户是否属于外用户片区的功能。当被叫用户属于外业务片区，并且签约了被叫业务时，SMVP把短消息转发给VPGW进行处理，否则SMVP把此条短消息直接下发给SMSC，最后由SMSC进行终呼给手机用户。</p>
      <p>5)具备发起批量同步所有用户签约标志请求功能。当SMVP首次连入短消息增值业务网络时，需要向VPGW主动发起需要批量所有用户签约标志的情况。VPGW收到请求后，向该SMVP进行同步。同步方式可以选用消息配合FTP方式进行。VPGW生成一份全网用户的被叫标志信息保存到文件中，并把文件上传给SMVP，完成后发送消息通知SMVP。SMVP接收到消息后，读取文件内容，并保存到本地数据库中。</p>
      <p>图2为本发明在GSM/GPRS/WCDMA/TDSCDMA/CDMA/CDMA2000短消息网络中的组网示意图。如图2所示，SMVP与SMVP之间是通过VPGW来完成相互之间的连接，SMVP与SMSC之间是直接连接。SMVP与VPGW之间，SMVP与SMSC之间使用的通信协议都是扩展的SMPP协议，其中包含了本发明中新定义的消息(参见表1-表9)。SMVP只用于处理本业务片区的用户签约的增值业务，当用户属于外地SMVP并且签约了被叫业务时，SMVP需要主动把短消息转发到VPGW，VPGW在根据自身配置的路由信息把短消息转发到被叫用户归属的SMVP，归属的SMVP用于处理被叫用户的被叫业务。举例说明如下(可以参考图2)：A用户属于SMSC1，B用户属于SMSC4，A、B用户都签约了主被叫业务。</p>
      <p>A用户发送消息给B用户，短消息到达SMSC1。</p>
      <p>SMSC1根据数据库中记载的用户增值业务签约标志判断出主叫用户A签约了主叫业务，于是把短消息发送到SMVP1进行处理。</p>
      <p>SMVP1进行相关的处理后，判断出被叫用户B不属于本业务片区，但其又签约了被叫业务，SMVP1把短消息发送到VPGW。</p>
      <p>5)VPGW根据路由信息把短消息转发到SMVP2。</p>
      <p>6)SMVP2接收到短消息之后进行相关的增值业务处理，之后发送给SMSC4。</p>
      <p>7)SMSC4用于把该条短消息发送给B用户。</p>
      <p>同时，当SMVP管辖的业务区中用户被叫业务签约标志发生变化时，需要通知VPGW，VPGW再同步到各个SMVP。</p>
      <p>图3为用户开/销户在整个短消息增值网络中的流程。</p>
      <p>步骤301为MS移动终端(如手机)发送短消息给SMVP1的开户接入号，短消息首先会发送到用户的归属短消息中心SMSC1。</p>
      <p>步骤302为SMSC1把短消息转发给SMVP1。</p>
      <p>步骤303为SMVP1解析用户发送上来的开户消息，把它转化成内部所需的增值业务签约信息并存入到数据库中。</p>
      <p>步骤304为SMVP1根据用户所有签约的业务(SMVP1提供的增值业务)标志构造出SET_SERVICE请求并发送给SMSC1。其中SMVP1可以把用户完整的业务签约标志(记录用户是否签约了主叫或是被叫业务)发给SMSC1，也可以简单的通知SMSC1，用户是否签约了主被叫业务。</p>
      <p>步骤305为SMVP2构造出UPDATE_SERVICE消息发送给VPGW。</p>
      <p>步骤306～307为VPGW把用户签约的被叫业务标志保存到本地数据库并同步到其他SMVP。</p>
      <p>图4为开通全网增值业务服务的情况下，增值业务基本业务在整个短消息增值网络中的流程。</p>
      <p>步骤401为MS1移动终端(如手机)发送短消息给MS2，短消息首先会发送到用户MS1的归属短消息中心SMSC1。</p>
      <p>步骤402～403为SMSC1查找短消息主叫用户签约的主叫业务标志和被叫用户签约的被叫业务标志，当存在签约标志时，把短消息通过标准的SMPP协议发送给SMVP1。</p>
      <p>步骤404为SMVP1获得短消息主叫用户签约的主叫业务标志，并根据预先配置好的业务触发优先级依次实现用户签约的主叫业务并进行相应的计费工作。</p>
      <p>步骤405～407为SMVP1发现目的用户为外地用户并且签约了被叫业务时，把短消息发送给VPGW进行处理；接着VPGW接到短消息后，根据配置好的路由信息把短消息转发到归属的SMVP2上进行处理。</p>
      <p>步骤408～411为SMVP2处理完短消息被叫用户签约的被叫业务后，把短消息发送给SMSC2，最终由SMSC2下发给被叫用户MS2。</p>
      <p>步骤412～415为SMSC2把此条短消息最终的发送结果依然通过标准的SMPP协议发送给SMVP2，SMVP2转发给VPGW，VPGW再转发给SMVP1，SMVP1最后把状态报告发送给SMSC1，SMSC1收到这条状态报告后进行相关的计费工作。</p>
      <p>其中步骤416为SMVP1处理主叫用户签约的一些特殊的主叫业务，如短消息回执业务。</p>
      <p>综上所述，本发明提供的方法和系统有机地把各个短消息增值业务系统联系在一起，为运营商开展全国性的增值服务提供了强有力的保障。</p>
      <p>以上所述仅为本发明的优选实施方式和系统框架，并不构成对本发明保护范围的限定。在不背离本发明精神及其实质的情况下，本领域技术人员当可根据本发明做出各种相应的改变和变形，但这些相应的改变和变形都应属于本发明所附的权利要求的保护范围。</p>
      <p>表1：SMVP与VPGW之间的消息</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表2：SET_SERVICE结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表3：SET_SERVICE_RESP结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表4：QUERY_SERVICE结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表5：QUERY_SERVICE_RESP结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表6：UPDATE_SERVICE结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表7：UPDATE_SERVICE_RESP结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表8：FORWARD_SM结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>表9：FORWARD_SM_RESP结构定义表</p>
      <p>
        <span class="patent-image-not-available"> </span>
      </p>
      <p>其中当FORWARD_SM消息中的esm_class取值为xx0001xx时，表示此条消息是状态报告。具体的格式可以参见SMPP3.4协议里的规定。</p>
    </mode-for-invention>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102209020A?cl=zh">CN102209020A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年3月30日</td><td class="patent-data-table-td patent-date-value">2011年10月5日</td><td class="patent-data-table-td ">中国移动通信集团公司</td><td class="patent-data-table-td ">一种业务路由方法及其装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102209020B?cl=zh">CN102209020B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年3月30日</td><td class="patent-data-table-td patent-date-value">2015年4月22日</td><td class="patent-data-table-td ">中国移动通信集团公司</td><td class="patent-data-table-td ">一种业务路由方法及其装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2008110090A1?cl=zh">WO2008110090A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年2月29日</td><td class="patent-data-table-td patent-date-value">2008年9月18日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">Processing method and processing center of short message value added service</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04W0004140000">H04W4/14</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04W0088180000">H04W88/18</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029060000">H04L29/06</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=N8OGAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012660000">H04L12/66</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2007年9月5日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2007年10月31日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年9月2日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/27d37ccae87a2bf3c0a0/CN101031109A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E7%9F%AD%E6%B6%88%E6%81%AF%E5%A2%9E%E5%80%BC%E4%B8%9A%E5%8A%A1%E7%9A%84%E4%BA%92%E8%81%94%E6%96%B9.pdf?id=N8OGAAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0Ca7QrS8a_U8XNETP8prkCA-KO6w"},"sample_url":"https://www.google.com/patents/reader?id=N8OGAAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>