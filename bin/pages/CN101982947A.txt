<!DOCTYPE html><html><head><title>专利 CN101982947A - 一种对引发收无光告警自动进行故障定位的装置及方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种对引发收无光告警自动进行故障定位的装置及方法"><meta name="DC.contributor" content="程荣" scheme="inventor"><meta name="DC.contributor" content="陈天奇" scheme="inventor"><meta name="DC.contributor" content="烽火通信科技股份有限公司" scheme="assignee"><meta name="DC.date" content="2010-9-28" scheme="dateSubmitted"><meta name="DC.description" content="本发明涉及一种对引发收无光告警自动进行故障定位的装置及方法，包括：对外接口和内部模块，所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚本文件的接口；当分析定位管理器接收到对外接口的启动分析的函数调用，完成脚本及配置数据缓存处理之后，执行告警分析及性能分析；所述的内部模块包括三个子模块：分析定位管理器子模块、执行分析定位的子模块、支持分析定位的数据缓存子模块。本发明不增加传输网中的硬件资源，不修改现有传输帧结构的内容，充分挖掘网管数据，提出自动化的周期性的推理方法，分析随机引发收无光告警的故障原因，进行故障定位。有利于提高提高运维人员分析收无光告警的效率，对保证网络稳定运行有重要意义。"><meta name="DC.date" content="2011-3-2"><meta name="DC.relation" content="CN:101335658:A" scheme="references"><meta name="DC.relation" content="CN:101820558:A" scheme="references"><meta name="DC.relation" content="CN:1946010:A" scheme="references"><meta name="citation_patent_publication_number" content="CN:101982947:A"><meta name="citation_patent_application_number" content="CN:201010294018"><link rel="canonical" href="https://www.google.com/patents/CN101982947A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101982947A?cl=zh"/><meta name="title" content="专利 CN101982947A - 一种对引发收无光告警自动进行故障定位的装置及方法"/><meta name="description" content="本发明涉及一种对引发收无光告警自动进行故障定位的装置及方法，包括：对外接口和内部模块，所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚本文件的接口；当分析定位管理器接收到对外接口的启动分析的函数调用，完成脚本及配置数据缓存处理之后，执行告警分析及性能分析；所述的内部模块包括三个子模块：分析定位管理器子模块、执行分析定位的子模块、支持分析定位的数据缓存子模块。本发明不增加传输网中的硬件资源，不修改现有传输帧结构的内容，充分挖掘网管数据，提出自动化的周期性的推理方法，分析随机引发收无光告警的故障原因，进行故障定位。有利于提高提高运维人员分析收无光告警的效率，对保证网络稳定运行有重要意义。"/><meta property="og:title" content="专利 CN101982947A - 一种对引发收无光告警自动进行故障定位的装置及方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101982947A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101982947A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=rDWQBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101982947A&amp;usg=AFQjCNGrcah-wGurp_o3U_pIQOF_apPnKQ" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/460e16b2fc67b7fc3783/CN101982947A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/460e16b2fc67b7fc3783/CN101982947A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101982947A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101982947A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101982947A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101982947B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101982947A?cl=zh" style="display:none"><span itemprop="description">本发明涉及一种对引发收无光告警自动进行故障定位的装置及方法，包括：对外接口和内部模块，所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚本文件的接口；当分析定位管理器接收到对外接...</span><span itemprop="url">https://www.google.com/patents/CN101982947A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101982947A - 一种对引发收无光告警自动进行故障定位的装置及方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101982947A - 一种对引发收无光告警自动进行故障定位的装置及方法" title="专利 CN101982947A - 一种对引发收无光告警自动进行故障定位的装置及方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101982947 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201010294018</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2011年3月2日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2010年9月28日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2010年9月28日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101982947B?hl=zh-CN&amp;cl=zh">CN101982947B</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201010294018.9, </span><span class="patent-bibdata-value">CN 101982947 A, </span><span class="patent-bibdata-value">CN 101982947A, </span><span class="patent-bibdata-value">CN 201010294018, </span><span class="patent-bibdata-value">CN-A-101982947, </span><span class="patent-bibdata-value">CN101982947 A, </span><span class="patent-bibdata-value">CN101982947A, </span><span class="patent-bibdata-value">CN201010294018, </span><span class="patent-bibdata-value">CN201010294018.9</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%A8%8B%E8%8D%A3%22">程荣</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%99%88%E5%A4%A9%E5%A5%87%22">陈天奇</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E7%83%BD%E7%81%AB%E9%80%9A%E4%BF%A1%E7%A7%91%E6%8A%80%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">烽火通信科技股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101982947A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101982947A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101982947A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=rDWQBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201010294018&amp;usg=AFQjCNH_gdEOyB0S-RCiWuAIx9Br1v0PXA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=rDWQBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101982947A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNH1Ey3QfcmZdohuvWkFbG2l-YRPVA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT101238848" lang="ZH" load-source="patent-office">一种对引发收无光告警自动进行故障定位的装置及方法</invention-title>
      </span><br><span class="patent-number">CN 101982947 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA83351156" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明涉及一种对引发收无光告警自动进行故障定位的装置及方法，包括：对外接口和内部模块，所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚本文件的接口；当分析定位管理器接收到对外接口的启动分析的函数调用，完成脚本及配置数据缓存处理之后，执行告警分析及性能分析；所述的内部模块包括三个子模块：分析定位管理器子模块、执行分析定位的子模块、支持分析定位的数据缓存子模块。本发明不增加传输网中的硬件资源，不修改现有传输帧结构的内容，充分挖掘网管数据，提出自动化的周期性的推理方法，分析随机引发收无光告警的故障原因，进行故障定位。有利于提高提高运维人员分析收无光告警的效率，对保证网络稳定运行有重要意义。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(7)</span></span></div><div class="patent-text"><ol mxw-id="PCLM35135003" lang="ZH" load-source="patent-office" class="claims">
    <li class="claim"> <div num="1" class="claim">
      <div class="claim-text">一种对引发收无光告警自动进行故障定位的装置，该装置为一种分析定位装置，其特征在于，所述分析定位装置包括：对外接口和内部模块；所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚本文件的接口；启动分析的接口是指调用者启动分析定位装置的接口，结果返回的接口是指调用者接收分析定位结果的接口，分析定位装置的分析定位结果从此接口返回给调用者；读数据库的接口，完成分析定位管理器从数据库中获得配置数据、告警数据及性能数据的功能；读脚本文件的接口，完成以下功能：1、从脚本文件中获取分析定位管理器定时分析周期T，周期T的单位为秒，缺省值为30秒；2、从脚本文件中获取收无光告警代码；3、从脚本文件中获取网元、盘、端口通信失效的告警代码；4、从脚本文件中获取电压性能代码；分析定位管理器获取告警及性能数据，需要调用分析定位装置对外的数据库接口；分析定位管理器输出分析结果数据，需要调用分析定位装置对外的结果返回的接口；当分析定位管理器接收到对外接口的启动分析的函数调用，完成脚本及配置数据缓存之后，执行告警分析及性能分析；所述的内部模块包括三个子模块：分析定位管理器子模块、执行分析定位的子模块、支持分析定位的数据缓存子模块；所述分析定位管理器子模块为分析定位管理器；所述执行分析定位的子模块包括告警分析和性能分析两个子模块；所述支持分析定位的数据缓存子模块包括脚本数据缓存、配置数据缓存、告警数据缓存、性能数据缓存和分析结果缓存五个子模块。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.如权利要求1所述的对引发收无光告警自动进行故障定位的装置，其特征在于：所 述从数据库中获得的配置数据，包含了三类配置数据：第一类配置数据是物理配置数据，物理配置数据包括了网管中局、架、框、槽和盘数据；第二类配置数据是逻辑配置数据，逻辑配置数据包括了网管中的网元级管理系统、网 块、网元和端口 ；第三类配置数据是拓扑连接数据，拓扑连接数据至少包括了三个属性值：拓扑连接 ID、源端口 ID和宿端口 ID ；所述从数据库中获得的告警数据，至少包括了五个属性值：对象ID、告警序列号、告警 代码、告警开始时间及告警结束时间；所述的产生对象ID包括网元ID、盘ID以及端口 ID ； 所述从数据库中获得的性能数据，至少包括了五个属性值：对象ID、性能代码、性能值 大小、性能开始时间及性能结束时间； 上述各ID的值均取正整数。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.如权利要求1或2所述的对引发收无光告警自动进行故障定位的装置，其特征在于， 所述的分析定位管理器，完成以下功能：①、负责调用执行分析定位的子模块、对外输出分析定位结果；所述的执行分析定位的 子模块调用告警分析子模块及性能分析子模块；所述的分析定位管理器对象包括的数据成员定义了回调函数指针、分析定位装置线程退出事件句柄，所述的回调函数定义了一种函数指针类型，该函数功能由调用者实现，作为一个异步 数据传送的通道，根据执行具体分析步骤的需要，从分析定位管理器获取告警或者性能数 据；执行告警分析子模块及性能分析子模块完毕之后，将分析结果回传给分析定位管理器 子模块；所述的分析定位装置线程，是一个周期性等待的线程，周期数据来自于脚本缓存子模 块的数据：分析定位管理器定时分析周期T，当一个等待周期结束时，该线程调用执行分析 定位的子模块，具体执行告警分析子模块及性能分析子模块；②、管理分析定位处理周期、管理分析定位装置线程线程；③、直接调用读脚本文件接口	；④、直接调用读数据库的接口	；⑤、调用配置数据缓存子模块；调用脚本数据缓存子模块；其中配置数据缓存子模块 通过分析定位管理器调用数据库接口得到的配置数据进行缓存处理；脚本数据缓存子模块 通过分析定位管理器调用读脚本文件的接口得到的脚本数据进行缓存处理，⑥、提供调用告警分析子模块的接口	；提供了告警数据缓存、性能数据缓存、分析结果 缓存的回调接口 ；提供对外返回分析结果的接口。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.	一种基于权利要求1或2或3所述装置的对引发收无光告警自动进行故障定位的方 法，包括告警分析方法，和性能分析方法，所述这两种方法的执行步骤如下：第一，收到分析定位管理器的启动告警分析子模块的函数调用； 第二，调用告警数据缓存子模块；第三，告警数据缓存子模块调用脚本数据缓存子模块的收无光告警代码脚本数据； 第四，告警缓存子模块调用和分析管理器之间的回调函数接口，获得一批告警数据，并 通过收无光告警代码进行过滤，得到一组收无光告警； 通过通信失效代码进行过滤，得到一组通信失效告警； 然后，执行网元、盘及端口的告警分析；最后，如果网元、盘及端口的告警分析没有完成对一个收无光告警进行故障定位，则性 能数据缓存子模块调用和分析管理器之间的接口，获得一批性能数据，然后性能分析子模 块调用缓存的性能数据，执行网元断电性能分析；第五，将告警分析子模块执行的结果写入分析结果缓存中，将性能分析子模块执行的 结果写入分析结果缓存中。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求4所述的对引发收无光告警自动进行故障定位的方法，其特征在于，所 述网元、盘及端口的告警分析及网元断电性能分析的执行步骤如下：第一，遍历收无光告警的缓存数据集合完毕了吗？否，去第二 ；是，去第十八； 第二，获取一个收无光告警对象，记为告警1，遍历位置指向下一个元素；通过告警1的 对象ID，查找配置数据缓存的拓扑连接数据的源（或者宿）端口 ID有结果吗？是，得到拓 扑连接L，去第三；否，去第一；第三，获取拓扑连接L的宿（或者源）的端口 IDl ；第四，通过端口 IDl查询通信失效告警缓存数据集合成立吗？是，去第五；否，去第七； 第五，有一个通信失效告警对象，记为告警2，告警2的告警代码为发送失效吗？是，去第六；否，去第七；第六，故障定位为IDl对应的光物理口发送失效，去第十七； 第七，获取拓扑连接L的宿（或者源）的端口 IDl所在的盘ID2; 第八，通过盘ID2查询通信失效告警缓存数据集合成立吗？是，去第九；否，去第十一； 第九，有一个通信失效告警对象，记为告警3，告警3的告警代码为盘失效吗？是，去第 十；否，去第十一；第十，故障定位为盘ID2失效，去第十七；第十一，获取拓扑连接L的宿（或者源）的端口 IDl所在的网元ID3; 第十二，通过网元ID3查询通信失效告警缓存数据集合成立吗？是，去第十三；否，去 第十六；第十三，从当前时间开始，依据时间值的减小，通过性能数据缓存调用和分析定位管理 器之间的回调接口，获得一批性能数据集合：4个相邻的15分钟电源电压值：V1，V2，V3和 V4，其中，Vl距离当前时间最近，而V4距离当前时间最远；第十四，在数值上Vl &lt; V2 &lt; V3 &lt; V4成立吗？是，去第十五；否，去第十六； 第十五，故障定位为判定为网元ID3有断电故障，去第十七； 第十六，故障判定为由端口 ID查询出来的拓扑连接L对应的光纤断了 ； 第十七，故障分析结果写入分析结果缓存，去第一； 第十八，结束。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.如权利要求5所述的对引发收无光告警自动进行故障定位的方法，其特征在于：该 分析定位装置依赖集成维护系统，所述该分析定位装置所依赖的集成维护系统在体系架构 基本上分为2层：集成维护系统的客户端，和集成维护系统的服务端；分析定位装置在集成 维护系统的服务端实现； 具体的实现过程如下：采用以太网通信，传输设备和主机1上的网元级管理系统进行配置业务、告警和性能 数据的交互；采用以太网通信，多个网元级管理系统和一个集成维护系统服务端建立通信连接，且 在具体实现中，采用RPC进行两层网管系统的通信；在主机2上的集成维护系统服务端进程的RPC客户端，收到网元级管理系统的RPC的 服务端送来的配置业务数据后，启动配置业务处理功能，采用集成维护系统体系中的对象 模型，对象ID编码范围，进行配置业务数据的映射处理，刷新集成维护系统服务端进程中 的树结构存储的对象集合，所述树结构存储的对象集合简称内存对象树，以及和数据库表 中的配置业务数据，达到内存对象树和数据库中没有脏数据的效果；在主机2上的集成维护系统的服务端进程中，建立RPC客户端和主机1上的网元级管 理系统的RPC服务端之间的持久态的事件通道，RPC客户端用于随时接收RPC服务端上报 的告警性能数据；在主机2上的集成维护系统的服务端进程中，创建分析定位装置对象，创建成功后，调 用脚本数据缓存子模块及配置数据缓存子模块；在主机2上的集成维护系统的服务端进程中和分析定位相关的三个线程，分别为告警 处理线程，性能处理线程和分析定位装置线程；前两个线程的功能在于无限期的分别等待告警数据处理完成事件到来，性能数据处理 完成事件的到来，任意一个事件到来后，从事件对应的队列中将数据读出来，写入数据库； 具体实现过程是：集成维护系统的RPC客户端在收到网元级网管的RPC服务端的告警或性 能数据后，调用内存对象树的数据缓存，进行告警性能对像ID及序列号处理；处理完毕后， 分别写入告警队列及性能队列；一批告警数据处理完成，并且写告警队列完毕后，发出告警 数据处理完成事件，通知告警处理线程将告警队列中的告警数据读走，然后写数据库；一批 性能数据处理完成，并且写性能队列完毕后，发出性能数据处理完成事件，通知性能处理线 程将性能队列中的性能数据读走，然后写数据库；分析定位装置线程在于周期性的执行告警分析子模块及性能分析子模块。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求6所述的对引发收无光告警自动进行故障定位的方法，其特征在于，所 述分析定位装置线程在于周期性的进行告警分析及性能分析，包括： 周期性分析流程：`3. 1，装载分析定位装置线程退出事件句柄hEvent ；装载计时器周期T ； 3. 2，启动计时器，分析周期完毕了吗？是，去3. 3 ；否，去3. 4 ； 3. `3，执行后边的“告警性能分析的流程”；去3. 2 ； 3. 4，有线程退出事件到来吗？是，去3. 5 ；否，去3. 2 ；`3.	5，结束；告警性能分析的流程：`4.	1，装载收无光告警集合oAllLosOptAmVec ；装载所有告警集合oAllAlarmMMap ；装载 拓扑连接集合oAllTopoLinkMap ；装载端口和盘映射集合oPort2BoardMap ；装载盘和网元 映射集合 oBoard2NeMap ；`4. 2，遍历 oAlILosOptAmVec 完毕吗？否，去 4. 3 ；是，去 4. 18 ； 4. 3，有告警对象Am ；遍历位置指向下一个元素；`4. 4，由 Am. iObjectId 查找 oAlITopoLinkMap 有值吗？是，去 4. 5 ；否，去 4. 2 ； 4. 5，有端IDl，拓扑连接IDl ；`4. 6，以端ID1、AMC0DE_TF、oAlIAlarmMMap为参数调用后边“通过告警类型和对象ID 查找告警的流程”为真吗？是，去4. 7 ；否，去4. 8 ；`4. 7，以端口 IDl为主键，AMC0DE_TF为值，装入结果集合oAlIResultMap中，去4.2 ； 4. 8，由端IDl查找oPort2BoardMap有值吗？是，去4. 9 ；否，去4. 2 ； 4. 9，有盘 IDl ；`4. 10，以盘ID1、AMCODE_FAIL、oAlIAlarmMMap为参数调用后边“通过告警类型和对象 ID查找告警的流程”为真吗？是，去4. 11 ；否，去4. 12 ；`4. 11，以盘IDl为主键，AMCODE_FAIL为值，装入结果集合oAlIResultMap中，去4. 2 ； 4. 12，由盘IDl查找oBoard2NeMap有值吗？是，去4. 13 ；否，去4. 2 ； 4. 13，有网元IDl ；`4. 14，以网元IDl、AMCODE_NECOMFAIL、oAllAlarmMMap为参数调用后边“通过告警类型 和对象ID查找告警的流程”为真吗？是，去4. 15 ；否，去`4. 17 ；`4. 15，以网元IDl为参数调用后边“电源电压性能分析流程”为真吗？是，去4. 16 ；否， 去 4. 17 ；`4. 16，以网元IDl为主键，AMC0DE_P0WER0FF为值，装入结果集合oAlIResultMap中，去`4. 2 ；`4. 17，以拓扑连接IDl为主键，AMC0DE_FIBERBRE0KEN为值，装入结果集合 oAlIResultMap 中，去 4. 2 ；`4.	18，结束；通过告警类型和对象ID查找告警的流程：`5.	1，装载对象IDl ；装载告警类型1 ；装载所有告警集合OAllAlarmMMap ； 5. 2，由 IDl 查找 oAllAlarmMMap 有值吗？是，去 5. 3 ；否，去 5. 8 ；`5. 3，有一个pair ；遍历位置指向下一个元素；`5. 4，遍历pair完毕吗？否，去5. 5 ；是，去5. 8 ；`5. 5，有告警对象Aml ；遍历位置指向下一个元素；`5. 6，Ami. iAlarmCode等于告警类型1吗?是，去5. 7 ；否，去5. 4 ；`5. 7，返回真，去5.9;`5. 8，返回假，去5.9 ；`5.	9，结束；电源电压性能分析流程：`6.	1，装载网元IDl ；`6. 2，通过数据库接口，查找网元IDl从当前时间开始向前的连续4个15分钟电源电压 的性能集合oPowerPmMap ；`6. 3，oPowerPmMap 为空吗？否，去 6. 4 ；是，去 6. 11 ； 6. 4，i = 1 ；`6. 5，i &lt; = 3 ？是，去 6. 6 ；否，去 6. 13 ；`6. 6，由i查找oPowerPmMap有值吗？是，去6. 7 ；否，去6. 11 ；`6. 7，有性能对象1 ；`6. 8，由i+Ι查找oPowerPmMap有值吗？是，去6. 9 ；否，去6. 11 ； 6. 9，有性能对象2 ；`6. 10，对象 1. dValue &gt;=对象 2. dValue ？是，去 6. 11 ；否，去 6. 12 ； 6. 11，返回假，去6. 14 ； 6. 12，++i，去 6. 5 ； 6. 13，返回真，去6. 14 ； 6. 14，结束。</div>
    </div>
  </li> </ol>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES40975754" lang="ZH" load-source="patent-office" class="description">
    <p>一种对引发收无光告警自动进行故障定位的装置及方法</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及传输网范畴的故障定位，具体是指一种对引发收无光告警自动进行故 障定位的装置及方法。尤其指一种基于传输网管对引发收无光告警自动进行故障分析定位 的装置及方法。</p>
    <p>背景技术</p>
    <p>[0002]	随着传输网建设规模的扩大，网络业务量的增加，网络运营维护的工作量和难度 进一步加大。</p>
    <p>[0003]	如果设备上报给网管的收无光告警的数量很多，人工进行故障分析定位会耗费很 多时间，影响故障最终解决的效率；如果该告警关联的网络拓扑结构复杂，人工进行故障分 析定位容易出错。</p>
    <p>[0004]	目前的技术，需要增加辅助判定的硬件到传输网络中，对于现网运行的设备，不实 用；对于光路盘失效、光物理口失效的故障分析未涉及，对于引发收无光告警的故障判定不 全面。总之，目前技术没有充分挖掘网管数据，综合分析各种条件，通过推理来定位引发收 无光告警的故障。</p>
    <p>发明内容</p>
    <p>[0005]	针对现有技术中存在的缺陷，本发明提供一种对引发收无光告警自动进行故障定 位的装置及方法，在不增加传输网络中的硬件资源，不修改现有传输帧结构的内容的前提 下，充分挖掘网管数据，提出自动化的周期性的推理方法，综合分析引发收无光告警的各种 条件；通过数据挖掘及推理，分析随机引发收无光告警的故障原因，进行故障定位，定时自 动的完成对于引发收无光告警的故障分析定位，有利于提高提高运维人员分析收无光告警 的效率，对保证网络稳定运行有重要意义。</p>
    <p>[0006]	为达到以上目的，本发明采取的技术方案是：</p>
    <p>[0007]	&#8212;种对引发收无光告警自动进行故障定位的装置，该装置为一种分析定位装置， 其特征在于，所述分析定位装置包括：对外接口和内部模块，</p>
    <p>[0008]	所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚 本文件的接口；</p>
    <p>[0009]	启动分析的接口是指调用者启动分析定位装置的接口，结果返回的接口是指调用 者接收分析定位结果的接口，分析定位装置的分析定位结果从此接口返回给调用者；</p>
    <p>[0010]	读数据库的接口，完成分析定位管理器从数据库中获得配置数据、告警数据及性 能数据的功能；</p>
    <p>[0011]	读脚本文件的接口，完成以下功能：1、从脚本文件中获取分析定位管理器定时分 析周期T，周期T的单位为秒，缺省值为30秒；2、从脚本文件中获取收无光告警代码；3、从 脚本文件中获取网元、盘、端口通信失效的告警代码；4、从脚本文件中获取电压性能代码；</p>
    <p>[0012]	分析定位管理器获取告警及性能数据，需要调用分析定位装置对外的数据库接</p>
    <p>7Π ；</p>
    <p>[0013]	分析定位管理器输出分析结果数据，需要调用分析定位装置对外的结果返回的接 Π ；</p>
    <p>[0014]	当分析定位管理器接收到对外接口的启动分析的函数调用，完成脚本及配置数据 缓存之后，执行告警分析及性能分析；</p>
    <p>[0015]	所述的内部模块包括三个子模块：分析定位管理器子模块、执行分析定位的子模 块、支持分析定位的数据缓存子模块；</p>
    <p>[0016]	所述分析定位管理器子模块为分析定位管理器；</p>
    <p>[0017]	所述执行分析定位的子模块包括告警分析和性能分析两个子模块；</p>
    <p>[0018]	所述支持分析定位的数据缓存子模块包括脚本数据缓存、配置数据缓存、告警数 据缓存、性能数据缓存和分析结果缓存五个子模块。</p>
    <p>[0019]	在上述技术方案的基础上，所述从数据库中获得的配置数据，包含了三类配置数 据：</p>
    <p>[0020]	第一类配置数据是物理配置数据，物理配置数据包括了网管中局、架、框、槽和盘 数据；</p>
    <p>[0021]	第二类配置数据是逻辑配置数据，逻辑配置数据包括了网管中的网元级管理系 统、网块、网元和端口 ；</p>
    <p>[0022]	第三类配置数据是拓扑连接数据，拓扑连接数据至少包括了三个属性值：拓扑连 接ID、源端口 ID和宿端口 ID ；</p>
    <p>[0023]	所述从数据库中获得的告警数据，至少包括了五个属性值：对象ID、告警序列号、 告警代码、告警开始时间及告警结束时间；所述的产生对象ID包括网元ID、盘ID以及端口 ID ；</p>
    <p>[0024]	所述从数据库中获得的性能数据，至少包括了五个属性值：对象ID、性能代码、性 能值大小、性能开始时间及性能结束时间；</p>
    <p>[0025]	上述各ID的值均取正整数。</p>
    <p>[0026]	在上述技术方案的基础上，所述的分析定位管理器，完成以下功能：</p>
    <p>[0027]	①、负责调用执行分析定位的子模块、对外输出分析定位结果；所述的执行分析定 位的子模块调用告警分析子模块及性能分析子模块；</p>
    <p>[0028]	所述的分析定位管理器对象包括的数据成员定义了回调函数指针、分析定位装置 线程退出事件句柄。</p>
    <p>[0029]	所述的回调函数定义了一种函数指针类型，该函数功能由调用者实现，作为一个 异步数据传送的通道，根据执行具体分析步骤的需要，从分析定位管理器获取告警或者性 能数据；执行告警分析子模块及性能分析子模块完毕之后，将分析结果回传给分析定位管 理器子模块；</p>
    <p>[0030]	所述的分析定位装置线程，是一个周期性等待的线程，周期数据来自于脚本缓存 子模块的数据：分析定位管理器定时分析周期T，当一个等待周期结束时，该线程调用执行 分析定位的子模块，具体执行告警分析子模块及性能分析子模块；</p>
    <p>[0031]	②、管理分析定位处理周期、管理分析定位装置线程线程；</p>
    <p>[0032]	③、直接调用读脚本文件接口 ；</p>
    <p>8[0033]	④、直接调用读数据库的接口 ；</p>
    <p>[0034]	⑤、调用配置数据缓存子模块；调用脚本数据缓存子模块；其中配置数据缓存子 模块通过分析定位管理器调用数据库接口得到的配置数据进行缓存处理；脚本数据缓存子 模块通过分析定位管理器调用读脚本文件的接口得到的脚本数据进行缓存处理。</p>
    <p>[0035]	⑥、提供调用告警分析子模块的接口 ；提供了告警数据缓存、性能数据缓存、分析 结果缓存的回调接口 ；提供对外返回分析结果的接口。</p>
    <p>[0036]	一种基于上述装置的对引发收无光告警自动进行故障定位的方法，包括告警分析 方法，和性能分析方法，所述这两种方法的执行步骤如下：</p>
    <p>[0037]	第一，收到分析定位管理器的启动告警分析子模块的函数调用；</p>
    <p>[0038]	第二，调用告警数据缓存子模块；</p>
    <p>[0039]	第三，告警数据缓存子模块调用脚本数据缓存子模块的收无光告警代码脚本数 据；</p>
    <p>[0040]	第四，告警缓存子模块调用和分析管理器之间的回调函数接口，获得一批告警数 据，并通过收无光告警代码进行过滤，得到一组收无光告警；</p>
    <p>[0041]	通过通信失效代码进行过滤，得到一组通信失效告警；</p>
    <p>[0042]	然后，执行网元、盘及端口的告警分析；</p>
    <p>[0043]	最后，如果网元、盘及端口的告警分析没有完成对一个收无光告警进行故障定位， 则性能数据缓存子模块调用和分析管理器之间的接口，获得一批性能数据，然后性能分析 子模块调用缓存的性能数据，执行网元断电性能分析；</p>
    <p>[0044]	第五，将告警分析子模块执行的结果写入分析结果缓存中。将性能分析子模块执 行的结果写入分析结果缓存中。</p>
    <p>[0045]	在上述技术方案的基础上，所述网元、盘及端口的告警分析及网元断电性能分析 的执行步骤如下：</p>
    <p>[0046]	第一，遍历收无光告警的缓存数据集合完毕了吗？否，去第二 ；是，去第十八；</p>
    <p>[0047]	第二，获取一个收无光告警对象，记为告警1，遍历位置指向下一个元素；通过告 警1的对象ID，查找配置数据缓存的拓扑连接数据的源（或者宿）端口 ID有结果吗？是， 得到拓扑连接L，去第三；否，去第一；</p>
    <p>[0048]	第三，获取拓扑连接L的宿（或者源)的端口 IDl ；</p>
    <p>[0049]	第四，通过端口 IDl查询通信失效告警缓存数据集合成立吗？是，去第五；否，去 第七；</p>
    <p>[0050]	第五，有一个通信失效告警对象，记为告警2，告警2的告警代码为发送失效吗？ 是，去第六；否，去第七；</p>
    <p>[0051]	第六，故障定位为IDl对应的光物理口发送失效，去第十七；</p>
    <p>[0052]	第七，获取拓扑连接L的宿（或者源）的端口 IDl所在的盘ID2 ；</p>
    <p>[0053]	第八，通过盘ID2查询通信失效告警缓存数据集合成立吗？是，去第九；否，去第</p>
    <p>[0054]	第九，有一个通信失效告警对象，记为告警3，告警3的告警代码为盘失效吗？是， 去第十；否，去第十一；</p>
    <p>[0055]	第十，故障定位为盘ID2失效，去第十七；[0056]	第十一，获取拓扑连接L的宿（或者源)的端口 IDl所在的网元ID3 ；</p>
    <p>[0057]	第十二，通过网元ID3查询通信失效告警缓存数据集合成立吗？是，去第十三； 否，去第十六；</p>
    <p>[0058]	第十三，从当前时间开始，依据时间值的减小，通过性能数据缓存调用和分析定位 管理器之间的回调接口，获得一批性能数据集合：4个相邻的15分钟电源电压值：V1，V2，V3 和V4，其中，Vl距离当前时间最近，而V4距离当前时间最远；</p>
    <p>[0059]	第十四，在数值上Vl &lt; V2 &lt; V3 &lt; V4成立吗？是，去第十五；否，去第十六；</p>
    <p>[0060]	第十五，故障定位为判定为网元ID3有断电故障，去第十七；</p>
    <p>[0061]	第十六，故障判定为由端口 ID查询出来的拓扑连接L对应的光纤断了 ；</p>
    <p>[0062]	第十七，故障分析结果写入分析结果缓存，去第一；</p>
    <p>[0063]	第十八，结束。</p>
    <p>[0064]	在上述技术方案的基础上，该分析定位装置依赖集成维护系统，所述该分析定位 装置所依赖的集成维护系统在体系架构基本上分为2层：集成维护系统的客户端，和集成 维护系统的服务端；分析定位装置在集成维护系统的服务端实现；</p>
    <p>[0065]	具体的实现过程如下：</p>
    <p>[0066]	采用以太网通信，传输设备和主机1上的网元级管理系统进行配置业务、告警和 性能数据的交互；</p>
    <p>[0067]	采用以太网通信，多个网元级管理系统和一个集成维护系统服务端建立通信连 接，且在具体实现中，采用RPC进行两层网管系统的通信；</p>
    <p>[0068]	在主机2上的集成维护系统服务端进程的RPC客户端，收到网元级管理系统的RPC 的服务端送来的配置业务数据后，启动配置业务处理功能，采用集成维护系统体系中的对 象模型，对象ID编码范围，进行配置业务数据的映射处理，刷新集成维护系统服务端进程 中的树结构存储的对象集合，所述树结构存储的对象集合简称内存对象树，以及和数据库 表中的配置业务数据，达到内存对象树和数据库中没有脏数据的效果；</p>
    <p>[0069]	在主机2上的集成维护系统的服务端进程中，建立RPC客户端和主机1上的网元 级管理系统的RPC服务端之间的持久态的事件通道，RPC客户端用于随时接收RPC服务端 上报的告警性能数据；</p>
    <p>[0070]	在主机2上的集成维护系统的服务端进程中，创建分析定位装置对象，创建成功 后，调用脚本数据缓存子模块及配置数据缓存子模块；</p>
    <p>[0071]	在主机2上的集成维护系统的服务端进程中和分析定位相关的三个线程，分别为 告警处理线程，性能处理线程和分析定位装置线程；</p>
    <p>[0072]	前两个线程的功能在于无限期的分别等待告警数据处理完成事件到来，性能数据 处理完成事件的到来。任意一个事件到来后，从事件对应的队列中将数据读出来，写入数据 库；具体实现过程是：集成维护系统的RPC客户端在收到网元级网管的RPC服务端的告警 或性能数据后，调用内存对象树的数据缓存，进行告警性能对像ID及序列号处理；处理完 毕后，分别写入告警队列及性能队列；一批告警数据处理完成，并且写告警队列完毕后，发 出告警数据处理完成事件，通知告警处理线程将告警队列中的告警数据读走，然后写数据 库；一批性能数据处理完成，并且写性能队列完毕后，发出性能数据处理完成事件，通知性 能处理线程将性能队列中的性能数据读走，然后写数据库；[0073]	分析定位装置线程在于周期性的执行告警分析子模块及性能分析子模块。</p>
    <p>[0074]	在上述技术方案的基础上，所述分析定位装置线程在于周期性的进行告警分析及 性能分析，包括：</p>
    <p>[0075]	周期性分析流程：</p>
    <p>[0076]	3. 1，装载分析定位装置线程退出事件句柄hEvent ；装载计时器周期T ；</p>
    <p>[0077]	3. 2，启动计时器，分析周期完毕了吗？是，去3. 3;否，去3. 4;</p>
    <p>[0078]	3. 3，执行后边的“告警性能分析的流程”；去3. 2 ；</p>
    <p>[0079]	3. 4，有线程退出事件到来吗?是，去3. 5;否，去3. 2;</p>
    <p>[0080]	3. 5，结束；</p>
    <p>[0081]	告警性能分析的流程：</p>
    <p>[0082]	4. 1，装载收无光告警集合oAlILosOptAmVec ；装载所有告警集合oAlIAlarmMMap ； 装载拓扑连接集合oAllTopoLinkMap ；装载端口和盘映射集合oPort2BoardMap ；装载盘和 网元映射集合oBoard2NeMap ；</p>
    <p>[0083]	4. 2，遍历 oAllLosOptAmVec 完毕吗？否，去 4. 3 ；是，去 4. 18 ；</p>
    <p>[0084]	4. 3，有告警对象Am ；遍历位置指向下一个元素；</p>
    <p>[0085]	4. 4，由 Am. iObjectld 查找 oAlITopoLinkMap 有值吗？是，去 4. 5 ；否，去 4. 2 ；</p>
    <p>[0086]	4. 5，有端口 IDl，拓扑连接 IDl ；</p>
    <p>[0087]	4. 6，以端口 IDl、AMC0DE_TF、oAlIAlarmMMap为参数调用后边“通过告警类型和对 象ID查找告警的流程”为真吗？是，去4.7 ；否，去4.8 ；</p>
    <p>[0088]	4. 7，以端口 IDl为主键，AMC0DE_TF为值，装入结果集合oAllResultMap中，去 4. 2 ；</p>
    <p>[0089]	4.8，由端口101查找0?0汁28(^『(1]\&amp;1?有值吗？是，去4. 9 ；否，去4. 2 ；</p>
    <p>[0090]	4. 9，有盘 IDl;</p>
    <p>[0091]	4. 10，以盘ID1、AMC0DE_FAIL、oAlIAlarmMMap为参数调用后边“通过告警类型和 对象ID查找告警的流程”为真吗？是，去4. 11 ；否，去4. 12 ；</p>
    <p>[0092]	4. 11，以盘IDl为主键，AMC0DE_FAIL为值，装入结果集合oAlIResultMap中，去 4. 2 ；</p>
    <p>[0093]	4. 12，由盘 IDl 查找 oBoard2NeMap 有值吗？是，去 4. 13 ；否，去 4. 2 ；</p>
    <p>[0094]	4. 13，有网元 IDl;</p>
    <p>[0095]	4. 14，以网元 IDl、AMC0DE_NEC0MFAIL、oAlIAlarmMMap 为参数调用后边“通过告警 类型和对象ID查找告警的流程”为真吗？是，去4. 15 ；否，去4. 17 ；</p>
    <p>[0096]	4. 15，以网元IDl为参数调用后边“电源电压性能分析流程”为真吗？是，去4. 16 ； 否，去4. 17 ；</p>
    <p>[0097]	4. 16，以网元 IDl 为主键，AMC0DE_P0WER0FF 为值，装入结果集合 oAlIResultMap 中，去4.2 ；</p>
    <p>[0098]	4. 17，以拓扑连接IDl为主键，AMC0DE_FIBERBRE0KEN为值，装入结果集合 oAlIResultMap 中，去 4. 2 ；</p>
    <p>[0099]	4. 18，结束;</p>
    <p>[0100]	通过告警类型和对象ID查找告警的流程：[0101]	5. 1，装载对象IDl ；装载告警类型1 ；装载所有告警集合OAllAlarmMMap ；</p>
    <p>[0102]	5. 2，由 IDl 查找 OAllAlarmMMap 有值吗？是，去 5. 3 ；否，去 5. 8 ；</p>
    <p>[0103]	5. 3，有一个pair ；遍历位置指向下一个元素；</p>
    <p>[0104]	5. 4，遍历pair完毕吗？否，去5. 5 ；是，去5. 8 ；</p>
    <p>[0105]	5. 5，有告警对象Aml ；遍历位置指向下一个元素；</p>
    <p>[0106]	5. 6，Ami. iAlarmCode 等于告警类型 1 吗?是，去 5. 7 ；否，去 5. 4 ；</p>
    <p>[0107]	5. 7，返回真，去 5.9 ；</p>
    <p>[0108]	5. 8，返回假，去 5.9 ；</p>
    <p>[0109]	5. 9，结束;</p>
    <p>[0110]	电源电压性能分析流程：</p>
    <p>[0111]	6.1，装载网元 IDl;</p>
    <p>[0112]	6. 2，通过数据库接口，查找网元IDl从当前时间开始向前的连续4个15分钟电源 电压的性能集合oPowerPmMap ；</p>
    <p>[0113]	6. 3，oPowerPmMap 为空吗？否，去 6. 4 ；是，去 6. 11 ；</p>
    <p>[0114]	6. 4，i = 1 ；</p>
    <p>[0115]	6. 5，i &lt;= 3 ？是，去 6. 6 ；否，去 6. 13 ；</p>
    <p>[0116]	6. 6，由 i 查找 oPowerPmMap 有值吗？是，去 6. 7 ；否，去 6. 11 ；</p>
    <p>[0117]	6. 7，有性能对象1;</p>
    <p>[0118]	6. 8，由 i+Ι 查找 oPowerPmMap 有值吗？是，去 6. 9 ；否，去 6. 11 ；</p>
    <p>[0119]	6. 9，有性能对象2;</p>
    <p>[0120]	6. 10，对象 1. dValue &gt;=对象 2. dValue ？是，去 6. 11 ；否，去 6. 12 ；</p>
    <p>[0121]	6. 11，返回假，去 6. 14 ；</p>
    <p>[0122]	6. 12，++i，去 6. 5 ；</p>
    <p>[0123]	6. 13，返回真，去 6. 14 ；</p>
    <p>[0124]	6. 14，结束。</p>
    <p>[0125]	本发明所述的对引发收无光告警自动进行故障定位的装置及方法，具有以下优占.</p>
    <p>^ \\\ &#183;</p>
    <p>[0126]	第一、不增加传输网络中的硬件资源，不修改现有传输帧结构的内容，充分挖掘网 管数据，提出一种自动化的周期性的推理方法，分析随机引发收无光告警的故障的原因，达 到对引发收无光告警的故障定位。</p>
    <p>[0127]	第二、减轻了人工查找分析故障的困难，避免了人工分析上述数据的可能的错误。</p>
    <p>[0128]	第三、分析周期、分析相关的告警代码采用脚本文件进行灵活定制。</p>
    <p>附图说明</p>
    <p>[0129]	本发明有如下附图：</p>
    <p>[0130]	图1对引发收无光告警自动进行故障定位的装置的总体框图，</p>
    <p>[0131]	图2网元、盘及端口的告警分析及网元断电性能分析的流程图，</p>
    <p>[0132]	图3具体实施分析定位装置的软件产品的体系架构图，</p>
    <p>[0133]	图4具体实施周期性分析的框架流程图，[0134]	图5具体实施分析定位装置的告警性能分析流程图，</p>
    <p>[0135]	图6通过告警类型和对象ID查找告警的流程图，</p>
    <p>[0136]	图7具体实施电源电压性能分析流程图。</p>
    <p>具体实施方式</p>
    <p>[0137]	本发明所述的原理是一般性的对引发收无光告警自动进行故障定位的装置（以 下简称分析定位装置），经测试已在我公司的网管软件产品集成维护系统中得以实现。但不 限于该系统所描述的实现方法。</p>
    <p>[0138]	本发明给出了一种对引发收无光告警自动进行故障定位的装置，该装置的总体框 图如图1所示，所述分析定位装置包括：对外接口和内部模块，</p>
    <p>[0139]	所述的对外接口包括：启动分析的接口、结果返回的接口、读数据库的接口和读脚 本文件的接口；</p>
    <p>[0140]	启动分析的接口是指调用者启动分析定位装置的接口，结果返回的接口是指调用 者接收分析定位结果的接口，分析定位装置的分析定位结果从此接口返回给调用者；</p>
    <p>[0141]	读数据库的接口，完成分析定位管理器从数据库中获得配置数据、告警数据及性 能数据的功能；</p>
    <p>[0142]	读脚本文件的接口，完成以下功能：1、从脚本文件中获取分析定位管理器定时分 析周期T，周期T的单位为秒，缺省值为30秒；2、从脚本文件中获取收无光告警代码；3、从 脚本文件中获取网元、盘、端口通信失效的告警代码；4、从脚本文件中获取电压性能代码；</p>
    <p>[0143]	分析定位管理器获取告警及性能数据，需要调用分析定位装置对外的数据库接 Π ；</p>
    <p>[0144]	分析定位管理器输出分析结果数据，需要调用分析定位装置对外的结果返回的接 Π ；</p>
    <p>[0145]	当分析定位管理器接收到对外接口的启动分析的函数调用，完成脚本及配置数据 缓存之后，执行告警分析及性能分析；</p>
    <p>[0146]	所述的内部模块包括三个子模块：分析定位管理器子模块、执行分析定位的子模 块、支持分析定位的数据缓存子模块；</p>
    <p>[0147]	所述分析定位管理器子模块具体对应了图1中的分析定位管理器；即：所述分析 定位管理器子模块为分析定位管理器；</p>
    <p>[0148]	所述执行分析定位的子模块具体对应了图1中的告警分析和性能分析；即：所述 执行分析定位的子模块包括告警分析和性能分析两个子模块；</p>
    <p>[0149]	所述支持分析定位的数据缓存子模块具体对应了图1中5类数据缓存：脚本数据 缓存、配置数据缓存、告警数据缓存、性能数据缓存和分析结果缓存；即：所述支持分析定 位的数据缓存子模块包括脚本数据缓存、配置数据缓存、告警数据缓存、性能数据缓存和分 析结果缓存五个子模块。</p>
    <p>[0150]	在上述技术方案的基础上，所述从数据库中获得的配置数据，包含了三类配置数 据：</p>
    <p>[0151]	第一类配置数据是物理配置数据，物理配置数据包括了网管中局、架、框、槽和盘 数据；</p>
    <p>13[0152]	第二类配置数据是逻辑配置数据，逻辑配置数据包括了网管中的网元级管理系 统、网块、网元和端口 ；</p>
    <p>[0153]	第三类配置数据是拓扑连接数据，拓扑连接数据至少包括了三个属性值：拓扑连 接ID、源端口 ID和宿端口 ID ；</p>
    <p>[0154]	所述从数据库中获得的告警数据，至少包括了五个属性值：对象ID、告警序列号、 告警代码、告警开始时间及告警结束时间；所述的产生对象ID包括网元ID、盘ID以及端口 ID ；</p>
    <p>[0155]	所述从数据库中获得的性能数据，至少包括了五个属性值：对象ID、性能代码、性 能值大小、性能开始时间及性能结束时间；</p>
    <p>[0156]	上述各ID的值均取正整数。</p>
    <p>[0157]	在上述技术方案的基础上，所述的分析定位管理器（分析定位管理器子模块)，完 成以下功能：</p>
    <p>[0158]	①、负责调用执行分析定位的子模块、对外输出分析定位结果；所述的执行分析定 位的子模块调用告警分析子模块及性能分析子模块；</p>
    <p>[0159]	所述的分析定位管理器对象包括的数据成员定义了回调函数指针、分析定位装置 线程退出事件句柄。</p>
    <p>[0160]	所述的回调函数定义了一种函数指针类型，该函数功能由调用者实现，作为一个 异步数据传送的通道，根据执行具体分析步骤的需要，从分析定位管理器获取告警或者性 能数据；执行告警分析子模块及性能分析子模块完毕之后，将分析结果回传给分析定位管 理器子模块；</p>
    <p>[0161]	所述的分析定位装置线程，是一个周期性等待的线程，周期数据来自于脚本缓存 子模块的数据：分析定位管理器定时分析周期T，当一个等待周期结束时，该线程调用执行 分析定位的子模块，具体执行告警分析子模块及性能分析子模块；</p>
    <p>[0162]	②、管理分析定位处理周期、管理分析定位装置线程线程；</p>
    <p>[0163]	③、直接调用读脚本文件接口 ；</p>
    <p>[0164]	④、直接调用读数据库的接口 ；</p>
    <p>[0165]	⑤、调用配置数据缓存子模块；调用脚本数据缓存子模块；其中配置数据缓存子 模块通过分析定位管理器调用数据库接口得到的配置数据进行缓存处理；脚本数据缓存子 模块通过分析定位管理器调用读脚本文件的接口得到的脚本数据进行缓存处理。</p>
    <p>[0166]	⑥、提供调用告警分析子模块的接口 ；提供了告警数据缓存、性能数据缓存、分析 结果缓存的回调接口 ；提供对外返回分析结果的接口。</p>
    <p>[0167]	在上述本发明给出的一种对引发收无光告警自动进行故障定位的装置的基础上， 本发明给出了对引发收无光告警自动进行故障定位的方法，包括告警分析方法，和性能分 析方法，所述这两种方法的执行步骤如下（参见图1)：</p>
    <p>[0168]	第一，收到分析定位管理器的启动告警分析子模块的函数调用，如图1中的“3)”;</p>
    <p>[0169]	第二，启动告警数据缓存子模块，如图1中的“4)”；</p>
    <p>[0170]	第三，告警数据缓存子模块调用收无光告警代码脚本，如图1中的“5)”；</p>
    <p>[0171]	第四，告警缓存子模块调用和分析管理器之间的回调函数接口，获得一批告警数 据，如图1中的“6)”，并通过收无光告警代码进行过滤，得到一组收无光告警；[0172]	通过通信失效代码进行过滤，得到一组通信失效告警；</p>
    <p>[0173]	然后，执行网元、盘及端口的告警分析；</p>
    <p>[0174]	最后，如果网元、盘及端口的告警分析没有完成对一个收无光告警进行故障定位， 则性能数据缓存子模块调用和分析管理器之间的接口，获得一批性能数据，如图1中的 “ 12) ”，然后性能分析子模块调用缓存的性能数据，如图1中的“ 10”，执行网元断电性能分 析；</p>
    <p>[0175]	第五，将告警分析子模块执行的结果写入分析结果缓存中，如图1中的“8) ”。将性 能分析子模块执行的结果写入分析结果缓存中，如图1中的“14)”。</p>
    <p>[0176]	在上述技术方案的基础上，所述网元、盘及端口的告警分析及网元断电性能分析 的执行步骤如下（参见图2):</p>
    <p>[0177]	第一，遍历收无光告警的缓存数据集合完毕了吗？否，去第二 ；是，去第十八；</p>
    <p>[0178]	第二，获取一个收无光告警对象，记为告警1，遍历位置指向下一个元素；通过告 警1的对象ID，查找配置数据缓存的拓扑连接数据的源（或者宿）端口 ID有结果吗？是， 得到拓扑连接L，去第三；否，去第一；</p>
    <p>[0179]	第三，获取拓扑连接L的宿（或者源）的端口 IDl;</p>
    <p>[0180]	第四，通过端口 IDl查询通信失效告警缓存数据集合成立吗？是，去第五；否，去 第七；</p>
    <p>[0181]	第五，有一个通信失效告警对象，记为告警2，告警2的告警代码为发送失效吗？ 是，去第六；否，去第七；</p>
    <p>[0182]	第六，故障定位为IDl对应的光物理口发送失效，去第十七；</p>
    <p>[0183]	第七，获取拓扑连接L的宿（或者源）的端口 IDl所在的盘ID2;</p>
    <p>[0184]	第八，通过盘ID2查询通信失效告警缓存数据集合成立吗？是，去第九；否，去第</p>
    <p>[0185]	第九，有一个通信失效告警对象，记为告警3，告警3的告警代码为盘失效吗？是， 去第十；否，去第十一；</p>
    <p>[0186]	第十，故障定位为盘ID2失效，去第十七；</p>
    <p>[0187]	第十一，获取拓扑连接L的宿（或者源）的端口 IDl所在的网元ID3;</p>
    <p>[0188]	第十二，通过网元ID3查询通信失效告警缓存数据集合成立吗？是，去第十三； 否，去第十六；</p>
    <p>[0189]	第十三，从当前时间开始，依据时间值的减小，通过性能数据缓存调用和分析定位 管理器之间的回调接口，获得一批性能数据集合：4个相邻的15分钟电源电压值：V1，V2，V3 和V4，其中，Vl距离当前时间最近，而V4距离当前时间最远；</p>
    <p>[0190]	第十四，在数值上Vl &lt; V2 &lt; V3 &lt; V4成立吗？是，去第十五；否，去第十六；</p>
    <p>[0191]	第十五，故障定位为判定为网元ID3有断电故障，去第十七；</p>
    <p>[0192]	第十六，故障判定为由端口 ID查询出来的拓扑连接L对应的光纤断了 ；</p>
    <p>[0193]	第十七，故障分析结果写入分析结果缓存，去第一；</p>
    <p>[0194]	第十八，结束。</p>
    <p>[0195]	在具体实施中，该分析定位装置所依赖的集成维护系统的体系结构如图3所示。 该分析定位装置所依赖的集成维护系统在体系架构基本上分为2层：集成维护系统的客户端，和集成维护系统的服务端；分析定位装置在集成维护系统的服务端实现。</p>
    <p>[0196]	具体的实现过程如下：</p>
    <p>[0197]	采用以太网通信，传输设备和主机1上的网元级管理系统进行配置业务、告警和 性能数据的交互，如图3的“（1)”；</p>
    <p>[0198]	采用以太网通信，多个网元级管理系统和一个集成维护系统服务端建立通信连 接，且在具体实现中，采用RPC进行两层网管系统的通信，如图3的“（3)，，；</p>
    <p>[0199]	在主机2上的集成维护系统服务端进程的RPC客户端，收到网元级管理系统的RPC 的服务端送来的配置业务数据后，启动配置业务处理功能，采用集成维护系统体系中的对 象模型，对象ID编码范围，进行配置业务数据的映射处理，刷新集成维护系统服务端进程 中的树结构存储的对象集合，所述树结构存储的对象集合简称内存对象树，以及和数据库 表中的配置业务数据，达到内存对象树和数据库中没有脏数据的效果，如图3的“（4) ”和图 3 的“ (5)，，；</p>
    <p>[0200]	在主机2上的集成维护系统的服务端进程中，建立RPC客户端和主机1上的网元 级管理系统的RPC服务端之间的持久态的事件通道，RPC客户端用于随时接收RPC服务端 上报的告警性能数据；</p>
    <p>[0201]	在主机2上的集成维护系统的服务端进程中，创建分析定位装置对象，创建成功 后，调用脚本数据缓存子模块及配置数据缓存子模块；</p>
    <p>[0202]	在主机2上的集成维护系统的服务端进程中和分析定位相关的三个线程，分别为 告警处理线程，性能处理线程和分析定位装置线程；前两个线程的功能在于无限期的分别 等待告警数据处理完成事件到来，性能数据处理完成事件的到来。任意一个事件到来后，从 事件对应的队列中将数据读出来，写入数据库，如图3的“（8) ”；具体实现过程是：集成维护 系统的RPC客户端在收到网元级网管的RPC服务端的告警或性能数据后，调用内存对象树 的数据缓存，进行告警性能对像ID及序列号处理，如图3的“（6) ”和图3的“（7) ”;处理完 毕后，分别写入告警队列及性能队列；一批告警数据处理完成，并且写告警队列完毕后，发 出告警数据处理完成事件，通知告警处理线程将告警队列中的告警数据读走，然后写数据 库；一批性能数据处理完成，并且写性能队列完毕后，发出性能数据处理完成事件，通知性 能处理线程将性能队列中的性能数据读走，然后写数据库；</p>
    <p>[0203]	分析定位装置线程在于周期性的执行告警分析子模块及性能分析子模块；分析定 位装置线程具体实施，参见第一部分具体实施的数据结构定义，第二部分的具体实施的实 现流程。</p>
    <p>[0204]	第一部分具体实施的数据结构定义</p>
    <p>[0205]	1枚举值定义</p>
    <p>[0206]	enum AMCODE</p>
    <p>[0207]	{</p>
    <p>[0208]	H告警代码的数值和具体网管相关，这里给出示例：</p>
    <p>[0209]	//端口发送失效告警代码枚举</p>
    <p>[0210]	AMC0DE_TF = 1,</p>
    <p>[0211 ] H单盘失效告警代码枚举 [0212] AMC0DE_FAIL = 2，[0213]</p>
    <p>[0215]</p>
    <p>[0217]</p>
    <p>网元通信中断告警代码枚举</p>
    <p>[0214] AMCODE NEC0MFAIL = 3，</p>
    <p>光纤断，实际设备没有该告警代码，仅仅用来判定故障。</p>
    <p>[0216] AMCODE FIBERBRE0KEN = 4</p>
    <p>网元断电告警代码枚举</p>
    <p>[0218]	AMC0DE_P0WER0FF = 5</p>
    <p>[0219]	}；</p>
    <p>[0220]	2、数据结构定义</p>
    <p>[0221]	2.1告警数据结构</p>
    <p>[0222]	struct ALARM_ADAPT</p>
    <p>[0223]	{</p>
    <p>[0224]	int iSequenceNo ；// ^lJ；</p>
    <p>[0225]	int iObjectID ；// 对象 ID ；</p>
    <p>[0226]	int iAlarmCode ；// 告警代码；</p>
    <p>[0227]	int iPortNo ;//端口号；</p>
    <p>[0228]	string strBeginTime ；// 开始时间；</p>
    <p>[0229]	string StrEndTime ；// 结束时间；</p>
    <p>[0230]	}；</p>
    <p>[0231]	2. 2性能数据结构</p>
    <p>[0232]	struct PM_ADAPT</p>
    <p>[0233]	{</p>
    <p>[0234]	int iSequenceNo ；// ^lJ；</p>
    <p>[0235]	int iObjectld ；// 对象 ID ；</p>
    <p>[0236]	int iPMCode ；// 性能代码；</p>
    <p>[0237]	int iPortNo ;//端口号；</p>
    <p>[0238]	double dValue ；// 性能值；</p>
    <p>[0239]	string strBeginTime ；// 开始时间；</p>
    <p>[0240]	string StrEndTime ；// 结束时间；</p>
    <p>[0241]	}；</p>
    <p>[0242]	2. 3缓存所有的通信失效告警数据</p>
    <p>[0243]	multimap&lt;int, ALARM_ADAPT&gt;oAlIAlarmMMap ；</p>
    <p>[0244]	主键为告警对象ID，值为告警对象；数据来源于告警缓存数据在读取脚本缓存的 通信失效代码数据后，过滤出来的数据。</p>
    <p>[0245]	其中，通信失效代码数据，在解决方案中可以通过脚本文件定制。在具体实施例子 中枚举了有限的通信失效代码AMCODE的作为示范。</p>
    <p>[0246]	2. 4缓存所有的收无光告警数据</p>
    <p>[0247]	vector&lt;ALARM_ADAPT&gt;oAlILosOptAmVec ；</p>
    <p>[0248]	元素为每个收无光告警对象；数据来源于告警缓存数据，在读取脚本缓存的 收无光代码数据后，如果告警数据的代码为收无光数据，则过滤出该告警的数据，写入oAllLosOptAmVec。此处给出说明后，具体实施中，不再描述这一收无光告警筛选过程。</p>
    <p>[0249]	其中，收无光代码数据，在解决方案中可以通过脚本文件定制。</p>
    <p>[0250]	2. 5缓存所有的拓扑连接数据</p>
    <p>[0251]	map&lt;int. pair&lt;int, int&gt;&gt;oAlITopoLinkMap ；</p>
    <p>[0252]	主键为源（宿）端ID，值为一个对pair，对的第一个值为拓扑连接ID，第二个值为 宿（源）端口 ID ；数据来源于配置数据中的拓扑连接数据。</p>
    <p>[0253]	2. 6缓存所有的单盘和端口父子关系对</p>
    <p>[0254]	map&lt;int, int&gt;oPort2BoardMap ；</p>
    <p>[0255]	主键为端口 ID，值为盘ID ；数据来源于配置数据中的单盘和端口数据。</p>
    <p>[0256]	2. 7缓存所有的网元和单盘父子关系对</p>
    <p>[0257]	map&lt;int, int&gt;oBoard2NeMap ；</p>
    <p>[0258]	主键为盘ID，值为网元ID ；数据来源于配置数据中的网元和盘数据。</p>
    <p>[0259]	2. 8收集故障分析结果到map&lt;int，int&gt;oAllResultMap，主键为对象ID ；值为故障 原因。</p>
    <p>[0260]	第二部分的具体实施的实现流程</p>
    <p>[0261]	3具体实施周期性分析的框架流程（参见图4)</p>
    <p>[0262]	3. 1，装载分析定位装置线程退出事件句柄hEvent ；装载计时器周期T ；</p>
    <p>[0263]	3. 2，启动计时器，分析周期完毕了吗？是，去3. 3;否，去3. 4;</p>
    <p>[0264]	3. 3，执行后边的“告警性能分析的流程”；去3. 2 ；</p>
    <p>[0265]	3. 4，有线程退出事件到来吗?是，去3. 5;否，去3. 2;</p>
    <p>[0266]	3. 5，结束。</p>
    <p>[0267]	4具体实施告警性能分析的流程（参见图5)</p>
    <p>[0268]	4. 1，装载收无光告警集合oAllLosOptAmVec ；装载所有告警集合oAlIAlarmMMap ； 装载拓扑连接集合oAllTopoLinkMap ；装载端口和盘映射集合oPort2BoardMap ；装载盘和 网元映射集合oBoard2NeMap ；</p>
    <p>[0269]	4. 2，遍历 oAllLosOptAmVec 完毕吗？否，去 4. 3 ；是，去 4. 18 ；</p>
    <p>[0270]	4. 3，有告警对象Am ；遍历位置指向下一个元素；</p>
    <p>[0271]	4. 4，由 Am. iObjectld 查找 oAllTopoLinkMap 有值吗？是，去 4. 5 ；否，去 4. 2 ；</p>
    <p>[0272]	4. 5，有端口 IDl，拓扑连接 IDl ；</p>
    <p>[0273]	4. 6，以端口 IDl、AMC0DE_TF、oAlIAlarmMMap为参数调用后边“通过告警类型和对 象ID查找告警的流程”为真吗？是，去4.7 ；否，去4.8 ；</p>
    <p>[0274]	4. 7，以端口 IDl为主键，AMC0DE_TF为值，装入结果集合oAlIResultMap中，去 4. 2 ；</p>
    <p>[0275]	4. 8，由端口 IDl 查找 oPort2BoardMap 有值吗？是，去 4. 9 ；否，去 4. 2 ；</p>
    <p>[0276]	4. 9，有盘 IDl;</p>
    <p>[0277]	4. 10，以盘ID1、AMC0DE_FAIL、oAlIAlarmMMap为参数调用后边“通过告警类型和 对象ID查找告警的流程”为真吗？是，去4. 11 ；否，去4. 12 ；</p>
    <p>[0278]	4. 11，以盘IDl为主键，AMC0DE_FAIL为值，装入结果集合oAlIResultMap中，去 4. 2 ；[0279]	4. 12，由盘 IDl 查找 oBoard2NeMap 有值吗？是，去 4. 13 ；否，去 4. 2 ；</p>
    <p>[0280]	4. 13，有网元 IDl;</p>
    <p>[0281]	4. 14,4. 14，以网元 ID1、AMC0DE_NEC0MFAIL、oAlIAlarmMMap 为参数调用后边“通 过告警类型和对象ID查找告警的流程”为真吗？是，去4. 15 ；否，去4. 17 ；</p>
    <p>[0282]	4. 15，以网元IDl为参数调用后边“电源电压性能分析流程”为真吗？是，去4. 16 ； 否，去4. 17 ；</p>
    <p>[0283]	4. 16，以网元 IDl 为主键，AMC0DE_P0WER0FF 为值，装入结果集合 oAlIResultMap 中，去4.2 ；</p>
    <p>[0284]	4. 17，以拓扑连接IDl为主键，AMC0DE_FIBERBRE0KEN为值，装入结果集合 oAlIResultMap 中，去 4. 2 ；</p>
    <p>[0285]	4. 18，结束。</p>
    <p>[0286]	5通过告警类型和对象ID查找告警的流程（参见图6)</p>
    <p>[0287]	5. 1，装载对象IDl ；装载告警类型1 ；装载所有告警集合oAlIAlarmMMap ；</p>
    <p>[0288]	5. 2，由 IDl 查找 oAllAlarmMMap 有值吗？是，去 5. 3 ；否，去 5. 8 ；</p>
    <p>[0289]	5. 3，有一个 pair;</p>
    <p>[0290]	5. 4，遍历pair完毕吗？否，去5. 5 ；是，去5.8 ；</p>
    <p>[0291]	5. 5，有告警对象Aml ；遍历位置指向下一个元素；</p>
    <p>[0292]	5. 6，Ami. iAlarmCode 等于告警类型 1 吗?是，去 5. 7 ；否，去 5. 4 ；</p>
    <p>[0293]	5. 7，返回真，去 5.9 ；</p>
    <p>[0294]	5. 8，返回假，去 5.9 ；</p>
    <p>[0295]	5. 9，结束。</p>
    <p>[0296]	6具体实施电源电压性能分析流程（参见图7)</p>
    <p>[0297]	6.1，装载网元 IDl;</p>
    <p>[0298]	6. 2，通过数据库接口，查找网元IDl从当前时间开始向前的连续4个15分钟电源 电压的性能集合oPowerPmMap ；</p>
    <p>[0299]	6. 3，oPowerPmMap 为空吗？否，去 6. 4 ；是，去 6. 11 ；</p>
    <p>[0300]	6. 4，i = 1 ；</p>
    <p>[0301]	6. 5，i &lt;= 3 ？是，去 6. 6 ；否，去 6. 13 ；</p>
    <p>[0302]	6. 6，由 i 查找 oPowerPmMap 有值吗？是，去 6. 7 ；否，去 6. 11 ；</p>
    <p>[0303]	6. 7，有性能对象1;</p>
    <p>[0304]	6. 8，由 i+Ι 查找 oPowerPmMap 有值吗？是，去 6. 9 ；否，去 6. 11 ；</p>
    <p>[0305]	6. 9，有性能对象2;</p>
    <p>[0306]	6. 10，对象 1. dValue &gt;=对象 2. dValue ？是，去 6. 11 ；否，去 6. 12 ；</p>
    <p>[0307]	6. 11，返回假，去 6. 14 ；</p>
    <p>[0308]	6. 12，++i，去 6. 5 ；</p>
    <p>[0309]	6. 13，返回真，去 6. 14 ；</p>
    <p>[0310]	6. 14，结束。</p>
    <p>19</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1946010A?cl=zh">CN1946010A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2006年10月9日</td><td class="patent-data-table-td patent-date-value">2007年4月11日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">光路瞬断控制装置及瞬断控制方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101335658A?cl=zh">CN101335658A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年8月5日</td><td class="patent-data-table-td patent-date-value">2008年12月31日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">一种实现通讯设备掉电告警的远程实时监控方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101820558A?cl=zh">CN101820558A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年4月23日</td><td class="patent-data-table-td patent-date-value">2010年9月1日</td><td class="patent-data-table-td ">烽火通信科技股份有限公司</td><td class="patent-data-table-td ">一种无源光网络检测长发光onu的方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=rDWQBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012240000">H04L12/24</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2011年3月2日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年4月13日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年3月20日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/460e16b2fc67b7fc3783/CN101982947A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%AF%B9%E5%BC%95%E5%8F%91%E6%94%B6%E6%97%A0%E5%85%89%E5%91%8A%E8%AD%A6%E8%87%AA%E5%8A%A8%E8%BF%9B.pdf?id=rDWQBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U2jBIOObcbPcpQJ7fly-qapEvHgkg"},"sample_url":"https://www.google.com/patents/reader?id=rDWQBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>