<!DOCTYPE html><html><head><title>专利 CN101159657A - 一种实现私网穿越的方法、设备及服务器 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种实现私网穿越的方法、设备及服务器"><meta name="DC.contributor" content="杨骁&#32704;" scheme="inventor"><meta name="DC.contributor" content="华为技术有限公司" scheme="assignee"><meta name="DC.date" content="2007-10-16" scheme="dateSubmitted"><meta name="DC.description" content="一种实现私网穿越的方法、设备及服务器。其主要包括：首先，处于私网中的源设备生成待发送的报文后，由隧道客户端将该报文前封装上隧道后通过建立的隧道发送给隧道服务器；之后，隧道服务器报文后将隧道头剥离，并进行地址转换，将报文发送到目的了。由于采用了隧道传输技术进行报文的传递，因此，本发明实施例能够简便的实现各种网络环境下的私网穿越，大大简化了网络的维护，便于运营商在各种网络环境下推广其业务。"><meta name="DC.date" content="2008-4-9"><meta name="citation_patent_publication_number" content="CN:101159657:A"><meta name="citation_patent_application_number" content="CN:200710175958"><link rel="canonical" href="https://www.google.com/patents/CN101159657A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101159657A?cl=zh"/><meta name="title" content="专利 CN101159657A - 一种实现私网穿越的方法、设备及服务器"/><meta name="description" content="一种实现私网穿越的方法、设备及服务器。其主要包括：首先，处于私网中的源设备生成待发送的报文后，由隧道客户端将该报文前封装上隧道后通过建立的隧道发送给隧道服务器；之后，隧道服务器报文后将隧道头剥离，并进行地址转换，将报文发送到目的了。由于采用了隧道传输技术进行报文的传递，因此，本发明实施例能够简便的实现各种网络环境下的私网穿越，大大简化了网络的维护，便于运营商在各种网络环境下推广其业务。"/><meta property="og:title" content="专利 CN101159657A - 一种实现私网穿越的方法、设备及服务器"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101159657A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101159657A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=EEdcBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101159657A&amp;usg=AFQjCNFlLzb8Y07vebqU37HLoPORfUMa8w" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/73751ec9840b063e216e/CN101159657A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/73751ec9840b063e216e/CN101159657A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101159657A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101159657A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101159657A?cl=zh" style="display:none"><span itemprop="description">一种实现私网穿越的方法、设备及服务器。其主要包括：首先，处于私网中的源设备生成待发送的报文后，由隧道客户端将该报文前封装上隧道后通过建立的隧道发送给隧道服务器；之后，隧道服务器报文后将隧道头剥离，并进...</span><span itemprop="url">https://www.google.com/patents/CN101159657A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101159657A - 一种实现私网穿越的方法、设备及服务器</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101159657A - 一种实现私网穿越的方法、设备及服务器" title="专利 CN101159657A - 一种实现私网穿越的方法、设备及服务器"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101159657 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200710175958</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2008年4月9日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2007年10月16日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年10月16日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200710175958.4, </span><span class="patent-bibdata-value">CN 101159657 A, </span><span class="patent-bibdata-value">CN 101159657A, </span><span class="patent-bibdata-value">CN 200710175958, </span><span class="patent-bibdata-value">CN-A-101159657, </span><span class="patent-bibdata-value">CN101159657 A, </span><span class="patent-bibdata-value">CN101159657A, </span><span class="patent-bibdata-value">CN200710175958, </span><span class="patent-bibdata-value">CN200710175958.4</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%A8%E9%AA%81%E7%BF%80%22">杨骁&#32704;</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8D%8E%E4%B8%BA%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">华为技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101159657A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101159657A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101159657A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (13),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (3),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=EEdcBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200710175958&amp;usg=AFQjCNEezuHVolHCnCbS7Y4kWWU4bXA2tQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=EEdcBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101159657A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEciZZ-EYCGoBPeJlKbi8YDneiTQg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT70574468" lang="ZH" load-source="patent-office">一种实现私网穿越的方法、设备及服务器</invention-title>
      </span><br><span class="patent-number">CN 101159657 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA38344156" lang="ZH" load-source="patent-office">
    <div class="abstract">一种实现私网穿越的方法、设备及服务器。其主要包括：首先，处于私网中的源设备生成待发送的报文后，由隧道客户端将该报文前封装上隧道后通过建立的隧道发送给隧道服务器；之后，隧道服务器报文后将隧道头剥离，并进行地址转换，将报文发送到目的了。由于采用了隧道传输技术进行报文的传递，因此，本发明实施例能够简便的实现各种网络环境下的私网穿越，大大简化了网络的维护，便于运营商在各种网络环境下推广其业务。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(10)</span></span></div><div class="patent-text"><div mxw-id="PCLM5812537" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1、一种实现私网穿越的方法，其特征在于，包括：    在处于私网中的源设备与隧道服务器之间的建立隧道；    处于私网中的源设备生成待发送的报文后，由隧道客户端在该报文前封装隧道头，并通过所述隧道发送到隧道服务器；    隧道服务器对收到报文进行隧道头的剥离，并进行网络地址转换，创建地址转换对应关系，之后，将报文发送到目的服务器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2、 根据权利要求1所述的方法，其特征在于，该方法还包括： 隧道服务器接收需要发送给所述源设备的响应报文，并根据所述地址转换对应关系将该响应报文中的公网目的地址转换为网络地址转换客户端的私 网目的地址，并封装隧道头后通过所述隧道发送转换后的响应报文。</div>
    </div>
    </div> <div class="claim"> <div num="3" class="claim">
      <div class="claim-text">3、 一种客户端设备，其特征在于，包括：隧道建立单元，用于在处于私网中的源设备与隧道服务器间建立隧道； 报文获取单元，用于获取处于私网中的源设备生成的待发送的报文； 第一隧道管理单元，用于将报文接收单元接收到的报文前增加隧道头 后，通过所述隧道建立单元建立的隧道发送给处于公网中的隧道服务器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4、 根据权利要求3所述的设备，其特征在于，所述的第一隧道管理单元 具体包括：报文发送处理单元，用于将待发送的报文前封装上隧道头后通过所述第 一隧道建立单元建立的隧道发送；报文接收处理单元，用于通过所述隧道接收报文，并对接收到的报文进 行去隧道封装处理。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5、 根据权利要求4所述的设备，其特征在于，该设备还包括隧道维护单 元，用于定时通过所述隧道与隧道服务器之间进行联系，保持所述隧道连接的有效。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6、 根据权利要求3、 4或5所述的设备，其特征在于，所述的设备还包括虚拟网卡管理单元，用于创建虚拟网卡，该虚拟网卡作为所述报文获取单 元，用于根据设置的目的路由信息截获源设备生成的待发送的报文，并传递 给隧道管理单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7、 根据权利要求6所述的设备，其特征在于，所述的设备还包括路由管 理单元，用于设置目的路由信息，并将设置的目的路由信息提供给所述虚拟 网卡。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8、 一种隧道服务器，其特征在于，包括：隧道建立单元，用于在处于私网中的隧道客户端与隧道服务器之间的建 立隧道；报文处理单元，用于通过所述隧道建立单元建立的隧道交互才艮文，所述 的报文前封装有隧道头；第二隧道管理单元，用于对所述报文处理单元接收到的隧道客户端发来 的报文进行去隧道封装处理，去除报文前的隧道头，及对需要发送给隧道客 户端的报文进行隧道封装处理，并将封装处理后的报文通过所述报文处理单 元发送；网络地址转换单元，用于将所述第二隧道管理单元处理后的报文进行地 址转换处理并发送。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9、 根据权利要求8所述的服务器，其特征在于，所述的第二隧道管理单 元还包括隧道维护单元，用于定时通过所述隧道与一个或多个隧道客户端之 间进行联系，以保持隧道连接的有效性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10、 根据权利要求8或9所述的服务器，其特征在于，所述服务器还包括 地址分配处理单元，用于为处于私网中的客户端设备中的虚拟网卡分配地 址。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES10520818" lang="ZH" load-source="patent-office" class="description">
    <p>一种实现私网穿越的方法、设备及服务器</p>
    <p>技术领域本发明涉及网络通信技术领域，尤其涉及一种私网穿越技术。</p>
    <p>背景技术随着网络技术的迅速发展，电信网逐步向移动网络和固定网络互相融合 的方向发展，使得各种电信业务均希望承载于IP (互联网协议）网络上。但 是由于IP网络中的IP地址的严重缺乏，使得无法每一个终端都分配一个公网 地址。为此，需要在IP网络上实现相应的私网穿越功能，以实现公网地址与 私网地址之间的转换，使得利用较少的公网IP地址满足更多的私网用户的访 问网络的需求。</p>
    <p>现有技术中，基于IP网络的私网穿越方式主要包括三种，下面将对该三 种通常采用的私网穿越实现方式进行说明。</p>
    <p>第一种私网穿越方式为：基于ALG (应用层网关）的穿越方式 在该方式中，NAT (网络地址转换）设备上的核心模块是ALG,具体的 私网穿越方式为：通过修改TCP (传输控制协议）、UDP (用户数据包协 议）报文头部地址信息实现公网地址与私网地址的转换，同时还通过ALG识 别出应用层协议才艮文内容中地址和端口 ，并对识别出的地址和端口进行转 换，在NAT出口处替换为公网地址出口，以保证报文能路由回来。</p>
    <p>可以看出，由于该方式中需要NAT设备识别出应用层协议，使得每新增 一种应用，便需要对NAT进行升级。而在网络上已经部署了大量NAT设备的 情况下，实现对网络上所有的NAT设备的升级将变得十分困难。</p>
    <p>第二种私网穿越方式为：STUN (UDP的NAT简单穿越）的穿越方式 在该方式中，首先，应用程序STUN Client (STUN客户端）向NAT外的 STUN Server ( STU睡务器）发送基于UDP的STUN请求消息；STUN Server接收到所述请求消息后产生响应消息，响应消息中携带请求消息的端 口，即STUN Client在NAT上对应的外部端口；之后，通过NAT,将响应消息 发送给STUN Client; STUN Client通过响应消息中的内容得知其在NAT上对 应的外部地址。这样，在后续的报文内容需要携带地址端口的情况下，填上 已知的外部地址端口 。在该方式中，虽然无需改动现网中的NAT设备，但是，其无法支持TCP 连接的穿越，也无法穿越对称型NAT,即该方式不支持TCP连接和对称型 NAT的私网穿越。第三种私网穿越方式为：TURN (NAT Relay (NAT中继器）穿越）的穿 越方式，即通过Relay (中继）方式穿越私网在该方式中，应用程序TURN Client (TURN客户端）通过类似STUN的 机制预先获得其在公网上的地址和端口，但是，TURN方式得到是其在TURN Server (TURN服务器）的地址和端口，则通过TURN Server转发经过NAT 的所有TURN Client报文。在该方式中，解决了TCP连接和对称型NAT的私网穿越问题，但是，在 实现本发明过程中，发明人发现上述现有技术至少存在以下问题：目前，很多企业的内部网络均存在NAT/FW设备，该NAT/FW设备对穿 越的报文使用的端口、协议等均有严格的限制，这将导致某些协议报文无法 通过企业的NAT/FW设备，因而，相应报文也就无法到达STUN Server,使 得私网穿越无法实现。即在实现私网穿越过程中，由于企业内部网络的安全 限制非常严格，导致私网穿越的情况更加复杂。总之，目前没有一种技术方案能够解决各种网络环境下的私网穿越问</p>
    <p>题，包括解决各种企业内部网络中的私网穿越。 发明内容本发明实施例提供一种实现私网穿越的方法、设备及服务器，以便于能 够实现各种网络环境下的私网穿越，且实现过程简单。本发明实施例提供了一种实现私网穿越的方法，包括： 在处于私网中的源设备与隧道服务器之间的建立隧道； 处于私网中的源设备生成待发送的报文后，由隧道客户端在该4艮文前封装隧道头，并通过所述隧道发送到隧道服务器；隧道服务器对收到报文进行隧道头的剥离，并进行网络地址转换，创建地址转换对应关系，之后，将报文发送到目的服务器。 本发明实施例提供了一种客户端设备，包括：隧道建立单元，用于在处于私网中的源设备与隧道服务器间建立隧道； 报文获取单元，用于获取处于私网中的源设备生成的待发送的报文； 第一隧道管理单元，用于将报文接收单元接收到的报文前增加隧道头 后，通过所述隧道建立单元建立的隧道发送给处于公网中的隧道服务器。 本发明实施例提供了一种隧道服务器，包括：隧道建立单元，用于在处于私网中的隧道客户端与隧道服务器之间的建 立隧道；才艮文处理单元，用于通过所述隧道建立单元建立的隧道交互报文，所述 的报文前封装有隧道头；第二隧道管理单元，用于对所述才艮文处理单元接收到的隧道客户端发来 的报文进行去隧道封装处理，去除报文前的隧道头，及对需要发送给隧道客 户端的报文进行隧道封装处理，并将封装处理后的报文通过所述报文处理单 元发送；</p>
    <p>网络地址转换单元，用于将所述第二隧道管理单元处理后的报文进行地 址转换处理并发送。由上述本发明实施例提供的技术方案可以看出，本发明实施例提供的私 网穿越实现方案，由于采用了隧道传输技术进行穿越报文的传递，且在报文 最前面封装相应的隧道头，因此，本发明实施例能够简便的实现各种网络环 境下的私网穿越，并使得穿越过程中才艮文的处理更加灵活，大大简化了网络 的维护，便于运营商在各种网络环境下推广其业务。附图说明图1为本发明实施例应用的网络结构示意图；图2为本发明实施例提供的私网穿越处理流程示意图； 具体实施方式本发明实施例提供的私网穿越实现方案中，主要包括：在处于私网中的 源设备生成待发送的报文后，由网络地址转换客户端在该报文前封装隧道 头，即在报文的最外层封装隧道头，并通过建立的隧道发送给隧道服务器； 隧道服务器收到所述报文后创建地址转换对应关系，并根据该地址转换对应 关系将报文中的网络地址转换客户端的私网源地址转换为公网源地址，发送 转换后的报文，将报文发送给接收该报文的目的设备。目的设备接收到隧道服务器发来的报文后，可以向隧道服务器返回响应 报文，且该响应报文需要发送给所述源设备，在这种情况下，隧道服务器则 可以根据其记录的地址转换对应关系将该响应报文中的公网目的地址转换为源设备的私网目的地址，之后，通过所述隧道发送转换后的响应l艮文。另外，在上述处理过程中，为使得源设备中生成的待发送报文可以被所</p>
    <p>述的虚拟网卡获取，则还可以在源设备上配置相应的路由信息，以便于在源 设备中能够根据配置的路由信息及待发送报文的目的地址将待发送的报文传 递给虚拟网卡，即当待发送报文的目的地址与配置的路由信息匹配时，则将 相应的报文传递给虚拟网卡，虚拟网卡交给第一报文收发处理单元，以进行 后续的报文发送处理。具体一点讲，本发明实施例中，可以在^^网上部署TN Server (隧道和 NAT服务器），在源设备上部署TN Client (隧道和NAT客户端），若存在 NAT (网络地址转换）/FW (防火墙设备），则还在连接于TN&#8212;Server与TN Client之间的NAT/FW上开放到达TN&#8212;Server的IP和端口 ，允许到达 TN_Server的报文穿越NAT/FW。经过这样的部署便可以使得源设备的报文 能够通过TN Client、 NAT/FW及TN&#8212;Server实现私网到公网的穿越。其中， 所述的地址可以包括IP地址和端口 。本发明实施例中，相应的报文传递的处理过程具体可以包括：(一） 私网中的源设备发送报文的处理过程(1 )源设备通过TN Client发送报文，报文最外层的目的地址为TN Server的地址，源地址为源设备（即TN Client)的地址；(2) 所述报文经NAT/FW之后，执行NAT转换处理，将所述报文的源IP 地址及端口转换为公网IP地址（即转换为NAT/FW的地址），并发送到公网 上的TN Server;(3) TN Server收到所述报文后，解封装后根据才艮文中的源地址（即源 设备的地址）和目的地址（即接收报文中数据的设备的地址），并将报文中 的源地址转换为TN Server的地址，将报文转发至相应的目的设备。(二） 公网中的设备向私网中的设备发送响应报文的处理过程(1 )目的设备向公网上的TN Server发送响应报文，该响应报文的目的 地址为TN Server的地址；(2) TN Server收到所述响应报文后，将所述响应才艮文的目的地址修改 为源设备的IP地址和端口 ，并进行隧道封装然后发送；(3) 所述响应报文经过NAT/FW之后，继续执行地址转换处理，将该响 应报文的目的地址修改为接收该响应报文的TN Client的地址（执行公网地址 到私网地址的转换），并发送；(4) 源设备中的TNCIient接收响应报文，即源设备收到响应报文。 在上述处理过程中，源设备可以通过在TN Client与TN Server之间建立的隧道与TN Server之间进行信息的交互。相应的处理过程可以包括：TN Client截获源设备发出的请求报文，并将所述请求报文封装隧道头后发送；之 后，封装了隧道头的报文到达NAT/FW后，由NAT/FW将该报文中的私网源 地址转换成公网源地址，并继续发送；最后，该报文到达TN Server,由TN Server去掉该报文的隧道头，并对该报文的源地址进行转换（即转换为TN Server的地址），之后，将转换后的报文发送至目的设备。同样，目的设备 向源设备发送的响应报文也可以通过TN Client与TN Server之间的隧道进行 传递，以使得源设备可以接收到相应的响应报文。根据实际需求，在网络中可以布置多个TN Server,以用于为不同的源设 备提供相应的私网穿越功能。本发明实施例中，源设备具体可以为PC (个人计算机），或者，也可以 为其他需要进行私网穿越的设备或应用程序。本发明实施例中，TN Client为在设备上部署的具有隧道功能和NAT功能 的程序或设备；若所述TN Client为程序，则该程序可以单独安装，不影响设 备上已有的程序。而且，为使得TN Client能够通过TN Client与TN Server间 的隧道传递才艮文，TN Client包括虚拟网卡。为便于对本发明实施例的理解，下面结合图1和图2，对本发明实施例的 具体应用进行详细名又述。</p>
    <p>图1为本发明实施例的应用的网络环境的结构示意图，具体包括：公网上的目的设备Server (服务器）1，在公网上部署的TN Server,公网和源设备 之间的NAT/FW,需要进行私网穿越的源设备（即PC以及其上设置的TN Client,且所述TNCIient上设置了虚拟网卡）。在图1中，假设所述PC的IP地址和端口分别为10.1.1.10和5000,所述 PC进行私网穿越后到达的目的设备的IP地址和端口分别为：40.1.1.10和 6600;所述的TN Server的IP地址和端口分别为30.1.1.10和8000;所述的 NAT/FW的公网IP地址和端口分别为20.1.1.10和20001 。为使得TN Client发送的报文可以穿越NAT/FW到达TN Server,则需要在 NAT/FW设置为允许源设备的报文穿越NAT/FW到达TN Server。在TNCIient上，需要创建UDP Socket (用户数据报协议的套接口 ），以 便于令TN Client与TN Server建立连接，其中，该连接的源IP地址和端口为 10.1.1.10和5000，目的IP地址和端口为30.1.1.10和8000。通过该连接发送 的报文在到达NAT/FW后，相应的源IP地址和端口将被转换为公网IP地址和 端口，即转换为20.1.1.10和20001。基于上述假设，本发明实施例中，首先需要建立TN Client与TN Server 之间的隧道，以传递TN Client与TN Server之间的报文，相应的隧道建立的 过程具体可以包括以下过程：(1 ) TN Client向TN Server发送隧道建立请求；(2) NAT/FW设备收到TN Client发来的隧道建立请求后，生成如下NAT表项：私网IP	私网端口	公网IP	公网端口10.1.1.10	5000	20.1.1.10	20001由上述NAT表项可知，在NAT/FW上，可以利用该生成的表项将源设备 的私网源IP地址和端口转换为NAT/FW上设置的公网源IP地址和端口 。</p>
    <p>(3) NAT/FW利用上述表项对所述隧道建立请求进行私网地址到公网地 址的转换处理后，发送给TN Server,所述TN Server收到该隧道建立请求 后，则生成如下的隧道索引表：&lt;table&gt;table see original document page 11&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;在该隧道索引表中，1为隧道的索引号，用于表明隧道索引号为1的隧道，其对应的IP地址和端口是20.1.1.10和20001 (即NAT/FW的地址）。TN Server收到该连接请求之后，还向TN Client发送连接响应，TN Client从TN Server获取的IP地址、掩码、网关分别为192.168.1.10 、 255.255.255.0、 192.168.1.1;(4) TN Client将获取的所述信息设置到虚拟网卡上；同时，TN Client设置路由信息，即设置需要穿越私网的目的地址，使得 到该目的地址的报文路由到网关192.168.1.1 ,例如，配置到目的IP为 40.1.1.10的路由，应该路由到网关192.168.1.1上，则源设备发送的目的地址 为40.1.1.10报文将被路由到所述网关，在路由到网关的过程中该报文将会被 虚拟网卡截获并传送到目的IP地址为192.168.1.10的TN Client,以便于TN Client可以获取需要穿越私网的报文；也就是说，在源设备中，设置需要发送到网关192.168.1.1的报文均需要 经过虚拟网卡传送出去，这样，相应的报文便可以被虚拟网卡截获，并可以 将其传递给TN Client,以^f更于TN Client通过隧道传递所述报文。建立相应的隧道后，为避免该隧道被老化掉，还需要在TN Client与TN Server之间定时进行报文的交互（如交互心跳报文等）。通过上述处理过程，便可以在TN Client与TN Server之间建立相应的隧 道，下面将对利用该隧道进行报文传递的处理过程进行描述。</p>
    <p>如图2所示，本发明实施例的报文传递处理过程包括发送流程和接收流 程，下面分别对本发明实施例的发送流程和4妄收流程进4亍详细叙述。 (一）本发明实施例的发送报文的处理流程包括如下步骤：步骤1:源设备向目的设备发送请求报文；具体可以由源设备的应用程序 发送所述请求"t艮文。在本发明实施例中，应用程序访问的目的设备的IP地址和端口为 40.1.1.10和6600,根据在源设备中设置的路由，应用程序访问目的设备的请 求报文选择虚拟网卡的地址192.68.1.10和1025作为源地址；同时，根据设置 的路由，所述请求报文应经过网关192.168.1.1传送（以便于报文可以被TN Client获取），该所述请求报文的具体格式如下表所示：&lt;table&gt;table see original document page 12&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;		步骤2: TN Client截获所述请求纟艮文，并进行隧道封装；具体可以为：首先，请求报文在发送过程中被TN Client上设置的虚拟网卡截获，并通过虚拟网卡和TN Client之间的接口被发送到TN Client;之后，由TN Client对所述请求报文进行隧道封装并发送；其中，隧道封装后的请求报文的具体格式如下表所示：&lt;table&gt;table see original document page 12&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;由上述隧道封装后的请求报文的具体格式可以看出，对所述请求报文的 隧道封装，即是在原有的请求报文中增加一个隧道头，所述隧道头包括公网</p>
    <p>目的IP和端口   （ 30.1.1.10和8000 ),以及源设备的私网源IP地址和端口(10.1.1.10和5000);对于步骤1中所述的请求报文则作为步骤2中生成的报 文的数据直接封装到数据区中。步骤3:步骤2中经过隧道封装后的报文到达NAT/FW后，由NAT/FW对 该报文的源IP和端口进行转换处理，即将报文中的源设备的私网源IP地址和 端口转换成公网源IP地址和端口 ，之后，继续发送该报文；具体可以为：根据建立隧道时创建的NAT表项对经过隧道封装后的报文 进行地址转换处理，转换处理后的报文的具体格式如下表所示：&lt;table&gt;table see original document page 13&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;	由上述报文的具体格式可以看出，在TN Client与TN Server创建的连接 所经过的NAT/FW上，按照其上预先创建的NAT表项，可以将源设备的私网 源IP地址和端口转换成公网源IP地址和端口 ，即将10.1.1.10和5000转换为 20&#19972;1.10和20001。步骤4: NAT/FW发送的报文到达TN Server后，TN Server将该报文的隧 道头去掉，并对该报文的源IP和端口 、目的IP和端口进行NAT，即进行网络 地址转换操作，将TN Client的IP地址和端口转换为TN Server的IP地址和端 口，之后，向目的设备发送转换后的报文；在进行NAT的过程中，还创建的相应的NAT表项，该表项如下：&lt;table&gt;table see original document page 13&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;</p>
    <p>由该NAT表项可以看出，在TN Server上，隧道索引为1的隧道的两端地 址分别为：TN Client&#8212;端的私网IP地址和端口 ，以及TN Server&#8212;端的公网IP地址和端口 ；通过创建的该NAT表项，TN Server需要将接收到的NAT/FW发来的报文 中的TN Client地址（私网地址）转换为公网地址一，以及在接收到目的设备 返回的响应报文后，能够根据该NAT表项将所述响应报文中目的地址（公网 地址）转换为TN Client的地址（私网地址）后发送给TN Client;在该步骤中，TN Server根据上述NAT表项对接收的报文进行转换，转换 后得到的报文格式如下表所示：&lt;table&gt;table see original document page 14&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;变为TN Server的出口IP和端口由上述报文格式可知，将步骤3中的报文去掉隧道头之后，将TN Client 的私网源IP地址和端口转换为对应的公网IP地址和端口 （即30.1.1.10和 8000),并将转换生的报文发送给目的设备Server1。(二）本发明实施例的接收响应报文的处理流程包括如下步骤：TN Server将以上报文发送到ServeM之后，Server1对报文进行回应，即 需要向源设备方向返回响应报文；相应的源设备的接收响应报文的处理流程 具体可以包括如下步骤：步骤1: Server1对源设备发出的请求报文进行响应；由于Server1接收到的是TN Server发来的请求报文（报文的源地址为TN Server的地址），所以该响应报文的目的地址应为TN Server的地址，即相应 的响应报文的格式如下表所示：&lt;table&gt;table see original document page 14&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;</p>
    <p>步骤2: TN Server收到所述响应报文后，则查找相应的NAT表项，以对 响应报文中的目的IP地址和端口进行转换；在该步骤中，转换后的响应报文的格式如下表所示：&lt;table&gt;table see original document page 15&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;由上述报文格式可以看出，TN Server根据其上的NAT表项，将作为目的 地址的公网IP地址和端口 （即TN Server的地址）转换为相应的私网IP地址和 端口（即源设备的地址），以便于源设备可以接收到该响应报文；同时，TN Server根据NAT表项中的隧道索引，找到对应的隧道索引表， 对该响应报文进行隧道封装，封装后的响应报文格式如下表所示：&lt;table&gt;table see original document page 15&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;由上述报文格式可以看出，进行隧道封装后的报文，即是在原有的报文中添加隧道头，所述隧道头指示该报文的源IP地址和端口为TN Server的公网 IP地址和端口 ，所述隧道头指示该才良文的目的IP地址和端口为NAT/FW设备 的公网IP和端口 ，以使得响应报文可以到达NAT/FW设备。步骤3: NAT/FW接收到所述响应报文后，查找NAT表项，并根据查找到 的NAT表项对该响应报文的目的IP地址和端口进行转换，以将响应报文的目 的IP地址和端口转换为源设备的私网IP地址和端口 ，具体地，转换后的响应 报文的格式如下表所示：H的ip、端ui	10.1.1.10	5000源ip、端口	30.1.1.10	8000数据区	data	^-^		目的ip、端口	192.168.1.10	1025源ip、端口	40.u.10	6600数据区	data	目的IP端口已经被转换NAT/FW向TN Client发送转换后的响应报文。步骤4: TN Client接收到所述的响应报文后，将响应报文的隧道头去 掉，具体地，去掉隧道头的响应报文格式如下表所示：&lt;table&gt;table see original document page 16&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;	之后，根据去掉隧道头的响应报文中的目的IP地址和端口，将上述去掉隧道头的响应才艮文发送到TN Client与源设备之间的虚拟网卡；步骤5:虚拟网卡接收到所述响应报文后，继续将该响应报文发送到相应的协议层进行处理，如发送到TCP/IP协议层处理，并继续将该报文送到相应的应用程序中，以便应用程序对此报文进行处理。经过上述处理，处于私网中的设备可以穿越私网，通过公网中的隧道服务器与其他设备之间进行信息交互。本发明实施例还提供了一种客户端设备，该客户端设备的具体结构如图3 所示，具体可以包括：(1) 隧道建立单元，用于建立与隧道服务器之间的隧道，以便通过该隧 道进行穿越私网的报文的传递；(2) 报文获取单元，用于获取处于私网中的源设备生成的待发送的报 文，具体可以根据配置的路由信息获取需要穿越私网的待发送的报文；(3)第一隧道管理单元，用于将报文接收单元接收到的报文前封装隧道 头，并通过所述隧道建立单元建立的隧道发送给处于公网中的隧道服务器，以实现私网穿越；可选地，该第一隧道管理单元具体可以包括：报文发送处理单元，用于将待发送的报文前封装上隧道头后通过所述第 一隧道建立单元建立的隧道发送；报文接收处理单元，用于通过所述隧道接收报文，并对接收到的报文进 行去隧道封装处理，解隧道封装后的报文可以交给其他协议层进行相应的报 文4妻收处理。可选地，该客户端设备还可以包括隧道维护单元，用于定时通过所述隧 道与隧道服务器之间进行才艮文的传递，以保证隧道的有效性，例如，通过定 时发送心跳报文的方式保证隧道的有效，以避免隧道因长时间未使用而被网 络中的NAT/FW设备等老化掉，同时，若在一定时间内未收到某条隧道的心 跳"^艮文则将该隧道老化掉。可选地，该客户端"i殳备还可以包括虚拟网卡管理单元，用于创建虚拟网 卡，设置虚拟网卡的IP地址、掩码、网关等；该虚拟网卡作为所述报文获取 单元，用于根据设置的目的路由信息截获源设备中的应用程序生成的待发送 的报文（需要穿越私网的报文），并传递给隧道管理单元。为获得相应的目的路由信息，所述的设备还可以包括路由管理单元，用 于设置目的路由信息，并将设置的目的路由信息提供给所述虚拟网卡，以便 于所述虚拟网卡可以截获与目的路由信息匹配的需要穿越私网的报文；例 如，该路由管理单元负责设置目的IP地址的路由，该目的IP地址是源设备中 应用程序需要访问的地址，且路由设置完成后，所述应用程序发的报文将被 路由到虚拟网卡。本发明实施例还提供了一种隧道服务器，其具体实现结构仍如图3所示，</p>
    <p>具体可以包括：(1) 隧道建立单元，用于建立与隧道服务器之间的隧道，以便通过该隧 道进行穿越私网的报文的传递；(2) 报文处理单元，用于与处于私网中的隧道客户端之间交互报文，所述的报文为通过与所述隧道客户端之间的隧道交互传递，即接收由私网用户 通过隧道发来的报文，并在所述报文最外层封装上隧道头后通过隧道向私网用户发送报文；(3) 第二隧道管理单元，用于对所述报文处理单元接收到的隧道客户端 发来的报文进行去隧道封装处理，以及用于对需要发送到隧道客户端的报文道客户端；可选地，所述的第二隧道管理单元具体可以用于记录并维护隧道两端的 地址信息，如维护隧道索引表，以记录隧道对应的IP地址和端口 ，并提供给 所述网络地址转换单元，以便于网络地址转换单元可以4艮据该隧道两端的地 址信息进行相应的网络地址转换处理。</p>
    <p>可选地，该隧道服务器还可以包括隧道维护单元，用于定时通过所述隧 道与一个或多个隧道客户端之间进行报文的传递，以保证隧道的有效性，例 如，通过心跳寺艮文的传递保证隧道的有效，同时，若在一定时间内未收到某 条隧道的心跳报文则将该隧道老化掉。</p>
    <p>(4) 网络地址转换单元，用于将所述第二隧道管理单元处理后的报文中 进行地址转换处理后发送。在隧道服务器中，可选地，还可以包括地址分配处理单元，用于为处于 私网中的隧道客户端中的虚拟网卡（设置于客户端设备中）分配地址，该单 元具体可以为DHCP处理单元，且用于负责分配IP地址给TN Client,当隧道 连接老化掉以后，还负责释放分配的IP地址。</p>
    <p>综上所述，利用上述本发明实施例，源设备可以从私网向公网发出的请 求报文，之后，还可以从公网接收到一个响应报文，而且，本发明实施例是 在报文最前面封装相应的隧道头，因此，其能够简便的实现各种网络环境下 的私网穿越，并使得穿越过程中报文的处理更加灵活。进一步讲，由于本发明实施例中，报文的传递具体是在TN Client和TN Server间通过隧道封装传 递实现，因此，无论源设备发出的何种协议的报文，均可以经过隧道封装传 递，对于NAT/FW来说，通过的报文只有一种，即目的IP和端口为特定的公 网目的IP和端口 （例如，本发明实施例中的30.1.1.10和8000)的报文，而对 于报文的具体内容，NAT/FW并不涉及。这样，只需要在NAT/FW上设置一 个简单的规则，允许到TN Client和TN Server之间传递的穿越私网的报文可 以穿越该NAT/FW即可，即本发明实施例可以应用于各种网络环境中，且不 会对其业务产生负面影响，大大简化了网络的维护。</p>
    <p>以上所述，仅为本发明较佳的具体实施方式，但本发明的保护范围并不 局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可 轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明 的保护范围应该以权利要求书的保护范围为准。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101753634B?cl=zh">CN101753634B</a></td><td class="patent-data-table-td patent-date-value">2008年12月19日</td><td class="patent-data-table-td patent-date-value">2013年1月30日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">一种私网穿越的方法，系统和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102148767A?cl=zh">CN102148767A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年5月12日</td><td class="patent-data-table-td patent-date-value">2011年8月10日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">一种基于nat的数据路由方法及其装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102281180A?cl=zh">CN102281180A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年7月14日</td><td class="patent-data-table-td patent-date-value">2011年12月14日</td><td class="patent-data-table-td ">冶金自动化研究设计院</td><td class="patent-data-table-td ">应用于不同局域网的终端相互通讯的虚拟网卡通讯装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102377629A?cl=zh">CN102377629A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年8月20日</td><td class="patent-data-table-td patent-date-value">2012年3月14日</td><td class="patent-data-table-td ">成都市华为赛门铁克科技有限公司</td><td class="patent-data-table-td ">终端穿越私网与ims核心网中服务器通信的方法、装置及网络系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102377629B?cl=zh">CN102377629B</a></td><td class="patent-data-table-td patent-date-value">2010年8月20日</td><td class="patent-data-table-td patent-date-value">2014年8月20日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">终端穿越私网与ims核心网中服务器通信的方法、装置及网络系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102571814A?cl=zh">CN102571814A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年2月10日</td><td class="patent-data-table-td patent-date-value">2012年7月11日</td><td class="patent-data-table-td ">浙江宇视科技有限公司</td><td class="patent-data-table-td ">一种ip监控系统中穿越隔离设备的方法及代理设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102932487A?cl=zh">CN102932487A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年11月26日</td><td class="patent-data-table-td patent-date-value">2013年2月13日</td><td class="patent-data-table-td ">福建伊时代信息科技股份有限公司</td><td class="patent-data-table-td ">数据处理方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US9137334">US9137334</a></td><td class="patent-data-table-td patent-date-value">2013年12月30日</td><td class="patent-data-table-td patent-date-value">2015年9月15日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">Interconnection method, apparatus, and system based on socket remote invocation</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US9172559">US9172559</a></td><td class="patent-data-table-td patent-date-value">2013年2月19日</td><td class="patent-data-table-td patent-date-value">2015年10月27日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">Method, apparatus, and network system for terminal to traverse private network to communicate with server in IMS core network</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US9215215">US9215215</a></td><td class="patent-data-table-td patent-date-value">2013年2月5日</td><td class="patent-data-table-td patent-date-value">2015年12月15日</td><td class="patent-data-table-td ">Zhejiang Uniview Technologies Co., Ltd</td><td class="patent-data-table-td ">Method and device for passing through isolation device in surveillance network</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2012022145A1?cl=zh">WO2012022145A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年3月10日</td><td class="patent-data-table-td patent-date-value">2012年2月23日</td><td class="patent-data-table-td ">Chengdu Huawei Symantec Technologies Co., Ltd.</td><td class="patent-data-table-td ">终端穿越私网与ims核心网中服务器通信的方法、装置及网络系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013086928A1?cl=zh">WO2013086928A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年11月22日</td><td class="patent-data-table-td patent-date-value">2013年6月20日</td><td class="patent-data-table-td ">Huawei Technologies Co., Ltd.</td><td class="patent-data-table-td ">一种互联方法、装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013117154A1?cl=zh">WO2013117154A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年2月5日</td><td class="patent-data-table-td patent-date-value">2013年8月15日</td><td class="patent-data-table-td ">Zhejiang Uniview Technologies Co., Ltd</td><td class="patent-data-table-td ">穿越监控网络中隔离设备的方法和设备</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=EEdcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029120000">H04L29/12</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=EEdcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012460000">H04L12/46</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=EEdcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029080000">H04L29/08</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2008年4月9日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2008年6月4日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年9月14日</td><td class="patent-data-table-td ">C12</td><td class="patent-data-table-td ">Rejection of an application for a patent</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/73751ec9840b063e216e/CN101159657A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%8E%B0%E7%A7%81%E7%BD%91%E7%A9%BF%E8%B6%8A%E7%9A%84%E6%96%B9%E6%B3%95_%E8%AE%BE%E5%A4%87.pdf?id=EEdcBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U14I9bDXzwrUA5NJFhBArpvKFhlUA"},"sample_url":"https://www.google.com/patents/reader?id=EEdcBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>