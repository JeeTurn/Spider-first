<!DOCTYPE html><html><head><title>专利 CN103020056A - 一种跨开放平台社交消息优化计算的订阅推送引擎 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种跨开放平台社交消息优化计算的订阅推送引擎"><meta name="DC.contributor" content="黄智彬" scheme="inventor"><meta name="DC.contributor" content="何健明" scheme="inventor"><meta name="DC.contributor" content="田之进" scheme="inventor"><meta name="DC.contributor" content="佳都新太科技股份有限公司" scheme="assignee"><meta name="DC.date" content="2011-9-20" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种跨开放平台社交消息优化计算的订阅推送引擎，联接于业务系统业务模块和社交开放平台之间，实现两者的用户社交消息互联互通。设计本引擎时首要考虑的是与具体订阅服务无关，任何业务系统均可接入；与开放平台类型无关，任何开放平台均可适配。本引擎包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分。其中，订阅规则采集，实现并发收集来自业务系统的社交订阅请求，并采用自描述XML结构封装数据；订阅规则解析计算，实现跨社交开放平台计算；结果异步推送，实现以优化策略回推计算结果；本发明具有跨开放平台，通用非阻塞订阅推送机制，计算算法优化等特点，满足个性化订阅需求，提高业务系统使用价值。"><meta name="DC.date" content="2013-4-3"><meta name="DC.relation" content="CN:101453426:A" scheme="references"><meta name="DC.relation" content="CN:102144243:A" scheme="references"><meta name="DC.relation" content="US:20060288329:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:103020056:A"><meta name="citation_patent_application_number" content="CN:201110280305"><link rel="canonical" href="https://www.google.com/patents/CN103020056A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN103020056A?cl=zh"/><meta name="title" content="专利 CN103020056A - 一种跨开放平台社交消息优化计算的订阅推送引擎"/><meta name="description" content="本发明公开了一种跨开放平台社交消息优化计算的订阅推送引擎，联接于业务系统业务模块和社交开放平台之间，实现两者的用户社交消息互联互通。设计本引擎时首要考虑的是与具体订阅服务无关，任何业务系统均可接入；与开放平台类型无关，任何开放平台均可适配。本引擎包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分。其中，订阅规则采集，实现并发收集来自业务系统的社交订阅请求，并采用自描述XML结构封装数据；订阅规则解析计算，实现跨社交开放平台计算；结果异步推送，实现以优化策略回推计算结果；本发明具有跨开放平台，通用非阻塞订阅推送机制，计算算法优化等特点，满足个性化订阅需求，提高业务系统使用价值。"/><meta property="og:title" content="专利 CN103020056A - 一种跨开放平台社交消息优化计算的订阅推送引擎"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN103020056A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN103020056A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=tgftBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN103020056A&amp;usg=AFQjCNF6hBt0bvi0dik7RndGDWl0t18-1A" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/05615d02b6f224290eef/CN103020056A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/05615d02b6f224290eef/CN103020056A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN103020056A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN103020056A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN103020056A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种跨开放平台社交消息优化计算的订阅推送引擎，联接于业务系统业务模块和社交开放平台之间，实现两者的用户社交消息互联互通。设计本引擎时首要考虑的是与具体订阅服务无关，任何业务系统均可接入；与...</span><span itemprop="url">https://www.google.com/patents/CN103020056A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN103020056A - 一种跨开放平台社交消息优化计算的订阅推送引擎</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN103020056A - 一种跨开放平台社交消息优化计算的订阅推送引擎" title="专利 CN103020056A - 一种跨开放平台社交消息优化计算的订阅推送引擎"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN103020056 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201110280305</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2013年4月3日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年9月20日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年9月20日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201110280305.9, </span><span class="patent-bibdata-value">CN 103020056 A, </span><span class="patent-bibdata-value">CN 103020056A, </span><span class="patent-bibdata-value">CN 201110280305, </span><span class="patent-bibdata-value">CN-A-103020056, </span><span class="patent-bibdata-value">CN103020056 A, </span><span class="patent-bibdata-value">CN103020056A, </span><span class="patent-bibdata-value">CN201110280305, </span><span class="patent-bibdata-value">CN201110280305.9</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%BB%84%E6%99%BA%E5%BD%AC%22">黄智彬</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BD%95%E5%81%A5%E6%98%8E%22">何健明</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%94%B0%E4%B9%8B%E8%BF%9B%22">田之进</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%BD%B3%E9%83%BD%E6%96%B0%E5%A4%AA%E7%A7%91%E6%8A%80%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">佳都新太科技股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103020056A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103020056A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103020056A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=tgftBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201110280305&amp;usg=AFQjCNHf7pzfinyjC1WVsyFF7-RIQm19vA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=tgftBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D103020056A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEUF5tGQJ2h7six4SkTG2JuTDjtAw"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT122958404" lang="ZH" load-source="patent-office">一种跨开放平台社交消息优化计算的订阅推送引擎</invention-title>
      </span><br><span class="patent-number">CN 103020056 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA109838542" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种跨开放平台社交消息优化计算的订阅推送引擎，联接于业务系统业务模块和社交开放平台之间，实现两者的用户社交消息互联互通。设计本引擎时首要考虑的是与具体订阅服务无关，任何业务系统均可接入；与开放平台类型无关，任何开放平台均可适配。本引擎包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分。其中，订阅规则采集，实现并发收集来自业务系统的社交订阅请求，并采用自描述XML结构封装数据；订阅规则解析计算，实现跨社交开放平台计算；结果异步推送，实现以优化策略回推计算结果；本发明具有跨开放平台，通用非阻塞订阅推送机制，计算算法优化等特点，满足个性化订阅需求，提高业务系统使用价值。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(6)</span></span></div><div class="patent-text"><div mxw-id="PCLM52451347" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种跨开放平台社交消息优化计算的订阅推送引擎，其特征在于联接于业务系统和社交开发平台两者之间，实现业务系统和开放平台之间的用户社交消息的互联互通，在这基础上实现用户关注消息的个性化定制的订阅推送服务；业务系统业务模块的社交化需求，其需要关注的社交消息可能牵涉到多个社交平台， 不同社交平台消息存储以及获取方式不同，并且还分别处于不同类型的开放系统中，本订阅弓I擎处在业务角度上考虑，引入一种内联所有开放平台的机制为业务系统业务模块屏蔽开放平台的差异，业务系统业务模块的信息与社交信息的互联互通，体现透明性特点； 包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分，其中这三部分涉及的对接交互的系统包括有内部业务服务系统、公网的社交开放平台；其中客户端接入部分包括多个业务系统或者业务模块；开放平台部分包括适配多个不同类型的开放平台；引擎部分通过公共IP网或者内部网与客户端接入部分连接；引擎部分通过公共IP网与适配的开放平台部分连接；所述第一部分社交信息订阅规则采集，用于：接收业务系统中各个服务模块的社交信息订阅需求，同时处理多个业务系统并多个模块中的请求，不需要阻塞引擎系统，引擎根据上下文环境将请求数据以自描述的XML结构封装元数据和请求数据成订阅规则数据包，使其不必依赖静态定于的服务接口和数据结构，订阅规则数据包以队列形式存储并排队等候处理；所述第二部分订阅规则解析计算，用于：对第一步中收集的订阅请求进行跨开放平台的关联解析，订阅规则一般包括业务系统或者业务模块的社交信息需求，以XML格式封装起来，按照解析器所认知的约定规则格式。引擎内有一个集中式全局统筹的调度器，负责从第一步中采集的订阅规则数据队列中提取数据集，对规则数据按不同开放平台连接目标进行分拆和合并，再分发到开放平台类型相同的解析器解析执行，最后在集中式全局解析器中统筹合并结果，并存放到订阅结果队列中待推送；所述第三部分结果异步推送，用于：订阅请求经过解析器解析计算后存放在结果存储结构中，由统一集中的推送器将结果回推给业务系统，其中回推使用回推策略包括有主动推送和储存待拉两种策略，灵活地化解业务系统接收超时致使消息堵塞。</div>
    </div>
    </div> <div class="claim"> <div num="2" class="claim">
      <div class="claim-text">2.	一种跨开放平台社交消息分类计算方法，其特征在于社交消息计算是跨开放平台的，其计算牵涉的社交信息是跨业务系统和开放平台的，这里采用分类计算的方法；本引擎联接于业务系统和社交开发平台两者之间，其中开放平台包括目前主流两类， 社交网和微博平台，典型代表如人人社交网和新浪微博平台；对于业务系统业务模块，其订阅关注的社交信息可以跨开放平台类型，即需要订阅请求的用户，某用户作为唯一个体在业务系统范围内存在，并存在一定用户关系图谱集，在多个开放平台上也分别存在一定范围的社交关系图谱集，而业务范围内的用户关系图谱集与开放平台上的社交关系图谱集存在一定的关联，如果将用户关系图谱集和社交关系图谱集看成是全局范围内的有唯一标识的用户关系集，那么上述的业务范围内与多个开放平台范围内的关系图谱集的关联就指他们的用户集存在交集，或者I对I相交、或者是I对N相交， 其交集为唯一用户集，这里的用户可以是真实个人或虚拟用户；跨开放平台社交信息订阅的计算就是基于这种用户交集的基础上展开计算的；譬如，某用户在业务系统范围内存在并持有一定量好友关系集，该用户在社交网上存在唯一帐号身份并持有多个关注好友，该用户在微博平台上也存在对应的唯一帐号并持有多个关注好友。该用户的好友关系集合分别在业务系统范围与社交网范围和微博平台范围内存在交叉的地方，即用户交集，该用户在两种开放平台上均存在帐号并持有各自的好友关系列表，并且当中与该用户在业务系统范围内的好友群刚好有部分共同好友，存在好友关系交集；交集数据按照开放平台类型划分类，主要分为两类，第一类为I对I相交，例如业务范围内关系集与社交网范围内关系集的交集、业务范围内关系集与微博平台范围内关系集的交集；第二类为I对N相交，业务范围内关系集与多个开放平台范围内关系集的交集； 所述第一类划分法为I对I相交，分别指业务范围内关系集和单个开放平台范围内关系集，即业务范围内关系集中存在的某个用户同时也在单个开放平台范围内关系集中，基于这种情况，采用单种开放平台类型解析器可以计算变更结果；所述第二类划分法为I对N相交，I为业务范围内关系集，N为开放平台范围内关系集， N大于等于2，即业务范围内关系集中存在的某个用户同时也在多个开放平台范围内关系集中，基于这种情况，采用内联多种开放平台类型解析器可以计算变更结果；现在该用户需要关注他的业务范围内好友的社交动态，该用户通过业务系统与引擎的接口向引擎发起一则订阅请求，请求的数据格式为一自描述的XML数据包，内里封装包括解析器能识别的元数据和订阅好友社交信息变更的数据，表示该用户关注其好友的在社交平台信息变更情况，需要引擎解析器去解析他的这个订阅包并需要得到返回结果，再回传反馈给该用户。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的方法，其特征在于，还包括：采用集中式全局统筹的调度和全局解析的计算方法；引擎内的一个集中式全局统筹的调度器，负责从第一步中采集的订阅规则数据队列中提取数据集，对规则数据按不同开放平台连接目标进行分拆和合并，再分发到开放平台类型相同的解析器解析执行，最后在集中式全局解析器中统筹合并结果，并存放到订阅结果队列中待推送；所述的集中式全局调度器，负责统一调度解析过程，包括从订阅规则数据队列中提取数据集、分类分拆数据、委托特定开放平台类型解析器解析执行；所述分类分拆数据，采用前面特征所描述的分类法分拆；各个解析器解析过程支持并发；所述集中式全局解析器，负责收集结果并汇总统计、将结果丢放到待返回的推送队列中。其中汇总过程，涉及到获取并发线程执行结果，并内联全局的订阅规则进行综合汇总结果O</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求2所述的方法，其特征在于，还包括：跨开放平台社交信息的计算方法是采用优化策略；所述优化策略指减少引擎资源开销和减少对开放平台api调用，以提升解析引擎性能和解析速度为目的；优化策略包括按照开放平台类型分类批量计算、定期间隔计算；对订阅数据包按照开放平台类型划分能有效地支持优化计算；所述按照开放平台类型分类批量计算策略，指同一种开放平台类型的社交信息计算，例如是社交网平台类型的社交信息计算，其社交平台类型相同并且计算规则类似，即存在类似的开放api，因此可以将这类社交信息计算合并为批量计算，这类批量集中计算比单条计算提高计算速度和效率；所述定期间隔计算，指设定一定时间间隔进行计算，引擎采用定时调度机制，定期向开放平台查询计算订阅包含的社交信息是否存在变更。在固定间隔内，调度引擎会收集本时间段内的计算请求，再集中在一个时间点开始计算，这样可以减少不必要的冗余请求，因为大部分社交信息的变更间隔并不频繁；定时间隔动态地可配置。</div>
    </div>
    </div> <div class="claim"> <div num="5" class="claim">
      <div class="claim-text">5.	一种社交信息订阅结果的推送机制，其特征在于采用自动调节的推送策略，自动机制会根据当前引擎调用业务系统客户端的耗时自动调整推送策略，以达到合理利用服务端引擎资源的效果；推送策略包括主动推送策略和存储待拉策略；所述主动推送策略，指服务引擎主动将订阅计算产生的结果，通过调用业务系统客户端提供的回调api，将结果回推给业务系统；所述存储待拉策略，指服务引擎将订阅计算产生的结果存储在服务引擎端提供的增强存储容器中，等待业务系统客户端的主动查询请求，查询是否积压大量的结果消息未推送， 若是则主动拉取并清除这些结果消息；存储待拉策略的选取是基于解决主动推送策略时引起的堵塞问题而引入的，当存在网络不稳定时，主动推会因大量的io传送而消耗服务端引擎的性能资源，致使主动推送频频超时，结果消息不能发出而出现堵塞；当主动推遇到网络不畅或者业务系统客户端繁忙时，超时过一段阀值后，服务引擎会自动切换推送策略，而将结果消息存放在本地的缓存结构中，待业务系统客户端主动来拉取。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求5所述的方法，其特征在于，还包括增强的存储容器，用来存放待回推的订阅结果信息，引入本存储容器，可实现下面几个优点：同步转异步，并发收集计算结果并不阻塞；计算结果消息可持久化，保证可靠交付；计算结果采用自描述的XML结构，使得生成的介绍结果对其对于业务系统客户端不需求静态地确定调用接口，因此可解耦适配所有业务系统客户端接口 ；增强的存储容器采用封装并发队列的方式，存储队列可持久化，以文件方式存储，以保证可靠交互。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES59513938" lang="ZH" load-source="patent-office" class="description">
    <p>一种跨开放平台社交消息优化计算的订阅推送弓I擎</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及互联网社交应用领域，特别是涉及一种跨开放平台社交消息优化计算的订阅推送引擎，联接于业务系统和社交开发平台两者之间，为业务系统业务模块屏蔽开放平台的差异，实现业务系统和开放平台之间的用户社交消息的互联互通。</p>
    <p>背景技术</p>
    <p>[0002]	在互联网时代，把网站的服务封装成一系列计算机易识别的数据接口开放出去，供第三方开发者使用，这种行为就叫做Open API，提供开放API的平台本身就被称为开放平台。通过开放平台，网站不仅能提供对Web网页的简单访问，还可以进行复杂的数据交互，将它们的Web网站转换为与操作系统等价的开发平台。第三方开发者可以基于这些已经存在的、公开的Web网站而开发丰富多彩的应用。</p>
    <p>[0003]	在现在流行社交交互中，用户使用开放平台的客户端产生社交数据内容，这个社交数据，内容均存在于其所属的开放平台上，接入客户端应用（包括我们的引擎）想要获取社交数据只能通过它提供的开放api去查询获取。这样问题来了，如果某用户的社交数据有变更（比如用户使用开放平台客户端发送某些社交数据消息）我们的业务系统业务模块应用是不知道的，但业务系统业务模块的用户却要求实时获取这一数据变更的消息，那么业务系统业务模块编程适配开放平台的开放接口，并只能通过不断的api查询才知道用户的社交内容有变更。因此必须引入一个中间机制，建立一套订阅推送引擎，去使用轮询机制不断调用开放平台的api去发现社交数据变更的消息，当发现有变更后订阅引擎内部触发一项推送服务，将这一个变更的消息推送回业务系统业务模块，业务系统客户端提供回调接口能处理这一则社交数据变更的消息，并做界面消息提醒给用户。由此看来，引擎服务中必须包含这一项订阅推送服务。可能要定制一套订阅规则，对接入的业务系统业务模块约定规则内容，通过多种协议接口将其传递给引擎的订阅服务管理中。引擎服务维护和解析这些订阅服务规则，并异步将结果回馈给业务系统业务模块。</p>
    <p>[0004]	本跨开放平台社交消息优化计算的订阅推送引擎，对外以客户端身份连接大部分的开放平台，适配其提供的开放服务以供我们内部业务系统、业务模块应用调用，将内部应用的采集的用户信息内容传播到开放平台上，并关注开放平台上的用户关心图谱中产生的社交信息内容，促进用户社交互动，以达到内部业务系统、业务模块应用的社交化而提升用户体验的目的。</p>
    <p>发明内容</p>
    <p>[0005]	本发明所要解决的技术问题是业务系统业务模块的社交化需求，其需要关注的社交消息可能牵涉到多个社交平台，不同社交平台消息存储以及获取方式不同，并且还分别处于不同类型的开放系统中，本订阅引擎处在业务角度上考虑，引入一种内联所有开放平台的机制为业务系统业务模块屏蔽开放平台的差异，业务系统业务模块的信息与社交信息的互联互通；[0006]	为实现上述发明目的，本发明提供一种跨开放平台社交消息优化计算的订阅推送引擎，涉及对接交互的系统包括有内部业务服务系统、公网的社交开放平台，包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分，其中这三部分涉及的对接交互的系统包括有内部业务服务系统、公网的社交开放平台；</p>
    <p>[0007]	所述第一部分社交信息订阅规则采集，用于：接收业务系统中各个服务模块的社交信息订阅需求，同时处理多个业务系统并多个模块中的请求，不需要阻塞引擎系统，引擎根据上下文环境将请求数据以自描述的XML结构封装元数据和请求数据成订阅规则数据包，使其不必依赖静态定于的服务接口和数据结构，订阅规则数据包以队列形式存储并排队等候处理；</p>
    <p>[0008]	所述第二部分订阅规则解析计算，用于：对第一步中收集的订阅请求进行跨开放平台的关联解析，订阅规则一般包括业务系统或者业务模块的社交信息需求，以XML格式封装起来，按照解析器所认知的约定规则格式。引擎内有一个集中式全局统筹的调度器，负责从第一步中采集的订阅规则数据队列中提取数据集，对规则数据按不同开放平台连接目标进行分拆和合并，再分发到开放平台类型相同的解析器解析执行，最后在集中式全局解析器中统筹合并结果，并存放到订阅结果队列中待推送；</p>
    <p>[0009]	所述第三部分结果异步推送，用于：订阅请求经过解析器解析计算后存放在结果存储结构中，由统一集中的推送器将结果回推给业务系统，其中回推使用回推策略包括有主动推送和储存待拉两种策略，灵活地化解业务系统接收超时致使消息堵塞；</p>
    <p>[0010]	本发明还提供一种跨开放平台社交消息分类计算方法，包括：</p>
    <p>[0011]	社交消息计算是跨开放平台的，其计算牵涉的社交信息是跨业务系统和开放平台的，这里采用分类计算的方法；</p>
    <p>[0012]	本引擎联接于业务系统和社交开发平台两者之间，其中开放平台包括目前主流两类,社交网和微博平台；</p>
    <p>[0013]	对于业务系统业务模块，其订阅关注的社交信息可以跨开放平台类型，即需要订阅请求的用户，某用户作为唯一个体在业务系统范围内存在，并存在一定用户关系图谱集，在多个开放平台上也分别存在一定范围的社交关系图谱集，而业务范围内的用户关系图谱集与开放平台上的社交关系图谱集存在一定的关联，如果将用户关系图谱集和社交关系图谱集看成是全局范围内的有唯一标识的用户关系集，那么上述的业务范围内与多个开放平台范围内的关系图谱集的关联就指他们的用户集存在交集，或者I对I相交、或者是I对N相交，其交集为唯一用户集，这里的用户可以是真实个人或虚拟用户；</p>
    <p>[0014]	跨开放平台社交信息订阅的计算就是基于这种用户交集的基础上展开计算的；</p>
    <p>[0015]	譬如，某用户在业务系统范围内存在并持有一定量好友关系集，该用户在社交网上存在唯一帐号身份并持有多个关注好友，该用户在微博平台上也存在对应的唯一帐号并持有多个关注好友。该用户的好友关系集合分别在业务系统范围与社交网范围和微博平台范围内存在交叉的地方，即用户交集，该用户在两种开放平台上均存在帐号并持有各自的好友关系列表，并且当中与该用户在业务系统范围内的好友群刚好有部分共同好友，存在好友关系交集；</p>
    <p>[0016]	交集数据按照开放平台类型划分类，主要分为两类，第一类为I对I相交，例如业务范围内关系集与社交网范围内关系集的交集、业务范围内关系集与微博平台范围内关系集的交集；第二类为I对N相交，业务范围内关系集与多个开放平台范围内关系集的交集；</p>
    <p>[0017]	所述第一类划分法为I对I相交，分别指业务范围内关系集和单个开放平台范围内关系集，即业务范围内关系集中存在的某个用户同时也在单个开放平台范围内关系集中，基于这种情况，采用单种开放平台类型解析器可以计算变更结果；</p>
    <p>[0018]	所述第二类划分法为I对N相交，I为业务范围内关系集，N为开放平台范围内关系集，N大于等于2，即业务范围内关系集中存在的某个用户同时也在多个开放平台范围内关系集中，基于这种情况，采用内联多种开放平台类型解析器可以计算变更结果；</p>
    <p>[0019]	现在该用户需要关注他的业务范围内好友的社交动态，该用户通过业务系统与引擎的接口向引擎发起一则订阅请求，请求的数据格式为一自描述的XML数据包，内里封装包括解析器能识别的元数据和订阅好友社交信息变更的数据，表示该用户关注其好友的在社交平台信息变更情况，需要引擎解析器去解析他的这个订阅包并需要得到返回结果，再回传反馈给该用户。</p>
    <p>[0020]	优选的有，上述方法中，还包括：采用集中式全局统筹的调度和全局解析的计算方法；引擎内的一个集中式全局统筹的调度器，负责从第一步中采集的订阅规则数据队列中提取数据集，对规则数据按不同开放平台连接目标进行分拆和合并，再分发到开放平台类型相同的解析器解析执行，最后在集中式全局解析器中统筹合并结果，并存放到订阅结果队列中待推送；</p>
    <p>[0021]	所述的集中式全局调度器，负责统一调度解析过程，包括从订阅规则数据队列中提取数据集、分类分拆数据、委托特定开放平台类型解析器解析执行；</p>
    <p>[0022]	所述分类分拆数据，采用前面特征所描述的分类法分拆；</p>
    <p>[0023]	各个解析器解析过程支持并发；</p>
    <p>[0024]	所述集中式全局解析器，负责收集结果并汇总统计、将结果丢放到待返回的推送队列中。其中汇总过程，涉及到获取并发线程执行结果，并内联全局的订阅规则进行综合汇总结果。</p>
    <p>[0025]	优选的有，上述方法中，还包括：跨开放平台社交信息的计算方法是采用优化策略；所述优化策略指减少引擎资源开销和减少对开放平台api调用，以提升解析引擎性能和解析速度为目的；</p>
    <p>[0026]	优化策略包括按照开放平台类型分类批量计算、定期间隔计算；</p>
    <p>[0027]	对订阅数据包按照开放平台类型划分能有效地支持优化计算；</p>
    <p>[0028]	所述按照开放平台类型分类批量计算策略，指同一种开放平台类型的社交信息计算，例如是社交网平台类型的社交信息计算，其社交平台类型相同并且计算规则类似，即存在类似的开放api，因此可以将这类社交信息计算合并为批量计算，这类批量集中计算比单条计算提高计算速度和效率；</p>
    <p>[0029]	所述定期间隔计算策略，指设定一定时间间隔进行计算，引擎采用定时调度机制，定期向开放平台查询计算订阅包含的社交信息是否存在变更。在固定间隔内，调度引擎会收集本时间段内的计算请求，再集中在一个时间点开始计算，这样可以减少不必要的冗余请求，因为大部分社交信息的变更间隔并不频繁；</p>
    <p>[0030]	定时间隔动态地可配置。</p>
    <p>[0031]	本发明还提供一种社交信息订阅结果的推送机制，包括：[0032]	采用自动调节的推送策略，自动机制会根据当前引擎调用业务系统客户端的耗时自动调整推送策略，以达到合理利用服务端引擎资源的效果；</p>
    <p>[0033]	推送策略包括主动推送策略和存储待拉策略；</p>
    <p>[0034]	所述主动推送策略，指服务引擎主动将订阅计算产生的结果，通过调用业务系统客户端提供的回调api，将结果回推给业务系统；</p>
    <p>[0035]	所述存储待拉策略，指服务引擎将订阅计算产生的结果存储在服务引擎端提供的增强存储容器中，等待业务系统客户端的主动查询请求，查询是否积压大量的结果消息未推送，若是则主动拉取并清除这些结果消息；</p>
    <p>[0036]	存储待拉策略的选取是基于解决主动推送策略时引起的堵塞问题而引入的，当存在网络不稳定时，主动推会因大量的io传送而消耗服务端引擎的性能资源，致使主动推送频频超时，结果消息不能发出而出现堵塞；</p>
    <p>[0037]	当主动推送遇到网络不畅或者业务系统客户端繁忙时，超时过一段阀值后，服务引擎会自动切换推送策略，而将结果消息存放在本地的缓存结构中，待业务系统客户端主动来拉取。</p>
    <p>[0038]	由上述方案可以看出，本发明中订阅推送引擎联接于业务系统和社交开发平台两者之间，实现业务系统和开放平台之间的用户社交消息的互联互通。每个业务系统都有社交化需求，订阅变化的用户社交信息，所以在设计本引擎时首要考虑的是与具体服务无关，任何业务系统均可接入；与开放平台类型无关，任何开放平台均可适配。本引擎包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分。其中，订阅规则采集，用于收集来自业务系统的社交信息订阅请求，支持并发处理不需阻塞；结果异步推送，用于对解析计算的结果推送回给业务系统，推送方式采用主动推送与储存待拉两种策略；订阅规则以及计算结果均采用自描述的XML格式封装元数据和数值数据，实现计算引擎与业务系统之间的解耦；订阅规则解析计算，实现跨社交开放平台计算，采取内联监听并轮询查询方式计算。本发明主要针对业务服务系统社交化需求，实现业务系统与开放平台的社交信息互联互通，将业务系统接通开放平台为实现用户社交信息传递提供集中式通道，提高业务系统使用价值和增强用户满意度。</p>
    <p>附图说明</p>
    <p>[0039]	为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。</p>
    <p>[0040]	图1为本发明实施例一中系统交互结构示意图；</p>
    <p>[0041]	图2为本发明实施例一中系统订阅推送之订阅请求采集流程示意图；</p>
    <p>[0042]	图3为本发明实施例一中系统订阅推送之规则解析计算流程示意图；</p>
    <p>[0043]	图4为本发明实施例一中系统订阅推送之结果推送流程示意图；</p>
    <p>[0044]	图5为本发明实施例二中跨开放平台优化计算算法I示意图；</p>
    <p>[0045]	图6为本发明实施例二中跨开放平台优化计算算法2示意图；</p>
    <p>[0046]	图7为本发明实施例三中跨开放平台优化计算算法3示意图；[0047]	图8为本发明实施例三中跨开放平台优化计算算法4示意图；</p>
    <p>[0048]	图9为本发明实施例三中系统所依赖的外部应用环境示意图。</p>
    <p>具体实施方式</p>
    <p>[0049]	为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。显然，所描述的实施例仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。</p>
    <p>[0050]	实施例一，参见图1。</p>
    <p>[0051]	本发明提供一种跨开放平台社交消息优化计算的订阅推送引擎，涉及对接交互的系统包括有内部业务服务系统、公网的社交开放平台，包括社交信息订阅规则采集、订阅规则解析计算、结果异步推送三部分，其中这三部分涉及的对接交互的系统包括有内部业务服务系统、公网的社交开放平台；</p>
    <p>[0052]	上述引擎部分的系统交互结构示意图参见图1，具体包括以下步骤：</p>
    <p>[0053]	图中I表示：接入的客户端系统，指业务系统业务模块，引擎通过公共IP网或者内部网与其连接；</p>
    <p>[0054]	图中2表示：订阅推送引擎核心服务部分，提供订阅推送服务；</p>
    <p>[0055]	图中3表示：开放平台部分，引擎通过公共IP网与其连接；</p>
    <p>[0056]	其中引擎部分包括：</p>
    <p>[0057]	所述第一部分社交信息订阅规则采集，用于：接收业务系统中各个服务模块的社交信息订阅需求，同时处理多个业务系统并多个模块中的请求，不需求阻塞引擎系统，请求数据以自描述的XML结构封装，使其不必依赖静态定于的服务接口和数据结构，引擎自动根据其封装的元数据格式抽取消息数据，再委托给订阅规则解析器解析执行，订阅规则数据以队列形式存储并排队等候处理；</p>
    <p>[0058]	上述引擎部分的工作过程参见图2，具体包括以下步骤：</p>
    <p>[0059]	步骤S201，用户通过业务系统业务模块发起订阅请求，关注社交信息内容；</p>
    <p>[0060]	步骤S202，接收业务系统中各个服务模块的社交信息订阅需求，同时处理多个业务系统并多个模块中的请求，这个过程是并发执行的，，不需要阻塞引擎系统；</p>
    <p>[0061]	步骤S203，引擎根据上下文环境将请求数据以自描述的XML结构封装元数据和请求数据成订阅规则数据包，使其不必依赖静态定于的服务接口和数据结构；</p>
    <p>[0062]	步骤S204，订阅规则数据包以队列形式存储并排队等候处理，这便是待解析计算队列。</p>
    <p>[0063]	所述第二部分订阅规则解析计算，用于：对第一步中收集的订阅请求进行跨开放平台的关联解析，订阅规则一般包括业务系统或者业务模块的社交信息需求，以XML格式封装起来，按照解析器所认知的约定规则格式。引擎内有一个集中式全局统筹的调度器，负责从第一步中采集的订阅规则数据队列中提取数据集，对规则数据按不同开放平台连接目标进行分拆和合并，再分发到开放平台类型相同的解析器解析执行，最后在集中式全局解析器中统筹合并结果，并存放到订阅结果队列中待推送；</p>
    <p>[0064]	上述引擎部分的工作过程参见图3，具体包括以下步骤：[0065]	对第一步中收集的订阅请求进行跨开放平台的关联解析，订阅规则一般包括业务系统或者业务模块的社交信息需求，以XML格式封装起来，按照解析器所认知的约定规则格式；</p>
    <p>[0066]	步骤S301，全局统筹调度器扫描待解析的订阅规则请求队列，按需提取部分订阅规则；</p>
    <p>[0067]	步骤S302，订阅规则数据按不同开放平台连接目标进行分拆和合并，再分发到开放平台类型相同的解析器解析执行；</p>
    <p>[0068]	步骤S303，解析器解析订阅规则，并转换为开放接口调用，这里可能使用是轮询方式、也可能是监听事件方式的策略；</p>
    <p>[0069]	若检测出消息则发起回调通知；</p>
    <p>[0070]	步骤S304，解析器委托开放平台api调用来解析计算订阅结果，再转换成订阅结果格式；</p>
    <p>[0071]	步骤S305，将订阅解析计算的结果汇总合并，并存放到待返回的结果推送队列中，等待统一回调；</p>
    <p>[0072]	所述第三部分结果异步推送，用于：订阅请求经过解析器解析计算后存放在结果存储结构中，由统一集中的推送器将结果回推给业务系统，其中回推使用回推策略包括有主动推送和储存待拉两种策略，灵活地化解业务系统接收超时致使消息堵塞。</p>
    <p>[0073]	上述引擎部分的工作过程参见图4，具体包括以下步骤：</p>
    <p>[0074]	步骤S401，引擎部分后台线程自维护监测待推送的结果存储队列；</p>
    <p>[0075]	步骤S402，根据定制回调调度机制，采用不同的回推策略，主动推送策略或者存储待拉策略；</p>
    <p>[0076]	步骤S403，对于主动推送策略，由引擎端发起，业务系统客户端提供回调接口，接收订阅结果；</p>
    <p>[0077]	步骤S404，对于存储待拉策略，由引擎端发起，当引擎端调用回调时候发现网络繁忙导致堵塞，则会将返回结果消息存放在本地的缓存结构；</p>
    <p>[0078]	步骤S405，业务系统业务模块客户端向引擎服务端发起主动拉起请求；</p>
    <p>[0079]	步骤S406，引擎从缓存结构中提取未读消息，并清除缓存，将结果数据封装返回给调用者；</p>
    <p>[0080]	步骤S407，业务系统业务模块客户端收到结果，并反馈给用户；</p>
    <p>[0081]	实施例二，参见图5、图6、图7、图8，具体包括以下步骤：</p>
    <p>[0082]	本实例说明一种跨开放平台社交消息分类计算方法的实施过程，</p>
    <p>[0083]	社交消息计算是跨开放平台的，其计算牵涉的社交信息是跨业务系统和开放平台的，这里采用分类计算的方法；</p>
    <p>[0084]	对于业务系统业务模块，其订阅关注的社交信息可以跨开放平台类型，即需要订阅请求的用户，这里的用户可以是真实个人或虚拟用户，需要关注其在开放平台上的好友关系的消息状态；</p>
    <p>[0085]	跨开放平台社交信息订阅的计算就是基于一种用户关系的基础上展开计算的；</p>
    <p>[0086]	譬如，某用户在业务系统范围内存在并持有一定量好友关系集，该用户在社交网上存在唯一帐号身份并持有多个关注好友，该用户在微博平台上也存在对应的唯一帐号并持有多个关注好友；</p>
    <p>[0087]	所述图5，具体步骤包括：</p>
    <p>[0088]	图中P501表示：</p>
    <p>[0089]	假定存在两种开放平台，一是社交网平台（人人网），一是微博平台（新浪）；</p>
    <p>[0090]	假定存在业务系统接入用户有4个（真实个人），分别以1234代表，这4人分别在开放平台上有对应帐号，其对应关系在图上用符号表示；</p>
    <p>[0091]	图中P502表示：</p>
    <p>[0092]	现在这4人分别接入订阅推送引擎内部，并有订阅请求需要被响应；</p>
    <p>[0093]	假定有下面的上下文绑定关系；</p>
    <p>[0094]	用户1，已绑定连接新浪微博⑶和人人网（R)；</p>
    <p>[0095]	用户2，已绑定连接新浪微博（S)；</p>
    <p>[0096]	用户3，已绑定连接新浪微博⑶；</p>
    <p>[0097]	用户4，已绑定连接新浪微博⑶和人人网（R)；</p>
    <p>[0098]	图中P5O3表示：</p>
    <p>[0099]	假定在业务系统范围内这4人存在以下关系：</p>
    <p>[0100]	用户1，有2个好友，分别是用户2和用户3 ；</p>
    <p>[0101]	用户2，有2个好友，分别是用户3和用户4 ；</p>
    <p>[0102]	用户I和用户2，存在共同的好友用户3 ；</p>
    <p>[0103]	所述图6,具体步骤包括：</p>
    <p>[0104]	下面是订阅推送的响应过程，</p>
    <p>[0105]	图中P601表示：订阅推送流程-订阅请求采集</p>
    <p>[0106]	用户I通过业务系统对其好友用户2和用户3的社交信息变更状态表示关注，因此发起订阅请求；用户2绑定连接新浪微博（S);用户3绑定连接新浪微博（S)</p>
    <p>[0107]	用户2通过业务系统对其好友用户3和用户4的社交信息变更状态表示关注，因此发起订阅请求；用户3绑定连接新浪微博⑶；用户4绑定连接新浪微博⑶和人人网(R)</p>
    <p>[0108]	引擎将用户I的订阅请求根据上下文分拆封装成规则包后，丢入待计算队列中；</p>
    <p>[0109]	图中P602表示：订阅推送流程-解析计算</p>
    <p>[0110]	引擎从待计算队列中提取待解析的订阅规则包（用户I的订阅请求），由集中的调度器统筹分配解析，并按开放平台类型分拆解析包（分拆结果只含S的开放平台），开放平台类型为S的解析器解析这个订阅包，并由统一调度器归并计算结果N，付带到对应用户I的订阅包中，再丢入待回推队列中；</p>
    <p>[0111]	图中P603表示：订阅推送流程-结果回推</p>
    <p>[0112]	推送机制引擎从待回推队列中提取用户I的订阅包的解析结果，并自动选取回推策略，调用客户端提供回调方法，返回给业务系统客户端；</p>
    <p>[0113]	所述图7,具体步骤包括：</p>
    <p>[0114]	优化计算策略：包括按照开放平台类型分类批量计算、定期间隔计算；</p>
    <p>[0115]	对订阅数据包按照开放平台类型划分能有效地支持优化计算；</p>
    <p>[0116]	图中P701表示：[0117]	方案I，未经过优化的实现方式，用户I和用户2的订阅请求被分别计算，发生2次解析计算；</p>
    <p>[0118]	图中P702表示：</p>
    <p>[0119]	方案2，已经过优化的实现方式，用户I和用户2的订阅请求被引擎合并，只发送I次解析计算；</p>
    <p>[0120]	图中P703表示：优化前后对比：方案2优于方案1，因为使用优化策略去除重复计算，重复的部分为③A (用户3绑定新浪微博（S)的重复计算)</p>
    <p>[0121]	所述图8，具体步骤包括：</p>
    <p>[0122]	图中P801表示：</p>
    <p>[0123]	方案1，未经过优化的实现方式，用户1、用户2、用户3、用户4的订阅请求被分别计算，发生4次解析计算；</p>
    <p>[0124]	图中P802表示：</p>
    <p>[0125]	方案2，已经过优化的实现方式，用户1、用户2、用户3、用户4的订阅请求被批量合并，只发送I次解析计算；虽然单次批量计算比单次计算耗资源多，但绝对比4次单词计算耗资源少。</p>
    <p>[0126]	图中P803表示：</p>
    <p>[0127]	优化前后对比：方案2优于方案1，因为批量计算，解析引擎调用次数减少3，并最终会减少开放平台api调用次数,节省成本</p>
    <p>[0128]	实施例三,参见图9,具体包括以下步骤：</p>
    <p>[0129]	本发明常用在于社交网关应用内部，作为一种订阅推送服务而存在，下面引用社交网关应用为实施例进行说明；</p>
    <p>[0130]	图中S701表示：客户端接入部分包括多个业务系统或者业务模块；</p>
    <p>[0131]	图中S702表示：开放平台部分包括适配多个不同类型的开放平台，目前包括两类型开放平台，一类是社交网平台，一类是微博平台</p>
    <p>[0132]	图中S703表示：社交网关应用，对外以客户端身份连接大部分的开放平台，适配其提供的开放服务以供我们内部业务系统业务模块调用，将内部业务系统业务模块应用采集的用户信息内容传播到开放平台上，促进用户社交互动，以达到我们内部平台、内部业务系统业务模块社交化而提升应用价值，增强用户体验的目的。</p>
    <p>[0133]	图中S704表示：社交网关应用内部的交互服务部分，包括订阅推送引擎服务部分，其中本发明所指的服务设计的实现具体依赖社交网关应用内部的内核服务；</p>
    <p>[0134]	图中S705表示：社交网关应用的内部内核服务，为实现业务系统社交化提供支撑；</p>
    <p>[0135]	也为本发明设计的订阅推送引擎服务提供基础服务支持：</p>
    <p>[0136]	提供授权绑定服务支持，为订阅推送引擎的解析部分可以直接在授权绑定服务中获取访问开放平台的访问权限，以及客户端接入用户绑定的定位服务；</p>
    <p>[0137]	提供社交组件服务支持，为引擎解析部分提供适配的开放平台api接口调用，屏蔽不同开放平台的服务差异，以便解析器透明地获取社交数据；</p>
    <p>[0138]	提供审计监控服务和社交访问控制服务支持，为引擎提供优化计算汇总统计服务；[0139]	由上可见，本发明提供的一种跨开放平台社交消息优化计算的订阅推送引擎，有以下优点。</p>
    <p>[0140]	(I)跨开放平台，方便横行扩展</p>
    <p>[0141]目前的开放平台百花齐放，每个平台的均持有各自独立的社交关系图谱，并针对这些社交图谱数据并其代表用户所产生的社交信息内容用开放api的接口方式对外提供，方便其他系统连接各自开放平台。然而业务系统业务模块所牵涉的用户并不全属于个别或部分开放平台，因此本发明可以很好地解决业务系统业务模块与所有开放平台的互联互通，以实现大范围内的社交化信息需求。</p>
    <p>[0142]	(2)通用的订阅推送机制，满足个性化订阅定制需求，解耦业务系统业务模块和开放平台</p>
    <p>[0143]目前的开放平台均未提供对外的订阅定制社交信息接口，或者有提供但是种类稀少并不够个性化，未能很好地满足业务需要。本发明设计通用的订阅推送机制，适配大部分的业务系统业务模块的订阅定制需求，并对其屏蔽多种开放平台的差异，提供统一社交接入。</p>
    <p>[0144]	(3)计算算法优化，减少开放平台api的调用次数，降低成本</p>
    <p>[0145]	所有开放平台的均对自己提供的api有一个访问频率计数，以此来统计接入调用的客户端对平台的访问量，开放平台服务提供商会按访问量收费收费。大部分开放平台均缺少个性化社交信息订阅接口，只提供轮询方式拉数据而没主动推送数据。本发明基于开放平台这一缺点，设计出消息优化计算的方法，采用按照开放平台类型分类批量计算策略和定期间隔计算策略，能减少无效冗余的api调用，节约成本。</p>
    <p>[0146]	(4)订阅推送信息的非阻塞自调节、并可靠交付。</p>
    <p>[0147]自动机制会根据当前引擎调用业务系统客户端的耗时自动调整推送策略，以达到 合理利用服务端引擎资源的效果。</p>
    <p>[0148]	通过以上的方法实施例的描述，所属领域的技术人员可以清楚地了解到本发明是一套软件解决方案，更多地可借助软件加必需的通用硬件平台的方式来实现。本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件服务的形式体现出来，并作为其中一部分软件服务集合到一个大的社交网关应用产品中。本发明的软件服务中部分服务基于社交网关应用广品的基础1&#190;块服务</p>
    <p>[0149]	对于系统实施例而言，由于其基本相应于方法实施例，所以相关之处参见方法实施例的部分说明即可。其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。</p>
    <p>[0150]	在本申请所提供的几个实施例中，应该理解到，所揭露的系统和方法，在没有超过本申请的精神和范围内，可以通过其他的方式实现。上面列举的将本应用集成到社交网关应用中的实施例只是一种示范性的例子，不应该作为限制，所给出的具体内容不应该限制本申请的目的。</p>
    <p>[0151]	以上所述仅是本发明的具体实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101453426A?cl=zh">CN101453426A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年11月29日</td><td class="patent-data-table-td patent-date-value">2009年6月10日</td><td class="patent-data-table-td ">中国电信股份有限公司</td><td class="patent-data-table-td ">一种对象状态信息呈现的系统和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102144243A?cl=zh">CN102144243A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年8月11日</td><td class="patent-data-table-td patent-date-value">2011年8月3日</td><td class="patent-data-table-td ">微软公司</td><td class="patent-data-table-td ">基于浏览信息的内容推荐</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20060288329">US20060288329</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2005年6月21日</td><td class="patent-data-table-td patent-date-value">2006年12月21日</td><td class="patent-data-table-td ">Microsoft Corporation</td><td class="patent-data-table-td ">Content syndication platform</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103209116A?cl=zh">CN103209116A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年4月13日</td><td class="patent-data-table-td patent-date-value">2013年7月17日</td><td class="patent-data-table-td ">新浪网技术(中国)有限公司</td><td class="patent-data-table-td ">多平台信息发布方法和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103209116B?cl=zh">CN103209116B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年4月13日</td><td class="patent-data-table-td patent-date-value">2016年1月27日</td><td class="patent-data-table-td ">新浪网技术(中国)有限公司</td><td class="patent-data-table-td ">多平台信息发布方法和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103246994A?cl=zh">CN103246994A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年4月26日</td><td class="patent-data-table-td patent-date-value">2013年8月14日</td><td class="patent-data-table-td ">银联商务有限公司</td><td class="patent-data-table-td ">一种网络平台管理系统及方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=tgftBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0017300000">G06F17/30</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2013年4月3日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年5月1日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/05615d02b6f224290eef/CN103020056A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E8%B7%A8%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E7%A4%BE%E4%BA%A4%E6%B6%88%E6%81%AF%E4%BC%98%E5%8C%96.pdf?id=tgftBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3WZ9XvNbY36GqCzk9fOX2jMOoVCA"},"sample_url":"https://www.google.com/patents/reader?id=tgftBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>