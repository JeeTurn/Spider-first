<!DOCTYPE html><html><head><title>专利 CN101009007A - 用于电信的综合电子交易业务系统和实现方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="用于电信的综合电子交易业务系统和实现方法"><meta name="DC.contributor" content="张文安" scheme="inventor"><meta name="DC.contributor" content="张湘东" scheme="inventor"><meta name="DC.contributor" content="李庆艳" scheme="inventor"><meta name="DC.contributor" content="李敏" scheme="inventor"><meta name="DC.contributor" content="何金洪" scheme="inventor"><meta name="DC.contributor" content="广东省电信有限公司研究院" scheme="assignee"><meta name="DC.date" content="2006-1-25" scheme="dateSubmitted"><meta name="DC.description" content="一种用于电信的综合电子交易业务系统，由电子交易终端、前置接入设备、综合接口机和业务平台组成，它是通过电子交易终端与运营商的电信业务平台进行交互、实现电子售卡、电话缴费、电信业务充值等电信综合交易业务的新技术。设备结构简单，实用性和扩展性强。用户通过电子交易终端选择交易类型，由终端将交易请求经前置接入设备进行格式转换后，通过综合接口机转发到业务平台，业务平台收到来自电子交易终端指令后，按照指令要求与综合接口机交互完成相应的电子交易，并根据交易结果由电子交易终端显示/打印交易凭证给用户。业务平台能够实现交易业务类型的动态扩展，终端只要下载新的菜单模板就可提供新业务，简化了交易、查询等流程，系统工作安全、可靠。"><meta name="DC.date" content="2007-8-1"><meta name="citation_patent_publication_number" content="CN:101009007:A"><meta name="citation_patent_application_number" content="CN:200610002738"><link rel="canonical" href="https://www.google.com/patents/CN101009007A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101009007A?cl=zh"/><meta name="title" content="专利 CN101009007A - 用于电信的综合电子交易业务系统和实现方法"/><meta name="description" content="一种用于电信的综合电子交易业务系统，由电子交易终端、前置接入设备、综合接口机和业务平台组成，它是通过电子交易终端与运营商的电信业务平台进行交互、实现电子售卡、电话缴费、电信业务充值等电信综合交易业务的新技术。设备结构简单，实用性和扩展性强。用户通过电子交易终端选择交易类型，由终端将交易请求经前置接入设备进行格式转换后，通过综合接口机转发到业务平台，业务平台收到来自电子交易终端指令后，按照指令要求与综合接口机交互完成相应的电子交易，并根据交易结果由电子交易终端显示/打印交易凭证给用户。业务平台能够实现交易业务类型的动态扩展，终端只要下载新的菜单模板就可提供新业务，简化了交易、查询等流程，系统工作安全、可靠。"/><meta property="og:title" content="专利 CN101009007A - 用于电信的综合电子交易业务系统和实现方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101009007A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101009007A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=phmHAAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101009007A&amp;usg=AFQjCNGC_Oad8ewPJnEB3J_zBWIIn0p6Vg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/70b9ac0778dc7582a072/CN101009007A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/70b9ac0778dc7582a072/CN101009007A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101009007A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101009007A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101009007A?cl=zh" style="display:none"><span itemprop="description">一种用于电信的综合电子交易业务系统，由电子交易终端、前置接入设备、综合接口机和业务平台组成，它是通过电子交易终端与运营商的电信业务平台进行交互、实现电子售卡、电话缴费、电信业务充值等电信综合交易业务的...</span><span itemprop="url">https://www.google.com/patents/CN101009007A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101009007A - 用于电信的综合电子交易业务系统和实现方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101009007A - 用于电信的综合电子交易业务系统和实现方法" title="专利 CN101009007A - 用于电信的综合电子交易业务系统和实现方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101009007 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200610002738</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2007年8月1日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2006年1月25日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2006年1月25日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200610002738.7, </span><span class="patent-bibdata-value">CN 101009007 A, </span><span class="patent-bibdata-value">CN 101009007A, </span><span class="patent-bibdata-value">CN 200610002738, </span><span class="patent-bibdata-value">CN-A-101009007, </span><span class="patent-bibdata-value">CN101009007 A, </span><span class="patent-bibdata-value">CN101009007A, </span><span class="patent-bibdata-value">CN200610002738, </span><span class="patent-bibdata-value">CN200610002738.7</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%BC%A0%E6%96%87%E5%AE%89%22">张文安</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%BC%A0%E6%B9%98%E4%B8%9C%22">张湘东</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E5%BA%86%E8%89%B3%22">李庆艳</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E6%95%8F%22">李敏</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BD%95%E9%87%91%E6%B4%AA%22">何金洪</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%B9%BF%E4%B8%9C%E7%9C%81%E7%94%B5%E4%BF%A1%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%E7%A0%94%E7%A9%B6%E9%99%A2%22">广东省电信有限公司研究院</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101009007A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101009007A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101009007A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (9),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=phmHAAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200610002738&amp;usg=AFQjCNHHfHBwTomx-Ur53dnmHxblWpMnbQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=phmHAAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101009007A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGjRMzBRjsS0EAQnNTPanvVX078HQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT121909826" lang="ZH" load-source="patent-office">用于电信的综合电子交易业务系统和实现方法</invention-title>
      </span><br><span class="patent-number">CN 101009007 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA108143529" lang="ZH" load-source="patent-office">
    <div class="abstract">一种用于电信的综合电子交易业务系统，由电子交易终端、前置接入设备、综合接口机和业务平台组成，它是通过电子交易终端与运营商的电信业务平台进行交互、实现电子售卡、电话缴费、电信业务充值等电信综合交易业务的新技术。设备结构简单，实用性和扩展性强。用户通过电子交易终端选择交易类型，由终端将交易请求经前置接入设备进行格式转换后，通过综合接口机转发到业务平台，业务平台收到来自电子交易终端指令后，按照指令要求与综合接口机交互完成相应的电子交易，并根据交易结果由电子交易终端显示/打印交易凭证给用户。业务平台能够实现交易业务类型的动态扩展，终端只要下载新的菜单模板就可提供新业务，简化了交易、查询等流程，系统工作安全、可靠。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(11)</span></span></div><div class="patent-text"><div mxw-id="PCLM50731015" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种用于电信的综合电子交易业务系统，其特征在于：所述系统包括：一个或多个电子交易终端，通过自身输入界面及其与交易处理平台之间的通信，将用户的交易请求信息与交易处理平台进行交互，实现电子交易，并根据不同的交易业务打印不同的凭证；至少具备支持动态化的菜单的设计、下载和显示、多种模板显示及打印的功能，以实现灵活多样的电子交易业务；前置接入设备，通过电信网络连接电子交易终端，用于实现电子交易终端到业务平台之间的接入服务，至少完成终端菜单模板版本管理及动态更新功能；综合接口机，用于实现前置接入设备与业务平台中的交易处理平台之间的消息转换和转发功能，以及协助交易处理平台为完成缴费、充值业务功能而与第三方平台-电信帐务系统-进行消息交互；业务平台，由交易处理和业务管理两部分组成，前者用于处理来自电子交易终端的交易请求，并通过综合接口机与第三方平台进行交互，其完成的功能包括：记录每台终端的交易信息，扣减每笔交易中需要扣除的金额，并计算每笔交易的折扣，将处理结果返回电子交易终端显示/打印；后者用于完成至少包括与电子交易终端相关的各种动态菜单和模板管理的整个电子交易业务系统的管理功能。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的用于电信的综合电子交易业务系统，其特征在于：所述电子交易终端包括下述顺序连接的软件模块：完成拨号接入及消息收发功能的消息通信模块，完成与前置接入设备间的各种消息的组装和解析功能的协议转换模块，至少完成交易流程处理、模板数据同步和操作员鉴权功能的业务逻辑控制的业务主控模块，该业务主控模块还分别连接显示动态菜单内容和返回结果的显示模块和打印交易凭证的打印模块，其打印格式由模板参数设定。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求1或2所述的用于电信的综合电子交易业务系统，其特征在于：所述电子交易终端具有下述功能：初始化设置：终端附带下载参数的程序或其它辅助工具，用于在首次使用前，将终端所需要的参数下载至终端上，完成初始化设置功能；支持菜单功能的动态定义、更新和显示：由顶层至最底层的各级菜单都有各自的编号，这些菜单编号的逐级顺序排列被称为菜单操作码，每个菜单操作码分别对应一项电子交易业务，并作为该菜单的标识；菜单功能的动态定义是终端将用户选择的菜单操作码传送到交易处理平台，平台根据终端所用的菜单模板和菜单操作码识别用户选择的业务类型，并自动检索和下传依据动态模板定义的菜单；终端的菜单模板可根据需要进行动态下载更新和显示，并根据菜单文字说明自动确定显示列数和提示翻页，且对所支持的菜单层数和项数没有限制；不同地区、不同类型的终端可用不同的菜单模板来提供不同的交易业务；支持菜单流程的动态定义：每个菜单可设定为提供输入后才进入下一级，或者不用输入就直接进入下一级；每次输入要显示提示信息，输入的字段类型是金额、数字或日期；支持显示格式及内容的动态定义：支持显示模板的动态定义，并根据显示模板的定义在终端显示交易处理平台返回的处理结果；支持打印格式及内容的动态定义：支持打印模板的动态定义，并根据打印模板的要求打印交易凭证；终端操作工号管理功能：对终端操作员进行分权管理，不同级别的操作员拥有不同的操作权限，每次操作要对操作员进行鉴权，确保终端及交易的安全。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求1所述的用于电信的综合电子交易业务系统，其特征在于：所述的前置接入设备包括网络接入控制器和前置服务器两部分，其中：网络接入控制器，用于完成电子交易终端到交易处理平台的接入功能，接入方式包括但不限于点对点拨号接入和基于IP网络的接入，其底层采用传输控制协议TCP/因特网协议IP，高层采用卡交换报文规范金融交易内容协议ISO8583-1987；前置服务器，负责完成网络接入控制器与交易处理平台之间传送的消息格式转换功能，并负责完成电子交易终端的主程序、菜单模板、打印模板和显示模板的版本更新和下载工作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求1所述的用于电信的综合电子交易业务系统，其特征在于：所述综合接口机是该系统中的通信枢纽，用于完成终端、业务平台以及第三方平台之间的消息转发，具有以下功能：分发功能：验证来自交易处理平台发送的交易请求消息，根据不同的消息类型，将消息分发给前置服务器和/或第三方平台，并将交易响应消息返回给交易处理平台；服务器功能：接收并验证来自电子交易终端的交易请求，并发送给交易处理平台处理和将交易响应消息返回给电子交易终端。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求1所述的用于电信的综合电子交易业务系统，其特征在于：所述业务平台中的业务管理平台用于完成各类业务数据的管理，具有以下功能：动态菜单管理：用于实现灵活多变的业务，动态菜单包括三部分：菜单的更新和显示、菜单功能的动态定义、以及菜单流程的动态定义，在动态菜单管理下，设定和管理电子交易终端的菜单显示画面、菜单的功能及流程；模板管理：用于实现对显示模板和打印模板的管理，当电子交易终端执行各种交易后，由显示模板设定在终端上显示的消息格式，再由电子交易终端下载显示；由打印模板设定用户的凭证格式，再由电子交易终端下载打印输出；业务平台需要的系统数据配置及其它管理功能；所述交易处理平台用于完成系统的交易业务的逻辑处理，具有以下功能：电子销售卡的卡信息存储：将在原卡平台生成的电子销售卡的信息通过脱机形式导入该交易平台，并以设定方式进行存储；电子售卡过程中的智能选卡：因为同一类型的卡可能同时有多个批次存放在数据库中，当用户选择购买其中某个类型卡时，可根据有效期和/或发行地选择适宜的卡，既要选择离有效期最近的卡，以避免卡过期，同时还要避免选取离有效期少于设定时间的卡，保证用户有充足的使用时间；再者，要选择终端所在地发行的本地卡；交易处理：每次处理前，先对终端所对应帐号进行鉴权，再对终端通过接入设备传送来的命令进行解析，并向第三方平台转发终端传送来的相关交易请求；当第三方平台返回交易成功的消息后，按照折扣模板的配置计算折扣后，对该终端对应的帐号进行相关费用的扣减，并记录每个终端的交易日志；电子售卡中的卡信息打印：接到用户付款信息后，按照终端选取的卡的格式输出打印信息，要求将密码打印在密封联中，保证卡数据的安全。</div>
    </div>
    </div> <div class="claim"> <div num="7" class="claim">
      <div class="claim-text">7.一种用于电信的综合电子交易业务系统的实现方法，其特征在于：包括下列步骤：(1)选择交易项目：电子交易终端接入系统后，自动更新菜单模板、打印模板及显示模板，并按照菜单模板内容显示菜单项目，供用户选择输入；(2)发送交易请求：用户输入完毕后，电子交易终端将用户选择的至少包括菜单操作码、菜单输入参数的序号及参数值、终端相关信息按照设定格式打包，发送给交易处理平台进行处理；(3)处理交易请求：交易处理平台解析用户的操作请求，进行业务处理，再将包含相应的显示/打印模板编号的处理结果按照设定格式返回给电子交易终端；(4)显示/打印交易结果：电子交易终端解析返回的处理结果，并按照相应的模板显示/打印结果。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求7所述的用于电信的综合电子交易业务系统的实现方法，其特征在于：所述步骤(1)进一步包括下列操作：(11)电子交易终端通过前置接入设备中的网络控制器接入系统，并与该前置接入设备中的前置服务器进行交互，完成操作员鉴权认证；(12)鉴权成功后，前置服务器检查该终端的菜单模板、显示模板、打印模板是否为最新版本，如果这些模板不是最新版本，顺序执行后续操作；否则，跳转执行步骤(14)；(13)前置服务器命令该电子交易终端重新下载新版本的各个模板数据；(14)电子交易终端根据菜单模板内容显示所有交易项目，供用户选择。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求7所述的用于电信的综合电子交易业务系统的实现方法，其特征在于：所述步骤(2)进一步包括下列操作：(21)电子交易终端采集用户所选择的菜单操作码、菜单输入参数的序号和参数值以及其他相关信息；(22)电子交易终端按照卡交换报文规范金融交易内容协议ISO8583-1987将上述交易请求信息打包后，发送给前置服务器；(23)前置服务器接收到交易请求后，解析出消息包内容，再按照与交易处理平台约定的内部协议重新组装，然后转发到综合接口机；(24)综合接口机根据消息包类型和目的地址，将交易请求消息转发给交易处理平台。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求7所述的用于电信的综合电子交易业务系统的实现方法，其特征在于：所述步骤(3)进一步包括下列操作：(31)交易处理平台解析交易请求消息，确定用户要求完成的交易功能；(32)对于不需要与第三方平台交互的售卡类交易，由交易处理平台直接处理完成；对于需要与第三方平台交互的缴费类交易，交易处理平台需要通过综合接口机与第三方平台进行相关消息的交互后，处理完成全部操作；(33)交易操作处理完后，交易处理平台根据交易类型的设定格式将返回信息打包；返回消息中至少包括以下内容：交易是否成功、交易返回结果是否需要显示/打印、使用的显示/打印模板编号、显示/打印模板中的各项参数值，返回消息经过综合接口机和前置接入设备送回电子交易终端。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求7所述的用于电信的综合电子交易业务系统的实现方法，其特征在于：所述步骤(4)进一步包括下列操作：(41)电子交易终端对返回的处理结果消息中的各项内容进行解析；(42)电子交易终端按照返回内容，调用设定的模板显示/打印交易结果。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES57790354" lang="ZH" load-source="patent-office" class="description">
    <invention-title lang="ZH">用于电信的综合电子交易业务系统和实现方法</invention-title>
    <technical-field>
      <p>技术领域</p>
      <p>本发明涉及一种用于电信的综合电子交易业务系统和实现方法，也就是涉及一种将专用电子交易终端与电信平台相结合，完成电信的综合电子交易业务的新技术。更具体而言，本发明提供一种通过电子终端实现电子售卡、电话缴费、电信业务充值等电信的综合电子交易功能，实现了对专用电子交易终端简单灵活的动态菜单配置、维护管理。属于电信增值业务应用技术领域。</p>
    </technical-field>
    <background-art>
      <p>背景技术</p>
      <p>由于电信运营商多年来的大力发展，电话卡类业务和预付费业务已经成为电信行业的一个重要业务形式，并形成了一个巨大的电话卡和预付费卡的消费市场，同时也形成了一个复杂的卡的发行、分销和零售的销售渠道网络。虽然目前各种电话卡类业务都是采用传统的售卡方式，其业务发展已经非常成熟，但是存在缺陷，主要表现在：(1)传统售卡采用实物流方式，中间经过批发商、零售商等许多中间环节，销售成本高，销售周期长。(2)传统售卡的发行周期长，资金回收慢，成本积压时间长，市场反应能力低，如果卡的有效期过期报废，还会导致成本的额外增加。(3)运营商不能实时了解各销售点的销售情况，无法及时调整市场策略。因此，面对这个复杂的渠道网络，电信运营商在经营、管理上的难度越来越大，经销商经常出现一些问题，引起用户的不满和投诉。</p>
      <p>而在如今剧烈的电信市场竞争环境下，电信运营商必须要在其业务流通的各个环节上加强管理和改进。如何尽量利用其自身网络系统的优势，在流通渠道上进行渠道扁平化改造，减少流通环节上的流通成本和管理成本，实现电子化操作和交易，以提高自身的市场竞争力的问题已经摆在电信运营商的技术人员的面前，迫切需要尽快解决之。</p>
    </background-art>
    <disclosure>
      <p>发明内容</p>
      <p>有鉴于此，本发明的目的是提供一种用于电信的综合电子交易业务系统和实现方法，使用本发明系统中的电子交易终端和电信业务平台进行交互，能够创建一种灵活的综合电信电子交易业务，实现电子售卡、电话缴费、电信业务充值等功能。而且，该业务具有交易类型扩展方便、电子交易终端菜单可以灵活修改和系统安全、工作可靠等特点。</p>
      <p>为了达到上述目的，本发明提供了一种用于电信的综合电子交易业务系统，其特征在于：所述系统包括：一个或多个电子交易终端，通过自身输入界面及其与交易处理平台之间的通信，将用户的交易请求信息与交易处理平台进行交互，实现电子交易，并根据不同的交易业务打印不同的凭证；至少具备支持动态化的菜单的设计、下载和显示、多种模板显示及打印的功能，以实现灵活多样的电子交易业务；前置接入设备，通过电信网络连接电子交易终端，用于实现电子交易终端到业务平台之间的接入服务，至少完成终端菜单模板版本管理及动态更新功能；综合接口机，用于实现前置接入设备与业务平台中的交易处理平台之间的消息转换和转发功能，以及协助交易处理平台为完成缴费、充值业务功能而与第三方平台-电信帐务系统-进行消息交互；业务平台，由交易处理和业务管理两部分组成，前者用于处理来自电子交易终端的交易请求，并通过综合接口机与第三方平台进行交互，其完成的功能包括：记录每台终端的交易信息，扣减每笔交易中需要扣除的金额，并计算每笔交易的折扣，将处理结果返回电子交易终端显示/打印；后者用于完成至少包括与电子交易终端相关的各种动态菜单和模板管理的整个电子交易业务系统的管理功能。</p>
      <p>所述电子交易终端包括下述顺序连接的软件模块：完成拨号接入及消息收发功能的消息通信模块，完成与前置接入设备间的各种消息的组装和解析功能的协议转换模块，至少完成交易流程处理、模板数据同步和操作员鉴权功能的业务逻辑控制的业务主控模块，该业务主控模块还分别连接显示动态菜单内容和返回结果的显示模块和打印交易凭证的打印模块，其打印格式由模板参数设定。</p>
      <p>所述电子交易终端具有下述功能：初始化设置：终端附带下载参数的程序或其它辅助工具，用于在首次使用前，将终端所需要的参数下载至终端上，完成初始化设置功能；支持菜单功能的动态定义、更新和显示：由顶层至最底层的各级菜单都有各自的编号，这些菜单编号的逐级顺序排列被称为菜单操作码，每个菜单操作码分别对应一项电子交易业务，并作为该菜单的标识；菜单功能的动态定义是终端将用户选择的菜单操作码传送到交易处理平台，平台根据终端所用的菜单模板和菜单操作码识别用户选择的业务类型，并自动检索和下传依据动态模板定义的菜单；终端的菜单模板可根据需要进行动态下载更新和显示，并根据菜单文字说明自动确定显示列数和提示翻页，且对所支持的菜单层数和项数没有限制；不同地区、不同类型的终端可用不同的菜单模板来提供不同的交易业务；支持菜单流程的动态定义：每个菜单可设定为提供输入后才进入下一级，或者不用输入就直接进入下一级；每次输入要显示提示信息，输入的字段类型是金额、数字或日期；支持显示格式及内容的动态定义：支持显示模板的动态定义，并根据显示模板的定义在终端显示交易处理平台返回的处理结果；支持打印格式及内容的动态定义：支持打印模板的动态定义，并根据打印模板的要求打印交易凭证；终端操作工号管理功能：对终端操作员进行分权管理，不同级别的操作员拥有不同的操作权限，每次操作要对操作员进行鉴权，确保终端及交易的安全。</p>
      <p>所述的前置接入设备包括网络接入控制器和前置服务器两部分，其中：网络接入控制器，用于完成电子交易终端到交易处理平台的接入功能，接入方式包括但不限于点对点拨号接入和基于IP网络的接入，其底层采用传输控制协议TCP/因特网协议IP，高层采用卡交换报文规范金融交易内容协议ISO8583-1987；前置服务器，负责完成网络接入控制器与交易处理平台之间传送的消息格式转换功能，并负责完成电子交易终端的主程序、菜单模板、打印模板和显示模板的版本更新和下载工作。</p>
      <p>所述综合接口机是该系统中的通信枢纽，用于完成终端、业务平台以及第三方平台之间的消息转发，具有以下功能：分发功能：验证来自交易处理平台发送的交易请求消息，根据不同的消息类型，将消息分发给前置服务器和/或第三方平台，并将交易响应消息返回给交易处理平台；服务器功能：接收并验证来自电子交易终端的交易请求，并发送给交易处理平台处理和将交易响应消息返回给电子交易终端。</p>
      <p>所述业务平台中的业务管理平台用于完成各类业务数据的管理，具有以下功能：动态菜单管理：用于实现灵活多变的业务，动态菜单包括三部分：菜单的更新和显示、菜单功能的动态定义、以及菜单流程的动态定义，在动态菜单管理下，设定和管理电子交易终端的菜单显示画面、菜单的功能及流程；模板管理：用于实现对显示模板和打印模板的管理，当电子交易终端执行各种交易后，由显示模板设定在终端上显示的消息格式，再由电子交易终端下载显示；由打印模板设定用户的凭证格式，再由电子交易终端下载打印输出；业务平台需要的系统数据配置及其它管理功能；所述交易处理平台用于完成系统的交易业务的逻辑处理，具有以下功能：电子销售卡的卡信息存储：将在原卡平台生成的电子销售卡的信息通过脱机形式导入该交易平台，并以设定方式进行存储；电子售卡过程中的智能选卡：因为同一类型的卡可能同时有多个批次存放在数据库中，当用户选择购买其中某个类型卡时，可根据有效期和/或发行地选择适宜的卡，既要选择离有效期最近的卡，以避免卡过期，同时还要避免选取离有效期少于设定时间的卡，保证用户有充足的使用时间；再者，要选择终端所在地发行的本地卡；交易处理：每次处理前，先对终端所对应帐号进行鉴权，再对终端通过接入设备传送来的命令进行解析，并向第三方平台转发终端传送来的相关交易请求；当第三方平台返回交易成功的消息后，按照折扣模板的配置计算折扣后，对该终端对应的帐号进行相关费用的扣减，并记录每个终端的交易日志；电子售卡中的卡信息打印：接到用户付款信息后，按照终端选取的卡的格式输出打印信息，要求将密码打印在密封联中，保证卡数据的安全。</p>
      <p>为了达到上述目的，本发明还提供了一种用于电信的综合电子交易业务系统的实现方法，其特征在于：包括下列步骤：(1)选择交易项目：电子交易终端接入系统后，自动更新菜单模板、打印模板及显示模板，并按照菜单模板内容显示菜单项目，供用户选择输入；(2)发送交易请求：用户输入完毕后，电子交易终端将用户选择的至少包括菜单操作码、菜单输入参数的序号及参数值、终端相关信息按照设定格式打包，发送给交易处理平台进行处理；(3)处理交易请求：交易处理平台解析用户的操作请求，进行业务处理，再将包含相应的显示/打印模板编号的处理结果按照设定格式返回给电子交易终端；(4)显示/打印交易结果：电子交易终端解析返回的处理结果，并按照相应的模板显示/打印结果。</p>
      <p>所述步骤(1)进一步包括下列操作：(11)电子交易终端通过前置接入设备中的网络控制器接入系统，并与该前置接入设备中的前置服务器进行交互，完成操作员鉴权认证；(12)鉴权成功后，前置服务器检查该终端的菜单模板、显示模板、打印模板是否为最新版本，如果这些模板不是最新版本，顺序执行后续操作；否则，跳转执行步骤(14)；(13)前置服务器命令该电子交易终端重新下载新版本的各个模板数据；(14)电子交易终端根据菜单模板内容显示所有交易项目，供用户选择。</p>
      <p>所述步骤(2)进一步包括下列操作：(21)电子交易终端采集用户所选择的菜单操作码、菜单输入参数的序号和参数值以及其他相关信息；(22)电子交易终端按照卡交换报文规范金融交易内容协议ISO8583-1987将上述交易请求信息打包后，发送给前置服务器；(23)前置服务器接收到交易请求后，解析出消息包内容，再按照与交易处理平台约定的内部协议重新组装，然后转发到综合接口机；(24)综合接口机根据消息包类型和目的地址，将交易请求消息转发给交易处理平台。</p>
      <p>所述步骤(3)进一步包括下列操作：(31)交易处理平台解析交易请求消息，确定用户要求完成的交易功能；(32)对于不需要与第三方平台交互的售卡类交易，由交易处理平台直接处理完成；对于需要与第三方平台交互的缴费类交易，交易处理平台需要通过综合接口机与第三方平台进行相关消息的交互后，处理完成全部操作；(33)交易操作处理完后，交易处理平台根据交易类型的设定格式将返回信息打包；返回消息中至少包括以下内容：交易是否成功、交易返回结果是否需要显示/打印、使用的显示/打印模板编号、显示/打印模板中的各项参数值，返回消息经过综合接口机和前置接入设备送回电子交易终端。</p>
      <p>所述步骤(4)进一步包括下列操作：(41)电子交易终端对返回的处理结果消息中的各项内容进行解析；(42)电子交易终端按照返回内容，调用设定的模板显示/打印交易结果。</p>
      <p>本发明是一种用于电信的综合电子交易业务系统和实现方法，它是一种将专用电子交易终端与运营商的电信业务平台相结合，完成电信业务的综合电子交易的新技术。本发明系统由电子交易终端、前置接入设备、综合接口机和业务平台组成，它们的结构都非常简单，容易制造，但实用功能强，系统的扩展性强。用户通过电子交易终端进行交易选择，电子交易终端通过前置接入设备连入业务平台，所有交易请求由前置接入设备进行格式转换后，又经过综合接口机转发到交易处理平台，交易处理平台收到来自电子交易终端的指令后，按照指令要求与综合接口机交互完成电子售卡、电话缴费、电信业务充值等多种电子交易，并根据交易结果由电子交易终端打印交易凭证给用户。其中业务管理平台提供系统数据的管理功能，能够通过数据配置实现交易业务类型的动态扩展，电子交易终端可以在不升级主程序的情况下，只要下载新的菜单模板就可提供新的业务，解决了以往电子交易终端升级困难的问题，简化了交易、查询等操作流程。</p>
      <p>本发明系统实现的电子售卡业务与传统售卡方式相比较，具有以下优点：节约制卡成本：用数据流方式存储卡信息，流通环节少，不需要预先制卡，销售成本低，销售周期快。也不需要提前制卡，没有卡的积压问题；卡过期后，只要通过后台修改数据，就可以将卡延期，不会造成卡的浪费。通过后台数据库的统计，运营商可以实时了解各地各类电话卡类业务和预付费业务的销售情况，及时调整市场策略，尽快对市场作出相应反应，并保证交易的安全性和系统稳定性。</p>
      <p>本发明系统中的电子交易终端可以广泛设置在各个代理点(如士多店、IP超市、营业点等)，用户只需在代理点交付现金，由代理商通过电子交易终端完成售卡、充值过程。这样，当电子交易终端的布点达到一定规模后，用户购卡充值就相当方便。作为电信运营商来说，本发明系统可以为多个卡类业务和预付费业务代理点进行业务充值，且优惠方式统一、有利于管理。</p>
    </disclosure>
    <description-of-drawings>
      <p>附图说明</p>
      <p>图1是本发明用于电信的综合电子交易业务系统组成示意图。</p>
      <p>图2是本发明电子交易终端的控制软件模块结构组成示意图。</p>
      <p>图3是用于电信的综合电子交易业务系统的实现方法操作流程方框图。</p>
      <p>图4是本发明需要与第三方平台进行交互的一次完整的电子交易过程实施例的消息时序流程图。</p>
      <p>图5是本发明电子交易终端交易流程步骤方框图。</p>
    </description-of-drawings>
    <mode-for-invention>
      <p>具体实施方式</p>
      <p>为使本发明的目的、技术方案和优点更加清楚，下面结合附图对本发明作进一步的详细描述。</p>
      <p>参见图1，介绍本发明用于电信的综合电子交易业务系统，该系统包括：一个或多个电子交易终端1，通过自身输入界面及其与交易处理平台之间的通信，将用户的交易请求信息与交易处理平台进行交互，实现电子交易，并根据不同的交易业务打印不同的凭证；至少具备支持动态化的菜单的设计、下载和显示、多种模板显示及打印的功能，以实现灵活多样的电子交易业务；前置接入设备2，通过电信网络连接电子交易终端1，用于实现电子交易终端1到业务平台4之间的接入服务，完成终端菜单模板版本管理及动态更新等功能。前置接入设备2由网络接入控制器和前置服务器两部分组成，其中：网络接入控制器用于完成电子交易终端到交易处理平台的接入功能，接入方式包括但不限于点对点拨号接入和基于IP网络的接入，其底层采用TCP/IP，高层采用卡交换报文规范金融交易内容协议ISO8583-1987；前置服务器负责完成网络接入控制器与交易处理平台之间传送的消息格式转换功能，并负责完成电子交易终端的主程序、菜单模板、打印模板和显示模板的版本更新和下载工作。</p>
      <p>综合接口机3，作为用于该系统中的通信枢纽，用于完成终端(通过前置接入设备)、业务平台以及第三方平台之间的消息转换和转发功能，以及协助交易处理平台为完成缴费、充值业务而与第三方平台5(电信帐务系统)进行消息交互。其功能是：分发功能-验证来自交易处理平台发送的交易请求消息，根据不同的消息类型，将消息分发给前置服务器和/或第三方平台，并将交易响应消息返回给交易处理平台；服务器功能-接收并验证来自电子交易终端的交易请求，并发送给交易处理平台处理和将交易响应消息返回给电子交易终端。</p>
      <p>业务平台4，由交易处理和业务管理两部分组成，前者用于处理来自电子交易终端1的交易请求，并通过综合接口机3与第三方平台5进行交互，其完成的功能包括：记录每台终端的交易信息，扣减每笔交易中需要扣除的金额，并计算每笔交易的折扣，将处理结果返回电子交易终端显示/打印；后者用于完成包括与电子交易终端相关的各种动态菜单和模板管理在内的整个电子交易业务系统的管理功能。</p>
      <p>下面重点介绍系统中的电子交易终端和业务平台：参见图2，介绍电子交易终端中的控制软件模块组成：完成拨号接入及消息收发功能的消息通信模块，完成与前置接入设备间的各种消息的组装和解析功能的协议转换模块，至少完成交易流程处理、模板数据同步和操作员鉴权功能的业务逻辑控制的业务主控模块，以及显示动态菜单内容和返回结果的显示模块和打印交易凭证的打印模块，其打印格式由模板参数设定。</p>
      <p>该电子交易终端具有下述功能：(1)初始化设置：终端附带下载参数的程序或其它辅助工具，用于在首次使用前，将终端所需要的参数下载至终端上，完成初始化设置功能；(2)支持菜单功能的动态定义、更新和显示：由顶层至最底层的各级菜单都有各自的编号，这些菜单编号的逐级顺序排列被称为菜单操作码，每个菜单操作码分别对应一项电子交易业务，并作为该菜单的标识；菜单功能的动态定义是终端将用户选择的菜单操作码传送到交易处理平台，平台根据终端所用的菜单模板和菜单操作码识别用户选择的业务类型，并自动检索和下传依据动态模板定义的菜单；终端的菜单模板可根据需要进行动态下载更新和显示，并根据菜单文字说明自动确定显示列数和提示翻页，且对所支持的菜单层数和项数没有限制；不同地区、不同类型的终端可用不同的菜单模板来提供不同的交易业务；(3)支持菜单流程的动态定义：每个菜单可设定为提供输入后才进入下一级，或者不用输入就直接进入下一级；每次输入要显示提示信息，输入的字段类型是金额、数字或日期；(4)支持显示格式及内容的动态定义：支持显示模板的动态定义，并根据显示模板的定义在终端显示交易处理平台返回的处理结果；(5)支持打印格式及内容的动态定义：支持打印模板的动态定义，并根据打印模板的要求打印交易凭证；(6)终端操作工号管理功能：对终端操作员进行分权管理，不同级别的操作员拥有不同的操作权限，每次操作要对操作员进行鉴权，确保终端及交易的安全。</p>
      <p>业务平台中的业务管理平台用于完成各类业务数据的管理，具有以下功能：(1)动态菜单管理：用于实现灵活多变的业务，动态菜单包括三部分：菜单的更新和显示、菜单功能的动态定义、以及菜单流程的动态定义，在动态菜单管理下，设定和管理电子交易终端的菜单显示画面、菜单的功能及流程；(2)模板管理：用于实现对显示模板和打印模板的管理，当电子交易终端执行各种交易后，由显示模板设定在终端上显示的消息格式，再由电子交易终端下载显示；由打印模板设定用户的凭证格式，由电子交易终端下载打印输出；(3)业务平台需要的系统数据配置及其它管理功能；所述交易处理平台用于完成系统的交易业务的逻辑处理，具有以下功能：(1)电子销售卡的卡信息存储：将在原卡平台生成的电子销售卡的信息通过脱机形式导入该交易处理平台，并以设定方式进行存储；(2)电子售卡过程中的智能选卡：因为同一类型的卡可能同时有多个批次存放在数据库中，当用户选择购买其中某个类型卡时，可根据有效期和/或发行地选择适宜的卡，既要选择离有效期最近的卡，以避免卡过期，同时还要避免选取离有效期少于设定时间的卡，保证用户有充足的使用时间；再者，要选择终端所在地发行的本地卡；(3)交易处理：每次处理前，先对终端所对应帐号进行鉴权，再对终端通过接入设备传送来的命令进行解析，并向第三方平台转发终端传送来的相关交易请求；当第三方平台返回交易成功的消息后，按照折扣模板的配置计算折扣后，对该终端对应的帐号进行相关费用的扣减，并记录每个终端的交易日志；(4)电子售卡中的卡信息打印：接到用户付款信息后，按照终端选取的卡的格式输出打印信息，要求将密码打印在密封联中，保证卡数据的安全。</p>
      <p>参见图3，介绍本发明综合电子交易业务系统的实现方法，包括下列步骤：</p>
      <p>(1)选择交易项目：电子交易终端接入系统后，自动更新菜单模板、显示模板及打印模板，并按照菜单模板内容显示菜单项目，供用户选择输入；(2)发送交易请求：用户输入完毕后，电子交易终端将用户选择的包括菜单操作码、菜单输入参数的序号及参数值、终端相关信息等按照设定格式打包，发送给交易处理平台进行处理；(3)处理交易请求：交易处理平台解析用户的操作请求，进行业务处理，再将包含相应的显示/打印模板编号的处理结果按照设定格式返回给电子交易终端；(4)显示/打印交易结果：电子交易终端解析返回的处理结果，并按照相应的模板显示/打印结果。</p>
      <p>图4展示了上述实现方法中要与第三方平台交互的电子交易过程的消息时序流程图，其中虚线是电信网的拨号接入，实线是IP网络接入。</p>
      <p>下面再以电子交易业务中的电子售卡业务为实施例重点说明本发明中的电子交易终端的操作流程的具体情况：首先，具体说明本发明通过一些参数来定义一个交易业务的功能情况。</p>
      <p>菜单操作码：对于一个多级的功能菜单，由顶层至最底层的各级菜单都有各自的编号，这些菜单编号的逐级顺序排列被称为菜单操作码，每个菜单操作码分别对应一项电子交易业务，并作为该菜单的标识。例如：购买一张20元面值的200卡时，需要从主菜单中先选择“1”-售卡，再从二级菜单中选择“1”-售200卡，还从三级菜单中选择“2”-20元面值，这样“112”就是该业务功能对应的菜单操作码。每个菜单操作码都能唯一标识用户所执行的业务功能。</p>
      <p>菜单输入参数：某些菜单项在选择之后还要输入一些必要的参数值，例如对于充值业务，需要输入帐号、金额等参数。</p>
      <p>显示和打印格式：需要定义对于每个菜单项的返回结果是要进行打印和/或显示，还要定义显示和打印的格式要求。</p>
      <p>此外，还使用以下一些数据结构来描述电子交易业务流程，包括：(1)菜单模板：使用设定的数据结构描述一个多级的终端菜单；对于每个菜单项目需要定义：菜单的文字描述，菜单结构(所属的上一级菜单以及是否还有下一级菜单)，菜单选项编号，是否需要输入参数、参数的文字说明以及参数值的格式和范围，不同地区、不同等级的终端可用的不同菜单模板，以便各地可根据不同情况开设不同的业务。</p>
      <p>(2)显示和打印模板：不同业务对显示和打印的格式要求也是不同的，为了灵活适应各种业务需求，使用模板形式来定义各种显示和打印格式。可以根据需要自定义新的显示和打印模板，以适应新业务需要。每个模板中描述了多个需要显示和打印的参数值，对于每个参数值需要说明以下内容：参数的内容，可以是固定文字、与终端相关的变量(例如终端号、流水号)或是后台系统处理结果中返回的参数；打印位置，打印的起始行、列；打印长度，打印参数的最大长度。</p>
      <p>根据对一般电子交易业务流程的抽象，本发明电子交易终端的操作过程可以概括为：菜单项目选择、菜单项目参数输入、返回信息显示、返回信息打印的四个步骤(如图4所示)。电子交易终端的处理流程步骤如下：准备操作：在操作员登录后，终端先检查当前的菜单模板、打印模板、显示模板是否是最新的，如果不是，则需要进行下载和更新；终端按照菜单模板内容显示菜单项目，供用户进行选择和输入；用户输入完毕后，终端将用户选择的菜单操作码、菜单输入参数的序号及参数值、终端相关信息等按设定格式打包，发送给交易处理平台进行处理；交易处理平台解析用户的操作请求，执行业务处理功能，然后将处理结果按照设定格式返回终端，并同时返回所使用的显示或打印模板编号；终端解析返回的处理结果，并使用指定的模板将结果进行显示或打印。</p>
      <p>通过上述方式，本发明实现了在不更新终端主程序的情况下，动态扩展了终端功能，系统非常灵活。虽然菜单模板、显示模板、打印模板还是需要下载更新，但是与下载整个终端主程序对比，极大地减少了数据量，不仅大大减少终端下载时间，也减少了接入服务器的负荷。</p>
    </mode-for-invention>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101876905A?cl=zh">CN101876905A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年3月23日</td><td class="patent-data-table-td patent-date-value">2010年11月3日</td><td class="patent-data-table-td ">苏州德融嘉信信用管理技术有限公司</td><td class="patent-data-table-td ">基于前置业务平台的客户端开发系统及其实施方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101976409A?cl=zh">CN101976409A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年9月30日</td><td class="patent-data-table-td patent-date-value">2011年2月16日</td><td class="patent-data-table-td ">西本新干线股份有限公司</td><td class="patent-data-table-td ">云交易平台的服务订购方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101976409B?cl=zh">CN101976409B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年9月30日</td><td class="patent-data-table-td patent-date-value">2016年3月30日</td><td class="patent-data-table-td ">西本新干线电子商务有限公司</td><td class="patent-data-table-td ">云交易平台的服务订购方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101976410A?cl=zh">CN101976410A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年9月30日</td><td class="patent-data-table-td patent-date-value">2011年2月16日</td><td class="patent-data-table-td ">西本新干线股份有限公司</td><td class="patent-data-table-td ">适配于云交易平台的用户权限设置装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101976411A?cl=zh">CN101976411A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年9月30日</td><td class="patent-data-table-td patent-date-value">2011年2月16日</td><td class="patent-data-table-td ">西本新干线股份有限公司</td><td class="patent-data-table-td ">云交易平台管理系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102034306A?cl=zh">CN102034306A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月31日</td><td class="patent-data-table-td patent-date-value">2011年4月27日</td><td class="patent-data-table-td ">上海众人网络安全技术有限公司</td><td class="patent-data-table-td ">一种实现电子钱包实时交易数据信息显示的系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102075548A?cl=zh">CN102075548A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年2月22日</td><td class="patent-data-table-td patent-date-value">2011年5月25日</td><td class="patent-data-table-td ">迈普通信技术股份有限公司</td><td class="patent-data-table-td ">统一通信系统以及统一通信实现方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102710631A?cl=zh">CN102710631A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年5月28日</td><td class="patent-data-table-td patent-date-value">2012年10月3日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">一种数据传输方法、设备及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2015061974A1?cl=zh">WO2015061974A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年10月30日</td><td class="patent-data-table-td patent-date-value">2015年5月7日</td><td class="patent-data-table-td ">锺秉达</td><td class="patent-data-table-td ">交易凭证运作及管理系统</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=phmHAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06Q0030060000">G06Q30/06</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=phmHAAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012000000">H04L12/00</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2007年8月1日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2007年9月26日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年7月13日</td><td class="patent-data-table-td ">C02</td><td class="patent-data-table-td ">Deemed withdrawal of patent application after publication (patent law 2001)</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/70b9ac0778dc7582a072/CN101009007A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E7%94%A8%E4%BA%8E%E7%94%B5%E4%BF%A1%E7%9A%84%E7%BB%BC%E5%90%88%E7%94%B5%E5%AD%90%E4%BA%A4%E6%98%93%E4%B8%9A%E5%8A%A1.pdf?id=phmHAAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0bJ6H8Y0SmOGh2FvZDkrwmi0ZxOg"},"sample_url":"https://www.google.com/patents/reader?id=phmHAAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>