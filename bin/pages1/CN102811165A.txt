<!DOCTYPE html><html><head><title>专利 CN102811165A - 网络系统、网关装置以及路径决定方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_1ec17bec5b1e6ba0eab577be28b6afb9/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_1ec17bec5b1e6ba0eab577be28b6afb9__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="网络系统、网关装置以及路径决定方法"><meta name="DC.contributor" content="山田大辅" scheme="inventor"><meta name="DC.contributor" content="巴比禄股份有限公司" scheme="assignee"><meta name="DC.date" content="2012-5-30" scheme="dateSubmitted"><meta name="DC.description" content="提供一种网络系统、网关装置以及路径决定方法。传输数据包的网络系统具备：便携式网络连接装置，其包含第一通信控制部且连接客户端；以及网关装置，其包含第二通信控制部且作为路由器而进行动作。上述便携式网络连接装置与上述网关装置通过包含隧道路径的第一网络来连接。在上述便携式网络连接装置与上述网关装置通过不包含上述隧道路径的第二网络来连接的情况下，上述第二通信控制部经由上述第二网络来与上述第一通信控制部进行通信，在上述便携式网络连接装置与上述网关装置没有通过上述第二网络来连接的情况下，上述第二通信控制部经由上述第一网络来与上述第一通信控制部进行通信。"><meta name="DC.date" content="2012-12-5"><meta name="DC.relation" content="CN:101002437:A" scheme="references"><meta name="DC.relation" content="CN:101199166:A" scheme="references"><meta name="DC.relation" content="US:20080165786:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:102811165:A"><meta name="citation_patent_application_number" content="CN:201210175432"><link rel="canonical" href="https://www.google.com/patents/CN102811165A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102811165A?cl=zh"/><meta name="title" content="专利 CN102811165A - 网络系统、网关装置以及路径决定方法"/><meta name="description" content="提供一种网络系统、网关装置以及路径决定方法。传输数据包的网络系统具备：便携式网络连接装置，其包含第一通信控制部且连接客户端；以及网关装置，其包含第二通信控制部且作为路由器而进行动作。上述便携式网络连接装置与上述网关装置通过包含隧道路径的第一网络来连接。在上述便携式网络连接装置与上述网关装置通过不包含上述隧道路径的第二网络来连接的情况下，上述第二通信控制部经由上述第二网络来与上述第一通信控制部进行通信，在上述便携式网络连接装置与上述网关装置没有通过上述第二网络来连接的情况下，上述第二通信控制部经由上述第一网络来与上述第一通信控制部进行通信。"/><meta property="og:title" content="专利 CN102811165A - 网络系统、网关装置以及路径决定方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?hl=zh-CN&tbm=isch&source=og&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?hl=zh-CN&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?hl=zh-CN&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102811165A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102811165A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102811165A&amp;usg=AFQjCNH2N6lg6I9kNoPc28U78FXY2844Aw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/4e9d5cbac759babb32c2/CN102811165A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/4e9d5cbac759babb32c2/CN102811165A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102811165A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102811165A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102811165A?cl=zh" style="display:none"><span itemprop="description">提供一种网络系统、网关装置以及路径决定方法。传输数据包的网络系统具备：便携式网络连接装置，其包含第一通信控制部且连接客户端；以及网关装置，其包含第二通信控制部且作为路由器而进行动作。上述便携式网络连接...</span><span itemprop="url">https://www.google.com/patents/CN102811165A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102811165A - 网络系统、网关装置以及路径决定方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102811165A - 网络系统、网关装置以及路径决定方法" title="专利 CN102811165A - 网络系统、网关装置以及路径决定方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102811165 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201210175432</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2012年12月5日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2012年5月30日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年5月31日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/US20120307659?hl=zh-CN&amp;cl=zh">US20120307659</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201210175432.7, </span><span class="patent-bibdata-value">CN 102811165 A, </span><span class="patent-bibdata-value">CN 102811165A, </span><span class="patent-bibdata-value">CN 201210175432, </span><span class="patent-bibdata-value">CN-A-102811165, </span><span class="patent-bibdata-value">CN102811165 A, </span><span class="patent-bibdata-value">CN102811165A, </span><span class="patent-bibdata-value">CN201210175432, </span><span class="patent-bibdata-value">CN201210175432.7</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B1%B1%E7%94%B0%E5%A4%A7%E8%BE%85%22">山田大辅</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%B7%B4%E6%AF%94%E7%A6%84%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">巴比禄股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102811165A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102811165A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102811165A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (1),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (6),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201210175432&amp;usg=AFQjCNH3r8M0TRyzm_Noq5GGQF0sYEoBpw"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102811165A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHfOukfMMM43A6Q4gWdDfVhnL9CWw"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT117713958" lang="ZH" load-source="patent-office">网络系统、网关装置以及路径决定方法</invention-title>
      </span><br><span class="patent-number">CN 102811165 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA102911759" lang="ZH" load-source="patent-office">
    <div class="abstract">提供一种网络系统、网关装置以及路径决定方法。传输数据包的网络系统具备：便携式网络连接装置，其包含第一通信控制部且连接客户端；以及网关装置，其包含第二通信控制部且作为路由器而进行动作。上述便携式网络连接装置与上述网关装置通过包含隧道路径的第一网络来连接。在上述便携式网络连接装置与上述网关装置通过不包含上述隧道路径的第二网络来连接的情况下，上述第二通信控制部经由上述第二网络来与上述第一通信控制部进行通信，在上述便携式网络连接装置与上述网关装置没有通过上述第二网络来连接的情况下，上述第二通信控制部经由上述第一网络来与上述第一通信控制部进行通信。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(21)</span></span></div><div class="patent-text"><div mxw-id="PCLM47107331" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种网络系统，是传输数据包的网络系统，具备：  便携式网络连接装置，其具有第一通信控制部并连接客户端；以及  网关装置，其具有第二通信控制部并作为路由器而进行动作，  其中，上述便携式网络连接装置与上述网关装置通过包含隧道路径的第一网络来连接，  在上述便携式网络连接装置与上述网关装置通过不包含上述隧道路径的第二网络来连接的情况下，上述第二通信控制部经由上述第二网络来与上述第一通信控制部进行通f目，  在上述便携式网络连接装置与上述网关装置没有通过上述第二网络来连接的情况下，上述第二通信控制部经由上述第一网络来与上述第一通信控制部进行通信。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求I所述的网络系统，其特征在于，  上述隧道路径是交换利用头进行封装的数据包的路径，该头被分配有与由上述数据包的发送源赋予的目的地地址和发送源地址不同的目的地地址和发送源地址，  上述便携式网络连接装置还具有：  第一网络接口部，其用于连接上述第一网络；以及  第二网络接口部，其用于连接上述第二网络，  上述第一通信控制部具有：  第一数据包传输处理部，其在上述便携式网络连接装置属于上述第二网络的情况下作为桥而进行动作，在上述便携式网络连接装置不属于上述第二网络的情况下作为路由器而进行动作；以及  第一封装执行部，其进行上述封装，  上述网关装置还具有：  第三网络接口部，其用于连接不包含上述隧道路径且与上述第二网络不同的第三网络；  第四网络接口部，其用于连接上述第一网络；以及  第五网络接口部，其用于连接上述第二网络，  上述第二通信控制部具有：  检测部，其检测上述第二网络中是否存在上述便携式网络连接装置；  路径决定部，其决定传输上述数据包时的路径，  当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置时，决定从上述第三网络向上述第二网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且决定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，决定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径；  第二数据包传输处理部，其在所决定的上述路径中传输上述数据包；以及  第二封装执行部，其进行上述封装。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的网络系统，其特征在于，当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部决定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求3所述的网络系统，其特征在于，  上述网关装置还具有：  第一路由表，其设定从上述第三网络向上述第二网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径；以及  第二路由表，其设定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，  其中，当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置时，上述路径决定部根据上述第一路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部根据上述第二路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求2所述的网络系统，其特征在于，  上述隧道路径是使用移动因特网协议即移动IP而形成的路径，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部不决定从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求2飞中的任一项所述的网络系统，其特征在于，  上述便携式网络连接装置还具有通知数据包发送部，该通知数据包发送部发送通知存在上述便携式网络连接装置的通知数据包，  上述检测部根据是否经由上述第五网络接口部接收到上述通知数据包来检测上述第二网络中是否存在上述便携式网络连接装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求6所述的网络系统，其特征在于，  上述网关装置以及上述便携式网络连接装置都支持虚拟路由器冗余协议即VRRP，  上述通知数据包包含表示上述VRRP中的VRRP广告消息的数据包。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求2&#12316;7中的任一项所述的网络系统，其特征在于，  上述网关装置还具有地址转换部，该地址转换部进行全局IP地址与私有IP地址之间的转换，  对上述第三网络接口部和上述第四网络接口部均分配全局IP地址，  对上述第五网络接口部分配私有IP地址。</div>
    </div>
    </div> <div class="claim"> <div num="9" class="claim">
      <div class="claim-text">9.	一种网关装置，作为路由器而进行动作并能够与便携式网络连接装置进行连接，具备：  第一网络用接口部，其用于连接包含隧道路径的第一网络，该隧道路径是交换利用头进行封装的数据包的路径，该头被分配有与由上述数据包的发送源赋予的目的地地址和发送源地址不同的目的地地址和发送源地址；第二网络用接口部，其用于连接不包含上述隧道路径的第二网络；  第三网络用接口部，其用于连接不包含上述隧道路径且与上述第二网络不同的第三网络；  检测部，其检测在上述第二网络中是否存在上述便携式网络连接装置；  路径决定部，其决定传输上述数据包时的路径，  当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置时，决定从上述第三网络向上述第二网络的路径作为从上述第三网络向与上述便携式网络连接装置连接的客户端传输数据包时的路径，并且决定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，决定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径；  数据包传输处理部，其在所决定的上述路径中传输上述数据包；以及  封装执行部，其进行上述封装。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求9所述的网关装置，其特征在于，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部决定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求10所述的网关装置，其特征在于，还具备：  第一路由表，其设定从上述第三网络向上述第二网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径；以及  第二路由表，其设定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，  其中，当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置时，上述路径决定部根据上述第一路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部根据上述第二路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求9所述的网关装置，其特征在于，  上述隧道路径是使用移动因特网协议即移动IP而形成的路径，  当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部不决定从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求扩12中的任一项所述的网关装置，其特征在于，  上述便携式网络连接装置还具有通知数据包发送部，该通知数据包发送部发送通知存在上述便携式网络连接装置的通知数据包，  上述检测部根据是否经由上述第二网络用接口部接收到上述通知数据包来检测上述第二网络中是否存在上述便携式网络连接装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求13所述的网关装置，其特征在于，  上述网关装置以及上述便携式网络连接装置都支持虚拟路由器冗余协议即VRRP，  上述通知数据包包含表示上述VRRP中的VRRP广告消息的数据包。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.根据权利要求扩14中的任一项所述的网关装置，其特征在于，  上述网关装置还具备地址转换部，该地址转换部进行全局IP地址与私有IP地址之间的转换，  对上述第三网络用接口部和上述第一网络用接口部均分配全局IP地址，  对上述第二网络用接口部分配私有IP地址。</div>
    </div>
    </div> <div class="claim"> <div num="16" class="claim">
      <div class="claim-text">16.	一种路径决定方法，用于在作为路由器而进行动作且能够与便携式网络连接装置进行连接的网关装置中决定传输数据包时的路径，  上述网关装置属于包含隧道路径的第一网络、不包含上述隧道路径的第二网络以及不包含上述隧道路径且与上述第二网络不同的第三网络，该隧道路径是交换利用头进行封装的数据包的路径，该头被分配有与由上述数据包的发送源赋予的目的地地址和发送源地址不同的目的地地址和发送源地址，  该路径决定方法具备如下步骤：  (a)检测在上述第二网络中是否存在上述便携式网络连接装置；以及  (b)当通过上述步骤（a)检测出在上述第二网络中存在上述便携式网络连接装置时，决定从上述第三网络向上述第二网络的路径作为从上述第三网络向与上述便携式网络连接装置连接的客户端传输数据包时的路径，并且决定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，  并且，当通过上述步骤（a)检测出在上述第二网络中不存在上述便携式网络连接装置时，决定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17.根据权利要求16所述的路径决定方法，其特征在于，  在上述步骤（b)中，当通过上述步骤（a)检测出在上述第二网络中不存在上述便携式网络连接装置时，决定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.根据权利要求17所述的路径决定方法，其特征在于，  上述网关装置具有：  第一路由表，其设定从上述第三网络向上述第二网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径；以及  第二路由表，其设定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，  在上述步骤（b)中，当通过上述步骤（a)检测出在上述第二网络中存在上述便携式网络连接装置时，根据上述第一路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径，在上述步骤（b)中，当通过上述步骤（a)检测出在上述第二网络中不存在上述便携式网络连接装置时，根据上述第二路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19.根据权利要求16所述的路径决定方法，其特征在于，  上述隧道路径是使用移动因特网协议即移动IP而形成的路径，  在上述步骤（b)中，当通过上述步骤（a)检测出在上述第二网络中不存在上述便携式网络连接装置时，不决定从上述客户端向上述第三网络传输数据包时的路径。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20.根据权利要求16&#12316;19中的任一项所述的路径决定方法，其特征在于，  上述便携式网络连接装置发送通知存在上述便携式网络连接装置的通知数据包，  在上述步骤（a)中，根据是否接收到上述通知数据包来检测上述第二网络中是否存在上述便携式网络连接装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="21" class="claim">
      <div class="claim-text">21.根据权利要求20所述的路径决定方法，其特征在于，  上述网关装置以及上述便携式网络连接装置都支持虚拟路由器冗余协议即VRRP，  上述通知数据包包含表示上述VRRP中的VRRP广告消息的数据包。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES53434866" lang="ZH" load-source="patent-office" class="description">
    <p>网络系统、网关装置以及路径决定方法</p>
    <p>[0001]	本申请基于2011年5月31日申请的申请号2011-121240的日本专利申请要求优先权，其公开的全部内容被参考引入本申请中。</p>
    <p>技术领域</p>
    <p>[0002]	本发明涉及一种通信网络中的数据包的中继技术。</p>
    <p>背景技术</p>
    <p>[0003]为了将个人计算机、游戏机等无线LAN客户端（以下还简称作“客户端”）连接在网络上而广泛使用了无线LAN接入点（以下还简称作“接入点”）。通过接入点与网关装置进行连接而客户端能够经由接入点以及网关装置来连接在因特网上。网关装置例如作为家庭网关而由ISP(Internet Services Provider :因特网服务提供商）运营者来提供。</p>
    <p> [0004]	作为接入点而提出了便携式（portable)的装置。作为这种装置，使用除了具有作为接入点的功能之外还具有经由3G/HSPA(High Speed Packet Access :高速分组接入）线路等移动通信网进行无线通信的功能部的装置（便携式网络连接装置）。用户通过使用便携式网络连接装置，能够在与网关装置所属的网络不同的网络中将个人计算机连接在因特网上。具体地说，在将个人计算机和便携式网络连接装置从家庭携带至屋外等的情况下，通过使个人计算机作为客户端而发挥功能并使便携式网络连接装置作为接入点而发挥功能，由此能够从个人计算机向便携式网络连接装置发送数据。除此之外，通过使便携式网络连接装置作为路由器而发挥功能来能够在便携式网络连接装置中将从个人计算机接收到的数据经由移动通信网向因特网发送。</p>
    <p>发明内容</p>
    <p>[0005]	发明要解决的问题</p>
    <p>[0006]	在将便携式网络连接装置带到与网关装置所属的网络不同的网络中的情况下，成为个人计算机与因特网进行连接时的网关的装置从网关装置变更为便携式网络连接装置。一般分配给网关装置的地址（全局IP地址）与分配给便携式网络连接装置的地址（全局IP地址）不同。因此，当保持着连接于因特网的服务器等与个人计算机之间进行数据的交换的状态带出便携式网络连接装置时，导致切断形成在个人计算机与服务器等之间的对话，中止服务器等与个人计算机之间的数据的交换。因此，存在如下问题：用户在便携式网络连接装置移动后必须在个人计算机与服务器等之间再次建立对话。</p>
    <p>[0007]	这种问题不限于使便携式网络连接装置从网关装置所属的网络移动到其它网络的情况，也发生在使便携式网络连接装置从其它网络移动（返回）至网关装置所属的网络的情况。</p>
    <p>[0008]	因而，希望出现如下技术：当使便携式网络连接装置在网关装置所属的网络与其它网络之间移动时，能够抑制经由便携式网络连接装置的对话被切断。</p>
    <p>_9] 用于解决问题的方案[0010]	根据本发明的第一方式，提供一种传输数据包的网络系统。该网络系统具备：便携式网络连接装置，其具有第一通信控制部并连接客户端；以及网关装置，其具有第二通信控制部并作为路由器而进行动作。其中，上述便携式网络连接装置与上述网关装置通过包含隧道路径的第一网络来连接。在上述便携式网络连接装置与上述网关装置通过不包含上述隧道路径的第二网络来连接的情况下，上述第二通信控制部经由上述第二网络来与上述第一通信控制部进行通信，在上述便携式网络连接装置与上述网关装置没有通过上述第二网络来连接的情况下，上述第二通信控制部经由上述第一网络来与上述第一通信控制部进行通信。根据本发明的第一方式的网络系统，便携式网络连接装置与网关装置通过包含隧道路径的第一网络来连接，因此即使在网关装置所属的网络与其它网络之间移动便携式网络连接装置也能够抑制经由便携式网络连接装置与网关装置建立的对话被切断。</p>
    <p>[0011]	在第一方式的网络系统中，上述隧道路径也可以是交换利用头进行封装的数据包的路径，该头被分配有与由上述数据包的发送源赋予的目的地地址和发送源地址不同的目的地地址和发送源地址。上述便携式网络连接装置也可以还具有：第一网络接口部，其用 于连接上述第一网络；以及第二网络接口部，其用于连接上述第二网络。上述第一通信控制部也可以具有：第一数据包传输处理部，其在上述便携式网络连接装置属于上述第二网络的情况下作为桥而进行动作，在上述便携式网络连接装置不属于上述第二网络的情况下作为路由器而进行动作；以及第一封装执行部，其进行上述封装。上述网关装置也可以还具有：第三网络接口部，其用于连接不包含上述隧道路径且与上述第二网络不同的第三网络；第四网络接口部，其用于连接上述第一网络；以及第五网络接口部，其用于连接上述第二网络。上述第二通信控制部也可以具有：检测部，其检测上述第二网络中是否存在上述便携式网络连接装置；路径决定部，其决定传输上述数据包时的路径，当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置时，决定从上述第三网络向上述第二网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且决定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，决定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径；第二数据包传输处理部，其在所决定的上述路径中传输上述数据包；以及第二封装执行部，其进行上述封装。</p>
    <p>[0012]	根据这种结构，当检测出在第二网络中存在便携式网络连接装置时，决定从第三网络向第二网络的路径作为从第三网络向客户端传输数据包时的路径，另外，当检测出在第二网络中不存在便携式网络连接装置时，决定从第三网络向第一网络的路径作为从第三网络向客户端传输数据包时的路径。因而，在将便携式网络连接装置从网关装置所属的网络（第二、第三网络）移动到其它网络时，至少从第三网络发给客户端的数据包能够不切断对话地到达客户端。另外，在将便携式网络连接装置从其它网络移动到网关所属的网络时，至少从第三网络发给客户端的数据包也能够不切断对话地到达客户端。</p>
    <p>[0013]	在第一方式的网络系统中，当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部也可以决定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径。</p>
    <p>[0014]	根据这种结构，在将便携式网络连接装置从网关装置所属的网络（第二、第三网络）移动到其它网络时，从第三网络发给客户端的数据包和从客户端发给第三网络的数据包均能够不切断对话地进行传输。另外，在将便携式网络连接装置从其它网络移动到网关所属的网络时，从第三网络发给客户端的数据包和从客户端发给第三网络的数据包均能够不切断对话地进行传输。</p>
    <p>[0015]	在第一方式的网络系统中，上述网关装置也可以还具有：第一路由表，其设定从上述第三网络向上述第二网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径；以及第二路由表，其设定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径，并且设定从上述第一网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径。其中，也可以当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置时，上述路径决定部根据上述第一路由表来决定从上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径，也可以当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部根据上述第二路由表来决定从 上述第三网络向上述客户端传输数据包时的路径以及从上述客户端向上述第三网络传输数据包时的路径。</p>
    <p>[0016]	根据这种结构，通过根据是否存在第二网络中的便携式网络连接装置切换在决定数据包的传输路径时所使用的路由表，能够抑制经由便携式网络连接装置的对话切断。另夕卜，具有第一路由表以及第二路由表，因此与根据是否存在第二网络中的便携式网络连接装置来重写一个路由表的结构相比能够缩短路径决定所需的期间。</p>
    <p>[0017]	在第一方式的网络系统中，上述隧道路径也可以是使用移动IPdnternetProtocol :因特网协议）而形成的路径，当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置时，上述路径决定部也可以不决定从上述客户端向上述第三网络传输数据包时的路径。</p>
    <p>[0018]	根据这种结构，能够实现使用了移动IP的隧道，能够抑制在隧道路径中进行传输的数据包被第三者窃听。</p>
    <p>[0019]	在第一方式的网络系统中，上述便携式网络连接装置也可以还具有通知数据包发送部，该通知数据包发送部发送通知存在上述便携式网络连接装置的通知数据包，上述检测部也可以根据是否经由上述第五网络接口部接收到上述通知数据包来检测上述第二网络中是否存在上述便携式网络连接装置。</p>
    <p>[0020]	根据这种结构，能够在接收到通知数据包的情况下检测为在第二网络中存在便携式网络连接装置，在没有接收到通知数据包的情况下检测出在第二网络中不存在便携式网络连接装置。另外，根据是否接收到通知数据包能够准确地检测第二网络中是否存在便携式网络连接装置。</p>
    <p>[0021]	在第一方式的网络系统中，上述网关装置以及上述便携式网络连接装置也可以都支持VRRP (Virtual Router RedundancyProtocol :虚拟路由器冗余协议），上述通知数据包也可以包含表示上述VRRP中的VRRP广告消息的数据包。</p>
    <p>[0022]	根据这种结构，在网关装置以及便携式网络连接装置作为VRRP的虚拟路由器而进行动作的结构中能够准确地检测第二网络中是否存在便携式网络连接装置。除此之外，作为通知数据包而包含表示VRRP广告消息的数据包，因此，与使用与表示VRRP广告消息的数据包不同的专用的数据包作为通知数据包的结构相比，能够简化网关装置的结构，能够抑制网关装置的制造成本。</p>
    <p>[0023]	在第一方式的网络系统中，上述网关装置也可以还具有地址转换部，该地址转换部进行全局IP地址与私有IP地址之间的转换，也可以对上述第三网络接ロ部和上述第四网络接ロ部均分配全局IP地址，也可以对上述第五网络接ロ部分配私有IP地址。</p>
    <p>[0024]	根据这种结构，在客户端分配了私有IP地址的情况下，保持客户端进行经由因特网的通信的状态，在便携式网络连接装置以及客户端从网关装置所属的网络移动到其它网络的情况下，也能够抑制经由便携式网络连接装置的对话切断。</p>
    <p>[0025]	根据本发明的第二方式，提供一种作为路由器而进行动作并能够与便携式网络连接装置进行连接的网关装置。该网关装置具备：第一网络用接ロ部，其用于连接包含隧道路径的第一网络，该隧道路径是交&#25563;利用头进行封装的上述数据包的路径，该头被分配有与 由数据包的发送源赋予的目的地地址和发送源地址不同的目的地地址和发送源地址；第二网络用接ロ部，其用于连接不包含上述隧道路径的第二网络；第三网络用接ロ部，其用于连接不包含上述隧道路径且与上述第二网络不同的第三网络；检测部，其检测在上述第二网络中是否存在上述便携式网络连接装置；路径决定部，其决定传输上述数据包时的路径，当通过上述检测部检测出在上述第二网络中存在上述便携式网络连接装置&#21515;，决定从上述第三网络向上述第二网络的路径作为从上述第三网络向与上述便携式网络连接装置连接的客户端传输数据包时的路径，并且决定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，当通过上述检测部检测出在上述第二网络中不存在上述便携式网络连接装置&#21515;，决定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径；数据包传输处理部，其在所&#27770;定的上述路径中传输上述数据包；以及封装执行部，其进行上述封装。</p>
    <p>[0026]	根据本发明的第二方式的网关装置，当检测出在第二网络中存在便携式网络连接装置&#21515;，决定从第三网络向第二网络的路径作为从第三网络向客户端传输数据包时的路径，另外，当检测出在第二网络中不存在便携式网络连接装置&#21515;，决定从第三网络向第一网络的路径作为从第三网络向客户端传输数据包时的路径。因而，在将便携式网络连接装置从网关装置所属的网络（第二、第三网络）移动到其它网络时，至少从第三网络发给客户端的数据包能够不切断对话地到达客户端。另外，在将便携式网络连接装置从其它网络移动到网关所属的网络时，至少从第三网络发给客户端的数据包也能够不切断对话地到达客户端。</p>
    <p>[0027]	根据本发明的第三方式，提供一种用于在作为路由器而进行动作且能够与便携式网络连接装置进行连接的网关装置中决定传输数据包时的路径的路径决定方法。在该路径决定方法中，上述网关装置属于包含隧道路径的第一网络、不包含上述隧道路径的第二网络以及不包含上述隧道路径且与上述第二网络不同的第三网络，该隧道路径是交&#25563;利用头进行封装的上述数据包的路径，该头被分配有与由数据包的发送源赋予的目的地地址和发送源地址不同的目的地地址和发送源地址。并且，上述方法具备如下步骤：（a)检测在上述第二网络中是否存在上述便携式网络连接装置；以及（b)当通过上述步骤（a)检测出在上述第二网络中存在上述便携式网络连接装置&#21515;，决定从上述第三网络向上述第二网络的路径作为从上述第三网络向与上述便携式网络连接装置连接的客户端传输数据包时的路径，并且决定从上述第二网络向上述第三网络的路径作为从上述客户端向上述第三网络传输数据包时的路径，并且，当通过上述步骤（a)检测出在上述第二网络中不存在上述便携式网络连接装置&#21515;，决定从上述第三网络向上述第一网络的路径作为从上述第三网络向上述客户端传输数据包时的路径。</p>
    <p>[0028]	根据本发明的第三方式的路径决定方法，当检测出在第二网络中存在便携式网络连接装置&#21515;，决定从第三网络向第二网络的路径作为从第三网络向客户端传输数据包时的路径，另外，当检测出在第二网络中不存在便携式网络连接装置&#21515;，决定从第三网络向第一网络的路径作为从第三网络向客户端传输数据包时的路径。因而，在将便携式网络连接装置从网关装置所属的网络（第二、第三网络）移动到其它网络时，至少从第三网络发给客户端的数据包能够不切断对话地到达客户端。另外，在将便携式网络连接装置从其它网络移动到网关所属的网络时，至少从第三网络发给客户端的数据包也能够不切断对话地到达客户端。</p>
    <p>[0029]	此外，本发明能够以各种的方式来实现，例如能够以无线中继装置、包含无线中继 装置的无线通信系统、这些装置或者系统的控制方法、用于实现这些方法、装置或者系统的功能的计算机程序、记录了该计算机程序的非暂时性的记录介质等方式来实现。</p>
    <p>附图说明</p>
    <p>[0030]	图I是表示应用了作为本发明的一个实施例的便携式网络连接装置的网络系统的概要结构的说明图。</p>
    <p>[0031]	图2是表示网络系统的第二连接方式的说明图。</p>
    <p>[0032]	图3是表示网络系统的第三连接方式的说明图。</p>
    <p>[0033]	图4是表示便携式网络连接装置以及底座的详细结构的说明图。</p>
    <p>[0034]	图5是表不图4所不的路由表的设定内容的说明图。</p>
    <p>[0035]	图6是表示网关装置的详细结构的说明图。</p>
    <p>[0036]	图7是表不图6所不的第一路由表的设定内容的说明图。</p>
    <p>[0037]	图8是表示图6所示的第二路由表的设定内容的说明图。</p>
    <p>[0038]	图9是表示在便携式网络连接装置中执行的动作模式切换处理的过程的流程图。</p>
    <p>[0039]	图10是表示在网关装置中执行的数据包传输路径决定处理的过程的流程图。</p>
    <p>[0040]	图11是示意性地表示第一连接方式中的客户端与服务器之间的数据的交换的说明图。</p>
    <p>[0041]	图12是示意性地表示第二连接方式中的客户端与服务器之间的数据的交换的说明图。</p>
    <p>具体实施方式</p>
    <p>[0042]	A.实施例：</p>
    <p>[0043]	Al.系统结构：</p>
    <p>[0044]	图I是表示应用了作为本发明的一个实施例的便携式网络连接装置的（第一连接方式下的）网络系统的概要结构的说明图。网络系统10具备：网关装置500、便携式网络连接装置100、底座200、客户端CLl、以及隧道路径900。网络系统10是用于将从客户端CLl发送的数据包（第三层数据包）经由因特网INT来进行传输、并且将发给客户端的数据包送到客户端CLl的系统。因而，客户端CLl例如能够向连接在因特网INT上的服务器SV发送数据的下载请求，或从服务器SV下载数据。</p>
    <p>[0045]	网关装置500是作为路由器而发挥功能的固定型的装置，经由包含未图示的接入线路（电信运营者提供的线路）的网络NW3来与因特网INT进行连接。网关装置500经由网络电缆Ca来与底座200进行连接。网关装置500具备用于连接在LAN(有线LAN以及无线LAN)上的接ロ（LAN-IF)、用于连接在接入线路（网络NW3)上的接ロ（WAN-IF :WideArea Network-InterFace :广域网接ロ）、以及用于连接在隧道路径900上的接ロ（VPN-IF :Virtual Private Network-InterFace :虚拟私有网络接 ロ）。对 WAN-IF 分配全局 IP 地址“IPgl”。关于网关装置500,例如能够采用由ISP (Internet Services Provider :因特网服务提供商）运营者提供的装置作为家庭网关。此外，网关装置500的详细结构将后述。</p>
    <p>[0046]	底座200构成为能够与便携式网络连接装置100进行连接，具有作为用于载置便 携式网络连接装置100的机架的功能、作为向便携式网络连接装置100中继电カ的装置的功能、以及用于使便携式网络连接装置100连接在有线LAN上的功能。底座200具有端ロ220和切换开关230。端ロ 220是用于连接底座200与有线LAN (Local Area Network :局域网）的端ロ，如图I所示那样连接了网络电缆Ca。切换开关230是所谓的滑动开关，是用于切换端ロ 220的功能的开关。</p>
    <p>[0047]	便携式网络连接装置100是在作为OSI (Open SystemsInterconnection :开放系统互联）模型化的网络层的第三层或者作为数据链层的第二层中将数据包（帧）进行中继的小型轻量化的便携式装置。便携式网络连接装置100能够对底座200自由装卸地连接。此外，在图I中，便携式网络连接装置100与底座200进行连接。</p>
    <p>[0048]	另外，便携式网络连接装置100具有两个动作模式作为数据包的传输处理的动作模式。具体地说，便携式网络连接装置100具有作为在第二层中将数据包进行中继的动作模式（即，作为桥而进行动作的动作模式）的第一动作模式、作为在第三层中将数据包进行中继的动作模式（即，作为路由器而进行动作的动作模式）的第二动作模式。在图I的例子中，便携式网络连接装置100以第一动作模式（桥）进行动作。这里，“路由器”意味着在第三层中将数据包进行中继的功能、即在互不相同的网络（广播域）间将数据包进行中继的功能。另外，“桥”意味着在第二层中将数据包（帧）进行中继的功能、即将单一的网络(广播域）内的数据包（帧）进行中继的功能。</p>
    <p>[0049]	另外，便携式网络连接装置100具备：用于连接在LAN(有线LAN以及无线LAN)上的接ロ（LAN-IF)、以及用于连接在隧道路径900 (网络NWl)上的接ロ（VPN-IF)。对便携式网络连接装置100所具有的VPN-IF分配全局IP地址“IPg2”。此外，包含LAN-IF、VPN-IF的便携式网络连接装置20的详细结构将后述。</p>
    <p>[0050]	在本实施例中，客户端CLl是个人计算机。客户端CLl具有未图示的无线LAN接ロ，经由该无线LAN接ロ来与便携式网络连接装置100进行连接。在图I中，客户端CLl作为无线LAN的客户端而进行动作。便携式网络连接装置100作为路由器而进行动作，并且作为无线LAN的接入点而进行动作。</p>
    <p>[0051 ] 隧道路径900是经由形成在网关装置500与便携式网络连接装置100之间的因特网INT的数据包传输路径。隧道路径900通过由未图示的移动通信网、以及由用于网关装置500连接在因特网INT上的接入线路构成的网络NWl来形成。在隧道路径900中应该传输的数据包（第三层数据包）通过分配了与在数据包的发送源中赋予的目的地IP地址以及发送源IP地址不同的目的地IP地址以及发送源IP地址的头而进行封装来传输。在本实施例中，作为隧道路径900能够使用ISP、电信运营者提供的公知的网络（VPN)。在隧道路径900中，加密在网关装置500与便携式网络连接装置100之间交换的IP数据包来抑制第三者的窃听。在本实施例中，作为这样的加密协议而使用在IETF(InternetEngineeringTask Force :因特网工程任务组）中规定的 IPSec (Security Architecture for InternetProtocol :因特网协议安全体系）。</p>
    <p>[0052]	在网络系统10中作为各结构要素间的连接方式而允许多个连接方式。在图I中表示网络系统10的第一连接方式。在第一连接方式中各结构要素都配置在相同的位置A(例如，家庭、办公室）。在第一连接方式中，便携式网络连接装置100经由底座200来通过有线的网络电缆Ca直接连接在网关装置500的LAN-IF上。在本申请中“直接地连接”是指通过不包含隧道路径900的路径以有线或者无线来进行连接。另外，在第一连接方式中客户端 CLl通过无线连接在便携式网络连接装置100的LAN-IF上。如上述那样，在该第一连接方式中便携式网络连接装置100以第一动作模式进行动作。在第一连接方式中在比网关装置500更下位侧（离因特网INT远的侧）形成了一个网络NW2。对网络NW2分配作为私有网络地址的“ 192. 168. 11.0/24”。对属于网络NW2的客户端CLl分配IP地址“ 192. 168. 11. 11”。网关装置500具备进行全局IP地址（IPgl)与私有IP地址（192. 168. 11. 10等）的相互转换的地址转换功能。作为地址转换功能例如能够采用NAT (Network Address Translation ：网络地址转换）功能、NAPT (Network Address Port Translation :网络地址端ロ转换）功&#20489;^:。</p>
    <p>[0053]	图2是表示网络系统的第二连接方式的说明图。在第二连接方式中，各结构要素没有配置在相同的位置。具体地说，在图2左侧所示的位置A中配置了网关装置500、底座200以及网络电缆Ca。在图2右侧所示的位置B中配置了便携式网络连接装置100、客户端CLl、以及客户端CL2。在第二连接方式中，位置A和位置B相互分离得远使得例如无法进行无线LAN接入点与无线LAN客户端间的通信的程度。因此，在网关装置500的LAN-IF中无法直接连接便携式网络连接装置100。</p>
    <p>[0054]	客户端CL2与客户端CLl同样是个人计算机，具有未图示的无线LAN接ロ。客户端CL2经由未图示的无线LAN接ロ来与便携式网络连接装置100进行连接。在位置B中形成了分配了私有网络地址的网络NW4(192. 168. 11. 0/24)。对客户端CL2分配私有IP地址“192. 168. 11. 12”。</p>
    <p>[0055]	便携式网络连接装置100具备未图示的移动通信接ロ，经由该移动通信接ロ来与未图示的移动通信网的基站进行无线通信。在图2中，便携式网络连接装置100作为路由器而进行动作，从客户端CLl或者客户端CL2向因特网INT传输数据包，从因特网INT向客户端CLl或者客户端CL2传输数据包。</p>
    <p>[0056]	便携式网络连接装置100在两台客户端CL1、CL2进行经由因特网INT的通信时将各客户端CL1、CL2的私有IP地址以全局IP地址（IPg2)来进行封装。</p>
    <p>[0057]	例如能够在如下情况下实现第二连接方式：即用户从在位置A中实现图I所示的第一连接方式的状态将便携式网络连接装置100从底座200断开，并将便携式网络连接装置100和客户端CLl带到位置B，使作为新的客户端的客户端CL2与作为无线LAN接入点而进行动作的便携式网络连接装置100通过无线进行连接。例如能够在用户维持在客户端CLl与服务器SV之间进行数据的交&#25563;的状态而要移动到位置B的情况下，引起从位置A带走便携式网络连接装置100以及客户端CL1。作为这种客户端CLl与服务器SV之间的数据的交&#25563;例如能够采用从服务器SV输出的影像的流发送、来自服务器SV的文件传输等。</p>
    <p>[0058]	图3是表示网络系统的第三连接方式的说明图。除了底座200以及网络电缆Ca从位置A中带出而移动到位置C的点、客户端CL3通过有线来连接在底座200上的点之外，其余部分与图2所示的第二连接方式相同。例如，位置A和位置C相互远离使得无法进行无线LAN接入点与无线LAN客户端间的通信的程度。因此，在网关装置500的LAN-IF中无法直接连接便携式网络连接装置100。此外，位置A中的网络电缆Ca与位置C中的网络电缆Ca也可以是不同的电缆。</p>
    <p>[0059]	客户端CL3与客户端CLl同样是个人计算机，具有未图示的有线LAN接ロ。客户 端CL3经由未图示的有线LAN接ロ以及网络电缆Ca来与底座200进行连接。在位置C中形成了分配了私有网络地址的网络NW5(192. 168. 11. 0/24)。对客户端CL3分配私有IP地址 “192. 168. 11. 13”。</p>
    <p>[0060]	例如能够在如下情况下实现这种第三连接方式：即用户从位置A中实现图I所示的第一连接方式的状态为了在位置C中构筑新的网络而将便携式网络连接装置100和客户端CLl带到位置C，使作为新的客户端的客户端CL3与便携式网络连接装置100进行有线连接。</p>
    <p>[0061]	图4是表示便携式网络连接装置以及底座的详细结构的说明图。底座200除了具备上述的端ロ 220以及切换开关230之外还具备连接接ロ（I/F) 280、以及LAN控制电路210。端ロ 220以及LAN控制电路210相互地以内部总线来连接。同样地，LAN控制电路210以及连接接ロ 280相互地以内部总线来连接。</p>
    <p>[0062]	作为端ロ 220例如能够采用遵循IEEE802. 3/3u/3ab的端ロ。LAN控制电路210按照规定的网络协议（例如以太网（注册商标））来控制经由端ロ 220的数据传输。LAN控制电路210具备LAN-IF192。LAN-IF 192是形成在LAN控制电路210中的逻辑的接ロ，是用于进行经由有线LAN的数据的交&#25563;的接ロ。</p>
    <p>[0063]	切换开关230以手动来切&#25563;“因特网（Internet) ”的状态和“局域网（Lan) ”的状态中的任�个。在图4中，切换开关230设定为“Internet”的状态。端ロ 220作为在切换开关230的状态为“Lan”的情况下用干与客户端进行连接的端ロ而发挥功能、在切换开关230的状态为“Internet”的情况下作为用于与网关装置500进行连接的端ロ而发挥功能。</p>
    <p>[0064]	连接接ロ 280具有作为USB (Universal Serial Bus :通用串行总线）设备控制器的功能，当底座200与便携式网络连接装置100进行连接时按照USB标准来进行与便携式网络连接装置100之间的信息的交&#25563;。</p>
    <p>[0065]	便携式网络连接装置100包含有：USB设备接ロ 173、无线LAN控制电路174、无线WAN控制电路175、移动通信控制电路176、用于与底座200连接的底座连接接ロ（I/F) 180、CPU (CentralProcessing Unit :中央处理单兀）120、ROM (Read Only Memory:只读存储器）171、以及RAM (Random Access Memory :随机存取存储器）172。USB设备接ロ 173是用于连接USB (Universal SerialBus :通用串行总线）设备（例如存储装置等）的接ロ。</p>
    <p>[0066]	无线LAN控制电路（还称作“无线LAN接ロ ”) 174包含调制器、放大器、以及天线，例如作为遵循IEEE802. llb/g的无线LAN的接入点而与无线LAN的客户端（例如个人计算机、游戏机）进行无线通信。无线LAN控制电路174具备LAN-IF 191。LAN-IF191是形成在无线LAN控制电路174中的逻辑的接ロ，是用于进行经由无线LAN的数据的交&#25563;的接ロ。</p>
    <p>[0067]	无线WAN控制电路（还称作“无线WAN接ロ，，) 175包含调制器、放大器、以及天线，例如作为遵循IEEE 802. lla/b/g的无线LAN的客户端而与无线LAN的接入点（例如公共无线LAN)进行无线通信。无线WAN控制电路175具备WAN-IF 194。WAN-IF194是形成在无线WAN控制电路175中的逻辑的接ロ，是用于进行例如经由公共无线LAN的数据的交&#25563;的接ロ。</p>
    <p>[0068]	移动通信控制电路（还称作“移动通信接ロ”) 176包含调制器、放大器、以及天线，例如作为遵循3G/HSPA的移动通信的终端而与移动通信网的基站进行无线通信。移动通信 控制电路176具备VPN-IF 193。VPN-IF 193是形成在移动通信控制电路176中的逻辑的接ロ，是用于经由VPN (隧道路径900)来交换数据的接ロ。这样，第一实施例的便携式网络连接装置100包含有分别进行互不相同的无线通信网络中的无线通信的多个无线通信接ロ。</p>
    <p>[0069]	底座连接接ロ 180具有作为USB主控制器的功能，当便携式网络连接装置100与底座200进行连接时按照USB标准来进行与底座200之间的信息的交&#25563;。另外，底座连接接ロ 180当便携式网络连接装置100与底座200进行连接时将经由连接接ロ 280从底座提供的电カ转移给便携式网络连接装置100侧的未图示的电池。</p>
    <p>[0070]	CPU 120通过将保存在ROM 171中的固件、计算机程序加载在RAM 172而执行来控制便携式网络连接装置100的各部，并且作为传输处理部121，传输控制部122，切换监视部123，底座连接监视部124，网关装置连接监视部125，VPN控制部126而发挥功能。CPU 120相当于根据权利要求中的第一通信控制部。</p>
    <p>[0071]	传输处理部121具有路由器功能部121r、以及桥功能部121b，进行经由各无线通信接ロ（无线LAN控制电路174、无线WAN控制电路175、移动通信控制电路176)以及端ロ220的数据包（第三层数据包以及第ニ层帧）的传输。传输处理部121具有只有桥功能部121b进行处理的第一动作模式以及桥功能部121b和路由器功能部1211■进行处理的第二动作模式作为数据包传输的动作模式。在第一动作模式中只有桥功能部121b进行第二层帧的传输，因此便携式网络连接装置100以及底座200整体上作为桥而进行动作。与此相&#23550;，在第二动作模式中，桥功能部121b以及路由器功能部121r都进行处理，因此便携式网络连接装置100以及底座200整体上作为路由器而进行动作。</p>
    <p>[0072]	传输控制部122控制传输处理部121。作为这样的控制之一，传输控制部122通过执行后述的动作模式切换处理来设定（切&#25563;）传输处理部121的动作模式。</p>
    <p>[0073]	切换监视部123监视切换开关230的切&#25563;状态。具体地说，例如，能够将切换开关230和CPU 120的GPIO(General Purposelnput/Output)端ロ通过未图示的控制线来进行连接并通过经由这样的控制线输入在CPU 120中的中断信号来监视切换开关230的切&#25563;状态。此外，切换监视部123在便携式网络连接装置100的电源接通之后始&#32066;监视切换开关230的切&#25563;状态的变化（有无操作）。</p>
    <p>[0074]	底座连接监视部124是监视便携式网络连接装置100是否连接在底座200的功能部。关于该监视，例如能够根据底座连接接ロ 180与底座连接接ロ 180之间有无供电来进行监视。另外，例如，能够按照USB标准中的装置间的连接检测顺序来监视便携式网络连接装置100与底座200之间有无连接。在该连接检测顺序中例如作为USB的信号线的D+信号线以及D-信号线都为3. 3V的情况下，能够检测为便携式网络连接装置100与底座200相连接。此外，连接监视部124在便携式网络连接装置100的电源接通之后始终监视便携式网络连接装置100与底座200之间有无连接。</p>
    <p>[0075]	网关装置连接监视部125监视便携式网络连接装置100与网关装置500之间有无连接，并且输出通知存在便携式网络连接装置100的信号（图I所示的存活信号KA)。这里，“与网关装置500之间有无连接”意味着网关装置500是否属于便携式网络连接装置100所属的网络。此外，网关装置连接监视部125的存活信号KA的输出能够通过预先登记网关装置500的地址并向这样的地址的单播来实现。另外，也能够代替它而通过在便携式网络连接装置100所属的网络内进行广播来实现。</p>
    <p>[0076]	VPN控制部126控制经由隧道路径900的数据的交&#25563;。具体地说，执行认证、密钥 的交&#25563;等、用于建立隧道路径900的处理、伴随经由隧道路径900的数据的交&#25563;的加密以及解密的处理、数据的压缩以及解压缩等处理。此外，VPN控制部126在便携式网络连接装置100启动后与相当于隧道路径900的另一端的功能部（后述的网关装置500的VPN控制部）之间定期地进行用于建立隧道路径900的处理（认证等）。因而，在网关装置500以及便携式网络连接装置100启动后继续建立隧道路径900。</p>
    <p>[0077]	ROM 171是能够写入的非易失性存储器。在ROM 171中除了具备用于实现上述各功能部的未图示的程序之外还具备VPN设定数据保存部17a、路由表保存部17b、ARP表保存部17c。VPN设定数据保存部17a保存用于形成VPN的各种数据。具体地说，例如保存用于在与经由VPN (隧道路径900)来进行连接的装置之间进行认证的密钥、隧道用IP地址（图I、图2所示的“ IPg2 ”）、表示是否压缩交换的数据的数据等。</p>
    <p>[0078]	路由表保存部17b保存路由表RT3。在便携式网络连接装置100作为路由器而发挥功能的情况下，路由表RT3通过传输处理部121 (路由器功能部121r)来进行&#21443;照。</p>
    <p>[0079]	图5是表不图4所不的路由表的设定内容的说明图。路由表RT3将目的地地址、条件、输出接ロ（I/F)相互地对应起来。目的地地址表示要传输的数据包的目的地地址。条件意味着成为应用各项的前提的条件。输出I/F表示应该传输的数据包的输出目标接ロ。</p>
    <p>[0080]	如图5所示，在本实施例的路由表RT3中登记了三个项。在最上段的项中设定了目的地“ 192. 168. 11. 0/24”、条件“ ARP登记”、输出I/F “LAN-IF”。该项意味着针对目的地地址的网络地址为“192. 168. 11. 0/24”的数据包中登记在未图示的ARP表中的地址的数据包，输出接ロ为LAN-IF。在中段的项中设定了目的地“ 192. 168. 11. 0/24”、条件“无”、输出I/F “VPN-IF”。该项意味着针对目的地地址的网络地址为“192. 168. 11. 0/24”的数据包，输出接ロ无条件地变成VPN-IF。在最下段的项中设定了目的地“*”、条件“无”、输出I/FVPN-IF”。该项意味着针对目的地地址为任意的数据包，输出接ロ无条件地变成VPN-IF。这三个项的登记能够由用户预先将设定用&#32066;端（个人计算机等）连接在便携式网络连接装置100上来手动地进行设定。在&#21443;照路由表RT3时直到选中相应的项为止以最上段的项、中段的项、最下段的项的顺序来进行&#21443;照（检索）。</p>
    <p>[0081]	在图4的ARP表保存部17c中保存有未图示的ARP表。ARP表是将IP地址和MAC (Media Access Control :媒体存取控制）地址对应起来的表，每当与客户端进行通信时项被追加（学习）。对于与便携式网络连接装置100所属的网络相同的网络（广播域）内的客户端通过学习来登记项，但是对于与便携式网络连接装置100所属的网络不同的网络内的客户端在ARP表中没有登记项。</p>
    <p>[0082]	图6是表示网关装置的详细结构的说明图。网关装置500具备CPU 320、RAM 330、ROM 340、无线LAN控制电路350、以及有线LAN控制部360。</p>
    <p>[0083]	CPU 320通过将保存在ROM 340中的计算机程序加载到RAM 330来执行而作为传输处理部321、路径决定部322、连接监视部323、地址转换部324、VPN控制部325的各功 能部而进行动作。CPU 320相当于权利要求中的第二通信控制部。</p>
    <p>[0084]	传输处理部321传输经由有线LAN控制部360、无线LAN控制电路350来输入的IP数据包。路径决定部322决定数据包的传输路径。连接监视部323监视便携式网络连接装置100是否属于网关装置500所属的网络。具体地说，连接监视部323在规定期间内接收了上述的存活信号KA的情况下，判断为便携式网络连接装置100属于网关装置500所属的网络，在规定期间内没有接收到存活信号KA的情况下，判断为便携式网络连接装置100不属于网关装置500所属的网络。地址转换部324将全局IP地址和私有IP地址转换。VPN控制部325具有与图4所示的便携式网络连接装置100的VPN控制部126相同的功能。</p>
    <p>[0085]	ROM 340是能够写入的非易失性存储器。除了具备用于实现上述各功能部的未图示的程序之外还具备路由表保存部341、VPN设定数据保存部342、以及ARP表保存部343。在路由表保存部341中保存了第一路由表RT1、以及第二路由表RT2。这两个路由表RT1、RT2能够由用户预先将设定用&#32066;端（个人计算机等）连接在网关装置500上来手动地进行设定。</p>
    <p>[0086]	图7是表示图6所示的存在便携式网络连接装置时的第一路由表的设定内容的说明图。第一路由表RTl与图5所示的路由表RT3同样地将目的地地址、条件、输出接ロ（I/F)相互地对应起来。</p>
    <p>[0087]	如图7所示，在本实施例的第一路由表RTl中登记了两个项。在上段的项中设定了目的地“ 192. 168. 11. 0/24”、条件“无”、输出I/F “LAN-IF”。该项意味着针对目的地地址的网络地址为“192. 168. 11. 0/24”的数据包，输出接ロ无条件地变成LAN-IF。在下段的项中设定了目的地“*”、条件“无”、输出I/F“WAN-IF”。该项意味着针对目的地地址为任意的数据包，输出接ロ无条件地变成WAN-IF。与图5所示的路由表RT3同样地这两个项以上段的项、下段的项的顺序来进行&#21443;照。</p>
    <p>[0088]	图8是表示图6所示的不存在便携式网络连接装置时的第二路由表的设定内容的说明图。第二路由表RT2与路由表RT3、第一路由表RTl同样地将目的地地址、条件、输出接ロ（Ι/F)相互地对应起来。</p>
    <p>[0089]	如图8所示，在本实施例的第二路由表RT2中登记了三个项。在最上段的项中设定T目的地“ 192. 168. 11. 0/24”、条件“ARP登记”、输出I/F “LAN-IF”。该项与图5的中段的项相同。但是，“LAN-IF”表示的输出目标与图5的路由表RT3不同。在中段的项中设定了“192. 168. 11. 0/24”、条件“无”、输出I/FVPN-IF”。该项与图5的最上段的项相同。但是，“VPN-IF”表示的输出目标与图5的路由表RT3不同。在最下段的项中设定了目的地“*”、条件“无”、输出I/F “WAN-IF”。该项意味着针对目的地地址为任意的数据包，输出接ロ无条件地变成WAN-IF。与路由表RT3以及第一路由表RTl同样地这三个项以最上段的项、中段的项、最下段的项的顺序来进行&#21443;照。</p>
    <p>[0090]	图6所示的VPN设定数据保存部342具有与图4所示的便携式网络连接装置100的VPN设定数据保存部17a相同的功能。ARP表保存部343具有与图4所示的便携式网络连接装置100的ARP表保存部17c相同的功能。</p>
    <p>[0091]	无线LAN控制电路350具有与图4所示的便携式网络连接装置100的无线LAN控制电路174相同的功能。无线LAN控制电路350具备LAN-IF 391。LAN-IF 391具有与图4所示的便携式网络连接装置100的LAN-IF 191相同的功能。</p>
    <p>[0092]	有线LAN控制部360具有与图4所示的LAN控制电路210以及端ロ 220相同的功能。有线 LAN 控制部 360 具备 LAN-IF 392,VPN-IF 393、以及 WAN-IF 394。LAN-IF 392 具有与LAN-IF 391相同的功能。VPN-IF 393具有与图4所示的便携式网络连接装置100的VPN-IF 193相同的功能。WAN-IF 394是用于经由WAN (因特网INT)来交换数据的接ロ。对WAN-IF 394以及VPN-IF 393都分配全局IP地址“IPgl”。 </p>
    <p>[0093]	在网络系统10中，便携式网络连接装置100通过执行后述的动作模式切&#25563;处理，来在属于与网关装置500相同的网络的情况下作为桥而发挥功能，在属于与网关装置500不同的网络的情况下作为路由器而发挥功能。另外，在网络系统10中通过执行后述的数据包传输路径决定处理，由此能够抑制在以客户端CLl与服务器SV进行通信的状态下从位置A移动到位置B的情况下的对话切断。</p>
    <p>[0094]	网络NWl相当于权利要求中的第一网络。另外，网络NW2相当于权利要求中的第ニ网络、网络NW3相当于权利要求中的第三网络、VPN-IF 193相当于权利要求中的第一网络接ロ部、传输处理部121相当于权利要求中的第一数据包传输处理部、VPN控制部126相当于权利要求中的第一封装执行部、WAN-IF394相当于权利要求中的第三网络接ロ部以及第三网络用接ロ部、VPN-IF 393相当于权利要求中的第四网络接ロ部以及第一网络用接ロ部、LAN-IF 391、392相当于权利要求中的第五网络接ロ部以及第ニ网络用接ロ部、连接监视部323相当于权利要求中的检测部、传输处理部321相当于权利要求中的第二数据包传输处理部以及数据包传输处理部、VPN控制部325相当于权利要求中的第二封装执行部以及封装执行部、第一路由表RTl相当于权利要求中的第一路由表、第二路由表RT2相当于权利要求中的第二路由表、网关装置连接监视部125相当于权利要求中的通知数据包发送部。</p>
    <p>[0095]	A2.动作模式切换处理：</p>
    <p>[0096]	图9是表示在便携式网络连接装置中执行的动作模式切换处理的过程的流程图。在便携式网络连接装置100中，在便携式网络连接装置100与底座200的连接状态发生了变化或者切换开关230的切&#25563;状态发生了变化的情况下，执行动作模式切&#25563;处理。此外，便携式网络连接装置100(传输处理部121)的动作模式在电源接通时刻设定为作为初始设定值的“第一动作模式（桥）”。</p>
    <p>[0097]	传输控制部122控制连接监视部124来判断便携式网络连接装置100是否连接在底座200上（步骤S105)。在便携式网络连接装置100连接在底座200上的情况下（步骤S105 是”），传输控制部122将保存在ROM 171中的未图示的以太网驱动程序加载到RAM172来执行，从而将底座200所具有的LAN控制电路210设为能够动作的状态（步骤S110)。[0098]	传输控制部122控制切换监视部123来判断切换开关230的状态是否为“Internet”的状态（步骤S115)。在切换开关230的状态为“Internet”的状态的情况下(步骤S115 是”），传输控制部122将传输处理部121的动作模式设定（切&#25563;）为第一云力作模式（步骤S120)。另�方面，在开关230的状态为“Lan”的状态的情况下（步骤SI 15 ：“否”)，传输控制部122将传输处理部121的动作模式设定（切&#25563;）为第二动作模式（步骤S125)。</p>
    <p>[0099]	在便携式网络连接装置100连接在底座200上（步骤S105 是”）、切换开关230的状态为“Internet”的状态的情况下，估计为在便携式网络连接装置100中经由底座200来连接了网关装置500(即第一连接方式）。在这种情况下，网关装置500作为路由器而发挥功能，因此使便携式网络连接装置100以作为桥而发挥功能的第一动作模式来进行动作。通过这样，抑制在相同网络内存在多台作为路由器的功能的装置（网关），抑制变得不能正常地进行客户端CLl的经由因特网的通信。</p>
    <p>[0100]	与此相对，在便携式网络连接装置100连接在底座200上（步骤S105 是”）、切 换开关230的状态为“Lan”的状态的情况下，估计为在底座200中连接了客户端、便携式网络连接装置100没有与网关装置500进行连接（即第三连接方式）。在这种情况下，在便携式网络连接装置100所属的网络中不存在路由器，因此使便携式网络连接装置100 (传输处理部121)以作为路由器而发挥功能的第二动作模式进行动作。通过这样，由于在便携式网络连接装置100所属的网络中不存在作为路由器而发挥功能的装置（网关），能够抑制变得无法正常地进行客户端CLl的经由因特网的通信。</p>
    <p>[0101]	在上述的步骤S105中判断为便携式网络连接装置100没有连接在底座200上的情况下（步骤S105 否”)，传输控制部122将传输处理部121的动作模式设定为第二动作模式(步骤S125)。</p>
    <p>[0102]	在便携式网络连接装置100没有连接在底座200上的情况下，估计为便携式网络连接装置100没有与网关装置500进行连接、客户端和便携式网络连接装置100以无线LAN来进行（即第二连接方式）。在这种情况下，在客户端所属的网络中不存在作为路由器而发挥功能的装置，因此在本实施例中，使便携式网络连接装置100 (传输处理部121)以作为路由器而发挥功能的第二动作模式进行动作。此外，在判断为便携式网络连接装置100没有连接在底座200上的情况下，不进行以太网驱动程序的加载。因此，减轻了 CPU 120的处理负担，能够降低未图示的电池的功耗。</p>
    <p>[0103]	A3.数据包传输路径决定处理：</p>
    <p>[0104]	图10是表示在网关装置中执行的数据包传输路径决定处理的过程的流程图。在网关装置500中当应该传输的数据包到达时执行数据包传输路径决定处理。</p>
    <p>[0105]	路径决定部322控制连接监视部323来判断在网关装置500所属的网络（网络NW2)中是否存在便携式网络连接装置100 (步骤S205)。在判断为在网关装置500所属的网络中存在便携式网络连接装置100的情况下（步骤S205 是”)，路径决定部322&#21443;照第一路由表RTl根据数据包的目的地地址来决定路径（输出接ロ）（步骤S210)。</p>
    <p>[0106]	在上述的步骤S205中判断为在网关装置500所属的网络中不存在便携式网络连接装置100的情况下（步骤S205 否”)，路径决定部322&#21443;照第二路由表RT2根据数据包的目的地地址来决定路径（输出接ロ）（步骤S215)。由此，当通过数据包传输路径决定处理来决定数据包的输出接ロ时网关装置500的传输处理部321将数据包传输给&#27770;定的输出接ロ。</p>
    <p>[0107]	图11是示意性地表示第一连接方式中的客户端与服务器之间的数据的交换的说明图。图12是示意性地表示第二连接方式中的客户端与服务器之间的数据的交换的说明图。</p>
    <p>[0108]	如图11所示，在第一连接方式中从客户端CLl向服务器SV的数据包经由便携式网络连接装置100来在网关装置500中接收、在网关装置500中决定路径。此外，便携式网络连接装置100作为桥而进行动作、不作为终端对IP数据包进行处理。</p>
    <p>[0109]	在第一连接方式中如图11所示那样从便携式网络连接装置100输出的存活信号KA能够在网关装置500中进行接收，因此从客户端CLl向服务器SV的数据包的路径使用第一路由表RTl来&#27770;定。具体地说，这样的数据包的目的地地址是服务器SV的IP地址，因此选中图7所示的下段的项，数据包输出到WAN-IF(图6所示的WAN-IF 394)。此外，此时在网关装置500中发送源IP地址从“192. 168. 11. 11”变更为“IPgl”。 </p>
    <p>[0110]	另外，在第一连接方式中从服务器SV向客户端CLl的数据包在网关装置500中进行接收、目的地地址从“IPgl”变更为“192. 168. 11. 11”、并且决定路径。在这种情况下，在路径决定中也使用第一路由表RT1。这里，在第一连接方式中客户端CLl属于与网关装置500相同的网络NW2中，因此在网关装置500的未图示的ARP表中登记了与客户端CLl有关的项。除此之外，这样的数据包的目的地地址是“192. 168. 11. 11”，因此选中图7所示的上段的项，数据包输出到LAN-IF(图6所示的LAN-IF391、392)。因而，数据包经由作为桥而进行动作的便携式网络连接装置100到达客户端CLl。</p>
    <p>[0111]	由此，当保持客户端CLl与服务器SV进行了数据的交&#25563;的状态而将便携式网络连接装置100以及客户端CLl带到位置B时成为图12所示的第二连接方式。</p>
    <p>[0112]	当便携式网络连接装置100从底座200取下时执行图9所示的动作模式切换处理，在步骤S105中判断为便携式网络连接装置100没有连接在底座200上，便携式网络连接装置100作为路由器而进行动作（步骤S125)。</p>
    <p>[0113]	在图12所示的在第二连接方式中，从客户端CLl向服务器SV的数据包在作为路由器而进行动作的便携式网络连接装置100中进行接收并决定路径。这样的数据包的目的地地址是服务器SV的IP地址，因此在图5所示的路由表RT3中选中最下段的项，数据包输出到VPN-IF (图4所示的VPN-IF 193)。因而，该数据包通过隧道路径900而到达网关装置500 的 VPN-IF 393。</p>
    <p>[0114]	在网关装置500中当从VPN-IF 393接收数据包时决定数据包的路径。这里，在第ニ连接方式中如图12所示那样从便携式网络连接装置100输出的存活信号KA没有到达网关装置500。因而，从隧道路径900(VPN-IF 393)接收的数据包的路径使用第二路由表RT2来&#27770;定。具体地说，这样的数据包的目的地地址是服务器SV的IP地址，因此选中图8所示的最下段的项，数据包输出到WAN-IF(图6所示的WAN-IF 394)。此外，此时与第一连接方式同样地在网关装置500中发送源IP地址从“192. 168. 11. 11”变更为“IPgl”。</p>
    <p>[0115]	另外，在第二连接方式中从服务器SV向客户端CLl的数据包在网关装置500中进行接收、目的地地址从“IPgl”变更为“192. 168. 11. 11”、并且决定路径。在这种情况下，在路径决定中也使用第二路由表RT2。这里，在第二连接方式中客户端CLl属于与网关装置500所属的网络（网络NW2)不同的网络（网络NW4)，因此在网关装置500的未图示的ARP表中没有登记与客户端CLl有关的项。除此之外，这样的数据包的目的地地址是“192. 168. 11. 11”，因此选中图8的中段的项，数据包输出到VPN-IF (图6所示的VPN-IF393)。因而，该数据包通过隧道路径900而到达便携式网络连接装置100的VPN-IF 193。</p>
    <p>[0116]	在便携式网络连接装置100中当从VPN-IF 193接收数据包时决定数据包的路径。这里，在第二连接方式中客户端CLl属于与便携式网络连接装置100所属的网络（网络NW4)相同的网络，因此在便携式网络连接装置100的未图示的ARP表中没有登记与客户端CLl有关的项。除此之外，向客户端CLl的数据包的目的地地址是“192. 168. 11. 11”，因此选中图5的最上段的项，数据包传输到LAN-IF (图4所示的LAN-IF 191、192)。因而，数据包经由作为桥（接入点）而进行动作的便携式网络连接装置100到达客户端CU。</p>
    <p>[0117]	这样，在图11所示的第一连接方式以及图12所示的第二连接方式中接收从服务器SV输出的发给客户端CLl的数据包的装置（网关）都是网关装置500。换句话说，在图11所示的第一连接方式以及图12所示的第二连接方式的任一个中从服务器SV向客户端CLl的数据包的目的地IP地址（全局IP地址)都是分配给网关装置500的WAN-IF 394的“IPgl”。因而，在保持客户端CLl与服务器SV进行数据的交&#25563;的状态带出客户端CLl以及便携式网络连接装置100而成为第二连接状态的情况下，网络系统10中的网关的IP地址也不变更，因此服务器SV与客户端CLlと之间的对话没有被切断。</p>
    <p>[0118]	此外，在从图12所示的第二连接方式的状态将便携式网络连接装置100以及客户端CLl带回位置A而变成图11所示的第一连接方式的情况下，在网关装置500中决定从服务器SV向客户端CLl的数据包的传输路径时使用第一路由表RT1。因而，在装置情况下，数据包将到达客户端CLl。</p>
    <p>[0119]	如以上说明那样，在本实施例的网络系统10中，以隧道路径900连接网关装置500与便携式网络连接装置100之间并在网关装置500中作为在相同的网络（网络NW2)内不存在便携式网络连接装置100的情况下，向客户端CLl传输数据包时所使用的路由表而使用具有如数据包传输到隧道路径900那样的项的第二路由表RT2。因而，在从第一连接方式变成第二连接方式的情况下，能够从服务器SV使发给客户端CLl的数据包（目的地IP地址为“IPgl”的数据包）到达客户端CLl。</p>
    <p>[0120]	除此之外，在网关装置500中作为在相同的网络内存在便携式网络连接装置100的情况下向客户端CLl传输数据包时使用的路由表而使用具有如经由LAN-IF191、192来输出数据包那样的项的第一路由表RT1。因而，在从第二连接方式变为第一连接方式的情况下，也能够从服务器SV使发给客户端CLl的数据包（目的地IP地址为“IPgl”的数据包）到达客户端CU。由此，根据网络系统10，在将便携式网络连接装置100从网关装置500所属的网络NW2移动到其它网络NW4、且从其它网络NW4移动到网关装置500所属的网络NW2的情况下，能够抑制客户端CLl与服务器SV之间的对话切断。因而，在从第一连接方式变为第二连接方式的情况下，用户不需要进行再次建立客户端CLl与服务器SV之间的对话的作业。由此，例如在变更了便携式网络连接装置100与客户端CLl的位置的情况下，能够将从服务器SV发布的影像、声音等流数据不被客户端CLl中断而再生。另外，能够抑制由于位置的变更而拖延服务器SV与客户端CLl间的文件传输。</p>
    <p>[0121]	B.变形例：[0122]	本发明不限于上述的实施例、实施方式，能够在不超出其精神的范围内以各种的方式来实施，例如还能够进行如下的变形。</p>
    <p>[0123]	BI.变形例 I :</p>
    <p>[0124]	在上述实施例中，隧道路径900是作为加密协议而使用了 IPSec的隧道路径，但是本发明不限于此。例如，能够采用使用了 PPTP (Point to Point Tunneling Protocol :点对点隧道协议)的隧道路径。另外，例如还能够采用使用在IETF中规定的MobileIP来形成的隧道路径。在采用使用MobileIP来形成的隧道路径的结构中，优选是如下：网关装置500具有作为本地代理（HA)而发挥功能的功能部，便携式网络连接装置100具有作为国外代理（FA)而发挥功能的功能部，客户端CLl具有作为移动结点（MN)而发挥功能的功能部。在这样采用使用MobileIP来形成的隧道路径的情况下，针对从服务器SV发给客户端CLl的数据包由作为本地代理的网关装置500来接受、并经由隧道路径来传输给便携式网络连接装置。然而，从客户端CLl发给服务器SV的数据包从客户端CLl直接发送给服务器SV。 因而，在这种情况下，客户端CLl具有移动通信网等不经由便携式网络连接装置而连接在因特网INT上的路径。此时，在网关装置500的路径决定部322中客户端CLl成为发送源、服务器SV成为目的地的数据包在网关装置500中不接收，因此网关装置500的路径决定部322不对从客户端CLl发给服务器SV的数据包决定路径。</p>
    <p>[0125]	即，能够将具有如下路径决定部的网络系统采用为本发明的网络系统：当一般检测出在网关装置500所属的网络NW2中没有便携式网络连接装置100时作为从网络NW3 (服务器SV)向客户端CLl传输数据包时的路径而决定从网络NW3向隧道路径900 (网络NWl)的路径。</p>
    <p>[0126]	B2.变形例 2:</p>
    <p>[0127]	在上述实施例中，在网关装置500中每当接收到应该传输的数据包时进行数据包传输路径决定处理来进行用于路径&#27770;定的路由表的决定、以及所&#27770;定的路由表中的输出目标接ロ的决定，但是本发明不限于此。例如，用于路径&#27770;定的路由表的决定还能够以与决定路径（输出目标接ロ）的定时不同的定时来执行。具体地说，还能够采用如下结构：与是否接收到应该传输的数据包无关地定期地决定用于路径&#27770;定的路由表，与实施例同样地每当接收到应该传输的数据包时决定路径（输出目标接ロ）。根据这种结构，每当接收到应该传输的数据包时可以不决定路由表，因此能够缩短各数据包的传输所需的期间。</p>
    <p>[0128]	B3.变形例 3:</p>
    <p>[0129]	在上述实施例中，在网关装置500中通过准备互不相同的两个路由表RTl、RT2而使数据包的传输路径在网络NW2中存在便携式网络连接装置100的情况下和网络NW2中不存在便携式网络连接装置100的情况下不同，但是本发明不限于此。例如，还能够使得在准备给网关装置500的路由表设为�个、且将该路由表从在网络NW2中存在便携式网络连接装置100的状态变为不存在的状态的情况下、或者从不存在的状态变为存在的状态的情况下进行重写。具体地说，还能够采用如下结构：在从在网络NW2中存在便携式网络连接装置100的状态变为不存在的状态的情况下，将路由表从图7所示的设定内容重写为图8所示的设定内容，在从不存在的状态变为存在的状态的情况下，从图8所示的设定内容重写为图7所示的设定内容。</p>
    <p>[0130]	B4.变形例 4:[0131]	在上述实施例中，存活信号KA只输出了便携式网络连接装置100以及网关装置500中的便携式网络连接装置100，但是能够代替它而采用都进行输出的结构。通过设为这种结构，便携式网络连接装置100能够根据是否接收到网关装置500所输出的存活信号来判断与自身所属的网络相同的网络中是否存在网关装置500。因而，能够使动作模式切换处理的过程更简&#21336;。即，能够在接收了网关装置500所输出的存活信号的情况下设定为第一动作模式，在不接收存活信号的情况下设定为第二动作模式。另外，通过采用这样的结构能够更准确地判断在与便携式网络连接装置100相同的网络中是否存在网关装置500。</p>
    <p>[0132]	此外，作为如上述那样便携式网络连接装置100以及网关装置500都输出存活信号的结构而例如能够采用VRRP (VirtualRouter Redundancy Protocol :虚拟路由器冗余协议）的结构。具体地说，便携式网络连接装置100以及网关装置500都支持VRRP，由这两个装置来形成虚拟路由器。在VRRP中形成虚拟路由器的装置彼此之间相互定期地发送存活信号（VRRP广告）、并根据分别从其它装置接收的VRRP广告来决定组我主路由器以及反馈路由器中的哪个而进行动作。因而，便携式网络连接装置100以及网关装置500能够利用 定期发送的存活信号来定期地判断各自自身的网络中是否存在另�个装置。另外，通过采用这种结构与作为用于发送通知存在便携式网络连接装置100以及存在网关装置500的数据包的功能部而准备与发送表示VRRP广告消息的数据包的功能部不同的结构相比能够简化便携式网络连接装置100以及网关装置500的结构，能够抑制便携式网络连接装置100以及网关装置500的制造成本。</p>
    <p>[0133]	B5.变形例 5:</p>
    <p>[0134]	在上述实施例中，网关装置500具有转换全局IP地址与私有IP地址的功能（地址转换部324)，但是还能够省略这样的功能。例如，在对构成网络系统10的各装置均分配全局IP地址的情况下，能够省略地址转换功能。另外，例如在还包含隧道路径而对构成网络系统10的各装置均分配私有IP地址的情况下，能够省略地址转换功能。</p>
    <p>[0135]	B6.变形例 6:</p>
    <p>[0136]	在上述实施例中，根据便携式网络连接装置100与底座200之间有无连接以及切换开关230的状态来决定了便携式网络连接装置100(传输处理部121)的动作模式的切换。另外，在上述变形例4中，根据是否接收到网关装置500所输出的存活信号来&#27770;定。然而，本发明不限于这些。例如，能够根据是否接收到除了网关装置500所输出的存活信号之外的任意的信号来决定动作模式。具体地说，例如网关装置500为具有DHCP(DynamicHostConfiguration Protocol :动态主机配置协议）服务器功能的结构则还能够根据是否接收到表示存在DHCP服务器的DHCP0FFER消息、DHCPACK消息来决定动作模式。在这样的结构中，便携式网络连接装置100优选发送用于检索DHCP服务器的DHCPDISC0VER消息。另外，例如网关装置500为具有PPPoE (PPP over Ethernet (注册商标））服务器功能的结构则能够根据是否接收到表示存在PPPoE服务器的PADO (PPPoE ActiveDiscovery Offer)消息来决定动作模式。在这样的结构中，便携式网络连接装置100优选发送用于检索PPPoE服务器的 PADI (PPPoE Active Discovery Initiation :PPPoE 主动发现启动)消息。另外，例如网关装置500是作为UPnP (Universal Plug andPlay :通用即插即用）中的IGD (InternetGateway Device :因特网网关设备）而进行动作的结构则还能够根据是否接收到表示存在I⑶的I⑶广告来决定动作模式。[0137]	B7.变形例 7 ：</p>
    <p>[0138]	在上述实施例中，在网关装置500中根据便携式网络连接装置100所输出的存活信号来判断了在相同的网络（网络NW2)中是否存在便携式网络连接装置100，但是本发明不限于此。例如，能够从网关装置500定期地发送响应请求消息、井根据是否接收到对该响应要求消息的响应消息来判断在相同的网络（网络NW2)中是否存在便携式网络连接装置100。作为这种响应请求消息例如能够利用PING (Packet INternet Groper :分组因特网探测器）数据包。另外，例如还能够采用如下结构：检测便携式网络连接装置100是否连接到底座200，并将有无进行这样的连接通知给网关装置的功能部设置在底座200。在这样的结构中，网关装置500能够根据从底座200通知的表示有无进行连接的信息来判断在相同的网络（网络NW2)中是否存在便携式网络连接装置100。</p>
    <p>[0139]	B8.变形例 8:</p>
    <p>[0140]	在上述实施例中，在第一连接方式中便携式网络连接装置100与网关装置500相互地有线连接，但是还能够代替有线连接而进行无线连接。在该结构中，例如网关装置500 能够作为无线LAN接入点而进行动作、便携式网络连接装置100能够作为无线LAN客户端而进行动作。在该结构中，便携式网络连接装置100能够根据是否接收到网关装置500所输出的信标来设定动作模式。例如还能够在从不接收信标的状态变成接收的状态的情况下设定为第一动作模式、在从接收信标的状态变成不接收的状态的情况下设定为第二动作模式。</p>
    <p>[0141]	B9.变形例 9:</p>
    <p>[0142]	在上述实施例中，隧道路径900在网关装置500以及便携式网络连接装置100启动后继续建立，但是本发明不限于此。例如应该传输的数据包在网关装置500或者便携式网络连接装置100中作为数据包的传输路径而决定了隧道路径900的情况下（即作为输出目标接ロ而决定了 VPN-IF 393、193的情况下），也可以建立隧道路径900。在这种结构中，在从数据包到达起到隧道路径900建立为止的期间中担心数据包在隧道路径900或者便携式网络连接装置100中被作废。然而通过上述层中的重新发送在隧道路径900建立后数据包被准确地传输，因此能够抑制客户端CLl与服务器SV之间的对话切断。此外，在这样的结构中，在便携式网络连接装置100的VPN控制部126、网关装置500的VPN控制部325之间能够省略定期地进行用于建立隧道路径900的处理（认证等），能够抑制CPU 320、120等的资源的消耗。</p>
    <p>[0143]	B10.变形例 10 ：</p>
    <p>[0144]	上述实施例中的网关装置500以及便携式网络连接装置100的结构不过是�个例子，能够进行各种变形。例如在上述实施例中，便携式网络连接装置100的底座连接接ロ180与底座200的连接接ロ 280按照USB标准进行信息的交&#25563;，但是便携式网络连接装置100与底座200之间的信息的交换也可以按照与USB不同的其它标准来进行。另外，便携式网络连接装置100与底座200分开而构成，但是还能够代替它而构成为一体。</p>
    <p>[0145]	另外，在上述实施例中，无线LAN控制电路350、174、无线WAN控制电路175不限于遵循IEEE802. lla/b/g的无线LAN，也可以是通过将来可能使用的所以无线LAN来进行无线通信的无线通信接ロ。另外，移动通信控制电路176不限于遵循3G/HSPA的移动通信，例如也可以是LTE、次世代移动WiMAX (IEEE802. 16m)、下一代PHS (XGP ：eXtendedGlobalPlatform)这样的将来可能使用的所有移动通信来进行无线通信的无线通信接ロ。</p>
    <p>[0146]	另外，在上述实施例中，网关装置500使与因特网INT (网络NW3)的连接为使用了有线LAN控制部360的有线连接，但是还能够代替有线连接而采用无线连接。例如，还能够采用如下结构：采用网关装置500与便携式网络连接装置100同样地具备移动通信网控制电路的结构、并使用这样的移动通信网控制电路经由移动通信网来连接在因特网INT上。</p>
    <p>[0147]	另外，在上述实施例中，便携式网络连接装置100包含无线LAN控制电路174、无线WAN控制电路175以及移动通信控制电路176的三种无线通信接ロ，但是便携式网络连接装置100既可以只包含三种无线通信接口中的�种或者两种，便携式网络连接装置100也可以包含四种以上的无线通信接ロ。或者便携式网络连接装置100也可以包含多个相同的种类的无线通信接ロ。另外，本发明不限于无线LAN、移动通信，能够应用在规定的无线通信网络中的所有无线通信中。另外，构成网络系统10的各结构要素的数量不限于由各实施例表示的数量。例如，便携式网络连接装置不限于一台，还能够设为任意的台数。另外，例如各位置A、B、C中的客户端的台数也能够设为任意的台数。 </p>
    <p>[0148]	另外，在上述实施例中既可以将通过硬件来实现的结构的一部分替换为软件，也可以相反地将通过软件来实现的结构的一部分替换为硬件。另外，在本发明的功能的一部分或者全部由软件来实现的情况下，该软件（计算机程序）能够以保存在计算机可读取的记录介质中的形式来提供。在该发明中，“计算机可读取的记录介质”不限于如软盘、CD-ROM那样的便携式的记录介质，还包含各种的RAM、ROM等计算机内的内部存储装置、硬盘等固定在计算机中的外部存储装置。即，“计算机可读取的记录介质”具有包含不是将数据临时保存而是能够固定的任意的记录介质的广泛意义。</p>
    <p>[0149]	另外，作为上述实施例中的客户端CLf CL3除了个人计算机之外还能够应用游戏机、PDA (Personal Digital Assistance :个人数字助理）、便携式电话、便携式音乐播放器、图形输入终端等、能够连接在网络上的各种的装置。</p>
    <p>[0150]	以上&#21443;照例示的实施例详细地说明了本申请发明。但是，本申请发明不限于以上说明的实施例、结构。并且，本申请发明包含各种变形、均等的结构。而且，公开的发明的各种要素以各种组合以及结构来公开，但是这些是例示的，各要素既可以更多、也可以更少、或者要素也可以是�个。这些方式包含在本申请发明的范围内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101002437A?cl=zh">CN101002437A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2004年8月13日</td><td class="patent-data-table-td patent-date-value">2007年7月18日</td><td class="patent-data-table-td ">松下电器产业株式会社</td><td class="patent-data-table-td ">在应用点到多点多协议标记交换的网络中向移动主机提供移动性的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101199166A?cl=zh">CN101199166A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2006年5月2日</td><td class="patent-data-table-td patent-date-value">2008年6月11日</td><td class="patent-data-table-td ">艾利森电话股份有限公司</td><td class="patent-data-table-td ">在宽带接入中的操作员工作室选择</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20080165786">US20080165786</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年1月10日</td><td class="patent-data-table-td patent-date-value">2008年7月10日</td><td class="patent-data-table-td ">Motorola, Inc.</td><td class="patent-data-table-td ">Method and device for transmitting data packets</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102984095A?cl=zh">CN102984095A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年12月14日</td><td class="patent-data-table-td patent-date-value">2013年3月20日</td><td class="patent-data-table-td ">深圳市共进电子股份有限公司</td><td class="patent-data-table-td ">一种报文传输系统、交换设备及报文传输方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029120000">H04L29/12</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012460000">H04L12/46</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L2212/00">H04L2212/00</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/4633">H04L12/4633</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/66">H04L12/66</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=j9-xBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04W40/20">H04W40/20</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2012年12月5日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年1月30日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2015年9月9日</td><td class="patent-data-table-td ">C05</td><td class="patent-data-table-td ">Deemed withdrawal (patent law before 1993)</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/4e9d5cbac759babb32c2/CN102811165A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_1ec17bec5b1e6ba0eab577be28b6afb9.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F_%E7%BD%91%E5%85%B3%E8%A3%85%E7%BD%AE%E4%BB%A5%E5%8F%8A%E8%B7%AF%E5%BE%84%E5%86%B3.pdf?id=j9-xBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1jIHFkqvjMU2DE6vKLNzc15TjzEQ"},"sample_url":"https://www.google.com/patents/reader?id=j9-xBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>