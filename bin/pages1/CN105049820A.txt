<!DOCTYPE html><html><head><title>专利 CN105049820A - 图像处理设备、摄像设备和图像处理方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5bd24152bf5a1e342ae546da267fae0b/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5bd24152bf5a1e342ae546da267fae0b__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="图像处理设备、摄像设备和图像处理方法"><meta name="DC.contributor" content="山中阳平" scheme="inventor"><meta name="DC.contributor" content="佳能株式会社" scheme="assignee"><meta name="DC.date" content="2015-4-27" scheme="dateSubmitted"><meta name="DC.description" content="提供至少一种图像处理设备、摄像设备和图像处理方法。所述图像处理设备允许对彩色图像信号高精度地进行去马赛克处理。所述至少一种图像处理设备对于马赛克图像信号进行多个规定方向中各方向上的插值处理，并且对于经过了所述插值处理的图像信号的多个像素中的各个，获取表示水平方向和垂直方向各方向上的相关性的评价值。如果满足预定条件，则基于周边像素的评价值校正至少一个关注像素的评价值，其中，所述预定条件包括所述至少一个关注像素是孤立点这一条件。然后，基于校正后的评价值，输出对所述至少一个关注像素进行插值之后的图像信号。"><meta name="DC.date" content="2015-11-11"><meta name="citation_patent_publication_number" content="CN:105049820:A"><meta name="citation_patent_application_number" content="CN:201510204878"><link rel="canonical" href="https://www.google.com/patents/CN105049820A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN105049820A?cl=zh"/><meta name="title" content="专利 CN105049820A - 图像处理设备、摄像设备和图像处理方法"/><meta name="description" content="提供至少一种图像处理设备、摄像设备和图像处理方法。所述图像处理设备允许对彩色图像信号高精度地进行去马赛克处理。所述至少一种图像处理设备对于马赛克图像信号进行多个规定方向中各方向上的插值处理，并且对于经过了所述插值处理的图像信号的多个像素中的各个，获取表示水平方向和垂直方向各方向上的相关性的评价值。如果满足预定条件，则基于周边像素的评价值校正至少一个关注像素的评价值，其中，所述预定条件包括所述至少一个关注像素是孤立点这一条件。然后，基于校正后的评价值，输出对所述至少一个关注像素进行插值之后的图像信号。"/><meta property="og:title" content="专利 CN105049820A - 图像处理设备、摄像设备和图像处理方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?hl=zh-CN&tbm=isch&source=og&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?hl=zh-CN&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?hl=zh-CN&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN105049820A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN105049820A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN105049820A&amp;usg=AFQjCNGT9jQM6yBHoOl0U_8EvzkvSSFZRA" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/da3d27ee62de05728a2f/CN105049820A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/da3d27ee62de05728a2f/CN105049820A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN105049820A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN105049820A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN105049820A?cl=zh" style="display:none"><span itemprop="description">提供至少一种图像处理设备、摄像设备和图像处理方法。所述图像处理设备允许对彩色图像信号高精度地进行去马赛克处理。所述至少一种图像处理设备对于马赛克图像信号进行多个规定方向中各方向上的插值处理，并且对于经...</span><span itemprop="url">https://www.google.com/patents/CN105049820A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN105049820A - 图像处理设备、摄像设备和图像处理方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN105049820A - 图像处理设备、摄像设备和图像处理方法" title="专利 CN105049820A - 图像处理设备、摄像设备和图像处理方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN105049820 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201510204878</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2015年11月11日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2015年4月27日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2014年4月25日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/US20150310588?hl=zh-CN&amp;cl=zh">US20150310588</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201510204878.1, </span><span class="patent-bibdata-value">CN 105049820 A, </span><span class="patent-bibdata-value">CN 105049820A, </span><span class="patent-bibdata-value">CN 201510204878, </span><span class="patent-bibdata-value">CN-A-105049820, </span><span class="patent-bibdata-value">CN105049820 A, </span><span class="patent-bibdata-value">CN105049820A, </span><span class="patent-bibdata-value">CN201510204878, </span><span class="patent-bibdata-value">CN201510204878.1</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B1%B1%E4%B8%AD%E9%98%B3%E5%B9%B3%22">山中阳平</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%BD%B3%E8%83%BD%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%22">佳能株式会社</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN105049820A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN105049820A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN105049820A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#classifications">分类</a> (5),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201510204878&amp;usg=AFQjCNHKtOYfRtReDVY1MMz7EzdoAU0rWA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D105049820A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHRa7KvcOJtHiS0VZHdX9UCNMtnHQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT164317208" lang="ZH" load-source="patent-office">图像处理设备、摄像设备和图像处理方法</invention-title>
    </span><br><span class="patent-number">CN 105049820 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA165031144" lang="ZH" load-source="patent-office">
    <div class="abstract">提供至少一种图像处理设备、摄像设备和图像处理方法。所述图像处理设备允许对彩色图像信号高精度地进行去马赛克处理。所述至少一种图像处理设备对于马赛克图像信号进行多个规定方向中各方向上的插值处理，并且对于经过了所述插值处理的图像信号的多个像素中的各个，获取表示水平方向和垂直方向各方向上的相关性的评价值。如果满足预定条件，则基于周边像素的评价值校正至少一个关注像素的评价值，其中，所述预定条件包括所述至少一个关注像素是孤立点这一条件。然后，基于校正后的评价值，输出对所述至少一个关注像素进行插值之后的图像信号。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(12)</span></span></div><div class="patent-text"><div mxw-id="PCLM89317808" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1. 一种图像处理设备，其特征在于，包括：  插值单元，用于对摄像装置所生成的马赛克图像信号进行多个规定方向中的各方向上 的插值处理，其中，所述摄像装置针对各像素输出与多个颜色滤波器的颜色中的一种颜色 相对应的图像信号；  评价单元，用于针对经过了所述插值单元的所述插值处理的图像信号的各像素，获取 表示所述多个规定方向的各方向上的相关性的评价值；以及  输出单元，用于在至少一个关注像素满足预定条件的情况下，基于所述至少一个关注 像素的周边像素的评价值，校正所述至少一个关注像素的评价值，并且基于校正后的评价 值输出对所述至少一个关注像素进行插值之后的图像信号，  其中，所述预定条件包括所述至少一个关注像素是孤立点这一条件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 根据权利要求1所述的图像处理设备，其中，还包括孤立点判断单元，所述孤立点判 断单元用于判断所述至少一个关注像素是否是孤立点。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 根据权利要求2所述的图像处理设备，其中， 在判断为所述至少一个关注像素的评价值和所述周边像素的评价值之间的相关性低、 或者不存在相关性的情况下，所述孤立点判断单元判断为所述至少一个关注像素是孤立  点。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 根据权利要求2所述的图像处理设备，其中， 所述孤立点判断单元比较所述规定方向的各方向上的评价值的大小，并且在所述至少 一个关注像素在第一规定方向上的评价值高于在第二规定方向上的评价值、并且所述周边 像素中阈值以上数量的像素在所述第二规定方向上的评价值高于在所述第一规定方向上 的评价值的情况下，判断为所述至少一个关注像素是孤立点。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 根据权利要求1所述的图像处理设备，其中， 所述预定条件还包括以下条件：所述至少一个关注像素的评价值和所述周边像素的评 价值在所述多个规定方向的所有方向上都不存在相关性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6. 根据权利要求5所述的图像处理设备，其中，还包括相关性判断单元，所述相关性判 断单元用于判断所述至少一个关注像素的评价值和所述周边像素的评价值在所述多个规 定方向中的一个方向上是否存在相关性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7. 根据权利要求6所述的图像处理设备，其中， 在所述多个规定方向中的一个方向上，在第一规定方向上的评价值高于在第二规定方 向上的评价值的连续像素的数量在阈值以上的情况下，所述相关性判断单元判断为在所述 多个规定方向的所述一个方向上存在相关性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8. 根据权利要求2所述的图像处理设备，其中， 在所述至少一个关注像素满足所述预定条件的情况下，所述输出单元基于所述周边像 素中未被所述孤立点判断单元判断为孤立点的像素的评价值，校正所述至少一个关注像素 的评价值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9. 根据权利要求8所述的图像处理设备，其中， 所述输出单元通过使用所述周边像素中未被所述孤立点判断单元判断为孤立点的像 素的评价值的中央值或者平均值，校正所述至少一个关注像素的评价值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 根据权利要求1所述的图像处理设备，其中， 所述输出单元比较所述至少一个关注像素在所述多个规定方向上的评价值，并且输出 经过了所述插值单元在所述多个规定方向上的所述插值处理的图像信号中的、经过了评价 值较高的规定方向上的所述插值处理的图像信号。</div>
    </div>
    </div> <div class="claim"> <div num="11" class="claim">
      <div class="claim-text">11. 一种摄像设备，其特征在于，包括： 摄像装置，用于针对各像素输出与多个颜色滤波器的颜色中的一种颜色相对应的图像 信号；  插值单元，用于对所述摄像装置所生成的马赛克图像信号进行多个规定方向中的各方 向上的插值处理；  评价单元，用于针对经过了所述插值单元的所述插值处理的图像信号的各像素，获取 表示所述多个规定方向的各方向上的相关性的评价值；以及  输出单元，用于在至少一个关注像素满足预定条件的情况下，基于所述至少一个关注 像素的周边像素的评价值，校正所述至少一个关注像素的评价值，并且基于校正后的评价 值输出对所述至少一个关注像素进行插值之后的图像信号，  其中，所述预定条件包括所述至少一个关注像素是孤立点这一条件。</div>
    </div>
    </div> <div class="claim"> <div num="12" class="claim">
      <div class="claim-text">12. -种图像处理方法，其特征在于，包括以下步骤： 对摄像装置所生成的马赛克图像信号进行多个规定方向中的各方向上的插值处理，其 中，所述摄像装置针对各像素输出与多个颜色滤波器的颜色中的一种颜色相对应的图像信 号；  针对经过了所述插值处理的图像信号的各像素，获取表示所述多个规定方向的各方向 上的相关性的评价值；以及  在至少一个关注像素满足预定条件的情况下，基于所述至少一个关注像素的周边像素 的评价值，校正所述至少一个关注像素的评价值，并且基于校正后的评价值输出对所述至 少一个关注像素进行插值之后的图像信号，  其中，所述预定条件包括所述至少一个关注像素是孤立点这一条件。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES97339584" lang="ZH" load-source="patent-office" class="description">
    <invention-title lang="ZH">图像处理设备、摄像设备和图像处理方法</invention-title>
    <technical-field>
      <p>技术领域</p>
      <p>[0001] 本发明涉及图像处理，尤其涉及一种用于通过对彩色图像信号中各像素丢失的颜 色信号进行插值来进行去马赛克的技术。</p>
    </technical-field>
    <background-art>
      <p>背景技术</p>
      <p>[0002] 过去，已将具有如图17所示的Bayer(拜耳）模式的颜色滤波器应用于诸如(XD 和CMOS传感器等的单板摄像装置。在这种情况下，这类颜色滤波器通常可以是用于三原 色-红色、绿色和蓝色、或者三补色-青色、品红色和黄色的滤波器。</p>
      <p>[0003] 然而，由于通过使用Bayer模式可以获取与各像素中的一种颜色相对应的信号， 因而进行用于对各像素中丢失的其它两种颜色的颜色信号进行去马赛克（插值）的处理。 过去已知有许多去马赛克方法，并且基本的去马赛克方法可以包括例如双线性插值和双三 次插值。</p>
      <p>[0004] 尽管通过双线性插值或者双三次插值，从包含许多低频成分的图像可以获取良好 的插值结果，但是在包含高频成分的图像中，可能发生实际被摄体中不存在的、被称为伪分 辨率和伪色（颜色摩尔纹）的线和颜色。这类伪分辨率和伪色可能是由于通过使用与被摄 体图像原本所具有的边缘方向不同的方向上的像素进行去马赛克而发生的。</p>
      <p>[0005] 因此，提出了一种通过使用沿被摄体图像原本所具有的边缘方向的像素进行去马 赛克，可以有效抑制伪分辨率和伪色的发生的方法。这类使用沿边缘方向的像素的去马赛 克方法大体可被分成两种方法。日本特开2008-035470号提出了一种方法，该方法包括通 过使用周围像素来识别边缘方向、以及进行沿边缘的插值，而不进行跨边缘的插值。</p>
      <p>[0006] 日本特开2008-035470号公开第二种插值方法，该插值方法包括首先在各方向上 进行插值以生成数个类型的插值结果，然后判断和选择对于插值所使用的哪一方向可以提 供适当结果。可以基于表示作为包括所要进行插值的像素的周边像素的相邻一致性或者均 匀性的周边相似性的评价值，判断插值方向的适当性。可以确定具有高一致性的方向，并且 可以选择该方向作为边缘方向。</p>
      <p>[0007] 然而，日本特开2008-035470号所述方法未能提供表示分辨率极限附近的一致性 或者均匀性的适当评价值，其中，在分辨率极限附近，图像传感器的像素间距和被摄体的细 小部分的间距接近或者一致。因此，可能不能选择适当插值方向，并且因此可能发生伪分辨 率。</p>
    </background-art>
    <disclosure>
      <p>发明内容</p>
      <p>[0008] 本发明的一个以上的实施例的一个方面，提供至少一种图像处理设备，其包括：插 值单元，用于对摄像装置所生成的马赛克图像信号进行多个规定方向中的各方向上的插值 处理，其中，所述摄像装置针对各像素输出与多个颜色滤波器的颜色中的一种颜色相对应 的图像信号；评价单元，用于针对经过了所述插值单元的所述插值处理的图像信号的各像 素，获取表示所述多个规定方向的各方向上的相关性的评价值；以及输出单元，用于在至少 一个关注像素满足预定条件的情况下，基于所述至少一个关注像素的周边像素的评价值， 校正所述至少一个关注像素的评价值，并且基于校正后的评价值输出对所述至少一个关注 像素进行插值之后的图像信号，其中，所述预定条件包括所述至少一个关注像素是孤立点 这一条件。</p>
      <p>[0009] 本发明的一个以上的实施例的一个方面，提供一种摄像设备，其包括：摄像装置， 用于针对各像素输出与多个颜色滤波器的颜色中的一种颜色相对应的图像信号；插值单 元，用于对所述摄像装置所生成的马赛克图像信号进行多个规定方向中的各方向上的插值 处理；评价单元，用于针对经过了所述插值单元的所述插值处理的图像信号的各像素，获取 表示所述多个规定方向的各方向上的相关性的评价值；以及输出单元，用于在至少一个关 注像素满足预定条件的情况下，基于所述至少一个关注像素的周边像素的评价值，校正所 述至少一个关注像素的评价值，并且基于校正后的评价值输出对所述至少一个关注像素进 行插值之后的图像信号，其中，所述预定条件包括所述至少一个关注像素是孤立点这一条 件。</p>
      <p>[0010] 本发明的一个以上的实施例的一个方面，提供一种图像处理方法，其包括以下步 骤：对摄像装置所生成的马赛克图像信号进行多个规定方向中的各方向上的插值处理，其 中，所述摄像装置针对各像素输出与多个颜色滤波器的颜色中的一种颜色相对应的图像信 号；针对经过了所述插值处理的图像信号的各像素，获取表示所述多个规定方向的各方向 上的相关性的评价值；以及在至少一个关注像素满足预定条件的情况下，基于所述至少一 个关注像素的周边像素的评价值，校正所述至少一个关注像素的评价值，并且基于校正后 的评价值输出对所述至少一个关注像素进行插值之后的图像信号，其中，所述预定条件包 括所述至少一个关注像素是孤立点这一条件。</p>
      <p>[0011] 根据本发明的其它方面，这里说明一种以上的图像处理设备、一种以上的摄像设 备、一种以上的图像处理方法、一个以上的程序和一种以上的存储介质。通过以下参考附图 对典型实施例的说明，本发明的其它特征将变得明显。</p>
    </disclosure>
    <description-of-drawings>
      <p>附图说明</p>
      <p>[0012] 图1是示出至少根据第一和第二实施例的摄像设备的示意性结构的框图。</p>
      <p>[0013]图2是示出至少根据第一和第二实施例的摄像设备种的去马赛克单元的结构的 框图。</p>
      <p>[0014] 图3是示出图2中去马赛克单元中的H方向插值单元的至少一个实施例和V方向 插值单元的至少一个实施例的结构的框图。</p>
      <p>[0015] 图4是示出用于说明用于各方向的插值处理的Bayer模式的像素配置结构的图。</p>
      <p>[0016] 图5是示出评价值计算处理的至少一个实施例的流程图。</p>
      <p>[0017] 图6是示出用于说明评价值计算处理的至少一个实施例的3X3像素区域的图。</p>
      <p>[0018] 图7是示出在关注像素具有H方向评价值一V方向评价值&gt;0的关系的情况下的 孤立点判断处理的实施例的流程图。</p>
      <p>[0019] 图8是示出在关注像素具有H方向评价值一V方向评价值〈0的情况下的孤立点 判断处理的实施例的流程图。</p>
      <p>[0020] 图9是示出根据第一典型实施例处理具有H方向评价值的像素的相关性判断处理 的实施例的流程图。</p>
      <p>[0021] 图10是用于说明处理具有H方向评价值的像素的相关性判断处理的实施例的图。</p>
      <p>[0022] 图11是示出孤立点校正处理的实施例的流程图。</p>
      <p>[0023] 图12是用于说明孤立点校正处理的实施例中的校正的例子的图。</p>
      <p>[0024] 图13是示出图像生成处理的实施例的流程图。</p>
      <p>[0025]图14是示出根据第二典型实施例处理具有H方向评价值的像素的相关性判断处 理的实施例的流程图。</p>
      <p>[0026]图15是示出根据第二典型实施例处理具有V方向评价值的像素的相关性判断处 理的实施例的流程图。</p>
      <p>[0027] 图16示出模板映射示例。</p>
      <p>[0028] 图17示出Bayer模式的像素配置结构。</p>
    </description-of-drawings>
    <mode-for-invention>
      <p>具体实施方式</p>
      <p>[0029] 参考附图详细说明本发明的典型实施例。</p>
      <p>[0030] 第一典铟实施例</p>
      <p>[0031] 图1是示出根据本发明第一典型实施例的图像处理设备的示意性结构的框图。在 下面的说明中，图像处理设备可以是诸如数字照相机和数字摄像机等的摄像设备。</p>
      <p>[0032] 反映被摄体或者物体的光学图像（被摄体图像或者物体图像）通过摄像镜头101 形成在摄像装置102上，并且进行光电转换。</p>
      <p>[0033] 摄像装置102被配置为包括普通三原色滤波器的单板摄像装置。三原色滤波器用 于分别具有约650nm、550nm和450nm的透射主波长带的R(红色）、G(绿色）和B(蓝色）， 并且可以生成与三原色中的各波长带相对应的颜色层。</p>
      <p>[0034] 单板彩色摄像装置具有与多种颜色相对应的颜色滤波器。如图17所示，这些颜色 滤波器可以对于各像素在空间上配置。在各像素中，通过具有如图17所示的结构的颜色滤 波器，仅可以获取单个颜色层上的光强度。因此，摄像装置102输出马赛克图像信号，S卩，各 像素中的三原色中的两种颜色丢失的图像信号。模拟-数字（A/D)转换单元103将作为来 自摄像装置102的模拟电压所输出的马赛克图像信号转换成彩色数字图像数据。</p>
      <p>[0035] 白平衡单元104进行白平衡处理。更具体地，对各R、G和B应用增益，从而使得被 认为是白色的区域中的R、G和B可以一致。</p>
      <p>[0036] 去马赛克单元105对各像素中的三原色内丢失的两种颜色的彩色马赛克图像数 据进行插值，以生成所有像素中具有所有R、G、B彩色图像数据的彩色图像。</p>
      <p>[0037] 各像素中的彩色图像数据可以经过矩阵变换单元106的矩阵变换处理，并且可以 经过伽马转换单元107的伽马校正处理。结果，生成基本彩色图像数据。</p>
      <p>[0038] 颜色调整单元108进行用于提高基本彩色图像数据的图像表现或者质量的处理。 例如，颜色调整单元108可以进行诸如降噪、颜色饱和度强调、色相校正、边缘增强等的颜 色调整处理。压缩单元109通过诸如转变成JPEG格式的方法来压缩颜色调整后的彩色图 像数据，以降低记录时的数据大小。</p>
      <p>[0039]包括摄像装置102到压缩单元109的装置所进行的这些处理操作由控制单元111 通过总线113进行控制。对于该控制，控制单元111可以根据需要使用存储器112。通过 压缩单元109所压缩的数字图像数据可以在控制单元111的控制下通过记录或者存储单元 110记录或者存储在诸如闪存等的记录介质或者存储介质中。</p>
      <p>[0040] 接着参考图2,说明去马赛克单元105的去马赛克处理。去马赛克单元105首先通 过对一个关注像素（或者至少一个关注像素，例如，当对于多个像素中的各像素（作为各迭 代处理中的关注像素）进行处理时，可以处理至少一个关注像素或者多个关注像素）使用 其周围像素或者周边像素，在多个规定方向上进行插值处理，然后进行方向选择，使得生成 作为对于各像素的插值处理结果的R、G、B三原色的彩色图像信号（例如，可以逐像素迭代 进行插值）。</p>
      <p>[0041] 更具体地，H方向插值单元202和V方向插值单元203对输入的Bayer图像数据 201在水平（H)方向和垂直（V)方向上丢失的颜色的像素数据进行插值，以生成各像素的H 方向和V方向上的R、G、B图像数据。接着，H方向方差计算单元204和V方向方差计算单 元205根据在各像素的水平方向和垂直方向上的插值之后的各像素的R、G、B图像数据，计 算各像素各自的方差。</p>
      <p>[0042] 评价值计算单元206根据水平方向和垂直方向的方差，计算各方向的评价值。基 于来自评价值计算单元206的输出结果，孤立点判断单元207对于各像素进行评价值的孤 立点判断。在孤立点判断之后，相关性判断单元208进行评价值的相关性判断处理，并且孤 立点校正单元209通过使用评价值的孤立点判断和相关性判断的结果来校正孤立点。</p>
      <p>[0043]图像生成单元210将水平方向的最终评价值和垂直方向的最终评价值进行比较， 并且从水平方向和垂直方向中选择具有较高评价值的方向。然后，图像生成单元210基于 对于所选择的方向上的插值处理后的R、G、B图像数据，生成最终的插值图像数据，并且输 出插值后的RGB图像数据211作为去马赛克数据。</p>
      <p>[0044] 参考图3,说明通过H方向插值单元202的至少一个实施例和V方向插值单元203 的至少一个实施例对于相应方向所进行的插值处理。如图3所示，H方向插值单元202具 有H方向G插值单元202a和H方向RB插值单元202b，并且V方向插值单元203具有V方 向G插值单元203a和V方向RB插值单元203b。在H方向插值单元202中，H方向G插值 单元202a首先对高频带中的G信号（数据）进行插值，并且H方向RB插值单元202b接着 对R、B数据进行插值。另外，在V方向插值单元203中，V方向G插值单元203a首先对高 频带中的G数据进行插值，并且V方向RB插值单元203b接着对R、B数据进行插值。结果， H方向插值单元202生成H方向RGB图像数据202c，并且V方向插值单元203生成V方向 RGB图像数据203c。</p>
      <p>[0045] 接着参考图4,说明具体插值方法。对于G颜色的插值，当关注像素是与G颜色滤 波器（或者，G滤波器颜色）相关联的像素时，直接输出所述像素的G数据（下面示出的公 式（1))。为了对与R颜色滤波器（或者，R滤波器颜色）相关联的像素和/或者与B颜色滤 波器（或者，B滤波器颜色）相关联的像素的G颜色进行插值，对于H方向和V方向分别使 用公式⑵和公式⑶来计算相应的插值数据。为了方便，公式（1)、⑵和（3)中的G33、 G34、G43、G44对应于图4所示的像素代码或者符号（在下面的说明中进一步进行说明）。 例如，G33表示图4中具有R33数据的像素（例如，像素R33)中的插值之后的G数据，并且 G44表示图4中具有B44数据的像素（例如，像素B44)中的插值之后的G数据，等等。</p>
      <p>
        </p> <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN105049820A/CN105049820AD00081.png"> <img id="idf0001" file="CN105049820AD00081.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN105049820A/CN105049820AD00081.png" class="patent-full-image" alt="Figure CN105049820AD00081"> </a> </div>
      
      <p>[0049] 对于R颜色（或者，R数据）的插值，当关注像素是与R颜色滤波器（或者，R滤波 器颜色）相关联的像素时，直接输出像素的R数据（下面示出的公式（4))。对于与G颜色 滤波器（或者，G滤波器颜色）相关联的像素的R颜色（或者，R数据）的插值，通过使用下 面示出的公式（5)来计算插值数据。对于与B颜色滤波器（或者，B滤波器颜色）相关联 的像素的R颜色（或者，R数据）的插值，通过使用下面的公式（6)来计算插值数据。对于 R颜色（或者，R数据）的插值，在H方向和V方向使用相同公式。</p>
      <p>[0050] 对于B颜色（或者，B数据）的插值，使用与对于R颜色（或者，R数据）的插值相 同或者相似的方案或者方法。</p>
      <p>[0051] R33 =R33 (4)</p>
      <p>[0052]</p>
      <p>
        </p> <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN105049820A/CN105049820AD00082.png"> <img id="idf0002" file="CN105049820AD00082.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN105049820A/CN105049820AD00082.png" class="patent-full-image" alt="Figure CN105049820AD00082"> </a> </div>
      
      <p>[0053] R44 = ((R33-G33)+(R35-G35)+(R53-G53)+(R55-G55))/4+G44 (6)</p>
      <p>[0054] 接着参考图5的流程图，说明评价值计算处理的实施例。</p>
      <p>[0055] 图2中的H方向方差计算单元204将通过对各像素中丢失的颜色进行插值所获取 的图3中的H方向RGB图像数据202c，转换成预定颜色空间的颜色信号（值）（S501)。根据 本实施例，为了计算作为表示均匀性的程度的色差的方差，使用G、R-G和B-G颜色空间。在 这种情况下，代替G、R_G和B-G颜色空间，可以使用L*a*b*均匀颜色空间。然而，向L*a*b* 值的转换处理，可能涉及大量计算，因而代替L*，可以使用G信号，并且代替a*和b*，可以 使用R-G、B-G作为色差信号。</p>
      <p>[0056] 接着，H方向方差计算单元204计算G、R_G和B-G信号各自的方差（S502)。这里，对 于该计算，使用以关注像素为中心的3X3区域中的像素。尽管根据本实施例，使用3X3区 域中的像素，但是可以使用诸如5X5或者7X7区域等的、具有不同大小的区域中的像素。 然而，本发明的实施例不局限于此。代替通过使用包括关注像素和邻接的8个像素的总共9 个像素来计算方差，可以使用如图6所示的在H方向上排列的三个像素hll~hl3、三个像 素h21~h23和三个像素h31~h33中各自的三个像素。假定G的三个方差是� S12、� S22  和�e32,并且将它们中的最高方差值�eh2定义为G的方差值。对于R-G信号和B-G信号可 以进行与G信号的方差的计算相同的处理，以获取R-G方差值�Reh2和B-G方差值� Beh2。</p>
      <p>[0057] 与H方向一样，V方向方差计算单元205使用在V方向上排列的三个像素hll~ h31、三个像素hl2~h32和三个像素hl3~h33中各自的三个像素，来获取G方差值� Sv2、 R-G方差值 �RGv2和B-G方差值。b(S504 ~S506)。</p>
      <p>[0058] 评价值计算单元206计算各方向的评价值。通过使用下面的公式（7)计算H方向 上的方差（S507)。与H方向一样，V方向方差计算单元205通过使用公式（8)，计算V方向 上的方差。</p>
      <p>[0059] �h2= � Gh2+�RGh2+�Bch2 (7)</p>
      <p>[0060] ov2=oGv2+oRGv2+oBGv2 (8)</p>
      <p>[0061] H方向方差计算单元204和评价值计算单元206对图3中H方向上与RGB图像数 据202c相关联的所有像素，进行S501~S503的处理。V方向方差计算单元205和评价值计 算单元206对图3中V方向上与RGB图像数据203c相关联的所有像素，进行S504~S506 的处理。</p>
      <p>[0062]接着，评价值计算单元206通过使用下面的公式（9)，计算H方向和V方向的评价 值。</p>
      <p>
        </p> <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN105049820A/CN105049820AD00091.png"> <img id="idf0003" file="CN105049820AD00091.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN105049820A/CN105049820AD00091.png" class="patent-full-image" alt="Figure CN105049820AD00091"> </a> </div>
      
      <p>[0063]</p>
      <p>[0064]</p>
      <p>[0065] 这里，Ch和Cv表示基于方差的评价值。A是正的常数。</p>
      <p>[0066] 通过进行上述处理，对于各像素计算评价值Ch或者Cv，并且作为结果，生成具有 这些评价值的二维平面。</p>
      <p>[0067] 接着参考图7的流程图，说明孤立点判断处理的实施例。</p>
      <p>[0068] 孤立点判断单元207基于通过评价值计算单元206所计算出的各方向上的评价 值，判断评价值的孤立点。下面，说明在关注像素满足关系方向评价值一V方向评价值 &gt;�的情况下的孤立点判断处理。孤立点判断单元207对于关注像素和周边像素中的各个， 计算H方向评价值一V方向评价值（S701)。通过使用以关注像素为中心的3X3区域中的 像素来进行该计算。尽管根据本实施例，使用3X3区域，但是本发明的实施例不局限于此。 例如，可以使用5X5或者7X7区域中的像素。根据该计算结果，如果关注像素满足关系：H 方向评价值一V方向评价值&gt;0,则在关注像素的周边的像素中，计数具有关系：H方向评价 值一V方向评价值〈0的像素的数量（S702)。将计数的数量定义为Vnum，并且判断Vnum是 否等于或者高于预定阈值（S703)。结果，如果Vnum等于或者高于预定阈值，则判断为关注 像素是孤立点（S704)。孤立点判断单元207对所有像素进行S701~S704的处理。如图8 所示，如果关注像素满足关系：H方向评价值一V方向评价值〈0,则孤立点判断单元207计 数周边像素中满足关系：H方向评价值一V方向评价值&gt;0的像素的数量（S801~S803)。 如果该计数结果Hnum等于或者高于预定阈值，则将关注像素判断为孤立点（S804)。</p>
      <p>[0069] 接着参考图9的流程图，说明相关性判断处理的实施例。在进行了孤立点判断处 理之后，相关性判断单元208基于各方向的评价值，进行评价值的相关性判断处理。</p>
      <p>[0070] 如图10所示，相关性判断单元208在水平方向上扫描关注像素和周边像素，并且 对于各像素，计算H方向评价值一V方向评价值（例如，当对于多个像素，扫描各像素（作为 扫描的各迭代中的关注像素）时，可以扫描至少一个关注像素或者多个关注像素）（S901)。 尽管根据本实施例，使用水平方向上的五个像素，但是本发明的实施例不局限于此。可以使 用七个或者九个像素。根据该计算结果，计数满足关系：H方向评价值一V方向评价值&gt;0的 连续像素的数量（S902)。将计数数量定义为Hfnum，并且判断Hfnum是否等于或者高于预 定阈值（S903)。作为结果，如果Hfnum等于或者高于预定阈值，则确定在水平方向上与关注 像素具有相关性（S904)。</p>
      <p>[0071] 尽管根据本实施例，通过计数连续正像素值的数量来判断相关性，但是，如果所计 算出的评价值的方差等于或者低于预定阈值，也可以确定相关性。相关性判断单元208对 于所有像素进行S901~S904的处理。</p>
      <p>[0072] 相关性判断单元208类似地在垂直方向上扫描关注像素和周边像素，并且对于各 像素，计算H方向评价值一V方向评价值（S905)。根据该计算结果，计数满足关系：H方向 评价值一V方向评价值&gt;�的连续像素的数量（S906)。将计数数量定义为Vfnum，并且判断 Vfnum是否等于或者高于预定阈值（S907)。作为结果，如果Vfnum等于或者高于预定阈值， 则确定在垂直方向上与关注像素具有相关性（S908)。相关性判断单兀208对于所有像素进 行S905~S908的处理。尽管根据本实施例，判断在水平方向和垂直方向的各方向上的相 关性，但是可以判断在对角线方向上的相关性。</p>
      <p>[0073] 相关性判断单元208相互替换通过S901、S902、S905和S906的处理所获取的H方 向评价值和V方向评价值，并且对于所有像素进行图9所示的处理。</p>
      <p>[0074] 接着参考图11的流程图，说明孤立点校正处理的实施例。</p>
      <p>[0075] 孤立点校正单元209使用各方向上的评价值的孤立点判断和相关性判断的结果 来校正孤立点。</p>
      <p>[0076] 孤立点校正单元209首先判断关注像素是否被孤立点判断单元207确定为孤立 点、以及是否未被相关性判断单元208判断为具有相关性（S1101)。作为结果，如果满足， 则孤立点校正单元209获取周边像素中未被孤立点判断单元207确定为孤立点的像素的评 价值的中央值，并且将所获取的中央值当作为关注像素的评价值（S1102)。图12示出评价 值计算的例子。在该例子中，通过使用未被判断为孤立点的像素hll、hl2、h21、h23和h33 的评价值，获取关注像素h22的像素的评价值。由于评价值是hll=l、hl2 = 2、h21 = 3、 h23 = 4和h33 = 5,因而中央值为3。尽管根据本实施例，将中央值当作为校正结果，但是 可以使用平均值或者加权滤波处理。与H方向评价值一样，孤立点校正单元209对于所有 像素的V方向评价值进行与S1101~S1102相同的处理。</p>
      <p>[0077] 然后，图像生成单元210基于通过孤立点校正单元209所计算出的评价值，选择水 平方向插值和垂直方向插值中的一个。从而，图像生成单元210生成所有像素的包含R、G、 B颜色成分的图像数据的最终的RGB插值图像数据，并且输出该数据作为插值RGB图像数据 211 (去马赛克数据）。</p>
      <p>[0078] 接着参考图13,说明用于生成插值图像的更具体方法的实施例。</p>
      <p>[0079] 图像生成单元210首先对于所有像素，比较对于H方向的插值的评价值Ch和对于 V方向的插值的评价值Cv，从而判断是否满足关系：评价值Ch&gt;评价值Cv(S1301)。作为结 果，如果满足关系：评价值Ch&gt;评价值Cv，则图像生成单元210选择与H方向的插值有关的 R、G、B插值数据（S1302)，并且输出它们作为插值RGB图像数据211。如果不满足关系：评 价值Ch&gt;评价值Cv，则接着判断是否满足关系：评价值Cv&gt;评价值Ch(S1303)。作为结果， 如果满足关系：评价值Cv&gt;评价值Ch，则图像生成单元210选择与V方向的插值有关的R、 G、B插值数据（S1304)，并且输出它们作为插值RGB图像数据211。另一方面，如果不满足 关系：评价值Cv&gt;评价值Ch，图像生成单元210计算与H方向和V方向的插值有关的R、G、 B插值数据对于R、G、B颜色各自的平均值（S1305)，并且输出该计算结果作为插值RGB图像 数据211。</p>
      <p>[0080] 根据本实施例，是基于H方向评价值和V方向评价值的大小进行的判断，并且选择 以及输出以下数据中的一个作为插值RGB图像数据：H方向插值的插值数据、V方向插值的 插值数据、以及H方向插值和V方向插值的平均值。然而，本发明的实施例不局限于此。例 如，可以判断H方向评价值和V方向评价值之间的差是否等于或者高于阈值。更具体地，如 果满足关系：评价值Ch-评价值Cv&gt;阈值A，则可以选择H方向插值的插值数据。如果满 足关系：评价值Cv-评价值Ch&gt;阈值A，则可以选择V方向插值的插值数据。在这种情况 下，除这两个条件以外，还可以输出基于H方向评价值和V方向评价值的加权加法的计算结 果，作为插值RGB图像数据。</p>
      <p>[0081] 根据第一典型实施例，使用关注像素周围的周边像素的评价值之间的相关性来确 定发生伪分辨率的部分。如果评价值之间不存在相关性，则通过使用所述关注像素周围的 周边像素来校正关注像素的评价值。因而，可以更适当地校正由评价值的错误计算所导致 的伪分辨率。</p>
      <p>[0082] 第二典铟实施例</p>
      <p>[0083] 根据第一典型实施例，在相关性判断单元208中，在包括关注像素的周边像素中， 基于判断各方向上的评价值之间的大小关系是否连续来判断相关性。另一方面，根据第二 典型实施例，对于相关性判断，使用预先准备的模板映射。</p>
      <p>[0084] 下面将以与第一典型实施例的不同为重点说明本发明的第二典型实施例。</p>
      <p>[0085]由于根据本典型实施例的摄像设备和去马赛克单元的信号单元的至少一个实施 例的结构与参考图1和2所述的第一典型实施例中的相同，因而省略对该各单元的说明。除 相关性判断处理以外，根据第二典型实施例的处理流程与第一典型实施例的相同。</p>
      <p>[0086] 参考图14的流程图，说明根据本典型实施例的相关性判断处理。在孤立点判断处 理之后，相关性判断单元208基于各方向的评价值进行评价值的相关性判断处理。相关性 判断单元208首先对于包括关注像素的周边像素中的各像素，计算H方向评价值一V方向 评价值（S1401)。接着，根据该计算结果，判断是否满足关系：H方向评价值一V方向评价 值&gt;0(S1402)。根据本典型实施例，使用5X5区域。然而，还可以使用3X3或者7X7区域 (或者其它不同大小的区域）。当然，本发明的实施例不局限于此。</p>
      <p>[0087] 作为结果，如果满足关系：H方向评价值一V方向评价值&gt;0,则相关性判断单元 208将H方向像素确定为扫描像素，并且定义hdet= 1 (S1403)。另一方面，如果满足关系：H方向评价值一V方向评价值&lt; 0,则相关性判断单元208在不将H方向像素确定为扫描像 素的情况下，定义hdet= 0 (S1404)。相关性判断单元208使用像素的值hdet和预先存储 在存储器112中的预定模板映射，判断在5X5区域（或者，不同大小的区域）中的值是否 与模板映射的数据相一致（S1405)。图16示出表示模板映射的数据的四个例子。根据本实 施例，对于模板映射，使用水平方向、垂直方向和两种类型的对角方向。然而，本发明的实施 例不局限于此。当然，可以在一个以上的实施例中使用模板映射，而不在方向上和数量上限 制模板映射。作为结果，如果图16所示的模板映射中的一个与像素值相一致，则判断为针 对关注像素的评价值具有相关性（S1406)。</p>
      <p>[0088] 相关性判断单元208对所有像素进行S1401~S1406的处理。类似于H方向评价 值，相关性判断单元208对于具有V方向评价值的所有像素，进行与S1401~S1406相同的 处理（图15中的S1501~S1506)。</p>
      <p>[0089] 由于以后的处理与第一典型实施例的相同，因而省略说明。这样，根据第二典型实 施例，使用预先所准备的模板映射进行相关性判断。如果评价值之间不存在相关性，则使用 关注像素的周边像素来校正关注像素的评价值。因此，如第一典型实施例一样，可以适当校 正由评价值的错误计算所导致的伪分辨率。</p>
      <p>[0090] 其它实施例</p>
      <p>[0091] 本发明的实施例还可以通过如下的方法来实现，即，通过网络或者各种存储介质 将执行上述实施例的功能的软件（程序）提供给系统或装置，该系统或装置的计算机或是 中央处理单元（CPU)、微处理单元（MPU)读出并执行程序的方法。</p>
      <p>[0092] 尽管参考典型实施例说明了本发明，但是应该理解，本发明不局限于所公开的典 型实施例。所附权利要求书的范围符合最宽的解释，以包含所有这类修改、等同结构和功 能。</p>
    </mode-for-invention>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04N0009040000">H04N9/04</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04N0009640000">H04N9/64</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04N9/045">H04N9/045</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06T3/4015">G06T3/4015</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=gNmACQABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04N9/07">H04N9/07</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2015年11月11日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2016年2月3日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/da3d27ee62de05728a2f/CN105049820A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5bd24152bf5a1e342ae546da267fae0b.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E8%AE%BE%E5%A4%87_%E6%91%84%E5%83%8F%E8%AE%BE%E5%A4%87%E5%92%8C%E5%9B%BE%E5%83%8F.pdf?id=gNmACQABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U13m1_z-weJv-JYV9HwL8ysSvxI7g"},"sample_url":"https://www.google.com/patents/reader?id=gNmACQABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>