<!DOCTYPE html><html><head><title>专利 CN102202292A - 下载Java应用的方法、Java应用管理器、服务器及其下载系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="下载Java应用的方法、Java应用管理器、服务器及其下载系统"><meta name="DC.contributor" content="刘光辉" scheme="inventor"><meta name="DC.contributor" content="李旗" scheme="inventor"><meta name="DC.contributor" content="杨可可" scheme="inventor"><meta name="DC.contributor" content="金明晔" scheme="inventor"><meta name="DC.contributor" content="中国联合网络通信集团有限公司" scheme="assignee"><meta name="DC.date" content="2011-6-10" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供一种下载Java应用的方法、Java应用管理器、服务器及其下载系统。其中，下载Java应用的方法，包括Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；所述Java应用管理器接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；所述Java应用管理器根据所述列表，对Java应用列表进行相应更新。该下载Java应用的方法，用户可以自主的对下载列表进行更新，用户根据更新后的列表选择下载应用并安装使用，满足了客户对Java应用的多样性及个性化的需求，也有利于运营商对新应用进行推广。"><meta name="DC.date" content="2011-9-28"><meta name="DC.relation" content="CN:101222514:A" scheme="references"><meta name="DC.relation" content="CN:101873580:A" scheme="references"><meta name="DC.relation" content="CN:101969617:A" scheme="references"><meta name="DC.relation" content="DE:19543843" scheme="references"><meta name="citation_patent_publication_number" content="CN:102202292:A"><meta name="citation_patent_application_number" content="CN:201110155360"><link rel="canonical" href="https://www.google.com/patents/CN102202292A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102202292A?cl=zh"/><meta name="title" content="专利 CN102202292A - 下载Java应用的方法、Java应用管理器、服务器及其下载系统"/><meta name="description" content="本发明提供一种下载Java应用的方法、Java应用管理器、服务器及其下载系统。其中，下载Java应用的方法，包括Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；所述Java应用管理器接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；所述Java应用管理器根据所述列表，对Java应用列表进行相应更新。该下载Java应用的方法，用户可以自主的对下载列表进行更新，用户根据更新后的列表选择下载应用并安装使用，满足了客户对Java应用的多样性及个性化的需求，也有利于运营商对新应用进行推广。"/><meta property="og:title" content="专利 CN102202292A - 下载Java应用的方法、Java应用管理器、服务器及其下载系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102202292A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102202292A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=WpCFBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102202292A&amp;usg=AFQjCNFYzBPPTWgb3GGoGW8FHXioRSP5Tg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/8ac16b8818c0dd86c7e6/CN102202292A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/8ac16b8818c0dd86c7e6/CN102202292A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102202292A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102202292A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN102202292A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN102202292B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102202292A?cl=zh" style="display:none"><span itemprop="description">本发明提供一种下载Java应用的方法、Java应用管理器、服务器及其下载系统。其中，下载Java应用的方法，包括Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；所述Java应用管 ...</span><span itemprop="url">https://www.google.com/patents/CN102202292A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102202292A - 下载Java应用的方法、Java应用管理器、服务器及其下载系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102202292A - 下载Java应用的方法、Java应用管理器、服务器及其下载系统" title="专利 CN102202292A - 下载Java应用的方法、Java应用管理器、服务器及其下载系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102202292 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201110155360</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2011年9月28日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年6月10日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年6月10日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102202292B?hl=zh-CN&amp;cl=zh">CN102202292B</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201110155360.5, </span><span class="patent-bibdata-value">CN 102202292 A, </span><span class="patent-bibdata-value">CN 102202292A, </span><span class="patent-bibdata-value">CN 201110155360, </span><span class="patent-bibdata-value">CN-A-102202292, </span><span class="patent-bibdata-value">CN102202292 A, </span><span class="patent-bibdata-value">CN102202292A, </span><span class="patent-bibdata-value">CN201110155360, </span><span class="patent-bibdata-value">CN201110155360.5</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%88%98%E5%85%89%E8%BE%89%22">刘光辉</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E6%97%97%22">李旗</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%A8%E5%8F%AF%E5%8F%AF%22">杨可可</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%87%91%E6%98%8E%E6%99%94%22">金明晔</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%AD%E5%9B%BD%E8%81%94%E5%90%88%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E9%9B%86%E5%9B%A2%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">中国联合网络通信集团有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102202292A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102202292A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102202292A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (4),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=WpCFBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201110155360&amp;usg=AFQjCNEJ9yTzYlAKTB0w_Zl3jiaUCcn7Ew"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=WpCFBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102202292A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNH9g9UcnHBjIUhrDio03tD86sOXhA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT104556539" lang="ZH" load-source="patent-office">下载Java应用的方法、Java应用管理器、服务器及其下载系统</invention-title>
      </span><br><span class="patent-number">CN 102202292 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA86456497" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供一种下载Java应用的方法、Java应用管理器、服务器及其下载系统。其中，下载Java应用的方法，包括Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；所述Java应用管理器接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；所述Java应用管理器根据所述列表，对Java应用列表进行相应更新。该下载Java应用的方法，用户可以自主的对下载列表进行更新，用户根据更新后的列表选择下载应用并安装使用，满足了客户对Java应用的多样性及个性化的需求，也有利于运营商对新应用进行推广。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(31)</span></span></div><div class="patent-text"><div mxw-id="PCLM36964962" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种下载Java应用的方法，其特征在于，包括：Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；所述Java应用管理器接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；所述Java应用管理器根据所述列表，对Java应用列表进行相应更新。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的下载Java应用的方法，其特征在于，在所述Java应用管理器向所述服务器上发所述列表更新请求之前，还包括：所述Java应用管理器向所述服务器上发Java卡注册请求，所述Java卡注册请求包括 Java 卡的 ICCID 和 IMSI。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求1所述的下载Java应用的方法，其特征在于，在所述Java应用列表更新结束之后，还包括：所述Java应用管理器向所述服务器上发应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识；Java卡接收所述服务器推送的与所述栏目标识及应用标识AID相应的应用。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求3所述的下载Java应用的方法，其特征在于，还包括：在所述Java应用管理器向所述服务器发起应用下载请求时，启动第一计数器，并使所述第一计数器加1 ；在所述Java应用管理器向所述服务器上发应用下载请求结束后，将所述第一计数器加1后的值，更新为所述第一计数器的当前值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求4所述的下载Java应用的方法，其特征在于，在所述第一计数器加1 之后，取出本地应用密钥计算MAC值，并将计算所得MAC值填入所述应用下载请求，所述MAC 值包括所述第一计数器的当前值、所述本地应用密钥的数值和所述ICCID的数值。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6.	一种下载Java应用的方法，其特征在于，包括：服务器接收Java应用管理器上发的列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；所述服务器根据所述列表栏目分类标识和所述列表页码标识查找相应的列表； 所述服务器将所述列表推送至所述Java应用管理器，用来对Java应用列表进行相应更新。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求6所述的下载Java应用的方法，其特征在于，在所述服务器向所述 Java应用管理器推送所述列表之前，还包括：所述服务器接收所述Java应用管理器上发的Java卡注册请求，所述Java卡注册请求包括Java卡的ICCID和IMSI ；所述服务器根据Java卡的ICCID和IMSI对所述Java卡的合法性进行判断： 若判断获知所述Java卡合法，则Java卡注册成功； 若判断获知所述Java卡不合法，则Java卡注册不成功，并终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求6所述的下载Java应用的方法，其特征在于，在所述Java应用列表更新结束之后，还包括：所述服务器接收所述Java应用管理器上发的应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识；所述服务器查找与所述栏目标识及应用标识AID相应的应用，并将所述应用推送至 Java + ο</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求8所述的下载Java应用的方法，其特征在于，在所述服务器将所述应用推送至Java卡之前，还包括：所述服务器对所述应用收费与否进行判断；若判断获知所述应用为收费应用，则所述服务器根据所述用户标识执行扣费； 若判断获知所述应用为免费应用，则所述服务器不执行扣费。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求8所述的下载Java应用的方法，其特征在于，在所述服务器接收到应用下载请求后，还包括：所述服务器对记录于所述下载请求中的MAC值的合法性进行判断； 若判断获知所述MAC值合法，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡；若判断获知所述MAC值非法，则终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求10所述的下载Java应用的方法，其特征在于，在判断获知MAC值合法后，还包括：所述服务器取出第二计数器，并将所述第二计数器的数值，与记录于MAC值内的Java 应用管理器中的第一计数器的数值进行比较判断；若判断获知所述第二计数器的数值小于所述第一计数器的数值，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡；若判断获知所述第二计数器的数值大于等于所述第一计数器的数值，则终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求8所述的下载Java应用的方法，其特征在于，在所述服务器将所述应用推送至Java卡之前，还包括：所述服务器向所述Java应用管理器发起获取剩余空间指令，以获取Java卡的剩余空间，并将所述剩余空间与所述应用的大小进行比较判断；若判断获知所述剩余空间大于所述应用的大小，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡；若判断获知所述剩余空间小于所述应用的大小，则终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求8所述的下载Java应用的方法，其特征在于，所述服务器判断所述应用的大小是否大于容量阈值，若判断获知所述应用的大小大于容量阈值，则选择采用CAT_TP方式将所述应用推送至Java卡；否则采用短信通道逐条地将所述应用逐条推送至Java卡。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求13所述的下载Java应用的方法，其特征在于，若采用CAT_TP向Java卡推送所述应用时，所述服务器下发PUSH命令对BIP通道进行打开操作，若BIP通道打开成功则继续以CAT_TP来传输数据，若BIP通道未打开成功则改由短信通道来传输数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.根据权利要求13所述的下载Java应用的方法，其特征在于，在所述服务器将所述应用推送至Java卡后，还包括：所述服务器根据已推送的所述应用，所对应的所述应用标识AID，来删除Java应用列表中相应的列表项。</div>
    </div>
    </div> <div class="claim"> <div num="16" class="claim">
      <div class="claim-text">16.	一种Java应用管理器，其特征在于，包括：第一发送模块，用于向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；第一接收模块，用于接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；列表更新模块，用于根据所述列表对Java应用列表进行相应更新。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17.根据权利要求16所述的Java应用管理器，其特征在于，还包括：第二发送模块，用于向服务器上发Java卡注册请求，所述Java卡注册请求包括Java 卡的 ICCID 和 IMSI。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.根据权利要求17所述的Java应用管理器，其特征在于，还包括：第三发送模块，用于向所述服务器上发应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19.根据权利要求17所述的Java应用管理器，其特征在于，还包括：第一计数器模块，用于在所述第三发送模块向所述服务器上发应用下载请求时执行加 1操作，并在所述下载请求发送结束后，以加1操作后的数值更新为该第一计数器模块的当前值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20.根据权利要求19所述的Java应用管理器，其特征在于，还包括：MAC值处理模块，用于在所述第一计数器模块执行加1操作后，以所述第一计数器模块的当前值、述本地应用密钥的数值和所述ICCID的数值计算获得MAC值，并将所述MAC值填入所述应用下载请求。</div>
    </div>
    </div> <div class="claim"> <div num="21" class="claim">
      <div class="claim-text">21.	一种用于提供Java应用下载的服务器，其特征在于，包括：第四接收模块，用于接收Java应用管理器上发的列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；列表组织模块，用于根据所述列表栏目分类标识和所述列表页码标识查找相应的列表；第四发送模块，用于将所述列表推送至所述Java应用管理器，用来对Java应用列表进行相应更新。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="22" class="claim">
      <div class="claim-text">22.根据权利要求21所述的服务器，其特征在于，所述第四接收模块，还用于接收所述Java应用管理器上发的Java卡注册请求，所述 Java卡注册请求包括Java卡的ICCID和IMSI ；还包括第一判断模块，用于根据所述ICCID和所述IMSI判断Java卡的合法性； Java卡注册模块，根据所述第一判断模块的判断结果，决定Java卡注册成功与否。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="23" class="claim">
      <div class="claim-text">23.根据权利要求21所述的服务器，其特征在于，还包括：所述第四接收模块，还用于接收所述Java应用管理器上发的应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识；还包括应用查找模块，用于查找与所述栏目标识及应用标识AID相应的应用； 第五发送模块，用于将所述应用推送至Java卡。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="24" class="claim">
      <div class="claim-text">24.根据权利要求23所述的服务器，其特征在于，还包括：第二判断模块，用于判断所述应用是否为收费应用；扣费模块，用于在所述第二判断模块判断获知所述应用为收费应用时，执行相应的扣费操作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="25" class="claim">
      <div class="claim-text">25.根据权利要求23所述的服务器，其特征在于，还包括：MAC值合法性判断模块，用于对记录于所述下载请求中的MAC值的合法性进行判断，若判断获知所述MAC值合法，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡，若判断获知所述MAC值非法，则终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="26" class="claim">
      <div class="claim-text">26.根据权利要求23所述的服务器，其特征在于，还包括：第二计数器模块，用以记录上一个下载请求中所记载的第一计数器模块的当前值；第三判断模块，用于判断所述第二计数器模块的数值是否大于记录于所述下载请求中的所述第一计数器模块的数值，若判断获知所述第二计数器的数值小于所述第一计数器的数值，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡， 若判断获知所述第二计数器的数值大于等于所述第一计数器的数值，则终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="27" class="claim">
      <div class="claim-text">27.根据权利要求23所述的服务器，其特征在于，还包括：剩余空间获取模块，用于向所述Java卡发起获取剩余空间指令，以获取Java卡的剩余空间；第四判断模块，用于判断所述剩余空间是否大于所述应用的大小，若判断获知所述剩余空间大于所述应用的大小，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡，若判断获知所述剩余空间小于所述应用的大小，则终止流程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="28" class="claim">
      <div class="claim-text">28.根据权利要求23所述的服务器，其特征在于，还包括：第五判断模块，用于判断所述应用的大小是否大于容量阈值，若判断获知所述应用的大小大于容量阈值，则选择采用CAT_TP方式将所述应用推送至Java卡；否则采用短信通道逐条地将所述应用逐条推送至Java卡。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="29" class="claim">
      <div class="claim-text">29.根据权利要求23所述的服务器，其特征在于，还包括：第六判断模块，用于在采用CAT_TP向Java卡推送所述应用时，判断BIP通道打开成功与否，若打开成功则继续以CAT_TP来推送所述应用，否则改由短信通道来推送所述应用。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="30" class="claim">
      <div class="claim-text">30.根据权利要求23所述的服务器，其特征在于，还包括：列表项删除模块，用于在所述应用推送结束后，根据所述应用对应的所述应用标识 AID，来删除Java应用列表中相应的列表项。</div>
    </div>
    </div> <div class="claim"> <div num="31" class="claim">
      <div class="claim-text">31.	一种Java应用下载系统，其特征在于，包括Java应用管理器和服务器；所述Java应用管理器，用于向所述服务器上发列表更新请求和应用下载请求，所述列表更新请求包括列表栏目分类标识和列表页码标识，所述应用下载请求包括应用标识AID、 栏目标识和用户标识；所述服务器接收Java应用管理器上发的所述列表更新请求和应用下载请求，并根据所述列表栏目分类标识和所述列表页码标识查找相应的列表推送至所述Java应用管理器，还根据所述栏目标识及应用标识AID查找相应的应用推送至Java卡，还用于对收费应用根据所述用户标识执行扣费操作。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES42626796" lang="ZH" load-source="patent-office" class="description">
    <p>下载Java应用的方法、Java应用管理器、服务器及其下载</p>
    <p>系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及移动通讯技术领域，尤其涉及一种下载Java应用的方法、Java应用管理器、服务器及其下载系统。</p>
    <p>背景技术</p>
    <p>[0002]	随着移动通讯技术的不断发展，移动终端如手机的通话、短信的功能已成为移动通信运营商最基本的业务类型，而各种新的增值业务（如Java类游戏应用程序的下载等） 已成为各移动运营商的利润增长点。</p>
    <p>[0003]	在电信智能卡中，采用JavaCard技术的Java卡因其性能优越，在应用方面具有通用性强、开发扩展性高、覆盖面广阔的优点而成为电信行业智能卡的主流。目前在Java 卡的应用中，移动通信运营商一般将不同形式的增值套餐项目固化于Java卡中，例如中国联通所推出的世界风、新势力、如意通等套餐卡，均是将相应的增值服务项目固化于Java 卡中，以这种套餐卡形式提供的增值服务，一旦增值服务项目的内容固化于Java卡中，就不能再进行改变，移动终端客户不能对增值服务项目进行更新，不能满足移动终端用户对 Java应用多样性及个性化的需求。另外，也不利于移动通信运营商和其他的应用提供商对新产品、新业务的推广应用。</p>
    <p>发明内容</p>
    <p>[0004]	本发明提供一种下载Java应用的方法、Java应用管理器、服务器及其下载系统， 以满足移动终端用户对Java应用多样性及个性化的需求，并利于移动通信运营商和其他的应用提供商对Java应用产品的推广应用。</p>
    <p>[0005]	本发明提供的一种下载Java应用的方法，包括：</p>
    <p>[0006]	Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；</p>
    <p>[0007]	所述Java应用管理器接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；</p>
    <p>[0008]	所述Java应用管理器根据所述列表，对Java应用列表进行相应更新。</p>
    <p>[0009]	本发明提供的一种下载Java应用的方法，包括：</p>
    <p>[0010]	服务器接收Java应用管理器上发的列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；</p>
    <p>[0011 ] 所述服务器根据所述列表栏目分类标识和所述列表页码标识查找相应的列表；</p>
    <p>[0012]	所述服务器将所述列表推送至所述Java应用管理器，用来对Java应用列表进行相应更新。</p>
    <p>[0013]	本发明提供的一种Java应用管理器，包括：</p>
    <p>[0014]	第一发送模块，用于向服务器上发列表更新请求，所述列表更新请求包括列表栏</p>
    <p>6目分类标识和列表页码标识；</p>
    <p>[0015]	第一接收模块，用于接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；</p>
    <p>[0016]	列表更新模块，用于根据所述列表对Java应用列表进行相应更新。</p>
    <p>[0017]	本发明提供的一种用于提供Java应用下载的服务器，包括：</p>
    <p>[0018]	第四接收模块，用于接收Java应用管理器上发的列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；</p>
    <p>[0019]	列表组织模块，用于根据所述列表栏目分类标识和所述列表页码标识查找相应的列表；</p>
    <p>[0020]	第四发送模块，用于将所述列表推送至所述Java应用管理器，用来对Java应用列表进行相应更新。</p>
    <p>[0021]	本发明提供的一种Java应用下载系统，包括Java应用管理器和服务器；</p>
    <p>[0022]	所述Java应用管理器，用于向所述服务器上发列表更新请求和应用下载请求，所述列表更新请求包括列表栏目分类标识和列表页码标识，所述应用下载请求包括应用标识 AID、栏目标识和用户标识；</p>
    <p>[0023]	所述服务器接收Java应用管理器上发的所述列表更新请求和应用下载请求，并根据所述列表栏目分类标识和所述列表页码标识查找相应的列表推送至所述Java应用管理器，还根据所述栏目标识及应用标识AID查找相应的应用推送至Java卡，还用于对收费应用根据所述用户标识执行扣费操作。</p>
    <p>[0024]	本发明提供的下载Java应用的方法，用户可以自主的对下载列表进行更新，服务器根据用户的更新请求将服务器内原有的和新增的Java应用列表（应用信息）推送至 Java应用管理器，用户根据更新后的列表选择下载对应的应用并安装使用，满足了客户对 Java应用的多样性及个性化的需求。另外，由于对下载列表更新时，同时将移动通信运营商和其他的应用提供商所提供的新的应用信息一并更新至Java应用管理器，有利于这些新应用的推广。</p>
    <p>附图说明</p>
    <p>[0025]	附图用来提供对本发明的进一步理解，并且构成说明书的一部分，与本发明的实施例一起用于解释本发明，并不构成对本发明的限制。在附图中：</p>
    <p>[0026]	图1为本发明下载Java应用的方法实施例的流程图；</p>
    <p>[0027]	图2为显示Java应用管理级联菜单的原理示意图；</p>
    <p>[0028]	图3为基于图1实施例的下载Java应用的方法的流程图；</p>
    <p>[0029]	图4为本发明下载Java应用的方法另一实施例的流程图；</p>
    <p>[0030]	图5为基于图4实施例的下载Java应用的方法的流程图；</p>
    <p>[0031]	图6为本发明Java应用管理器的结构示意图；</p>
    <p>[0032]	图7为基于图6实施例的Java应用管理器实施例的结构示意图；</p>
    <p>[0033]	图8为本发明用于提供Java应用下载的服务器的结构示意图；</p>
    <p>[0034]	图9为基于图8实施例的用于提供Java应用下载的服务器的结构示意图；</p>
    <p>[0035]	图10为本发明Java应用下载系统的结构示意图。具体实施方式</p>
    <p>[0036]	为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。</p>
    <p>[0037]	如图1所示，本发明下载Java应用的方法实施例的流程图，包括如下步骤：</p>
    <p>[0038]	SlOO Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；</p>
    <p>[0039]	在客户移动终端的Java卡内嵌入Java应用管理器。客户移动终端可以是手机、上网本、平板电脑等手持终端。在客户操作客户移动终端进入到Java应用管理器后，若Java 应用管理器内的下载列表为空，则Java应用管理器向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识，此时，列表更新请求是自动触发发送的。 其中，所述列表栏目分类标识用来表征不同应用类别的列表，如音乐下载列表、软件下载列表等。如表1所示，为上发命令的格式，包括命令头、计数器、ICCID、上行命令数据和MAC值， 其中，列表栏目分类标识和列表页码标识就包含于上行命令数据中。还有，若下载列表不为空则可由客户进行自主更新。Java应用管理器具有如图2所示的以STK(sim tool kit，用户识别应用发展工具）级联菜单的形式显示下载应用的列表项。在STK的二级菜单中分为应用下载和应用推荐两个栏目。在应用下载的子菜单（即应用下载列表）中列出了未下载</p>
    <p>的应用，例如未下载应用1，未下载应用2，......，未下载应用N ；在应用推荐的子菜单（即</p>
    <p>应用推荐列表）中列出了未下载的推荐应用，例如推荐应用1，推荐应用2，......，推荐应</p>
    <p>用N。在当前页面下具有下一页按键，若客户需要对下载列表进行更新时，只需点选下一页按键即可，在点选下一页按键后，Java应用管理器向服务器上发列表更新请求。</p>
    <p>[0040]	表IJava应用管理器上发命令的格式</p>
    <p>[0041]</p>
    <p>项目	长度（字节）	值命令头	4	0x6A617661计数器	5	HEXICCID	10	HEX上行命令数据	X	HEXMAC值	4	HEX</p>
    <p>[0042]	Java应用管理器向服务器发送的命令为上行命令，上行命令包括用户注册、应用下载请求、列表更新请求和请求应用介绍等类型。</p>
    <p>[0043]	S200 ：所述Java应用管理器接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表；[0044]	服务器在接收到Java应用管理器上发的列表更新请求后，根据列表更新请求中的所述列表栏目分类标识及所述列表页码标识来查找与之相匹配的列表，并以此列表来组织列表更新指令向所述Java应用管理器发送，所述Java应用管理器接收来自服务器的列表更新指令。</p>
    <p>[0045]	S300 ：所述Java应用管理器根据所述列表，对Java应用列表进行相应更新；</p>
    <p>[0046]	在Java应用管理器接收到列表更新指令后，根据所述列表更新指令中所包含的列表信息对Java应用列表进行相应更新。</p>
    <p>[0047]	通过上述步骤，对列表进行了更新，则可以根据更新后的列表来选择相应的应用进行下载及安装，满足了客户对Java应用的多样性及个性化的需求，同时也有利于运营商对新业务、应用的推广。</p>
    <p>[0048]	在上述实施例的基础上，进一步地，如图3所示，不仅包括步骤S100、S200、S300， 而且在所述Java应用管理器向所述服务器上发所述列表更新请求之前，还包括：</p>
    <p>[0049]	步骤SlOl ：所述Java应用管理器向所述服务器上发Java卡注册请求，所述Java 卡注册请求包括Java卡的集成电路卡识别码（ICCID integrate circuit card identity) 和国际移动用户识别码（IMSI international Mobile Subscriber Identification Number)。</p>
    <p>[0050]	经过上述步骤，在Java应用列表更新结束之后，还包括：</p>
    <p>[0051]	步骤S400 ：所述Java应用管理器向所述服务器上发应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识；</p>
    <p>[0052]	应用标识AID、栏目标识和用户标识同样是记录于上行命令的上行命令数据中。其中，栏目标识用来表征不同类别的应用，如音乐类别、软件类别等。</p>
    <p>[0053]	步骤S500 ：所述Java卡接收所述服务器推送的与所述栏目标识及应用标识AID 相应的应用。</p>
    <p>[0054]	在Java卡接收所述应用后，便可对其进行安装使用。</p>
    <p>[0055]	为了记录下载应用的次数，包括步骤：</p>
    <p>[0056]	S401 ：在Java应用管理器向所述服务器发起应用下载请求时，启动第一计数器， 并使所述第一计数器加1 ；及步骤S402 ：在所述Java应用管理器向所述服务器上发应用下载请求结束后，将所述第一计数器加1后的值，更新为所述第一计数器的当前值。此当前值即为下载应用的总次数。</p>
    <p>[0057]	为了向服务器发送供服务器来判断下载请求是否合法的MAC值，还包括：</p>
    <p>[0058]	步骤S403 ：在所述第一计数器加1之后，取出本地应用密钥计算MAC值，并将计算所得MAC值填入所述应用下载请求，所述MAC值包括所述第一计数器的当前值、所述本地应用密钥的数值和所述ICCID的数值。对MAC值的计算采用标准的Data Encryption Standard-Cipher Block Chaining(DES-CBC)加密算法，本地应用密钥的初始数值预置为8 个字节。</p>
    <p>[0059]	如图4所示，本发明下载Java应用的方法另一实施例的流程图，包括如下步骤：</p>
    <p>[0060]	SllOO ：服务器接收Java应用管理器上发的列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识；</p>
    <p>[0061]	S1200:所述服务器根据所述列表栏目分类标识和所述列表页码标识查找相应的列表；</p>
    <p>[0062]	S1300 ：所述服务器将所述列表推送至所述Java应用管理器，用来对Java应用列表进行相应更新。</p>
    <p>[0063]	本实施例中，服务器根据列表更新请求中的列表栏目分类标识和列表页码标识， 在服务器内的列表库中去查找相应的列表，并将所获得的相应列表进行打包来构建列表更新指令，将列表更新指令下发到Java应用管理器，用来对Java应用列表进行相应更新。</p>
    <p>[0064]	服务器除了可以根据列表更新请求来对Java应用列表进行相应更新外，还可以自主的下发列表更行指令。服务器自主的下发的列表更新指令是对图2中的各推荐应用列表项进行更新。需要指出的是，图2中应用下载的列表更新是由Java应用管理器来发起的，通过Java应用管理器来进行应用下载的更新实现了自主更新的目的，可以满足客户多样化得需要；推荐应用列表的更新只能由服务器定时发起，它是运营商对新业务的推广和热门业务推荐的平台。</p>
    <p>[0065]	在上述实施例的基础上，进一步地，如图5所示，不仅包括上述步骤S1100、S1200、 S1300，在所述服务器向所述Java应用管理器推送所述列表之前，还包括下述步骤：</p>
    <p>[0066]	SllOl ：所述服务器接收所述Java应用管理器上发的Java卡注册请求，所述Java 卡注册请求包括Java卡的ICCID和IMSI ；</p>
    <p>[0067]	S1102 ：所述服务器根据Java卡的ICCID和IMSI对所述Java卡的合法性进行判断；</p>
    <p>[0068]	若判断获知所述Java卡合法，即Java卡是由特定运营商发行的且在该运营商的数据库中存在与之对应的国际移动用户识别码，则Java卡注册成功，在Java注册成功的情况下才可以执行后继步骤SllOO ；若判断获知所述Java卡不合法，则Java卡注册不成功， 并终止流程。</p>
    <p>[0069]	对相关应用的下载是在Java应用列表更新结束之后进行的，包括步骤：</p>
    <p>[0070]	S1400:所述服务器接收所述Java应用管理器上发的应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识；</p>
    <p>[0071]	为了防止进行非法下载，在服务器接收到应用下载请求后，执行下述步骤：</p>
    <p>[0072]	S1401 ：所述服务器对记录于所述下载请求中的MAC值的合法性进行判断；</p>
    <p>[0073]	若判断获知所述MAC值合法，则执行下述步骤S1402 ；否则终止流程。</p>
    <p>[0074]	进一步地，在判断获知MAC值合法后，包括步骤：</p>
    <p>[0075]	S1402 ：所述服务器取出第二计数器，并将所述第二计数器的数值，与记录于MAC 值内的Java应用管理器中的第一计数器的数值进行比较判断；</p>
    <p>[0076]	若判断获知所述第二计数器的数值小于所述第一计数器的数值，则执行步骤 S1500 ；否则终止流程。</p>
    <p>[0077]	在初始状态下，Java卡端的第一计数器与服务器端的第二计数器均为零。在Java 应用管理器上发列表更新请求时，第一计数器加1，并将加1后的数值记录在所述MAC值内。 以第一次上发列表更新请求为例，在发送第一次列表更新请求后，此时第一计数器的值为 1，第二计数器的值为0，S卩，第二计数器的值小于第一计数器的值，说明计数器计数正确，此时可以进行将应用推送至Java卡。并在第一计数器和第二计数器数值比较后，用第一计数器的数值来更新第二计数器的数值，依此来看，在正常情况下第一计数器的数值永远大于</p>
    <p>10第二计数器的数值。当第二计数器的数值大于第一计数器的数值时，说明第二计数器失步， 此时需要对第二计数器进行恢复，使其数值恢复为0。</p>
    <p>[0078]	S1500 ：所述服务器查找与所述栏目标识及应用标识AID相应的应用；</p>
    <p>[0079]	应用下载请求是用户通过选择相应的列表而由Java应用管理器发出的，每一个列表项均对应一个唯一的应用标识AID、所述列表栏目分类标识，服务器会根据所述所述列表栏目分类标识及应用标识AID来查找相应的应用。</p>
    <p>[0080]	S1600 ：将所述应用推送至Java卡。</p>
    <p>[0081]	查找获得相应的应用后，服务器将所述应用发送给Java卡（具体的是发送到卡上的CardManager，这一过程是标准过程，GP和下述相关规范中均有定义），用来进行安装。</p>
    <p>[0082]	还有，在所述服务器将所述应用推送至Java卡之前，包括步骤：</p>
    <p>[0083]	S1403 ：所述服务器对所述应用收费与否进行判断；</p>
    <p>[0084]	若判断获知所述应用为收费应用，则执行步骤S1404:所述服务器根据所述用户标识执行扣费；在执行扣费之前，服务器还会根据用户标识来判断用户费用余额是否足够用来支付所下载的应用，只有在余额足够的情况下才执行步骤S1600，若余额不足则终止流程。</p>
    <p>[0085]	若判断获知所述应用为免费应用，则所述服务器不执行扣费。</p>
    <p>[0086]	为了防止出现应用下载到一半时，出现因Java卡空间不足而无法继续下载的问题，在所述服务器将所述应用推送至Java卡之前，还包括步骤：</p>
    <p>[0087]	S1405 ：所述服务器向所述Java卡发起获取剩余空间指令，以获取Java卡的剩余空间，并将所述剩余空间与所述应用的大小进行比较判断；</p>
    <p>[0088]	若判断获知所述剩余空间大于所述应用的大小，则执行步骤S1600 ；若判断获知所述剩余空间小于所述应用的大小，则终止流程。服务器对Java卡剩余空间的获取逻辑判断为：1)在服务器内记录的Java卡剩余空间的大小与相应应用所需空间相差较小（可以定为，但不限于&lt; 1K)时，向所述Java卡发起获取剩余空间指令，这是因为应用在Java卡上占用的空间与其自身大小会有一定的出入，这会造成Java卡上实际的剩余空间与服务器内记录的Java卡剩余空间不完全一致，为了防止出现服务器内记录的Java卡剩余空间大于所要下载应用所需的空间，但Java卡上实际的剩余空间却小于所要下载应用所需的空间，因此采用上述逻辑来获取Java卡此时实际剩余空间的大小；2)在已经进行了 N(可以定为，但不限于10次）次成功下载后，向所述Java卡发起获取剩余空间指令。</p>
    <p>[0089]	Java应用管理器与服务器之间采用普通的短信方式进行信息、命令的交互。由服务器向Java应用管理器发送的命令为下行命令，下行命令包括用户注册响应、列表更新响应、应用推荐和请求用户注册等类型。下行命令采用03. 48格式的数据短信方式，其具体规范参照：</p>
    <p>[0090]	ETST TS 102 225 Release 6 ；</p>
    <p>[0091]	ETSI TS 102 226 Release 6 ；</p>
    <p>[0092]	TAR 值取 83915A。</p>
    <p>[0093]	在服务器将所述应用向所述Java卡进行推送时，所述服务器判断所述应用的大小是否大于容量阈值，此容量阈值用来表征切换为CAT_TP (Card Application Toolkit, transport Protocol)传输方式时所需的数据量的大小，若判断获知所述应用的大小大于容量阈值，则选择采用CAT_TP方式将所述应用推送至Java卡；否则采用短信通道逐条地将所述应用逐条推送至Java卡。</p>
    <p>[0094]	若采用CAT_TP向Java卡推送所述应用时，所述服务器下发PUSH命令对 BIP (Bearer Independent Protocol)通道进行打开操作，若BIP通道打开成功则继续以 CAT_TP来传输数据，若BIP通道未打开成功则改由短信通道来传输数据。</p>
    <p>[0095]	最后，在所述服务器将所述应用推送至Java卡后，还包括步骤：</p>
    <p>[0096]	S1700:所述服务器根据已推送的所述应用，所对应的所述应用标识AID，来删除 Java应用列表中相应的列表项。这样可以防止对应用进行重复下载。</p>
    <p>[0097]	如图6所示，本发明Java应用管理器的结构示意图，包括第一发送模块1、第一接收模块6和列表更新模块7。</p>
    <p>[0098]	具体的，所述第一发送模块1用于向服务器上发列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识。所述第一接收模块6用于接收所述服务器下发的列表更新指令，所述列表更新指令包括与所述列表栏目分类标识及所述列表页码标识匹配的列表。所述列表更新模块7用于根据所述列表对Java应用列表进行相应更新。</p>
    <p>[0099]	基于上述实施例，进一步地，如图7所示，不仅包括第一发送模块1、第一接收模块 6和列表更新模块7，还包括第二发送模块2用于向服务器上发Java卡注册请求，所述Java 卡注册请求包括Java卡的ICCID和IMSI。第三发送模块3用于向所述服务器上发应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识。第一计数器模块4用于在所述第三发送模块3向所述服务器上发应用下载请求时执行加1操作，并在所述下载请求发送结束后，以加1操作后的数值更新为该第一计数器模块4的当前值。MAC值处理模块8用于在所述第一计数器模块4执行加1操作后，以所述第一计数器模块4的当前值、述本地应用密钥的数值和所述ICCID的数值计算获得MAC值，并将所述MAC值填入所述应用下载请求。第一发送模块1、第二发送模块2和第三发送模块3构成总的发送模块。</p>
    <p>[0100]	如图8所示，本发明用于提供Java应用下载的服务器的结构示意图，包括第四接收模块9、列表组织模块沈和第四发送模块25。</p>
    <p>[0101]	具体的，所述第四接收模块9用于接收Java应用管理器上发的列表更新请求，所述列表更新请求包括列表栏目分类标识和列表页码标识。所述列表组织模块26用于根据所述列表栏目分类标识和所述列表页码标识查找相应的列表。所述第四发送模块25用于将所述列表推送至所述Java应用管理器，用来对Java应用列表进行相应更新。</p>
    <p>[0102]	基于上述实施例，如图9所示，不仅包括第四接收模块9、列表组织模块沈和第四发送模块25，且所述第四接收模块9还用于接收所述Java应用管理器上发的Java卡注册请求，所述Java卡注册请求包括Java卡的ICCID和IMSI ；以及用于接收所述Java应用管理器上发的应用下载请求，所述应用下载请求包括应用标识AID、栏目标识和用户标识。第一判断模块11用于根据所述ICCID和所述IMSI判断Java卡的合法性。还包括Java卡注册模块12根据所述第一判断模块11的判断结果，决定Java卡注册成功与否。应用查找模块21用于查找与所述栏目标识及应用标识AID相应的应用。第五发送模块19用于将所述应用推送至Java卡。第二判断模块22用于判断所述应用是否为收费应用。扣费模块20 用于在所述第二判断模块22判断获知所述应用为收费应用时，执行相应的扣费操作。MAC 值合法性判断模块27用于对记录于所述下载请求中的MAC值的合法性进行判断，若判断获</p>
    <p>12知所述MAC值合法，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡，若判断获知所述MAC值非法，则终止流程。第二计数器模块13用以记录上一个下载请求中所记载的第一计数器模块的当前值。第三判断模块14用于判断所述第二计数器模块13的数值是否大于记录于所述下载请求中的所述第一计数器模块的数值，若判断获知所述第二计数器的数值小于所述第一计数器的数值，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡，若判断获知所述第二计数器的数值大于等于所述第一计数器的数值，则终止流程。剩余空间获取模块23用于向所述Java卡发起获取剩余空间指令，以获取Java卡的剩余空间。第四判断模块M用于判断所述剩余空间是否大于所述应用的大小，若判断获知所述剩余空间大于所述应用的大小，则将根据所述栏目标识及所述应用标识AID查找到的所述应用推送至所述Java卡，若判断获知所述剩余空间小于所述应用的大小，则终止流程。第五判断模块16用于判断所述应用的大小是否大于容量阈值，若判断获知所述应用的大小大于容量阈值，则选择采用CAT_TP方式将所述应用推送至Java卡；否则采用短信通道逐条地将所述应用逐条推送至Java卡。第六判断模块17用于在采用CAT_TP向Java卡推送所述应用时，判断BIP通道打开成功与否，若打开成功则继续以CAT_TP来推送所述应用，否则改由短信通道来推送所述应用。列表项删除模块15用于在所述应用推送结束后，根据所述应用对应的所述应用标识AID，来删除Java 应用列表中相应的列表项。</p>
    <p>[0103]	如图10所示，为本发明Java应用下载系统的结构示意图，包括Java应用管理器 28和服务器四。</p>
    <p>[0104]	具体的，所述Java应用管理器观用于向所述服务器上发列表更新请求和应用下载请求，所述列表更新请求包括列表栏目分类标识和列表页码标识，所述应用下载请求包括应用标识AID、栏目标识和用户标识。所述服务器四接收Java应用管理器上发的所述列表更新请求和应用下载请求，并根据所述列表栏目分类标识和所述列表页码标识查找相应的列表推送至所述Java应用管理器，还根据所述栏目标识及应用标识AID查找相应的应用推送至Java卡，还用于对收费应用根据所述用户标识执行扣费操作。</p>
    <p>[0105]	最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101222514A?cl=zh">CN101222514A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年1月31日</td><td class="patent-data-table-td patent-date-value">2008年7月16日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">一种基于承载无关协议实现空中下载的装置和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101873580A?cl=zh">CN101873580A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年5月27日</td><td class="patent-data-table-td patent-date-value">2010年10月27日</td><td class="patent-data-table-td ">大唐微电子技术有限公司</td><td class="patent-data-table-td ">业务应用的下载方法及业务应用管理平台系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101969617A?cl=zh">CN101969617A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年10月13日</td><td class="patent-data-table-td patent-date-value">2011年2月9日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">一种java应用的方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/DE19543843C2?cl=zh">DE19543843C2</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">1995年11月24日</td><td class="patent-data-table-td patent-date-value">2001年2月8日</td><td class="patent-data-table-td ">Acer Peripherals Inc</td><td class="patent-data-table-td ">Verfahren zur Aktualisierung der Software in einem mikrocomputergestützten Telefon</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102833820A?cl=zh">CN102833820A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年8月20日</td><td class="patent-data-table-td patent-date-value">2012年12月19日</td><td class="patent-data-table-td ">中国联合网络通信集团有限公司</td><td class="patent-data-table-td ">Ims接入处理方法、通用用户识别模块和终端设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103096296A?cl=zh">CN103096296A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年11月8日</td><td class="patent-data-table-td patent-date-value">2013年5月8日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">应用安装和切换的方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103297516A?cl=zh">CN103297516A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年5月16日</td><td class="patent-data-table-td patent-date-value">2013年9月11日</td><td class="patent-data-table-td ">北京新思易佳科技有限公司</td><td class="patent-data-table-td ">一种应用的多类型提供方法、系统及装置</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=WpCFBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04W0008240000">H04W8/24</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2011年9月28日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年11月23日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年11月20日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/8ac16b8818c0dd86c7e6/CN102202292A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%8B%E8%BD%BDJava%E5%BA%94%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95_Java%E5%BA%94%E7%94%A8%E7%AE%A1.pdf?id=WpCFBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3_je6_qedz2P8ZrUJUIkl3nQbpKA"},"sample_url":"https://www.google.com/patents/reader?id=WpCFBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>