<!DOCTYPE html><html><head><title>专利 CN102447647A - 一种基于新消息的通知方法、装置及系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种基于新消息的通知方法、装置及系统"><meta name="DC.contributor" content="舒军" scheme="inventor"><meta name="DC.contributor" content="袁昌文" scheme="inventor"><meta name="DC.contributor" content="腾讯科技（深圳）有限公司" scheme="assignee"><meta name="DC.date" content="2010-10-13" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种基于新消息的通知方法、装置及系统。包括：根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。应用本发明，可以提高用户体验。"><meta name="DC.date" content="2012-5-9"><meta name="DC.relation" content="CN:101193081:A" scheme="references"><meta name="DC.relation" content="CN:101247363:A" scheme="references"><meta name="DC.relation" content="CN:101425093:A" scheme="references"><meta name="DC.relation" content="CN:101431484:A" scheme="references"><meta name="DC.relation" content="CN:101552740:A" scheme="references"><meta name="DC.relation" content="CN:101848244:A" scheme="references"><meta name="DC.relation" content="CN:1992618:A" scheme="references"><meta name="DC.relation" content="US:20030208545:A1" scheme="references"><meta name="DC.relation" content="US:20080201419:A1" scheme="references"><meta name="DC.relation" content="US:20080291896:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:102447647:A"><meta name="citation_patent_application_number" content="CN:201010526218"><link rel="canonical" href="https://www.google.com/patents/CN102447647A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102447647A?cl=zh"/><meta name="title" content="专利 CN102447647A - 一种基于新消息的通知方法、装置及系统"/><meta name="description" content="本发明公开了一种基于新消息的通知方法、装置及系统。包括：根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。应用本发明，可以提高用户体验。"/><meta property="og:title" content="专利 CN102447647A - 一种基于新消息的通知方法、装置及系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102447647A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102447647A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=HldwBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102447647A&amp;usg=AFQjCNHaHuKeitFmSofnpTFx5FFV2ZV62g" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/6c8c3da75dbf3d0fda08/CN102447647A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/6c8c3da75dbf3d0fda08/CN102447647A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102447647A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102447647A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN102447647A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN102447647B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102447647A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种基于新消息的通知方法、装置及系统。包括：根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请...</span><span itemprop="url">https://www.google.com/patents/CN102447647A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102447647A - 一种基于新消息的通知方法、装置及系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102447647A - 一种基于新消息的通知方法、装置及系统" title="专利 CN102447647A - 一种基于新消息的通知方法、装置及系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102447647 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201010526218</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2012年5月9日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2010年10月13日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2010年10月13日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102447647B?hl=zh-CN&amp;cl=zh">CN102447647B</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201010526218.2, </span><span class="patent-bibdata-value">CN 102447647 A, </span><span class="patent-bibdata-value">CN 102447647A, </span><span class="patent-bibdata-value">CN 201010526218, </span><span class="patent-bibdata-value">CN-A-102447647, </span><span class="patent-bibdata-value">CN102447647 A, </span><span class="patent-bibdata-value">CN102447647A, </span><span class="patent-bibdata-value">CN201010526218, </span><span class="patent-bibdata-value">CN201010526218.2</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%88%92%E5%86%9B%22">舒军</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%A2%81%E6%98%8C%E6%96%87%22">袁昌文</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E8%85%BE%E8%AE%AF%E7%A7%91%E6%8A%80%EF%BC%88%E6%B7%B1%E5%9C%B3%EF%BC%89%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">腾讯科技（深圳）有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102447647A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102447647A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102447647A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (10),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (7),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=HldwBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201010526218&amp;usg=AFQjCNFdJFOJBA6U8ke5SC_ytL4jlEHb7g"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=HldwBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102447647A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNFb6KNJx1F9q1t_A2pak_wg_cfWLg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT112407877" lang="ZH" load-source="patent-office">一种基于新消息的通知方法、装置及系统</invention-title>
      </span><br><span class="patent-number">CN 102447647 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA95912851" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种基于新消息的通知方法、装置及系统。包括：根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。应用本发明，可以提高用户体验。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(23)</span></span></div><div class="patent-text"><div mxw-id="PCLM41113861" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种基于新消息的通知方法，其特征在于，该方法包括：根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时， 获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.如权利要求1所述的方法，其特征在于，获取新信息请求时间阈值具体包括：启动微博消息页面，从服务器拉取微博消息以及新信息请求时间阈值，将拉取的微博消息进行展示，并将拉取的新信息请求时间阈值进行存储。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.如权利要求2所述的方法，其特征在于，所述微博消息页面启动，从服务器拉取微博消息并进行展示具体包括：客户端在监测到微博消息页面启动时，向服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息进行展示，存储新信息请求时间阈值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.如权利要求1所述的方法，其特征在于，所述用户状态包括：用户当前驻留在微博消息页面以及用户当前离开微博消息页面。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求1所述的方法，其特征在于，所述微博消息页面包括：主页消息页面、@页消息页面以及私信消息页面。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.如权利要求1至5任一项所述的方法，其特征在于，服务器接收新信息请求，根据新信息请求中携带的用户当前微博消息页面标识获取微博消息计数值；获取更新的新信息请求时间阈值；将微博消息计数值以及新信息请求时间阈值携带在新消息提示信息中，发送至客户端。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求6所述的方法，其特征在于，所述根据用户当前微博消息页面标识获取微博消息计数值具体包括：服务器接收新信息请求，获取存储的新信息请求所属客户端的微博消息，根据新信息请求中携带的微博消息页面标识，查询获取该微博消息页面标识对应的微博消息计数值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.如权利要求7所述的方法，其特征在于，所述获取更新的新信息请求时间阈值具体包括：服务器根据获取的微博消息计数值，并按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.如权利要求8所述的方法，其特征在于，所述新信息访问控制策略具体包括：如果当前微博消息计数值为0，将下一次新信息请求时间阈值执行指数规避；或，存储客户端启动微博消息页面的记录以及新信息请求记录，根据启动微博消息页面的记录数以及新信息请求记录数对用户进行分级，每一级对应一个新信息请求时间阈值。</div>
    </div>
    </div> <div class="claim"> <div num="10" class="claim">
      <div class="claim-text">10.	一种基于新消息的通知系统，其特征在于，该系统包括：客户端以及服务器，其中，客户端，用于在首次从服务器拉取微博消息并进行展示后，根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态，如果用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器，提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值；服务器，用于在首次向客户端发送微博消息时，按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值，输出至客户端，并分类存储后续发送至该客户端的微博消息，对分类存储的微博消息进行计数；接收新信息请求，获取存储的新信息请求所属客户端的微博消息，根据新信息请求中携带的微博消息页面标识，查询获取该微博消息页面标识对应的微博消息计数值，并按照预先设置的新信息访问控制策略重新计算用于新信息访问的新信息请求时间阈值，携带在新消息提示信息中，输出至客户端。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.如权利要求10所述的系统，其特征在于，所述客户端包括：微博消息页面启动监测模块、新信息请求时间阈值存储模块、计时模块、用户状态获取模块、微博消息拉取模块、新信息拉取模块以及显示模块，其中，微博消息页面启动监测模块，用于监测客户端是否启动微博消息页面，在监测到微博消息页面启动时，向微博消息拉取模块输出触发信号；新信息请求时间阈值存储模块，用于接收微博消息拉取模块输出的新信息请求时间阈值，进行存储；接收新信息拉取模块输出的新信息请求时间阈值，更新存储的新信息请求时间阈值；计时模块，接收触发信号，进行计时，在计时到新信息请求时间阈值存储模块存储的新信息请求时间阈值时，向用户状态获取模块输出触发信号；用户状态获取模块，用于接收触发信号，获取用户状态，如果用户状态为用户驻留在微博消息页面，将当前微博消息页面标识信息输出至新信息拉取模块；微博消息拉取模块，接收触发信号，向外部的服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息输出至显示模块，将新信息请求时间阈值输出至新信息请求时间阈值存储模块，并向计时模块输出触发信号；新信息拉取模块，用于接收微博消息页面标识信息，触发生成新信息请求，向外部的服务器发送；接收服务器返回的新消息提示信息，将新消息提示信息中携带的微博消息计数值输出至显示模块，将新消息提示信息中携带的新信息请求时间阈值输出至新信息请求时间阈值存储模块；显示模块，用于将接收的微博消息以及微博消息计数值进行展示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.如权利要求10所述的系统，其特征在于，所述服务器包括：微博消息存储模块、访问控制策略模块、微博消息处理模块以及新信息处理模块，其中，微博消息存储模块，用于接收微博消息，根据微博消息包含的接收者列表信息，分类存储微博消息，对分类存储的微博消息进行计数；访问控制策略模块，用于存储新信息访问控制策略；微博消息处理模块，用于接收外部的拉取微博消息请求，从微博消息存储模块中获取拉取微博消息请求对应的微博消息，并对微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应向外部发送；新信息处理模块，用于接收外部的新信息请求，从微博消息存储模块中获取微博消息计数值，并对微博消息存储模块存储的微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息计数值的新消息提示信息向外部发送。</div>
    </div>
    </div> <div class="claim"> <div num="13" class="claim">
      <div class="claim-text">13.	一种基于新消息的通知装置，其特征在于，该装置包括：微博消息页面启动监测模块、新信息请求时间阈值存储模块、计时模块、用户状态获取模块、微博消息拉取模块、新信息拉取模块以及显示模块，其中，微博消息页面启动监测模块，用于监测客户端是否启动微博消息页面，在监测到微博消息页面启动时，向微博消息拉取模块输出触发信号；新信息请求时间阈值存储模块，用于接收微博消息拉取模块输出的新信息请求时间阈值，进行存储；接收新信息拉取模块输出的新信息请求时间阈值，更新存储的新信息请求时间阈值；计时模块，接收触发信号，进行计时，在计时到新信息请求时间阈值存储模块存储的新信息请求时间阈值时，向用户状态获取模块输出触发信号；用户状态获取模块，用于接收触发信号，获取用户状态，如果用户状态为用户驻留在微博消息页面，将当前微博消息页面标识信息输出至新信息拉取模块；微博消息拉取模块，接收触发信号，向外部的服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息输出至显示模块，将新信息请求时间阈值输出至新信息请求时间阈值存储模块，并向计时模块输出触发信号；新信息拉取模块，用于接收微博消息页面标识信息，触发生成新信息请求，向外部的服务器发送；接收服务器返回的新消息提示信息，将新消息提示信息中携带的微博消息计数值输出至显示模块，将新消息提示信息中携带的新信息请求时间阈值输出至新信息请求时间阈值存储模块；显示模块，用于将接收的微博消息以及微博消息计数值进行展示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.如权利要求13所述的装置，其特征在于，进一步包括：用户操作监测模块，用于在监测到用户对微博消息页面进行操作后，向微博消息拉取模块输出触发信号；以及，在监测到用户对显示模块展示的微博消息计数值进行确认操作后，向微博消息拉取模块输出触发信号。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.如权利要求14所述的装置，其特征在于，所述用户操作监测模块中进一步设置有用户主动操作微博消息页面的频率，在监测到用户对微博消息页面进行操作后，判断是否符合预先设置的用户主动操作微博消息页面的频率，如果符合，向微博消息拉取模块输出触发信号。</div>
    </div>
    </div> <div class="claim"> <div num="16" class="claim">
      <div class="claim-text">16.	一种基于新消息的通知装置，其特征在于，该装置包括：微博消息存储模块、访问控制策略模块、微博消息处理模块以及新信息处理模块，其中，微博消息存储模块，用于接收微博消息，根据微博消息包含的接收者列表信息，分类存储微博消息，对分类存储的微博消息进行计数；访问控制策略模块，用于存储新信息访问控制策略；微博消息处理模块，用于接收外部的拉取微博消息请求，从微博消息存储模块中获取拉取微博消息请求对应的微博消息，并对微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应向外部发送；新信息处理模块，用于接收外部的新信息请求，从微博消息存储模块中获取微博消息计数值，并对微博消息存储模块存储的微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息计数值的新消息提示信息向外部发送。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17.如权利要求16所述的装置，其特征在于，所述微博消息存储模块包括：微博消息处理单元、微博消息存储单元以及微博消息计数单元，其中，微博消息处理单元，用于接收微博消息，解析获取微博消息包含的接收者列表信息，将微博消息分别输出至接收者列表信息对应的微博消息存储单元，并向接收者列表信息对应的微博消息计数单元输出触发信号；微博消息存储单元，用于接收微博消息，并进行分类存储，设置分类存储的微博消息未读标识，根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；微博消息计数单元，用于接收触发信号，将存储的计数值加1 ；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.如权利要求17所述的装置，其特征在于，所述微博消息存储单元包括：已拉取微博消息存储子单元以及待拉取微博消息存储子单元，其中，待拉取微博消息存储子单元，用于接收微博消息并进行存储；根据微博消息处理模块的拉取微博消息请求，将存储的微博消息分别输出至微博消息处理模块以及已拉取微博消息存储子单元，并进行清空处理；已拉取微博消息存储子单元，用于存储待拉取微博消息存储子单元输出的微博消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19.如权利要求18所述的装置，其特征在于，所述待拉取微博消息存储子单元包括：用于分别存储接收的主页消息、@页消息以及私信消息，并根据微博消息处理模块的拉取微博消息请求，将存储的微博消息分别输出至微博消息处理模块以及已拉取微博消息存储子单元，并进行清空处理的待拉取主页消息存储器、待拉取@页消息存储器以及待拉取私信消息存储器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20.如权利要求19所述的装置，其特征在于，所述微博消息计数单元包括：主页消息计数子单元、@页消息计数子单元以及私信消息计数子单元，用于分别存储主页消息计数值、@ 页消息计数值以及私信消息计数值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="21" class="claim">
      <div class="claim-text">21.如权利要求20所述的装置，其特征在于，每个客户端对应一个微博消息存储单元以及一个微博消息计数单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="22" class="claim">
      <div class="claim-text">22.如权利要求17所述的装置，其特征在于，所述微博消息存储单元包括：微博消息处理单元、主页消息存储单元、@页消息存储单元、私信消息存储单元、主页消息计数单元、@ 页消息计数单元以及私信消息计数单元，其中，微博消息处理单元，用于接收微博消息，解析微博消息类型，如果微博消息为私信消息，将微博消息输出至微博消息包含的接收者对应的私信消息存储单元，并向接收者对应的私信消息计数单元输出触发信号；如果微博消息为@页消息，将微博消息输出至@页消息存储单元，并向微博消息包含的接收者列表信息对应的@页消息计数单元输出触发信号；如果微博消息为主页消息，将微博消息输出至主页消息存储单元，并向微博消息包含的接收者列表信息对应的主页消息计数单元输出触发信号；主页消息存储单元、@页消息存储单元以及私信消息存储单元，分别用于存储接收的微博消息，并设置存储的微博消息未读标识，根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；主页消息计数单元、@页消息计数单元以及私信消息计数单元，分别用于接收触发信号，将存储的计数值加1，并分别设置指向主页消息存储单元、@页消息存储单元或私信消息存储单元的新消息链接；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="23" class="claim">
      <div class="claim-text">23.如权利要求22所述的装置，其特征在于，所述主页消息存储单元和@页消息存储单元的数量分别为一个；每个客户端分别对应一个私信消息存储单元、一个主页消息计数单元、一个@页消息计数单元以及一个私信消息计数单元。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES46569986" lang="ZH" load-source="patent-office" class="description">
    <p>一种基于新消息的通知方法、装置及系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及计算机网络通信技术，特别涉及一种基于新消息的通知方法、装置及系统。</p>
    <p>背景技术</p>
    <p>[0002]	随着计算机网络技术的发展，通过点对点的技术来实现互联网上的即时沟通的即时通信（IM，Instant Messaging)工具应用越来越普遍，IM已经被大多数的用户所接受并成为用户日常生活的必不可少的一部分。</p>
    <p>[0003]	微型博客（微博）作为IM工具应用的一部分，由于具有准入技术低，可以即时通过140个字左右的一句话来表达自己情感，与关注自己的微博用户分享，用户通过微博窗口编辑微博消息，并将接收的微博消息进行展示，微博消息展示主要包括主页消息展示、@ 页消息以及私信消息展示。因而，信息传递的效率较高，其应用也越来越广泛。</p>
    <p>[0004]	实际应用中，微博是一个基于用户关系的信息分享、传播以及获取平台。在这个平台上，例如，以主页消息展示为例，用户可以通过微博客户端（以下简称客户端）的主页消息展示页面（主页），收听自己感兴趣的的粉丝发表的消息，客户端按照消息发表的时间先后顺序进行排列，即最近发表的消息排列在前，发表了较长时间的消息排列在后，并将消息展示在主页上，因此，用户通过主页，可以非常方便的根据展示的消息获知到粉丝的最新动态。</p>
    <p>[0005]	现有技术中，客户端展示的主页消息或者@页消息或者私信消息是从外部的服务器拉取的，如果有新的消息，服务器需要将用户有新消息的提示信息通知给客户端，客户端再提醒用户，以便于用户能够实时获知有新消息并进行相应处理，例如，用户根据提醒，可以及时确定浏览该新消息或忽略该新消息，服务器通过客户端将新消息的提示信息通知给用户有以下两种方式，下面分别进行描述。</p>
    <p>[0006]	第一种方式，推送（Push)机制，即由服务器主动下发新消息提示信息到客户端， 当然，也可以在下发新消息提示信息时，同时下发新消息，客户端接收新消息提示信息并提醒用户。具体来说，服务器和客户端建立通信连接并实时维系该通信连接通道，当服务器判断到客户端的主页或者其它页面拉取的消息与自身存储的该客户端的相应消息发生变化时，推送一条新消息提示信息给客户端，客户端根据接收的新消息提示信息提醒用户；</p>
    <p>[0007]	第二种方式，主动获取（Get)机制，即由客户端按照设置的时间周期主动向服务器发送新信息请求，服务器接收新信息请求并进行处理后，返回处理结果给客户端。具体来说，用户每间隔一段时间通过手动刷新页面或者设置客户端按照设置的时间周期自动触发相应页面更新，客户端接收触发信号，向服务器发送新信息请求，以获知相关页面是否有新的消息，服务器预先保存每个用户的更新标志或者计数，在服务器接收到发送至该客户端的新消息后，则相应更新存储的该用户的标志或者计数，如果查询到有更新变化，向客户端发送一条新消息提示信息，客户端根据接收的新消息提示信息提醒用户。</p>
    <p>[0008]	由上述可见，现有的基于新消息的通知方法，在推送机制下，由于服务器并不是根据客户端的需要推送提示信息，例如，当QQ用户当前处于办公状态，即QQ隐藏在后台，这时，QQ用户根本不关心微博是否有更新，因而，服务器推送下来的消息对QQ用户来说是不需要的，而且，由于微博应用中新消息数量多，服务器根据每条新消息需要推送一条提示信息，会给客户端带来额外流量的开销，增加用户的成本，降低了用户的体验。而在主动获取 (Get)机制下，通过更新标志或者计数以提醒用户，如果用户需要查询浏览消息，客户端再从服务器拉取消息，虽然可在一定程度上节省额外流量的开销，但如果Get的频率较短，也会导致Get计数的请求量非常大，使得用户操作频繁，而如果Get的频率较长，用户又不能及时得到新消息的提示信息，尤其是对于海量消息的QQ客户端，导致用户体验较差。</p>
    <p>发明内容</p>
    <p>[0009]	有鉴于此，本发明的主要目的在于提出一种基于新消息的通知方法，提高用户体验。</p>
    <p>[0010]	本发明的另一目的在于提出一种基于新消息的通知装置，提高用户体验。</p>
    <p>[0011]	本发明的再一目的在于提出一种基于新消息的通知系统，提高用户体验。</p>
    <p>[0012]	为达到上述目的，本发明提供了一种基于新消息的通知方法，该方法包括：</p>
    <p>[0013]	根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；</p>
    <p>[0014]	确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；</p>
    <p>[0015]	提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。</p>
    <p>[0016]	获取新信息请求时间阈值具体包括：</p>
    <p>[0017]	启动微博消息页面，从服务器拉取微博消息以及新信息请求时间阈值，将拉取的微博消息进行展示，并将拉取的新信息请求时间阈值进行存储。</p>
    <p>[0018]	所述微博消息页面启动，从服务器拉取微博消息并进行展示具体包括：</p>
    <p>[0019]	客户端在监测到微博消息页面启动时，向服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息进行展示，存储新信息请求时间阈值。</p>
    <p>[0020]	所述用户状态包括：用户当前驻留在微博消息页面以及用户当前离开微博消息页</p>
    <p>[0021]	所述微博消息页面包括：主页消息页面、i页消息页面以及私信消息页面。</p>
    <p>[0022]	服务器接收新信息请求，根据新信息请求中携带的用户当前微博消息页面标识获取微博消息计数值；</p>
    <p>[0023]	获取更新的新信息请求时间阈值；</p>
    <p>[0024]	将微博消息计数值以及新信息请求时间阈值携带在新消息提示信息中，发送至客户端。</p>
    <p>[0025]	所述根据用户当前微博消息页面标识获取微博消息计数值具体包括：</p>
    <p>[0026]	服务器接收新信息请求，获取存储的新信息请求所属客户端的微博消息，根据新信息请求中携带的微博消息页面标识，查询获取该微博消息页面标识对应的微博消息计数值。</p>
    <p>[0027]	所述获取更新的新信息请求时间阈值具体包括：</p>
    <p>[0028]	服务器根据获取的微博消息计数值，并按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值。</p>
    <p>[0029]	所述新信息访问控制策略具体包括：</p>
    <p>[0030]	如果当前微博消息计数值为0，将下一次新信息请求时间阈值执行指数规避；或，</p>
    <p>[0031]	存储客户端启动微博消息页面的记录以及新信息请求记录，根据启动微博消息页面的记录数以及新信息请求记录数对用户进行分级，每一级对应一个新信息请求时间阈值。</p>
    <p>[0032]	一种基于新消息的通知系统，该系统包括：客户端以及服务器，其中，</p>
    <p>[0033]	客户端，用于在首次从服务器拉取微博消息并进行展示后，根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态，如果用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识， 输出至服务器，提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示， 根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值；</p>
    <p>[0034]	服务器，用于在首次向客户端发送微博消息时，按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值，输出至客户端，并分类存储后续发送至该客户端的微博消息，对分类存储的微博消息进行计数；</p>
    <p>[0035]	接收新信息请求，获取存储的新信息请求所属客户端的微博消息，根据新信息请求中携带的微博消息页面标识，查询获取该微博消息页面标识对应的微博消息计数值，并按照预先设置的新信息访问控制策略重新计算用于新信息访问的新信息请求时间阈值，携带在新消息提示信息中，输出至客户端。</p>
    <p>[0036]	所述客户端包括：微博消息页面启动监测模块、新信息请求时间阈值存储模块、计时模块、用户状态获取模块、微博消息拉取模块、新信息拉取模块以及显示模块，其中，</p>
    <p>[0037]	微博消息页面启动监测模块，用于监测客户端是否启动微博消息页面，在监测到微博消息页面启动时，向微博消息拉取模块输出触发信号；</p>
    <p>[0038]	新信息请求时间阈值存储模块，用于接收微博消息拉取模块输出的新信息请求时间阈值，进行存储；接收新信息拉取模块输出的新信息请求时间阈值，更新存储的新信息请求时间阈值；</p>
    <p>[0039]	计时模块，接收触发信号，进行计时，在计时到新信息请求时间阈值存储模块存储的新信息请求时间阈值时，向用户状态获取模块输出触发信号；</p>
    <p>[0040]	用户状态获取模块，用于接收触发信号，获取用户状态，如果用户状态为用户驻留在微博消息页面，将当前微博消息页面标识信息输出至新信息拉取模块；</p>
    <p>[0041]	微博消息拉取模块，接收触发信号，向外部的服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息输出至显示模块，将新信息请求时间阈值输出至新信息请求时间阈值存储模块，并向计时模块输出触发信号；</p>
    <p>[0042]	新信息拉取模块，用于接收微博消息页面标识信息，触发生成新信息请求，向外部的服务器发送；接收服务器返回的新消息提示信息，将新消息提示信息中携带的微博消息计数值输出至显示模块，将新消息提示信息中携带的新信息请求时间阈值输出至新信息请求时间阈值存储模块；</p>
    <p>[0043]	显示模块，用于将接收的微博消息以及微博消息计数值进行展示。</p>
    <p>[0044]	所述服务器包括：微博消息存储模块、访问控制策略模块、微博消息处理模块以及新信息处理模块，其中，</p>
    <p>[0045]	微博消息存储模块，用于接收微博消息，根据微博消息包含的接收者列表信息，分类存储微博消息，对分类存储的微博消息进行计数；</p>
    <p>[0046]	访问控制策略模块，用于存储新信息访问控制策略；</p>
    <p>[0047]	微博消息处理模块，用于接收外部的拉取微博消息请求，从微博消息存储模块中获取拉取微博消息请求对应的微博消息，并对微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应向外部发送；</p>
    <p>[0048]	新信息处理模块，用于接收外部的新信息请求，从微博消息存储模块中获取微博消息计数值，并对微博消息存储模块存储的微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息计数值的新消息提示信息向外部发送。</p>
    <p>[0049]	一种基于新消息的通知装置，该装置包括：微博消息页面启动监测模块、新信息请求时间阈值存储模块、计时模块、用户状态获取模块、微博消息拉取模块、新信息拉取模块以及显示模块，其中，</p>
    <p>[0050]	微博消息页面启动监测模块，用于监测客户端是否启动微博消息页面，在监测到微博消息页面启动时，向微博消息拉取模块输出触发信号；</p>
    <p>[0051]	新信息请求时间阈值存储模块，用于接收微博消息拉取模块输出的新信息请求时间阈值，进行存储；接收新信息拉取模块输出的新信息请求时间阈值，更新存储的新信息请求时间阈值；</p>
    <p>[0052]	计时模块，接收触发信号，进行计时，在计时到新信息请求时间阈值存储模块存储的新信息请求时间阈值时，向用户状态获取模块输出触发信号；</p>
    <p>[0053]	用户状态获取模块，用于接收触发信号，获取用户状态，如果用户状态为用户驻留在微博消息页面，将当前微博消息页面标识信息输出至新信息拉取模块；</p>
    <p>[0054]	微博消息拉取模块，接收触发信号，向外部的服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息输出至显示模块，将新信息请求时间阈值输出至新信息请求时间阈值存储模块，并向计时模块输出触发信号；</p>
    <p>[0055]	新信息拉取模块，用于接收微博消息页面标识信息，触发生成新信息请求，向外部的服务器发送；接收服务器返回的新消息提示信息，将新消息提示信息中携带的微博消息计数值输出至显示模块，将新消息提示信息中携带的新信息请求时间阈值输出至新信息请求时间阈值存储模块；</p>
    <p>[0056]	显示模块，用于将接收的微博消息以及微博消息计数值进行展示。</p>
    <p>[0057]	进一步包括：[0058]	用户操作监测模块，用于在监测到用户对微博消息页面进行操作后，向微博消息拉取模块输出触发信号；以及，在监测到用户对显示模块展示的微博消息计数值进行确认操作后，向微博消息拉取模块输出触发信号。</p>
    <p>[0059]	所述用户操作监测模块中进一步设置有用户主动操作微博消息页面的频率，在监测到用户对微博消息页面进行操作后，判断是否符合预先设置的用户主动操作微博消息页面的频率，如果符合，向微博消息拉取模块输出触发信号。</p>
    <p>[0060]	一种基于新消息的通知装置，该装置包括：微博消息存储模块、访问控制策略模块、微博消息处理模块以及新信息处理模块，其中，</p>
    <p>[0061]	微博消息存储模块，用于接收微博消息，根据微博消息包含的接收者列表信息，分类存储微博消息，对分类存储的微博消息进行计数；</p>
    <p>[0062]	访问控制策略模块，用于存储新信息访问控制策略；</p>
    <p>[0063]	微博消息处理模块，用于接收外部的拉取微博消息请求，从微博消息存储模块中获取拉取微博消息请求对应的微博消息，并对微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应向外部发送；</p>
    <p>[0064]	新信息处理模块，用于接收外部的新信息请求，从微博消息存储模块中获取微博消息计数值，并对微博消息存储模块存储的微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息计数值的新消息提示信息向外部发送。</p>
    <p>[0065]	所述微博消息存储模块包括：微博消息处理单元、微博消息存储单元以及微博消息计数单元，其中，</p>
    <p>[0066]	微博消息处理单元，用于接收微博消息，解析获取微博消息包含的接收者列表信息，将微博消息分别输出至接收者列表信息对应的微博消息存储单元，并向接收者列表信息对应的微博消息计数单元输出触发信号；</p>
    <p>[0067]	微博消息存储单元，用于接收微博消息，并进行分类存储，设置分类存储的微博消息未读标识，根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；</p>
    <p>[0068]	微博消息计数单元，用于接收触发信号，将存储的计数值加1 ；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新。</p>
    <p>[0069]	所述微博消息存储单元包括：已拉取微博消息存储子单元以及待拉取微博消息存储子单元，其中，</p>
    <p>[0070]	待拉取微博消息存储子单元，用于接收微博消息并进行存储；根据微博消息处理模块的拉取微博消息请求，将存储的微博消息分别输出至微博消息处理模块以及已拉取微博消息存储子单元，并进行清空处理；</p>
    <p>[0071]	已拉取微博消息存储子单元，用于存储待拉取微博消息存储子单元输出的微博消肩、ο</p>
    <p>[0072]	所述待拉取微博消息存储子单元包括：</p>
    <p>[0073]	用于分别存储接收的主页消息、@页消息以及私信消息，并根据微博消息处理模块的拉取微博消息请求，将存储的微博消息分别输出至微博消息处理模块以及已拉取微博消息存储子单元，并进行清空处理的待拉取主页消息存储器、待拉取@页消息存储器以及待拉取私信消息存储器。</p>
    <p>[0074]	所述微博消息计数单元包括：主页消息计数子单元、@页消息计数子单元以及私信消息计数子单元，用于分别存储主页消息计数值、@页消息计数值以及私信消息计数值。</p>
    <p>[0075]	每个客户端对应一个微博消息存储单元以及一个微博消息计数单元。</p>
    <p>[0076]	所述微博消息存储单元包括：微博消息处理单元、主页消息存储单元、@页消息存储单元、私信消息存储单元、主页消息计数单元、@页消息计数单元以及私信消息计数单元， 其中，</p>
    <p>[0077]	微博消息处理单元，用于接收微博消息，解析微博消息类型，</p>
    <p>[0078]	如果微博消息为私信消息，将微博消息输出至微博消息包含的接收者对应的私信消息存储单元，并向接收者对应的私信消息计数单元输出触发信号；</p>
    <p>[0079]	如果微博消息为@页消息，将微博消息输出至@页消息存储单元，并向微博消息包含的接收者列表信息对应的@页消息计数单元输出触发信号；</p>
    <p>[0080]	如果微博消息为主页消息，将微博消息输出至主页消息存储单元，并向微博消息包含的接收者列表信息对应的主页消息计数单元输出触发信号；</p>
    <p>[0081]	主页消息存储单元、@页消息存储单元以及私信消息存储单元，分别用于存储接收的微博消息，并设置存储的微博消息未读标识，根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；</p>
    <p>[0082]	主页消息计数单元、@页消息计数单元以及私信消息计数单元，分别用于接收触发信号，将存储的计数值加1，并分别设置指向主页消息存储单元、@页消息存储单元或私信消息存储单元的新消息链接；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新。</p>
    <p>[0083]	所述主页消息存储单元和@页消息存储单元的数量分别为一个；每个客户端分别对应一个私信消息存储单元、一个主页消息计数单元、一个@页消息计数单元以及一个私信消息计数单元。</p>
    <p>[0084]	由上述的技术方案可见，本发明提供的一种基于新消息的通知方法、装置及系统， 启动微博消息页面，从服务器拉取微博消息以及新信息请求时间阈值，并将拉取的微博消息进行展示；根据获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；根据用户当前微博消息页面标识获取微博消息计数值；获取更新的新信息请求时间阈值；提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。这样，通过设置新信息请求时间阈值，可以避免用户的频繁操作；同时，在确定用户驻留在微博消息页面，才触发新信息请求，避免给客户端带来额外流量的开销，并降低用户的使用成本；而且，根据请求用户的微博消息计数值，动态调整新信息请求时间阈值，从而为用户提供更好的体验。</p>
    <p>附图说明[0085]	图1为本发明实施例基于新消息的通知方法流程示意图。</p>
    <p>[0086]	图2为本发明实施例基于新消息的通知系统结构示意图。</p>
    <p>[0087]	图3为本发明实施例客户端的结构示意图。</p>
    <p>[0088]	图4为本发明实施例服务器的结构示意图。</p>
    <p>具体实施方式</p>
    <p>[0089]	为使本发明的目的、技术方案和优点更加清楚，下面将结合附图及具体实施例对本发明作进一步地详细描述。</p>
    <p>[0090]	微博作为一个互联网的一个新的应用，正在飞速发展，越来越成为一种信息获取和沟通的重要方式。本发明实施例以微博客户端为载体，提出一种通知微博客户端主页、 @页以及私信页新消息的方法，以提供客户端消息变化通知的实现方案，使得对于用户发表的消息，能够快速地通知接收消息的用户，并推送给消息接收者，提升用户使用微博的便利。</p>
    <p>[0091]	实际应用中，由于使用微博版本的QQ客户端涉及的用户量和消息量非常大，以下以QQ客户端为例进行说明，对于在线使用微博版本QQ的用户，用户期望能够即时地获知微博主页、@页、私信页等页面是否有最新更新消息的提醒；而且，进一步地，期望这个提醒趋向于弱提醒，即不会影响用户的其它操作，用户可以根据自身的需要，决定是否去查看微博具体的更新消息。当然，对于其它客户端的用户，也可以利用该功能获知到各个信息页的更新情况。</p>
    <p>[0092]	所应说明的是，本发明的实施例同样可以应用于其它IM，例如，QQ、MSN等。</p>
    <p>[0093]	基于上述分析和说明，本发明实施例的通知新消息的方法，采用Push和Get相结合的方式。其中，Get是主导功能，用于获取用户更新计数，Push是辅导功能，用于通知客户端前来Get用户更新计数，服务器为每一个用户保存各个页面的更新计数值，客户端通过Get获取该更新计数值，确定用户的各个页面是否有新的消息，如果有，提醒用户；同时， 为了有效控制用户的新信息请求，服务器动态计算每个用户下一次Get的频率以及Get数据的频率并通知客户端，客户端根据服务器动态下发的频率触发生成新信息请求。所应说明的是，对于用户刷新页面主动触发生成新信息请求的情形，与现有技术相同，在此不再赘述。</p>
    <p>[0094]	图1为本发明实施例基于新消息的通知方法流程示意图。参见图1，该流程包括：</p>
    <p>[0095]	步骤101，微博消息页面启动，从服务器拉取微博消息以及新信息请求时间阈值， 并将拉取的微博消息进行展示；</p>
    <p>[0096]	本步骤具体包括：</p>
    <p>[0097]	客户端在监测到微博消息页面启动时，向服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息进行展示，存储新信息请求时间阈值。其中，</p>
    <p>[0098]	新信息请求时间阈值为服务器按照预先设置的新信息访问控制策略计算得到。</p>
    <p>[0099]	步骤102，根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；</p>
    <p>[0100]	本步骤中，用户状态包括：用户当前驻留在微博消息页面以及用户当前离开微博消息页面。</p>
    <p>[0101]	步骤103，确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；</p>
    <p>[0102]	本步骤中，微博消息页面包括：主页消息页面、i页消息页面以及私信消息页面。</p>
    <p>[0103]	步骤104，根据用户当前微博消息页面标识获取微博消息计数值；</p>
    <p>[0104]	本步骤中，服务器接收新信息请求，获取存储的新信息请求所属客户端的微博消息，根据新信息请求中携带的微博消息页面标识，查询获取该微博消息页面标识对应的微博消息计数值。</p>
    <p>[0105]	步骤105，获取更新的新信息请求时间阈值；</p>
    <p>[0106]	本步骤中，服务器根据获取的微博消息计数值，并按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值。</p>
    <p>[0107]	新信息访问控制策略具体包括：</p>
    <p>[0108]	如果当前微博消息计数值为0，将下一次新信息请求时间阈值（更新计数访问的频率）执行指数规避。例如，假设默认更新频率（新信息请求时间阈值）为5分钟，则在客户端第一次Get访问时，如果更新计数为0，则将客户端第二次访问的频率设置为10分钟； 第二次Get访问时，如果更新计数仍然为0，则将客户端第三次访问的频率为20分钟，以此类推。或者，</p>
    <p>[0109]	存储客户端启动微博消息页面的记录以及新信息请求记录，根据启动微博消息页面的记录数以及新信息请求记录数对用户进行分级，每一级对应一个新信息请求时间阈值。例如，如果用户从来没有打开过微博消息页面，设置服务器返回一个比较大的新信息请求时间阈值；如果用户频繁地使用微博，设置服务器相应返回较小的新信息请求时间阈值。 或者，</p>
    <p>[0110]	综合考虑上述两种方案确定新信息请求时间阈值。</p>
    <p>[0111]	步骤106，提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。</p>
    <p>[0112]	图2为本发明实施例基于新消息的通知系统结构示意图。参见图2，该系统包括： 客户端以及服务器，其中，</p>
    <p>[0113]	客户端，用于在首次从服务器拉取微博消息并进行展示后，根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态，如果用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识， 输出至服务器，提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示， 根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值；</p>
    <p>[0114]	本发明实施例中，客户端首次从服务器拉取微博消息并进行展示包括：客户端在监测到微博消息页面启动时，向服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息进行展示，存储新信息请求时间阈值。</p>
    <p>[0115]	微博消息页面包括：主页消息页面、@页消息页面以及私信消息页面。[0116]	本发明实施例中，微博消息包括微博客户端主页消息、i页消息以及私信页消息， 其中，主页是指微博中微博用户及微博用户收听的人发布的消息页面，@页包含三类消息页面，第一类消息页面是指微博中提及微博用户的消息页面以及显示提及微博用户（例如，@ ppchen)的微博消息的页面；第二类消息页面是指微博中回复微博用户（例如，(ippchen)的微博消息的页面；第三类消息页面是指微博中其他微博用户与微博用户进行私信的微博消息的页面。</p>
    <p>[0117]	实际应用中，客户端监测微博消息页面是否启动，可以通过在客户端启动后，用户是否登录微博消息页面，如果登录，则微博消息页面启动，并判断用户启动的是主页消息页面、@页消息页面以及私信消息页面中的哪一页面，从而拉取启动页面对应的消息。</p>
    <p>[0118]	客户端在监测到微博消息页面启动，并从服务器拉取微博消息，与现有技术相同， 不同的是，服务器返回的拉取微博消息请求响应中还携带有新信息请求时间阈值，用于指示客户端采用主动获取机制获取服务器是否有该客户端新消息的频率。</p>
    <p>[0119]	用户状态包括：用户当前驻留在微博消息页面以及用户当前离开微博消息页面。</p>
    <p>[0120]	服务器，用于在首次向客户端发送微博消息时，按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值，输出至客户端，并分类存储后续发送至该客户端的微博消息，对分类存储的微博消息进行计数；</p>
    <p>[0121]	接收新信息请求，获取存储的新信息请求所属客户端的微博消息，根据新信息请求中携带的微博消息页面标识，查询获取该微博消息页面标识对应的微博消息计数值，并按照预先设置的新信息访问控制策略重新计算用于新信息访问的新信息请求时间阈值，携带在新消息提示信息中，输出至客户端。</p>
    <p>[0122]	本发明实施例中，服务器接收拉取微博消息请求，获取拉取微博消息请求所属的客户端的微博消息，并按照预先设置的新信息访问控制策略计算用于新信息访问的新信息请求时间阈值，与获取的微博消息一起，携带在拉取微博消息请求响应中，输出至客户端。</p>
    <p>[0123]	本发明实施例中，客户端的数量可以为一个或多个，服务器的数量可以为一个或多个。</p>
    <p>[0124]	后续中，用户根据展示的微博消息计数值触发客户端从服务器拉取相应的微博消息，属于现有技术，具体可参见相关技术文献，在此不再赘述。</p>
    <p>[0125]	下面对本发明实施例的客户端以及服务器分别进行说明。</p>
    <p>[0126]	图3为本发明实施例客户端的结构示意图。参见图3，该客户端包括：微博消息页面启动监测模块、新信息请求时间阈值存储模块、计时模块、用户状态获取模块、微博消息拉取模块、新信息拉取模块以及显示模块，其中，</p>
    <p>[0127]	微博消息页面启动监测模块，用于监测客户端是否启动微博消息页面，在监测到微博消息页面启动时，向微博消息拉取模块输出触发信号；</p>
    <p>[0128]	新信息请求时间阈值存储模块，用于接收微博消息拉取模块输出的新信息请求时间阈值，进行存储；接收新信息拉取模块输出的新信息请求时间阈值，更新存储的新信息请求时间阈值；</p>
    <p>[0129]	计时模块，接收触发信号，进行计时，在计时到新信息请求时间阈值存储模块存储的新信息请求时间阈值时，向用户状态获取模块输出触发信号；</p>
    <p>[0130]	用户状态获取模块，用于接收触发信号，获取用户状态，如果用户状态为用户驻留在微博消息页面，将当前微博消息页面标识信息输出至新信息拉取模块；</p>
    <p>[0131]	微博消息拉取模块，接收触发信号，向外部的服务器发送拉取微博消息请求，接收服务器返回的携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应，将响应中携带的微博消息输出至显示模块，将新信息请求时间阈值输出至新信息请求时间阈值存储模块，并向计时模块输出触发信号；</p>
    <p>[0132]	新信息拉取模块，用于接收微博消息页面标识信息，触发生成新信息请求，向外部的服务器发送；接收服务器返回的新消息提示信息，将新消息提示信息中携带的微博消息计数值输出至显示模块，将新消息提示信息中携带的新信息请求时间阈值输出至新信息请求时间阈值存储模块；</p>
    <p>[0133]	显示模块，用于将接收的微博消息以及微博消息计数值进行展示。</p>
    <p>[0134]	本发明实施例中，该客户端还可以进一步包括：</p>
    <p>[0135]	用户操作监测模块，用于在监测到用户对微博消息页面进行操作后，向微博消息拉取模块输出触发信号；以及，在监测到用户对显示模块展示的微博消息计数值进行确认操作后，向微博消息拉取模块输出触发信号。</p>
    <p>[0136]	现有技术中，对于用户的主动操作微博消息页面，客户端都自动触发拉取相应的微博消息，但实际应用中，用户在对微博消息页面进行操作时，可能在各个微博消息页面进行频繁切换或频繁刷新，而并非期望获取相关的微博消息，这样，如果用户操作监测模块在监测到用户对微博消息页面进行操作后，触发微博消息拉取模块拉取相应的微博消息，例如，对于频繁切换，由于拉取微博消息具有一定的时延性，在当前微博消息页面还未拉取到相应的微博消息时，用户已切换至其它微博消息页面，使得随后拉取到的微博消息不能展示，从而带来额外流量的开销。因而，本发明实施例中，可以进一步在用户操作监测模块中设置用户主动操作微博消息页面的频率，用户操作监测模块在监测到用户对微博消息页面进行操作后，判断是否符合预先设置的用户主动操作微博消息页面的频率，如果符合，向微博消息拉取模块输出触发信号。这样，通过对用户主动操作进行策略控制，可以有效减少用户频繁刷新或切换微博消息页面导致的频繁拉取微博消息而导致的额外流量开销。</p>
    <p>[0137]	设置的用户主动操作微博消息页面的频率信息可以通过用户设定，也可以通过服务器下发的方式获取。</p>
    <p>[0138]	本发明实施例中，各模块输出的触发信号可以相同，也可以不同，仅用于触发相应模块启动相应的处理流程。</p>
    <p>[0139]	图4为本发明实施例服务器的结构示意图。参见图4，该服务器包括：微博消息存储模块、访问控制策略模块、微博消息处理模块以及新信息处理模块，其中，</p>
    <p>[0140]	微博消息存储模块，用于接收微博消息，根据微博消息包含的接收者列表信息，分类存储微博消息，对分类存储的微博消息进行计数；</p>
    <p>[0141]	访问控制策略模块，用于存储新信息访问控制策略；</p>
    <p>[0142]	微博消息处理模块，用于接收外部的拉取微博消息请求，从微博消息存储模块中获取拉取微博消息请求对应的微博消息，并对微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息的拉取微博消息请求响应向外部发送；</p>
    <p>[0143]	新信息处理模块，用于接收外部的新信息请求，从微博消息存储模块中获取微博消息计数值，并对微博消息存储模块存储的微博消息计数值进行更新；根据访问控制策略模块中的新信息访问控制策略，计算用于新信息访问的新信息请求时间阈值，将携带新信息请求时间阈值以及微博消息计数值的新消息提示信息向外部发送。</p>
    <p>[0144]	新消息提示信息中可以包括：该客户端下一次拉取更新计数的频率、各个页面数据读取频率以及用户主动刷新各页面的频率。</p>
    <p>[0145]	本发明实施例中，微博消息存储模块包括：微博消息处理单元、微博消息存储单元以及微博消息计数单元（图中未示出），其中，</p>
    <p>[0146]	微博消息处理单元，用于接收微博消息，解析获取微博消息包含的接收者列表信息，将微博消息分别输出至接收者列表信息对应的微博消息存储单元，并向接收者列表信息对应的微博消息计数单元输出触发信号；</p>
    <p>[0147]	微博消息存储单元，用于接收微博消息，并进行分类存储，设置分类存储的微博消息未读标识，根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；</p>
    <p>[0148]	微博消息计数单元，用于接收触发信号，将存储的计数值加1 ；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新。</p>
    <p>[0149]	上述示例中，每个客户端对应一个微博消息存储单元以及一个微博消息计数单元。其中，</p>
    <p>[0150]	微博消息存储单元包括：已拉取微博消息存储子单元以及待拉取微博消息存储子单元（图中未示出），其中，</p>
    <p>[0151]	待拉取微博消息存储子单元，用于接收微博消息并进行存储；根据微博消息处理模块的拉取微博消息请求，将存储的微博消息分别输出至微博消息处理模块以及已拉取微博消息存储子单元，并进行清空处理；</p>
    <p>[0152]	已拉取微博消息存储子单元，用于存储待拉取微博消息存储子单元输出的微博消肩、ο</p>
    <p>[0153]	本发明实施例中，在客户端的微博消息页面启动时，服务器将已拉取微博消息存储子区以及待拉取微博消息存储子区存储的微博消息下发至客户端。</p>
    <p>[0154]	如果已拉取微博消息存储子区的存储空间已满，则可以采用先进先出的方式进行更新。</p>
    <p>[0155]	这样，待拉取微博消息存储子单元就相当于为微博消息设置未读标识。</p>
    <p>[0156]	进一步地，待拉取微博消息存储子单元可以包括：待拉取主页消息存储器、待拉取 @页消息存储器以及待拉取私信消息存储器，用于分别存储接收的主页消息、@页消息以及私信消息，并根据微博消息处理模块的拉取微博消息请求，将存储的微博消息分别输出至微博消息处理模块以及已拉取微博消息存储子单元，并进行清空处理。</p>
    <p>[0157]	同样地，微博消息计数单元可以包括：主页消息计数子单元、@页消息计数子单元以及私信消息计数子单元，用于分别存储主页消息计数值、@页消息计数值以及私信消息计数值。</p>
    <p>[0158]	实际应用中，由于微博消息包括主页消息、@页消息以及私信消息，对于私信消息， 消息接收者只有一个，而对于主页消息以及@页消息，消息接收者为一个或多个。这样，如果将主页消息以及@页消息按照接收者列表信息分别进行存储，将耗费服务器较多的存储空间，因而，本发明实施例中，微博消息存储模块也可以包括：微博消息处理单元、主页消息存储单元、@页消息存储单元、私信消息存储单元、主页消息计数单元、@页消息计数单元以及私信消息计数单元，其中，</p>
    <p>[0159]	微博消息处理单元，用于接收微博消息，解析微博消息类型，</p>
    <p>[0160]	如果微博消息为私信消息，将微博消息输出至微博消息包含的接收者对应的私信消息存储单元，并向接收者对应的私信消息计数单元输出触发信号；</p>
    <p>[0161]	如果微博消息为@页消息，将微博消息输出至@页消息存储单元，并向微博消息包含的接收者列表信息对应的@页消息计数单元输出触发信号；</p>
    <p>[0162]	如果微博消息为主页消息，将微博消息输出至主页消息存储单元，并向微博消息包含的接收者列表信息对应的主页消息计数单元输出触发信号；</p>
    <p>[0163]	主页消息存储单元，用于存储接收的微博消息，并设置存储的微博消息未读标识， 根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；</p>
    <p>[0164]	@页消息存储单元，用于存储接收的微博消息，并设置存储的微博消息未读标识， 根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；</p>
    <p>[0165]	本发明实施例中，主页消息存储单元和@页消息存储单元为一个。</p>
    <p>[0166]	私信消息存储单元，用于存储接收的微博消息，并设置存储的微博消息未读标识， 根据微博消息处理模块的拉取微博消息请求，将设置有未读标识的微博消息输出至微博消息处理模块并更新该微博消息未读标识为已读标识；</p>
    <p>[0167]	本发明实施例中，每个客户端对应一个私信消息存储单元。</p>
    <p>[0168]	主页消息计数单元，用于接收触发信号，将存储的计数值加1，并设置指向主页消息存储单元的新消息链接；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新；</p>
    <p>[0169]	@页消息计数单元，用于接收触发信号，将存储的计数值加1，并设置指向@页消息存储单元的新消息链接；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新；</p>
    <p>[0170]	私信消息计数单元，用于接收触发信号，将存储的计数值加1 ；接收微博消息处理模块输出的更新信息，对存储的计数值进行更新。</p>
    <p>[0171]	本发明实施例中，每个客户端分别对应一个主页消息计数单元、@页消息计数单元以及私信消息计数单元。可以通过客户端标识以及微博消息类型标识进行区分。</p>
    <p>[0172]	实际应用中，服务器还可以主动触发Push消息的功能，每当用户的更新计数发生变化时，服务器首先将更新计数的频率恢复到默认值，然后检查是否满足Push条件，如果满足Push条件，服务器将主动Push &#8212;条消息提示信息，通知客户端拉取更新计数，否则，不作处理。</p>
    <p>[0173]	Push条件包括：时间差阀值、更新计数阀值、Push开关状态以及客户端状态，其中，</p>
    <p>[0174]	如果上一次Get的时间和当前时间的时间差大于设置的时间差阀值，满足Push条件；[0175]	用户累计的更新计数值大于更新计数阀值，满足Push条件；</p>
    <p>[0176]	客户端状态为用户在线，设置Push开关为开，满足Push条件，客户端状态为用户不在线，设置Push开关为关，当监测到用户在线后，客户端会调用协议打开Push开关。</p>
    <p>[0177]	实际应用中，为了避免不必要的拉取请求，基于上述分析，客户端进行拉取遵从如下原则：</p>
    <p>[0178]	(1)登录后，严格按照服务器下发的频率Get更新计数和数据；</p>
    <p>[0179]	(2)当前已告知用户有更新状态，但用户没有去读，将始终保留更新状态，不再去 Get更新计数和数据；</p>
    <p>[0180]	C3)QQ客户端不在用户客户端前台时，将不会Get更新计数和数据，每次由后台变到前台，在满足频率限制的条件下Get &#8212;次更新计数；</p>
    <p>[0181]	(4)如果用户不在微博面板，最多Get &#8212;次数据；如果用户在微博面板时，在满足频率限制条件下，循环Get更新计数，如果有新的更新计数，在满足数据拉去频率限制条件下，自动将当前页更新的消息拉取到客户端，提醒用户；</p>
    <p>[0182]	(5)如果拉取不到更新计数（拉取失败），下一次拉取更新计数的频率进行指数规避。</p>
    <p>[0183]	进一步地，为了避免因为自动拉取逻辑带来请求量不可控情况。本发明实施例中， 对用户拉取请求进行分级：</p>
    <p>[0184]	用户首次切换到微博面板导致拉取数据的级别为1 ；用户主动刷新导致数据拉取的级别为2 ；自动拉去逻辑导致拉取数据的级别为3等。其中，级别1的优先级最高，对于级别高的请求，服务器将优先响应，级别低的请求，服务器可以根据自身的负载情况，决定是否拒绝请求。</p>
    <p>[0185]	由上述可见，本发明实施例的基于新消息的通知方法、装置及系统，在微博消息页面启动时，从服务器拉取微博消息并进行展示；根据预先获取的新信息请求时间阈值，进行计时，并在计时到新信息请求时间阈值时，获取用户状态；确定用户状态为用户驻留在微博消息页面，触发生成新信息请求，携带用户当前微博消息页面标识，输出至服务器；获取微博消息计数值；获取更新的新信息请求时间阈值；提取服务器返回的新消息提示信息中包含的微博消息计数值，向用户展示，根据新消息提示信息中包含的新信息请求时间阈值更新预先获取的新信息请求时间阈值。这样，通过设置新信息请求时间阈值，可以避免用户的频繁操作；同时，在确定用户驻留在微博消息页面，才触发新信息请求，避免了客户端在用户没有驻留在微博消息页面时自动拉取微博消息的操作，避免给客户端带来额外流量的开销，并降低用户的使用成本；而且，通过服务器的新信息访问控制策略，服务器可以掌控用户的拉取请求量，根据请求用户的微博消息计数值或用户分级，动态调整新信息请求时间阈值，可以为用户提供更好的服务，从而为用户提供更好的体验。</p>
    <p>[0186]	以上所述仅为本发明的较佳实施例而已，并非用于限定本发明的保护范围。凡在本发明的精神和原则之内，所作的任何修改、等同替换以及改进等，均应包含在本发明的保护范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1992618A?cl=zh">CN1992618A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2005年12月30日</td><td class="patent-data-table-td patent-date-value">2007年7月4日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">控制即时通讯客户端显示用户状态的方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101193081A?cl=zh">CN101193081A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年12月21日</td><td class="patent-data-table-td patent-date-value">2008年6月4日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">信息提示方法和终端</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101247363A?cl=zh">CN101247363A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年3月26日</td><td class="patent-data-table-td patent-date-value">2008年8月20日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">实现即时通讯消息弱提示的方法、客户端及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101425093A?cl=zh">CN101425093A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年12月5日</td><td class="patent-data-table-td patent-date-value">2009年5月6日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">基于社会性网络关系链的联系人动态内容聚合方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101431484A?cl=zh">CN101431484A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年11月24日</td><td class="patent-data-table-td patent-date-value">2009年5月13日</td><td class="patent-data-table-td ">阿里巴巴集团控股有限公司</td><td class="patent-data-table-td ">一种传送消息的方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101552740A?cl=zh">CN101552740A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年5月14日</td><td class="patent-data-table-td patent-date-value">2009年10月7日</td><td class="patent-data-table-td ">腾讯科技（北京）有限公司</td><td class="patent-data-table-td ">即时通信系统、客户端、服务器及判定在线状态的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101848244A?cl=zh">CN101848244A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年5月21日</td><td class="patent-data-table-td patent-date-value">2010年9月29日</td><td class="patent-data-table-td ">宇龙计算机通信科技(深圳)有限公司</td><td class="patent-data-table-td ">一种更新移动终端上博客内容的实现方法、系统及移动终端</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20030208545">US20030208545</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2002年5月1日</td><td class="patent-data-table-td patent-date-value">2003年11月6日</td><td class="patent-data-table-td ">Eaton Eric Thomas</td><td class="patent-data-table-td ">Instant message communication system for providing notification of one or more events and method therefor</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20080201419">US20080201419</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年2月21日</td><td class="patent-data-table-td patent-date-value">2008年8月21日</td><td class="patent-data-table-td ">Hung H K Michael</td><td class="patent-data-table-td ">Efficient transmission of presence update information to presence service clients</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20080291896">US20080291896</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年12月28日</td><td class="patent-data-table-td patent-date-value">2008年11月27日</td><td class="patent-data-table-td ">Tauri Tuubel</td><td class="patent-data-table-td ">Detection of communication states</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102831227A?cl=zh">CN102831227A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年8月28日</td><td class="patent-data-table-td patent-date-value">2012年12月19日</td><td class="patent-data-table-td ">东莞宇龙通信科技有限公司</td><td class="patent-data-table-td ">一种浏览社交应用的信息流的方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103389853A?cl=zh">CN103389853A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年5月11日</td><td class="patent-data-table-td patent-date-value">2013年11月13日</td><td class="patent-data-table-td ">金蝶软件（中国）有限公司</td><td class="patent-data-table-td ">微博展示方法和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN104125141A?cl=zh">CN104125141A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年4月28日</td><td class="patent-data-table-td patent-date-value">2014年10月29日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">一种通知消息的推送方法、服务器、用户终端及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2890077A4?cl=zh">EP2890077A4</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年8月21日</td><td class="patent-data-table-td patent-date-value">2015年8月5日</td><td class="patent-data-table-td ">Tencent Tech Shenzhen Co Ltd</td><td class="patent-data-table-td ">Method and apparatus for acquiring dynamic message</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2014029332A1?cl=zh">WO2014029332A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年8月21日</td><td class="patent-data-table-td patent-date-value">2014年2月27日</td><td class="patent-data-table-td ">Tencent Technology (Shenzhen) Company Limited</td><td class="patent-data-table-td ">一种获取动态消息的方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2014173151A1?cl=zh">WO2014173151A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年12月19日</td><td class="patent-data-table-td patent-date-value">2014年10月30日</td><td class="patent-data-table-td ">Tencent Technology (Shenzhen) Company Limited</td><td class="patent-data-table-td ">Method, device and terminal for data processing</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2015021846A1?cl=zh">WO2015021846A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2014年7月17日</td><td class="patent-data-table-td patent-date-value">2015年2月19日</td><td class="patent-data-table-td ">Tencent Technology (Shenzhen) Company Limited</td><td class="patent-data-table-td ">Systems and methods for sending messages</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=HldwBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012580000">H04L12/58</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=HldwBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029060000">H04L29/06</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2012年5月9日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2012年6月27日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年6月18日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/6c8c3da75dbf3d0fda08/CN102447647A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8E%E6%96%B0%E6%B6%88%E6%81%AF%E7%9A%84%E9%80%9A%E7%9F%A5%E6%96%B9%E6%B3%95_%E8%A3%85.pdf?id=HldwBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1KuSzhXRRdbc8iq5tlW_vOfLDTiQ"},"sample_url":"https://www.google.com/patents/reader?id=HldwBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>