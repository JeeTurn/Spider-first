<!DOCTYPE html><html><head><title>专利 CN101689115A - 信息处理方法和程序 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="信息处理方法和程序"><meta name="DC.contributor" content="山田浩示" scheme="inventor"><meta name="DC.contributor" content="佳能株式会社" scheme="assignee"><meta name="DC.date" content="2008-5-28" scheme="dateSubmitted"><meta name="DC.description" content="当启动构成用于容易地对多个软件等集中进行安装操作的程序的安装程序时，对于每一命令，必须在管理员帐户和其它帐户之间进行适当切换之后再执行安装操作和启动程序命令等的命令。当在本发明中启动安装程序时，在管理员帐户和用户帐户的进程之间确保进程间通信，并且在管理员帐户的进程中确定用以执行包括在该安装程序中的命令的帐户。如果确定结果表示用以执行该命令的帐户是用户帐户，则在用户帐户的进程中而不是在管理员帐户的进程中执行该命令。"><meta name="DC.date" content="2010-3-31"><meta name="citation_patent_publication_number" content="CN:101689115:A"><meta name="citation_patent_application_number" content="CN:200880020058"><link rel="canonical" href="https://www.google.com/patents/CN101689115A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101689115A?cl=zh"/><meta name="title" content="专利 CN101689115A - 信息处理方法和程序"/><meta name="description" content="当启动构成用于容易地对多个软件等集中进行安装操作的程序的安装程序时，对于每一命令，必须在管理员帐户和其它帐户之间进行适当切换之后再执行安装操作和启动程序命令等的命令。当在本发明中启动安装程序时，在管理员帐户和用户帐户的进程之间确保进程间通信，并且在管理员帐户的进程中确定用以执行包括在该安装程序中的命令的帐户。如果确定结果表示用以执行该命令的帐户是用户帐户，则在用户帐户的进程中而不是在管理员帐户的进程中执行该命令。"/><meta property="og:title" content="专利 CN101689115A - 信息处理方法和程序"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101689115A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101689115A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101689115A&amp;usg=AFQjCNH4F54_mJoufTUxFzaccYiVVGoD1A" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/df496ea78fa3479385e3/CN101689115A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/df496ea78fa3479385e3/CN101689115A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101689115A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101689115A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101689115A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101689115B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101689115A?cl=zh" style="display:none"><span itemprop="description">当启动构成用于容易地对多个软件等集中进行安装操作的程序的安装程序时，对于每一命令，必须在管理员帐户和其它帐户之间进行适当切换之后再执行安装操作和启动程序命令等的命令。当在本发明中启动安装程序时，在管理...</span><span itemprop="url">https://www.google.com/patents/CN101689115A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101689115A - 信息处理方法和程序</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101689115A - 信息处理方法和程序" title="专利 CN101689115A - 信息处理方法和程序"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101689115 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200880020058</td></tr><tr><td class="patent-bibdata-heading"> 专利合作条约 (PCT) 编号</td><td class="single-patent-bibdata">PCT/JP2008/060250</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2010年3月31日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2008年5月28日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年6月12日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101689115B?hl=zh-CN&amp;cl=zh">CN101689115B</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2168037A1?hl=zh-CN&amp;cl=zh">EP2168037A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/US9171177?hl=zh-CN&amp;cl=zh">US9171177</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20100095294?hl=zh-CN&amp;cl=zh">US20100095294</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2008152954A1?hl=zh-CN&amp;cl=zh">WO2008152954A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2008152954A4?hl=zh-CN&amp;cl=zh">WO2008152954A4</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200880020058.5, </span><span class="patent-bibdata-value">CN 101689115 A, </span><span class="patent-bibdata-value">CN 101689115A, </span><span class="patent-bibdata-value">CN 200880020058, </span><span class="patent-bibdata-value">CN-A-101689115, </span><span class="patent-bibdata-value">CN101689115 A, </span><span class="patent-bibdata-value">CN101689115A, </span><span class="patent-bibdata-value">CN200880020058, </span><span class="patent-bibdata-value">CN200880020058.5, </span><span class="patent-bibdata-value">PCT/2008/60250, </span><span class="patent-bibdata-value">PCT/JP/2008/060250, </span><span class="patent-bibdata-value">PCT/JP/2008/60250, </span><span class="patent-bibdata-value">PCT/JP/8/060250, </span><span class="patent-bibdata-value">PCT/JP/8/60250, </span><span class="patent-bibdata-value">PCT/JP2008/060250, </span><span class="patent-bibdata-value">PCT/JP2008/60250, </span><span class="patent-bibdata-value">PCT/JP2008060250, </span><span class="patent-bibdata-value">PCT/JP200860250, </span><span class="patent-bibdata-value">PCT/JP8/060250, </span><span class="patent-bibdata-value">PCT/JP8/60250, </span><span class="patent-bibdata-value">PCT/JP8060250, </span><span class="patent-bibdata-value">PCT/JP860250</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B1%B1%E7%94%B0%E6%B5%A9%E7%A4%BA%22">山田浩示</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%BD%B3%E8%83%BD%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%22">佳能株式会社</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101689115A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101689115A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101689115A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (6),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200880020058&amp;usg=AFQjCNEMY86kHI3eRJYccjomeF4Wlr3TzA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101689115A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNFCl6SqFlKFQM8tnwlkrY9b1jdAEg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT94630757" lang="ZH" load-source="patent-office">信息处理方法和程序</invention-title>
      </span><br><span class="patent-number">CN 101689115 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA76473906" lang="ZH" load-source="patent-office">
    <div class="abstract">当启动构成用于容易地对多个软件等集中进行安装操作的程序的安装程序时，对于每一命令，必须在管理员帐户和其它帐户之间进行适当切换之后再执行安装操作和启动程序命令等的命令。当在本发明中启动安装程序时，在管理员帐户和用户帐户的进程之间确保进程间通信，并且在管理员帐户的进程中确定用以执行包括在该安装程序中的命令的帐户。如果确定结果表示用以执行该命令的帐户是用户帐户，则在用户帐户的进程中而不是在管理员帐户的进程中执行该命令。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(18)</span></span></div><div class="patent-text"><div mxw-id="PCLM31499936" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种信息处理设备中的信息处理方法，在所述信息处理设备中注册有管理员帐户和用户帐户，并且所述信息处理设备在各帐户的进程中执行包括在安装程序中的命令，其中，与所述管理员帐户相比，所述用户帐户在所述信息处理设备中具有更受限的权限，所述信息处理方法包括以下步骤：    确定步骤，用于在所述管理员帐户的进程中，确定用以执行所述包括在安装程序中的命令的帐户；以及    如果在所述确定步骤中所确定的用以执行所述包括在安装程序中的命令的帐户是所述用户帐户，则在所述用户帐户的进程中而不是在所述管理员帐户的进程中执行所述包括在安装程序中的命令。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 根据权利要求l所述的信息处理方法，其特征在于，如 果所述包括在安装程序中的命令用以启动web浏览器，则在所</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 根据权利要求2所述的信息处理方法，其特征在于，如 果在所述用户帐户的进程中启动所述web浏览器，则以与在所 述管理员帐户的进程中启动所述web浏览器的情况相比更安全 的模式启动所述web浏览器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 根据权利要求l所述的信息处理方法，其特征在于，如 果所述包括在安装程序中的命令用以设置默认打印机，则在所</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 根据权利要求l所述的信息处理方法，其特征在于，如 果所述包括在安装程序中的命令是文件操作，则在所述确定步 骤中基于文件路径来确定用以执行所述文件操作的帐户，以及 如果所述包括在安装程序中的命令是注册操作，则在所述确定 步骤中基于注册路径来确定用以执行所述注册操作的帐户。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6. 根据权利要求l所述的信息处理方法，其特征在于，还包括下面的步骤：如果在所述用户帐户的进程中完成了所述包 括在安装程序中的命令，则向所述管理员帐户的进程通知所述 命令的完成；其中，在接收到完成了所述命令的通知之后，关闭所述管理员帐 户的进程。</div>
    </div>
    </div> <div class="claim"> <div num="7" class="claim">
      <div class="claim-text">7. &#8212;种用于通过计算机来实现信息处理设备中的信息处 理步骤的计算机程序，在所述信息处理设备中注册有管理员帐 户和用户帐户，并且所述信息处理设备在各帐户的进程中执行 包括在安装程序中的命令，其中，与所述管理员帐户相比，所 述用户帐户在所述信息处理设备中具有更受限的权限，所述计 算机程序通过计算4几实现以下步骤：确定步骤，用于在所述管理员帐户的进程中，确定用以执 行所述包括在安装程序中的命令的帐户；以及 如果在所述确定步骤中所确定的用以执行所述包括在安装 程序中的命令的帐户是所述用户帐户，则在所述用户帐户的进 程中而不是在所述管理员帐户的进程中执行所述包括在安装程 序中的命令。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8. 根据权利要求7所述的计算机程序，其特征在于，如果 所述包括在安装程序中的命令用以启动web浏览器，则在所述</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9. 根据权利要求8所述的计算机程序，其特征在于，如果 在所述用户帐户的进程中启动所述web浏览器，则以与在所述 管理员帐户的进程中启动所述web浏览器的情况相比更安全的 模式启动所述web浏览器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 根据权利要求7所述的计算机程序，其特征在于，如果 所述包括在安装程序中的命令用以设置默认打印机，则在所迷</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11. 根据权利要求7所述的计算机程序，其特征在于，如果 所述包括在安装程序中的命令是文件操作，则在所述确定步骤 中基于文件路径来确定用以执行所述文件操作的帐户，以及如 果所述包括在安装程序中的命令是注册操作，则在所述确定步 骤中基于注册路径来确定用以执行所述注册操作的帐户。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12. 根据权利要求7所述的计算机程序，其特征在于，还包 括下面的步骤：如果在所述用户帐户的进程中完成了所述包括 在安装程序中的命令，则向所述管理员帐户的进程通知所述命 令的完成；其中，在接收到完成了所述命令的通知之后，关闭所述管理员帐 户的进程。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13. &#8212;种用于存储根据权利要求7所述的计算机程序的计 算机可读存储介质。</div>
    </div>
    </div> <div class="claim"> <div num="14" class="claim">
      <div class="claim-text">14. 一种信息处理设备，在所述信息处理设备中注册有管 理员帐户和用户帐户，并且所述信息处理设备在各帐户的进程 中执行包括在安装程序中的命令，其中，与所述管理员帐户相 比，所述用户帐户在所述信息处理设备中具有更受限的权限， 所述信息处理设备包括：确定部件，用于在所述管理员帐户的进程中，确定用以执 行所述包括在安装程序中的命令的帐户；以及执行部件，用于如果由所述确定部件所确定的用以执行所 述包括在安装程序中的命令的帐户是所述用户帐户，则在所述 用户帐户的进程中而不是在所述管理员帐户的进程中执行所述 包括在安装程序中的命令。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15. 根据权利要求14所述的信息处理设备，其特征在于， 如果所述包括在安装程序中的命令用以启动web浏览器，则所 述确定部件确定用以执行所述命令的帐户为所述用户帐户。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16. 根据权利要求15所述的信息处理设备，其特征在于， 如果在所述用户帐户的进程中启动所述web浏览器，则以与在 所述管理员帐户的进程中启动所述web浏览器的情况相比更安 全的模式启动所述web浏览器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17. 根据权利要求14所述的信息处理设备，其特征在于， 如果所述包括在安装程序中的命令用以设置默认打印机，则所 述确定部件确定用以扭J亍所述命令的帐户为所述用户帐户。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18. 根据权利要求14所述的信息处理设备，其特征在于， 还包括通知部件，如果在所述用户帐户的进程中完成了所述包 括在安装程序中的命令，则所述通知部件向所述管理员帐户的 进程通知所述命令的完成；其中，在接收到完成了所述命令的通知之后，所述管理员帐户的 进程关闭。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES36942636" lang="ZH" load-source="patent-office" class="description">
    <p>信息处理方法和程序</p>
    <p>技术领域</p>
    <p>本发明涉及软件安装操作，尤其涉及在管理员帐户和例如</p>
    <p>普通用户帐户等的其它帐户之间的权限不同的操作系统（o s)中</p>
    <p>的安装操作。 背景技术</p>
    <p>对于Microsoft Windows NT(注册商标）（包括Windows 2000/XP/Vista(均为注册商标）等后续版本）和UNIX(注册商标） 等操作系统（OS),可以分别管理管理员帐户和普通用户帐户。 这里，帐户是使用计算机时的ID。每一帐户设置有使用计算机 的权限。例如，管理员帐户具有对于诸如改变对整个系统产生 影响的文件和注册的操作等各种操作的执行权限。另 一 方面， 普通用户帐户具有有限的执行权限，并且不具有用于执行诸如 改变对整个系统产生影响的文件和注册的操作等操作的权限。 因此，由于不能由普通用户帐户在系统上安装软件，因而必需 由管理员帐户进行安装操作。</p>
    <p>甚至UNIX(注册商标）操作系统具有被称为根帐户的专用 帐户。根帐户具有改变对整个系统产生影响的文件的权限，并</p>
    <p>且不向其它帐户i殳置该权限。</p>
    <p>将密码与帐户相关联，在使用计算机时，用户输入帐户名</p>
    <p>和密码，利用系统进行认证。也^皮称为注册或登录。如果正确 输入了与帐户名相关联的密码，则允许登录，从而使得用户可 以使用计算机。通常将登录时输入的帐户称为登录帐户。登录 帐户可以是管理员帐户或普通用户帐户。如果利用管理员帐户 登录，则登录帐户为管理员帐户，这意味着用户将作为管理员来使用计算机。如果利用普通用户帐户登录，则登录帐户为普 通用户帐户，这意味着用户将作为非管理员来使用计算机。</p>
    <p>此外，为了在这种操作系统中进行严格的帐户管理，子进 程也继承权限。换句话说，当在管理员帐户下运行的程序启动 独立的程序时，该程序也在管理员帐户下运行。相反，当在普 通用户帐户下运行的程序启动独立的程序时，该程序也在普通 用户帐户下运行。迄今为止，在无需输入密码的情况下，利用 特定帐户运行的程序不能执行其它帐户的程序。</p>
    <p>另 一 方面，随着个人计算机和因特网的普及出现了 "恶意软</p>
    <p>件"的问题。这种例子是如下情况：仅作为用户访问主页的结果 安装软件的情况；或者在运行附加至邮件的程序时安装不同于 名义程序的软件的情况。这类软件在用户毫不知情的情况下向 因特网恶意发送用户的文件或者删除用户的本地文件，并且已 成为普遍的社会问题。</p>
    <p>即使对于传统OS,用户仅需要确保在利用普通用户帐户登 录时访问web和查看邮件，并且在利用管理员帐户登录之后安 装软件。这足以防止4又作为用户访问主页或执行所附加的文件 的结果而自动安装"恶意软件"。</p>
    <p>然而，用户经常作为具有较少限制的管理员帐户来登录， 并且作为管理员来使用计算机。因此，没有防止恶意软件的安 装。另外，可以想到的是，用户自己并不关心他们的帐户是管 理员帐户还是某一其它帐户。</p>
    <p>对于专利文献l(日本特开2002-517853号^^艮），通常利用 受限令牌在普通用户帐户或管理员帐户下进行处理。还提出了 通过在运行程序时向该程序提供管理员权限最初是什么来限制 操作。具有受限令牌的管理员帐户是具有与管理员帐户相同的 ID且具有减小的权限的帐户。</p>
    <p>7例如，在特定OS中，即使用户利用管理员帐户登录，也将 该帐户当作权限一定程度受限的管理员帐户，并且在执行改变 系统的操作时始终必需进行确认。直到用户同意之前，不利用 真的管理员帐户执行操作。类似地，即使用户利用普通用户帐 户登录，在执行改变系统的操作时也自动显示帐户名和密码提 示画面，并且在管理员帐户下临时执行操作。</p>
    <p>根据该方法，在进行安装操作等改变系统的操作之前必需 进行确认，从而使得用户能够拒绝该操作。</p>
    <p>另外，在另一特定os中，假定对于特定操作可以设置专用</p>
    <p>帐户。例如，通过向与打印有关的驻留程序（后台程序）仅提供 与打印有关的权限，当在该驻留程序中存在缺陷或非法访问与 打印有关的驻留程序时，也不能改变系统。</p>
    <p>近年来，随着个人计算机(PC)的普及开发了大量软件，并</p>
    <p>且数字照相机和打印机等电器目前通常捆绑有多个软件。在购</p>
    <p>买时，与PC接口连接的电器可能附带有多于10个的软件。</p>
    <p>通常提供被称为主安装程序（或者安装程序）的软件以避免 由于软件数量增加而导致的复杂的软件安装过程。主安装程序 是支持软件，用于顺序运行多个软件安装程序，并且允许用户 如安装一个软件一样地进行所有安装操作。</p>
    <p>然而，如利用专利文献l一样，如果每次启动安装程序时 都显示管理员帐户名和密码提示画面，则安装软件会耗时费力。 因此，出现不能充分实现下面的主安装程序的最初目的的可能， 其中主安装程序的最初目的是以用户最少的劳动提供简单的批安装。</p>
    <p>如果主安装程序本身在管理员帐户下运行，则仅显示一次 管理员帐户名和密码提示画面，但是在这种情况下出现其它问题。当使用主安装程序来执行下面的程序时发生这种问题：该 程序的工作模式根据是利用管理员帐户执行单元来运行该程序</p>
    <p>(管理员帐户的控制下的进程）还是利用普通用户帐户执行单元 来运行该程序（例如，普通用户帐户的控制下的进程）而不同。</p>
    <p>web浏览器。那么，如果为了打开因特网上的文件，必需运行 与该浏览器不同的软件，则将激活防止此的高安全模式。另夕卜， 当在管理员帐户下运行该web浏览器时，禁止该高安全模式。 换句话说，通过执行与该浏览器不同的软件能够自由打开因特 网上的文件。</p>
    <p>由于在管理员帐户下运行主安装程序，因而，如果例如通 过主安装程序执行单元启动特定浏览器，假定在管理员帐户下 运行该浏览器，则禁止高安全模式。给出例如用于针对客户服 务中的web服务等进行用户注册的浏览器启动，作为使用主安 装程序提供的web浏览器所进行的操作的例子。对于web服务等 的用户注册，管理员权限不是特别必需的。换句话说，如果通 过主安装程序进行上述浏览器启动，则尽管并非必需的管理员 权限，作为结果，用户计算机的安全等级降低。</p>
    <p>此外，在登录帐户是普通用户帐户的情况下发生不同的问 题。例如，假定存在从扫描器接收数据并且将所接收到的数据 保存在用户默认图像数据文件夹中的驻留程序。通常，根据帐 户来管理图像数据文件夹，并且配置图像数据文件夹以使得不 能看见独立帐户的图像数据文件夹。如果在登录帐户下运行该 驻留程序，则驻留程序将扫描数据保存在该登录帐户的图像数 据文件夹中。然而，如果临时切换帐户从而使得在管理员帐户 下运行驻留程序，则将扫描数据顺序存储至管理员帐户的图像 数据文件夹。因此，作为登录用户的普通用户不能访问该扫描数据。换句话说，当在为了进行安装操作主安装程序作为管理 员帐户而运行驻留程序的情况下，运行这类驻留程序时，将会 发生该问题。</p>
    <p>作为类似例子，操作系统通常具有使得能够设置默认打印 机的功能。该设置为用于在用户进行打印时默认确定要选择的 打印机驱动程序，并且还可以对于各帐户来分别设置。在主安 装程序安装打印机驱动程序的情况下，主安装程序在安装打印 机驱动程序之后，将所安装的打印机驱动程序设置为默认打印 机。然而，如果在管理员帐户下运行主安装程序，则不会产生 在作为登录帐户的普通用户帐户中设置的默认打印机。换句话 说，当用户使用主安装程序来安装打印机驱动程序时，仅可以 设置管理员帐户的默认打印机，而不能设置实际需要设置的他 或她自己的登录帐户的默认打印机。</p>
    <p>发明内容</p>
    <p>因此，本发明的目的是提供一种信息处理方法和用于实现 该信息处理方法的计算机程序，其中，该信息处理方法使得在 启动安装程序时，能够针对例如安装操作和启动程序命令等的 每一命令，在管理员帐户和其它帐户之间进行适当切换之后再 执行该命令。</p>
    <p>考虑到上述问题， 一种信息处理设备的信息处理方法，在 所述信息处理设备中注册有管理员帐户和用户帐户，并且所述 信息处理设备在各帐户的进程中执行包括在安装程序中的命 令，其中，与所述管理员帐户相比，所述用户帐户在所述信息 处理设备中具有更受限的权限，所述信息处理方法包括以下步</p>
    <p>骤：确定步骤，用于在所述管理员帐户的进程中，确定用以执 行所述包括在安装程序中的命令的帐户；以及如果在所述确定是所述用户帐户，则在所述用户帐户的进程中而不是在所述管 理员帐户的进程中执行所述包括在安装程序中的命令。</p>
    <p>另外，本发明的计算机程序是用于提供该信息处理方法的 计算机可执行程序。</p>
    <p>通过以下参考附图对典型实施例的说明，本发明的其它特 征将变得清楚。</p>
    <p>附图说明</p>
    <p>包括在说明书中并构成说明书的一部分的附图，示出本发 明的实施例，并与说明书一起用来解释本发明的原理。</p>
    <p>图1示出本发明的信息处理设备的硬件结构图；</p>
    <p>图2 A和2 B示出实施例1中运行主安装程序时基于信息处理 设备的处理步骤的流程图；</p>
    <p>图3示出实施例l中的示例性命令分类表；</p>
    <p>图4A和4B示出基于运行在实施例1的信息处理设备中的 web浏览器的处理步骤的流程图；</p>
    <p>图5A、 5B和5C示出实施例2中运行主安装程序时基于信息 处理设备的处理步骤的流程图；</p>
    <p>图6示出基于实施例2的信息处理设备中所实现的扫描数 据保存处理步骤的流程图；</p>
    <p>图7示出实施例2中的示例性命令分类表；</p>
    <p>图8A、 8B和8C示出实施例3中运行主安装程序时基于信息 处理设备的处理步骤的流程图。</p>
    <p>具体实施方式</p>
    <p>第一实施例现在将参考附图详细说明本发明的优选实施例。以下实施 例无意限制本发明的权利要求。</p>
    <p>首先，将说明本发明的优选主安装程序的第一实施例。该 主安装程序是用于容易地对多个软件等进行集中安装操作的程 序。主安装程序的主要操作是将文件复制至规定位置，写注册，</p>
    <p>并且启动独立（separate)的安装程序。主安装程序还可以删除文 件、启动外部程序以及启动驻留程序。此外，除安装打印机驱 动程序和外围软件等操作以及配置默认设置以外，由主安装程 序所提供的操作还包括用于针对客户服务中的w e b服务等进行 用户注册的浏览器启动操作。启动web浏览器之后所进行的操 作不是必须利用受控于具有管理员权限的帐户的进程来进行。</p>
    <p>在第一实施例中，将说明包括在如下主安装程序中的命 令：该主安装程序的工作模式根据是利用管理员帐户执行单元 (受控于管理员帐户的进程）还是利用普通用户帐户执行单元 (受控于用户帐户的进程）来运行主安装程序而不同。</p>
    <p>对于诸如软件安装操作命令或用于针对web服务等进行用 户注册的启动浏览器命令等的命令，主安装程序于在用于执行 这些命令的帐户执行单元之间进行切换之后进行各命令。具体 地，通过将启动浏览器命令设置为登录帐户操作命令，通过登 录帐户来进行web浏览器的启动，从而使得能够以激活的web 浏览器的高安全模式来执行该命令。</p>
    <p>这里，例如给出Internet Explorer 7(IE7,注册商标）作为web 浏览器。</p>
    <p>第 一 实施例的主安装程序将安装操作定义为操作命令，并 且顺序处理它们。图3示出第一实施例中所使用的操作命令。命 令号CMD101是启动安装程序命令，用于给出外部安装程序启 动操作的指令。命令号CMD102是复制文件命令，用于给出文</p>
    <p>12件复制操作的指令。命令号CMD103是删除文件命令，用于给 出文件删除操作的指令。命令号CMD104是重命名文件命令， 用于给出文件名改变操作的指令。命令号CMD105是创建目录 命令，用于给出目录创建操作的指令。命令号CMD106是删除 目录命令，用于给出目录删除操作的指令。命令号CMD107是 注册写命令，用于指示注册写操作。命令号CMD108是删除注 册命令，用于给出注册删除操作的指令。命令号CMD201是启 动浏览器命令，用于给出外部web浏览器启动操作的指令。</p>
    <p>在执行这些才&#21951;作命令之前可以考虑文件复制目的地或注 册写目的地等操作内容，并且确定和设置是必须在管理员帐户 下还是在登录巾艮户下处理该内容。^1定在第一实施例中，仅web 浏览器启动操作必须在登录帐户下执行，则将命令号 CMD101 ~ CMD108的命令定义为要作为管理员帐户来处理的</p>
    <p>处理的命令。</p>
    <p>将用于存储诸如图3所示的命令等各种数据的第 一 实施例 的主安装程序软件存储在例如CD-ROM等的存储介质中，并且 将该主安装程序软件同时提供至用户和例如打印机等的信息处 理设备。作为用户将该CD-ROM放置在该信息处理设备中的结 果，启动主安装程序。这里，可以通过网络等从因特网站点等 预先提供主安装程序，并且在将其下载至信息处理设备之后启 动该主安装程序。</p>
    <p>接着，说明用于实现第一实施例中的主安装程序的信息处 理设备（PC等）的硬件结构（图1)。</p>
    <p>控制单元H01用于管理信息处理设备中的全部控制。后面 将控制单元HOl称为CPUHOl。键盘H02用于输入各种数据。彩 色显示器H03用于显示存储在RAM H05中的图像数据。ROMH 0 4是预先存储用于控制整个设备的控制程序和其它所需信,t、 的只读存储器。RAMH05是在运行程序时作为工作区所使用的 随机存取存储器。硬盘驱动器H06用于存储程序，并且向硬盘 驱动器H06写各种数据以及从硬盘驱动器H06读取各种数据。打 印机接口 H07与打印机H08连接。CD-ROM驱动器H10从 CD-ROM读出数据。数据总线H09连接CPUH01、键盘H02、显 示器H03、 ROM H04、 RAM H05、石更盘驱动器H06、 CD-ROM 驱动器H10和打印机接口H07，并且用于在这些组件之间传送各 种数据。将硬盘驱动器H06或装载进CD-ROM驱动器H10中的 CD-ROM通称为外部存储装置或外部存储介质，并且它们存储 应用程序、安装程序和打印机驱动程序等。将这些各种程序装 载进RAMH05中，并且通过CPU H01来运4亍。</p>
    <p>图2 A和2 B是在第 一 实施例中运行主安装程序时基于信息 处理设备的处理步骤的流程图。这些处理步骤通过执行根据信 息处理设备的CPU H01所读取的程序来实现。</p>
    <p>在第一实施例中，由两个安装程序，即用户帐户才丸行单元 (以下称为登录帐户安装程序）和管理员帐户执行单元（以下称 为管理员帐户安装程序）构成主安装程序。用户在登录帐户下给 出各种操作的执行指令。第 一 实施例所示的登录帐户表示管理 员帐户以外的帐户。也就是说，用户作为"受限"管理员帐户（普 通用户帐户）进行登录，并且启动登录帐户安装程序。</p>
    <p>图2A和2B的步骤S1101 ~ S1106是由登录帐户安装程序所 进行的操作，步骤S1201 ~ 1218是由管理员帐户安装程序所进 行的操作。首先说明登录帐户安装程序的操作，随后说明管理 员帐户安装程序的操作。</p>
    <p>当开始该处理时，登录帐户安装程序执行步骤S1101。步 骤S1101是为了确保与管理员帐户安装程序的进程的通信信道</p>
    <p>1的操作。步骤S1101使得能够确保在帐户的操作处理之间进行</p>
    <p>通信。在第一实施例中，使用Windows NT(注册商标）操作系统 提供的"命名管道"作为进程间通信的方法。不用说，本发明可 以使用任意的进程间通信方法。还可以-使用例如消息队列、信 号和共享存储器等方法来进行进程间通信。</p>
    <p>一旦执行了步骤S1101,则处理进入步骤S1102，并且启动 管理员帐户安装程序。如果登录帐户是普通用户帐户，则在启 动管理员帐户安装程序时需要输入管理员帐户安装程序的帐户 名和密码。例如，如果登录巾艮户是Microsoft Windows Vista (注 册商标）操作系统中的"受限"管理员帐户，则仅需要确认是否可 以作为管理员帐户执行该操作。</p>
    <p>接下来的步骤S1103和S1104构成登录帐户安装程序的主 循环。在步骤S1103,判断是否关闭了管理员帐户安装程序。 在步骤S1103，为了判断是否关闭了在步骤S1102所启动的管理 员帐户安装程序，判断是否从步骤S1102所启动的安装程序的 进程通知了结束信号。尽管在第一实施例中使用来自进程的信 号进行该判断，但是本发明不局限于该进程间通信方法。例如， 还可以使用消息队列或共享存储器。</p>
    <p>当在步骤S1103判断为关闭了管理员帐户安装程序时，也 关闭登录帐户安装程序。当在步骤S1103判断为正在运行管理 员帐户安装程序时，处理进入步骤S1104。在步骤S1104,判断 是否从管理员帐户安装程序接收到操作请求。在步骤S1104, 通过在步骤S1101所确保的命名管道接收需要处理的内容。此 时还接收执行该操作所需的任何参数。</p>
    <p>如果在步骤S1104判断为接收到了操作请求，则处理转移 至步骤S1105。在步骤S1105,执行在步骤S1104所接收到的操 作内容。在第一实施例中，在步骤S1105启动构成外部程序的web浏览器。由于作为登录帐户来执行步骤S1105的操作，因而 同样作为登录帐户来启动和运行web浏览器。在接下来的步骤 S1106，将步骤S1105的操作结果通知至管理员帐户安装程序。 使用在步骤S1101所确保的进程间通信信道通知该安装结果。 当完成了步骤S1106的操作时，处理返回至步骤S1103，并且准 备需要处理的下一内容。</p>
    <p>接着说明管理员帐户安装程序。</p>
    <p>假定通过登录帐户安装程序来运行管理员帐户安装程序， 但是还假定直接启动管理员帐户安装程序，而不是通过登录帐 户安装程序。</p>
    <p>在步骤S1201， CPUH01获取安装操作命令。在第一实施例 中，将安装操作命令包含在外部文件中，但是还可以将这类信 息保持在程序中。另外，安装操作命令即使不是作为命令而明 确存在，也可以作为以不同的处理功能的形式的程序而载入。</p>
    <p>在接下来的步骤S1202，判断在步骤S1201所获取到的安装 操作命令是否是启动浏览器命令。如果判断为是启动浏览器命 令，则处理进入步骤S1211。如果不是，则处理进入步骤S1203。</p>
    <p>在步骤S1203，判断在步骤S1201所获取到的安装操作命令 是否是启动安装程序命令。如果判断为是启动安装程序命令， 则处理进入步骤S1204。如果不是，则处理进入步骤S1205。</p>
    <p>在步骤S1204，根据启动安装程序命令中的指令启动安装 程序，并且等待安装操作的完成。当安装操作完成时，处理进 入步骤S1205。</p>
    <p>在步骤S1205,判断在步骤S1201所获取到的安装操作命令 是否是文件或目录操作命令。如果判断为是文件或目录操作命 令，则处理进入步骤S1206。如果不是，则处理进入步骤S1207。</p>
    <p>在步骤S1206，根据文件或目录操作命令的内容进行文件创建、删除或重命名操作或者目录创建、删除或重命名操作。</p>
    <p>当完成该操作时，处理进入步骤S1207。在步骤S1207，判断在 步骤S1201所获取到的安装操作命令是否是注册操作命令。如 果判断为是注册操作命令，则处理进入步骤S1208。如果不是， 则处理进入步骤S1216。在步骤S1208，根据注册操作命令进行 注册写或删除操作。当完成该操作时，处理进入下一步骤 S1216。</p>
    <p>在步骤S1211,确认是否可以在管理员帐户下启动该浏览 器。具体地，CPUH01检查信息处理设备中正执行的OS和要启 动的web浏览器的名称和版本号。在正执行的OS和要启动的 w e b浏览器与预先注册的特定0 S和w e b浏览器相符的情况下， 判断为必须在登录帐户下启动该浏览器。这里，假定将特定OS 和web浏览器注册在信息处理设备的CPU可访问的、诸如用于 存储主安装程序的CD-ROM等的存储区域中。</p>
    <p>在步骤S1211判断为必须在登录帐户下启动浏览器的情况 下，处理进入步骤S1212。如果不是，则判断为可以在管理员 帐户下启动该浏览器，并且处理进入步骤S1213。在第一实施 例中，例如在正才丸行的OS为Microsoft Windows Vista(注册商标） 并且默认浏览器为IE 7的情况下，判断为必须在登录帐户下启动 web浏览器。</p>
    <p>在步骤S1212，确认是否确保了进程间通信信道。在直接 启动了管理员帐户安装程序的情况下，将不存在进程间通信信 道。即使在这种情况下，为了使得浏览器能够正常工作，也进 行步骤S1212的确认操作。如果确认为确保了进程间通信信道， 则处理进入步骤S1214。如果未确保，则处理进入步骤S1213。 在步骤S1213,启动构成外部程序的web浏览器。由于在管理员 帐户下执行步骤S1213，则同样在管理员帐户下运行该web浏览</p>
    <p>17器。当运行了该web浏览器时，处理进入步骤S1203。</p>
    <p>在步骤S1214，将web浏览器启动操作通知至登录帐户安装 程序。使用进程间通信通知该操作。该结果导致将登录帐户操 作从管理员帐户安装程序转换至登录帐户安装程序。</p>
    <p>在上述步骤S1104中，由登录帐户安装程序接收由步骤 S1214产生的通知。如先前在步骤S1104 ~ S1106所述的一样， 登录帐户安装程序启动web浏览器，并且将操作结果通知至管 理员帐户安装程序。在步骤S1215,由管理员帐户安装程序接 收该操作结果。 一旦接收到该操作结果，则处理进入步骤 S1216。</p>
    <p>在步骤S1216，判断在安装操作中是否发生了错误。如果 判断为发生了错误，则处理进入步骤S1217,并且进行安装错 误显示。在错误显示之后，关闭管理员帐户安装程序。</p>
    <p>另 一方面，如果在S1216判断为在安装操作中没有发生错 误，则处理进入步骤S1218。在步骤S1218,判断是否完成了所 有安装操作命令的执行。如果判断为完成了所有安装操作命令 的执行，则关闭管理员帐户安装程序。如果尚未，则处理返回 至步骤S1201。</p>
    <p>接着，说明通过主安装程序启动的web浏览器的处理流程。 例如，IE7等浏览器具有被称为保护模式的安全机制，但是仅当 在登录帐户下运行浏览器时才激活该安全机制。同样地，为了 激活该功能，在第一实施例中，从构成登录帐户安装程序的操 作的步骤S1105开始运行web浏览器。换句话说，作为登录帐户 来运行该程序。图4A和4B是示出web浏览器中的主操作的流程 图。通过关注实际w e b浏览器所执行的操作中与第 一 实施例有 关的部分来定义图4A和4B的流程图。</p>
    <p>在步骤S1301,判断是否正在管理员帐户下运行web浏览器。如果判断为正在管理员帐户下运行web浏览器，则处理进 入步骤S1302,并且使web浏览器中的保护模式标志失效。然后 处理进入步骤S1304。</p>
    <p>另 一方面，当判断为不是正在管理员帐户下运行web浏览 器时，处理进入步骤S1303。在第一实施例中，由于通过登录 帐户安装程序启动web浏览器，因而判断为不是正在管理员帐 户下运行web浏览器。在步骤S1303,激活web浏览器中的保护 模式标志。处理进入步骤S1304,并且通过web浏览器显示默认 主页。</p>
    <p>接下来的步骤S1305是主循环。在步骤S1305,获取来自键 盘或鼠标等的用户输入。在接下来的步骤S1306,判断在步骤 S1305获取到的输入是否是URL。如果判断为输入了URL,则处 理进入步骤S1311。如果判断为不是输入URL，则处理进入步骤 S1307。在步骤S1307，判断在步骤S1305所获取到的输入是否 是由鼠标点击而引起的对链接的点击。如果判断为是对链接的 点击，则处理进入步骤S1311。如果判断为不是对链接的点击， 则处理进入步骤S1308。在步骤S1308,判断在步骤S1305所获 取到的输入是否是程序关闭指令。如果判断为是程序关闭指令， 则关闭web浏览器。如果判断为不是关闭指令，则处理返回至 步骤S1305。</p>
    <p>在步骤S1311,判断所输入的URL是否指定HTML文件。如 果判断为指定HTML文件，则处理进入步骤S1312,并且下载该 URL的HTML文件（页面）。然后在接下来的步骤S1313,在画面 上显示所下载的HTML文件（页面）。当完成显示时，处理返回至 步骤S1305。</p>
    <p>另 一方面，如果在步骤S1311判断为所输入的URL没有指定 HTML文件，则处理进入步骤S1321。在步骤S1321，判断该URL是否指定可执行文件。如果判断为没有指定可执行文件，则处</p>
    <p>理进入步骤S1331。另一方面，如果判断为指定可执行文件， 则处理进入步骤S1322。在步骤S1322,判断web浏览器的内部</p>
    <p>保护模式标志是有效还是失效。如果判断为保护模式标志失效， 则处理进入步骤S1326。另一方面，如果判断为保护模式标志 有效，则处理进入步骤S1323。</p>
    <p>在步骤S1323,显示执行权限确认画面，并且在步骤S1324， 等待执行确认输入。在接下来的步骤S1325，判断步骤S1324的 输入结果。如果判断为不是执行权限指令，则处理返回至步骤 S1305。另一方面，如果判断为指示执行权限，则处理进入步 骤S1326。在步骤S1326，下载由URL指定的可执行文件，并且 在接下来的步骤S1327执行在步骤S1326下载的文件。当完成该 执行时，处理返回至步骤S1305。</p>
    <p>在步骤S1331 ，判断在步骤S1306或S1307所输入的URL是 否指定使用外部程序文件打开的文件。例如，如果由URL指定 的文件的扩展名为"doc"，则使用作为夕卜部程序的Microsoft Word(注册商标）打开该文件。另外，例如，如果由URL指定的 文件与web浏览器兼容，则不需要外部程序来打开该文件。如 果判断为URL指定不需要外部程序的文件，则处理返回至步骤 S1305。</p>
    <p>另 一方面，如果在步骤S1331判断为URL需要外部程序， 则处理进入步-骤S1332。在步骤S1332,判断内部保护模式标志 是有效还是失效。如果判断为保护模式标志失效，则处理进入 步骤S1336。</p>
    <p>另一方面，当在步骤S1332判断为保护模式标志有效，则 处理进入步骤S1333。在步骤S1333,显示执行权限确认画面， 并且在接下来的步骤S1334，等待执行确认输入。在步骤S1335，</p>
    <p>20判断S1334的输入结果。如果判断为没有给出执行权限指令， 则处理返回至步骤S1305。</p>
    <p>如果在步骤S1335判断为给出了执行权限指令，则处理进 入步骤S1336，并且下载由URL指定的文件。在接下来的步骤 S1336，启动与所下载的文件相对应的外部程序，并且打开所 下载的文件。 一旦启动外部程序并打开了该文件，则处理返回 至步骤S1305。</p>
    <p>在上述第一实施例中，当通过主安装程序安装多个软件 时，判断要启动的操作的种类。如果判断为要启动的操作涉及 启动浏览器，则判断是否必须使用注册的用户帐户来启动信息 处理设备的OS中的默认浏览器。这些操作使得用户利用少量工 作就能够在必要时以高安全性运行web浏览器。</p>
    <p>第二实施例</p>
    <p>此外，说明另一主安装程序的实施例。第二实施例包括在 诸如能够进行打印和图像扫描的多功能设备等的图像形成设备 中进行设置的主安装程序。</p>
    <p>第二实施例示出在登录帐户为普通用户帐户的情况下，用 于避免当使用普通用户帐户和管理员帐户下分别管理信息时所 产生的问题的例子。第二实施例中的主安装程序将安装操作定 义为操作命令，并且顺序处理它们。此时，根据操作内容动态 判断必须在登录帐户下处理各个操作命令还是必须在管理员帐 户下处理各个操作命令。结果，在第二实施例中，在登录帐户 下可以执行任意命令，从而使得作为登录帐户还能够运行驻留 程序，而不仅是第一实施例所示的web浏览器。在第二实施例 中，使用扫描数据保存程序作为驻留程序。</p>
    <p>图7示出第二实施例的安装命令。命令号CMD301是启动安 装程序命令，用于给出外部安装程序启动操作的指令。命令号200880020058.5 CMD302是复制文件命令，用于给出文件复制操作的指令。命 令号CMD303是删除文件命令，用于给出文件删除操作的指令。 命令号CMD304是重命名文件命令，用于给出文件名改变操作 的指令。命令号CMD305是创建目录命令，用于给出目录创建 操作的指令。命令号CMD306是删除目录命令，用于给出目录 删除操作的指令。命令号CMD307是写注册命令，用于给出注 册写操作的指令。命令号CMD308是删除注册命令，用于给出 注册删除操作的指令。命令号CMD309是启动驻留程序命令， 用于给出驻留程序启动操作的指令。命令号CMD310是启动浏 览器命令，用于给出外部web浏览器启动操作的指令。命令号 CMD311是设置打印机命令，用于给出默认打印机设置操作的 指令。</p>
    <p>根据第二实施例的安装命令不同于使用图3所示的第一实 施例的操作命令，并且没有预先表示必须在哪一帐户下来处理 命令的标志。</p>
    <p>由于可适用于第二实施例的硬件结构与第 一 实施例的结 构相同，因而省略对其的说明。</p>
    <p>图5A、 5B和5C是在第二实施例中运行主安装程序时基于 信息处理设备的处理步骤的流程图。这些处理步骤通过执行根 据信息处理设备的CPU H01所读取的程序来实现。在第二实施 例中，由两个安装程序，即登录帐户安装程序和管理员帐户安 装程序构成主安装程序，并且用户运行登录帐户安装程序。图 5A、 5B和5C的步骤S2101 ~ S2115是由登录帐户安装程序进行 的操作，步骤S2201 ~ S2221是由管理员帐户安装程序进行的操 作。首先说明登录帐户安装程序的操作，随后说明管理员帐户 安装程序的操作。</p>
    <p>当开始该处理时，登录帐户安装程序执行步骤S2101,并且确保与管理员帐户安装程序的进程间通信信道。在第二实施</p>
    <p>例中，例如，使用Windows NT(注册商标）操作系统具有的"命名 管道"作为进程间通信的方法。</p>
    <p>一旦执行了步骤S2101,则处理进入步骤S2102,在步骤 S2102,启动管理员帐户安装程序。此时，如果需要，必须输 入管理员帐户的帐户名和密码。</p>
    <p>接下来的步骤S2103和S2104构成登录帐户安装程序的主 循环。在步骤S2103,判断是否关闭了管理员帐户安装程序。 在步骤S2103,为了判断是否关闭了在步骤S2102启动的管理员 帐户安装程序，判断是否从在步骤S2102启动的安装程序的进 程通知了结束信号。如果判断为通知了结束信号，则假定关闭 了管理员帐户安装程序，并且也关闭登录帐户安装程序。</p>
    <p>另 一方面，如果在步骤S2103判断为没有通知结束信号， 则假定正在运行管理员帐户安装程序，并且处理进入步骤 S2104。在步骤S2104,判断是否从管理员帐户安装程序接收到 了安装操作命令。在步骤S2104,通过在步骤S2101所确保的命 名管道接收需要处理的内容。此时还接收执行安装操作命令所 需的任何参数。处理进入步骤S2105,并且判断在步骤S2104所 接收到的安装操作命令是否是启动浏览器命令。如果判断为是 启动浏览器命令，则处理进入步骤S2106，并且启动构成外部 程序的web浏览器。 一旦启动了web浏览器，则处理进入步骤 S2107。</p>
    <p>另 一方面，如果在步骤S2105判断为所接收到的安装操作 命令不是启动浏览器命令，则处理进入步骤S2107。</p>
    <p>在步骤S2107,判断在步骤S2104所接收到的安装操作命令 是否是文件或目录操作命令。如果判断为不是文件或目录操作 命令，则处理进入步骤S2109。另 一方面，如果在步骤S2107判断为在步骤S2104所接收到 的安装操作命令是文件或目录操作命令，则处理进入步骤 S2108。在步骤S2108,根据文件或目录操作命令的内容进行文 件创建、删除或重命名操作或者目录创建、删除或重命名操作。 当完成了该才乘作时，处理进入步骤S2109。</p>
    <p>在步骤S2109,判断在步骤S2104所接收到的安装操作命令 是否是注册操作命令。如果判断为不是注册操作命令，则处理 进入步骤S2111。</p>
    <p>另 一方面，如果在步骤S2109判断为在步骤S2104所接收到 的安装操作命令是注册操作命令，则处理进入步骤S2110。在 步骤S2110，根据注册操作命令的内容进行注册写或删除操作。 当完成该操作时，处理进入步骤S2U1。</p>
    <p>在步骤S2111,判断在步骤S2104所接收到的安装操作命令 是否是启动驻留程序命令。如果判断为不是启动驻留程序命令， 则处理进入步骤S2113。</p>
    <p>另 一方面，如果在步骤S2111判断为在步骤S2104所接收到 的安装操作命令是启动驻留程序命令，则处理进入步骤S2112。 在步骤S2112，根据启动驻留程序命令启动外部程序。由于作 为驻留程序启动外部程序，因而没有必要等待该外部程序结束。 当启动了外部程序时，处理进入步骤S2113。</p>
    <p>在步骤S2113，判断在步骤S2104所接收到的安装操作命令 是否是设置默认打印机命令。如果判断为不是设置默认打印机 命令，则处理进入步骤S2115。</p>
    <p>另 一方面，如果在步骤S2113判断为在步骤S2104所接收到 的安装操作命令是设置默认打印机命令，则处理进入步骤 S2114。在步骤S2114，改变默认打印机设置。在步骤S2114, 将安装了打印机驱动程序的打印机设置为默认打印机。作为登录帐户进行步骤S2105 ~ S2114的这些操作。</p>
    <p>一旦结束了到步骤S2114为止的操作，则处理进入步骤 S2115,并且将操作结果发送至管理员帐户安装程序。当发送 了该操作结果时，处理返回至步骤S2103。</p>
    <p>接着，说明管理员帐户安装程序。</p>
    <p>管理员帐户安装程序在步骤S2201获取安装操作命令。在 第二实施例中，安装操作命令包括在外部文件中，但是可以将 这类信息保持在程序中。另外，安装操作命令即使不是作为命 令而明确存在，也可以以不同处理功能的形式作为程序载入。</p>
    <p>在接下来的步骤S2202,判断在步骤S2201所获取到的安装 操作命令是否是启动浏览器命令。如果判断为不是启动浏览器 命令，则处理进入步骤S2205。</p>
    <p>另 一方面，如果判断为在步骤S2201所获取到的安装操作 命令是启动浏览器命令，则处理进入步骤S2203。</p>
    <p>在步骤S2203,确认是否可以在管理员帐户下启动web浏览 器。具体地，CPUH01检查是否预先存储了正执行的OS和要启 动的web浏览器的名称和版本号，这表示必须在登录帐户下启 动web浏览器。作为该检查的结果，如果判断为必须在登录帐 户下启动web浏览器，则处理进入步骤S2217。</p>
    <p>另 一方面，当在步骤S2203判断为可以在管理员帐户下启 动web浏览器，则处理进入步骤S2204,并且启动构成外部程序 的web浏览器。</p>
    <p>在第二实施例中，在正执行的OS为Microsoft Windows Vista(注册商标）和默认web浏览器为IE7的情况下，判断为必须 在登录帐户下启动web浏览器。</p>
    <p>在接下来的步骤S2205,判断在步骤S2201所获取到的安装 操作命令是否是文件/目录操作命令。如果判断为不是文件/目</p>
    <p>25录操作命令，则处理进入步骤S2208。另一方面，如果判断为在步骤S2201所获取到的安装操作命令为文件/目录操作命令，则处理进入步骤S2206。</p>
    <p>在步骤S2206,判断文件/目录操作的对象是否是系统区域。例如，如果安装操作命令是文件操作命令，则基于例如文件路径等的路径判断该对象是否是系统区域。在第二实施例中，根据该对象是否包括在与利用应用程序接口 （API)所获取到的系统相关目录中来判断该对象是否是系统区域。作为另一例子，在UNIX(注册商标）操作系统的情况下，根据该对象是否包括在仅根帐户具有写权限的目录中来判断文件操作的对象是否是系统区域。</p>
    <p>这里，即^f吏对于Microsoft Windows NT(注册商标）操作系统，也可以类似地判断是否是仅管理员组具有写权限。然而，由于不能利用旧的文件系统（例如FAT32)保存权限设置，因而不能进行全面检查。因此，期望使用API进行关于文件操作命令的对象是否是系统区域的判断。</p>
    <p>在步骤S2206判断为文件/目录操作不是向系统区域写的情况下，处理进入步骤S2217。</p>
    <p>另一方面，在步骤S2206判断为文件/目录操作是向系统区域写的情况下，处理进入步骤S2207，并且根据在步骤S2201所获取到的命令执行文件/目录操作。 一旦执行了文件/目录操作，则处理进入步骤S2208。</p>
    <p>在步骤S2208,判断在步骤S2201所获取到的安装操作命令是否是注册操作命令。如果判断为不是注册操作命令，则处理进入步骤S2211。</p>
    <p>另 一方面，当在步骤S2208判断为在步骤S2201所获取到的安装操作命令是注册操作命令时，处理进入步骤S2209。在步骤S2209，判断注册操作的对象是否是系统区域。在第二实施例中，判断为具有除HKEY&#8212;CURRENT&#8212;USER以外的注册路径的注册为系统区域。如果判断为注册操作的对象不是系统区域，则处理进入步骤S2217。</p>
    <p>另一方面，如果判断为注册操作的对象为系统区域，则处理进入步骤S2210。在步骤S2210，根据在步骤S2201所获取到的命令执行注册操作。 一旦执行了注册操作，则处理进入步骤</p>
    <p>S2211。</p>
    <p>在步骤S2211 ，判断在步骤S2201所获取到的安装操作命令是否是启动驻留程序命令。如果判断为不是启动驻留程序命令，则处理进入步骤S2214。</p>
    <p>另 一方面，如果在步骤S2211判断为在步骤S2201所获取到的安装操作命令为启动驻留程序命令，则处理进入步骤S2212。在步骤S 2 212,判断要通过启动驻留程序命令而启动的驻留程序是否驻留在登录帐户下。更具体地，判断该驻留程序是否已预先注册作为必须驻留作为登录帐户的程序。另一方面，如果要通过启动驻留程序命令来启动的驻留程序已被注册作为服务，则判断为该驻留程序作为管理员帐户而驻留。</p>
    <p>这里，在第二实施例中，假定必须使用登录帐户而驻留的程序已作为按帐户启动程序而预先注册在了注册表等中。</p>
    <p>月良务是Microsoft Windows(注册商标）操作系统中的驻留程序的一种形式。服务相当于UNIX(注册商标）操作系统中的后台程序。</p>
    <p>当在步骤S2212判断为在步骤S2201所获取到的安装操作命令为驻留在登录帐户下的程序时，处理进入步骤S2217。另一方面，如果判断为不是驻留在登录帐户下的程序，则处理进入步骤S2213,并且启动该服务程序。在接下来的步骤S2214,判断在步骤S2201所获取到的安装操作命令是否是设置默认打印机命令。如果判断为是设置默认打印机命令，则处理进入步骤S2217。另一方面，如果判断为不是设置默认打印机命令，则处理进入步骤S2215。</p>
    <p>在步骤S2215,判断在步骤S2201所获取到的安装操作命令是否是启动安装程序命令。如果判断为是启动安装程序命令，则处理进入步骤S2216,并且执行安装程序启动操作。其后，处理进入步骤S2219。另一方面，如果在步骤S2215判断为不是启动安装程序命令，则处理进入步骤S2219。</p>
    <p>这里，说明步骤S2217的操作。如上所述，在如下情况下处理进入步骤S2217:在步骤S2203判断为必须在登录帐户下来启动web浏览器，在步骤S2206或S2209判断为不是向系统区域写，或者在步骤S2212判断为该程序驻留在登录帐户下。</p>
    <p>在步骤S2217，将在步骤S2201所获取到的安装操作命令通知至登录帐户安装程序。从而将登录帐户操作从管理员帐户安装程序转换至登录帐户安装程序。登录帐户安装程序在接收到从管理员帐户安装程序通知的安装操作命令时，执行前述的步骤S2104&#12316;S2115的操作，并且将操作结果通知至管理员帐户安装程序。管理员帐户安装程序在步骤S2218接收从登录帐户安装程序通知的操作结果。当接收到该操作结果的通知时，处理进入步骤S2219。</p>
    <p>在步骤S2219,判断在安装操作中是否发生了错误。如果判断为发生了错误，则处理进入步骤S2220,并且进行用于通知安装错误的安装错误显示。在错误显示之后，关闭管理员帐户安装程序。</p>
    <p>另一方面，如果判断为没有发生错误，则处理进入步骤S2221。在步骤S2221,判断是否执行了所有安装操作命令。当判断为执行了所有安装操作命令时，关闭管理员帐户安装程序。 另一方面，如果判断为尚未执行所有安装操作命令，则处理返</p>
    <p>回至步骤S2201。</p>
    <p>接着，作为通过登录帐户安装程序运行的示例性程序，说 明由扫描数据保存程序产生的操作。</p>
    <p>扫描数据保存程序运行作为驻留程序，并且将从扫描器接 收到的图像数据保存至图像文件夹。例如，在Microsoft Windows(注册商标）操作系统中，设置有被称为"我的图片"的按 用户的图像保存文件夹。扫描数据保存程序还期望将图像数据 保存至登录帐户专用的我的图片文件夹。然而，当在管理员帐 户下运行扫描数据保存程序时，使得将图像数据保存至管理员 帐户的我的图片文件夹。即使在管理员帐户下运行扫描数据保 存程序，使用本发明也使得能够将图像数据保存至登录帐户的 我的图片文件夹。</p>
    <p>图6示出第二实施例中基于在信息处理设备的CPU H01中 实现的操作用扫描数据保存程序的流程图。</p>
    <p>在步骤S2301,判断用户输入。由于扫描数据保存程序是 驻留程序，因而给出的用户输入仅为程序结束指令。如果通过 用户输入给出了程序结束用指令，则终止由扫描数据保存程序 产生的 一 系列操作。</p>
    <p>另 一方面，如果在步骤S2301判断为没有给出程序结束用 指令，则处理进入步骤S2302。在步骤S2302，等待接收来自装 置的扫描开始指令。</p>
    <p>在步骤S2303,判断在步骤S2302是否接收到了扫描开始指 令。当没有接收到扫描开始指令时，处理返回至步骤S2301。 另一方面，当判断为接收到了扫描开始指令时，处理进入步骤 S2304,并且接收扫描数据。在接下来的步骤S2306 ，获取所接收到的扫描数据的保存目的地。这里，获取扫描数据保存程序所属的帐户的图像保存文件夹（例如，如果为Microsoft Windows(注册商标）操作系统，则为我的图片文件夹）的目录。在第二实施例中，由于通过登录帐户安装程序运行扫描数据保存程序，因而登录帐户的图像保存文件夹为保存目的地目录。</p>
    <p>一旦在步骤S2305获取到了扫描数据的保存目的地，则在步骤S2306确定扫描数据文件名。例如，可以考虑使用保存文件时的日期和时间的形式YYYYMMDD-hhmmss.jpeg的文件名。YYYY是四位年份，MM是两位月份，DD是两位日，hh为两4立小时，mm为两J立分4中，并且ss为两^f立秒、。</p>
    <p>在接下来的步骤S2307,进行扫描数据保存操作。将在步骤S2304所接收到的扫描数据保存至在步骤S2305和S2306中所确定的路径。当完成扫描数据保存操作时，处理返回至步骤S2301。</p>
    <p>在第二实施例中，在执行主安装程序时，切换在管理员帐户下所执行的操作和在普通用户帐户下所执行的其它操作（web浏览器或驻留程序的 一 部分）。适当地切换帐户使得能够进行适合于用户的设置操作（默认打印机设置等）和数据保存等，同时以高安全才莫式适当地启动web浏览器。</p>
    <p>还可以将扫描数据保存在适当的文件夹中。</p>
    <p>第三实施例</p>
    <p>在上述第一和第二实施例中，将主安装程序分成登录帐户安装程序和管理员帐户安装程序，并且管理员帐户安装程序对操作进行排序。在第三实施例中，在登录帐户是普通用户帐户的情况下，登录帐户安装程序对操作进行排序。换句话说，如果在利用登录帐户安装程序的安装操作期间存在必须在管理员帐户下执行的操作内容，则将操作转换至管理员帐户安装程序。由于本实施例中的安装命令与第二实施例中图7所示的命</p>
    <p>令相同，因而这里省略对其的说明。</p>
    <p>由于第三实施例的硬件结构与第 一 实施例中使用图1所述</p>
    <p>的结构相同，因而这里省略对其的说明。</p>
    <p>图8A、 8B和8C是在第三实施例中运行主安装程序时基于信息处理设备的处理步骤的流程图。这些处理步骤通过根据信息处理设备的CPU H01所读取的程序执行来实现。首先说明登录帐户安装程序的操作。</p>
    <p>当开始该处理时，登录帐户安装程序执行步骤S3101,并且确保与管理员帐户安装程序的进程间通信信道。 一旦确保了该通信信道，则在步骤S3102启动管理员帐户安装程序，并且在接下来的步骤S3103,获取安装操作命令。在第三实施例中，假定安装操作命令包括在外部文件中。这不是限制性的，也可以将这类信息保持在程序中。另外，安装操作命令即使没有作为命令而明确存在，也可以以不同处理功能的形式作为程序而载入。</p>
    <p>在接下来的步骤S3104,判断在步骤S3103所获取到的安装操作命令是否是启动浏览器命令。如果判断为所获取到的安装操作命令不是启动浏览器命令，则处理进入步骤S3107。</p>
    <p>另 一方面，当在步骤S3104判断为所获取到的安装操作命令是启动浏览器命令时，处理进入步骤S3105。在步骤S3105,确认是否可以在管理员帐户下启动该web浏览器。具体地，CPUH 01检查正执行的0 S和要启动的w e b浏览器的名称和版本号。在第三实施例中，在正执行的OS为Microsoft Windows Vista(注册商标）且默认web浏览器为IE7的情况下，判断为必须在登录帐户下启动web浏览器。如果不是，则判断是否可以在管理员帐</p>
    <p>31户下启动该web浏览器。如果判断为可以在管理员帐户下启动 该web浏览器，则处理进入步骤S3119。另一方面，如果判断为 必须在登录帐户下启动该web浏览器，则处理进入步骤S3106， 并且启动构成外部程序的web浏览器。当启动了 web浏览器时， 处理进入步骤S3107。</p>
    <p>在接下来的步骤S3107，判断在步骤S3103所获取到的安装 操作命令是否是文件/目录操作命令。如果判断为不是文件/目 录操作命令，则处理进入步骤S3110。另一方面，当判断为是 文件/目录操作命令时，处理进入步骤S3108。</p>
    <p>在步骤S3108,判断文件/目录操作的对象是否是系统区域。 在第三实施例中，根据该对象是否包括在与利用应用程序接口 (API)获取的系统相关目录中来判断该对象是否是系统区域。作 为另一例子，在UNIX(注册商标）操作系统的情况下，例如，可 以判断该对象是否包括在仅根帐户具有写权限的目录中。</p>
    <p>这里，即使对于Microsoft Windows NT(注册商标）操作系 统，也可以类似地判断是否仅管理员组具有写权限。然而，由 于不能利用旧的文件系统（例如FAT32)保存权限设置，因而不能 进行全面检查。因此，希望使用API进行关于文件操作的对象 是否是系统区域的判断。</p>
    <p>在步骤S3108判断为文件/目录操作是向系统区域写的情况 下，处理进入步骤S3119。另一方面，在判断为不是向系统区 域写的情况下，处理进入步骤S3109,并且才艮据在步骤S3103获 取到的命令执行文件/目录操作。在执行了文件/目录操作的情 况下，处理进入步骤S3110。</p>
    <p>在步骤S3110,判断在步骤S3103所获取到的安装操作命令 是否是注册操作命令。如果判断为不是注册操作命令，则处理 进入步骤S3113。另一方面，如果判断为是注册操作命令，则处理进入步骤S3111。</p>
    <p>在步骤S3111，判断注册操作的对象是否是系统区域。在 第三实施例中，判断为具有除HKEY&#8212;CURRENTJJSER以外的 注册路径的注册是系统区域。如果判断为是系统区域上的操作， 则处理进入步骤S3119。另一方面，如果判断为不是系统区域 上的操作，则处理进入步骤S3112,并且根据在步骤S3103获取 到的命令执行注册操作。当执行了注册操作时，处理进入步骤 S3113。</p>
    <p>在步骤S3113，判断在步骤S3103所获取到的安装操作命令 是否是启动驻留程序命令。如果判断为不是启动驻留程序命令， 则处理进入步骤S3116。另一方面，当判断为是启动驻留程序 命令时，处理进入步骤S3114。</p>
    <p>在步骤S3114，判断驻留程序是否驻留在登录帐户下。如 果驻留程序包括在按帐户启动的文件夹中或者被注册为注册表 中的启动程序，则判断为驻留程序驻留在登录帐户下。</p>
    <p>另一方面，如果驻留程序已被注册为服务，则判断为驻留 程序作为管理员帐户驻留。服务是Microsoft Windows(注册商标） 操作系统中的驻留程序的 一种形式。服务相当于UNIX(注册商 标）操作系统中的后台程序。</p>
    <p>当在步骤S3114判断为在步骤S3103所获取到的安装操作 命令不是驻留在登录帐户下的程序时，处理进入步骤S3119。 另一方面，如果判断为是驻留在登录帐户下的程序，则处理进 入步骤S3115，并且启动该驻留程序。当启动了该驻留程序时， 处理进入步骤S3116。</p>
    <p>在步骤S3116,判断在步骤S3103所获取到的安装操作命令 是否是设置默认打印机命令。如果判断为不是设置默认打印机 命令，则处理进入步骤S3118。另一方面，如果判断为是设置</p>
    <p>33默认打印机命令，则处理进入步骤S3117,并且进行默认打印 机设置操作。在步骤S3117,将登录帐户的默认打印机设置成 由在步骤S3103获取到的命令所指定的打印机。当进行了打印 机，没置时，处理进入步骤S3118。</p>
    <p>在步骤S3118,判断在步骤S3103所获取到的安装操作命令 是否是启动安装程序命令。如果判断为是启动安装程序命令， 则处理进入步骤S3119。如果不是，则处理进入步骤S3121。</p>
    <p>在步骤S3121，判断在安装操作中是否发生了错误。如果 判断为发生了错误，则处理进入步骤S3122，并且进行安装错 误显示。在错误显示之后，关闭登录帐户安装程序。</p>
    <p>另一方面，当判断为没有发生错误时，处理进入步骤 S3123。在步骤S3123,判断是否执行了所有安装操作命令。当 判断为执行了所有安装操作命令时，关闭登录帐户安装程序。 另一方面，如果判断为尚未执行所有安装操作命令，则处理返 回至步骤S3101。</p>
    <p>这里，说明步骤S3119的处理。如上所述，在如下情况下 处理进入步骤S3119:在步骤S3105判断为必须在管理员帐户下 启动web浏览器，在步骤S3108或S3111判断为向系统区i或写， 在步骤S3114判断为程序不是驻留在登录帐户下，或者在步骤 S3118判断为是安装程序启动操作。</p>
    <p>在步骤S3119,将在步骤S3103所获取到的安装操作命令通 知至管理员帐户安装程序。从而将管理员帐户操作从登录帐户 安装程序转换至管理员帐户安装程序。管理员帐户安装程序在 接收从登录帐户安装程序通知的安装操作命令时，执行如下所 述的管理员帐户安装程序中的管理员帐户安装程序操作，并且 将操作结果通知至登录帐户安装程序。登录帐户安装程序在步 骤S3120接收从管理员帐户安装程序所通知的操作结果。当接收到通知时，处理进入步骤S3121。</p>
    <p>接着，说明管理员帐户安装程序的操作。在上述步骤S3102 通过登录帐户安装程序正被启动的管理员帐户安装程序执行步 骤S3201的操作。步骤S3201和接下来的步骤S3202构成管理员 帐户安装程序的主循环。</p>
    <p>在步骤S3201，判断是否关闭了登录帐户安装程序。如果 判断为关闭了登录帐户安装程序，则也关闭管理员帐户安装程 序，并且终止这一系列操作。</p>
    <p>如果判断为正在运行管理员帐户安装程序，则处理进入步 骤S3202。在步骤S3202，判断作为上述步骤S3119的操作结果， 是否从登录帐户安装程序给出了安装操作命令的通知。如果判 断为没有通知安装操作命令，则处理返回至步骤S3201。</p>
    <p>在步骤S3202，通过在步骤S3101所确保的通信信道接收需 要处理的内容。此时还接收执行安装操作命令所需的任何参数。</p>
    <p>当在步骤S3202接收到来自登录帐户安装程序的安装操作 命令的通知时，处理进入步骤S3203。</p>
    <p>在步骤S3203，判断在步骤S3202所接收到的安装操作命令 是否是启动浏览器命令。如果判断为不是启动浏览器命令，则 处理进入步骤S3205。另一方面，如果判断为所接收到的安装 操作命令是启动浏览器命令，则处理进入步骤S3204,并且启 动构成外部程序的web浏览器。 一旦启动了web浏览器，则处理 进入步骤S3205。</p>
    <p>在步骤S3205，判断在步骤S3202所接收到的安装操作命令 是否是文件或目录操作命令。如果判断为不是文件或目录操作 命令，则处理进入步骤S3207。另一方面，当判断为所接收到 的安装操作命令是文件或目录操作命令时，处理进入步骤 S3206,并且根据文件或目录操作命令的内容进行文件创建、删除或重命名操作或者目录创建、删除或重命名操作。当完成</p>
    <p>了该操作时，处理进入步骤S3207。</p>
    <p>在步骤S3207，判断在步骤S3202所接收到的安装操作命令 是否是注册操作命令。如果判断为不是注册操作命令，则处理 进入步骤S3209。另一方面，如果判断为所接收到的安装操作 命令是注册操作命令，则处理进入步骤S3208，并且根据注册 操作命令的内容进行注册写或删除操作。当完成注册操作时， 处理进入步骤S3209。</p>
    <p>在步骤S3209,判断在步骤S3202所接收到的安装操作命令 是否是启动驻留程序命令。如果判断为不是启动驻留程序命令， 则处理进入步骤S3211。另一方面，当判断为所接收到的安装 操作命令是启动驻留程序命令时，处理进入步骤S3210，并且 根据启动驻留程序命令启动外部程序。由于作为驻留程序启动 外部程序，因而没有必要等待该外部程序结束。当启动了该外 部程序时，处理进入步骤S3211。</p>
    <p>在步骤S3211,判断在步骤S3202所接收到的安装操作命令 是否是启动安装程序命令。如果判断为不是启动安装程序命令， 则处理进入步骤S3213。另一方面，当判断为所接收到的安装 操作命令是启动安装程序命令时，处理进入步骤S3212,并且 启动构成外部程序的安装程序。作为管理员帐户执行这些步骤 S3201 ~ S3212的操作。</p>
    <p>当关闭了该安装程序时，处理进入步骤S3213,并且将操 作结果发送至登录帐户安装程序。作为上述步骤S3120的操作 的结果，由登录帐户安装程序接收所发送的操作结果。当发送 了该操作结果时，处理返回至步骤S3201。</p>
    <p>在第三实施例中，切换在管理员帐户下所执行的操作和在 普通用户帐户下所执行的其它操作（web浏览器或驻留程序的一部分）。适当地切换帐户，从而使得能够进行适合于用户的设置</p>
    <p>操作和数据保存等，同时以高安全模式适当地启动web浏览器。</p>
    <p>其它实施例</p>
    <p>尽管以上说明了各种实施例，但是本发明还可应用于由多 个装置构成的系统或由单个装置组成的设备。例如，本发明可 应用于打印机、传真机或包括服务器和客户机的计算机系统等。</p>
    <p>还可以通过直接或远程向系统或设备提供能够实现上述 实施例的功能的软件程序，并且利用包括在该系统中的计算机 读出和执行所提供的程序代码，来实现本发明。</p>
    <p>因此，还可通过安装在信息处理设备上的实际程序代码来 实现本发明，以通过计算机来实现本发明的功能和操作。换句 话说，用于实现上述功能和操作的实际计算机程序也构成本发 明的方面之一。</p>
    <p>在这种情况下，如果根据本发明的计算机程序具有程序的 功能，则该程序可以采用目标代码、由解释程序运行的程序或</p>
    <p>向OS提供的脚本数据等任何形式。</p>
    <p>用于提供该程序的存储介质包括例如软盘、硬盘、光盘、 磁光盘、MO、  CD-ROM、 CD-R和CD-RW。用于提供该程序的 存储介质还包括磁带、非易失性存储卡、ROM和DVD (DVD-ROM、 DVD-R)。</p>
    <p>还可以使用客户的信息处理设备的浏览器从因特网上的 网站下载该程序。也就是说，可以从网站将本发明的实际计算 机程序或包括自动安装功能的压缩文件下载至硬盘等存储介 质。还可以通过将构成本发明的程序的程序代码分成多个文件， 并且从不同网站下载各个文件，来实现本发明。换句话说，允 许多个用户下载用于通过计算机来实现本发明的功能和操作的</p>
    <p>程序文件的www服务器同样形成本发明的构件。还可以将本发明的程序以加密形式存储在C D - R O M等存储 介质上分发至用户。在这种情况下，仅允许满足规定要求的用 户才可以通过因特网从网站下载解密密钥信息，可以运行利用 该密钥信息解密后的程序，并将该程序安装在信息处理设备上。</p>
    <p>还可以作为计算机运行所读取的程序的结果来实现上述 实施例的功能。注意，运行在计算机上的OS等可以基于该程序 中的指令进行部分或全部的实际处理。在这种情况下自然也实 现上述实施例的功能。</p>
    <p>此外，还可以将从存储介质读出的程序写入到设置在插入 信息处理设备中的功能扩展板或与信息处理设备连接的功能扩 展单元中的存储器中。设置在该功能扩展板或功能扩展单元中 的CPU等可以基于该程序中的指令进行部分或全部的实际处 理。这样也可以实现上述实施例的功能。</p>
    <p>尽管参考典型实施例说明了本发明，但是应该理解，本发 明不局限于所公开的典型实施例。所附权利要求书的范围符合 最宽的解释，以包含所有这类修改、等同结构和功能。</p>
    <p>本申请要求2007年6月12日提交的日本第2007-155374号专 利申请的优先权，其全部内容通过引用包含于此。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102385676A?cl=zh">CN102385676A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年10月25日</td><td class="patent-data-table-td patent-date-value">2012年3月21日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">一种Widget安装管理系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102594815A?cl=zh">CN102594815A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年2月14日</td><td class="patent-data-table-td patent-date-value">2012年7月18日</td><td class="patent-data-table-td ">北京鼎普科技股份有限公司</td><td class="patent-data-table-td ">登陆操作系统前设置用户权限并执行相应操作的方法、装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102594815B?cl=zh">CN102594815B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年2月14日</td><td class="patent-data-table-td patent-date-value">2016年1月20日</td><td class="patent-data-table-td ">北京鼎普科技股份有限公司</td><td class="patent-data-table-td ">登录操作系统前设置用户权限并执行相应操作的方法、装置</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0009445000">G06F9/445</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F21/6218">G06F21/6218</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F2221/2141">G06F2221/2141</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=Jlx4BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F8/61">G06F8/61</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">G06F8/61</span>, <span class="nested-value">G06F21/62B</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2010年3月31日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2010年5月12日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年12月3日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/df496ea78fa3479385e3/CN101689115A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E5%92%8C%E7%A8%8B%E5%BA%8F.pdf?id=Jlx4BwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3dZLfLqswfxf8UQdXUXJKVC9sY7w"},"sample_url":"https://www.google.com/patents/reader?id=Jlx4BwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>