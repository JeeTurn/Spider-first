<!DOCTYPE html><html><head><title>专利 CN101600186A - 一种流量统计及自动计算上网费用的方法及装置 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种流量统计及自动计算上网费用的方法及装置"><meta name="DC.contributor" content="吴鑫琦" scheme="inventor"><meta name="DC.contributor" content="婷 王" scheme="inventor"><meta name="DC.contributor" content="中兴通讯股份有限公司" scheme="assignee"><meta name="DC.date" content="2009-6-12" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种流量统计的方法，在无线网卡中设置存储用户流量数据的地址空间，该方法包括：在设定的统计周期内，统计无线网卡接入网络后的上下行流量，并更新当前接入网络的用户在无线网卡的地址空间中存储的流量数据。另外，本发明提供一种自动计算上网费用的方法，包括：实时或周期性检测更新的资费标准；在设定的统计周期内，统计上下行流量并更新当前用户对应的流量数据；在设定的计费周期内，根据上网的资费标准、当前用户的流量数据，计算当前的当日和/或当月的上网费用。相应地，本发明还提供一种流量统计及自动计算上网费用的装置。通过本发明能准确统计出用户使用同一个无线网卡在多台计算机上网的流量。"><meta name="DC.date" content="2009-12-9"><meta name="citation_patent_publication_number" content="CN:101600186:A"><meta name="citation_patent_application_number" content="CN:200910147808"><link rel="canonical" href="https://www.google.com/patents/CN101600186A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101600186A?cl=zh"/><meta name="title" content="专利 CN101600186A - 一种流量统计及自动计算上网费用的方法及装置"/><meta name="description" content="本发明公开了一种流量统计的方法，在无线网卡中设置存储用户流量数据的地址空间，该方法包括：在设定的统计周期内，统计无线网卡接入网络后的上下行流量，并更新当前接入网络的用户在无线网卡的地址空间中存储的流量数据。另外，本发明提供一种自动计算上网费用的方法，包括：实时或周期性检测更新的资费标准；在设定的统计周期内，统计上下行流量并更新当前用户对应的流量数据；在设定的计费周期内，根据上网的资费标准、当前用户的流量数据，计算当前的当日和/或当月的上网费用。相应地，本发明还提供一种流量统计及自动计算上网费用的装置。通过本发明能准确统计出用户使用同一个无线网卡在多台计算机上网的流量。"/><meta property="og:title" content="专利 CN101600186A - 一种流量统计及自动计算上网费用的方法及装置"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101600186A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101600186A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101600186A&amp;usg=AFQjCNGuBWNy97Z_9rpIVzFNk9mvm0c-Xg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/756a2adaeb5e09ee449e/CN101600186A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/756a2adaeb5e09ee449e/CN101600186A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101600186A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101600186A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101600186A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101600186B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101600186A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种流量统计的方法，在无线网卡中设置存储用户流量数据的地址空间，该方法包括：在设定的统计周期内，统计无线网卡接入网络后的上下行流量，并更新当前接入网络的用户在无线网卡的地址空间中存储的流量...</span><span itemprop="url">https://www.google.com/patents/CN101600186A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101600186A - 一种流量统计及自动计算上网费用的方法及装置</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101600186A - 一种流量统计及自动计算上网费用的方法及装置" title="专利 CN101600186A - 一种流量统计及自动计算上网费用的方法及装置"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101600186 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200910147808</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2009年12月9日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2009年6月12日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2009年6月12日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101600186B?hl=zh-CN&amp;cl=zh">CN101600186B</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2429222A1?hl=zh-CN&amp;cl=zh">EP2429222A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/US8774046?hl=zh-CN&amp;cl=zh">US8774046</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20120082059?hl=zh-CN&amp;cl=zh">US20120082059</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2010142087A1?hl=zh-CN&amp;cl=zh">WO2010142087A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200910147808.1, </span><span class="patent-bibdata-value">CN 101600186 A, </span><span class="patent-bibdata-value">CN 101600186A, </span><span class="patent-bibdata-value">CN 200910147808, </span><span class="patent-bibdata-value">CN-A-101600186, </span><span class="patent-bibdata-value">CN101600186 A, </span><span class="patent-bibdata-value">CN101600186A, </span><span class="patent-bibdata-value">CN200910147808, </span><span class="patent-bibdata-value">CN200910147808.1</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%90%B4%E9%91%AB%E7%90%A6%22">吴鑫琦</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%A9%B7+%E7%8E%8B%22">婷 王</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%AD%E5%85%B4%E9%80%9A%E8%AE%AF%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">中兴通讯股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101600186A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101600186A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101600186A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (12),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (23),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200910147808&amp;usg=AFQjCNEXdDZKHonAi0T4uHGrepad8GUojg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101600186A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGoahJ0cbuN_cEmzB3XbPdltrBYzQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT90494032" lang="ZH" load-source="patent-office">一种流量统计及自动计算上网费用的方法及装置</invention-title>
      </span><br><span class="patent-number">CN 101600186 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA67181460" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种流量统计的方法，在无线网卡中设置存储用户流量数据的地址空间，该方法包括：在设定的统计周期内，统计无线网卡接入网络后的上下行流量，并更新当前接入网络的用户在无线网卡的地址空间中存储的流量数据。另外，本发明提供一种自动计算上网费用的方法，包括：实时或周期性检测更新的资费标准；在设定的统计周期内，统计上下行流量并更新当前用户对应的流量数据；在设定的计费周期内，根据上网的资费标准、当前用户的流量数据，计算当前的当日和/或当月的上网费用。相应地，本发明还提供一种流量统计及自动计算上网费用的装置。通过本发明能准确统计出用户使用同一个无线网卡在多台计算机上网的流量。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(11)</span></span></div><div class="patent-text"><div mxw-id="PCLM28278096" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1、一种流量统计的方法，其特征在于，在无线网卡中设置存储用户流量数据的地址空间，该方法包括：    在设定的统计周期内，统计无线网卡接入网络后的上下行流量，并更新当前接入网络的用户在无线网卡的地址空间中存储的流量数据。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2、 根据权利要求l所述的流量统计的方法，其特征在于，所述更新当前接 入网络的用户在无线网卡的地址空间中存储的流量数据为：依据日期、资费标 准及统计得到的上下行流量，更新所述当前接入网络的用户在无线网卡的地址 空间中存储的流量数据；具体为：根据无线网卡本次接入网络的用户名和密码，搜索无线网卡闪存Flash中与 该用户名相对应的地址空间；将统计得到的上下行流量，累加到地址空间中记录的日期相同的日上网流 量和/或月上网流量；如果没有与当前用户名相对应的地址空间，则重新创建该用户名相对应的 地址空间；如果没有相同日期的记录项，则重新创建一条当前日期的流量数据记录； 当资费标准更新后，重新创建一条当前日期的流量数据记录；其中，所述流量数据包括：日期、日上网流量和/或月上网流量。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3、 根据权利要求2所述的流量统计的方法，其特征在于，所述更新当前接 入网络的用户在无线网卡的地址空间中存储的流量数据步骤之后，该方法还包 括：从更新后的流量数据中取出月上网流量与包月上网用户的包月流量进行比 较，在月上网流量超过包月流量时，自动提示流量超额。</div>
    </div>
    </div> <div class="claim"> <div num="4" class="claim">
      <div class="claim-text">4、 一种自动计算上网费用的方法，其特征在于，在无线网卡中设置存储用 户流量数据的地址空间，该方法包括：客户端接入网络后，实时或周期性检测更新的资费标准；在设定的统计周期内，统计无线网卡接入网络后的上下行流量，并更新当前用户对应的流量数据；在设定的计费周期内，才艮据上网的资费标准、当前用户的流量数据，计算 当前的当日和/或当月的上网费用。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5、 根据权利要求4所述的自动计算上网费用的方法，其特征在于，所述实 时检测更新的资费标准包括：实时或周期性;险测无线网络运营商更新的资费标准，并将更新的资费标准 下载至本地的客户端；客户端得到更新的资费标准后，重新创建一条流量数据 的记录；其中，所述流量数据包括：日期、日上网流量及对应的资费标准和/或月上 网流量及对应的资费标准；所述统计周期与计费周期一致。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6、 根据权利要求4或5所述的自动计算上网费用的方法，其特征在于，所述 更新当前用户对应的流量数据为：依据日期、资费标准及统计得到的上下行流 量，更新所述当前接入网络的用户在无线网卡的地址空间中存储的流量数据； 具体为：根据无线网卡本次接入网络的用户名和密码，搜索无线网卡Flash中与该用 户名相对应的地址空间；将统计得到的上下行流量，累加到本次接入网络的用户在无限网卡上的地 址空间中的日上网流量和&#25033;月上网流量；在计算当前的当日和/或当月的上网费用步骤之后，更新显示当前的当日和 /或当月的上网费用。</div>
    </div>
    </div> <div class="claim"> <div num="7" class="claim">
      <div class="claim-text">7、 一种流量统计的装置，其特征在于，包括：无线网卡和无线连接管理模 块，其中，无线网卡，用于接入网络，存储用户的流量数据；无线连接管理^i块，用于在每个统计周期内，统计无线网卡接入网络后的 上下行流量，并更新无线网卡中与本次接入网络的用户名对应的日上网流量和/ 或月上网流量。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8、 根据权利要求7所述的流量统计的装置，其特征在于，所述无线连接管 理模块具体用于：依据日期、资费标准及统计得到的上下行流量，将统计得到的上下行流量， 累加到无线网卡中与本次接入网络的用户名对应的日上网流量和/或月上网流 量。</div>
    </div>
    </div> <div class="claim"> <div num="9" class="claim">
      <div class="claim-text">9、 一种自动计算上网费用的装置，其特征在于，包括：无线网卡、无线连 接管理模块和计费模块，其中，无线网卡，用于接入网络，存储用户的流量数据；无线连接管理才莫块，用于在每个统计周期内，统计无线网卡接入网络后的 上下行流量，并更新无线网卡中当前接入网络的用户的流量数据；计费模块，用于实时检测更新的资费标准，在检测到更新的资费标准后通 知所述无线连接管理模块，并计算出当前的当日和/或当月的上网费用。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10、 根据权利要求9所述的自动计算上网费用的装置，其特征在于，所述计 费^f莫块包括：才企测单元、通知单元和计算单元；其中，检测单元，用于实时检测更新的资费标准；通知单元，用于在所述检测单元一企测到更新的资费标准后通知所述无线连 接管理模块；计算单元，用于依据所述无线连接管理模块更新的流量数据、所述检测单 元检测到更新的资费标准，计算本次接入网络的当日和/或当月的上网费用； 所述计费模块还包括：更新显示单元，用于更新并向用户显示当前的当日和/或当月的上网费用； 所述检测单元，还用于将检测到的更新的资费标准存储到本地。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11、 根据权利要求10所述的自动计算上网费用的装置，其特征在于，所述 无线连接管理才莫块包括：统计单元和更新单元；其中，统计单元，用于在每个统计周期内，统计无线网卡接入网络后的上下行流量；更新单元，用于依据日期、所述4企测单元才企测到的资费标准及所述统计单元统计得到的上下行流量，更新当前接入网络的用户的流量数据；所述无线连接管理模块还包括：判断提醒单元，用于判断包月上网用户的月上网流量是否超过包月流量， 并在包月上网用户的月上网流量超过包月流量时，提醒该用户上网流量超额。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES34540057" lang="ZH" load-source="patent-office" class="description">
    <p>一种流量统计及自动计算上网费用的方法及装置</p>
    <p>技术领域</p>
    <p>本发明涉及无线网络中的计费技术，特别是涉及一种流量统计及自动计算 上网费用的方法及装置。</p>
    <p>背景技术</p>
    <p>随着无线网络的普及，使用无线网卡上网的用户日益增加，但由于同一个 无线网卡常常被使用在多台计算机上，给统计该无线网卡上网的流量带来了很</p>
    <p>大的困难。因为现有的上网流量统计方法主要是：采用类似于网络流量监视器 (DU Meter)的流量统计软件，这类流量统计软件是将流量统计的结果保存在 本地，所以对于采用无线网卡在多台计算机上网的情况而言，这类流量统计软 件难以准确地统计出该无线网卡上网的流量。</p>
    <p>目前，为了统计上网的流量，中国专利申请号为200610124026.2的文件中， 提出了一种网络流量的统计方法，该申请通过请求订阅网络流量的方式进行流 量的统计，但是仅能够获取到当次连接的流量统计结果。而且，用该方法获取 到的流量仅仅能够保存在本地，那么，对于可移动的无线网卡来说，如果某用 户用同 一个无线网卡在多台计算机上网，而通过该无线网卡多次接入网络的总 上网流量通过该专利的方法是不能够得到统计的。</p>
    <p>上述问题使得无线网卡用户难以准确掌握上网费用，只有通过电话或登录 无线网络运营商的网站来查询上网费用。这常常会出现用户估算的上网费用， 和无线网络运营商实际的收费存在较大出入的现象，导致用户对无线网络运营 商的不信任，甚至投诉等事件的发生。</p>
    <p>为此，中国专利号为200310102404.3的文件中，提出了一种用于多个无线 局域网络操作者操作的多个无线局域网络的认证、授权与计帐系统，该系统在用户通过认证，接入网络后，由认证服务器指示计帐服务器开始接入网络的费 用计算；断开网络时，结束费用计算，并根据接入费用计算决定总费用。该专 利能够实时的计算出用户当前上网的总费用，但是由于仅仅将单次上网的费用 保存在本地，对于使用一个无线网卡在多台计算机上网的用户而言，4艮难准确 地获取到当日和/或当月上网的总费用，然而，用户关心上网流量的一个主要原 因，就是关心当日和/或当月上网的费用。</p>
    <p>另外，无线网络运营商常常会更新资费标准，而用户很难及时获取到无线 网络运营商最新的上网资费标准。然而，中国专利200310102404.3中的计帐服 务器没有实现自动更新无线网络运营商资费标准，因此，当无线网络运营商的 资费标准发生变更时，若仍然根据变更前的资费标准来计算费用就不再准确了。</p>
    <p>可见，使用无线网卡上网的流量难以得到准确统计，从而导致上网费用难 以准确计算，包月的流量超额而用户也难以得知等问题。</p>
    <p>发明内容</p>
    <p>有鉴于此，本发明的主要目的在于提供一种流量统计及自动计算上网费用 的方法及装置，能够准确统计出用户使用同 一个无线网卡在多台计算机上网的 流量。</p>
    <p>为达到上述目的，本发明公开了一种流量统计的方法，在无线网卡中设置 存储用户流量数据的地址空间，该方法包括：在设定的统计周期内，统计无线 网卡接入网络后的上下行流量，并更新当前接入网络的用户在无线网卡的地址 空间中存储的流量数据。</p>
    <p>其中，所述更新当前接入网络的用户在无线网卡的地址空间中存储的流量 数据为：依据日期、资费标准及统计得到的上下行流量，更新所述当前接入网 络的用户在无线网卡的地址空间中存储的流量数据；具体为：根据无线网卡本 次接入网络的用户名和密码，搜索无线网卡闪存Flash中与该用户名相对应的地 址空间；将统计得到的上下行流量，累加到地址空间中记录的日期相同的日上 网流量和/或月上网流量；如果没有与当前用户名相对应的地址空间则重新创建该用户名相对应的地址空间；如果没有相同日期的记录项，则重新创建一条当 前日期的流量数据记录；当资费标准更新后，重新创建一条当前日期的流量数 据记录；其中，所述流量数据包括：日期、日上网流量和/或月上网流量。</p>
    <p>上述方法中，所述更新当前接入网络的用户在无线网卡的地址空间中存储 的流量数据步骤之后，该方法还包括：从更新后的流量数据中取出月上网流量 与包月上网用户的包月流量进行比较，在月上网流量超过包月流量时，自动提 示流量超额。</p>
    <p>为达到上述目的，本发明还公开一种自动计算上网费用的方法，在无线网 卡中设置存储用户流量数据的地址空间，该方法包括：客户端接入网络后，实 时或周期性检测更新的资费标准；在设定的统计周期内，统计无线网卡接入网 络后的上下行流量，并更新当前用户对应的流量数据；在设定的计费周期内， 根据上网的资费标准、当前用户的流量数据，计算当前的当日和/或当月的上网 费用。</p>
    <p>其中，所述实时检测更新的资费标准包括：实时或周期性检测无线网络运 营商更新的资费标准，并将更新的资费标准下载至本地的客户端；客户端得到 更新的资费标准后，重新创建一条流量数据的记录；其中，所述流量数据包括： 曰期、日上网流量及对应的资费标准和/或月上网流量及对应的资费标准；所述 统计周期与计费周期一致。</p>
    <p>上述方法中，所述更新当前用户对应的流量数据为：依据日期、资费标准 及统计得到的上下行流量，更新所述当前接入网络的用户在无线网卡的地址空 间中存储的流量数据；具体为：根据无线网卡本次接入网络的用户名和密码， 搜索无线网卡Flash中与该用户名相对应的地址空间；将统计得到的上下行流 量，累加到本次接入网络的用户在无限网卡上的地址空间中的日上网流量和/ 或月上网流量；在计算当前的当日和/或当月的上网费用步骤之后，更新显示当 前的当日和/或当月的上网费用。</p>
    <p>相应地，本发明提供一种流量统计的装置，包括：无线网卡和无线连接管 理模块，其中，无线网卡，用于接入网络，存储用户的流量数据；无线连接管理模块，用于在每个统计周期内，统计无线网卡接入网络后的上下行流量，并 更新无线网卡中与本次接入网络的用户名对应的日上网流量和/或月上网流量。</p>
    <p>上述装置中，所述无线连接管理模块具体用于：依据日期、资费标准及统 计得到的上下行流量，将统计得到的上下行流量，累加到无线网卡中与本次接 入网络的用户名对应的日上网流量和/或月上网流量。</p>
    <p>相应地，本发明还提供一种自动计算上网费用的装置，包括：无线网卡、 无线连接管理模块和计费模块，其中，无线网卡，用于接入网络，存储用户的 流量数据；无线连接管理模块，用于在每个统计周期内，统计无线网卡接入网 络后的上下行流量，并更新无线网卡中当前接入网络的用户的流量数据；计费 模块，用于实时检测更新的资费标准，在检测到更新的资费标准后通知所述无 线连接管理模块，并计算出当前的当日和/或当月的上网费用。</p>
    <p>其中，所述计费模块包括：检测单元、通知单元和计算单元；其中，检测 单元，用于实时^r测更新的资费标准；通知单元，用于在所述检测单元^r测到 更新的资费标准后通知所述无线连接管理模块；计算单元，用于依据所述无线 连接管理模块更新的流量数据、所述检测单元检测到更新的资费标准，计算本 次接入网络的当日和/或当月的上网费用；所述计费模块还包括：更新显示单元， 用于更新并向用户显示当前的当日和/或当月的上网费用；所述^r测单元，还用 于将4企测到的更新的资费标准存储到本地。</p>
    <p>上述装置中，所述无线连接管理模块包括：统计单元和更新单元；其中， 统计单元，用于在每个统计周期内，统计无线网卡接入网络后的上下行流量； 更新单元，用于依据日期、所述检测单元检测到的资费标准及所述统计单元统 计得到的上下行流量，更新当前接入网络的用户的流量数据；所述无线连接管 理模块还包括：判断提醒单元，用于判断包月上网用户的月上网流量是否超过 包月流量，并在包月上网用户的月上网流量超过包月流量时，提醒该用户上网 流量超额。</p>
    <p>由以上技术方案可以看出，本发明通过将用户每次上网的流量记录在无线 网卡上与该用户对应的地址空间中，能够准确统计出用户4吏用同一个无线网卡在多台计算机上网的日上网流量和/或月上网流量，并且自动更新无线网络运营 商的资费标准，根据对应的资费标准来计算并向用户提供上网费用。用户在本 地运行无线连接管理模块和计费模块，便可明确得知其当前的日上网流量及费 用和/或月上网流量及费用。如此，解决了由于不能够及时获取到无线网络运营 商更新的资费标准，而难以准确计算出上网费用的问题。</p>
    <p>而且，对于同一个无线网卡上网的不同用户而言，本发明能够区分记录不</p>
    <p>同用户的上网流量及上网费用，例如：由于不同的用户会拥有运营商分配的不 同的用户名和密码，所以根据各用户上网使用的用户名，在无线网卡中分别存 储各用户的上网流量数据。如此，不同的用户即使使用同一个无线网卡上网， 也能分别统计他们各自的上网流量、上网费用，也便于运营商收费。</p>
    <p>另外，对于进行流量包月上网的用户而言，通过本发明能够及时提醒该用 户其上网流量是否超出本月的包月流量，保证上网流量超出包月流量时，该用 户能够及时得知自身的网费使用情况，可避免发生因超出包月流量而不得不支 付超额流量的上网费用的情况。</p>
    <p>附图说明</p>
    <p>图1A为本发明实施例中流量统计的方法流程示意图；</p>
    <p>图1B为本发明实施例中自动计算上网费用的方法流程示意图；</p>
    <p>图2为本发明实施例中流量统计的方法实施例示意图；</p>
    <p>图3为本发明实施例中自动计算上网费用的方法实施例示意图；</p>
    <p>图4为本发明实施例中流量统计及自动计算上网费用的装置结构示意图。</p>
    <p>具体实施方式</p>
    <p>本发明的基本思想在于：统计使用同 一个无线网卡的用户上网的流量并将 流量数据保存在无线网卡上；自动更新无线网络运营商资费标准，并根据所述 流量数据对应的资费标准，准确计算并提供给用户当日上网流量及上网费用、 和/或当月上网流量及上网费用。和优点能够更加明显易懂，下面结合附图和具 体实施例对本发明作进一步详细的说明。</p>
    <p>图1A为本发明实施例中流量统计的方法流程示意图，本发明流量统计的方 法如图1A所示，具体步骤包括：</p>
    <p>步骤101A,在无线网卡的闪存（Flash)中对应接入网络的用户名和密码开 辟用于存放流量数据的地址空间；</p>
    <p>客户端在使用无线网卡上网时，需要无线连接管理模块进行搜索网络、鉴 权接入、统计上网流量等^l&#21951;作。本实施例中，由用户或者位于客户端上的无线 连接管理模块在无线网卡的Flash中开辟一块用于存放流量数据的地址空间，用 于存放不同用户上网的流量数据、以及与该流量数据对应的无线网络运营商的</p>
    <p>资费标准文件路径。</p>
    <p>为了便于保存多个使用该无线网卡的不同用户上网流量数据，再根据不同 的用户名和密码，可将该地址空间进一步划分为若干个子地址空间，为每个使 用该无线网卡的用户分别开辟了一块用于存放流量数据的地址空间。这里，采 用动态分配空间的方法，即：如果只有一个用户^f吏用该无线网卡，将该地址空 间全部分配给该用户；如果有两个用户使用该无线网卡，则将该地址空间对半 分配给这两个用户，以此类推。当然，也可以不划分子地址空间，只通过存储 地址的范围来区分或其他标识来区分。</p>
    <p>只有在无线连接管理模块中输入匹配的用户名和密码，无线连接管理模块 才能接入网络，获取接入网络的上下行流量，并根据用户需要对与该用户的流 量数据进行操作，如流量数据的读取、更新等操作。每条流量数据一般包含： 曰期、日上网流量及该流量凄丈据对应的资费标准文件路径、和/或月上网流量以 及对应的资费标准文件路径。</p>
    <p>其中，该资费标准文件路径是为计算上网费用提供资费标准，而且从服务</p>
    <p>器上获取实时更新的无线网络运营商的资费标准文件。如果不需要计算上网费</p>
    <p>用，则所述流量数据中就不必包含该资费标准文件路径。如果需要计算上网费</p>
    <p>用，则在无线网卡中还要为资费标准文件路径分配一个地址空间，以^(吏后续的计算上网费用及更新资费标准。</p>
    <p>另外，当存在多个用户使用同一个无线网卡上网时，根据不同的用户名和 米，在该无线网卡上分别开辟出与各用户名及日期相对应的地址空间，以后在 接入网络后统计上网流量时，将统计到的上网流量数据到与当前接入网络的用 户名相对应的地址空间中。也就是说，如果没有与当前用户名相对应的地址空 间，则重新创建该用户名相对应的地址空间。而且，在无线网卡断电后，存储</p>
    <p>在Flash中的凄t据也不会丢失。</p>
    <p>步骤102A，周期性统计无线网卡接入网络后的上下行流量；</p>
    <p>这里，客户端先启动无线连接管理模块并插入无线网卡设备，再通过该无 线连接管理模块搜索网络，并通过鉴权等操作将无线网卡接入网络，且该无线 连接管理模块对无线网卡接入网络的操作进行管理，例如：对用户的鉴权及上 网流量的统计。其中，无线连接管理模块周期性地获取无线网卡接入网络的上 下行流量，并分别按日和按月，将每次接入网络的上下行流量累加到本次接入 网络的用户名对应的上网流量的记录中上，从而统计出当前上网用户日上网流 量和/或月上网流量。</p>
    <p>该流量数据与日期和/或月份对应的日上网流量和/或月上网流量，可分别记 录为列表的形式，例如：列表&#27243;栏为日期和/或月份，纵栏为对应的流量和资费 标准文件目录。随着接入日期和/或月份的改变，横栏会不断增加。</p>
    <p>其中，将周期性统计上下行流量的周期称为统计周期，该统计周期一般设 定为10秒~60秒，因为如果统计周期设定的太小，&#21063;会由于读写无线网卡的速率 就会太高，而造成网卡设备的发热；但是，如果统计周期设定的太大，则会导 致不能及时更新流量数据。</p>
    <p>步骤103A,依据统计得到的上下行流量，周期性更新Flash中当前用户对应 的地址空间中保存的流量数据。</p>
    <p>其中，无线连接管理模块获取接入网络的上下行流量后，周期性更新Flash 中当前用户对应的地址空间中保存的流量数据，主要就是在设定的统计周期内， 根据本次接入网络的用户名，搜索无线网卡Flash中与该用户名相对应的地址空间，然后分别按日、按月、资费标准，将统计得到的上下行流量累加到子地址 空间中记录的日期相同的日上网流量和/或月上网流量，进而统计出日上网流量 和/或月上网流量。如果没有相同日期的记录项，则开起一条当前日期的流量数</p>
    <p>据记录；当资费标准更新后，重新开起一条当前日期的流量数据记录。在需要 用到日上网流量和/或月上网流量时，会从无线网卡中读取流量数据。如果该用 户名对应的地址空间还不存在，则动态的根据用户名和密码，在无线网卡Flash 中分配出一块足够的地址空间。此后，对应该用户名和密码的所有流量数据都 存入该地址空间。</p>
    <p>以上所述流程为流量统计的实现过程，那么，在此基础上，如果需要进一 步计算上网费用，则利用统计的用户上网流量、以及自动更新无线网络运营商 的资费标准，用户在本地运行无线连接管理模块和计费模块就能够及时、准确 地计算到日上网费用及月上网费用。自动计算上网费用的流程如图1B所示，具 体包括以下步骤：</p>
    <p>步骤101B，在无线网卡接入网络时，客户端便会启动计费模块；</p>
    <p>这里，该计费模块能够检测、更新网络运营商资费标准，并且能够根据上 网流量和对应的资费标准，计算出用户上网费用。本实施例会在服务器上编写 并存储一个计算上网费用的软件，如果客户端尚未安装该计费模块，则可从服 务器上下载与该计费模块对应的用于计算上网费用的软件，然后安装用于计算 上网费用的软件，该用于计算上网费用的软件作为客户端的计费模块，并在接 入网络后，由无线连接管理模块触发并启动该计费模块。</p>
    <p>步骤102B，计费才莫块在启动后，实时或周期性;险测无线网路运营商的网站 上是否存在更新的资费标准，如果存在更新的资费标准，则执行步骤103B;如 果不存在更新的资费标准，则执行步骤104B;</p>
    <p>步骤103B,自动将更新的资费标准下载到本地，并将资费标准文件路径存 储到无线网卡上记录该资费标准文件路径的地址空间中，并通知无线连接管理 模块重新统计流量数据，然后执行步骤104B;</p>
    <p>其中，计费模块在检测到更新的资费标准后，便自动将更新的资费标准下载到本地，并存储在用户指定的位置。</p>
    <p>步骤104B,周期性计算出本次接入网络的用户的当日和/或当月的上网费用。</p>
    <p>其中，将周期性计算并更新显示上网费用的周期称为计费周期，该计费周期一般设定为10秒&#12316;60秒，该计费周期可与无线连接管理模块存入流量数据的统计周期一致。计费模块能够从服务器实时检测并下载无线网络运营商更新的资费标准，并且在计费周期内读取无线网卡中更新的流量记录，从而根据流量及其对应的资费标准，计算出本次接入网络的当日和/或当月的上网费用。</p>
    <p>具体地，在一定计费周期内，从无线网卡的Flash中读取某用户的日上网流量和/或月上网流量、以及日上网流量和/或月上网流量各自对应的资费标准，分别计算出该用户当日和/或当月的上网费用。这里，以月上网流量来计算上网费用为例：设当月上网流量共为X千字节（KB)，且当月还更新一次资费标准，资费标准更新前的上网流量为X,KB，资费标准为：Y,元/KB;资费标准更新后的上网流量为X2KB,资费标准为：Y2元/KB,其中XrKXfX。那么，当月的上网费用为：X,xy!+X2XY2。另外，在计算完毕后，计费模块将计算得到的上网费用结果定时的向用户显示。</p>
    <p>并且，将计算结果传给无线连接管理模块，在模块的用户界面（UI, UserInterface)显示，供用户浏览。当用户断开网络后，通常会计算最后一个周期的日上网流量及上网费、和/或月上网流量及上网费用。如此，可避免因退网后，最后一个统计周期内的上网流量没有计算对应的上网费用。</p>
    <p>实施例一：</p>
    <p>本实施例主要用于统计当日和/或当月上网流量，并且实时检测并更新上网的资费标准，4艮据日上网流量和/或月上网流量和上网的资费标准，计算出当曰和/或当月的上网费用，实时提供给用户。如图2所示，无线连接管理模块统计日上网流量和/或月上网流量，并将统计结果存入网卡Flash的过程，包括如下步骤：14步骤201，启动无线连接管理模块，监测是否有无线网卡的插入，监测到无线网卡设备后，客户端通过无线网卡接入网络；</p>
    <p>通过无线连接管理模块输入用户名和密码等鉴权消息后，客户端与网络建立连接。其中，对启动无线连接管理模块与插入无线网卡的先后顺序并无限定。</p>
    <p>步骤202 ，无线连接管理模块周期性的获取本次接入网络的上下行流量；</p>
    <p>步骤203，搜索Flash中存放流量数据的地址空间，寻找与本次接入的用户名和密码相对应的区域；</p>
    <p>其中，根据无线网卡本次接入网络的用户名和密码，搜索无线网卡Flash中与该用户名相对应的地址空间。</p>
    <p>步骤204，判断本次接入网络的用户名相对应的子地址空间是否存在，若该用户名不存在，则执行步骤205;若该用户名已存在，则执行步骤206;</p>
    <p>步骤205，根据用户名和密码，将地址空间动态分配出一块子地址空间给本次接入网络的用户，然后执行步骤210;</p>
    <p>如果没有与当前用户名相对应的地址空间则重新创建该用户名相对应的地址空间；或者，如果没有相同日期的记录项，则重新创建一条当前日期的流量数据记录；当资费标准更新后，重新创建一条当前日期的流量数据记录。此后，对应本次接入网络的用户^和密码的所有流量数据，都存入该子地址空间。</p>
    <p>步骤206，取出该区域中最新的流量数据，并将该记录流量数据的日期与本次接入网络的日期进行比较，如果日期不同，则扭i行步骤207;如果日期相同，则执行步骤208;</p>
    <p>步骤207，重新创建一条日上网流量和/或月上网流量的流量数据记录，然后执行步骤208;</p>
    <p>如果日期不同，或者收到计费模块发来的运营商资费标准更新的通知消息，则此时，日上网流量和/或月上网流量不再与Flash中取出的流量数据进行累加，而是重新创建一条记录。</p>
    <p>需要说明的是，在需要计算上网费用的情况下，如果在将获取上下行流量与Flash中取出的流量数据对应累加之前，如果收到计费模块的更新资费标准的创建一条流量数据记录。如果未收到计费模块的更新资费标准的通知消息，则不必重新创建一条流量数据记录，将统</p>
    <p>计得到的日上网流量和/或月上网流量与Flash中取出的流量数据对应累加。</p>
    <p>步骤208，检测并判断分配给本次接入用户的子地址空间是否已存满，若已</p>
    <p>存满，则执行步骤209;若未存满，则执行步骤210;</p>
    <p>步骤209,删除该子地址空间中最旧的一条记录，然后执行步骤210。步骤210,将当前获取的上下行流量与Flash中取出的流量数据对应累加，</p>
    <p>然后执行步骤211;</p>
    <p>这里，将当前获取的上下行流量，即日上网流量和/或月上网流量，对应地累加到无线网卡Flash中。具体地，将日上网流量和/或月上网流量对应当前用户、曰期、及资费标准等累加到无线网卡Flash中取出的流量数据中，实现对流量数据的更新。对于新创建的流量数据记录，其取出的流量数据记录可为O，统计的日上网流量和/或月上网流量则直接在该流量数据记录的基础上对应累加。</p>
    <p>步骤211 ，将更新的流量数据存入与本次接入网络的用户相对应的无线网卡Flash的子地址空间中。</p>
    <p>其中，所述更新的流量数据包括：日期、日上网流量和/或月上网流量，如果需要计费的话，所述更新的流量数据还包括该流量数据对应的资费标准文件路径。</p>
    <p>上述为计算日上网流量与月上网流量的实现过程，那么对于流量包月上网的用户而言，主要获取当月上网的上网流量，通过将统计到的月上网流量与该用户的包月流量进行比较，便会得知其当前的上网流量是否超过包月流量。而且一旦超出包月流量，无线管理模块便会提示用户当月流量已超额。对此，下面结合本发明流量统计的方法实施例二来进一 步说明流量包月上网的用户进行流量统计的实现过程。</p>
    <p>实施例二：</p>
    <p>本实施例流量包月上网的用户进行流量统计的过程具体步骤如下：</p>
    <p>1步骤301~310,与实施例一的步骤201&#12316;210基本相同，参照上面描述即可，此处不再重复。</p>
    <p>步骤311，将月上网流量与用户该月的包月流量进行比较，若此时月上网流量超过该月的包月流量，则提示用户当月流量已超额。</p>
    <p>本实施例对于上网流量包月的用户是非常有用的，尤其随着3G网络的广泛应用，上网速率大幅度提高，及时的提示用户流量超额更是意义重大。</p>
    <p>为了计算上网费用，基于上述统计得到的流量数据，并根据实时更新得到的无线网络运营商的资费标准，来计算该用户的上网费用。如图3所示，为本发明实施例中自动计算上网费用的方法流程示意图，具体步骤包括：</p>
    <p>步骤401,客户端的无线连接管理模块在接入网络后，触发并启动计费模块；</p>
    <p>步骤402，计费模块在启动后，自动实时或周期性检测是否存在更新的资费标准，如果存在更新的资费标准，则执行步骤403;如果不存在更新的资费标准，则执行步骤405;</p>
    <p>计费模块在启动后，自动并实时到无线网络运营商的网站上检测是否存在更新的资费标准。</p>
    <p>步骤403，计费模块自动将资费标准下载到本地，并向无线连接管理模块发送检测到更新资费标准的通知消息；</p>
    <p>步骤404，无线连接管理模块收到上述通知消息后，将重新创建一条流量数据记录，来记录日上网流量和/或月上网流量以及该流量数据对应的资费标准文件路径；</p>
    <p>无线连接管理模块启动后，会实时或周期检查计费模块是否检测到更新资费标准的通知消息。</p>
    <p>步骤405，计费模块根据当前上网的资费标准及Flash中的流量数据，计算出当日和/或当月的上网费用，然后执行步骤406;</p>
    <p>计费模块周期性地从无线网卡的Flash中读取与本次接入网络的用户名和密码相对应日上网流量和/或月上网流量，以及对应的资费标准，计算出用户当日和/或当月的上网费用。具体来讲，计费模块计算上网费用的过程如下：在计费周期到达时，搜索Flash中存^:流量数据的:l也址空间，并^4居输入的用户名和密码，找到与该用户名和密码相对应的Flash中的子地址空间；再根据日期，取出该子地址空间中当曰和/或当月的流量数据记录项，并能够从记录项的列表中得到当日和/或当月的流量数据对应的资费标准文件路径，然后根据对应的资费标准，计算出用户当曰的上网费用，进而累加得到当月的上网费用。</p>
    <p>步骤406，将计算结果传给无线连接管理模块，显示在无线连接管理模块的UI界面，供用户浏览。</p>
    <p>对于上述的各实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本发明并不受所描述的动作顺序的限制，因为依据本发明，某些步骤可以采用其他顺序或者同时进行。</p>
    <p>为实现上述方法，本发明提供一种流量统计的装置，包括：无线网卡和无线连接管理模块，其中，</p>
    <p>无线网卡，用于接入网络，存储用户的流量数据；</p>
    <p>无线连接管理^f莫块，用于在每个统计周期内，统计无线网卡接入网络后的上下行流量，并更新无线网卡中与本次接入网络的用户名对应的日上网流量和/或月上网流量。</p>
    <p>其中，所述无线连接管理模块具体用于：依据日期、资费标准及统计得到的上下行流量，将统计得到的上下行流量，累加到无线网卡中与本次接入网络的用户名对应的日上网流量和/或月上网流量。</p>
    <p>相应地，本发明还提供一种自动计算上网费用的装置，如图4所示，包括：无线网卡501、无线连接管理模块502和计费模块503，其中，</p>
    <p>无线网卡501,用于接入网络，存储用户的流量数据；</p>
    <p>无线连接管理-漠块502,用于在每个统计周期内，统计无线网卡接入网络后的上下行流量，并更新无线网卡中当前接入网络的用户的流量数据；</p>
    <p>计费模块503，用于实时检测更新的资费标准，在检测到更新的资费标准后通知所述无线连接管理模块，以及计算出当前的当日和/或当月的上网费用。上述装置中，所述计费模块503包括：检测单元、通知单元和计算单元。其</p>
    <p>中：</p>
    <p>检测单元，用于实时检测更新的资费标准；</p>
    <p>通知单元，用于在所述检测单元检测到更新的资费标准后通知所述无线连接管理模块；</p>
    <p>计算单元，用于依据所述无线连接管理模块502更新的流量数据、所述检测单元检测到更新的资费标准，计算本次接入网络的当日和/或当月的上网费用；所述计费模块503还包括：</p>
    <p>更新显示单元，用于更新并向用户显示当前的当日和/或当月的上网费用；所述检测单元，还用于将检测到的更新的资费标准存储到本地。所述无线连接管理模块502包括：统计单元和更新单元，其中：统计单元，用于在每个统计周期内，统计无线网卡接入网络后的上下行流</p>
    <p>量；</p>
    <p>更新单元，用于依据日期、所述检测单元检测到的资费标准及所述统计单</p>
    <p>元统计得到的上下行流量，更新当前接入网络的用户的流量数据；所述无线连接管理才莫块还包括：</p>
    <p>判断提醒单元，用于判断包月上网用户的月上网流量是否超过包月流量，并在包月上网用户的月上网流量超过包月流量时提醒该用户上网流量超额。</p>
    <p>在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述即可。以上所述，仅为本发明的较佳实施例而已，只是用来说明和解释本发明，并非用于限定本发明的保护范围。在本发明的精神和权利要求保护范围之内，对本发明所作的任何修改、等同替换，都落入本发明的保护范围。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101854649A?cl=zh">CN101854649A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年5月20日</td><td class="patent-data-table-td patent-date-value">2010年10月6日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">移动终端、监控移动终端上网数据流量的方法及装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102469013A?cl=zh">CN102469013A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年11月5日</td><td class="patent-data-table-td patent-date-value">2012年5月23日</td><td class="patent-data-table-td ">英业达股份有限公司</td><td class="patent-data-table-td ">网络通信控制方法及应用其的电子装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103430166A?cl=zh">CN103430166A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年10月4日</td><td class="patent-data-table-td patent-date-value">2013年12月4日</td><td class="patent-data-table-td ">海德沃特合作I有限公司</td><td class="patent-data-table-td ">用于提供用户通知的系统和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN104994220A?cl=zh">CN104994220A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2015年5月18日</td><td class="patent-data-table-td patent-date-value">2015年10月21日</td><td class="patent-data-table-td ">北京奇虎科技有限公司</td><td class="patent-data-table-td ">一种数据处理方法和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2461549A1?cl=zh">EP2461549A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月20日</td><td class="patent-data-table-td patent-date-value">2012年6月6日</td><td class="patent-data-table-td ">Huawei Device Co., Ltd.</td><td class="patent-data-table-td ">Mobile phone internet flow counting and displaying method, device, and mobile phone</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2461549A4?cl=zh">EP2461549A4</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月20日</td><td class="patent-data-table-td patent-date-value">2012年10月10日</td><td class="patent-data-table-td ">Huawei Device Co Ltd</td><td class="patent-data-table-td ">Mobile phone internet flow counting and displaying method, device, and mobile phone</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2958303A3?cl=zh">EP2958303A3</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月20日</td><td class="patent-data-table-td patent-date-value">2016年1月6日</td><td class="patent-data-table-td ">Huawei Device Co., Ltd.</td><td class="patent-data-table-td ">Method for measuring and displaying internet traffic of mobile phone and mobile phone</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US8774046">US8774046</a></td><td class="patent-data-table-td patent-date-value">2009年8月21日</td><td class="patent-data-table-td patent-date-value">2014年7月8日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">Method and device for counting traffic and automatically calculating a cost of surfing a network</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US8805322">US8805322</a></td><td class="patent-data-table-td patent-date-value">2012年4月26日</td><td class="patent-data-table-td patent-date-value">2014年8月12日</td><td class="patent-data-table-td ">Huawei Device Co., Ltd.</td><td class="patent-data-table-td ">Method, apparatus, and mobile phone for measuring and displaying internet traffic of mobile phone</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2010142087A1?cl=zh">WO2010142087A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年8月21日</td><td class="patent-data-table-td patent-date-value">2010年12月16日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">流量统计及自动计算上网费用的方法及装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2011143989A1?cl=zh">WO2011143989A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年4月18日</td><td class="patent-data-table-td patent-date-value">2011年11月24日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">移动终端、监控移动终端上网数据流量的方法及装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013189376A1?cl=zh">WO2013189376A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年8月19日</td><td class="patent-data-table-td patent-date-value">2013年12月27日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">一种WiFi流量统计方法、装置和系统</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012140000">H04L12/14</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04W0004240000">H04W4/24</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M2215/22">H04M2215/22</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M15/83">H04M15/83</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/1421">H04L12/1421</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M15/8214">H04M15/8214</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M15/835">H04M15/835</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/14">H04L12/14</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04W4/26">H04W4/26</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/1485">H04L12/1485</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M2215/782">H04M2215/782</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04W4/24">H04W4/24</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M2215/204">H04M2215/204</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=TnV1BwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04M15/8355">H04M15/8355</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">H04L12/14</span>, <span class="nested-value">H04W4/26</span>, <span class="nested-value">H04W4/24</span>, <span class="nested-value">H04M15/82C</span>, <span class="nested-value">H04M15/83</span>, <span class="nested-value">H04M15/835</span>, <span class="nested-value">H04M15/835C</span>, <span class="nested-value">H04L12/14T</span>, <span class="nested-value">H04L12/14C2</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2009年12月9日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2010年2月3日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年11月6日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/756a2adaeb5e09ee449e/CN101600186A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E6%B5%81%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8F%8A%E8%87%AA%E5%8A%A8%E8%AE%A1%E7%AE%97%E4%B8%8A%E7%BD%91.pdf?id=TnV1BwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1MV0HFDzNYjEelJ-YwfYOR-xd7tg"},"sample_url":"https://www.google.com/patents/reader?id=TnV1BwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>