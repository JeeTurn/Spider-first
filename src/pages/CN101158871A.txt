<!DOCTYPE html><html><head><title>专利 CN101158871A - 集散控制系统操作员站内存数据库结构存储的同步方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="集散控制系统操作员站内存数据库结构存储的同步方法"><meta name="DC.contributor" content="吴明光" scheme="inventor"><meta name="DC.contributor" content="安庆敏" scheme="inventor"><meta name="DC.contributor" content="李化东" scheme="inventor"><meta name="DC.contributor" content="浙江大学" scheme="assignee"><meta name="DC.date" content="2007-11-12" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开一种集散控制系统操作员站内存数据库结构存储的同步方法。操作组态文件存储在操作员站内置的Flash内存中，以操作组态文件为数据字典在操作员站共享RAM内存中建立内存数据库，数据库结构与数据分开存储，在实时监控软件平台上监控。采用多级指针存储结构，将内存数据库关系元组表示为一个指向实际数据的指针集合；针对操作员站数据更新方式单一的特点，采用读写双指针结合读写信号量技术实现内存数据库的同步。本发明有效解决了操作员站读写任务时数据冲突所引起的数据完整性和一致性问题；多级指针存储结构，具有直接地址访问的高效率，适用于操作员站内存数据库变字长字段的特殊要求，且工业现场数据在内存数据库中只需存储一次。"><meta name="DC.date" content="2008-4-9"><meta name="citation_patent_publication_number" content="CN:101158871:A"><meta name="citation_patent_application_number" content="CN:200710156683"><link rel="canonical" href="https://www.google.com/patents/CN101158871A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101158871A?cl=zh"/><meta name="title" content="专利 CN101158871A - 集散控制系统操作员站内存数据库结构存储的同步方法"/><meta name="description" content="本发明公开一种集散控制系统操作员站内存数据库结构存储的同步方法。操作组态文件存储在操作员站内置的Flash内存中，以操作组态文件为数据字典在操作员站共享RAM内存中建立内存数据库，数据库结构与数据分开存储，在实时监控软件平台上监控。采用多级指针存储结构，将内存数据库关系元组表示为一个指向实际数据的指针集合；针对操作员站数据更新方式单一的特点，采用读写双指针结合读写信号量技术实现内存数据库的同步。本发明有效解决了操作员站读写任务时数据冲突所引起的数据完整性和一致性问题；多级指针存储结构，具有直接地址访问的高效率，适用于操作员站内存数据库变字长字段的特殊要求，且工业现场数据在内存数据库中只需存储一次。"/><meta property="og:title" content="专利 CN101158871A - 集散控制系统操作员站内存数据库结构存储的同步方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101158871A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101158871A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=skVcBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101158871A&amp;usg=AFQjCNEpgv2_njQ0YH3okCO0eWvfkhWYYg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/e69439129af71391c0cf/CN101158871A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/e69439129af71391c0cf/CN101158871A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101158871A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101158871A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101158871A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN100470429C?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101158871A?cl=zh" style="display:none"><span itemprop="description">本发明公开一种集散控制系统操作员站内存数据库结构存储的同步方法。操作组态文件存储在操作员站内置的Flash内存中，以操作组态文件为数据字典在操作员站共享RAM内存中建立内存数据库，数据库结构与数据分开存储，在实 ...</span><span itemprop="url">https://www.google.com/patents/CN101158871A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101158871A - 集散控制系统操作员站内存数据库结构存储的同步方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101158871A - 集散控制系统操作员站内存数据库结构存储的同步方法" title="专利 CN101158871A - 集散控制系统操作员站内存数据库结构存储的同步方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101158871 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200710156683</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2008年4月9日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2007年11月12日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年11月12日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN100470429C?hl=zh-CN&amp;cl=zh">CN100470429C</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200710156683.X, </span><span class="patent-bibdata-value">CN 101158871 A, </span><span class="patent-bibdata-value">CN 101158871A, </span><span class="patent-bibdata-value">CN 200710156683, </span><span class="patent-bibdata-value">CN-A-101158871, </span><span class="patent-bibdata-value">CN101158871 A, </span><span class="patent-bibdata-value">CN101158871A, </span><span class="patent-bibdata-value">CN200710156683, </span><span class="patent-bibdata-value">CN200710156683.X</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%90%B4%E6%98%8E%E5%85%89%22">吴明光</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%AE%89%E5%BA%86%E6%95%8F%22">安庆敏</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E5%8C%96%E4%B8%9C%22">李化东</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%B5%99%E6%B1%9F%E5%A4%A7%E5%AD%A6%22">浙江大学</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101158871A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101158871A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101158871A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (8),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=skVcBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200710156683&amp;usg=AFQjCNFP2B85XsaYvk3duun4AZk2aXZehg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=skVcBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101158871A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNE6LnugEDeoiV8CoWVaAHOccjbbXQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT70575298" lang="ZH" load-source="patent-office">集散控制系统操作员站内存数据库结构存储的同步方法</invention-title>
      </span><br><span class="patent-number">CN 101158871 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA38344986" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开一种集散控制系统操作员站内存数据库结构存储的同步方法。操作组态文件存储在操作员站内置的Flash内存中，以操作组态文件为数据字典在操作员站共享RAM内存中建立内存数据库，数据库结构与数据分开存储，在实时监控软件平台上监控。采用多级指针存储结构，将内存数据库关系元组表示为一个指向实际数据的指针集合；针对操作员站数据更新方式单一的特点，采用读写双指针结合读写信号量技术实现内存数据库的同步。本发明有效解决了操作员站读写任务时数据冲突所引起的数据完整性和一致性问题；多级指针存储结构，具有直接地址访问的高效率，适用于操作员站内存数据库变字长字段的特殊要求，且工业现场数据在内存数据库中只需存储一次。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(3)</span></span></div><div class="patent-text"><div mxw-id="PCLM5813367" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种集散控制系统操作员站内存数据库结构存储的同步方法，其特征在于集散控制系统由挂接在控制网络上的现场控制站、操作员站和工程师站三个基本子系统组成，操作员站以操作组态文件为数据字典，在操作员站共享RAM内存中建立内存数据库，操作组态文件存储在Flash内存中，数据结构与数据分开存储，在操作员站实时监控平台上实现对工业现场的监控；针对操作员站内存数据库数据更新方式单一的特点，采用读写双指针结合读写信号量技术达到内存数据库的同步；针对操作员站运行模式的特点，采用多级指针的存储结构，将内存数据库表示为一个指向实际数据的指针集合。将操作组态文件采用后台线程定时转存基于磁盘的外部数据库，工业现场数据由控制站写入外部磁盘数据库，操作员站内存数据库的恢复通过控制网络读入磁盘数据库完成。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 根据权利要求1所述的一种集散控制系统操作员站内存数据库结构存储 的同步方法，其特征在于所述的针对操作员站运行模式的特点，采用多级指针 的存储结构：将内存数据库关系元组表示为一个指向实际数据的指针集合，而 非键值本身，第一级指针与操作员站的不同画面一一对应，相当于关系数据库 中的表；第二级指针与指定的操作画面一一对应，相当于关系数据库中的记录; 第三、四级指针与构成指定操作画面的元素一一对应，相当于关系数据库中的 字段；其中第四级指针的内容是操作画面元素的地址，即键值地址，因此，工 业现场数据在内存数据库中只需存储一次。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 根据权利要求1所述的一种集散控制系统操作员站内存数据库结构存储 的同步方法，其特征在于所述的针对操作员站数据更新方式单一的特点，采用 读写双指针结合读写信号量技术达到内存数据库同步方法步骤如下：1) 初始化读写信号为零；2) 工业现场数据更新时，启动内存数据库写操作线程，写信号量置l，写 指针加1并模N， N为该数据在内存数据库中的存储量；写线程完毕，则写 信号量置0;读取读信号量，读信号量若为0，则读指针复制写指针，否则直 接结束写操作线程，此时操作员站的其他线程仍依据读指针所指地址从内存数 据库读取数据；3) 操作员站显示操作画面读取数据时，启动内存数据库读操作线程，读 信号置l，读线程完毕则读信号置0;读取写信号量，写信号量若为0，则读指 针复制写指针，否则直接结束读操作线程。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES10521648" lang="ZH" load-source="patent-office" class="description">
    <p>集散控制系统操作员站内存数据库结构存储的同步方法 技术领域本发明涉及集散控制系统和计算机领域，尤其涉及一种集散控制系统操作 员站内存数据库结构存储的同步方法。 背景技术工业生产中，应用效益最直接、最明显的系统应当是工业控制系统，特别 是集散控制系统。集散控制系统是一种集中管理和分散控制系统，是融合计算 机技术、控制技术和通信网络技术为一体的高级控制系统，系统的管理、控制、数据采集等功能分散在系统的不同计算机中。在传统的常驻磁盘数据库DRDB 中，事务处理涉及耗时的磁盘IO，无法胜任实时应用。集散控制系统是一个 实时控制系统，目前采用DRDB结合内存缓冲区的方法，通过缓冲技术和调 度算法减少磁盘10，向上层应用程序提供实时数据服务。这种方法基本上可 满足一般的实时应用，但由于还需要耗时的磁盘IO，因此无法应用于实时性 要求较高的复杂系统。随着第四代集散控制系统的出现，系统的控制功能从传 统的现场仪表层，扩展至控制装置单元层，车间调度层，进而与企业管理层融 合，系统规模增大，复杂度增加，实时性要求不断提高。作为集散控制系统各 功能模块数据交换中心的实时数据库已无法满足应用的要求，开发面向集散控 制系统的内存数据库是解决这一技术难题的有效技术。内存数据库MMDB的主数据库常驻内存，由于事务处理无需进行磁盘访 问，使基于MMDB的应用系统实时响应性能得到极大的提高。迄今有关内存 数据库的专利： 一种内存数据库主备同步的方法（ZL200410006155.2)、对移 动中通信设备中内存数据库定时监控的方法（ZL200410015178.X)、 一种全内 存数据库的数据存放方法（申请号200710106102.1)等，其应用背景涉及金融、 通信两大行业。随着内存价格的急剧下降，CPU和操作系统64位时代的到来， 阻碍内存数据库在工业控制领域应用的经济技术瓶颈己不复存在。 发明内容本发明的目的是提供一种集散控制系统操作员站内存数据库结构存储的 同步方法。集散控制系统操作员站内存数据库结构存储的同步方法中的集散控制系 统由挂接在控制网络上的现场控制站、操作员站和工程师站三个基本子系统组 成，操作员站以操作组态文件为数据字典，在操作员站共享RAM内存中</p>
    <p>建立内存数据库，操作组态文件存储在Flash内存中，数据结构与数据分 开存储，在操作员站实时监控平台上实现对工业现场的监控；针对操作员 站内存数据库数据更新方式单一的特点，采用读写双指针结合读写信号量技术 达到内存数据库的同步；针对操作员站运行模式的特点，采用多级指针的存储 结构，将内存数据库表示为一个指向实际数据的指针集合。将操作组态文件 采用后台线程定时转存基于磁盘的外部数据库，工业现场数据由控制站写入外 部磁盘数据库，操作员站内存数据库的恢复通过控制网络读入磁盘数据库完 成。所述的针对操作员站运行模式的特点，采用多级指针的存储结构：将内存 数据库关系元组表示为一个指向实际数据的指针集合，而非键值本身，第一级 指针与操作员站的不同画面一一对应，相当于关系数据库中的表；第二级指针 与指定的操作画面一一对应，相当于关系数据库中的记录；第三、四级指针与 构成指定操作画面的元素一一对应，相当于关系数据库中的字段；其中第四级 指针的内容是操作画面元素的地址，即键值地址，因此，工业现场数据在内存 数据库中只需存储一次。所述的针对操作员站数据更新方式单一的特点，采用读写双指针结合读写 信号量技术达到内存数据库同步方法步骤如下：1) 初始化读写信号为零；2) 工业现场数据更新时，启动内存数据库写操作线程，写信号量置l，写 指针加1并模N， N为该数据在内存数据库中的存储量；写线程完毕，则写 信号量置0;读取读信号量，读信号量若为0，则读指针复制写指针，否则直 接结束写操作线程，此时操作员站的其他线程仍依据读指针所指地址从内存数 据库读取数据；3) 操作员站显示操作画面读取数据时，启动内存数据库读操作线程，读 信号置l，读线程完毕则读信号置0;读取写信号量，写信号量若为0，则读指 针复制写指针，否则直接结束读操作线程。本发明与现有技术相比，具有的有益效果是：本发明采用读写指针结合读写信号量技术，有效解决了操作员站读写任务 时数据冲突所引起的数据完整性和一致性问题；与现有内存数据库的锁机制同 步策略相比，读写双指针结合读写信号量技术充分考虑了操作员站数据存取的 特点，实现技术简单，占用资源较少。采用多级指针存储结构，数据库不再被 视为大量存储文件而被视为内存中可寻址的大量数据，从而具有直接地址访问 数据的高效率特性，同时满足操作员站内存数据库变字长字段的特殊要求，而</p>
    <p>且工业现场数据在内存数据库中只需存储一次。操作员站内存数据库对实时性无特殊需求的操作员操作记录等数据存入Flash内存，采用后台线程定时转存 基于磁盘的外部数据库。内存数据库的恢复机制通过集散控制系统控制站的外 部磁盘数据库资源实现。操作员站内存数据库的恢复机制摒弃常用的日志技 术，充分利用集散控制系统软硬件体系本身的技术潜力，工业现场数据由控制 站写入外部磁盘数据库，操作员站内存数据库的恢复通过控制网络读入磁盘数 据库完成。 附图说明图l是集散控制系统结构简图；图2是工程站离线IO组态的模拟量输入屏幕编辑器示意图； 图3是操作员站合成氨MDEA脱碳工艺图； 图4是工艺流程图动态参数和相关图元素的组态界面； 图5是操作员站内存数据的存储结构图； 图6是操作员站内存数据库同步的流程图。 具体实施方式集散控制系统操作员站内存数据库结构存储的同步方法中的集散控制系 统由挂接在控制网络上的现场控制站、操作员站和工程师站三个基本子系统组 成，操作员站以操作组态文件为数据字典，在操作员站共享RAM内存中 建立内存数据库，操作组态文件存储在Flash内存中，数据结构与数据分 开存储，在操作员站实时监控平台上实现对工业现场的监控；针对操作员 站内存数据库数据更新方式单一的特点，采用读写双指针结合读写信号量技术 达到内存数据库的同步；针对操作员站运行模式的特点，采用多级指针的存储 结构，将内存数据库表示为一个指向实际数据的指针集合。将操作组态文件 采用后台线程定时转存基于磁盘的外部数据库，工业现场数据由控制站写入外 部磁盘数据库，操作员站内存数据库的恢复通过控制网络读入磁盘数据库完 成。所述的针对操作员站运行模式的特点，采用多级指针的存储结构：将内存 数据库关系元组表示为一个指向实际数据的指针集合，而非键值本身，第一级 指针与操作员站的不同画面一一对应，相当于关系数据库中的表；第二级指针 与指定的操作画面一一对应，相当于关系数据库中的记录；第三、四级指针与 构成指定操作画面的元素一一对应，相当于关系数据库中的字段；其中第四级 指针的内容是操作画面元素的地址，即键值地址，因此，工业现场数据在内存 数据库中只需存储一次。 所述的针对操作员站数据更新方式单一的特点，采用读写双指针结合读写 信号量技术达到内存数据库同步方法步骤如下：1) 初始化读写信号为零；2) 工业现场数据更新时，启动内存数据库写操作线程，写信号量置l，写指针加1并模N， N为该数据在内存数据库中的存储量；写线程完毕，则写 信号量置0;读取读信号量，读信号量若为0，则读指针复制写指针，否则直 接结束写操作线程，此时操作员站的其他线程仍依据读指针所指地址从内存数 据库读取数据；3) 操作员站显示操作画面读取数据时，启动内存数据库读操作线程，读 信号置l，读线程完毕则读信号置0;读取写信号量，写信号量若为0，则读指针复制写指针，否则直接结束读操作线程。如图1所示，集散控制系统由挂接在控制网络上的现场控制站、操作员站 和工程师站三个基本子系统组成。工程师借助离线组态软件的专用屏幕编辑器，在工程师站上完成控制系统IO、控制方案、报警、操作画面、报表等组 态，经控制网络下载的操作组态文件存储在操作员站内置的Flash内存中。操 作员站以操作组态文件为数据字典，在操作员站共享RAM内存中建立内 存数据库，数据结构与数据分开存储，在操作员站实时监控平台上实现对 工业现场的监控。针对操作站内存数据库数据更新方式单一的特点，采用读 写双指针结合读写信号量技术达到内存数据库的同步；采用多级指针的存储结 构，将内存数据库表示为一个指向实际数据的指针集合。工程师站对集散控制 系统的系统状态进行实时监视、故障分析、信号调校；现场控制站采集处理现 场信号，进行实时控制和历史数据库存储，历史数据存储在外部磁盘数据库中， 可用于集散控制系统内存数据库的恢复。如图2所示，工程师通过填表方式完成IO组态，控制方案组态与此类似。 现场控制站下载IO组态文件并存储在控制站Flash内存中，现场控制站运行信 号采集处理和控制软件时读取IO组态文件，根据IO组态文件的要求采集和处 理现场信号，并经控制网站上传至操作员站和工程师站。如图3所示，操作员站操作画面包括系统总貌、流程图、控制分组、调整 画面、趋势图、报警一览表、数据一览表等。大多数情况下，操作员是通过操 作员站的工艺流程图界面来了解现场情况。工程师通过离线组态软件中的流程 图制作工具软件，绘制个性化工艺流程图，并在流程图上定义所需显示的动态 参数。工程师站以图元格式存储流程图，以便工程师的再次修改；操作员站则 以静态图形（位图格式）结合动态参数的格式存储流程图，便于操作员站内存 数据库的存取和管理。动态参数和相关的图形元素需要与现场的检测量（数据</p>
    <p>位号变量）或控制装置关联，实时反映现场检测量（数据位号变量）的变化。动态参数和相关图形元素的组态界面如图4所示。如图5所示，操作员站内存数据库采用四级指针存储结构，内存数据库关 系元组用指向实际数据的指针集合描述，而非键值（数据）本身，因此工业现 场数据在内存数据库中只需存储一次。现结合图5详细描述直接地址访问数据 的机理。若操作员选择流程图1，则通过MMDBHead进入流程图Head、控制 分组Head……趋势图Head指针组，按需选取流程图Head,并进入二级指针 组；按需选择流程图1指针，经第三级指针组获取第四级指针；通过静态图指 针读取相关的位图，通过模拟量指针读取内存数据库按时间顺序存储的相关模 拟量。操作员站进入流程图1显示时，由指针管理模块确定一至三级指针值， 应用程序读入后在流程图1显示时不再变动;第四级指针由指针管理模块管理， 根据现场数据的更新同步刷新。因此本案例中的流程图Head相当于关系数据库中的表，即操作站内存数 据库由流程图、控制分组……趋势图等表组成。流程图指针组相当于关系数据 库表中的记录；构成流程图动静态元素的指针则相当于关系数据库表中的记录 字段的地址。控制分组……趋势图与此类似。如图6所示，针对操作员站数据更新方式单一的特点，采用读写双指针结 合读写信号量技术达到内存数据库同步，具体步骤如下：步骤一，初始化读写信号为零步骤二，工业现场数据更新时，启动内存数据库写操作线程，写信号量置 1，写指针加1并模N (N为该数据在内存数据库中的存储量）；写线程完毕， 则写信号量置0;读取读信号量，读信号量若为0，则读指针复制写指针，否 则直接结束写操作线程，此时操作员站的其他线程仍依据读指针所指地址从内 存数据库读取数据。步骤三，操作员站显示操作画面读取数据时，启动内存数据库读操作线程， 读信号置量l，读线程完毕则读信号量置0;读取写信号量，写信号量若为0， 则读指针复制写指针，否则直接结束读操作线程。仅当读写信号量均为零时，读指针才复制写指针，确保了内存数据库的同 步，数据的完整性和一致性。操作员站内存数据库运行在操作系统平台上，无论是Windows、还是Unix 或Linux，均具有多线程多任务并发特性。操作员站运行时，报警和人机交互 事件具有高优先级，因此内存数据库读写进程发生冲突是不可避免的。采用读 写双指针结合读写信号量技术较现有的锁机制同步策略，不但实现技术简单， 而且节省资源。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101770232B?cl=zh">CN101770232B</a></td><td class="patent-data-table-td patent-date-value">2009年8月25日</td><td class="patent-data-table-td patent-date-value">2012年7月18日</td><td class="patent-data-table-td ">上海市离心机械研究所有限公司</td><td class="patent-data-table-td ">一种压缩组态软件变量的数据访问方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101807073A?cl=zh">CN101807073A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年4月20日</td><td class="patent-data-table-td patent-date-value">2010年8月18日</td><td class="patent-data-table-td ">杭州和利时自动化有限公司</td><td class="patent-data-table-td ">一种分布式控制系统的历史数据处理方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101807073B?cl=zh">CN101807073B</a></td><td class="patent-data-table-td patent-date-value">2010年4月20日</td><td class="patent-data-table-td patent-date-value">2013年1月23日</td><td class="patent-data-table-td ">杭州和利时自动化有限公司</td><td class="patent-data-table-td ">一种分布式控制系统的历史数据处理方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101937498A?cl=zh">CN101937498A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年9月13日</td><td class="patent-data-table-td patent-date-value">2011年1月5日</td><td class="patent-data-table-td ">武汉达梦数据库有限公司</td><td class="patent-data-table-td ">用于共享外包数据库的数据完整性验证方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102110134A?cl=zh">CN102110134A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月28日</td><td class="patent-data-table-td patent-date-value">2011年6月29日</td><td class="patent-data-table-td ">青岛海信网络科技股份有限公司</td><td class="patent-data-table-td ">轨道交通用实时数据库、操作方法及操作装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102110134B?cl=zh">CN102110134B</a></td><td class="patent-data-table-td patent-date-value">2010年12月28日</td><td class="patent-data-table-td patent-date-value">2013年5月29日</td><td class="patent-data-table-td ">青岛海信网络科技股份有限公司</td><td class="patent-data-table-td ">轨道交通用实时数据库、操作方法及操作装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102158345A?cl=zh">CN102158345A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年6月23日</td><td class="patent-data-table-td patent-date-value">2011年8月17日</td><td class="patent-data-table-td ">青岛海信传媒网络技术有限公司</td><td class="patent-data-table-td ">一种数据管理方法、装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102306189A?cl=zh">CN102306189A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年8月31日</td><td class="patent-data-table-td patent-date-value">2012年1月4日</td><td class="patent-data-table-td ">珠海金山办公软件有限公司</td><td class="patent-data-table-td ">客户端展示网盘文件状态的方法和客户端</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=skVcBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G05B0019418000">G05B19/418</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=skVcBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=Y02P90/02">Y02P90/02</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2008年4月9日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2008年6月4日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年3月18日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/e69439129af71391c0cf/CN101158871A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E9%9B%86%E6%95%A3%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C%E5%91%98%E7%AB%99%E5%86%85%E5%AD%98%E6%95%B0.pdf?id=skVcBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0YTCzlCt9Gr1skWClQUoNMfWDtog"},"sample_url":"https://www.google.com/patents/reader?id=skVcBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>