<!DOCTYPE html><html><head><title>专利 CN102904761A - 一种nvr堆叠的方法和nvr -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种nvr堆叠的方法和nvr"><meta name="DC.contributor" content="周迪" scheme="inventor"><meta name="DC.contributor" content="余剑声" scheme="inventor"><meta name="DC.contributor" content="浙江宇视科技有限公司" scheme="assignee"><meta name="DC.date" content="2012-10-24" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供一种NVR堆叠的方法，该方法包括：如果NVR为主NVR，接收副NVR以及普通NVR发送的前端监控设备的信息；建立前端监控设备和NVR对应关系，并将对应关系同步给副NVR；判断该请求的监控资源是否属于自身管理，如果是，则进行处理，如果属于其他NVR管理，将该请求发送给其他NVR；如果该NVR被选为副NVR，将注册到副NVR的前端监控设备信息发送给主NVR；接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否故障，如果是，接替主NVR管理注册到主NVR上的前端监控设备，并接替主NVR接收监控业务请求并处理。用户对该监控网络进行监控业务时只需向主NVR发送请求，方便了用户操作。"><meta name="DC.date" content="2013-1-30"><meta name="DC.relation" content="CN:101616311:A" scheme="references"><meta name="DC.relation" content="CN:101877783:A" scheme="references"><meta name="DC.relation" content="CN:102227131:A" scheme="references"><meta name="DC.relation" content="CN:102724224:A" scheme="references"><meta name="DC.relation" content="CN:1512376:A" scheme="references"><meta name="DC.relation" content="CN:1719831:A" scheme="references"><meta name="citation_patent_publication_number" content="CN:102904761:A"><meta name="citation_patent_application_number" content="CN:201210413864"><link rel="canonical" href="https://www.google.com/patents/CN102904761A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102904761A?cl=zh"/><meta name="title" content="专利 CN102904761A - 一种nvr堆叠的方法和nvr"/><meta name="description" content="本发明提供一种NVR堆叠的方法，该方法包括：如果NVR为主NVR，接收副NVR以及普通NVR发送的前端监控设备的信息；建立前端监控设备和NVR对应关系，并将对应关系同步给副NVR；判断该请求的监控资源是否属于自身管理，如果是，则进行处理，如果属于其他NVR管理，将该请求发送给其他NVR；如果该NVR被选为副NVR，将注册到副NVR的前端监控设备信息发送给主NVR；接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否故障，如果是，接替主NVR管理注册到主NVR上的前端监控设备，并接替主NVR接收监控业务请求并处理。用户对该监控网络进行监控业务时只需向主NVR发送请求，方便了用户操作。"/><meta property="og:title" content="专利 CN102904761A - 一种nvr堆叠的方法和nvr"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102904761A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102904761A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=OB28BwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102904761A&amp;usg=AFQjCNG0RzpZgRMfDBvT7HWWVj2cwrhPLw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/9c79aa0402497947a81b/CN102904761A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/9c79aa0402497947a81b/CN102904761A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102904761A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102904761A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102904761A?cl=zh" style="display:none"><span itemprop="description">本发明提供一种NVR堆叠的方法，该方法包括：如果NVR为主NVR，接收副NVR以及普通NVR发送的前端监控设备的信息；建立前端监控设备和NVR对应关系，并将对应关系同步给副NVR；判断该请求的监控资源是否属于自身管理，如果是，则...</span><span itemprop="url">https://www.google.com/patents/CN102904761A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102904761A - 一种nvr堆叠的方法和nvr</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102904761A - 一种nvr堆叠的方法和nvr" title="专利 CN102904761A - 一种nvr堆叠的方法和nvr"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102904761 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201210413864</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2013年1月30日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2012年10月24日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2012年10月24日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201210413864.7, </span><span class="patent-bibdata-value">CN 102904761 A, </span><span class="patent-bibdata-value">CN 102904761A, </span><span class="patent-bibdata-value">CN 201210413864, </span><span class="patent-bibdata-value">CN-A-102904761, </span><span class="patent-bibdata-value">CN102904761 A, </span><span class="patent-bibdata-value">CN102904761A, </span><span class="patent-bibdata-value">CN201210413864, </span><span class="patent-bibdata-value">CN201210413864.7</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%91%A8%E8%BF%AA%22">周迪</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BD%99%E5%89%91%E5%A3%B0%22">余剑声</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%B5%99%E6%B1%9F%E5%AE%87%E8%A7%86%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">浙江宇视科技有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102904761A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102904761A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102904761A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (6),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (3),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=OB28BwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201210413864&amp;usg=AFQjCNHVrh9RkdK11-AeMKLkw3HNwJddLg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=OB28BwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102904761A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNFSUXwnBy7817hs410jA4NlgwNZ0A"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT120565662" lang="ZH" load-source="patent-office">一种nvr堆叠的方法和nvr</invention-title>
      </span><br><span class="patent-number">CN 102904761 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA106309801" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供一种NVR堆叠的方法，该方法包括：如果NVR为主NVR，接收副NVR以及普通NVR发送的前端监控设备的信息；建立前端监控设备和NVR对应关系，并将对应关系同步给副NVR；判断该请求的监控资源是否属于自身管理，如果是，则进行处理，如果属于其他NVR管理，将该请求发送给其他NVR；如果该NVR被选为副NVR，将注册到副NVR的前端监控设备信息发送给主NVR；接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否故障，如果是，接替主NVR管理注册到主NVR上的前端监控设备，并接替主NVR接收监控业务请求并处理。用户对该监控网络进行监控业务时只需向主NVR发送请求，方便了用户操作。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(10)</span></span></div><div class="patent-text"><div mxw-id="PCLM50455181" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种NVR堆叠的方法，其特征在于，该方法包括：  NVR确定自身身份，该身份包括主NVR身份、副NVR身份或者普通NVR身份；  如果该NVR被选为主NVR，接收副NVR发送的前端监控设备的信息以及接收普通NVR发送的前端监控设备的信息；在本地建立前端监控设备和NVR的对应关系信息，并将该对应关系信息同步给副NVR ;接收监控业务请求，判断该监控业务请求的监控资源是否属于自身管理，如果属于自身管理，则直接进行处理，如果属于副NVR管理，则将该请求发送给副NVR处理，如果属于普通NVR管理，则将该请求发送给普通NVR处理；  如果该NVR被选为副NVR，则将注册到副NVR的前端监控设备信息发送给主NVR ;接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否发生故障，如果是，则接替主NVR管理注册到主NVR上的前端监控设备，并且接替主NVR接收监控业务请求并进行相应处理；  如果该NVR被选为普通NVR，则将注册到该普通NVR上的前端监控设备信息发送给主NVR。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.如权利要求I所述的方法，其特征在于，所述监控业务请求的目的IP地址为预先配置的IP地址，如果该NVR被选为主NVR，则该IP地址作为业务IP地址在主NVR上生效。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.如权利要求2所述的方法，其特征在于，当该NVR被选为副NVR，如果发现主NVR故障时，所述预先配置的IP地址作为业务IP地址在该NVR上生效，该NVR发送免费ARP报文，该免费ARP报文的发送方IP地址为所述配置的IP地址，发送方MAC地址为该NVR的MAC地址。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.如权利要求I所述的方法，其特征在于，如果该NVR被选为主NVR，则将注册到主NVR上的前端监控设备的状态信息同步给副NVR，使得副NVR能根据该状态信息在主NVR故障时接管所述前端监控设备。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.如权利要求I所述的方法，其特征在于，如果该NVR被选为主NVR，则该NVR监视副NVR是否发生故障，如果副NVR发生故障，接替副NVR管理注册到副NVR上的前端监控设备。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6.	一种用于NVR的堆叠装置，其特征在于，该装置包括：身份确定模块、第一处理模块、第二处理模块和第三处理模块；  所述身份确定模块，用于确定自身身份，该身份包括主NVR身份、副NVR身份或者普通NVR身份；  第一处理模块，用于在该NVR被选为主NVR时，接收副NVR发送的前端监控设备的信息以及接收普通NVR发送的前端监控设备的信息；在本地建立前端监控设备和NVR的对应关系信息，并将该对应关系信息同步给副NVR ;接收监控业务请求，判断该监控业务请求的监控资源是否属于自身管理，如果属于自身管理，则直接进行处理，如果属于副NVR管理，则将该请求发送给副NVR处理，如果属于普通NVR管理，则将该请求发送给普通NVR处理；  第二处理模块，用于在该NVR被选为副NVR时，将注册到副NVR的前端监控设备信息发送给主NVR ;接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否发生故障，如果是，则接替主NVR管理注册到主NVR上的前端监控设备，并且接替主NVR接收监控业务请求并进行相应处理；  第三处理模块，用于在该NVR被选为普通NVR，将注册到该普通NVR上的前端监控设备信息发送给主NVR。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.如权利要求6所述的装置，其特征在于，所述监控业务请求的目的IP地址为预先配置的IP地址，  所述第一处理模块，还用于在该NVR被选为主NVR时，将该所述IP地址作为业务IP地址在主NVR上生效。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.如权利要求7所述的装置，其特征在于，所述第二处理模块，用于在该NVR被选为副NVR时，如果发现主NVR故障时，所述预先配置的IP地址作为业务IP地址在该NVR上生效，该NVR发送免费ARP报文，该免费ARP报文的发送方IP地址为所述配置的IP地址，发送方MAC地址为该NVR的MAC地址。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.如权利要求6所述的装置，其特征在于，所述第一处理模块，还用于在该NVR被选为主NVR，将注册到主NVR上的前端监控设备的状态信息同步给副NVR，使得副NVR能根据该状态信息在主NVR故障时接管所述前端监控设备。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.如权利要求6所述的装置，其特征在于，所述第一处理模块，还用于在该NVR被选为主NVR时，监视副NVR是否发生故障，如果副NVR发生故障，接替副NVR管理注册到副NVR上的前端监控设备。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES57514520" lang="ZH" load-source="patent-office" class="description">
    <p>&#8212;种NVR堆叠的方法和NVR</p>
    <p>技术领域 [0001 ] 本发明涉及视频监控领域，尤其涉及网络视频录像机NVR (NetworkVideoRecorder)的堆叠方法和一种NVR。</p>
    <p>背景技术</p>
    <p>[0002]	近几年，随着IP网络的快速发展，视频监控行业也进入了全网络化时代。全网络化时代的视频监控行业正逐步表现出IT行业的特征，作为网络化监控的核心产品NVR(Network Video Recorder即网络硬盘录像机），从本质上已经变成了 IT产品。NVR最主要的功能是通过网络接收IPC (网络摄像机)、EC (视频编码器)等设备传输的数字视频码流，并进行存储、管理。</p>
    <p>[0003]	随着监控点部署的增加，前端监控设备IPC和EC的数量通常是很庞大的，所以在一个监控网络中需要部署若干NVR，每一个NVR管理若干IPC和EC，从而实现对前端众多IPC和EC的管理和视频流量的存储。但是在这样的一个监控网络中，当用户需要对这些IPC或者EC进行监控业务时，需要对每一个NVR分别进行申请。如图I所示的一个监控网络示意图，如交换机之类的网络设备在该监控网络中被省略了。当视频点播客户端10需要分别点播NVRll&#12316;NVR16下的IPC的实况时，需要分别向每一个NVR进行申请，这样对于用户来说并不是很方便。</p>
    <p>发明内容</p>
    <p>[0004]	本发明提供一种NVR堆叠的方法，该方法包括：NVR确定自身身份，该身份包括主NVR身份、副NVR身份或者普通NVR身份；如果该NVR被选为主NVR，接收副NVR发送的前端监控设备的信息以及接收普通NVR发送的前端监控设备的信息；在本地建立前端监控设备和NVR的对应关系信息，并将该对应关系信息同步给副NVR ;接收监控业务请求，判断该监控业务请求的监控资源是否属于自身管理，如果属于自身管理，则直接进行处理，如果属于副NVR管理，则将该请求发送给副NVR处理，如果属于普通NVR管理，则将该请求发送给普通NVR处理；如果该NVR被选为副NVR，则将注册到副NVR的前端监控设备信息发送给主NVR ;接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否发生故障，如果是，则接替主NVR管理注册到主NVR上的前端监控设备，并且接替主NVR接收监控业务请求并进行相应处理；如果该NVR被选为普通NVR，则将注册到该普通NVR上的前端监控设备信息发送给主NVR。</p>
    <p>[0005]	优选地，该监控业务请求的目的IP地址为预先配置的IP地址，如果该NVR被选为主NVR，则该IP地址作为业务IP地址在主NVR上生效。</p>
    <p>[0006]	优选地，当该NVR被选为副NVR，如果发现主NVR故障时，所述预先配置的IP地址作为业务IP地址在该NVR上生效，该NVR发送免费ARP报文，该免费ARP报文的发送方IP地址为所述配置的IP地址，发送方MAC地址为该NVR的MAC地址。</p>
    <p>[0007]	优选地，如果该NVR被选为主NVR，则将注册到主NVR上的前端监控设备的状态信息同步给副NVR，使得副NVR能根据该状态信息在主NVR故障时接管所述前端监控设备。</p>
    <p>[0008]	优选地，如果该NVR被选为主NVR，则该NVR监视副NVR是否发生故障，如果副NVR发生故障，接替副NVR管理注册到副NVR上的前端监控设备。</p>
    <p>[0009]	基于同样的发明构思，本发明还提供一种用于NVR的堆叠装置，该装置包括：身份确定模块、第一处理模块、第二处理模块和第三处理模块；所述身份确定模块，用于确定自身身份，该身份包括主NVR身份、副NVR身份或者普通NVR身份；第一处理模块，用于在该NVR被选为主NVR时，接收副NVR发送的前端监控设备的信息以及接收普通NVR发送的前 端监控设备的信息；在本地建立前端监控设备和NVR的对应关系信息，并将该对应关系信息同步给副NVR ;接收监控业务请求，判断该监控业务请求的监控资源是否属于自身管理，如果属于自身管理，则直接进行处理，如果属于副NVR管理，则将该请求发送给副NVR处理，如果属于普通NVR管理，则将该请求发送给普通NVR处理；第二处理模块，用于在该NVR被选为副NVR时，将注册到副NVR的前端监控设备信息发送给主NVR ;接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否发生故障，如果是，则接替主NVR管理注册到主NVR上的前端监控设备，并且接替主NVR接收监控业务请求并进行相应处理；第三处理模块，用于在该NVR被选为普通NVR，将注册到该普通NVR上的前端监控设备信息发送给主NVR0所述监控业务请求的目的IP地址为预先配置的IP地址，</p>
    <p>[0010]	优选地，该第一处理模块，还用于在该NVR被选为主NVR时，将该所述IP地址作为业务IP地址在主NVR上生效。</p>
    <p>[0011]	优选地，该第二处理模块，用于在该NVR被选为副NVR时，如果发现主NVR故障时，所述预先配置的IP地址作为业务IP地址在该NVR上生效，该NVR发送免费ARP报文，该免费ARP报文的发送方IP地址为所述配置的IP地址，发送方MAC地址为该NVR的MAC地址。</p>
    <p>[0012]	优选地，该第一处理模块，还用于在该NVR被选为主NVR，将注册到主NVR上的前端监控设备的状态信息同步给副NVR，使得副NVR能根据该状态信息在主NVR故障时接管所述前端监控设备。</p>
    <p>[0013]	优选地，该第一处理模块，还用于在该NVR被选为主NVR时，监视副NVR是否发生故障，如果副NVR发生故障，接替副NVR管理注册到副NVR上的前端监控设备。</p>
    <p>[0014]	本发明有益效果：对于该监控网络的用户来说，在进行该监控网络的相关监控业务时，其只需向主NVR发起请求，因为该监控网络中的若干NVR通过堆叠的方式对外仅表现出一个NVR的形态，大大方便了用户的监控业务操作。同时，该若干NVR堆叠成功后，其中任何一个NVR发生故障，都不会影响到用户以及前端监控设备。</p>
    <p>附图说明</p>
    <p>[0015]	图I是一种监控网络示意图。</p>
    <p>[0016]	图2是本发明一个实施例的网络示意图。</p>
    <p>[0017]	图3是本发明一个实施例的NVR的结构框图。</p>
    <p>具体实施方式</p>
    <p>[0018]	本发明希望通过将若干NVR堆叠起来而解决背景技术中提到的问题。NVR堆叠的主要含义是对于由若干NVR构建起来的监控网络，对访问该监控网络的用户只呈现一个NVR而屏蔽掉其它NVR。更一步地，如果若干NVR中的一个NVR发生故障，对访问的用户来说不会感知到该故障；甚至对于前端监控设备来说，也不会感知到该故障。以下描述本发明具体实施例。</p>
    <p>[0019]	步骤I、NVR确定自身 身份，该身份包括主NVR身份、副NVR身份或者普通NVR身份。</p>
    <p>[0020]	本发明实施例应用的监控网络包括多个NVR，每一个NVR管理若干前端监控设备(如编码器EC、网络摄像机IPC)。为了能实现本发明的目的，首先需要确定各NVR的身份。确认NVR身份的方法有多种：比如，各NVR可以通过ONVIF协议发送组播probe消息，每个NVR在probe消息中携带自身的源MAC地址，各NVR收到probe消息后通过比较源MAC地址的大小确定主NVR，比如源MAC地址最大的NVR为主NVR，次大的为副NVR ;其余为普通NVR ；或者在probe消息中携带自身的能力参数，比如管理前端监控设备的极限值，能力大的作为主NVR，次大的作为副NVR，其余作为普通NVR。当然除了 probe消息外，NVR还可以发送其它类型的选举报文，本发明对此不做限制。</p>
    <p>[0021]	前端监控设备上线后需要注册到各自NVR上。前端监控设备上可以配置NVR的IP地址，前端监控设备向该IP地址的NVR发送注册报文以进行注册。比如，图I中的EClll上配置NVRll的IP地址200. 10. I. I，ECl 11发送目的IP地址为200. 10. I. I的注册报文向该NVR注册。除了手动配置的方式外，一种更便捷的办法可以采用自动告知前端监控设备待注册NVR的IP地址。在申请人之前的专利申请201210325452.8中，主NVR负载均衡地将包括自身在内的所有NVR分配给前端监控设备进行注册。具体地，主NVR在给前端监控设备分配IP地址的时候告知其注册的NVR的IP地址。前端监控设备根据接收到的NVR的IP地址信息向该NVR发起注册。IPC或者EC向NVR注册的过程属于现有技术，在此不再赘述。每一个前端监控设备完成在NVR上的注册后，各个NVR将保存前端监控设备的信息，如设备名称，对应的IP地址等。表I给出了注册到NVR12上各前端监控设备的信息的一个例子。</p>
    <p>          前端监控	IP地址</p>
    <p>    设备名称__</p>
    <p>               EC121	192.168.1.21~</p>
    <p>                 IPC122	192.168.1.22</p>
    <p>[0022]	__</p>
    <p>                  IPCl 23	192.168.1.23                  IPC124	192.168.1.24                  EC125	192.168.1.25</p>
    <p>[0023]表	I</p>
    <p>[0024]	步骤2、各NVR将自己的前端监控设备资源推送给主NVR，使得主NVR获得所有前端监控设备的信息。</p>
    <p>[0025]	各NVR在确认了自身的主副身份后，可以向主NVR进行注册。副NVR以及普通的NVR将自身所管理的前端监控设备资源推送给主NVR，主NVR将获知所有NVR下的前端监控设备的信息，主NVR在本地保存每一个前端监控设备和其注册的NVR的对应关系。主NVR可以说是一个上级的NVR，副NVR和普通NVR可以称之为下级的NVR。</p>
    <p>[0026]	对于图I的例子，假设选举后，NVRll为主NVR，NVR12&#12316;NVR16向NVRll注册，并且把前端监控设备的信息推送给NVR11，NVRll获知整个监控网络的监控资源。表2给出了NVRll在本地记录的NVRl2推送的资源信息的例子。</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN102904761A/CN102904761AD00071.png"> <img id="idf0001" file="CN102904761AD00071.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN102904761A/CN102904761AD00071.png" class="patent-full-image" alt="Figure CN102904761AD00071"> </a> </div>
    <p>[0028]表	2</p>
    <p>[0029]	步骤3、主NVR接收监控业务请求，判断该监控业务请求的监控资源是否属于自身管理，如果属于自身管理，则直接进行处理，如果属于副NVR管理，则将该请求发送给副NVR处理,如果属于普通NVR管理，则将该请求发送给普通NVR处理。</p>
    <p>[0030]	主NVR接收监控业务请求，该监控业务请求中一般携带请求的监控资源的名称。主NVR根据本地记录的信息将该请求通知对应的NVR处理。以图I为例，视频客户端10向主NVRll点播IPC121的实况，NVRll根据本地记录的信息(如表2)，判断IPC121属于NVR12管理的资源，NVRll将该实况点播需求交给NVR12进行处理。NVR12接收到该实况点播后的处理流程属于现有技术，不再赘述。视频客户端10向主NVRll请求回放IPClll存储的录像，NVRlI判断IPClll是自身管理的监控资源，IPClll所拍摄的视频图像存储在NVRll上，所以NVRll直接将视频客户端所请求的录像传输给视频客户端10。</p>
    <p>[0031]	在用户设备上可以预先配置好访问监控网络的IP地址，后续在发送监控业务请求的时候，以该IP地址为目的IP地址进行请求报文的发送。在进行NVR选举后，在主NVR上将该IP地址作为业务IP地址生效，从而监控业务请求报文将被转发到主NVR上。比如说，用户设备上配置的访问图I监控网络的IP地址为200. 10. I. 100，在各NVR上也都配置好该IP地址，后续哪个NVR当选为主NVR，200. 10. I. 100就在该NVR上生效启用。该NVR在网络中发送该IP地址的ARP报文，从而使得监控网络中的网络设备，如交换机能将用户设备发送的目的地址为200. 10. I. 100的监控业务请求报文转发到该NVR上。</p>
    <p>[0032]	为了防止主NVR出现故障而导致用户无法访问所有的监控资源，副NVR定时探测主NVR是否发生故障，当探测到主NVR发生故障时接替主NVR进行工作。具体地，主NVR接收各NVR推送给自己的前端监控设备信息后，在本地建立各前端监控设备和各NVR的对应关系(类似表2)，并将该对应关系信息同步给副NVR。副NVR在本地保存主NVR同步的该对应关系。当发现主NVR故障后，副NVR生效前述业务IP地址。当主NVR和副NVR在同一子网时，发送针对该业务IP地址的免费ARP报文。该免费ARP报文的发送方IP地址为该业务IP地址，发送方MAC地址为副NVR的MAC地址，这样目的地址为该业务IP的报文就发送到了副NVR上。当主NVR和副NVR不在同一子网时，可以依靠副NVR的网关设备发布路由，从而将目的地址为该业务IP的报文路由到该副NVR上。具体实现可以参照申请号为201210098041. X的本申请人之前的专利申请。该副NVR接替主NVR在收到目的地址为前述业务IP地址的监控业务请求报文后，根据本地保存的前端监控设备和各NVR的对应关系进行相应的处理。</p>
    <p>[0033]	进一步地，主NVR还将注册到自身的前端监控设备的状态信息同步到副NVR。&#30032;IjNVR在本地保存该等状态信息以使得自身在接替主NVR后，原本注册到主NVR上的监控设备能无感知的和自身进行通信。比如说，前端监控设备和NVR之间一般都要进行保活通信，为了在主NVR故障后，注册到该主NVR上的前端监控设备和接替主NVR的副NVR之间能继续进行保活通信，主NVR需要在自己尚未故障时将注册到自身的前端监控设备的状态信息同步给副NVR，这样当副NVR接替主NVR收到保活报文后就能顺利的进行处理。至于注册到主NVR上的前端监控设备发送的保活报文如何被发送到副NVR上，在主NVR和副NVR位于同一子网和不同子网时处理方式不同。在主NVR和副NVR位于同一子网时，只需要副NVR发送免费ARP报文到网络中，该免费ARP报文的发送方IP地址为主NVR提供给前端监控设备进行注册的IP地址，发送方MAC地址为副NVR的MAC地址（主NVR提供给前端监控设备进行 注册的IP地址可以和提供给用户进行监控网络访问的IP地址一致，也可以不一致)。通过这种方式，提供给前端监控设备进行注册的IP地址就从主NVR漂移到了副NVR，网络中的交换机自然就把前端监控设备原本发送给主NVR的保活报文转发到了接替主NVR的副NVR。</p>
    <p>[0034]	在主NVR和副NVR位于不同的子网时，处理相对比较复杂。如果主NVR故障后，主NVR的网关启用ARP代理，在主NVR上进行注册的前端监控设备发送的保活报文被转发到主NVR的网关，主NVR的网关将其发送到副NVR的网关，进而被转发到副NVR。参见图2举例进行说明。主NVR的IP地址为200. 10. I. 1，前端监控设备IPC20发送目的地址为200. 10. I. I的保活报文。副NVR上配置有200. 10. I. 1，副NVR探测到主NVR故障时，生效该200. 10. I. 1，发送针对该地址的免费ARP报文。副NVR的网关设备22在接口 220上ping地址200. 10. I. 1，如果能ping通，则将200. 10. I. I引入到动态路由中发布出去。主NVR的网关设备21探测主NVR是否发生故障，当主NVR发生故障时，启动ARP代理，在子网I中发送免费ARP报文，发送方IP地址为200. 10. I. I，发送方MAC地址为网关设备21的MAC地址。前端监控设备发送的目的地址为200. 10. I. I的报文将被转发到网关设备21，网关设备21根据之前网络设备22发布的路由转发该报文，最终该报文被转发到网关设备22。网关设备22将该报文转发到副NVR。</p>
    <p>[0035]	以上描述了副NVR对主NVR进行备份的过程。在一个NVR的堆叠的系统中，如果出现任何一个NVR故障，系统外的设备对此没有感知，该堆叠最有效。因此，本发明实施例在设计的时候，由主NVR也对副NVR进行备份。与副NVR对主NVR备份的不同之处在于，如果副NVR出现故障的话，主NVR只需接管原本注册到副NVR上的那些前端监控设备即可。另夕卜，对于普通NVR而言，两两备份是一种比较有效的方法，具体备份的过程类似主NVR对副NVR的备份。</p>
    <p>[0036]	基于同样的发明构思，本发明还提供一种应用于NVR的堆叠装置。该堆叠装置的硬件架构可以表示为图3所示的硬件架构，包括一处理器和一存储器。该存储器中存储有进行NVR堆叠的软件代码。</p>
    <p>[0037]	具体地，该堆叠装置包括身份确定模块、第一处理模块、第二处理模块和第三处理模块。该身份确定模块，用于确定自身身份，该身份包括主NVR身份、副NVR身份或者普通NVR身份；该第一处理模块，用于在该NVR被选为主NVR时，接收副NVR发送的前端监控设备的信息以及接收普通NVR发送的前端监控设备的信息；在本地建立前端监控设备和NVR的对应关系信息，并将该对应关系信息同步给副NVR ;接收监控业务请求，判断该监控业务请求的监控资源是否属于自身管理，如果属于自身管理，则直接进行处理，如果属于副NVR管理，则将该请求发送给副NVR处理，如果属于普通NVR管理，则将该请求发送给普通NVR处理；该第二处理模块，用于在该NVR被选为副NVR时，将注册到副NVR的前端监控设备信息发送给主NVR ;接收主NVR同步的前端监控设备和NVR对应关系信息；监视主NVR是否发生故障，如果是，则接替主NVR管理注册到主NVR上的前端监控设备，并且接替主NVR接收监控业务请求并进行相应处理；该第三处理模块，用于在该NVR被选为普通NVR，将注册到该普通NVR上的前端监控设备信息发送给主NVR。</p>
    <p>[0038]	该监控业务请求的目的IP地址为预先配置的IP地址，该第一处理模块在NVR被选为主NVR时，将该IP地址作为业务IP地址在主NVR上生效。 [0039]	该第二处理模块，还用于在该NVR被选为副NVR时，如果发现主NVR故障时，所述预先配置的IP地址作为业务IP地址在该NVR上生效，该NVR发送免费ARP报文，该免费ARP报文的发送方IP地址为所述配置的IP地址，发送方MAC地址为该NVR的MAC地址。</p>
    <p>[0040]	该第一处理模块，还用于在该NVR被选为主NVR，将注册到主NVR上的前端监控设备的状态信息同步给副NVR，使得副NVR能根据该状态信息在主NVR故障时接管所述前端监控设备。</p>
    <p>[0041]	该第一处理模块，还用于在该NVR被选为主NVR时，监视副NVR是否发生故障，如果副NVR发生故障，接替副NVR管理注册到副NVR上的前端监控设备。</p>
    <p>[0042]	以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明保护的范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1512376A?cl=zh">CN1512376A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2002年12月31日</td><td class="patent-data-table-td patent-date-value">2004年7月14日</td><td class="patent-data-table-td ">联想(北京)有限公司</td><td class="patent-data-table-td ">大型机群系统的集中控制方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1719831A?cl=zh">CN1719831A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2005年7月15日</td><td class="patent-data-table-td patent-date-value">2006年1月11日</td><td class="patent-data-table-td ">清华大学</td><td class="patent-data-table-td ">基于集群路由器结构的高可用分布式边界网关协议系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101616311A?cl=zh">CN101616311A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年7月31日</td><td class="patent-data-table-td patent-date-value">2009年12月30日</td><td class="patent-data-table-td ">杭州华三通信技术有限公司</td><td class="patent-data-table-td ">一种视频监控方法和视频监控服务器</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101877783A?cl=zh">CN101877783A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年11月6日</td><td class="patent-data-table-td patent-date-value">2010年11月3日</td><td class="patent-data-table-td ">北京邦诺存储科技有限公司</td><td class="patent-data-table-td ">网络视频存储器集群化视频监控系统和方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102227131A?cl=zh">CN102227131A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年5月12日</td><td class="patent-data-table-td patent-date-value">2011年10月26日</td><td class="patent-data-table-td ">杭州海康威视数字技术股份有限公司</td><td class="patent-data-table-td ">网络视频录像机的热备份系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102724224A?cl=zh">CN102724224A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年3月30日</td><td class="patent-data-table-td patent-date-value">2012年10月10日</td><td class="patent-data-table-td ">上海炎翔通信科技有限公司</td><td class="patent-data-table-td ">全球眼网络视频监控系统及其实现方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=OB28BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029060000">H04L29/06</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=OB28BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012240000">H04L12/24</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=OB28BwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029120000">H04L29/12</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2013年1月30日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年4月3日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/9c79aa0402497947a81b/CN102904761A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8Dnvr%E5%A0%86%E5%8F%A0%E7%9A%84%E6%96%B9%E6%B3%95%E5%92%8Cnvr.pdf?id=OB28BwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0KPqfQb0e4Eib4Yjnk6MCjn7oimA"},"sample_url":"https://www.google.com/patents/reader?id=OB28BwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>