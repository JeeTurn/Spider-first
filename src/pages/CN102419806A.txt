<!DOCTYPE html><html><head><title>专利 CN102419806A - 一种虚拟机批量离线杀毒方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种虚拟机批量离线杀毒方法"><meta name="DC.contributor" content="刘畅" scheme="inventor"><meta name="DC.contributor" content="崔竞松" scheme="inventor"><meta name="DC.contributor" content="李丽" scheme="inventor"><meta name="DC.contributor" content="李华" scheme="inventor"><meta name="DC.contributor" content="贺汇林" scheme="inventor"><meta name="DC.contributor" content="郭迟" scheme="inventor"><meta name="DC.contributor" content="北京海云捷迅科技有限公司" scheme="assignee"><meta name="DC.contributor" content="武汉大学" scheme="assignee"><meta name="DC.date" content="2011-12-15" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供一种虚拟机批量离线杀毒方法，在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒；所述虚拟化环境，是一台安装了linux操作系统的刀片服务器，该刀片服务器安装了多台虚拟机；进行扫描杀毒包括利用linux操作系统的fdisk系统命令，查看虚拟机的磁盘分区情况；利用挂载工具挂载多台虚拟机的磁盘到本地磁盘上；安装提供命令行杀毒的杀毒软件；利用杀毒软件的命令行杀毒对虚拟机磁盘进行扫描查杀病毒。"><meta name="DC.date" content="2012-4-18"><meta name="DC.relation" content="CN:101276387:A" scheme="references"><meta name="DC.relation" content="US:8069372" scheme="references"><meta name="citation_reference" content="向永谦等: &quot;《基于vSphere的安全管理套件》&quot;, 《全国计算机安全学术交流会论文集》, 17 September 2010 (2010-09-17), pages 82 - 87"><meta name="citation_reference" content="武延军等: &quot;《一个基于应用程序监控的病毒防范框架》&quot;, 《计算机工程》, vol. 32, no. 12, 30 June 2006 (2006-06-30), pages 152 - 153"><meta name="citation_patent_publication_number" content="CN:102419806:A"><meta name="citation_patent_application_number" content="CN:201110420316"><link rel="canonical" href="https://www.google.com/patents/CN102419806A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102419806A?cl=zh"/><meta name="title" content="专利 CN102419806A - 一种虚拟机批量离线杀毒方法"/><meta name="description" content="本发明提供一种虚拟机批量离线杀毒方法，在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒；所述虚拟化环境，是一台安装了linux操作系统的刀片服务器，该刀片服务器安装了多台虚拟机；进行扫描杀毒包括利用linux操作系统的fdisk系统命令，查看虚拟机的磁盘分区情况；利用挂载工具挂载多台虚拟机的磁盘到本地磁盘上；安装提供命令行杀毒的杀毒软件；利用杀毒软件的命令行杀毒对虚拟机磁盘进行扫描查杀病毒。"/><meta property="og:title" content="专利 CN102419806A - 一种虚拟机批量离线杀毒方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102419806A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102419806A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=DShuBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102419806A&amp;usg=AFQjCNHN703_nD8JJch4mZLBo4dBORcv3Q" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/26d50376b9975a2973c5/CN102419806A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/26d50376b9975a2973c5/CN102419806A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102419806A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102419806A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102419806A?cl=zh" style="display:none"><span itemprop="description">本发明提供一种虚拟机批量离线杀毒方法，在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒；所述虚拟化环境，是一台安装了linux操作系统的刀片服务器，该刀片服务器安装了多台虚拟机；进行扫描 ...</span><span itemprop="url">https://www.google.com/patents/CN102419806A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102419806A - 一种虚拟机批量离线杀毒方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102419806A - 一种虚拟机批量离线杀毒方法" title="专利 CN102419806A - 一种虚拟机批量离线杀毒方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102419806 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201110420316</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2012年4月18日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年12月15日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年12月15日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201110420316.2, </span><span class="patent-bibdata-value">CN 102419806 A, </span><span class="patent-bibdata-value">CN 102419806A, </span><span class="patent-bibdata-value">CN 201110420316, </span><span class="patent-bibdata-value">CN-A-102419806, </span><span class="patent-bibdata-value">CN102419806 A, </span><span class="patent-bibdata-value">CN102419806A, </span><span class="patent-bibdata-value">CN201110420316, </span><span class="patent-bibdata-value">CN201110420316.2</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%88%98%E7%95%85%22">刘畅</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B4%94%E7%AB%9E%E6%9D%BE%22">崔竞松</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E4%B8%BD%22">李丽</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E5%8D%8E%22">李华</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%B4%BA%E6%B1%87%E6%9E%97%22">贺汇林</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%83%AD%E8%BF%9F%22">郭迟</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8C%97%E4%BA%AC%E6%B5%B7%E4%BA%91%E6%8D%B7%E8%BF%85%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">北京海云捷迅科技有限公司</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%AD%A6%E6%B1%89%E5%A4%A7%E5%AD%A6%22">武汉大学</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102419806A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102419806A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102419806A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#npl-citations">非专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (1),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=DShuBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201110420316&amp;usg=AFQjCNF-7Ylfs_laEtL11Oh-daa5ovCyAw"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=DShuBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102419806A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEay5ET0aH0mvySbl2jX7ydu5gFhg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT112146202" lang="ZH" load-source="patent-office">一种虚拟机批量离线杀毒方法</invention-title>
      </span><br><span class="patent-number">CN 102419806 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA95615072" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供一种虚拟机批量离线杀毒方法，在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒；所述虚拟化环境，是一台安装了linux操作系统的刀片服务器，该刀片服务器安装了多台虚拟机；进行扫描杀毒包括利用linux操作系统的fdisk系统命令，查看虚拟机的磁盘分区情况；利用挂载工具挂载多台虚拟机的磁盘到本地磁盘上；安装提供命令行杀毒的杀毒软件；利用杀毒软件的命令行杀毒对虚拟机磁盘进行扫描查杀病毒。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(4)</span></span></div><div class="patent-text"><div mxw-id="PCLM40938787" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种虚拟机批量离线杀毒方法，其特征在于：在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒；所述虚拟化环境，是一台安装了 Iinux操作系统的刀片服务器，该刀片服务器安装了多台虚拟机；进行扫描杀毒包括以下步骤，步骤1，利用Iinux操作系统的fdisk系统命令，查看虚拟机的磁盘分区情况；步骤2，利用挂载工具挂载多台虚拟机的磁盘到本地磁盘上；步骤3，安装提供命令行杀毒的杀毒软件；步骤4，利用杀毒软件的命令行杀毒对虚拟机的磁盘进行扫描查杀病毒。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述虚拟机批量离线杀毒方法，其特征在于：步骤2中，所述挂载工具为mount命令。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求1或2所述虚拟机批量离线杀毒方法，其特征在于：步骤3中，安装提供命令行杀毒的杀毒软件时，在环境变量中将杀毒命令行工具设置成全局变量。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求3所述虚拟机批量离线杀毒方法，其特征在于：步骤4中，利用杀毒软件的命令行杀毒对虚拟机的磁盘进行扫描查杀病毒的具体方式为，调用系统函数system 函数，利用杀毒软件提供的命令行，对于由命令行参数中指定的目录进行扫描、暂停扫描、 终止扫描和病毒库更新操作。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES46401181" lang="ZH" load-source="patent-office" class="description">
    <p>一种虚拟机批量离线杀毒方法</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及计算机技术领域，尤其是涉及一种在虚拟机不开机的情况下对虚拟机进行的批量离线杀毒方法。</p>
    <p>背景技术</p>
    <p>[0002]	越来越多的大型企业或者实验室趋向于使用虚拟化架构来节约起服务器成本或提高应用灵活性。虚拟化的实质就是利用众多的虚拟机来代替原来的物理机进行各项工作，图2表明了虚拟化的基本结构，其中最下面一层x86 Architecture (x86结构）为物理机的硬件设备，包括重要处理器（CPU)、内存（Memory)、网络适配器（NIC)、硬盘（Disk)等设备，第二层为虚拟化层（Virtualization Layer)，负责对物理机上的物理设备进行虚拟化， 以便各虚拟机进行使用，各虚拟机中包括操作系统（Operating System)和应用程序（App)， 同时专门有一台虚拟机作为服务控制台（Service Console)。而传统计算机的使用，每个用户都有自己的一套硬件设备，包括显示器，内存，硬盘，CPU，网卡等设备，在虚拟化平台下， 每个用户不需要有整套设备，只需一个终端显示设备。虚拟机运行在虚拟机服务器上，由服务器分发给要使用虚拟机的用户。虚拟化在各种应用中，包括有服务器虚拟化、桌面的桌面虚拟化，以及当下最流行的云计算等各种应用中担当着举足轻重的地位。面对这些应用，数据中心少则部署几台虚拟机，多则几十上百台。</p>
    <p>[0003]	在传统计算机杀毒工作方式中，需要每个用户在每个虚拟机里安装杀毒软件， 单独对各个虚拟机进行病毒查杀，如图3所示，在图3所示的虚拟化基本结构下，需要在每个虚拟机（VM)安装安全杀毒软件（Antivirus)，然后由虚拟机的操作系统（Operating System)调用杀毒软件。这样分散扫描磁盘不仅耽误用户的时间影响用户的工作而且也浪费了的计算资源。怎样对数量如此庞大的虚拟机群进行安全有效的管理而减少虚拟机用户自行单独分散的对虚拟机进行管理是数据中心管理人员不可忽视的问题。虽然一些从事虚拟化的公司如VMware，Critrix, Microsoft等针对与自己的虚拟化服务器都开发了一套对服务器上虚拟机的管理套件，分别为vSphere Client, Xen center，SVMM2008。这些套件主要强调对单个虚拟机的管理，如开机，关机，对虚拟机进行快照和恢复快照，制作模板等， 没有提供对虚拟机磁盘的杀毒管理，更不用说批量杀毒了。</p>
    <p>发明内容</p>
    <p>[0004]	针对以上虚拟机管理软件在虚拟机病毒查杀和批量查杀在管理上的弱势，本发明提供一种虚拟机批量离线杀毒方法。</p>
    <p>[0005]	本发明的技术方案为一种虚拟机批量离线杀毒方法，在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒；所述虚拟化环境，是一台安装了 Iinux 操作系统的刀片服务器，该刀片服务器安装了多台虚拟机；进行扫描杀毒包括以下步骤，</p>
    <p>步骤1，利用Iinux操作系统的fdisk系统命令，查看虚拟机的磁盘分区情况； 步骤2，利用挂载工具挂载多台虚拟机的磁盘到本地磁盘上；步骤3，安装提供命令行杀毒的杀毒软件；</p>
    <p>步骤4，利用杀毒软件的命令行杀毒对虚拟机的磁盘进行扫描查杀病毒。</p>
    <p>[0006]	而且，步骤2中，所述挂载工具为mount命令。</p>
    <p>[0007]	而且，步骤3中，安装提供命令行杀毒的杀毒软件时，在环境变量中将杀毒命令行工具设置成全局变量。</p>
    <p>[0008]	而且，步骤4中，利用杀毒软件的命令行杀毒对虚拟机的磁盘进行扫描查杀病毒的具体方式为，调用系统函数system函数，利用杀毒软件提供的命令行，对于由命令行参数中指定的目录进行扫描、暂停扫描、终止扫描和病毒库更新操作。</p>
    <p>[0009]	本发明挂载虚拟机磁盘到本地后，对挂载的磁盘进行扫描杀毒，在基于kvm的虚拟化平台实现了对虚拟机的离线杀毒，即能实现在用户不使用虚拟机的时候批量对虚拟磁盘的查杀功能。</p>
    <p>附图说明</p>
    <p>[0010]	图1为本发明实施例的流程图。</p>
    <p>[0011]	图2为用户在传统模式下进行虚拟机的杀毒维护示意图。</p>
    <p>[0012]	图3为虚拟化的基本机构框架图。</p>
    <p>[0013]	具体实施方式</p>
    <p>实施例在虚拟化环境中的虚拟机处于关机状态时，对多台虚拟机的磁盘进行扫描杀毒。虚拟化环境包括在一台具备支持虚拟化CPU的裸机上安装了 Iinux操作系统的刀片服务器，利用kvm (Kernel-based Virtual Machine，基于内核的虚拟机)实现虚拟化，并且在该虚拟上安装数台虚拟机。虚拟化环境中的虚拟机处于关机状态，即虚拟机不占用服务器上物理的CPU，网卡，内存资源，仅仅在物理硬盘上保存着该虚拟机的配置和磁盘数据。</p>
    <p>[0014]	具体实施时，本领域技术人员可采用计算机软件技术实现本发明技术方案流程。 本发明实施例提供的虚拟机批量离线杀毒方法包括以下步骤，流程图参见图1 ：</p>
    <p>步骤1，利用Iinux操作系统的fdisk系统命令，查看虚拟机的磁盘分区情况。</p>
    <p>[0015]	具体实施时，可以在用户使用的本机安装Iinux操作系统，远程登录到刀片服务器，利用操作系统提供的系统命令fdisk (分区命令）查看虚拟机的磁盘镜像的分区情况， 并注意磁盘文件的格式（比如fat32格式，ntfs格式，ext3格式)，不同的磁盘分区格式对应不同的挂载参数。</p>
    <p>[0016]	步骤2，利用挂载工具挂载多台虚拟机的磁盘到本地磁盘上。</p>
    <p>[0017]	实施例利用系统命令mount (挂接命令）依次把由路径和磁盘名指定的虚拟机磁盘挂载到本地未被使用的/dev/loop设备下。在Iinux操作系统下，任何设备与接口设备都是以文件的方式放在/dev目录下。loop设备是Iinux操作系统下的特别设备文件，用来把文件模拟成设备，然后就可以像实际设备那样进行相关的操作。</p>
    <p>[0018]	步骤3，安装提供命令行杀毒的杀毒软件。</p>
    <p>[0019]	实施例安装现有的卡巴斯基网络安全版6. 0，安装配置好杀毒软件命令行杀毒的环境：在环境变量中将杀毒命令行工具设置成全局变量，即在环境变量里设置卡巴斯基的路径。卡巴斯基提供命令行杀毒，在步骤3中设置环境变量以后，就可以在命令行下开启卡巴斯基，在命令行下用卡巴斯基的命令行杀毒了。具体实施时，也可以采用其他现有杀毒软件。</p>
    <p>[0020]	步骤4，利用杀毒软件的命令行杀毒对虚拟机的磁盘进行扫描查杀病毒。</p>
    <p>[0021]	利用杀毒软件的命令行杀毒对虚拟机的磁盘进行扫描查杀病毒的具体方式为，调用系统函数system函数，利用杀毒软件提供的命令行，对于由命令行参数中指定的虚拟机磁盘目录进行扫描、暂停扫描、终止扫描和病毒库更新操作。为便于实施参考起见，提供卡</p>
    <p>巴斯基网络安全版6.			0的命令行操作如下avp.	com	update	对卡巴斯基病毒库进行更新；avp.	com	start	启动组件或者任务；avp.	com	pause	暂停组件或任务；avp.	com	resume	恢复组件和任务；avp.	com	stop	停止组件或任务；avp.	com	status	在屏幕上显示当前组件或任务的状态；avp.	com	statistics在屏幕上显示当前组件或任务的统计	avp.	com	help	语法帮助和命令集；avp.	com	scan	扫描病毒对象；avp.	com	update	开始更新；avp.	com	exit	关闭程序；avp.	com	import	导入卡巴斯基互联安全套装设置；avp.	com	export	导出卡巴斯基互联网安全套装设置。</p>
    <p>[0022]	运用以上卡巴斯基命令，可对虚拟磁盘中指定路径进行扫描查杀。</p>
    <p>[0023]	本文中所描述的具体实例仅仅是对本发明精神作举例说明。本发明所属技术领域的技术人员可以对所描述的具体实例做各种各样的修改或补充或采用类似的方式替代，但并不会偏离本发明的精神或者超越所附权利要求书所定义的范围。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101276387A?cl=zh">CN101276387A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年5月15日</td><td class="patent-data-table-td patent-date-value">2008年10月1日</td><td class="patent-data-table-td ">魁 金</td><td class="patent-data-table-td ">基于预定义健康运行环境的网络计算机防病毒系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US8069372">US8069372</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value"></td><td class="patent-data-table-td patent-date-value">2011年11月29日</td><td class="patent-data-table-td ">Norman Asa</td><td class="patent-data-table-td ">Simulated computer system for monitoring of software performance</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="npl-citations"></a><div class="patent-section-header"><span class="patent-section-title">非专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th colspan="3"class="patent-data-table-th">参考文献</th></tr></thead><tr><td class="patent-data-table-td ">1</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">向永谦等: "<a href='http://scholar.google.com/scholar?q="%E3%80%8A%E5%9F%BA%E4%BA%8EvSphere%E7%9A%84%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E5%A5%97%E4%BB%B6%E3%80%8B"'>《基于vSphere的安全管理套件》</a>", 《全国计算机安全学术交流会论文集》, 17 September 2010 (2010-09-17), pages 82 - 87</td></tr><tr><td class="patent-data-table-td ">2</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">武延军等: "<a href='http://scholar.google.com/scholar?q="%E3%80%8A%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8E%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9B%91%E6%8E%A7%E7%9A%84%E7%97%85%E6%AF%92%E9%98%B2%E8%8C%83%E6%A1%86%E6%9E%B6%E3%80%8B"'>《一个基于应用程序监控的病毒防范框架》</a>", 《计算机工程》, vol. 32, no. 12, 30 June 2006 (2006-06-30), pages 152 - 153</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN104408369A?cl=zh">CN104408369A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2014年10月24日</td><td class="patent-data-table-td patent-date-value">2015年3月11日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">扫描方法和装置</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=DShuBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0021560000">G06F21/56</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2012年4月18日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2012年5月30日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年11月19日</td><td class="patent-data-table-td ">C02</td><td class="patent-data-table-td ">Deemed withdrawal of patent application after publication (patent law 2001)</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/26d50376b9975a2973c5/CN102419806A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%89%B9%E9%87%8F%E7%A6%BB%E7%BA%BF%E6%9D%80%E6%AF%92%E6%96%B9%E6%B3%95.pdf?id=DShuBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0AATqQime15rmowG38OklMlFay0w"},"sample_url":"https://www.google.com/patents/reader?id=DShuBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>