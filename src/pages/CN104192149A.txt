<!DOCTYPE html><html><head><title>专利 CN104192149A - 车辆运行过程的控制方法和装置 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="车辆运行过程的控制方法和装置"><meta name="DC.contributor" content="吕宪勇" scheme="inventor"><meta name="DC.contributor" content="李欣欣" scheme="inventor"><meta name="DC.contributor" content="王丽伟" scheme="inventor"><meta name="DC.contributor" content="袁文文" scheme="inventor"><meta name="DC.contributor" content="赵西伟" scheme="inventor"><meta name="DC.contributor" content="李金虎" scheme="inventor"><meta name="DC.contributor" content="潍柴动力股份有限公司" scheme="assignee"><meta name="DC.date" content="2014-8-14" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供了一种车辆运行过程的控制方法和装置，其中，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制方法包括：确定车辆的当前运行阶段；根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。本发明提供的车辆运行过程的控制方法避免了无效指令的发出，能够保证控制指令的有效性和合理性。由于发出的控制指令均为有效、合理指令，所以也能够提高车辆的行驶安全性。"><meta name="DC.date" content="2014-12-10"><meta name="DC.relation" content="CN:101417653:A" scheme="references"><meta name="DC.relation" content="CN:101618720:A" scheme="references"><meta name="DC.relation" content="CN:102009651:A" scheme="references"><meta name="DC.relation" content="JP:2007062638" scheme="references"><meta name="DC.relation" content="US:20070202991:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:104192149:A"><meta name="citation_patent_application_number" content="CN:201410401828"><link rel="canonical" href="https://www.google.com/patents/CN104192149A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN104192149A?cl=zh"/><meta name="title" content="专利 CN104192149A - 车辆运行过程的控制方法和装置"/><meta name="description" content="本发明提供了一种车辆运行过程的控制方法和装置，其中，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制方法包括：确定车辆的当前运行阶段；根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。本发明提供的车辆运行过程的控制方法避免了无效指令的发出，能够保证控制指令的有效性和合理性。由于发出的控制指令均为有效、合理指令，所以也能够提高车辆的行驶安全性。"/><meta property="og:title" content="专利 CN104192149A - 车辆运行过程的控制方法和装置"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN104192149A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN104192149A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN104192149A&amp;usg=AFQjCNGVcbtzz03_v6iVtgDWurMhmuPGbw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/efcb11988b0f9be9b77f/CN104192149A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/efcb11988b0f9be9b77f/CN104192149A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN104192149A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN104192149A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN104192149A?cl=zh" style="display:none"><span itemprop="description">本发明提供了一种车辆运行过程的控制方法和装置，其中，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制方法包括：确定车辆的当前运...</span><span itemprop="url">https://www.google.com/patents/CN104192149A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN104192149A - 车辆运行过程的控制方法和装置</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN104192149A - 车辆运行过程的控制方法和装置" title="专利 CN104192149A - 车辆运行过程的控制方法和装置"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN104192149 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201410401828</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2014年12月10日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2014年8月14日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2014年8月14日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201410401828.8, </span><span class="patent-bibdata-value">CN 104192149 A, </span><span class="patent-bibdata-value">CN 104192149A, </span><span class="patent-bibdata-value">CN 201410401828, </span><span class="patent-bibdata-value">CN-A-104192149, </span><span class="patent-bibdata-value">CN104192149 A, </span><span class="patent-bibdata-value">CN104192149A, </span><span class="patent-bibdata-value">CN201410401828, </span><span class="patent-bibdata-value">CN201410401828.8</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%90%95%E5%AE%AA%E5%8B%87%22">吕宪勇</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E6%AC%A3%E6%AC%A3%22">李欣欣</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%8E%8B%E4%B8%BD%E4%BC%9F%22">王丽伟</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%A2%81%E6%96%87%E6%96%87%22">袁文文</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%B5%B5%E8%A5%BF%E4%BC%9F%22">赵西伟</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E9%87%91%E8%99%8E%22">李金虎</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%BD%8D%E6%9F%B4%E5%8A%A8%E5%8A%9B%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">潍柴动力股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN104192149A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN104192149A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN104192149A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (5),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (4),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201410401828&amp;usg=AFQjCNE5z1YVBNJH48JyDS8OxXOOpEwdJQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D104192149A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGAkH82cJljUIoaVMXLMc06Z2-QAA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT151444289" lang="ZH" load-source="patent-office">车辆运行过程的控制方法和装置</invention-title>
      </span><br><span class="patent-number">CN 104192149 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA147988028" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供了一种车辆运行过程的控制方法和装置，其中，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制方法包括：确定车辆的当前运行阶段；根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。本发明提供的车辆运行过程的控制方法避免了无效指令的发出，能够保证控制指令的有效性和合理性。由于发出的控制指令均为有效、合理指令，所以也能够提高车辆的行驶安全性。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(18)</span></span></div><div class="patent-text"><div mxw-id="PCLM78415716" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种车辆运行过程的控制方法，其特征在于，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制方法包括:  确定车辆的当前运行阶段；  根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的控制方法，其特征在于，所述一个运行循环过程包括唤醒阶段、等待阶段、就绪阶段、启动阶段、运行阶段和停机阶段；  所述唤醒阶段是指钥匙从位置“OFF”拨到“ON”位置，车辆整车控制器刚上低压电的阶段；  所述等待阶段是指钥匙处于“ON”位置，检测车辆是否存在故障的阶段；  所述就绪阶段是指钥匙处于“ON”位置，车辆无故障，等待接收下发的控制指令的阶段；  所述启动阶段是指钥匙处于“STRAT”位置，发送启动指令，控制车辆执行上高压或启动动力输出装置的动作的阶段；  所述运行阶段是指钥匙处于“ON”位置，车辆启动成功后的阶段；  所述停机阶段是指钥匙从“ON”拨到“OFF”位置，高压电系统下电的阶段。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的控制方法，其特征在于，若当前运行阶段为唤醒阶段，所述控制方法具体为:  判断钥匙是否处于“ON”位置，如果是，控制车辆切换至等待阶段。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求2所述的控制方法，其特征在于，若当前运行阶段为等待阶段，所述控制方法具体为:  检测车辆是否存在故障，如果否，控制车辆切换至就绪阶段，如果是，发出报警信号。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求4所述的控制方法，其特征在于，所述检测车辆是否存在故障，如果否，控制车辆切换至就绪阶段，如果是，发出报警信号，具体包括:  判断车辆的各个子控制器的自检结果是否正常，判断故障处理模块是否允许启动；如果自检结果正常并且故障处理模块允许启动，执行所述控制车辆切换至就绪阶段的步骤，如果自检结果异常和/或故障处理模块不允许启动，执行所述发出报警信号的步骤。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求2所述的控制方法，其特征在于，若当前运行阶段为启动阶段，所述控制方法具体为:  判断启动失败次数是否小于预设值，如果是，判断钥匙是否处于“START”位置，如果是，判断当前档位是否为空档，如果是，发出启动指令以控制动力源启动；  判断在第一预设时间段内动力源是否启动成功，如果是，控制车辆进入运行阶段，如果否，控制车辆返回等待阶段，并控制车辆启动失败次数加I。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求6所述的控制方法，其特征在于，所述判断启动失败次数是否小于预设值，还包括:如果否，发出报警提示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求6或7所述的控制方法，其特征在于，所述判断当前档位是否为空档，还包括:如果否，判断在第二预设时间段内钥匙是否一直处于“START”位置，如果是，发出启动指令以控制动力源启动。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求6所述的控制方法，其特征在于，当车辆为混合动力车辆时，所述判断在第一预设时间段内动力源是否启动成功，具体包括:  判断在第一预设时间段内高压电上电是否成功，或，判断在第一预设时间段内发动机是否启动成功。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求2所述的控制方法，其特征在于，若当前运行阶段为等待阶段、就绪阶段、启动阶段或运行阶段，在所述确定车辆的当前运行阶段之后，还包括:  判断是否存在停机指令，如果是，控制车辆切换至停机阶段。</div>
    </div>
    </div> <div class="claim"> <div num="11" class="claim">
      <div class="claim-text">11.一种车辆运行过程的控制装置，其特征在于，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制装置包括:  确定单元，用于确定车辆的当前运行阶段；  控制单元，用于根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求11所述的控制装置，其特征在于，所述一个运行循环过程包括唤醒阶段、等待阶段、就绪阶段、启动阶段、运行阶段和停机阶段；  所述唤醒阶段是指钥匙从位置“OFF”拨到“ON”位置，车辆整车控制器刚上低压电的阶段；  所述等待阶段是指钥匙处于“ON”位置，检测车辆是否存在故障的阶段；  所述就绪阶段是指钥匙处于“ON”位置，车辆无故障，等待接收下发的控制指令的阶段；  所述启动阶段是指钥匙处于“ STRAT ”位置，发送启动指令，控制车辆执行上高压或启动动力输出装置的动作的阶段；  所述运行阶段是指钥匙处于“ON”位置，车辆启动成功后的阶段；  所述停机阶段是指钥匙从“ON”拨到“OFF”位置，高压电系统下电的阶段。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求12所述的控制装置，其特征在于，所述确定单元确定的当前运行阶段为等待阶段；所述控制单元具体包括:  检测子单元，用于检测车辆是否存在故障；  车辆运行阶段切换子单元，用于当车辆不存在故障时，控制车辆切换至就绪阶段；  报警子单元，用于当车辆存在故障时，发出报警信号。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求12所述的控制装置，其特征在于，所述确定单元确定的当前运行阶段为启动阶段，所述控制单元具体包括:  第一判断子单元，用于判断启动失败次数是否小于预设值；  第二判断子单元，用于当启动失败次数小于预设值时，判断钥匙是否处于“START”位置；  第三判断子单元，用于当钥匙处于“START”位置时，判断当前档位是否为空档；  发送子单元，用于若当前档位为空档时，发出启动指令以控制动力源启动；  第四判断子单元，用于判断在第一预设时间段内动力源是否启动成功；  车辆运行阶段切换子单元，用于当在第一预设时间段内动力源启动成功后，控制车辆进入运行阶段；  控制子单元，用于当在第一预设时间段内动力源未启动成功后，控制车辆返回等待阶段，并控制车辆启动失败次数加I。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.根据权利要求14所述的控制装置，其特征在于，所述控制单元还包括:  报警单元，用于当启动失败次数不小于预设值时，发出报警提示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16.根据权利要求14或15所述的控制装置，其特征在于，所述控制单元还包括:  第五判断子单元，用于若当前档位不为空档时，判断在第二预设时间段内钥匙是否一直处于“START”位置，如果是，发出启动指令以控制动力源启动。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17.根据权利要求14或15所述的控制装置，其特征在于，当车辆为混合动力车辆时，所述第四判断子单元包括用于判断在第一预设时间段内高压电上电是否成功的子单元和用于判断在第一预设时间段内发动机是否启动成功的子单元。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.根据权利要求12所述的控制装置，其特征在于，还包括:  判断单元，用于在确定车辆的当前运行阶段之后，判断是否存在停机指令，如果是，控制车辆切换至停机阶段。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES86736408" lang="ZH" load-source="patent-office" class="description">
    <invention-title lang="ZH">车辆运行过程的控制方法和装置</invention-title>
    <technical-field>
      <p>技术领域</p>
      <p>[0001]	本发明涉及车辆控制领域，尤其涉及一种车辆运行过程的控制方法和装置。</p>
    </technical-field>
    <background-art>
      <p>背景技术</p>
      <p>[0002]	通常情况下，车辆在一个运行循环过程中整车控制器会向各个子控制器(如变速箱控制器、发动机控制器、电机控制器等)发送不同的控制指令控制各个子控制器执行不同的动作或任务调度。</p>
      <p>[0003]目前大多数车辆中，车辆整车控制器大多只依据驾驶员意图(如驾驶员拨动车辆钥匙，使其处于不同的位置，如“0N”、“0FF”、“START”)向车辆的子控制器发送控制指令，而不结合车辆自身的当前运行阶段来判断车辆是否应该执行该控制指令或者是否具备执行该控制指令的条件。若车辆的当前运行阶段不允许车辆执行车辆整车控制器发送的控制指令时，就会导致依据驾驶员意图车辆整车控制发出的控制指令是无效非法指令。例如，在车辆尚未成功启动执行换档动作时，由于车辆的动力源尚未工作，必然导致换档失败，因而此时车辆整车控制器发出的换档指令为无效非法指令。当整车控制器发出控制指令的时机不合适，也有可能引发车辆安全性问题。又如，车辆在档启动，会造成车辆非驾驶员意图的前冲，容易出现安全事故。</p>
    </background-art>
    <disclosure>
      <p>发明内容</p>
      <p>[0004]	有鉴于此，本发明提供了一种车辆运行过程的控制方法和装置，以提高整车控制器发出的控制指令有效、合理，提高车辆行驶的安全性。</p>
      <p>[0005]	为了解决上述技术问题，本发明采用了如下技术方案:</p>
      <p>[0006]	一种车辆运行过程的控制方法，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制方法包括:</p>
      <p>[0007]	确定车辆的当前运行阶段；</p>
      <p>[0008]	根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。</p>
      <p>[0009]	进一步地，所述一个运行循环过程包括唤醒阶段、等待阶段、就绪阶段、启动阶段、运行阶段和停机阶段；</p>
      <p>[0010]	所述唤醒阶段是指钥匙从位置“OFF”拨到“0N”位置，车辆整车控制器刚上低压电的阶段；</p>
      <p>[0011 ] 所述等待阶段是指钥匙处于“0N”位置，检测车辆是否存在故障的阶段；</p>
      <p>[0012]	所述就绪阶段是指钥匙处于“0N”位置，车辆无故障，等待接收下发的控制指令的阶段；</p>
      <p>[0013]	所述启动阶段是指钥匙处于“STRAT”位置，发送启动指令，控制车辆执行上高压或启动动力输出装置的动作的阶段；</p>
      <p>[0014]	所述运行阶段是指钥匙处于“ON”位置，车辆启动成功后的阶段；</p>
      <p>[0015]	所述停机阶段是指钥匙从“0N”拨到“OFF”位置，高压电系统下电的阶段。</p>
      <p>[0016]	进一步地，若当前运行阶段为唤醒阶段，所述控制方法具体为:</p>
      <p>[0017]	判断钥匙是否处于“0N”位置，如果是，控制车辆切换至等待阶段。</p>
      <p>[0018]	进一步地，若当前运行阶段为等待阶段，所述控制方法具体为:</p>
      <p>[0019]	检测车辆是否存在故障，如果否，控制车辆切换至就绪阶段，如果是，发出报警信号。</p>
      <p>[0020]	进一步地，所述检测车辆是否存在故障，如果否，控制车辆切换至就绪阶段，如果是，发出报警信号，具体包括:</p>
      <p>[0021]	判断车辆的各个子控制器的自检结果是否正常，判断故障处理模块是否允许启动；如果自检结果正常并且故障处理模块允许启动，执行所述控制车辆切换至就绪阶段的步骤，如果自检结果异常和/或故障处理模块不允许启动，执行所述发出报警信号的步骤。</p>
      <p>[0022]	进一步地，若当前运行阶段为启动阶段，所述控制方法具体为:</p>
      <p>[0023]	判断启动失败次数是否小于预设值，如果是，判断钥匙是否处于“START”位置，如果是，判断当前档位是否为空档，如果是，发出启动指令以控制动力源启动；</p>
      <p>[0024]	判断在第一预设时间段内动力源是否启动成功，如果是，控制车辆进入运行阶段，如果否，控制车辆返回等待阶段，并控制车辆启动失败次数加I。</p>
      <p>[0025]	进一步地，所述判断启动失败次数是否小于预设值，还包括:如果否，发出报警提</p>
      <p>/Jn ο</p>
      <p>[0026]	进一步地，所述判断当前档位是否为空档，还包括:如果否，判断在第二预设时间段内钥匙是否一直处于“START”位置，如果是，发出启动指令以控制动力源启动。</p>
      <p>[0027]	进一步地，当车辆为混合动力车辆时，所述判断在第一预设时间段内动力源是否启动成功，具体包括:</p>
      <p>[0028]	判断在第一预设时间段内高压电上电是否成功，或，判断在第一预设时间段内发动机是否启动成功。</p>
      <p>[0029]	进一步地，若当前运行阶段为等待阶段、就绪阶段、启动阶段或运行阶段，在所述确定车辆的当前运行阶段之后，还包括:</p>
      <p>[0030]	判断是否存在停机指令，如果是，控制车辆切换至停机阶段。</p>
      <p>[0031]	一种车辆运行过程的控制装置，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预先设置有不同的任务调度，所述控制装置包括:</p>
      <p>[0032]	确定单元，用于确定车辆的当前运行阶段；</p>
      <p>[0033]	控制单元，用于根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。</p>
      <p>[0034]	进一步地，所述一个运行循环过程包括唤醒阶段、等待阶段、就绪阶段、启动阶段、运行阶段和停机阶段；</p>
      <p>[0035]	所述唤醒阶段是指钥匙从位置“OFF”拨到“0N”位置，车辆整车控制器刚上低压电的阶段；</p>
      <p>[0036]	所述等待阶段是指钥匙处于“0N”位置，检测车辆是否存在故障的阶段；</p>
      <p>[0037]	所述就绪阶段是指钥匙处于“0N”位置，车辆无故障，等待接收下发的控制指令的阶段；</p>
      <p>[0038]	所述启动阶段是指钥匙处于“STRAT”位置，发送启动指令，控制车辆执行上高压或启动动力输出装置的动作的阶段；</p>
      <p>[0039]	所述运行阶段是指钥匙处于“0N”位置，车辆启动成功后的阶段；</p>
      <p>[0040]	所述停机阶段是指钥匙从“0N”拨到“OFF”位置，高压电系统下电的阶段。</p>
      <p>[0041]	进一步地，所述确定单元确定的当前运行阶段为等待阶段；所述控制单元具体包括:</p>
      <p>[0042]	检测子单元，用于检测车辆是否存在故障；</p>
      <p>[0043]	车辆运行阶段切换子单元，用于当车辆不存在故障时，控制车辆切换至就绪阶段；</p>
      <p>[0044]	报警子单元，用于当车辆存在故障时，发出报警信号。</p>
      <p>[0045]	进一步地，所述确定单元确定的当前运行阶段为启动阶段，所述控制单元具体包括:</p>
      <p>[0046]	第一判断子单元，用于判断启动失败次数是否小于预设值；</p>
      <p>[0047]	第二判断子单元，用于当启动失败次数小于预设值时，判断钥匙是否处于“START”位置；</p>
      <p>[0048]	第三判断子单元，用于当钥匙处于“START”位置时，判断当前档位是否为空档；</p>
      <p>[0049]	发送子单元，用于若当前档位为空档时，发出启动指令以控制动力源启动；</p>
      <p>[0050]	第四判断子单元，用于判断在第一预设时间段内动力源是否启动成功；</p>
      <p>[0051]	车辆运行阶段切换子单元，用于当在第一预设时间段内动力源启动成功后，控制车辆进入运行阶段；</p>
      <p>[0052]	控制子单元，用于当在第一预设时间段内动力源未启动成功后，控制车辆返回等待阶段，并控制车辆启动失败次数加I。</p>
      <p>[0053]	进一步地,所述控制单元还包括:</p>
      <p>[0054]	报警单元，用于当启动失败次数不小于预设值时，发出报警提示。</p>
      <p>[0055]	进一步地,所述控制单元还包括:</p>
      <p>[0056]	第五判断子单元，用于若当前档位不为空档时，判断在第二预设时间段内钥匙是否一直处于“START”位置，如果是，发出启动指令以控制动力源启动。</p>
      <p>[0057]	进一步地，当车辆为混合动力车辆时，所述第四判断子单元包括用于判断在第一预设时间段内高压电上电是否成功的子单元和用于判断在第一预设时间段内发动机是否启动成功的子单元。</p>
      <p>[0058]	进一步地，还包括:判断单元，用于在确定车辆的当前运行阶段之后，判断是否存在停机指令，如果是，控制车辆切换至停机阶段。</p>
      <p>[0059]	相较于现有技术，本发明具有以下有益效果:</p>
      <p>[0060]	本发明提供的车辆运行过程的控制方法中，整车控制器能够根据车辆的当前运行阶段，向各个子控制器或零部件发起相应的控制指令，以使车辆执行当前运行阶段所对应的任务调度。由于整车控制器发起的控制指令，是根据车辆的当前运行阶段发起的，也就是说，是在车辆需要执行某一控制指令时或者车辆具备执行某一控制指令的条件时，才发出控制指令，因而，本发明提供的车辆运行过程的控制方法避免了无效指令的发出，能够保证控制指令的有效性和合理性。由于发出的控制指令均为有效、合理指令，所以也能够提高车辆的行驶安全性。</p>
    </disclosure>
    <description-of-drawings>
      <p>附图说明</p>
      <p>[0061]	为了清楚地理解本发明的技术方案，下面将对本发明实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一部分实施例附图，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。</p>
      <p>[0062]	图1时并联式混合动力系统的结构框架图；</p>
      <p>[0063]	图2是本发明实施例中的一个运行循环过程中划分的运行阶段示意图；</p>
      <p>[0064]	图3是本发明实施例提供的车辆运行过程的控制方法流程示意图；</p>
      <p>[0065]	图4是本发明实施例提供的等待阶段时的控制方法流程示意图；</p>
      <p>[0066]	图5是本发明实施例提供的就绪阶段时的控制方法流程示意图；</p>
      <p>[0067]	图6是本发明实施例提供的启动阶段时的控制方法流程示意图；</p>
      <p>[0068]	图7是本发明实施例提供的发出停机控制指令的逻辑控制示意图；</p>
      <p>[0069]	图8是本发明实施例提供的一个运行循环全过程的控制示意图；</p>
      <p>[0070]	图9是本发明实施例提供的车辆运行过程的控制装置示意图；</p>
      <p>[0071]	图10是本发明实施例提供的等待阶段时的控制单元的结构示意图；</p>
      <p>[0072]	图11是本发明实施例提供的启动阶段时的控制单元的结构示意图。</p>
    </description-of-drawings>
    <mode-for-invention>
      <p>具体实施方式</p>
      <p>[0073]	下面结合附图对本发明的车辆运行过程的控制方法的具体实施方式进行详细描述。</p>
      <p>[0074]	需要说明的是，本发明实施例所述的车辆运行过程的控制方法适用于传统车辆，也适用于并联式混合动力车辆。其中，并联式混合动力车辆无论是在结构方面还是在控制方面都较传统普通车辆复杂的多。图1为并联式混合动力系统的结构框架图。其中，HCU通过CAN总线将控制指令发送至各个子控制器，这些子控制器包括E⑶、T⑶、MCU以及BMS。</p>
      <p>[0075]	其中，并联式混合动力系统是指驱动力可以由发动机或者电机两者单独提供又可以由两者共同提供。在并联混合动力系统中，电机同时也是发电机。</p>
      <p>[0076]	HCU为车辆整车控制器的英文简写，其负责车辆档位决策、驱动模式决策等正常功能的实现。</p>
      <p>[0077]	TCU为变速箱控制器的英文简写，其负责变速箱动作的控制及实现。</p>
      <p>[0078]	ECU为发动机控制器的英文简写，其负责发动机动作的控制及实现。</p>
      <p>[0079]	MCU为电机控制器的英文简写，其负责电机动作的控制及实现。</p>
      <p>[0080]	BMS为电池管理控制器的英文简写，其负责动力电池充、放电的管理。</p>
      <p>[0081]	众所周知，车辆钥匙的不同位置对应车辆运行过程的不同阶段，例如，钥匙处于OFF位置时，车辆处于停机阶段。而且，车辆在一个运行循环过程中的不同时刻执行的动作或任务不同，所以，为了实现对车辆运行过程的更好地控制，本发明基于车辆钥匙位置以及车辆执行的任务将车辆的一个运行循环过程细分为多个运行阶段。如图2所示，将车辆从启动到停机的一个运行循环全过程细分为六个阶段:唤醒、等待、就绪、启动、运行和停机阶段。需要说明的是，车辆的一个运行循环全过程为钥匙位置依次经过OFF-ON-START-ON-OFF的过程。也就是说，车辆的一个运行循环全过程是车辆经历停机-启动-运行-停机的的过程。</p>
      <p>[0082]	所述唤醒阶段是指钥匙从位置“OFF”拨到“0N”位置，车辆整车控制器刚上低压电的阶段；</p>
      <p>[0083]	所述等待阶段是指钥匙处于“0N”位置，检测车辆是否存在故障的阶段；</p>
      <p>[0084]	所述就绪阶段是指钥匙处于“0N”位置，车辆无故障，等待接收下发的控制指令的阶段；</p>
      <p>[0085]	所述启动阶段是指钥匙处于“STRAT”位置，发送启动指令，控制车辆执行上高压或启动动力输出装置的动作的阶段；</p>
      <p>[0086]	所述运行阶段是指钥匙处于“0N”位置，车辆启动成功后的阶段；</p>
      <p>[0087]	所述停机阶段是指钥匙从“0N”拨到“OFF”位置，高压电系统下电的阶段。</p>
      <p>[0088]	基于上述划分的各个运行阶段，本发明实施例提供的车辆运行过程的控制方法流程示意图如图3所示。参见图3，本发明实施例提供的车辆运行过程的控制方法包括以下步骤:</p>
      <p>[0089]	S301、确定车辆的当前运行阶段:</p>
      <p>[0090]	根据车辆钥匙位置以及车辆中的相关组件的状态信号确定车辆的当前运行阶段。</p>
      <p>[0091]	具体地说，当钥匙位置从OFF切换到ON位置，车辆整车控制器开始上低压电，则车辆的当前运行阶段为唤醒阶段。</p>
      <p>[0092]	当钥匙处于ON位置，检测车辆是否存在故障，则车辆的当前运行阶段为等待阶段；</p>
      <p>[0093]	当钥匙处于ON位置，车辆无故障，则车辆等待接收车辆整车控制器下发控制指令，则车辆的当前运行阶段为就绪阶段。</p>
      <p>[0094]	当钥匙处于START位置，整车控制器向E⑶控制单元发送启动指令，控制车辆执行上高压或启动动力输出装置的动作，则车辆的当前运行阶段为启动阶段；</p>
      <p>[0095]	当车辆启动成功后，钥匙回拨到ON位置，则车辆的当前运行阶段为运行阶段。在该阶段内车辆能够进行行驶、换档、能量回收等一切正常操作。在运行阶段，车辆运行过程的控制装置调度能量管理、换档协调等整车控制器的主要功能模块进行工作，保证控制指令的顺利发送。</p>
      <p>[0096]	当钥匙从ON位置拨到OFF位置，或者由于车辆自身的状态等信息决定进行停机动作，高压电系统下电，则此时车辆的当前运行阶段为停机阶段。</p>
      <p>[0097]	S302、根据所述当前运行阶段，发送所述当前运行阶段对应的控制指令，以使车辆执行所述当前运行阶段对应的任务调度:</p>
      <p>[0098]	由于在每个运行阶段内设置有不同的任务调度，当确定了车辆的当前运行阶段后，根据该当前运行阶段，向相关零部件或子控制器发送当前运行阶段对应的控制指令，以使相关零部件或控制器执行当前运行阶段对应的任务调度。</p>
      <p>[0099]	由于本发明实施例提供的车辆运行过程的控制方法中，根据车辆的当前运行阶段向车辆的相关零部件或子控制器发送设置在当前运行阶段内的任务调度对应的控制指令。由于发送的任务调度的控制指令与车辆的当前运行阶段相对应，也就是说，是在车辆需要执行某一控制指令时或者车辆具备执行某一控制指令的条件时，才发出控制指令，因而，本发明提供的车辆运行过程的控制方法避免了无效指令的发出，能够保证控制指令的有效性和合理性。由于发出的控制指令均为有效、合理指令，所以也能够提高车辆的行驶安全性。</p>
      <p>[0100]	为了更清楚地理解本发明的车辆运行过程的控制方法，下面对上述划分的六个运行阶段的控制方法逐一进行介绍。</p>
      <p>[0101]	首先介绍唤醒阶段的控制方法的具体实施方式。</p>
      <p>[0102]	钥匙从OFF位置拨到ON位置，车辆整车控制器开始上低电压，此时使车辆从停机状态切换至唤醒阶段，一个运行循环过程开始。此时整车控制器HCU开始工作，该阶段为一个过渡阶段，会立即切换至等待阶段。在唤醒阶段，车辆没有具体的控制指令执行。在唤醒阶段，判断钥匙是否处于ON位置，如果是，控制车辆切换至等待阶段，如果否，拨动钥匙，使其处于ON位置，使车辆进入唤醒阶段。</p>
      <p>[0103]	当车辆切换至等待阶段时，车辆的各个子控制器上低压电，开始工作。其具体的控制过程如图4所示。</p>
      <p>[0104]	S401、判断是否存在停机指令，如果是，执行步骤S405，如果否，执行步骤S402。</p>
      <p>[0105]	S402、判断车辆是否存在故障:</p>
      <p>[0106]	具体地，判断车辆中的各个子控制器自检结果是否正常以及整车控制器内的故障处理模块是否允许启动。更具体地，整车控制器控制各个子控制器上低压电，控制各个子控制器进行自检，整车控制器内的故障处理模块判断车辆中是否存在故障。需要说明的是，所述的各个子控制器包括T⑶、E⑶、MCU和BMS。</p>
      <p>[0107]	各个子控制器将自检结果通过CAN总线反馈至整车控制器HCU。HCU根据接收到的各个子控制器的自检结果判断车辆中的各个子控制器的自检结果是否正常。同时，HCU内部的故障处理模块判断整车控制器是否存在故障，如果自检结果正常和/或整车控制器不存在故障，则允许车辆启动，执行步骤S403，如果自检结果异常和/或整车控制器存在故障，则不允许车辆启动，执行步骤S404。</p>
      <p>[0108]	S403、控制车辆从等待阶段切换至就绪阶段。</p>
      <p>[0109]	S404、发出报警信号，以提醒驾驶员。</p>
      <p>[0110]	S405、控制车辆停机。</p>
      <p>[0111]	所述报警信号可以为声音信号，也可以为显示信号。</p>
      <p>[0112]	另外，需要说明的是，所述判断是否存在停机指令的步骤可以位于上述步骤S402至S405中的任一步骤的前面或后面。例如，若步骤S401位于步骤S402之前，如果存在停机指令，控制车辆停机，如果不存在停机指令，则执行步骤S402。</p>
      <p>[0113]	以上为车辆处于等待阶段时的控制方法的具体实施方式。在该等待阶段的控制方法中，当车辆出现故障时，能够及时地向外发出报警信号，提醒驾驶员车辆的状态，能够使驾驶员对车辆状态的把握更加准确。</p>
      <p>[0114]	下面介绍等待阶段之后的就绪阶段的控制方法的具体实施方式。当车辆的当前运行阶段为就绪阶段时，代表HCU和各个子控制器均自检通过，车辆状态正常，可等待驾驶员的进一步操作。针对就绪阶段的控制方法较为简单。在此阶段，车辆运行过程的控制装置并没有具体的控制指令的发出。</p>
      <p>[0115]	在就绪阶段，车辆运行过程的控制方法具体如图5所示。其控制方法包括以下步骤:</p>
      <p>[0116]	S501、判断是否存在停机指令，如果是，执行步骤S502，如果否，执行步骤S503。</p>
      <p>[0117]	S502、控制车辆停机。</p>
      <p>[0118]	S503、判断是否存在启动指令，如果是，执行步骤S504，如果否，控制车辆持续处于就绪阶段。</p>
      <p>[0119]	S504、控制车辆切换至启动阶段。</p>
      <p>[0120]	以上为车辆处于就绪阶段时的控制方法的具体实施方式。需要说明的是，当处于就绪阶段时，判断是否存在停机指令和判断是否存在启动指令的顺序可以颠倒，即作为本发明的另一实施例，可以先执行步骤S503再执行步骤S501。</p>
      <p>[0121]	下面介绍车辆处于启动阶段时的控制方法的具体实现方式。</p>
      <p>[0122]	当车辆当前处于启动阶段时，其控制方法的流程示意图如图6所示。如图6所示，当车辆当前处于启动阶段时，其控制方法包括以下步骤:</p>
      <p>[0123]	S601、判断启动失败次数是否小于预设值，如果是，执行步骤S602，如果否，执行步骤 S607。</p>
      <p>[0124]	为了保护启动机，设定一个启动失败次数的预设值，如果在一个运行循环过程中，启动失败次数小于设定的预设值，则认为车辆正常，可以继续执行下一步动作或任务。如果在一个运行循环过程中，启动失败次数大于设定的预设值，则认为车辆出现异常或故障，向外发出报警信号以提醒驾驶员车辆出现异常。</p>
      <p>[0125]	S602、判断钥匙是否处于“START”位置，如果是，执行步骤S603。</p>
      <p>[0126]	S603、判断当前档位是否为空档，如果是，执行步骤S604，如果否，执行步骤S609:</p>
      <p>[0127]	需要说明的是，如果当前档位未空档时，则说明车辆为正常启动。</p>
      <p>[0128]	S604、发出启动控制指令以控制动力源启动:</p>
      <p>[0129]	需要说明的是，当车辆为混合动力车辆时，所述动力源可以为发动机。也可以为电机，还可以为发动机和电电机。</p>
      <p>[0130]	S605、判断在第一预设时间段内动力源是否启动成功，如果是，执行步骤S606、如果否，执行步骤S608:</p>
      <p>[0131]	当车辆为混合动力车辆时，本步骤具体为，判断第一预设时间段内，发动机是否启动成功，如果是，执行步骤S606、如果否，执行步骤S608 ;或者判断第一预设时间段内，电机是否启动成功，如果是，执行步骤S606、如果否，执行步骤S608。</p>
      <p>[0132]	S606、控制车辆切换至运行阶段，</p>
      <p>[0133]	S607、发出报警信号。</p>
      <p>[0134]	S608、控制车辆返回至等待阶段，并控制启动失败次数加I。</p>
      <p>[0135]	S609、判断在第二预设时间段内钥匙是否一直处于“START”位置，如果是，执行步骤 S604。</p>
      <p>[0136]	当车辆的档位不在空档上，并且在第二预设时间段内钥匙一直处于“START”位置，是此时车辆启动为紧急启动。</p>
      <p>[0137]	以上为车辆当前运行阶段为启动阶段时的控制方法的具体实施方式。需要说明的是，如等待阶段和就绪阶段相同，在启动阶段时，也可以包括以下步骤判断是否存在停机指令，如果是，控制车辆停机，如果否，执行正常的控制过程。由于启动阶段时车辆运行的重要阶段，本发明实施例通过对该阶段进行了详细的过程控制，能够进一步保证控制指令的有效性和合理性。而且通过该阶段的过程控制，保证了车辆零部件的安全使用。例如通过判断启动失败次数是否小于预设值来决定是否启动动力源，避免了车辆一直处于启动过程，有利于保护启动机。</p>
      <p>[0138]	当车辆切换至运行阶段，代表车辆启动成功，此时车辆的动力源处于工作状态，在运行阶段，车辆能够进行行驶、换档、能量回收等一切正常工作。因此在该阶段，整车控制器能够调度能量管理、换档协调等HCU主要功能模块进行工作，保证动作指令的顺利发出。</p>
      <p>[0139]	当车辆为混合动力车辆时，所述的动力源可以为发动机、电机中的一个或两个。</p>
      <p>[0140]	在运行阶段，还可以判断是否存在停机指令，如果是，控制车辆切换至停机阶段，如果否，控制车辆持续处于运行阶段。</p>
      <p>[0141]当车辆处于停机阶段时，车辆整车控制器发出停机指令，开始控制变速箱挂空档、发动机熄火、高压系统下电。</p>
      <p>[0142]	如上所述，当车辆处于等待、就绪、启动和运行阶段时，只要存在停机指令，车辆就会从当前状态切换至停机阶段。在本发明实施例中，整车控制器发出停机指令的控制逻辑图如图7所示。</p>
      <p>[0143]	S701、判断钥匙是否处于“OFF”位置，如果是，执行步骤S702，如果否，执行步骤</p>
      <p>5703。</p>
      <p>[0144]	S702、发出停机指令。</p>
      <p>[0145]	S703、判断故障处理模块是否请求停机，如果是，执行步骤S702，如果否，执行步骤</p>
      <p>5704。</p>
      <p>[0146]	S704、控制车辆保持当前运行状态。</p>
      <p>[0147]	需要说明的是，发出停机指令的控制逻辑中，判断钥匙是否处于OFF位置和判断故障处理模块是否请求停机的顺序可以颠倒，即作为本发明的另一实施例，可以先判断故障处理模块是否请求停机，再判断钥匙是否处于OFF位置。</p>
      <p>[0148]	以上对运行循环过程中的每一个分阶段的控制过程进行了描述。为了更清楚地理解整个运行循环过程的控制方法，将上述六个运行阶段的控制方法整合在一起进行描述，具体参见图8。</p>
      <p>[0149]	如图8所示，车辆在一个运行循环中的控制方法包括以下步骤:</p>
      <p>[0150]	S801、确定车辆的当前状态处于唤醒阶段:</p>
      <p>[0151]	S802、判断钥匙是否处于ON位置，如果是，执行步骤S803，如果否，返回步骤S801。</p>
      <p>[0152]	S803、控制车辆切换至等待阶段。</p>
      <p>[0153]	S804、判断是否存在停机指令，如果否，执行步骤S805，如果是，执行步骤S815。</p>
      <p>[0154]	S805、判断车辆中的各个子控制器以及整车控制器是否存在故障，如果否，执行步骤S806，如果是，执行步骤S817，</p>
      <p>[0155]	S806、控制车辆切换至就绪阶段。</p>
      <p>[0156]	S807、判断是否存在停机指令，如果否，执行步骤S808，如果是，执行步骤S815。</p>
      <p>[0157]	S808、判断是否存在启动指令，如果是，执行步骤S809，如果否，返回步骤S806。</p>
      <p>[0158]	S809、控制车辆切换至启动阶段。</p>
      <p>[0159]	S810、判断是否存在停机指令，如果否，执行步骤S811，如果是，执行步骤S815。</p>
      <p>[0160]	S811、判断在第一预设时间段内动力源是否启动成功，如果是，执行步骤S812，如果否，执行步骤S813。</p>
      <p>[0161]	S812、控制车辆切换至运行阶段。</p>
      <p>[0162]	S813、控制车辆返回至等待阶段，并控制启动失败次数加I。</p>
      <p>[0163]	S814、判断是否存在停机指令，如果否，返回步骤S812，如果是，执行步骤S815。</p>
      <p>[0164]	S816、判断钥匙是否处于ON位置，如果是，返回执行步骤S803，如果否，返回执行步骤S815。</p>
      <p>[0165]	S815、控制车辆切换至停机阶段。</p>
      <p>[0166]	S817、发出报警信号。</p>
      <p>[0167]	以上为车辆的一个运行循环的整个控制方法流程。在上述整个控制方法中，对每个分阶段的控制方法进行简单地描述。其具体的控制过程可以参见上述对各个分阶段的描述。</p>
      <p>[0168]	基于上述车辆运行过程的控制方法，本发明实施例还提供了车辆运行过程的控制</p>
      <p>&gt;J-U ρ&#962;α装直。</p>
      <p>[0169]	需要说明的是，在本发明实施例中，根据钥匙位置以及车辆执行的任务将车辆的一个运行循环过程分为多个运行阶段，在每个运行阶段内预设设置有不同的任务调度。</p>
      <p>[0170]	如图9所示，本发明实施例提供的车辆运行过程的控制装置包括以下单元:</p>
      <p>[0171]	确定单元91，用于确定车辆的当前运行阶段；</p>
      <p>[0172]	控制单元92，用于根据所述当前运行阶段，发送设置在所述当前运行阶段内的任务调度对应的控制指令，以控制相关组件执行所述当前运行阶段对应的任务调度。</p>
      <p>[0173]	为了实现车辆在各个运行阶段能够随时停机，所述控制装置还可以包括:</p>
      <p>[0174]	判断单元93，用于在确定车辆的当前运行阶段之后，判断是否存在停机指令，如果是，控制车辆切换至停机阶段。</p>
      <p>[0175]	通过本发明实施例提供的控制装置，能够根据车辆的当前状态发出控制指令，因而保证了控制指令的合理性。</p>
      <p>[0176]	在本发明实施例中，一个一个运行循环过程包括唤醒阶段、等待阶段、就绪阶段、启动阶段、运行阶段和停机阶段；</p>
      <p>[0177]	所述唤醒阶段是指钥匙从位置“OFF”拨到“0Ν”位置，车辆整车控制器刚上低压电的阶段；</p>
      <p>[0178]	所述等待阶段是指钥匙处于“0N”位置，检测车辆是否存在故障的阶段；</p>
      <p>[0179]	所述就绪阶段是指钥匙处于“0N”位置，车辆无故障，等待接收下发的控制指令的阶段；</p>
      <p>[0180]	所述启动阶段是指钥匙处于“STRAT”位置，发送启动指令，控制车辆执行上高压或启动动力输出装置的动作的阶段；</p>
      <p>[0181]	所述运行阶段是指钥匙处于“0N”位置，车辆启动成功后的阶段；</p>
      <p>[0182]	所述停机阶段是指钥匙从“0N”拨到“OFF”位置，高压电系统下电的阶段。</p>
      <p>[0183]	当确定单元91确定的当前运行阶段为等待阶段时，如图10所示，所述控制单元91包括:</p>
      <p>[0184]	检测子单元101，用于检测车辆是否存在故障；</p>
      <p>[0185]	车辆运行阶段切换子单元102，用于当车辆不存在故障时，控制车辆切换至就绪阶段；</p>
      <p>[0186]	报警子单元103，用于当车辆存在故障时，发出报警信号。</p>
      <p>[0187]	当确定单元91确定的当前运行阶段为启动阶段时，如图11所示所述控制单元92具体包括:</p>
      <p>[0188]	第一判断子单元1101，用于判断启动失败次数是否小于预设值；</p>
      <p>[0189]	第二判断子单元1102，用于当启动失败次数小于预设值时，判断钥匙是否处于“START”位置；</p>
      <p>[0190]	第三判断子单元1103，用于当钥匙处于“START”位置时，判断当前档位是否为空档；</p>
      <p>[0191]	发送子单元1104，用于若当前档位为空档时，发出启动指令以控制动力源启动；</p>
      <p>[0192]	第四判断子单元1105，用于判断在第一预设时间段内动力源是否启动成功；</p>
      <p>[0193]	车辆运行阶段切换子单元1106，用于当在第一预设时间段内动力源启动成功后，控制车辆进入运行阶段；</p>
      <p>[0194]	控制子单元1107，用于当在第一预设时间段内动力源未启动成功后，控制车辆返回等待阶段，并控制车辆启动失败次数加I。</p>
      <p>[0195]	当车辆为混合动力车辆时，所述第四判断子单元包括用于判断在第一预设时间段内高压电上电是否成功的子单元和用于判断在第一预设时间段内发动机是否启动成功的子单元。</p>
      <p>[0196]	为了提醒驾驶员启动失败次数大于或等于预设值、所述控制装置还可以包括:报警子单元1108，用于当启动失败次数不小于预设值时，发出报警提示。</p>
      <p>[0197]	为了实现紧急启动，上述所述的控制单元还可以包括:</p>
      <p>[0198]	第五判断子单元1109，用于若当前档位不为空档时，判断在第二预设时间段内钥匙是否一直处于“START”位置，如果是，发出启动指令以控制动力源启动。</p>
      <p>[0199]	以上所述，仅是本发明的较佳实施例而已，并非对本发明作任何形式上的限制。</p>
      <p>[0200]	虽然本发明已以较佳实施例披露如上，然而并非用以限定本发明。任何熟悉本领域的技术人员，在不脱离本发明技术方案范围情况下，都可利用上述揭示的方法和技术内容对本发明技术方案作出许多可能的变动和修饰，或修改为等同变化的等效实施例。因此，凡是未脱离本发明技术方案的内容，依据本发明的技术实质对以上实施例所做的任何简单修改、等同变化及修饰，均仍属于本发明技术方案保护的范围内。</p>
    </mode-for-invention>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101417653A?cl=zh">CN101417653A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年11月18日</td><td class="patent-data-table-td patent-date-value">2009年4月29日</td><td class="patent-data-table-td ">奇瑞汽车股份有限公司</td><td class="patent-data-table-td ">一种混合动力汽车的启动控制方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101618720A?cl=zh">CN101618720A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年8月5日</td><td class="patent-data-table-td patent-date-value">2010年1月6日</td><td class="patent-data-table-td ">奇瑞汽车股份有限公司</td><td class="patent-data-table-td ">一种混合动力汽车整车控制器的控制方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102009651A?cl=zh">CN102009651A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年11月24日</td><td class="patent-data-table-td patent-date-value">2011年4月13日</td><td class="patent-data-table-td ">北京汽车新能源汽车有限公司</td><td class="patent-data-table-td ">一种ev-at深度混合动力汽车控制方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DJP%26NR%3D2007062638A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEkC6EATvhK6-mfJlPCXIYasCorTg">JP2007062638A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value"></td><td class="patent-data-table-td patent-date-value"></td><td class="patent-data-table-td "> </td><td class="patent-data-table-td citation-no-title">没有名称</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20070202991">US20070202991</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年1月17日</td><td class="patent-data-table-td patent-date-value">2007年8月30日</td><td class="patent-data-table-td ">Hitachi, Ltd.</td><td class="patent-data-table-td ">Vehicle control apparatus</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=B60W0050080000">B60W50/08</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=B60W0050020000">B60W50/02</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=B60W50/02">B60W50/02</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=f9EzCQABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=B60W50/14">B60W50/14</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2014年12月10日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2015年1月7日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/efcb11988b0f9be9b77f/CN104192149A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E8%BD%A6%E8%BE%86%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E7%9A%84%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95%E5%92%8C%E8%A3%85.pdf?id=f9EzCQABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3pDe6gofmb_MFPNghuPoD4AtTm4Q"},"sample_url":"https://www.google.com/patents/reader?id=f9EzCQABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>