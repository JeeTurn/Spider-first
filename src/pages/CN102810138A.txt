<!DOCTYPE html><html><head><title>专利 CN102810138A - 一种用户端文件的修复方法和系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种用户端文件的修复方法和系统"><meta name="DC.contributor" content="董毅" scheme="inventor"><meta name="DC.contributor" content="谢军样" scheme="inventor"><meta name="DC.contributor" content="刘绪平" scheme="inventor"><meta name="DC.contributor" content="北京奇虎科技有限公司" scheme="assignee"><meta name="DC.contributor" content="奇智软件（北京）有限公司" scheme="assignee"><meta name="DC.date" content="2012-6-19" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供了一种用户端文件的修复方法和系统，涉及安全技术领域。所述方法包括：扫描用户端文件，判断文件是否异常，并获取文件特征信息；如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；用所述安全的文件替换用户端相应异常的文件。本发明通过将各用户端的安全文件保存在云端服务器，当用户端出现文件异常时，从云端服务器下载相应文件的安全版本，替换本地异常的文件，解决传统文件修复过程出现的无法修复正常，或者因为感染复杂导致无法修复等问题，保证可以把正确版本的文件恢复到系统中。"><meta name="DC.date" content="2012-12-5"><meta name="DC.relation" content="CN:102332071:A" scheme="references"><meta name="DC.relation" content="CN:102360320:A" scheme="references"><meta name="DC.relation" content="US:7836174" scheme="references"><meta name="citation_patent_publication_number" content="CN:102810138:A"><meta name="citation_patent_application_number" content="CN:201210208665"><link rel="canonical" href="https://www.google.com/patents/CN102810138A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102810138A?cl=zh"/><meta name="title" content="专利 CN102810138A - 一种用户端文件的修复方法和系统"/><meta name="description" content="本发明提供了一种用户端文件的修复方法和系统，涉及安全技术领域。所述方法包括：扫描用户端文件，判断文件是否异常，并获取文件特征信息；如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；用所述安全的文件替换用户端相应异常的文件。本发明通过将各用户端的安全文件保存在云端服务器，当用户端出现文件异常时，从云端服务器下载相应文件的安全版本，替换本地异常的文件，解决传统文件修复过程出现的无法修复正常，或者因为感染复杂导致无法修复等问题，保证可以把正确版本的文件恢复到系统中。"/><meta property="og:title" content="专利 CN102810138A - 一种用户端文件的修复方法和系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102810138A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102810138A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102810138A&amp;usg=AFQjCNGKBjxeqUq-7oec-27GrWAVWMbpwg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/c612a6f53461b1b17c3d/CN102810138A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/c612a6f53461b1b17c3d/CN102810138A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102810138A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102810138A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN102810138A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN102810138B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102810138A?cl=zh" style="display:none"><span itemprop="description">本发明提供了一种用户端文件的修复方法和系统，涉及安全技术领域。所述方法包括：扫描用户端文件，判断文件是否异常，并获取文件特征信息；如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的...</span><span itemprop="url">https://www.google.com/patents/CN102810138A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102810138A - 一种用户端文件的修复方法和系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102810138A - 一种用户端文件的修复方法和系统" title="专利 CN102810138A - 一种用户端文件的修复方法和系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102810138 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201210208665</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2012年12月5日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2012年6月19日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2012年6月19日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102810138B?hl=zh-CN&amp;cl=zh">CN102810138B</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20150205979?hl=zh-CN&amp;cl=zh">US20150205979</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2013189214A1?hl=zh-CN&amp;cl=zh">WO2013189214A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201210208665.2, </span><span class="patent-bibdata-value">CN 102810138 A, </span><span class="patent-bibdata-value">CN 102810138A, </span><span class="patent-bibdata-value">CN 201210208665, </span><span class="patent-bibdata-value">CN-A-102810138, </span><span class="patent-bibdata-value">CN102810138 A, </span><span class="patent-bibdata-value">CN102810138A, </span><span class="patent-bibdata-value">CN201210208665, </span><span class="patent-bibdata-value">CN201210208665.2</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%91%A3%E6%AF%85%22">董毅</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%B0%A2%E5%86%9B%E6%A0%B7%22">谢军样</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%88%98%E7%BB%AA%E5%B9%B3%22">刘绪平</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8C%97%E4%BA%AC%E5%A5%87%E8%99%8E%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">北京奇虎科技有限公司</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%A5%87%E6%99%BA%E8%BD%AF%E4%BB%B6%EF%BC%88%E5%8C%97%E4%BA%AC%EF%BC%89%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">奇智软件（北京）有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102810138A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102810138A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102810138A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (3),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (8),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (5),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201210208665&amp;usg=AFQjCNG8ueqvjDG5VOf_CpzDx_CSiwNdrg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102810138A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHNWD4oeW10UoT1lvaeYoKWI5SnVQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT117712931" lang="ZH" load-source="patent-office">一种用户端文件的修复方法和系统</invention-title>
      </span><br><span class="patent-number">CN 102810138 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA102910732" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供了一种用户端文件的修复方法和系统，涉及安全技术领域。所述方法包括：扫描用户端文件，判断文件是否异常，并获取文件特征信息；如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；用所述安全的文件替换用户端相应异常的文件。本发明通过将各用户端的安全文件保存在云端服务器，当用户端出现文件异常时，从云端服务器下载相应文件的安全版本，替换本地异常的文件，解决传统文件修复过程出现的无法修复正常，或者因为感染复杂导致无法修复等问题，保证可以把正确版本的文件恢复到系统中。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(24)</span></span></div><div class="patent-text"><div mxw-id="PCLM47106304" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种用户端文件的修复方法，其特征在于，包括：  扫描用户端文件，判断文件是否异常，并获取文件特征信息；  如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；  用所述安全的文件替换用户端相应异常的文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求I所述的方法，其特征在于，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得包括：  针对每一用户端，扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息曰志；  将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件；  如果存在未知文件，则通知用户端将所述未知文件上传至云端服务器；  分析所述未知文件的安全等级，并进行记录。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的方法，其特征在于，分析所述未知文件的安全等级包括：  当所述未知文件的安全等级为被感染等级时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件；  用所述安全的文件替换用户端所述未知文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求2所述的方法，其特征在于，将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件包括：  将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息；  如果存在所述第一未知文件日志信息，将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求4所述的方法，其特征在于，将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息包括：  将用户端当前生成的文件日志信息上传至云端服务器；  将云端服务器当前接收的文件日志信息与云端服务器记录的对应所述用户端的文件信息日志进行比较，获取所述云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求5所述的方法，其特征在于，在记录文件日志信息时包括：  以用户端文件路径、文件内容对应的特征值、文件版本的结构对文件特征信息进行结构化，获得结构化文件特征信息；  根据所述文件的安全等级，对所述结构化文件特征信息进行安全等级标识；将标识完安全等级的结构化文件特征信息存入对应所述用户端的文件信息日志中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求I或3所述的方法，其特征在于，用所述安全的文件进行替换时包括：  当所述异常文件或者未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；  当获取到文件的操作权限后，将所述异常文件或者未知文件用相应安全的文件进行替换。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求I或3所述的方法，其特征在于，用户端获取或下载安全的文件时包括：  结合用户端ID和文件特征信息在云端服务器匹配获取相应的安全的文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求1、3、8之一所述的方法，其特征在于，用所述安全的文件进行替换时包括：  用户端通过将监控的文件变化信息上传至云端服务器，在云端服务器查找并获取距当 前时间点最近的安全的文件，并用所述安全的文件将所述异常文件或者未知文件用相应安全的文件进行替换。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求I至9之一所述的方法，其特征在于，  所述的文件特征信息包括文件内容的MD5值，和/或文件的存储路径信息，和/或文件的变化信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求2所述的方法，其特征在于，通知用户端将所述未知文件上传至云端服务器时包括：  用户端接收云端服务器返回的分片策略，并根据所述分片策略，，对所述待上传文件进行分片；  用户端以分片为单位向云端服务器进行文件上传；其中，如果不同的用户端发现同一待上传文件，则由各个用户端并行上传该同一待上传文件的不同分片。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求11所述的方法，其特征在于，所述以分片为单位向云端服务器进行文件上传包括：  按照分片号的顺序，向所述云端服务器发送文件上传请求，所述云端服务器根据其他用户端针对该文件的各分片的已上传情况，确定当前用户端是否需要上传当前分片；  如果接收到需要上传的响应消息，则将当前分片上传到云端服务器。</div>
    </div>
    </div> <div class="claim"> <div num="13" class="claim">
      <div class="claim-text">13.	一种用户端文件的修复装置，其特征在于，包括：  感染扫描模块，用于扫描用户端文件，判断文件是否异常，并获取文件特征信息；  安全文件获取模块，用于如果异常，如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；  替换模块，用于用所述安全的文件替换用户端相应异常的文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求13所述的装置，其特征在于，还包括：  文件上传模块，所述文件上传模块包括：  日志信息生成子模块，用于针对每一用户端，扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息日志；  未知文件判断子模块，用于将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件；  第一上传子模块，用于如果存在未知文件，则通知用户端将所述未知文件上传至云端服务器；第一判断子模块，用于分析所述未知文件的安全等级，并进行记录。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.根据权利要求14所述的装置，其特征在于，还包括：  查找获取子模块，用于当所述未知文件的安全等级为被感染等级时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件；  第一替换子模块，用于用所述安全的文件替换用户端所述未知文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16.根据权利要求14所述的装置，其特征在于，所述未知文件判断子模块包括：  第一未知判断模块，用于将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息；  第二未知判断模块，用于如果存在所述第一未知文件日志信息，将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17.根据权利要求16所述的装置，其特征在于，所述第一未知判断模块包括：  第二上传子模块，用于将用户端当前生成的文件日志信息上传至云端服务器；  第二判断子模块，用于将云端服务器当前接收的文件日志信息与云端服务器记录的对应所述用户端的文件信息日志进行比较，获取所述云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.根据权利要求17所述的装置，其特征在于，在存储文件日志信息时包括：  信息提取模块，用于以用户端文件路径、文件内容对应的特征值、文件版本的结构对文件特征信息进行结构化，获得结构化文件特征信息；  信息存储模块，用于根据所述文件的安全等级，对所述结构化文件特征信息进行安全等级标识；将标识完安全等级的结构化文件特征信息存入对应所述用户端的文件信息日志中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19.根据权利要求13或15所述的装置，其特征在于，所述替换模块或第一替换模块包括：  权限获取单元，用于当所述异常文件或者所述被感染的未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；  替换单元，用于当获取到文件的操作权限后，将所述异常文件或者未知文件用相应安全的文件进行替换。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20.根据权利要求13或15所述的装置，其特征在于，用户端获取或下载安全的文件时包括：  结合用户端ID和文件特征信息在云端服务器匹配获取相应的安全的文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="21" class="claim">
      <div class="claim-text">21.根据权利要求13、15、20之一所述的装置，其特征在于，替换模块或第一替换模块还用于：  用户端通过将监控的文件变化信息上传至云端服务器，在云端服务器查找并获取距当前时间点最近的安全的文件，并用所述安全的文件将所述异常文件或者未知文件用相应安全的文件进行替换。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="22" class="claim">
      <div class="claim-text">22.根据权利要求13至21之一所述的装置，其特征在于，所述的文件特征信息包括文件内容的MD5值，和/或文件的存储路径信息，和/或文件的变化信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="23" class="claim">
      <div class="claim-text">23.根据权利要求14所述的装置，其特征在于，通知用户端将所述未知文件上传至云端服务器时包括：  用户端接收云端服务器返回的分片策略，并根据所述分片策略，，对所述待上传文件进行分片；  用户端以分片为单位向云端服务器进行文件上传；其中，如果不同的用户端发现同一待上传文件，则由各个用户端并行上传该同一待上传文件的不同分片。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="24" class="claim">
      <div class="claim-text">24.根据权利要求23所述的装置，其特征在于，所述以分片为单位向云端服务器进行文件上传包括：   按照分片号的顺序，向所述云端服务器发送文件上传请求，所述云端服务器根据其他用户端针对该文件的各分片的已上传情况，确定当前用户端是否需要上传当前分片；  如果接收到需要上传的响应消息，则将当前分片上传到云端服务器。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES53433839" lang="ZH" load-source="patent-office" class="description">
    <p>一种用户端文件的修复方法和系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及安全技术领域，特别是涉及一种用户端文件的修复方法和系统。</p>
    <p>背景技术</p>
    <p>[0002]	文件感染，是一种病毒和木马常用的一种技术，由来已久。这种技术是将病毒代码添加到正常程序的代码中，从而实现随被感染程序同步运行的功能，进而对感染电脑进行破坏和自身传播，以及完成一些诸如盗窃用户密码或者虚拟资产，上传用户敏感资料等其它恶意行为。而对于感染的文件来说，为了方便用户，一般需要对用户感染的文件进行修复。 [0003]	现有技术中，对于感染文件的修复过程是清除插入正常文件的恶意代码。其过程一般如下：用户端扫描文件-&gt;发现受感染的文件-&gt;定位文件代码中病毒或木马等恶意代码所在位置_&gt;根据定位的病毒或木马等恶意代码位置，将恶意代码部分删除。然而，在实际中，由于病毒与安全软件对抗之后，变种非常多样，用现有的方法处理被感染的文件存在以下几个缺点：（I)几乎做不到完全修复；（2)很多文件修复之后，还残存恶意代码；(3)很多文件修复之后，不能正常执行（个别的还可能会导致系统崩溃或应用软件无法正常使用）；(4)无法修复文件时（比如文件被感染度超过80%，则基本无法将恶意代码从原正常文件代码中删除），被迫隔离（删除）；（5)无法修复系统关键文件时，不敢删除被迫保留。总之，现有的文件修复技术基本上无法保证将被感染文件中的恶意代码完整删除，保证文件正常。</p>
    <p>发明内容</p>
    <p>[0004]	本发明所要解决的技术问题是提供一种用户端文件的修复方法和系统，可解决传统文件修复过程出现的无法修复正常，或者因为感染复杂或者说是系统关键文件导致无法修复等问题，保证把可以把正确版本的文件恢复到系统中。</p>
    <p>[0005]	为了解决上述问题，本发明公开了一种用户端文件的修复方法，包括：</p>
    <p>[0006]	扫描用户端文件，判断文件是否异常，并获取文件特征信息；</p>
    <p>[0007]	如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；</p>
    <p>[0008]	用所述安全的文件替换用户端相应异常的文件。</p>
    <p>[0009]	优选的，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得包括：</p>
    <p>[0010]	针对每一用户端，扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息日志；</p>
    <p>[0011]	将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件；[0012]	如果存在未知文件，则通知用户端将所述未知文件上传至云端服务器；</p>
    <p>[0013]	分析所述未知文件的安全等级，并进行记录。</p>
    <p>[0014]	优选的，分析所述未知文件的安全等级包括：</p>
    <p>[0015]	当所述未知文件的安全等级为被感染等级时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件；</p>
    <p>[0016]	用所述安全的文件替换用户端所述未知文件。</p>
    <p>[0017]	优选的，将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件包括：</p>
    <p> [0018]	将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息；</p>
    <p>[0019]	如果存在所述第一未知文件日志信息，将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</p>
    <p>[0020]	优选的，将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息包括：</p>
    <p>[0021]	将用户端当前生成的文件日志信息上传至云端服务器；</p>
    <p>[0022]	将云端服务器当前接收的文件日志信息与云端服务器记录的对应所述用户端的文件信息日志进行比较，获取所述云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息。</p>
    <p>[0023]	优选的，在记录文件日志信息时包括：</p>
    <p>[0024]	以用户端文件路径、文件内容对应的特征值、文件版本的结构对文件特征信息进行结构化，获得结构化文件特征信息；</p>
    <p>[0025]	根据所述文件的安全等级，对所述结构化文件特征信息进行安全等级标识；将标识完安全等级的结构化文件特征信息存入对应所述用户端的文件信息日志中。</p>
    <p>[0026]	优选的，用所述安全的文件进行替换时包括：</p>
    <p>[0027]	当所述异常文件或者未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；</p>
    <p>[0028]	当获取到文件的操作权限后，将所述异常文件或者未知文件用相应安全的文件进行替换。</p>
    <p>[0029]	优选的，用户端获取或下载安全的文件时包括：</p>
    <p>[0030]	结合用户端ID和文件特征信息在云端服务器匹配获取相应的安全的文件。</p>
    <p>[0031]	优选的，用所述安全的文件进行替换时包括：</p>
    <p>[0032]	用户端通过将监控的文件变化信息上传至云端服务器，在云端服务器查找并获取距当前时间点最近的安全的文件，并用所述安全的文件将所述异常文件或者未知文件用相应安全的文件进行替换。</p>
    <p>[0033]	优选的，所述的文件特征信息包括文件内容的MD5值，和/或文件的存储路径信息，和/或文件的变化信息。</p>
    <p>[0034]	优选的，通知用户端将所述未知文件上传至云端服务器时包括：[0035]	用户端接收云端服务器返回的分片策略，并根据所述分片策略，，对所述待上传文件进行分片；</p>
    <p>[0036]	用户端以分片为单位向云端服务器进行文件上传；其中，如果不同的用户端发现同一待上传文件，则由各个用户端并行上传该同一待上传文件的不同分片。</p>
    <p>[0037]	优选的，所述以分片为单位向云端服务器进行文件上传包括：</p>
    <p>[0038]	按照分片号的顺序，向所述云端服务器发送文件上传请求，所述云端服务器根据其他用户端针对该文件的各分片的已上传情况，确定当前用户端是否需要上传当前分片；</p>
    <p>[0039]	如果接收到需要上传的响应消息，则将当前分片上传到云端服务器。</p>
    <p>[0040]	相应的，一种用户端文件的修复装置，包括：</p>
    <p>[0041]	感染扫描模块，用于扫描用户端文件，判断文件是否异常，并获取文件特征信息； </p>
    <p>[0042]	安全文件获取模块，用于如果异常，如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；</p>
    <p>[0043]	替换模块，用于用所述安全的文件替换用户端相应异常的文件。</p>
    <p>[0044]	优选的，还包括：</p>
    <p>[0045]	文件上传模块，所述文件上传模块包括：</p>
    <p>[0046]日志信息生成子模块，用于针对每一用户端，扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息日志；</p>
    <p>[0047]	未知文件判断子模块，用于将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件；</p>
    <p>[0048]	第一上传子模块，用于如果存在未知文件，则通知用户端将所述未知文件上传至云端服务器；</p>
    <p>[0049]	第一判断子模块，用于分析所述未知文件的安全等级，并进行记录。</p>
    <p>[0050]	优选的，还包括：</p>
    <p>[0051]	查找获取子模块，用于当所述未知文件的安全等级为被感染等级时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件；</p>
    <p>[0052]	第一替换子模块，用于用所述安全的文件替换用户端所述未知文件。</p>
    <p>[0053]	优选的，所述未知文件判断子模块包括：</p>
    <p>[0054]	第一未知判断模块，用于将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息；</p>
    <p>[0055]	第二未知判断模块，用于如果存在所述第一未知文件日志信息，将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</p>
    <p>[0056]	优选的，所述第一未知判断模块包括：</p>
    <p>[0057]	第二上传子模块，用于将用户端当前生成的文件日志信息上传至云端服务器；</p>
    <p>[0058]	第二判断子模块，用于将云端服务器当前接收的文件日志信息与云端服务器记录的对应所述用户端的文件信息日志进行比较，获取所述云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息。[0059]	优选的，在存储文件日志信息时包括：</p>
    <p>[0060]	信息提取模块，用于以用户端文件路径、文件内容对应的特征值、文件版本的结构对文件特征信息进行结构化，获得结构化文件特征信息；</p>
    <p>[0061]	信息存储模块，用于根据所述文件的安全等级，对所述结构化文件特征信息进行安全等级标识；将标识完安全等级的结构化文件特征信息存入对应所述用户端的文件信息日志中。</p>
    <p>[0062]	优选的，所述替换模块或第一替换模块包括：</p>
    <p>[0063]	权限获取单元，用于当所述异常文件或者所述被感染的未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；</p>
    <p>[0064]	替换单元，用于当获取到文件的操作权限后，将所述异常文件或者未知文件用相 应安全的文件进行替换。</p>
    <p>[0065]	优选的，用户端获取或下载安全的文件时包括：</p>
    <p>[0066]	结合用户端ID和文件特征信息在云端服务器匹配获取相应的安全的文件。</p>
    <p>[0067]	优选的，替换模块或第一替换模块还用于：</p>
    <p>[0068]	用户端通过将监控的文件变化信息上传至云端服务器，在云端服务器查找并获取距当前时间点最近的安全的文件，并用所述安全的文件将所述异常文件或者未知文件用相应安全的文件进行替换。</p>
    <p>[0069]	优选的，所述的文件特征信息包括文件内容的MD5值，和/或文件的存储路径信息，和/或文件的变化信息。</p>
    <p>[0070]	优选的，通知用户端将所述未知文件上传至云端服务器时包括：</p>
    <p>[0071]	用户端接收云端服务器返回的分片策略，并根据所述分片策略，，对所述待上传文件进行分片；</p>
    <p>[0072]	用户端以分片为单位向云端服务器进行文件上传；其中，如果不同的用户端发现同一待上传文件，则由各个用户端并行上传该同一待上传文件的不同分片。</p>
    <p>[0073]	优选的，所述以分片为单位向云端服务器进行文件上传包括：</p>
    <p>[0074]	按照分片号的顺序，向所述云端服务器发送文件上传请求，所述云端服务器根据其他用户端针对该文件的各分片的已上传情况，确定当前用户端是否需要上传当前分片；</p>
    <p>[0075]	如果接收到需要上传的响应消息，则将当前分片上传到云端服务器。</p>
    <p>[0076]	与现有技术相比，本发明包括以下优点：</p>
    <p>[0077]	本发明通过将各用户端的安全文件保存在云端服务器，当用户端出现文件异常时，从云端服务器下载相应文件的安全版本，替换本地异常的文件，解决传统文件修复过程出现的无法修复正常，或者因为感染复杂或者说是系统关键文件导致无法修复等问题，保证把可以把正确版本的文件恢复到系统中。</p>
    <p>附图说明</p>
    <p>[0078]	图I是本发明一种用户端文件的修复方法的流程示意图；</p>
    <p>[0079]	图2是本发明优选一种用户端文件的修复方法的流程示意图；</p>
    <p>[0080]	图3是本发明一种用户端文件的修复装置的结构示意图；[0081]	图4是本发明优选一种用户端文件的修复装置的结构示意图；</p>
    <p>[0082]	图5是本发明一种用户端文件的修复系统的结构示意图。</p>
    <p>具体实施方式</p>
    <p>[0083]	为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。</p>
    <p>[0084]	本发明可以及时准确的将各用户端的安全版本文件上传至云端服务器保存，当用户端某个文件异常时，则根据异常文件的相关文件特征信息从云端服务器获取与所述异常文件相应的安全的文件至用户端，然后用所述安全的文件替换用户端相应异常的文件。 [0085]	本发明优选的，针对的是用户端系统中的可执行文件，比如windows系统中的PE文件（PE文件被称为可移植的执行体是Portable Execute的全称，PE文件是微软Windows操作系统上的程序文件。常见的EXE、DLL、OCX、SYS、COM都是PE文件），比如移动终端（智能手机等）中的可执行文件（比如系统文件）。因为对于上述这类文件，各用户端中的文件基本相同，（比如对于windows XP系统，那么其中的系统文件则基本上相同），那么在云端服务器则可具有相对充裕的空间存储上述文件。</p>
    <p>[0086]	参照图1，示出了本发明一种用户端文件的修复方法的流程示意图，具体可以包括：</p>
    <p>[0087]	步骤110，扫描用户端文件，判断文件是否异常，并获取文件特征信息；</p>
    <p>[0088]	在本发明实施例中，判断文件是否异常可由用户端判断，也可由云端服务器的服务器判断。在扫描时，可获取相应文件的文件特征信息。其中文件特征信息包括文件的MD5值（Message Digest Algorithm MD5,中文名为消息摘要算法第五版），文件在用户端的存储路径等。所述文件特征信息包括用于查询相应文件是否在云端服务器存储的信息。</p>
    <p>[0089]	其中，所述的文件特征信息包括文件内容的MD5值，和/或文件的存储路径信息，和/或文件的变化信息。本发明实施例中，文件特征信息可包括文件内容的MD5值，文件路径的MD5值，文件的变化信息，还可包括时间戳等。</p>
    <p>[0090]	对于异常文件，其存在多种情况：</p>
    <p>[0091]	其一，比如对于系统文件来说，本发明实施例可以在安全监控中设置“文件白名单+文件签名”的形式判断系统文件是否正常，当系统文件不具备其中之一即可认为系统文件为异常文件，即当系统文件不在文件白名单中、和/或文件签名不对，即可认为系统文件是异常的。其中，文件签名比如文件内容的MD5值等。</p>
    <p>[0092]	其二，对于个人编译的可执行文件来说，可通过扫描判断其是否被感染（中毒）来判断是否异常。</p>
    <p>[0093]	本发明中，判断文件被感染的方法包括多种，比如：特征代码法、校验和法等。这些方法依据的原理不同，实现时所需开销不同，检测范围不同，各有所长。</p>
    <p>[0094]	I、特征代码法的实现步骤如下：</p>
    <p>[0095]	采集已知病毒文件，病毒如果既感染COM文件，又感染EXE文件，对这种病毒要同时采集COM型病毒文件和EXE型病毒文件。</p>
    <p>[0096]	在病毒文件中，抽取特征代码。依据如下原则：</p>
    <p>[0097]	抽取的代码比较特殊，不大可能与普通正常程序代码吻合。抽取的代码要有适当长度，一方面维持特征代码的唯一性，另一方面又不要有太大的空间与时间的开销。如果一种病毒的特征代码增长一字节，要检测3000种病毒，增加的空间就是3000字节。在保持唯一性的前提下，尽量使特征代码长度短些，以减少空间与时间开销。</p>
    <p>[0098]	在既感染COM文件又感染EXE文件的病毒文件中，要抽取两种文件共有的代码。将特征代码纳入病毒数据库。</p>
    <p>[0099]	打开被检测文件，在文件中搜索，检查文件中是否含有病毒数据库中的病毒特征代码。如果发现病毒特征代码，由于特征代码与病毒一一对应，便可以断定，被查文件中患有何种病毒。</p>
    <p>[0100]	2、校验和法，</p>
    <p>[0101]	将正常文件的内容，计算其校验和，将该校验和写入文件中或写入别的文件中保存。在文件使用过程中，定期地或每次使用文件前，检查文件现在内容算出的校验和与原来保存的校验和是否一致，因而可以发现文件是否感染，这种方法叫校验和法。 </p>
    <p>[0102]	运用校验和法查病毒采用三种方式：</p>
    <p>[0103]	①在检测病毒工具中纳入校验和法，对被查的对象文件计算其正常状态的校验和，将校验和值写入被查文件中或检测工具中，而后进行比较。</p>
    <p>[0104]	②在应用程序中，放入校验和法自我检查功能，将文件正常状态的校验和写入文件本身中，每当应用程序启动时，比较现行校验和与原校验和值。实现应用程序的自检测。</p>
    <p>[0105]	③将校验和检查程序常驻内存，每当应用程序开始运行时，自动比较检查应用程序内部或别的文件中预先保存的校验和。</p>
    <p>[0106]	对于检查文件被病毒感染的方法可包括多种，本发明不对其加以限制。</p>
    <p>[0107]	步骤120，如果异常，则根据所述文件特征信息从云端服务器获取与所述异常的文件相应的，未出现异常情况前的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；</p>
    <p>[0108]	如果扫描发现文件异常，那么根据所述文件特征信息从云端服务器查询相应异常文件的安全版的文件，然后由用户端从云端服务器下载至本地。比如用户的bass_aac. dll文件异常，根据bass_aac. dll的文件特征信息，比如文件内容的MD5值，和存储路径的MD5值等在云端服务器查找相应的安全的bass_aac. dll文件,然后由用户端将该安全的bass_aac. dll文件下载至本地。</p>
    <p>[0109]	所述在云端服务器存储文件时用到的文件特征信息可包括文件名，文件内容的MD5值等。本发明实施例的文件可进行唯一性存储，即同一个文件只存储一份，不重复存储。然后对于不同用户端的对应相同文件的文件特征信息与所述文件进行多对一进行对应即可。比如对于前述windows系统中的bass_aac. dll文件,基本上各个用户端均存在该文件，那么云端服务器只存储一份bass_aac. dll文件,然后各个用户端的文件特征信息以bass_aac. dll+对应MD5值与bass_aac. dll对应即可。</p>
    <p>[0110]	在本发明实施例中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得。即在云端服务器存储文件，可全部由用户端上传，也可首先对于各用户端中重复率高的文件由云端服务器自己整理上传，而不用通过用户端上传。比如windows系统文件，各种windows系统文件基本上相同，因此,可由云端服务器自己将windows系统文件进行上传和存储。另外，还比如对于UNIX系统文件、智能手机的系统文件（比如android安卓的系统文件）等。那么对于在上传用户端的文件时，对于上述已经上传了的文件，即可不对其进行上传。节省上传时间，提高效率。</p>
    <p>[0111]	本发明的上传是基于直接从用户端（比如某地域内的n亿用户）直接上传到云端服务器端。</p>
    <p>[0112]	步骤130，用所述安全的文件替换用户端相应异常的文件。</p>
    <p>[0113]	当用户端得到与异常文件相应的安全版的文件时，那么将安全的文件替换异常的文件即可。</p>
    <p>[0114]	如果无法在云端服务器查找到异常文件相应的安全版的文件，那么可采用传统的修复技术。</p>
    <p>[0115]	其中，用所述安全的文件替换用户端相应异常的文件包括： [0116]	当所述异常文件或者所述被感染的未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；</p>
    <p>[0117]	当获取到文件的操作权限后，将所述异常文件或者未知文件用相应安全的文件进行替换。</p>
    <p>[0118]	如此，用户端的异常文件还原为安全的文件，并且避免了由于传统的修复技术导致的修复不完整或者因为感染复杂等情况而无法修复等问题。</p>
    <p>[0119]	另外，在本发明中，判断出文件异常之后，还包括：</p>
    <p>[0120]	提示用户端是否允许对异常文件进行替换。</p>
    <p>[0121]	比如在判断文件异常之后，在从云端服务器下载与所述异常的文件相应的，未出现异常情况前的安全的文件之前即提示用户端，是否允许下载安全版的文件并进行替换。</p>
    <p>[0122]	如果用户不允许，则可采用传统修复技术对异常文件进行修复。</p>
    <p>[0123]	本发明可替换系统文件（包括各个版本的操作系统，windows 2000, xp，2003，vista, windows 7, windows 8)和第三方常用软件（比如QQ,迅雷，，飞信,360系列软件等。除了上述系统文件和第三方常用软件外，还包括用户端机器上所有的可执行文件。</p>
    <p>[0124]	本发明中，可替换的文件主要依赖于白名单对于文件和软件的收集，只要是白名单内收集的文件或软件，都是可以替换的。其中，白名单在搜集可替换的文件和软件时，可判断其是否为可执行文件或者说是否为可替换的文件比如通过文件的扩展名（.com，.exe, . dll等）进行判断。</p>
    <p>[0125]	参照图2，其示出了本发明优选的一种用户端文件的修复方法的流程示意图，具体可以包括：</p>
    <p>[0126]	步骤210，针对每一用户端，扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息日志；</p>
    <p>[0127]	本步骤针对每一个用户端，首先扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息日志。在本发明实施例中，首先扫描的可为文件的内容MD5值，然后结合当前文件的文件名、文件路径，文件的变化情况等生成文件信息日志。其中文件的变化情况包括，对于同一 MD5值的文件，如果其用于将其存储路径进行变更，那么记录其存储路径的变化，比如如果文件A. exe原来的路径为D: \A\A，而用户将其移动至E: \A\A，并修改名字为B. exe，那么对文件的监控即记录E:\A\A中的B. exe由D: \A\A中的D: \A\A变动过来的，生成文件日志信息时也对该条移动信息进行记录。[0128]	在本发明实施例中，可以在用户端初始安装文件存储环境，保证用户端系统安全时，将用户端系统中的文件进行扫描生成日志，然后将云端服务器未存储的文件上传至云端服务器进行存储。然后再进入步骤210。当然对于本发明实施例，用户初始使用时，也可直接进入步骤210。</p>
    <p>[0129]	步骤220，将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件；</p>
    <p>[0130]	本发明实施例在云端服务器存储与用户端相关的文件时，可通过上传用户端的文件获得。</p>
    <p>[0131]	当得到文件信息日志后，可根据文件信息日志中的文件特征信息与云端服务器记录的文件特征信息进行比较，判断是否存储在未知文件。比如云端服务器对于其存储的文件的文件名和文件的MD5值进行了记录，那么可将文件日志信息中的MD5值与云端服务器记录的文件特征信息中的MD5值进行比较，如果不存在，则判断其为相对于云端服务器的未知文件。 </p>
    <p>[0132]	然后将用户端日志信息中被云端服务器判断为未知文件的文件特征信息通知给用户端。</p>
    <p>[0133]	优选的，将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件包括：</p>
    <p>[0134]	步骤S10，将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息；</p>
    <p>[0135]	对于已经使用至少一次本发明实施例的用户端来说，本发明实施例可记录当前扫描之前进行扫描时生成的文件日志信息。比如用户端第一次扫描时生成了一份文件日志信息，该文件日志信息被记录，那么用户端第二次扫描时的文件日志信息即可与以前记录的文件日志信息进行比较，进行第一次未知文件特征信息的判断，获得第一未知文件日志信</p>
    <p>肩、O</p>
    <p>[0136]	对于本发明实施例来说，用户端第一次使用时，最优初始环境为未异常任何文件的安全环境，比如初始安装后安全环境。对于第一次使用本发明实施例的用户端来说，其初始环境为安全环境，那么可对其生成初始的文件日志信息，该文件日志信息对应该用户端各安全文件的相关文件特征信息。</p>
    <p>[0137]	在本发明实施例中，对于用户端当前产生的日志信息之前的文件日志信息，可由用户端本身记录，也可由云端服务器进行记录，由云端服务器进行记录时，以用户端标识进行对应记录，避免文件日志信息的混淆。其中，如果由云端服务器进行记录时，优选的，可单独划分一个云端服务器日志服务器进行记录。</p>
    <p>[0138]	另外，优选的，对于上传的文件可单独划分文件服务器存储用户端上传的文件，然后将文件特征信息与相应的文件进行对应。其中，存储文件时，对于非安全的文件和安全的文件可分开存储。</p>
    <p>[0139]	优选的，将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息包括：[0140]	步骤S11，将用户端当前生成的文件日志信息上传至云端服务器；</p>
    <p>[0141]	步骤S12，将云端服务器当前接收的文件日志信息与云端服务器记录的对应所述用户端的文件信息日志进行比较，获取所述云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息。。</p>
    <p>[0142]	那么当由用户端本身对文件日志信息记录时，如果获得第一未知文件日志信息时，将所述第一未知文件日志信息发送至云端服务器，进入步骤S12。当有云端服务器对用户端的文件日志信息进行记录时，用户端首先将当前的文件日志信息上传至云端服务器，云端服务器将用户端当前上传的文件日志信息与云端服务器记录的对应该用户端以前的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文0件日志信息中不存在的第一未知文件日志信息，如果存在，转入步骤S12,该第一未知文件日志信息是：当前上传的文件日志信息与云端存储的对应用户端的文件日志信息相比，云端存储的对应用户端的文件日志信息中所没有的。</p>
    <p>[0143]	在本发明实施例中，所述在云端服务器存储文件时用到的文件特征信息可包括文 件名，文件内容的MD5值，用户端文件路径；对一个文件，还可加入文件上传时的时间戳或者相应的版本号作为版本标识，同时对文件的安全等级进行标识，本发明实施例中一般对文件的路径MD5值进行安全等级标识。即本发明实施例的文件特征信息的存储形式可以时：“文件名：PATH(用户端文件路径MD5)+TEXT (文件内容MD5) ”的形式进行存储，其中对PATH进行安全等级标识。优选的，还可以是：“文件名：PATH (路径MD5)+TEXT (文件内容MD5) +VERSION(版本标识)”进行存储，其中对PATH进行安全等级标识。在本实施例中，在上传时，还可将用户端ID上传，然后存储文件信息时，将用户端ID也一并存储。所述用户端ID比如根据用户机器的硬件生成一个序列号（比如现在使用的MID)，还可利用用户在云端服务器注册的账号和MID结合生成。</p>
    <p>[0144]	优选的，在存储文件日志信息时包括：</p>
    <p>[0145]	步骤All，以用户端文件路径、文件内容对应的特征值、文件版本的结构对文件特征信息进行结构化，获得结构化文件特征信息；</p>
    <p>[0146]	即前述的“文件名：PATH(用户端文件路径MD5)+TEXT (文件内容MD5) ”的形式。</p>
    <p>[0147]	步骤A12，根据所述文件的安全等级，对所述结构化文件特征信息进行安全等级标识；将标识完安全等级的结构化文件特征信息存入对应所述用户端的文件信息日志中。</p>
    <p>[0148]	步骤S20，如果存在所述第一未知文件日志信息，将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</p>
    <p>[0149]	如果步骤S20中，获得了第一未知文件日志信息，那么将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</p>
    <p>[0150]	步骤230，如果存在未知文件，则通知用户端将所述未知文件上传至云端服务器；</p>
    <p>[0151]	因为云端服务器是存储的各个用户端上传的文件，因此对于某个用户端来说，其新老文件日志信息的对比中，出现的第一未知文件日志信息中的文件特征信息，其对应的文件可能已经由其他用户端上传，并且该文件相关的文件特征信息已经记录在云端服务器。那么该种情况，对于云端服务器来说，所述第一未知文件日志信息中的文件特征信息就不是未知文件，可不通知用户端上传所述文件特征信息对应的文件。[0152]	在云端服务器中，存储的文件可按一定规则与文件特征信息进行对应，并用于与用户端上传的文件特征信息进行比较，并搜索和查询相应的文件。比如以文件的MD5值与文件进行对应。</p>
    <p>[0153]	本发明的上传是基于直接从用户端（比如某地域内的n亿用户）直接上传到云端服务器端。在本实施例中，上传前需要对判断文件是否需要上传，即进行与云端服务器存储的文件相比的重复性判断。</p>
    <p>[0154]	另外，本发明人在实现本发明的过程中发现，现有技术中之所以会存在文件上传成功率及效率低的问题，是因为，由发现可疑文件的用户端直接将整个文件上传到服务器，这样，如果一个文件太大，而用户端可以使用的上传带宽比较小的话，就可能导致上传失败，另外，仅使用一个用户端进行同一个文件的上传，也会使得该用户端的上传负担比较重，也将导致上传的速度很慢。 [0155]	因此，在本发明实施例中，采用分片及多用户端并行上传的机制，这样，一方面，由于对文件进行了分片，因此，可以避免由于文件过大导致的上传失败现象，提高上传的成功率；另一方面，如果多个用户端都发现了同一可疑文件，则由于多用户端可以并行上传该可疑文件的不同分片，因此，也可以在降低单个用户端的上传负担的同时，避免受到一个用户端上传带宽的限制，提高上传的效率。</p>
    <p>[0156]	因此，优选的，通知用户端将所述未知文件上传至云端服务器时包括：</p>
    <p>[0157]	步骤LI，用户端接收云端服务器返回的分片策略，并根据所述分片策略，，对所述待上传文件进行分片；</p>
    <p>[0158]	本实施例中通过云端的管理服务器返回分片策略至用户端，对所述待上传文件进行分片。</p>
    <p>[0159]	用户端在接收到云端的管理服务器的分片策略之后，就可以对待上传的文件进行分片，同时，还可以为各个分片分配分片号（具体如何编号也可以包含在分片策略中）。分片之后，每一片仍采用原来的数据格式，且可以保留原文件的标识符，但只包含原文件的部分数据。并且，一旦完成分片后，每个分片就都可以作为独立的数据传输单元进行传送。其中，具体的分片方法可以采用已有技术中的方法来实现，这里不再详述。</p>
    <p>[0160]	步骤L2，用户端以分片为单位向云端服务器进行文件上传；其中，如果不同的用户端发现同一待上传文件，则由各个用户端并行上传该同一待上传文件的不同分片。</p>
    <p>[0161]	本实施例中用户端以分片为单位向云端的数据服务器进行文件上传。</p>
    <p>[0162]	用户端在完成分片之后，就可以以分片为单位进行文件的上传，并且，由于可能有多个用户端都发现了同一文件，因此，就可以由这些用户端分别上传一部分分片，这样就可以避免一个用户端的上传任务过重，并且由于可以多个用户端可以并行上传，因此，上传的效率就可以得到大幅的提闻。</p>
    <p>[0163]	其中，用户端在上传各个分片时，可以按照分片号的顺序，向管理服务器发送文件上传请求，管理服务器根据其他用户端针对该文件的各分片的已上传情况，确定当前用户端是否需要上传当前分片；如果需要，则向用户端发出需要上传的指示，用户端接收到需要上传的响应消息，则将当前分片上传到数据服务器，否则，就可以不必上传该分片。</p>
    <p>[0164]	例如，假设某文件被分为3个分片，当某用户端A请求上传其中的分片I时，如果已经有其他用户端上传了该分片，或者有其他用户端正在上传在分片，那么管理服务器就可以指示该用户端A不需要上传该分片；用户端A在接收到该指令之后，就可以放弃对分片I的上传请求，继而向管理服务器发出上传分片2的请求。</p>
    <p>[0165]	否则，如果在接收到用户端A上传分片I的请求时，分片I尚未上传到数据服务器，也没有其他用户端正在上传该分片1，那么管理服务器就会向用户端A发出上传该分片的指令，用户端A接收到该指令之后，就可以上传该分片I ;待完成分片I的上传之后，再向管理服务器发出上传分片2的请求，以此类推。</p>
    <p>[0166]	需要说明的是，针对同一待上传文件，管理服务器分配的分片策略是相同的。也就是说，假设有三个用户端都发现了上述例子中的文件，则向这三个用户端发送的分片策略都应该是分成三个分片，并且每个分片的大小及编号等在各个用户端之间都是一致的。当然，另外需要说明的是，在实际应用中，各个用户端并不一定是同一时刻发现同一文件，而是存在时间上的先后性，但是使用前述方式进行每个分片的上传时，并不影响本发明实施例的实现。</p>
    <p>[0167]	例如，用户端A最先发现了某文件，在根据管理服务器的策略对文件进行分片之 后，首先将分片I上传到数据服务器；就在用户端A上传分片I的过程中，用户端B也发现了该文件，管理服务器同样指示该用户端B按照同样的策略对文件进行分片，并且用户端B在发起上传分片I的请求时，管理服务器就可以指示该用户端B不必上传该分片1，于是用户端B再向管理服务器发起上传分片2的请求，如果在此之前还没有其他用户端上传该分片2，就可以指示该用户端B可以上传该分片2，于是用户端B就可以开始上传该分片2，以此类推。</p>
    <p>[0168]	需要说明的是，由于在上传的过程中已经对文件进行了分片，因此，在服务器侧还需要再对各个分片进行组包，以得到完整的文件。而在本发明实施例中，由于同一文件的不同分片可能是由不同的用户端上传的，而根据各个用户端所处的地理位置的不同，管理服务器针对不同的用户端选择的数据服务器可能是不同的，这样，同一文件的不同分片可能被上传的不同的数据服务器上去。针对这种情况，还可以首先将不同用户端上传的同一文件的各个分片路由到同一个组包服务器，然后由组包服务器对各个分片进行组包。</p>
    <p>[0169]	具体实现时，数据服务器（相当于是上传接收机）可以是个集群，每个数据服务器都可以接收分片上传，分片上传到数据服务器之后，可以由分片分发进程把各个分片路由到组包集群上。具体的，这个进程可以先去请求一下调度中心，得到该分片应该去哪个组包服务器，调度中心根据文件的md5 (Message Digest Algorithm,消息摘要算法第五版,是计算机安全领域广泛使用的一种散列函数，用以提供消息的完整性保护）给分发进程分配一个合适的组包服务器，每个组包服务器都会起动一个组包worker等待组包，这样同一文件的所有分片就会落在同一台组包服务器中。</p>
    <p>[0170]	需要说明的是，本发明实施例所述的数据服务器、组包服务器可以是物理上相互独立的机器，也可以使用同一机器中提供不同的服务，本发明实施例在描述时重点突出功能性，但并不能看作是对本发明的限制。</p>
    <p>[0171]	其中，上述的调度中心可以用来监控组包机器的状态，该调度中心是冗余的，可以热切；当一个分片请求调度中心时候，可以根据文件的md5,通过hash算法找到相应的组包服务器，当某台组包服务器失效时候，调度中心会检测到该组包服务器失效，并把状态置为无效，同时选择一台备份机器顶替掉失效的机器。通过这种机制，可以提高系统的容错能力，保证组包服务的可靠运行。</p>
    <p>[0172]	进一步，优选的，所述以分片为单位向云端服务器进行文件上传包括：</p>
    <p>[0173]	步骤L11，按照分片号的顺序，向所述云端服务器发送文件上传请求，所述云端服务器根据其他用户端针对该文件的各分片的已上传情况，确定当前用户端是否需要上传当前分片；</p>
    <p>[0174]	步骤L12，如果接收到需要上传的响应消息，则将当前分片上传到云端服务器。</p>
    <p>[0175]	如果不存在，则不上传任何文件。 [0176]	步骤240，分析所述未知文件的安全等级，并进行记录。</p>
    <p>[0177]	为了保证提供给用户端的文件是安全文件，对于用户端上传的文件，需要云端服务器判断其是否为安全文件，如果是安全文件，则标记其安全等级为安全。如果是其他情况，则对其进行相应安全等级的标记，比如可疑，中毒等，然后对对相应文件特征信息及相应安全等级进行记录，比如被感染等级。</p>
    <p>[0178]	在上述上传过程中，本发明实施例的文件可进行唯一性存储，即同一个文件只存储一份，不重复存储。比如对于用户端A，云端服务器通过前述步骤发现其存在未知文件打161、打162、打163，那么通知用户端4上传打161、打162、打163至云端服务器进行存储，云端服务器记录相应的文件特征信息。然后对于用户端B，其中存在文件filel、file3、file4，那么此时，云端服务器通过上述步骤检测到用户端B中存在未知文件file4，那么通知用户端B上传file4。</p>
    <p>[0179]	进一步的，分析所述未知文件的安全等级包括：</p>
    <p>[0180]	步骤S250，当所述未知文件的安全等级为被感染等级时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件；</p>
    <p>[0181]	当云端服务器判断用户端上传的文件为被感染的文件时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件。</p>
    <p>[0182]	在云端服务器查找相应被感染文件的安全文件时，需要根据文件日志信息获取安全文件的列表。比如，对于本发明实施例采用文件内容的MD5值对文件进行对应，那么因为对于一个文件，其感染后，感染前后的文件内容MD5值变化，则无法直接根据MD5值查找云端服务器存储的相应文件。比如对于用户端B的filel，file3, file4，其安全文件的文件内容MD5值为：</p>
    <p>[0183]	666666666666666666666666666666AA，</p>
    <p>[0184]	666666666666666666666666666666BB，</p>
    <p>[0185]	666666666666666666666666666666CC ；</p>
    <p>[0186]	其路径均为D:A\A。</p>
    <p>[0187]	感染后的相应的文件内容MD5值为：</p>
    <p>[0188]	666666666666666666666666666666DD，</p>
    <p>[0189]	666666666666666666666666666666EE，</p>
    <p>[0190]	666666666666666666666666666666FF ；</p>
    <p>[0191]其中，filel，file3	路径为 D:A\A，文件 file4 的路径为 E:B\B，由 D:A\A移动得到。那么根据扫描和监控用户端B得到的文件日志信息，可知道MD5值为666666666666666666666666666666DD对应的文件是D:A\A\filel，相应的安全版本的内容值为 666666666666666666666666666666AA ；</p>
    <p>[0192]	MD5 值为 666666666666666666666666666666EE 对应的文件是 D:A\A\file3 ;相应的安全版本的内容值为 666666666666666666666666666666BB ；</p>
    <p>[0193]	MD5 值为 666666666666666666666666666666FF 对应的文件是 D:A\A\file4，相应的安全版本的内容值为 666666666666666666666666666666CC。</p>
    <p>[0194]	那么可根据安全版本的MD5值在云端服务器查询相应的安全的filel、file3和file4，并下载给用户端B。在本实施例中，用户端获下载安全的文件时包括：</p>
    <p>[0195]	结合用户端ID和文件特征信息在云端服务器匹配获取相应的安全的文件。</p>
    <p>[0196]	即结合前述用户端ID和PATH (路径MD5) +TEXT (文件内容MD5) +VERSION (版本标 识）等形式。</p>
    <p>[0197]	步骤S260，用所述安全的文件替换用户端所述未知文件。</p>
    <p>[0198]	其中，还可将云端服务器确认安全的未知文件，加入安全的白名单，并记录其签名信息。</p>
    <p>[0199]	当用户端获取到被感染文件对应的安全版的文件时，即获取到该文件被感染之前上传至云端的安全的文件时，则用所述安全版的文件替换所述被感染的文件。</p>
    <p>[0200]	在本实施例中，用户端获取时包括：</p>
    <p>[0201]	结合用户端ID和文件特征信息在云端服务器匹配获取相应的安全的文件。</p>
    <p>[0202]当云端服务器不存在被感染文件相应的安全版本的文件时，则将所述被感染文件使用安全软件传统的修复方式修复，隔离或者删除。</p>
    <p>[0203]	其中，用所述安全的文件替换用户端所述未知文件包括：</p>
    <p>[0204]	步骤S30，当所述被感染的未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；</p>
    <p>[0205]	步骤S31，当获取到文件的操作权限后，将所述所述未知文件用相应安全的文件进行替换。</p>
    <p>[0206]	另外，用所述安全的文件进行替换时包括：</p>
    <p>[0207]	用户端通过将监控的文件变化信息上传至云端服务器，在云端服务器查找并获取距当前时间点最近的安全的文件，并用所述安全的文件将所述异常文件或者未知文件用相应安全的文件进行替换。</p>
    <p>[0208]	比如，用户端A的文件b. exe在2012-1-11日上传至云端时其MD5值为al，但是，用户端在2012-2-15日对b. exe的内容进行了修改，其MD5值是变为了 a2，那么将a2也上传至云端服务器，al和a2均为安全。而在2012-4-20日通过前述步骤发现b. exe中毒，那么可根据前述方法从云端查找并最近的b. exe的安全的文件，即云端服务器存储的2012-2-15的b. exe,然后将2012-2-15的b. exe替换当前被感染的文件b. exe。</p>
    <p>[0209]	另外，在本发明中，判断出未知文件被感染之后，还包括：</p>
    <p>[0210]	提示用户端是否允许对被感染的未知文件进行替换。</p>
    <p>[0211]	比如在判断出被感染的未知文件之后，在从云端服务器下载与所述被感染的未知文件相应的，被感染前的安全的文件之前，即提示用户端，是否允许下载安全版的文件并进行替换。</p>
    <p>[0212]	如果用户不允许，则可采用传统修复技术对异常文件进行修复。[0213]	在各个系统中，每个文件均存在其操作权限，比如windows文件中有：完全控制、修改、读取和运行、读取、写入等权限，还有文件被调用时的禁止修改的操作权限。那么本发明可通过权限获取驱动获取文件的操作权限。本发明中具体的权限获取技术方法较多，本发明不对其加以限制。</p>
    <p>[0214]	步骤270，扫描用户端文件，判断文件是否异常，并获取文件特征信息；</p>
    <p>[0215]	步骤280，如果异常，则根据所述文件特征信息从云端服务器获取与所述异常文件相应的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；</p>
    <p>[0216]	步骤290，用所述安全的文件替换用户端相应异常的文件。</p>
    <p>[0217]	其中步骤270、280和290基本与实施例I基本相似。其中扫描可与文件上传过程并行，也可异步执行。</p>
    <p>&#183;0218]	在步骤270中，对用户端文件的是否感染的扫描可采用用户端本身自带的传统杀毒软件使用的病毒特征库进行扫描，还包括使用通过云端服务器比对的云查杀引擎进行扫描。。在扫描的同时，获取文件的文件特征信息。在获取文件特征信息时也结合监控文件变化得到信息对扫描的文件特征信息进行处理，得到最终用于在云端服务器进行查询与所述异常文件相应的安全的文件特征信息。比如对于D: \A\f ilel，如果用户在上传D: \A\f ilel之后，将其在用户端的存储路径改变，将其名字改变比如改为file6，路径也更改，即E:\A\file6，那么本发明实施例中则监控filel的改变过程，而此时如果file6异常，也可知道file6对应的安全文件为原D:\A\filel。则可将该信息上传至云端服务器。</p>
    <p>[0219]	在本发明实施例中，当由用户端的杀毒引擎能够确认感染的文件，则将其上述文件特征信息发送至云端服务器。如果用户端的杀毒引擎不能判断文件是否异常，则可将其作为未知文件上传至云端服务器进行查杀，并将其上述文件特征信息也上传至云端服务器。</p>
    <p>[0220]	在步骤280中，对于异常文件，则根据由前述扫描及监控过程得到的文件特征信息，基于该信息在云端服务器中存储的文件中查找相应安全版本的文件，然后提供给用户端下载。当用户端下载与所述异常文件相应的安全的文件时，则转入步骤290用所述安全的文件替换用户端相应异常的文件。</p>
    <p>[0221]	其中，用所述安全的文件替换用户端相应异常文件包括：</p>
    <p>[0222]	步骤S291，当异常文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；</p>
    <p>[0223]	步骤S292，当获取到文件的操作权限后，将所述异常的文件用所述安全的文件进行替换。</p>
    <p>[0224]	在各个系统中，每个文件均存在其操作权限，比如windows文件中有：完全控制、修改、读取和运行、读取、写入等权限，还有文件被调用时的禁止修改的操作权限。那么本发明可通过权限获取驱动获取文件的操作权限。本发明中具体的权限获取技术方法较多，本发明不对其加以限制。</p>
    <p>[0225]	另外，在本发明中，判断出文件异常之后，还包括：</p>
    <p>[0226]	提示用户端是否允许对异常文件进行替换。</p>
    <p>[0227]	比如在判断文件异常之后，在从云端服务器下载与所述异常的文件相应的，未出现异常情况前的安全的文件之前即提示用户端，是否允许下载安全版的文件并进行替换。</p>
    <p>[0228]	如果用户不允许，则可采用传统修复技术对异常文件进行修复。</p>
    <p>[0229]	参照图3，其示出了本发明一种用户端文件的修复装置的结构示意图，包括：</p>
    <p>[0230]	感染扫描模块310，用于扫描用户端文件，判断文件是否异常，并获取文件特征信息；</p>
    <p>[0231]	安全文件获取模块320，用于如果异常，则根据所述文件特征信息从云端服务器获取与所述异常文件相应的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；</p>
    <p>[0232]	替换模块330，用于用所述安全的文件替换用户端相应异常的文件。 [0233]	所述替换模块包括：</p>
    <p>[0234]	替换单元，用于当异常文件存在操作权限限制时，通过权限获取驱动获取文件的操作权限。</p>
    <p>[0235]	其中，所述感染扫描模块可存在于用户端，也可存在于云端服务器。</p>
    <p>[0236]	另外，还包括替换提示模块，用于提示用户端是否允许对异常文件进行替换。</p>
    <p>[0237]	参照图4，其示出了本发明优选的一种用户端文件的修复装置的结构示意图，包括：</p>
    <p>[0238]	文件上传模块，所述文件上传模块包括：</p>
    <p>[0239]日志信息生成子模块410，用于针对每一用户端，扫描文件的文件特征信息，并结合对文件变化的监控，生成文件信息日志；</p>
    <p>[0240]	未知文件判断子模块420，用于将文件信息日志的文件特征信息与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件；</p>
    <p>[0241]	第一上传子模块430，用于如果存在未知文件，则通知用户端将所述未知文件上传至云端服务器；</p>
    <p>[0242]	第一判断子模块440，用于分析所述未知文件的安全等级，并进行记录。</p>
    <p>[0243]	优选的，还包括：</p>
    <p>[0244]	查找获取子模块S450，用于当所述未知文件的安全等级为异常等级时，则结合所述文件日志信息在云端服务器查找对应的安全的文件，并通知用户端下载所述安全的文件；</p>
    <p>[0245]	第一替换子模块S460，用于用所述安全的文件替换用户端所述未知文件。</p>
    <p>[0246]	感染扫描模块470，用于扫描用户端文件，判断文件是否异常，并获取文件特征信息；</p>
    <p>[0247]	安全文件获取模块480，用于如果异常，则根据所述文件特征信息从云端服务器获取与所述异常文件相应的安全的文件；其中，所述云端服务器中的安全的文件通过直接的方式对各用户端的各文件进行上传获得；</p>
    <p>[0248]	替换模块490，用于用所述安全的文件替换用户端相应异常的文件。</p>
    <p>[0249]	其中，所述未知文件判断子模块包括：</p>
    <p>[0250]	第一未知判断模块，用于将用户端当前生成的文件日志信息，与以前记录所述用户端的文件日志信息进行比较，判断是否存在云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息；[0251]	第二未知判断模块，用于如果存在所述第一未知文件日志信息，将所述第一未知文件日志信息中的文件特征信息，与云端服务器中记录的文件特征信息进行比较，判断是否存在未知文件。</p>
    <p>[0252]	其中，所述第一未知判断模块包括：</p>
    <p>[0253]	第二上传子模块，用于将用户端当前生成的文件日志信息上传至云端服务器；</p>
    <p>[0254]	第二判断子模块，用于将云端服务器当前接收的文件日志信息与云端服务器记录的对应所述用户端的文件信息日志进行比较，获取所述云端服务器记录的，对应所述用户端的文件日志信息中不存在的第一未知文件日志信息。</p>
    <p>[0255]	其中，第一上传子模块包括，</p>
    <p>[0256]	文件分片单元202，用于用户端接收云端服务器返回的分片策略，并根据所述分片策略，对所述待上传文件进行分片； </p>
    <p>[0257]	分片上传单元203，用于用户端以分片为单位向云端服务器进行文件上传；其中，如果不同的用户端发现同一待上传文件，则由各个用户端并行上传该同一待上传文件的不同分片。</p>
    <p>[0258]	其中，在存储文件日志信息时包括：</p>
    <p>[0259]	信息提取模块，用于以用户端文件路径、文件内容对应的特征值、文件版本的结构对文件特征信息进行结构化，获得结构化文件特征信息；</p>
    <p>[0260]	信息存储模块，用于根据所述文件的安全等级，对所述结构化文件特征信息进行安全等级标识；将标识完安全等级的结构化文件特征信息存入对应所述用户端的文件信息日志中。</p>
    <p>[0261]	其中，所述替换模块或第一替换模块包括：</p>
    <p>[0262]	权限获取单元，用于当所述异常文件或者所述被感染的未知文件存在操作权限限制时，通过调用权限获取函数，获取文件的操作权限；所述权限获取函数低于系统权限认证函数层；</p>
    <p>[0263]	替换单元，用于当获取到文件的操作权限后，将所述异常文件或者未知文件用相应安全的文件进行替换。</p>
    <p>[0264]	还包括替换提示模块，用于提示用户端是否允许对异常文件、和/或被感染的未知文件进行替换。</p>
    <p>[0265]	参照图5，其示出了本发明一种用户端文件的修复系统的结构示意图，包括：</p>
    <p>[0266]	各用户端和云端服务器，其中云端服务器包括云端服务器日志服务器和云端服务器文件服务器。</p>
    <p>[0267]	每个用户端可用于上传未知文件及文件日志信息，还可用于判断其文件是否感染。</p>
    <p>[0268]	云端服务器日志服务器可用于存储各用户端上传的文件日志信息，和与文件服务器中文件存在对应关系的文件特征信息。</p>
    <p>[0269]	云端服务器文件服务器可用于存储用户端上传的文件，和判定文件是否异常，并提供给安全文件给用户端下载。</p>
    <p>[0270]	具体模块功能如前方法实施例所述，在此不在加以详述。</p>
    <p>[0271]	对于系统实施例而言，由于其与方法实施例基本相似，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。</p>
    <p>[0272]	本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。</p>
    <p>[0273]	最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。</p>
    <p>[0274]	本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质（包括但不限于磁盘存储器、CD-ROM、光学存储器等）上实施的计算机程序产 品的形式。</p>
    <p>[0275]	本发明是参照根据本发明实施例的方法、设备（系统）、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。</p>
    <p>[0276]	这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。</p>
    <p>[0277]	这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。</p>
    <p>[0278]	尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。</p>
    <p>[0279]	以上对本发明所提供的一种用户端文件的修复方法和装置，进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102332071A?cl=zh">CN102332071A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月30日</td><td class="patent-data-table-td patent-date-value">2012年1月25日</td><td class="patent-data-table-td ">奇智软件（北京）有限公司</td><td class="patent-data-table-td ">发现疑似恶意信息、追踪恶意文件的方法及装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102360320A?cl=zh">CN102360320A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月30日</td><td class="patent-data-table-td patent-date-value">2012年2月22日</td><td class="patent-data-table-td ">奇智软件（北京）有限公司</td><td class="patent-data-table-td ">一种基于云架构的终端备份对象共享恢复方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US7836174">US7836174</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value"></td><td class="patent-data-table-td patent-date-value">2010年11月16日</td><td class="patent-data-table-td ">Commvault Systems, Inc.</td><td class="patent-data-table-td ">Systems and methods for grid-based data scanning</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103093149B?cl=zh">CN103093149B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年1月14日</td><td class="patent-data-table-td patent-date-value">2015年9月16日</td><td class="patent-data-table-td ">北京奇虎科技有限公司</td><td class="patent-data-table-td ">常用软件/文件感染后的修复方法及系统、修复服务器</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103095698A?cl=zh">CN103095698A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年1月10日</td><td class="patent-data-table-td patent-date-value">2013年5月8日</td><td class="patent-data-table-td ">北京奇虎科技有限公司</td><td class="patent-data-table-td ">客户端软件的修复方法、装置和通信系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103152424A?cl=zh">CN103152424A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年3月15日</td><td class="patent-data-table-td patent-date-value">2013年6月12日</td><td class="patent-data-table-td ">珠海市君天电子科技有限公司</td><td class="patent-data-table-td ">一种在云端自动控制解决方案的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103248695A?cl=zh">CN103248695A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年5月7日</td><td class="patent-data-table-td patent-date-value">2013年8月14日</td><td class="patent-data-table-td ">北京奇虎科技有限公司</td><td class="patent-data-table-td ">文件下载方法、系统及cdn中的服务器节点</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103248707A?cl=zh">CN103248707A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年5月22日</td><td class="patent-data-table-td patent-date-value">2013年8月14日</td><td class="patent-data-table-td ">北京奇虎科技有限公司</td><td class="patent-data-table-td ">文件访问方法、系统以及设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103309761A?cl=zh">CN103309761A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年5月31日</td><td class="patent-data-table-td patent-date-value">2013年9月18日</td><td class="patent-data-table-td ">深圳创维数字技术股份有限公司</td><td class="patent-data-table-td ">一种基于在线服务的自动纠错的方法和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103365996A?cl=zh">CN103365996A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年7月12日</td><td class="patent-data-table-td patent-date-value">2013年10月23日</td><td class="patent-data-table-td ">北京奇虎科技有限公司</td><td class="patent-data-table-td ">文件管理及处理方法、装置和系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013189214A1?cl=zh">WO2013189214A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年5月9日</td><td class="patent-data-table-td patent-date-value">2013年12月27日</td><td class="patent-data-table-td ">Beijing Qihoo Technology Company Limited</td><td class="patent-data-table-td ">一种用户端文件的修复方法和系统</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0021000000">G06F21/00</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F21/565">G06F21/565</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F17/30144">G06F17/30144</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F21/568">G06F21/568</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=HOGxBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F21/64">G06F21/64</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2012年12月5日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年1月30日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2015年12月2日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/c612a6f53461b1b17c3d/CN102810138A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E7%94%A8%E6%88%B7%E7%AB%AF%E6%96%87%E4%BB%B6%E7%9A%84%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%B3%95%E5%92%8C.pdf?id=HOGxBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0avQjfQAUNMGwIFf5IBLpSXVngOQ"},"sample_url":"https://www.google.com/patents/reader?id=HOGxBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>