<!DOCTYPE html><html><head><title>专利 CN103477333A - 能够控制无线通信功能的存储器系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="能够控制无线通信功能的存储器系统"><meta name="DC.contributor" content="和久津隆司" scheme="inventor"><meta name="DC.contributor" content="樱井秀一" scheme="inventor"><meta name="DC.contributor" content="伊藤晋朗" scheme="inventor"><meta name="DC.contributor" content="津曲康史" scheme="inventor"><meta name="DC.contributor" content="株式会社东芝" scheme="assignee"><meta name="DC.date" content="2011-9-16" scheme="dateSubmitted"><meta name="DC.description" content="根据一个实施例，一种存储器系统包括非易失性半导体存储器设备、控制器、存储器、无线通信功能部以及扩展寄存器。所述扩展寄存器能够定义无线通信功能部的无线通信功能。所述控制器处理第一命令以从所述扩展寄存器读取数据，以及处理第二命令以向所述扩展寄存器写入数据，并且所述扩展寄存器记录指定所述无线通信功能类型的第一信息，记录表示分配所述无线通信功能的所述扩展寄存器的区域的第二信息，并记录包括所述无线通信功能内容的第三信息。"><meta name="DC.date" content="2013-12-25"><meta name="DC.relation" content="CN:101895572:A" scheme="references"><meta name="DC.relation" content="CN:1464453:A" scheme="references"><meta name="DC.relation" content="US:20070061581:A1" scheme="references"><meta name="DC.relation" content="US:20070094504:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:103477333:A"><meta name="citation_patent_application_number" content="CN:201180068699"><link rel="canonical" href="https://www.google.com/patents/CN103477333A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN103477333A?cl=zh"/><meta name="title" content="专利 CN103477333A - 能够控制无线通信功能的存储器系统"/><meta name="description" content="根据一个实施例，一种存储器系统包括非易失性半导体存储器设备、控制器、存储器、无线通信功能部以及扩展寄存器。所述扩展寄存器能够定义无线通信功能部的无线通信功能。所述控制器处理第一命令以从所述扩展寄存器读取数据，以及处理第二命令以向所述扩展寄存器写入数据，并且所述扩展寄存器记录指定所述无线通信功能类型的第一信息，记录表示分配所述无线通信功能的所述扩展寄存器的区域的第二信息，并记录包括所述无线通信功能内容的第三信息。"/><meta property="og:title" content="专利 CN103477333A - 能够控制无线通信功能的存储器系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN103477333A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN103477333A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN103477333A&amp;usg=AFQjCNENfAhFghGDCo4zKqz8BS0Tru9LXQ" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/1996fdf38d26fbb9f75e/CN103477333A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/1996fdf38d26fbb9f75e/CN103477333A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN103477333A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN103477333A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN103477333A?cl=zh" style="display:none"><span itemprop="description">根据一个实施例，一种存储器系统包括非易失性半导体存储器设备、控制器、存储器、无线通信功能部以及扩展寄存器。所述扩展寄存器能够定义无线通信功能部的无线通信功能。所述控制器处理第一命令以从所述扩展寄存器读...</span><span itemprop="url">https://www.google.com/patents/CN103477333A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN103477333A - 能够控制无线通信功能的存储器系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN103477333A - 能够控制无线通信功能的存储器系统" title="专利 CN103477333A - 能够控制无线通信功能的存储器系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN103477333 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201180068699</td></tr><tr><td class="patent-bibdata-heading"> 专利合作条约 (PCT) 编号</td><td class="single-patent-bibdata">PCT/JP2011/071773</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2013年12月25日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年9月16日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2011年2月4日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/EP2671164A2?hl=zh-CN&amp;cl=zh">EP2671164A2</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2012105083A2?hl=zh-CN&amp;cl=zh">WO2012105083A2</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2012105083A3?hl=zh-CN&amp;cl=zh">WO2012105083A3</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2012105083A4?hl=zh-CN&amp;cl=zh">WO2012105083A4</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201180068699.X, </span><span class="patent-bibdata-value">CN 103477333 A, </span><span class="patent-bibdata-value">CN 103477333A, </span><span class="patent-bibdata-value">CN 201180068699, </span><span class="patent-bibdata-value">CN-A-103477333, </span><span class="patent-bibdata-value">CN103477333 A, </span><span class="patent-bibdata-value">CN103477333A, </span><span class="patent-bibdata-value">CN201180068699, </span><span class="patent-bibdata-value">CN201180068699.X, </span><span class="patent-bibdata-value">PCT/2011/71773, </span><span class="patent-bibdata-value">PCT/JP/11/071773, </span><span class="patent-bibdata-value">PCT/JP/11/71773, </span><span class="patent-bibdata-value">PCT/JP/2011/071773, </span><span class="patent-bibdata-value">PCT/JP/2011/71773, </span><span class="patent-bibdata-value">PCT/JP11/071773, </span><span class="patent-bibdata-value">PCT/JP11/71773, </span><span class="patent-bibdata-value">PCT/JP11071773, </span><span class="patent-bibdata-value">PCT/JP1171773, </span><span class="patent-bibdata-value">PCT/JP2011/071773, </span><span class="patent-bibdata-value">PCT/JP2011/71773, </span><span class="patent-bibdata-value">PCT/JP2011071773, </span><span class="patent-bibdata-value">PCT/JP201171773</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%92%8C%E4%B9%85%E6%B4%A5%E9%9A%86%E5%8F%B8%22">和久津隆司</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%A8%B1%E4%BA%95%E7%A7%80%E4%B8%80%22">樱井秀一</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BC%8A%E8%97%A4%E6%99%8B%E6%9C%97%22">伊藤晋朗</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%B4%A5%E6%9B%B2%E5%BA%B7%E5%8F%B2%22">津曲康史</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%E4%B8%9C%E8%8A%9D%22">株式会社东芝</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103477333A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103477333A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103477333A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (4),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (4),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201180068699&amp;usg=AFQjCNHE8GrRBrb-fuH5-r5FSzQ2EnLi0g"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D103477333A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNESmrZVI7JAe2EGmSPoG7YLhzZtrg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT132102008" lang="ZH" load-source="patent-office">能够控制无线通信功能的存储器系统</invention-title>
      </span><br><span class="patent-number">CN 103477333 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA128279021" lang="ZH" load-source="patent-office">
    <div class="abstract">根据一个实施例，一种存储器系统包括非易失性半导体存储器设备、控制器、存储器、无线通信功能部以及扩展寄存器。所述扩展寄存器能够定义无线通信功能部的无线通信功能。所述控制器处理第一命令以从所述扩展寄存器读取数据，以及处理第二命令以向所述扩展寄存器写入数据，并且所述扩展寄存器记录指定所述无线通信功能类型的第一信息，记录表示分配所述无线通信功能的所述扩展寄存器的区域的第二信息，并记录包括所述无线通信功能内容的第三信息。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(20)</span></span></div><div class="patent-text"><div mxw-id="PCLM57426862" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种存储器系统，包括:  非易失性半导体存储器；  配置为控制所述非易失性半导体存储器的控制器；  充当所述控制器的工作区域的存储器；  具有无线通信功能的无线通信模块；以及  将在所述存储器中提供的能够定义所述无线通信功能的扩展寄存器，  其中，所述控制器处理第一命令以从所述扩展寄存器读取数据，以及处理第二命令以向所述扩展寄存器写入数据，并且所述扩展寄存器记录:  指定所述无线通信功能的类型的第一信息，  表示被分配所述无线通信功能的所述扩展寄存器的区域的第二信息，以及  包括所述无线通信功能的内容的第三信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的系统,其中  所述第一和第二命令以块长度为单元执行读或写，并且当数据长度大于块长度时，所述第一和第二命令被发出多次。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的系统，其中  所述第二命令被配置为通过一个命令传输多个数据项。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求1所述的系统，其中  所述扩展寄存器包括用于写入自变量和用于所述无线通信功能的命令的数据端口。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求1所述的系统,其中  所述扩展寄存器记录用于所述无线通信功能的状态信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求1所述的系统,其中  所述扩展寄存器记录表示用于所述无线通信功能的命令的执行情况的信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求1所述的系统,其中  所述扩展寄存器包括用于获取作为用于所述无线通信功能的命令的执行结果的响应的数据端口。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求1所述的系统，其中所述系统符合至少一个SD卡规范。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求8所述的系统，其中所述系统能够被插入到无无线通信功能的数字钢相机。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求9所述的系统，其中所述无线通信模块符合IEEE802.lib、Ilg和Iln标准中的至少一个。</div>
    </div>
    </div> <div class="claim"> <div num="11" class="claim">
      <div class="claim-text">11.一种存储器系统包括:  连接到主机的存储器设备，包括:  非易失性半导体存储器；  配置为控制所述非易失性半导体存储器的控制器；  充当所述控制器的工作区域的存储器；  具有无线通信功能的无线通信模块；以及  将在所述存储器中提供的能够定义所述无线通信功能的扩展寄存器，  其中所述扩展寄存器记录:指定所述无线通信功能的类型的第一信息，  表示被分配所述无线通信功能的所述扩展寄存器的区域的第二信息，以及  包括所述无线通信功能的内容的第三信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求11所述的系统，其中  在启动时，所述主机  发出第一命令以读取所述扩展寄存器中记录的所述第一和第二信息中的至少一个，  当所述主机支持所述无线通信功能时，启用相应于所述无线通信功能的所述主机的功&#20489;泛。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求11所述的系统，其中  当所述主机发出用于所述无线通信功能的命令给所述存储器设备时，所述主机发出第二命令以将关于用于所述无线通信功能的所述命令的信息写入到所述扩展寄存器的第一区域。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求1 3所述的系统，其中  所述控制器将表示用于所述无线通信功能的所述命令是否已经被接收的信息记录在所述扩展寄存器的第二区域中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15.根据权利要求14所述的系统，其中  所述主机发出所述第一命令以读取记录在所述第二区域中的信息，并且确认所述存储器设备是否已经接收到用于所述无线通信功能的所述命令。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16.根据权利要求15所述的系统，其中  所述控制器将用于所述无线通信功能的所述命令的响应状态信息记录在所述扩展寄存器的所述第二区域中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17.根据权利要求16所述的系统，其中  所述主机发出所述第一命令以从所述第二区域读取响应状态信息，并且确认用于所述无线通信功能的命令是否已经被处理。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.根据权利要求17所述的系统，其中  所述主机相继删除所述第二区域的信息项中已经完成处理的信息项。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19.根据权利要求11所述的系统，其中所述系统符合SD卡规范中的至少一个。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20.根据权利要求19所述的系统，其中所述无线通信模块符合IEEE802.1lbUlg和Iln标准中的至少一个。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES64388978" lang="ZH" load-source="patent-office" class="description">
    <p>能够控制无线通信功能的存储器系统</p>
    <p>[0001]	相关申请的交叉引用</p>
    <p>[0002]	本申请基于并且要求于2011年2月4日提交的申请号为2011-023218和于2011年3月2日提交的申请号为2011-045614的在先日本专利申请的优先权权益，通过引用将它们的所有内容合并在此。</p>
    <p>技术领域</p>
    <p>[0003]	在此所描述的实施例一般地涉及具有无线通信功能的存储器系统。</p>
    <p>背景技术</p>
    <p>[0004]	具备无线通信功能和无线局域网功能的安全数字(secure digital, SD)卡被开发。在这种卡中，如果在该SD卡中包括独特的无线功能并且能够执行仅对应于该独特的附加功能的控制已经是足够的。然而，无线通信功能范围很广，并且由此如果配置为控制所有无线通信功能的定义被给出，则命令的地址空间就变得不足。</p>
    <p>附图说明</p>
    <p>[0005]	图1是不出一种应用于实施例的存储器系统的不意框图。</p>
    <p>[0006]	图2是示出图1所示的存储器系统的固件示例的框图。</p>
    <p>[0007]	图3是示出扩展寄存器的读命令示例的框图。</p>
    <p>[0008]	图4是示出依据读命令执行的扩展寄存器的读操作的时序图。</p>
    <p>[0009]	图5是示出依据读命令执行的数据端口的读操作的时序图。</p>
    <p>[0010]	图6是示出扩展寄存器的写命令示例的框图。</p>
    <p>[0011]	图7A，7B和7C每个是示出屏蔽寄存器操作的视图。</p>
    <p>[0012]	图8是示出依据写命令执行的扩展寄存器的写操作的时序图。</p>
    <p>[0013]	图9是示出依据写命令执行的数据端口的写操作的时序图。</p>
    <p>[0014]	图10是示出扩展寄存器的首页中设置的信息域的示例的视图。</p>
    <p>[0015]	图11是示出具有无线局域网(LAN)的SD卡的使用示例的框图。</p>
    <p>[0016]	图12是示出存储器设备具备的接口功能的视图。</p>
    <p>[0017]	图13是示出W1-Fi SD卡和主机设备的配置示例的视图。</p>
    <p>[0018]	图14是示出该SD卡和主机设备的另一个配置示例的视图。</p>
    <p>[0019]	图15是示出依据读命令(CMD48)或者写命令(CMD49)访问的扩展寄存器的示例的视图。</p>
    <p>[0020]	图16是示出扩展寄存器被用于W1-Fi SD卡的情况的示例的视图。</p>
    <p>[0021]	图17是示出当W1-Fi SD寄存器被分配到扩展寄存器的页时，量超过512字节的数据被读/写情况的示例的视图。</p>
    <p>[0022]	图18是示出扩展寄存器被用于W1-Fi SD卡情况的另一个示例的视图。</p>
    <p>[0023]	图19是示出扩展寄存器被用于W1-Fi SD卡情况的另一个示例的视图。[0024]	图20是示出扩展寄存器被用于W1-Fi SD卡情况的另一示例的视图。</p>
    <p>[0025]	图21是示出扩展寄存器被用于W1-Fi SD卡情况的扩展寄存器的视图。</p>
    <p>[0026]	图22是示出W1-Fi SD卡命令写寄存器的配置示例的视图。</p>
    <p>[0027]	图23是示出将被写到W1-Fi SD卡命令写寄存器的命令列表的视图。</p>
    <p>[0028]	图24是示出将被写到该W1-Fi SD卡命令写寄存器的命令列表的视图。</p>
    <p>[0029]	图25是示出将被写到该W1-Fi SD卡命令写寄存器的命令列表的视图。</p>
    <p>[0030]	图26是示出W1-Fi SD卡状态寄存器的配置示例的视图。</p>
    <p>[0031]	图27是示出W1-Fi SD卡状态寄存器的配置示例的视图。</p>
    <p>[0032]	图28是示出W1-Fi SD卡命令响应状态寄存器的配置示例的视图。</p>
    <p>[0033]	图29是示出W1-Fi SD卡命令响应状态寄存器的配置示例的视图。</p>
    <p>[0034]	图30是示出W1-Fi SD卡响应数据寄存器的配置示例的视图。</p>
    <p>[0035]	图31是示出W1-Fi SD卡ID列表寄存器的配置示例的视图。</p>
    <p>[0036]	图32是示出W1-Fi SD卡SSID历史寄存器的配置示例的视图。</p>
    <p>[0037]	图33是示出W1-Fi SD卡配置信息的配置示例的视图。</p>
    <p>[0038]	图34是示出通过使用写命令(CMD49)发出的W1-Fi SD卡命令的情况的时序图。</p>
    <p>[0039]	图35是示出通过使用多个写命令(CMD49)发出W1-Fi SD卡命令的情况的时序图。</p>
    <p>[0040]	图36是示出包括在由一个写命令(CMD49)发出的数据内的多个W1-Fi SD卡命令情况的时序图。</p>
    <p>[0041]	图37是示出通过使用读命令(CMD48)从W1-Fi SD卡11获取数据的情况的时序图。</p>
    <p>[0042]	图38是示出通过使用多个读命令(CMD48)获取W1-Fi SD卡的数据的情况的时序图。</p>
    <p>[0043]	图39是示出由W1-Fi SD卡支持的应用示例的视图。</p>
    <p>[0044]	图40是示出在主机设备启动时将要被执行的操作的流程图。</p>
    <p>[0045]	图41是示出每个应用的状态转换的视图。</p>
    <p>[0046]	图42是示出无线局域网的状态转换的视图。</p>
    <p>[0047]	图43是示出W1-Fi SD卡中的目录配置的视图。</p>
    <p>[0048]	图44是示出W1-Fi SD卡的命令处理流程的视图。</p>
    <p>[0049]	图45是示出W1-Fi SD卡的设定流程的视图。</p>
    <p>[0050]	图46是示出P2P应用的流程的视图。</p>
    <p>[0051]	图47是示出服务器上传应用的流程的视图。</p>
    <p>[0052]	图48是示出P2P应用中发送方侧主机的“文件列表”产生处理和文件传送处理的流程的视图。</p>
    <p>[0053]	图49是示出P2P应用中接收方侧主机的文件选择处理和文件获取处理的流程的视图。</p>
    <p>[0054]	图50是示出命令响应的流程的视图。</p>
    <p>发明内容</p>
    <p>[0055]	一般地，根据一个实施例，一种存储器系统包括非易失性半导体存储器设备、控制器、存储器、无线通信功能部和扩展寄存器。所述控制器控制所述非易失性半导体存储器设备。所述存储器充当所述控制器的工作区域。无线通信模块具有无线通信功能。所述扩展寄存器在所述存储器中被提供，并且可以定义所述无线通信功能。所述控制器处理第一命令以从所述扩展寄存器读取数据，以及第二命令以向所述扩展寄存器写入数据，并且所述扩展寄存器记录指定无线通信功能类型的第一信息，以及表示分配所述无线通信功能的所述扩展寄存器的区域的第二信息，以及包括所述无线通信功能的内容的第三信息。</p>
    <p>[0056]	在近年来，基于无线通信的数据通信在各类电子设备(尤其是便携式数字设备)之间启用。各类电子设备包括个人计算机、例如被称为个人数字助理(PDA)的便携式信息终端、蜂窝电话、便携式音频设备、数码相机等等。</p>
    <p>[0057]	如果通过无线通信的方式在这些电子设备之间启用数据通信，不需要使用电缆的连接，并且由此可以提高方便性。特别地，随着无线局域网系统的扩张，无线局域网系统已经被引入作为存储器的SD卡中，该存储器不仅在个人计算机中以及内置设备的应用中，还在数码相机等中。</p>
    <p>[0058]	为了实现SD卡中的这种功能，除了闪存存储器外，还需要实现在SD存储器卡中诸如配置为物理连接SD卡至主机、天线、高频处理部(配置为执行无线信号的传送/接收的处理部)、基带处理部(配置为处理基带信号的处理部)的接口的构成元件等。</p>
    <p>[0059]	在这种具备无线局域网功能的SD卡中，配置为控制所述无线局域网功能的程序依赖于SD卡制造商的实现，并且因此不是唯一确定的。更进一步，怎样实现控制程序是存在问题的。</p>
    <p>[0060]	进一步，也可以想象的是SD卡具备除了无线局域网功能以外的通信功能。在这个示例中，在没有检查SD卡具备的功能类型的装置的情况下，主机不能使用SD卡的该功能。</p>
    <p>[0061]	因此，对于作为存储器广泛地在例如数码照相机等中使用的SD卡，该实施例呈现用于掌握除原始存储器功能以外的扩展功能的装置。更进一步，该实施例呈现用于除了原始存储器功能以外的功能的控制程序。特别地，在SD存储器的命令系统中，无线局域网等的控制被启用。由此，提供一种SD卡，其中并入与充当主机的数字设备(例如数码相机)有高度密切关系的无线功能或类似功能。</p>
    <p>[0062]	因此，在该实施例中，在SD卡中提供由多个页面组成的扩展寄存器，并且通过使用命令CMD48或者CMD49 (它们是SD存储器的规范命令中的一个)启用扩展寄存器的读或写。命令CMD48是配置为从以块为单元的目标寄存器读取数据的命令，而命令CMD49是配置为向以块为单元的目标寄存器写入数据的命令。扩展寄存器具有例如配置为表示由SD卡拥有的功能的页面，配置为控制由SD卡拥有的通信功能的页面，以及被用于传递通信对象的数据的页面。</p>
    <p>[0063](实施例)</p>
    <p>[0064]	以下，将参考附图描述实施例。</p>
    <p>[0065]	图1示例性示出根据该实施例的存储器系统。</p>
    <p>[0066]	存储器系统由诸如SD卡的存储器设备11和主机20构成。存储器设备11也被称作SD卡。进一步，主机20也被称作主机设备。</p>
    <p>[0067]	当存储器设备11连接到主机20时，存储器设备11接收供电以运行，并且相应于来自主机20的访问执行处理。存储器设备11包括卡控制器11a。[0068]	例如，卡控制器Ila由主机接口 12、CPU13、只读存储器(ROM) 14、随机访问存储器(RAM) 15、缓存器16、无线接口 17a以及存储器接口 17b构成。它们通过总线彼此连接。例如，NAND闪存存储器18连接到存储器接口 17b。充当扩展功能部的无线局域网信号处理部19a连接到无线通信接口 17a。配置为传送/接收高频信号的天线ATa连接到无线局域网信号处理部19a。</p>
    <p>[0069]	应当注意的是，扩展功能部不限于无线局域网信号处理部19a，并且有可能通过增加其他无线通信信号处理部1%以及连接无线通信信号处理部19b到扩展功能部的天线ATb构成多功能SD卡。无线局域网信号处理部19a基于例如W1-Fi (注册商标)控制无线通信功能，并且无线通信信号处理部19b基于例如TransferJet (注册商标)控制邻近无线通信功能。</p>
    <p>[0070]	主机接口 12执行卡控制器Ila和主机12之间的接口处理。</p>
    <p>[0071]	另一方面，无线通信接口 17a执行卡控制器Ila和无线局域网信号处理部19a或者无线通信信号处理部19b之间的接口处理。存储器接口 17b执行卡控制器Ila和NAND闪存存储器18之间的接口处理。</p>
    <p>[0072]	CPU13是配置为管理整个存储器设备11的操作的单元。配置为控制CPU13的程序通过使用存储在R0M14中的固件(控制程序等)或者通过将固件载入RAM15执行预定处理。也就是，CPU13在RAM18上创建各种表和扩展寄存器(这将在之后描述)，接收来自主机20的写命令、读命令或者擦除命令以访问NAND闪存存储器18上的区域，并且通过缓存器16控制数据传输处理。</p>
    <p>[0073]	R0M14在其中存储固件(例如控制程序)以由CPU13使用。RAM15被用作CPU13的工作区域，并且在其中存储控制程序、各中表以及之后将被描述的扩展寄存器。</p>
    <p>[0074]	当从主机20发送的数据将被写到例如NAND闪存存储器18中时，缓冲器16临时地在其中存储给定量的数据(例如，一个页面的数据)，并且，当从NAND闪存存储器18中读的数据将被发送到主机20时，缓冲器16临时地在其中存储给定量的数据。进一步，缓冲器16能够依靠通过缓冲器16执行控制来异步地控制SD总线接口和后端。</p>
    <p>[0075]	NAND闪存存储器18由例如叠栅结构的存储器单元或者MONOS结构的存储器单元构成。</p>
    <p>[0076]	在无线局域网信号处理部19a中，执行无线局域网的信号处理。通过无线通信接口 17a执行控制。</p>
    <p>[0077]	作为主机20，能够使用例如数码相机、蜂窝电话、个人计算机等。主机20由主机控制器21、0?似2、1?0123、&#29376;124和例如硬盘25(包括330)构成。这些通过总线彼此连接。</p>
    <p>[0078]	CPU22控制整个主机。R0M23在其中存储CPU22运行所需的固件。尽管RAM24被用作例如CPU22的工作区域，能够由CP U22执行的程序也被在此加载以执行。硬盘25保存各种数据项。在存储器设备11连接到主机控制器21的状态下，主机控制器21执行它自身与存储器设备11之间的接口处理。更进一步，主机控制器21依据来自CPU22的指令，发布各种命令，这将在以下被描述。</p>
    <p>[0079](固件的配置)</p>
    <p>[0080]	图2示出存储在存储器设备11的R0M14中的固件的功能配置的示例。这些功能由软件以及硬件项(例如构成控制器Ila的CPU13等)组合实现。固件由例如命令处理部14a、闪存存储器控制器14b、扩展寄存器处理部14c以及功能处理程序14d构成。当存储器设备11被激活时，扩展寄存器处理部14c创建RAM15中的扩展寄存器31。扩展寄存器31是虚拟寄存器，并且启用定义扩展功能。</p>
    <p>[0081](扩展寄存器的配置)</p>
    <p>[0082]	如图2所示，扩展寄存器31由例如八个页面构成。一个页面由512字节构成。为了访问以一字节为单元的512字节的扩展寄存器，需要至少9位的地址，为了访问八个页面，需要至少3位的地址。通过总共12位的地址，使扩展寄存器的所有空间是可访问的。尽管512字节是几乎所有主机可以支持的访问单元，但访问单元并不限于512字节，并且可以比512字节更长。当扩展寄存器31由长位长度的地址域构成时，一些更低的位被用作访问单元，并且剩余的更高位被用来选择多个页面中的一个。</p>
    <p>[0083]	使512字节成为一个单元的原因是以以下这种方式进行配置:大量存储器卡主机控制器通过使用作为一个单元的一个块(=512字节)来执行读/写传输。尽管与无线局域网兼容的主机控制器能够执行以一字节为单元的读/写，但并不是所有的主机控制器都支持以上读/写。为了启用大多数主机控制器来控制扩展功能，如果访问能在512字节的单元中执行，这会是很方便的。</p>
    <p>[0084]	为了执行扩展功能的即插即用操作，八个页面(页面O至页面7)中的页面O是配置为记录一般信息域的区域。将在之后描述一般信息域的细节。在页I至页7中，定义配置为控制扩展功能的寄存器。在页O中可以容易地指定一个位置，并且因此页O是适合于记录一般信息域的位置，但是将要记录一般信息域的该页不一定限制为页0，并且在指定页面中的位置能够定义为配置为描述一般信息域的位置。</p>
    <p>[0085]	对于扩展寄存器的读/写，使用以下定义的专用读/写命令。这些命令的每个具有第一操作模式和第二操作模式，在第一操作模式中执行扩展寄存器的读/写，以及第二操作模式，在第二操作模式中配置数据端口。</p>
    <p>[0086](扩展寄存器的读命令(CMD48))</p>
    <p>[0087]	图3示出扩展寄存器读命令(CMD48)的域配置的示例。“S”表示命令的起始位，“T”是表示传输方向的位，以及“index”表示命令的序号。“RS”(寄存器选择)表示扩展寄存器31中的页面，并且“0FS”，表示所选择的页面中数据的位置(自页面头的偏移)。通过使用3位的“RS”和9位的“0FS”，相应于512字节的扩展寄存器的8个页面的空间能够被指定在一字节的单元内。更具体的，在所选择的扩展寄存器中的读起始位置是由“RS”和“ OFS ”指定的。</p>
    <p>[0088]	“LEN”表示数据长度。512字节的扩展寄存器中用于读取所需的有效数据长由9位的LEN域指定。</p>
    <p>[0089]	“CRC7”表示循环冗余校验码，并且“E”表示命令的末尾位。进一步，“rsv”表示空闲位。</p>
    <p>[0090](扩展寄存器的读命令，第一操作模式)</p>
    <p>[0091]图4示出将在第一操作模式下执行的扩展寄存器的读操作的示例。</p>
    <p>[0092]	如图4所示，接收来自主机20的命令(CMD48)时，存储器设备11向主机20返回响应(Rl)，并且，随后从扩展寄存器31中读取512字节的数据块。</p>
    <p>[0093]	更具体地，通过命令(CMD48)的自变量，即通过“RS”和“0FS”，指定扩展寄存器中的页面以及在页面中要被读的数据的位置，并且由“LEN”指定数据长度。在以上描述的方式下，指定的扩展寄存器中的数据被设置为512字节数据块的头，并且被读取。在512字节数据块的数据项中，具有超过由“LEN”指定的数据长度的数据长度的数据项变为无效数据项。CRC码被添加到数据块的最后部分以使校验数据是否已经被正确地接收(通过包括无效数据来执行数据的校验)成为可能。从头排列有效数据项，并且因此主机20不必为了查找有效数据而执行诸如数据移位或者类似的操作。</p>
    <p>[0094](扩展寄存器的读命令，第二操作模式)</p>
    <p>[0095]	图5示出在第二操作模式中执行的数据端口读操作的示例。</p>
    <p>[0096]	接收命令(CMD48)时，存储器设备11返回响应(Rl)，并且随后返回512字节的数据块。</p>
    <p>[0097]	通过命令的自变量“RS”和“0FS”，指定扩展寄存器的所选择的页面中的位置。尽管可以给数据端口分配多个字节，但一个字节对于数据端口是足够的，并且因此，在图5中示出“LEN=1”(长度为I)的情况下数据端口的示例。也就是，如果数据端口仅占有扩展寄存器映射中的一个字节地址就是足够的。可以从分配给这个数据端口的设备中读取一个块(512字节单元)的数据。也就是，可以一次读取一个块(512字节单元)的数据。被读取的数据保存在例如缓冲器16中，并且随后由主机20读取。</p>
    <p>[0098]	当随后读取相同的数据端口时，可以读取后续的512字节数据。从数据端口读取数据的位置可以通过扩展功能的规范来自由地定义。关于数据端口控制，可以通过在例如扩展寄存器上定义控制寄存器来执行控制。CRC码被添加到512字节数据块的最后部分，以使得可能校验数据是否已经被正确地接收。</p>
    <p>[0099](扩展寄存器的写命令(CMD49))</p>
    <p>[0100]	图6示出扩展寄存器的写命令的示例。在写命令(CMD49)中，与读命令(CMD48)相同的部分由相同的参考符号表示。写命令和读命令由“index”相互区分。通过使用3位的“RS”和9位的“0FS”，指定扩展寄存器中的页以及所选择的页中的数据位置。将要写到512字节扩展寄存器的数据的长度由9位的“LEN”域指定。从而，有可能将512字节内的任意数据长度(字节单元)的数据写到扩展寄存器的任意页和位置。</p>
    <p>[0101]	在命令的自变量中，向写命令(CMD49)提供屏蔽寄存器。也就是，“Mask”表示8位长的屏蔽寄存器。通过屏蔽寄存器，变得有可能执行以一位为单元的一字节的数据写入操作以及将数据仅写入指定位。从而，在一字节内的位操作中，不必执行读-修改-写操作。</p>
    <p>[0102]	当数据长度是一字节时，即在“LEN=0” (长度为I)的情况下，屏蔽寄存器变得有效。对于具有数据“I”的屏蔽寄存器“Mask”的位，数据被写入到该位，并且对于具有数据“O”的屏蔽寄存器“Mask”的位，保留已经设定的值。</p>
    <p>[0103]	也就是，当假设扩展寄存器保存图7A所示数据时，如果屏蔽寄存器的数据是如图7B所示的，通过执行写命令，数据被写到如图7C所示的具有数据“ I ”的屏蔽寄存器的位中，并且在具有数据“O”的位中，保留原始数据。从而，可以仅重写期望的位而不执行读-修改-写操作。由“χ”表示的各部分示出已经写入新数据的位。</p>
    <p>[0104]	进一步，当能够由一单独装置提供更长的屏蔽数据时，甚至在LEN大于I (LEN&gt;1)的情况下，尽管启用屏蔽写，但在图6所示的示例中，屏蔽数据被分配给命令自变量，因此使用8个位。[0105](扩展寄存器的写命令，第一操作模式)</p>
    <p>[0106]	图8示出在第一操作模式下将要被执行的扩展寄存器的写操作的示例。</p>
    <p>[0107]	接收命令(CMD49)时，存储器设备11返回响应(Rl)并且随后接收512字节的数据块。</p>
    <p>[0108]	存储器设备11返回表示数据块是否已经被正确接收的CRC码至主机20。随后，存储器设备11返回表示忙状态的信息，直到完成命令的处理，并且向主机20通知主机20可以发出下一命令的时机。数据块被保存在缓冲器16中。</p>
    <p>[0109]	在命令处理中，扩展寄存器中的页面和位置由命令的自变量“RS”和“0FS”指定，并且数据长度由“LEN”指定。在缓冲器16所保存的数据块中，每个具有由“LEN”指定的长度的数据项被从头写入到扩展寄存器。在具有超过由“LEN”所指定数据长度的长度的数据块中的数据作为无效数据而被丢弃。</p>
    <p>[0110]	通过从数据块的头排列有效数据项，对于主机系统而言不必要执行在数据块的中间排列有效数据项的操作。</p>
    <p>[0111](扩展寄存器的写命令，第二操作模式)</p>
    <p>[0112]	图9示出在第二模式下将要被执行的写入数据端口的操作的示例。</p>
    <p>[0113]	接收命令(CMD49)时，存储器设备11返回响应(Rl)并且随后接收512字节的数据块。</p>
    <p>[0114]	存储器设备11返回表示数据块是否已经被正确接收的CRC码至主机。随后，存储器设备11返回表示忙状态的信息，直到完成命令的处理，并且向主机20通知主机20可以发出下一命令的时机。在缓冲器16中保存数据块。</p>
    <p>[0115]	在命令处理中，扩展寄存器中的页面和位置由命令的自变量“RS”和“0FS”指定，并且一字节(LEN = O)的数据端口由“LEN”指定。尽管可以给数据端口分配多个字节，但一个字节对于数据端口是足够的，并且因此图9示出“LEN = O” (长度是I)的情况下的数据端口的示例。数据端口仅占有扩展寄存器映射上的一字节地址就是足够的。可以将缓冲器16中所保存的一个块(512字节单元)的数据写到分配给这个数据端口的特定设备。也就是，可以一次写入一个块的数据。</p>
    <p>[0116]	当随后写入相同的数据端口时，后续的512字节数据能够被写至分配了数据的设备中。传递数据端口的数据的位置可以由扩展功能的规范来自由地定义。对于数据端口控制，可以由例如在扩展寄存器上定义控制寄存器来执行控制。</p>
    <p>[0117](页面O中的信息域的使用示例)</p>
    <p>[0118]	图10示出扩展寄存器31的页面O中所示的信息域的示例。通过使用信息域，使主机20可以指定配置为控制扩展功能的驱动器，当添加扩展功能时，主机系统有可能容易地使用扩展功能，并且实现即插即用。</p>
    <p>[0119]	以下将参考图10描述由标准主机驱动器处理的顺序示例。</p>
    <p>[0120](结构修改)</p>
    <p>[0121]	结构修改是配置为定义扩展寄存器31的页面O的格式的修改。当新的信息被添加到设备信息域时，通过更新结构修改表示保存哪个版本的信息域。前一版本的主机驱动器忽略新的域。</p>
    <p>[0122](数据长度)[0123]	关于数据长度，示出页面O中记录的有效的数据长度。</p>
    <p>[0124](扩展功能的数量(=N))</p>
    <p>[0125]	扩展功能的数量表示由设备支持的扩展功能的数量。在启动时，主机驱动器重复地检查扩展功能的驱动器安装的次数是否与支持的功能的数量相应。</p>
    <p>[0126](设备I功能识别码)</p>
    <p>[0127]	当该码被设置为设备I的功能识别码时，其表示可以使用标准驱动器。当OS支持标准驱动器时，设备能够无需安装专用驱动器而被使用。当安装专用驱动器时，优选使用专用驱动器。在非标准功能的情况下，向该域设置“O”。在这种情况下，该功能仅由专用驱动器控制。</p>
    <p>[0128](设备I制造商标识信息，设备I功能标识信息)</p>
    <p>[0129]	设备I的制造商标识信息以及设备I功能标识信息中的每个是配置为指定专用驱动器的信息，并且，在这些域的每个域中，通过使用例如ASCII字符串描述制造商的名字、经销商的名字或者扩展功能的标识信息。根据这些信息项，主机驱动器检查设备I的专用驱动器是否被安装。</p>
    <p>[0130]	作为功能标识信息，通过使用例如ASCII字符串描述设备、修改等等的模型数量。</p>
    <p>[0131](下一设备的起始地址)</p>
    <p>[0132]	下一设备的起始地址表示页面O中的地址，在页面O中，描述下一设备的设备信息。当主机系统不支持该设备时，该设备不能被使用，并且因此检查下一设备。在这之后的域是可变长度，并且因此对该位置设置定义。</p>
    <p>[0133](设备I地址指针I至X，长度域I至X)</p>
    <p>[0134]	设备I地址指针I至X以及长度域I至X表示能够为一个功能定义多个扩展寄存器区域。在下面列举地址和长度。长度域不一定是不可或缺的信息项，并且可以被省略。</p>
    <p>[0135](设备I地址指针I	(起始地址)，长度I)</p>
    <p>[0136]	由设备I使用的扩展寄存器的第一个区域、在扩展寄存器的页面I至7的空间中的起始地址以及使用的扩展寄存器区域的大小由设备I地址指针I表示。</p>
    <p>[0137]	也就是，一个或多个扩展寄存器区域可以被分配给一个设备，并且地址指针表示除页面O以外任意扩展区域的位置(起始地址)。长度表示占用具有开始地址处指针的扩展寄存器的大小。</p>
    <p>[0138](设备I地址指针2	(起始地址)，长度2)</p>
    <p>[0139]	被分配给设备I的扩展寄存器的第二区域内的位置和区域大小由设备I地址指针2表示。由此，启用应用程序，在该应用程序中，例如尽管标准驱动器仅在第一区域内执行控制，专用驱动器被启用通过使用第一区域和第二区域有效地执行控制。</p>
    <p>[0140](设备I地址指针X	(起始地址)，长度X)</p>
    <p>[0141]	被分配给设备I的第X区域的位置和区域大小由设备I地址指针X表示。</p>
    <p>[0142]	如上所述，能够在扩展寄存器中定义多个区域。区域以彼此不重叠的形式排列。通过使用长度信息可以检查区域之间是否重叠。</p>
    <p>[0143]	当附加域变得必要时，在此后额外定义附加域。不能够识别新域的主机读取可识别的域，并且忽略附加域。通过使用上述(下一设备的开始地址)域可以执行跳过。</p>
    <p>[0144](无线LAN兼容SD卡)[0145]	图11示出具有无线通信功能的存储器设备(SD卡)11的使用示例。存储器设备11被安装在例如数码相机51或者52、服务器53、个人计算机54以及蜂窝电话55内(其中每个作为主机)。</p>
    <p>[0146]	通过将具有无线通信功能的存储器设备11与数码相机51 &#8212;同使用，存储器设备11可以向无线通信网络上的其他相机52传送摄像数据并且从其他相机52接收数据。进一步，存储器设备11可以通过无线通信网络将自身连接到例如外部服务器53，并且从数码相机51向服务器53传输摄像数据。更进一步，存储器设备11可以通过无线通信网络将自身连接到诸如个人计算机54、蜂窝电话55等，并且从数码相机51向个人计算机54或者蜂窝电话55传输摄像数据。</p>
    <p>[0147]	图12示出由存储器设备11拥有的接口功能。</p>
    <p>[0148]	具有无线通信功能的存储器设备11还包括充当与例如配置为控制存储器设备11的作为主机设备的数码相机51间接口的接口功能，以及配置为在数码相机51与诸如相机52、服务器53、个人计算机54、电视机56、打印机57等一些其他电子设备之间执行无线局域网连接的网络接口的功能。</p>
    <p>[0149]	前述主机接口(卡接口)12具有依据由SDA (SD协会)标准化的“SD规范部分I ”以及“SD规范部分2”通过FAT32访问(读/写)卡中数据的功能，以及访问具有无线通信功能的卡特有的寄存器(例如W1-Fi SD寄存器)的功能。在此，对于访问W1-Fi SD寄存器，使用读命令(CMD48)以及写命令(CMD49)。如前所述，读命令(CMD48)是配置为从以块为单元的目标寄存器中读取数据的命令，并且写命令(CMD49)是配置为向以块为单元的目标寄存器中写入数据的命令。</p>
    <p>[0150]	在该实施例中，例如，主机20向存储器设备11发出W1-Fi SD卡特有的命令。可替换地，通过使用写命令(CMD49)，主机20从存储器设备11接收W1-Fi SD卡特有的状态或者响应，以便写W1-Fi SD卡特有的数据。可替换地，该实施例特征在于使用读命令(CMD48)以便读取W1-Fi SD卡特有的数据。</p>
    <p>[0151]	在无线通信接口 17a中，假设在物理层中支持IEEE802.1lb / g / n，在网络层中支持IPv4以及IPv6，在传输层中支持TCP，在表示层中支持SSL / TLS，并且在应用层中支持HTTP和FTP。更进一步，无线接口 17a包括在一些情况下与家用设备通信的数字生活网络联盟(DLNA)功能。</p>
    <p>[0152]	存储器设备11包括两个接口，据此，可以向支持HTTP协议的服务器或设备传送由数码相机创建的摄像数据(以JPEG或者RAW格式)以及动画数据(以MPEG-2TS或者MP4格式)或者从支持HTTP协议的服务器或设备接收由数码相机创建的摄像数据(以JPEG或者RAW格式)以及动画数据(以MPEG-2TS或者MP4格式)。更进一步，可以通过使用支持DLNA的服务器或者设备再现摄像数据以及动画数据，并且执行打印。进一步，除摄像数据和动画数据外，通过额外地发送按照主机设备创建的数据(XML数据以及文本数据)，主机设备可以与服务器和外围设备协作执行认证，并且执行元数据的传送/接收。</p>
    <p>[0153]	图13示出W1-Fi SD卡和主机设备的配置示例。</p>
    <p>[0154]	如上所述，主机设备20包括配置为控制SD卡11的主机控制器21，并且能够依据卡接口发出由SDA标准化的“SD规范部分I”的命令，以及配置为执行W1-Fi SD卡特有的控制的命令CMD48和CMD49。[0155]	SD卡11包括卡控制器11a，NAND存储器模块(NAND闪存存储器)18，W1-Fi网络模块(无线通信信号处理部1%)，并且依据由主机控制器21发出的命令运行。在一般的SD卡中，卡控制器Ila能够访问NAND存储器模块18以执行数据的读/写。在该实施例的W1-Fi SD卡中，执行对NAND存储器模块18的访问(读/写)、对W1-Fi网络模块19c的访问以及在NAND存储器模块18中记录的数据到W1-Fi网络模块19c的内部传输。可替换地，可以执行W1-Fi网络模块19c到NAND存储器模块18的数据内部传输。据此，W1-Fi网络模块19c可以向外部传送例如记录在NAND存储器模块18中的摄像数据，而无需主机设备20的干涉。也就是，主机设备20不必执行W1-Fi网络模块19c的复杂控制。</p>
    <p>[0156]	更进一步，摄像数据不是通过卡接口内部传输的，并且因此可以提高传输速度。例如，当摄像数据的内部传输由卡控制器中的直接存储器访问(DMA)寄存器控制时，主机设备20和SD卡11可以彼此独立地运行。</p>
    <p>[0157]	进一步，可以自动地并且直接地记录W1-Fi网络模块19c的状态信息，以及从NAND存储器模块18中的外部网络的服务器下载的数据，而无需主机设备20依次管理数据项。</p>
    <p>[0158]	图14示出SD卡11和主机设备20的另一个配置示例。</p>
    <p>[0159]	在图14中，与图13不同，SD卡不具有W1-Fi功能，并且由卡控制器Ilb和NAND存储器模块18构成。进一步，主机设备20具有W1-Fi功能。也就是，主机设备20包括主机控制器21、W1-Fi网络模块19c，以及配置为使读命令(CMD48)和写命令(CMD49)彼此分开的卡控制器25。</p>
    <p>[0160]	当数码相机具有W1-Fi功能时，通过使用与图13相同的控制方法，该配置启用W1-Fi网络模块19c的控制。</p>
    <p>[0161]	图15示出通过使用读命令(CMD48)和写命令(CMD49)访问的扩展寄存器的示例。如前所述，扩展寄存器的页面O充当页面I以及页面I后续页面的索引，并且主机设备20能够通过读页面O获知关于卡拥有的功能的类型的信息，关于卡支持的功能的版本信息以及简档信息(在可选功能中所支持的功能的信息)，用于控制该功能的驱动器信息(关于提供驱动器的制造商的信息以及关于驱动器的版本的信息)等。例如，当特定卡具有与W1-Fi功能一起的蓝牙(注册商标)功能时，配置为访问蓝牙功能的寄存器被分配给例如页面2。随着需求的上升，主机设备20能够访问页面I和2，并且同时使用每个页面功能。据此，可以通过使用W1-Fi功能实现从外部服务器下载数据以在卡上临时记录数据的操作，以及通过使用蓝牙功能向外围设备传输记录的数据的操作以重现或者播放传输的数据。</p>
    <p>[0162]	图16示出扩展寄存器被用于W1-Fi SD卡情况下的示例。</p>
    <p>[0163]	W1-Fi SD卡依据五种寄存器的使用由五种扩展寄存器构成。W1-Fi SD卡命令写寄存器是排他性地用于数据写的寄存器，并且当主机设备向该卡发出命令时被访问。W1-FiSD卡状态寄存器是排他性地用于数据读的寄存器，并且当主机设备获取卡的状态信息时被访问。W1-Fi SD卡响应数据寄存器是排他性地用于数据读的寄存器，并且当主机设备获取由主机设备从外部服务器向卡下载的数据(HTTP响应数据)时被访问。W1-Fi SD卡ID列表寄存器是排他性地用于数据读的寄存器，并且当主机设备获取连接(或者被请求连接)到卡的其他设备的ID列表时被访问。W1-Fi SD卡SSID历史寄存器是排他性地用于数据读的寄存器，并且当主机设备获取以往卡已经被连接到的SSID(或者卡不曾被连接到以及已经请求卡被连接到的SSID)列表时被访问。[0164]	进一步，尽管未示出，W1-Fi SD卡命令响应寄存器是排他性地用于数据读的寄存器，并且当主机确认由主机发出的命令是否已经被卡接收时被访问。更进一步，尽管未示出，W1-Fi SD卡异步命令响应寄存器是排他性地用于数据读的寄存器，并且当主机确认由卡执行的命令的处理过程(命令在未被处理状态，在处理中状态，在处理后成功状态或者处理后未成功状态)时被访问，该命令由主机发出。</p>
    <p>[0165]	在该实施例中，将描述以上W1-Fi SD寄存器的每个被分配给扩展寄存器的页的情况。首先，主机设备20通过使用读命令(CMD48)读取扩展寄存器的页面0，然后检查W1-FiSD功能是否在卡中被实现，并且进一步确认为了使用每个功能应当访问哪个页面。在此，在页面O中记录页面序号(i，j，k，UPm)以及W1-Fi SD寄存器的缩写(WIFISDCR，WIFISDSR，WIFISDRD, WIFISDIL 和 WIFISDSH)的对。</p>
    <p>[0166]	当主机设备20将要发出命令至卡时，主机设备20执行向W1-Fi SD卡命令写寄存器的写入，该W1-Fi SD卡命令写寄存器是通过使用写命令(CMD49)用于命令发出的寄存器。在此时，从关于页面O的信息可知，讨论中的寄存器存在于页面I中，并且因此页面i被指定为命令CMD49的自变量。类似地，当主机设备20将要从卡获取状态信息等时，主机设备20从W1-Fi SD卡状态寄存器、W1-Fi SD卡响应数据寄存器、W1-Fi SD卡ID列表寄存器以及W1-Fi SD卡SSID历史寄存器中的一个读取数据，这些寄存器是通过使用读命令(CMD48)的用于数据获取的寄存器。在此时，作为命令CMD48的自变量，指定相应于寄存器的页面序号j, k, I,和m。</p>
    <p>[0167]	在此，在该实施例中，尽管用于数据写的寄存器以及用于数据读的寄存器被分配给不同的页面，可以使其中每个寄存器仅用于数据写或者数据读，并且因此还有可能将这些寄存器分配给相同的页。</p>
    <p>[0168]	图17示出当W1-Fi SD寄存器被分配给扩展寄存器的页时，读/写超过512字节(每页扩展寄存器的最大大小)量的数据的情况的示例。</p>
    <p>[0169]	每页扩展寄存器的最大大小被限制为512字节。然而，主机设备20依次发出读命令(CMD48)或者写命令(CMD49)，由此，启用超过512字节量的数据的读或者写。例如，当超过512字节量的数据将要被写到W1-Fi SD卡命令写寄存器时，主机设备通过使用写命令CMD49将前512字节数据写入到该寄存器。</p>
    <p>[0170]	更具体地，主机设备通过使用寄存器选择命令CMD49的“RS”指定寄存器页面，设置偏移“0FS”为“0”，并且然后通过使用数据长度“LEN”指定512字节。也就是，首先，主机设备20设置“ RS ”为“ 1”，设置“ OFS ”为“ O ”，并且设置“ LEN”为512字节，随后写入512字节数据至W1-FiSD卡命令写寄存器。随后，主机设备20设置“RS”为“2”，设置“0FS”为“0”，并且设置“LEN”为512字节，随后写入512字节数据至W1-FiSD卡命令写寄存器。依次重复这样的操作。</p>
    <p>[0171]	在此，在前512字节数据中记录将被写入W1-Fi SD卡命令写寄存器的数据的数据大小(Nw)。由此，SD卡能够识别主机设备20将要发出的次数相应于ceil (Nw / 512)的命令CMD49。应当注意的是，ceilO表示小数之后的数字向上舍入。也就是，例如，当数据长度是513字节，意味着命令被发出两次。</p>
    <p>[0172]	另一方面，当超过512字节量的数据将要被从W1-Fi SD卡响应数据寄存器读取时，主机设备20通过使用读命令(CMD48)重复地从寄存器读取前512字节数据。设置命令CMD48的自变量的方法与设置命令CMD49的自变量的方法相同。</p>
    <p>[0173]	在此，在前512字节数据中记录将要从W1-Fi SD卡响应数据寄存器中读取的数据的数据大小(Nr)。由此，通过读取数据，主机设备20认识到主机设备20应当发出次数相应于 ceil (Nr / 512)的命令 CMD48。</p>
    <p>[0174]	例如，当主机设备20正在执行读或者写时如果出现问题，主机设备20停止处理。在这种情况下，主机设备20可以通过发出用于停止处理的AbortO命令，或者根据设置给SD卡的超时时间通过等待将要被执行的超时处理来停止处理。</p>
    <p>[0175]	图18示出扩展寄存器被用于W1-Fi SD寄存器情况下的另一个示例。例如，当无线通信的状态被从主机设备20传输至扩展寄存器或者当扩展寄存器的数据被传输至SD寄存器时，不需传输所有512字节数据，并且在一些情况下传输短数据长度的特定数据就足够了。图18示出这样案例的数据传输的示例。</p>
    <p>[0176]	更加具体地，通过使用读命令(CMD48)或者写命令(CMD49)的自变量“RS”指定扩展寄存器的页面，并且进一步通过使用“0FS”指定被指定页面的偏移地址。</p>
    <p>[0177]	在这个示例中，W1-Fi SD寄存器的五个类型中的每个类型被分配到相应于扩展寄存器的特定页面(h)中的一个字节的地址(i，j，k，I或者m)。</p>
    <p>[0178]	首先，主机设备20通过使用读命令(CMD48)读取扩展寄存器的页面0，然后检查是否在卡中实现W1-Fi SD功能，并且进一步确认为了使用每个功能应当访问哪个页面。在此，在页面O中记录页码(h)加上偏移地址(i，j，k，I和m)和W1-Fi SD寄存器的缩写(WIFISDCR, WIFISDSR, WIFISDRD, WIFISDIL 和 WIFISDSH)的配对。</p>
    <p>[0179]	当主机设备20将要发出命令至SD卡时，主机设备20执行向W1-Fi SD卡命令写寄存器的写入，该W1-Fi SD卡命令写寄存器是通过使用写命令(CMD49)的用于命令发出的寄存器。在这个时候，从关于页面O的信息中可知，讨论中的寄存器存在于页面“h”的偏移地址“I”处，并且因此“RS”，= “h”和“0FS”= “I”被指定为命令CMD49的自变量。</p>
    <p>[0180]	另一方面，当主机设备20从SD卡获取状态信息等时，从W1-Fi SD卡状态寄存器、W1-Fi SD卡响应数据寄存器、W1-Fi SD卡ID列表寄存器和W1-Fi SD卡SSID历史寄存器的一个中读取数据，这些寄存器通过使用读命令(CMD48)作为数据获取寄存器。在这个时候，作为命令CMD48的自变量，指定相应于寄存器的页码以及偏移地址(h，j)、(h，k)、(h，I)和(h，m)。也就是，“RS”被设置为“h”，并且“OFS”被设置为j、k、I和m中的一个。</p>
    <p>[0181]	在图18所示的实施例中，尽管扩展寄存器的配置以及每个W1-Fi SD寄存器的配置彼此不对应，但该实施例具有扩展寄存器的消耗量小的优点。</p>
    <p>[0182]	进一步，在图18中，尽管用于数据写的寄存器(W1-Fi SD卡命令写寄存器)和用于数据读的寄存器(W1-Fi SD卡状态寄存器、W1-Fi SD卡响应数据寄存器、W1-Fi SD卡ID列表寄存器和W1-Fi SD卡SSID历史寄存器)被分配不同的偏移地址，但寄存器中的每个可以仅用于数据写或者数据读，并且因此，也可以将寄存器分配给相同的偏移地址。</p>
    <p>[0183]	图19示出当W1-Fi SD寄存器被分配给特定页的地址时，读/写超过512字节量的数据(即大小超过每页扩展寄存器的最大大小的数据)的示例。</p>
    <p>[0184]	类似图17所示的示例，尽管能够传输到扩展寄存器的数据量被限制在512字节，通过依次发出由主机设备20所执行的命令CMD48或者CMD49来启用超过512字节量的数据的读或者写。在这种情况下，在扩展寄存器的页面h中记录的数据具有充当例如记录在W1-Fi SD卡命令写寄存器以及W1-Fi SD卡响应数据寄存器中的512字节数据项的索引的功能。</p>
    <p>[0185]	相应地，当借助于写命令(CMD49)的自变量设置“0FS”为“ i ”并设置“LEN”为512字节时，通过指定扩展寄存器的页“h”、偏移“0FS”以及“LEN”，可以向W1-Fi SD卡命令写寄存器写入512字节数据，并且也可以通过依次发出写命令(CMD49)，依次向W1-Fi SD卡命令写寄存器写入512字节数据。</p>
    <p>[0186]	进一步，当借助于读命令(CMD48)的自变量设置“OFS”为“ j”并且设置“LEN”为512字节时，通过指定扩展寄存器的页面“h”、偏移“0FS”和“LEN”，可以读取W1-Fi SD卡响应数据寄存器中的512字节数据，并且也可以通过依次发出读命令(CMD48)来从W1-Fi SD卡响应数据寄存器依次读取512字节数据。</p>
    <p>[0187]	在此，在前512字节数据中记录将要被写入到W1-Fi SD卡命令写寄存器的数据的数据大小(Nw)。由此，通过读取数据，SD卡识别主机设备20将要发出的次数相应于ceil (Nw / 512)的命令CMD49。应当注意的是，ceil O表示小数之后的数字向上舍入。也就是，例如当数据长度是513字节时，意味着命令被发出两次。</p>
    <p>[0188]	另一方面，当将要从W1-Fi SD卡响应数据寄存器读取超过512字节量的数据时，通过使用读命令(CMD48)，主机设备20重复地从该寄存器读取前512字节的数据。设置命令CMD48的自变量的方法与设置命令CM D49的方法相同。</p>
    <p>[0189]	在此，在前512字节数据中记录将要从W1-Fi SD卡响应数据寄存器被读取的数据的数据大小(Nr)。由此，通过读取数据，主机设备20识别主机设备20应当发出次数相应于ceil (Nr/512)的命令 CMD48。</p>
    <p>[0190]	例如，当主机设备20正在执行读或者写时如果出现问题，则主机设备20停止处理。在这种情况下，主机设备20可以通过发出用于停止处理的Abort O命令，或者可以根据为SD卡设置的超时时间通过等待将被执行的超时处理来停止处理。</p>
    <p>[0191]	图20是扩展寄存器被用于W1-Fi SD寄存器情况的另外又一个示例。</p>
    <p>[0192]	图20示出配置为控制无线通信的多个W1-Fi SD卡命令被包括在通过使用一个写命令(CMD49)发出的数据中的情况，以及多个状态被包括在通过使用一个读命令(CMD48)发出的数据中的情况。例如，当依次执行多个文件传输时，采用发出多个W1-Fi SD卡命令。</p>
    <p>[0193]	W1-Fi SD卡命令写寄存器由例如命令寄存器部以及自变量寄存器部构成，并且W1-Fi SD卡响应数据寄存器由例如响应寄存器部和响应数据寄存器部构成。</p>
    <p>[0194]	在W1-Fi SD卡命令写寄存器中，给命令寄存器部中的每个命令分配用于命令发出的寄存器，并且依据被写命令的ID向相应寄存器写入值。在自变量寄存器部中，用于自变量数据写的寄存器被分配给每个自变量，并且依据被写命令的ID的内容向相应寄存器中写入自变量数据。</p>
    <p>[0195]	例如，当从主机设备20发出命令CMD49(i，x)时，“i”表示扩展寄存器的页码，“χ”表示命令ID，然后命令ID=x，并且向扩展寄存器写入相应于命令ID的自变量的号码(m)的自变量数据，并且向每个相应的命令寄存器和W1-Fi SD卡命令写寄存器的自变量寄存器中写入值。</p>
    <p>[0196]	应当注意的是，“χ”可以被定义为相应命令ID的寄存器的偏移地址。</p>
    <p>[0197]	另一方面，在W1-Fi SD卡响应数据寄存器中，用于状态信息的寄存器被分配给响应状态寄存器部的每个命令，并且依据被写入到W1-Fi SD卡命令写寄存器的命令ID从用于状态信息的相应寄存器中读取值。在响应数据寄存器部中，用于响应数据的寄存器被分配给每个命令ID，并且依据被写命令的ID的内容从相应寄存器中读取响应数据。</p>
    <p>[0198]	例如，当命令CMD48(j，y)从主机设备20发出时，“j ”表示页码，“y”表示命令ID，并且相应于命令ID= “y”的状态信息和响应数据由主机设备20通过扩展寄存器从W1-FiSD卡状态寄存器和W1-Fi SD卡响应状态寄存器中读取。</p>
    <p>[0199]	应当注意的是，“y”可以被定义为相应命令ID的寄存器的偏移地址。</p>
    <p>[0200]	在图20所示的实施例中，W1-Fi SD寄存器的值被分配给相应功能以及一对一对应中的处理项。由此，可以执行有效处理而无需执行解释寄存器内容的处理。</p>
    <p>[0201]	在此，尽管以下将根据向特定页面的地址分配使用图18和图19描述的W1-Fi SD寄存器中的每个寄存器的情况描述W1-Fi SD寄存器的细节，但该描述也可以实施在其他实施例中。</p>
    <p>[0202]	根据图20所示的实施例，可以通过使用一个命令(CMD48或者CMD49)传输包括多个W1-Fi SD卡命令等的数据，并且因此，不必多次发出命令(CMD49或者CMD48)。由此，可以有效地传输数据，并且启用高速处理。</p>
    <p>[0203]	图21示出扩展寄存器被用于W1-Fi SD卡情况下的扩展寄存器。</p>
    <p>[0204]	在图21中，“W1-Fi SD卡标识符”是表示扩展寄存器被用于W1-Fi SD卡的信息，并且字符串“WIFISD00”被记录在其中。</p>
    <p>[0205]	“W1-Fi SD卡规范版本”是由W1-Fi SD卡支持的W1-Fi SD卡标准的版本，并且，例如当支持Ver.1.0时，十六进制数字“0x0100”被记录在其中。</p>
    <p>[0206]	“W1-Fi SD卡简档指示符”是配置为表示由W1-Fi SD卡支持的功能的信息。在例如图39所示的W1-Fi SD卡功能中，指示能够由W1-Fi SD卡使用的应用。在第一次获取该信息后，主机有必要仅执行由该卡支持的功能。</p>
    <p>[0207]	在“供应商特有ID”中，记录制造卡的供应商的ID字符串。通过参考该ID，主机能够识别卡供应商，并且在该卡中实现卡供应商特有的附加功能，由此，主机能够识别主机可以使用该功能。</p>
    <p>[0208]	在“供应商特有域”中，卡供应商能够记录其特有的信息，并且能够记录表示在该卡中实现卡供应商特有的附加功能中的哪个功能的信息。</p>
    <p>[0209]	“命令写寄存器端口 ”是配置为访问由主机设备使用的W1-Fi SD卡命令写寄存器以向该卡发出命令的数据端口。</p>
    <p>[0210]	“状态寄存器”是由主机设备使用以获取关于卡的状态信息的存储器区域，并且其包括在W1-Fi SD卡状态寄存器中。</p>
    <p>[0211]	“命令响应状态寄存器”是由主机设备使用以获取关于由主机设备发出的命令的响应状态信息的存储器区域，并且包括在W1-Fi SD卡状态寄存器中。</p>
    <p>[0212]	“异步命令响应状态寄存器”是被用于获取特别是关于由主机设备发布的命令中的异步命令的响应状态信息的存储器区域，并且其包括在W1-Fi SD卡状态寄存器中。该异步命令主要相应于配置为通过网络传送/接收数据的命令，甚至当执行异步命令时，能够执行其他命令。应当注意的是，在图23中，异步命令相应于SendHttpMessage,SendHttpFile, SendHttpSSLMessage, SendHttpSSLFile, SendHttpMessageByRegister,SendHttpFiIeByRegister，SendHttpSSLMessageByRegister，SendHttpSSLFileByRegister以及 GetFile。</p>
    <p>[0213]	“响应数据寄存器端口”是由主机设备使用以访问配置为从卡获取自外部服务器下载的数据(Http响应数据)的W1-Fi SD卡响应数据寄存器的数据端口。</p>
    <p>[0214]	“ID列表寄存器端口”是由主机设备使用以访问由主机设备使用的W1-Fi SD卡ID列表寄存器从而获取与卡连接(或者被请求连接到)的其他设备的ID列表的数据端口。</p>
    <p>[0215]	“SSID历史寄存器端口 ”是由主机设备使用的端口，用以访问由主机设备使用的W1-Fi SD卡SSID历史寄存器从而获取之前该卡已经连接到的SSID (或者卡未曾连接到但被请求连接到的SSID)的列表。</p>
    <p>[0216]	图22示出W1-Fi SD卡命令写寄存器的配置示例。</p>
    <p>[0217]	“W1-Fi SD卡寄存器标识符”是表示该寄存器是W1-Fi SD卡命令写寄存器的信息，并且字符串“WIFISDCR”被记录在其中。</p>
    <p>[0218]	“W1-Fi SD卡寄存器的大小”是表示寄存器大小的信息，并且通过参考该信息，卡获知命令CMD49应当被发出几次，以及什么尺寸的数据应当被接收。</p>
    <p>[0219]	“W1-Fi SD命令信息的数量”是表示通过一次执行向W1-Fi SD卡命令写寄存器的写入，已经有多少W1-Fi SD命令被发出的信息。通过产生由主机指定数量的命令的列表，卡执行列举命令的顺序处理。更进一步，以可以按照命令的类型获得最高有效性的顺序，卡可以重新排列命令，并且执行命令的并行处理，对于该命令能够执行并行执行。例如，当数据被上传到多个服务器时，优先执行未实施加载的服务器的处理，并且，当卡的传输速率足够高于传输目的地的服务器的网络传输速率时，变得可以同时执行向多个服务器的传输。</p>
    <p>[0220]	“W1-Fi SD命令信息”是由“W1-Fi SD命令id”、“Wi_Fi SD命令序列id”、“自变量总数量”、“自变量长度”以及“自变量”构成。</p>
    <p>[0221]	“W1-Fi SD命令id”表示将要被发出的W1-Fi SD命令的类型，并且记录图23至25所示的W1-Fi SD命令中的一个。</p>
    <p>[0222]	“W1-Fi SD命令序列id”是由主机分配的值，以便逐个识别并区分发出的W1-Fi SD命令，并且主机能够通过W1-Fi SD卡状态寄存器获知每个发出的命令的状态。</p>
    <p>[0223]	“自变量的数量”是发出的自变量的数量，“自变量的长度”表示自变量数据的大小，而“自变量”表示自变量数据。</p>
    <p>[0224]	图23至25中的每个示出将要被写入到W1-Fi SD卡命令写寄存器的命令列表。</p>
    <p>[0225]	“ScanWiFi”命令是由无自变量的命令构成。当命令被执行时，主机请求卡搜索卡能够连接的无线局域网，并且结果能够被存储在图43所示的“SSIDLIST”中。</p>
    <p>[0226]	“SetSSID”命令由三个自变量构成，包括表示SSID名的“ssid”，表示密码短语的“passphrase”，以及表示认证方法的“authentication”。主机能够因为“服务器上传应用”以及“P2P应用”，设置卡将要连接的无线局域网的SSID名和密码短语，或者因为“P2P约束服务器应用”和“P2P服务器应用”设置将要连接的无线局域网的SSID名、密码短语和认证方法。应当注意的是，当“StartApplication”命令被执行以连接到无线局域网或者构建无线局域网时，该设置被使用。应当注意的是，认证方法意味着网络的认证方法以及数据加密方法，并且由主机选择“开放系统和无加密”、“开放系统和WEP”、“共享密钥和WEP”、“WPA和TKIP ”、“WPA 和 AES ”、“WPA-PSK 和 TKIP”、“WPA_PSK 和 AES，，、“WPA2 和 TKIP”、“WPA2 和 AES ”、“WPA2-PSK 和 TKIP”、“WPA2-PSK 和 AES” 中的一个。</p>
    <p>[0227]	“SetCurrentTime”命令由表示当前日期的“currentDate”和表示当前时间的“currentTime”的两个自变量构成。当该命令被执行时，能向该卡设置由主机指定的当前日期和当前时间。当不一直向卡提供电源时，很难一直保留卡中的日期/时间信息。在此情况下，主机执行卡的日期/时间的设定，由此，卡能够保留日期/时间信息，并且当前日期/时间能够被设置到需要日期/时间信息的数据中，诸如由卡所创建的文件。</p>
    <p>[0228]	“StartApplication”命令是由表示将要被激活的应用“application”、表示当前日期的“ currentDate ”以及表示当前时间的“ currentTime ”三个自变量构成。当命令被执行时，可以依据无线局域网网络的设置执行到无线局域网的连接或者执行无线局域网的构建。然后，可以执行被指定应用(“服务器上传应用”、“P2P服务器应用”、“P2P约束服务器应用”、“P2P客户端应用”、“DLNA服务器应用” “DLNA控制器应用”，这些应用在图35中示出)的激活。如果W1-Fi保护安装(WPS)的激活设置已经由“SetWPS”命令执行，在应用激活或者其构建之前，由WPS执行连接到无线局域网。如果SSID已经由“SetSSID”命令设置，通过使用该设置执行到无线局域网的连接或者其构建。如果SSID仍未曾通过“SetSSID”命令设置，通过使用记录在图32中所示的卡中的“SSID历史”中的一个SSID来执行到无线局域网的连接或者其构建。</p>
    <p>[0229]	“SetWPS”命令由表示WPS系统的“mode”和表示pin码的“pin”两个自变量构成。当命令被执行时，在执行无线局域网连接或者构建时，卡可以使用WPS。在此，当WPS系统是“利用PIN的WPS”系统时，执行使用设置的pin码的pin码认证，并且，当WPS系统是“利用PBC的WPS”系统时，执行按键认证。</p>
    <p>[0230]	“Abort”命令由表示图22所描述的“Wi_Fi SD命令序列ID”的“sequencelD” 一个自变量构成。当命令被执行时，可以停止已经执行的命令中具有指定的“W1-Fi SD命令序列ID”的命令的处理。例如，当用户执行自网络中的设备或web服务器的文件上传或从网络中的设备或web服务器的文件下载时，由于需要关闭电源的原因，用户有必要停止处理，此时,可以使用该命令。</p>
    <p>[0231 ] “Reset ”命令是由表示状态信息的“ status ”一个自变量构成。在此，状态信息意味着表示包括图26所描述的“媒体改变”、“SSID列表更新”、“文件列表更新”、“ID列表更新”、“响应数据更新”等的信息项的其中之一的信息。当命令被执行时，可以重置被指定的状态信息以恢复初始值。例如，尽管“媒体改变”是表示该卡内的文件系统信息已经被更新的状态信息，当在主机设备中高速缓存的文件系统信息可以被更新时，主机参考“媒体改变”信息，并且，如果该卡的文件系统已经被更新，主机使得主机设备的文件系统信息反映该卡的文件系统信息。在这个时候，可以执行“Reset”命令以返回“媒体改变”信息为初始值，以便能够重新参考“媒体改变”信息，由此可以识别出能够再次更新该卡的文件系统信息。</p>
    <p>[0232]	“Remove”命令是由表示SSID名称的“ssid”一个自变量构成的。当命令被执行时，可以从记录在卡中的“SSIDHistory”寄存器中删除指定的SSID。例如，当已经变得无用的SSID仍存在于“SSID历史”寄存器中记录的SSiD中，该卡执行到无用的SSID的连接，并且因此出现无用的连接处理。类似地，当用户未打算连接的SSID存在于记录在“SSID历史”寄存器中的SSID中时，卡执行到卡的连接，并且因此到其他SSID的连接不能被执行。在这种情况下，通过执行“Remove”命令，可以防止卡执行到不期望的SSID的连接。[0233]	“EndApplication”命令是通过使用无自变量构成的命令。当该命令被执行时，当前正在被执行的应用被终止，并且卡能够返回到初始状态。</p>
    <p>[0234]	“ ReadResponse ”命令是由表示图22所描述的“ W1-Fi SD命令序列ID”的“sequencelD” 一个自变量构成的。当命令被执行时，可以获取在已经执行的命令当中具有被指定的“W1-Fi SD命令序列ID”命令的响应数据。例如，在多个命令的处理已经被完成的状态下，可以通过指定“sequencelD”以任意顺序来读取已经完成的命令的响应数据项。应当注意的是，通过分配图28中所描述的“W1-Fi SD命令响应状态#1”给缺省的响应数据寄存器端口，当一次只有一个命令被发出时，可以省略“ReadResponse”命令的发出。</p>
    <p>[0235]	“SendHttpMessage”命令是由表示传送目的地的服务器的“hostname”、表示记录将要被传送的HTTP请求消息的文件的文件路径和文件名的“messageFiIeName”和表示HTTP头是否被记录在该文件中的“headerRemoval”三个自变量构成。在命令被执行之前，由HTTP请求线、HTTP消息头以及HTTP消息体构成的HTTP请求消息被记录在该文件中。当主机执行命令时，该卡将文件作为HTTP请求消息传送到指定传送目的地的服务器。传送目的地服务器返回HTTP响应消息以响应于来自该卡的HTTP请求消息。该卡接收由HTTP响应线、HTTP消息头以及HTTP消息体构成的HTTP响应消息，并且将该消息作为文件记录在该卡中。然而，当“headerRemoval”的值被指定为“ I”时，HTTP响应线、HTTP消息头被删除，并且仅有HTTP消息体作为文件记录在该卡中。由此，当附加的数据包括在HTTP响应消息中时，可以将附加的数据作为文件保存而无需主机处理HTTP响应消息。在这个时候，文件连同“W1-Fi SD命令序列id”的文件名被记录在图43中示出的RESPONSE目录中。“Wi_FiSD命令序列id”是主机可以以命令之间的值不同的方式为每个命令任意指定的值，并且，甚至当其他命令“SendHttpMessage”被同时执行时，可以以可区别的方式接收HTTP响应消息的文件。更进一步，当所附的文件包括在HTTP响应消息中时，该卡通过消息中描述的MME类型来识别所附文件的类型，并且将所附文件记录在相应于图43所示的MME类型的目录中作为文件。在这个时候，如果关于文件名的信息包括在HTTP响应消息中，根据该信息记录文件。以下示出构成HTTP请求消息的文件的内容的示例。</p>
    <p>[0236]</p>
    <p>    POST/hoge/HTTP/1.1    Content-Type: text/plain    User-Agent: XXXXXXXX    Host: hogehoge.com    ContentLength=25</p>
    <p>   THIS IS AN EXAMPLE</p>
    <p>[0237]	“SendHttpFiIe”命令由表示传送目的地的服务器的“hostname”、表示记录将要传送的HTTP请求消息的文件的文件路径和文件名的“messageFi IeName ”、表示附加到将要传送的HTTP请求消息的文件的文件路径和文件名的“ appendFi I eName ”和表示HTTP头是否被记录在文件中的“header Removal”四个自变量构成。尽管基本的配置与“SendHttpMessage”命令相同，不同点在于，当该卡传送HTTP请求消息时，HTTP请求消息中的特定字符串(例如“〈!一WIFISDFILE&#8212;〉”)能够被附加在HTTP请求消息的文件的内容代替。通过使用这个命令，可以将已经记录在卡中的文件作为HTTP请求消息传送而不处理它。例如，当该卡中的摄像数据被上传到web服务器时，命令可以被使用。以下示出构成HTTP请求消息的文件内容的示例。</p>
    <p>[0238]</p>
    <p>---------------------------------------------------------------------------------POST/</p>
    <p>hoge/HTTP/1.1</p>
    <p>    Content-Type:1mage/jpeg    User-Agent: XXXXXXXX    Host: hogehogr.com    ContentLength=1234567</p>
    <p>   &lt;!-WIFISDFILE-&gt;   ---------------------------------------------------------------------------------^νλ</p>
    <p>[0239]	上HTTP请求消息，卡用指定的文件替换〈! 一WIFISDFILE&#8212;〉，并且传送以下结果。</p>
    <p>[0240]</p>
    <p>---------------------------------------------------------------------------------POST/</p>
    <p>hoge/HTTP/1.1</p>
    <p>    Content-Type:1mage/jpeg    User-Agent: XXXXXXXX    Host: hogehogr.com    ContentLength=1234567</p>
    <p>    &lt; Binary data is inserted here by a Card from a specified file &gt;</p>
    <p>[0241]	“SendHttpSSLMessage”命令由表示传送目的地的服务器的“hostname”、表示记录将要被传送的HTTP请求消息的文件的文件路径 和文件名的“messageFiIeName”以及表示HTTP头是否被记录在文件中的“headerRemoval”三个自变量构成。尽管基本配置与“SendHttpMessage”命令相同，不同点在于，HTTP请求消息的传送以及HTTP响应消息的接收能够通过使用该命令借助于SSL (安全套接字层)或者TLS (传输层安全)加密这些消息来执行。[0242]	“SendHttpSSLFile”命令是由表示发送目的地的服务器的“hostname”、表示记录将要被传送的HTTP请求消息的文件的文件路径和文件名的“messageFiIeName”、表示附加到将要被传送的HTTP请求消息的文件的文件路径和文件名的“appendFi I eName”和表示HTTP头是否被记录在文件中的“headerRemoval”四个自变量构成。尽管基本配置与“SendHttpFile”命令相同，不同点在于HTTP请求消息的传送以及HTTP响应消息的接收能够通过使用该命令借助于SSL (安全套接字层)或者TLS (传输层安全)加密这些消息而执行。[0243]	“SendHttpMessageByRegister”命令是由表示传送目的地的服务器的“hostname”以及表示将要被传送的HTTP请求消息的“message”两个自变量构成。与“SendHttpMessage”命令不同，HTTP消息不被写入到该卡的文件中，并且主机能够直接将HTTP消息写入到W1-Fi SD卡命令写寄存器中。例如，当诸如密码等的信息将要被发送到传送目的地的服务器时，可以防止出现由于将密码写入文件而产生的密码漏失到外部。当主机执行该命令时，该卡传送输入HTTP请求消息(由HTTP请求线、HTTP消息头和HTTP消息体构成)至指定的传送目的地的服务器。传送目的地的服务器响应于来自该卡的HTTP请求消息返回HTTP响应消息。该卡接收由HTTP响应线、HTTP消息头和HTTP消息体构成的HTTP响应消息，并且将HTTP响应消息作为图30所示的“响应数据”写入到W1-Fi SD卡响应数据寄存器。通过使用命令CMD48主机能够通过读取W1-Fi SD卡响应数据寄存器，来读取被执行的 “SendHttpMessageByRegister” 的 HTTP 响应消息。</p>
    <p>[0244]	“SendHttpFileByRegister”命令由表示发送目的地的服务器的“hostname”、表示附加到将要被发送的HTTP请求消息的文件的文件路径和文件名的“appendFiIeName”以及表示将要被发送的HTTP请求的消息的“message”三个自变量构成。尽管基本配置与“SendHttpMessageByRegister”命令相同，不同点在于，当卡传送HTTP请求消息时,在HTTP请求消息中的特定字符串(例如，“〈!一WIFISDFILE&#8212;〉”)能够被HTTP请求消息中附加的文件的内容所代替。</p>
    <p>[0245]	“SendHttpSSLMessageByRegister”命令由表示发送目的地的服务器的“hostname”和表示将要被发送的HTTP请求消息的“message”两个自变量构成。尽管基本配置与“SendHttpMessageByRegister”命令相同，不同点在于HTTP请求消息的传送以及HTTP响应消息的接收能够通过使用该命令借助于SSL (安全套接字层)或者TLS (传输层安全)加密这些消息来执行。</p>
    <p>[0246]	“SendHttpSSLFileByRegister”命令由表示发送目的地的服务器的“hostname”、表示要发送的HTTP请求消息所附的文件的文件路径和文件名的“appendFi I eName”以及表示要被发送的HTTP请求消息的“message”三个自变量构成。尽管基本配置与“SendHttpFileByRegister”命令相同，不同点在于，HTTP请求消息的传送以及HTTP响应消息的接收能够通过使用该命令借助于SSL (安全套接字层)或者TLS (传输层安全)加密这些消息来执行。</p>
    <p>[0247]	“GetFile”命令由表示要被接收的文件的文件路径和文件名的“requestFiIeName”和表示被接收文件的记录目的地的文件路径和文件名的“saveFiIeName”两个自变量构成。这个命令在P2P客户端应用中被执行，并且基于从发送方获得的在“FILELIST”文件(在图43中示出)中描述的可获取的文件的文件路径和文件名，接收方能够从发送方获得期望的文件，并且在指定的文件中记录该文件。</p>
    <p>[0248]	“SelectID”命令是由表示许可访问的接收方ID的“id”一个自变量构成。这个命令在P2P约束服务器应用中被执行。P2P约束服务器应用请求接收方发送ID以便确定是否要发放给接收方访问许可。接收方发送接收方ID至发送方以便获取访问许可，并且发送方仅为发送方意图将访问许可发放给的接收方执行该命令。未被执行该命令的接收方的ID不能获得对发送方的访问。在此时，考虑到除接收方ID外，多个接收方具有与“id”值相同的ID的情形,主机可以指定接收方卡的MAC地址,这使得能够唯一确定接收方卡。</p>
    <p>[0249]	“CaneellD”命令由表示取消访问的接收方ID的“ id” 一个自变量构成。该命令在P2P约束服务器应用中被执行。通过在P2P约束服务器应用中执行这个命令，可以为已经被发放访问许可的接收方取消访问许可。在此时，考虑到除接收方的ID外，多个接收方具有与“id”值相同的ID的情况，主机可以指定接收方卡的MAC地址，这使得能够唯一确定接收方卡。</p>
    <p>[0250]	“ SetMai IAccount ”命令由表不账户名的“accountName”和表不其密码的“password”两个自变 量构成。通过执行该命令，可以为邮件服务器设置邮件账户并且执行邮件的传送和接收。</p>
    <p>[0251]	“SendSmtpMessage”命令是由表示传送目的地地址的“address”和表示记录要被传送的邮件主体的文件的文件路径和文件名的“messageFiIeName”两个自变量构成。通过执行该命令，该卡将指定的文件作为邮件的主体传送到传送目的地的地址。</p>
    <p>[0252]	“SendSmtpMessage”命令是由表示传送目的地地址的“address”、表示记录要被发送的邮件主体的文件的文件路径和文件名的“messageFi IeName ”和表示将被附加的文件的文件路径和文件名的“appendFileName”三个自变量构成。通过执行该命令，该卡使得指定的文件作为邮件主体，使指定的附加文件执行Base64转换，然后将文件从二进制数据转换为文本数据，以将转换的文件附加于邮件主体的尾部，并且执行到传送目的地地址的文件传送。</p>
    <p>[0253]	“SendSmtpMessageByRegister”命令由表示传送目的地地址的“address”和表示要被传送的邮件主体的“message”两个自变量构成。通过执行这个命令，该卡将作为命令自变量的数据输入传送至传送目的地地址作为邮件主体。</p>
    <p>[0254]	“SendSmtpFileByRegister”命令由表示发送目的地地址的“address”、表示所附文件的文件路径和文件名的“ appendFi I eName ”以及表示将被发送的邮件主体的“message”三个自变量构成。通过执行该命令，该卡使得作为命令自变量的数据输入成为邮件主体，使指定的附加文件执行Base64转换，然后将文件从自二进制数据转换为文本数据，以附加该转换的文件到邮件主体的尾部，并且执行至传送目的地地址的邮件传送。</p>
    <p>[0255]	“ ShowDevi ceLi st ”命令是配置为获取网络中设备列表的命令。</p>
    <p>[0256]	^PrintImageByDLNA (file, targetDevice) ”命令是配置为传输指定图像至网络中的设备以打印该图像的命令。</p>
    <p>[0257]	^ D i sp I ay ImageByDLNA (file, targetDevice) ”命令是配置为传输指定图像至网络中的设备以显示该图像的命令。</p>
    <p>[0258]	^ PI ay V i deoByDLNA (file, targetDevice) ”命令是配置为传输指定视频数据至网络中的设备以再现该视频数据的命令。[0259]	“StopVideoByDLNA(file, targetDevice) ”命令是配置为传输指定视频数据至网络中的设备以停止再现的命令。</p>
    <p>[0260]	^PauseOnVideoByDLNA (file, targetDevice) ”命令是配置为传输指定视频数据至网络中的设备以暂停再现的命令。</p>
    <p>[0261]	iiPauseOffPlayVideoByDLNA(file, targetDevice) ” 是传送指定的视频数据至网络中的设备以取消再现暂停的命令。</p>
    <p>[0262]	“SeekVideoByDLNA (time, address, file, targetDevice) ” 命令是配置为再现来自将被传输给网络中的设备的期望部分(文件的地址或者视频数据开始时间的再现)的指定的视频数据的命令。</p>
    <p>[0263]	“ FastForwardVi deoByDLNA (file, targetDevice) ” 命令是配置为传输指定视频数据至网络中的设备以执行快进再现的命令。</p>
    <p>[0264]	“SlowForwardVideoByDLNA (file, targetDevice) ” 命令是配置为传输指定视频数据至网络中的设备以执行慢再现的命令。</p>
    <p>[0265]	“ FastBackwardVi deoByDLNA (file, targeDevice) ” 命令是配置为传输指定视频数据至网络中的设备以执行回退/再现的命令。</p>
    <p>[0266]	“SlowBackwardVideoByDLNA (file, targeDevice) ” 命令是配置为传输指定视频数据至网络中的设备以执行逆向慢再现的命令。</p>
    <p>[0267]	iiStrea mingDownloadVideoByDLNA (file, targetDevice) ” 是配置为传输指定视频数据至网络中的设备以在执行再现时执行记录的命令。</p>
    <p>[0268]	“SendFiIeByDLNA (file, targetDevice) ”命令是配置为传输指定文件至网络中设备的命令。</p>
    <p>[0269]	iiSelectFileByDLNA(file) ”命令是配置为打开指定文件给网络中的设备的命令。</p>
    <p>[0270]	“CanCelFileByDLNA(file)”命令是配置为使指定文件对于网络中的设备不打开的命令。对于该设备已经打开的文件的打开状态可以被取消。</p>
    <p>[0271]	图26和图27示出W1-Fi SD卡状态寄存器的配置示例。</p>
    <p>[0272]	“W1-Fi SD卡寄存器标识符”被配置为表示该寄存器是W1-Fi SD卡状态寄存器，并且在其中记录字符串“WIFISDSR”。</p>
    <p>[0273]	“W1-Fi SD卡寄存器的大小”指示该寄存器的大小，如果该值大于512，主机不能通过一次执行命令CMD48读取该寄存器中所有的值，并且主机需要执行次数相应于ceil (寄存器大小/ 512)的命令CMD48。</p>
    <p>[0274]	“iSDIO状态”是表示全部卡状态的信息，并且由“命令响应更新(CRU) ”、“异步命令响应更新(ARU) ”、“媒体改变更新(MCU) ”以及“W1-Fi SD数据更新(WFU) ”构成，其中的每个由一位构成。进一步，在该卡支持中断的情况下，当每位被设置为“lb”(数据“I”)时，在中断线上发生中断。当图28所示的“命令响应状态”改变(以被设置，例如当命令响应状态值变为0x02，0x03，0x04或者0x08至Oxff时)时，“CRU”是要被设置的标识。当图29中所示的“异步命令响应状态”改变(以被设置，例如当异步命令响应状态值变为0x02,0x03，0x04或者0x08至Oxff时)时，“ARU”是被设置的标识。当存储器状态的值改变(以被设置，例如当图26所示的媒体改变的值改变时)时，“MCU”是被设置的标识。当W1-Fi状态的值改变(以被设置，例如，当图26中所示的SSID列表更新、文件列表更新或者ID列表更新的值改变时)时，“WFU”是被设置的标识。</p>
    <p>[0275]	“iSDIO状态屏蔽”是配置为使“iSDIO状态”有效或者无效的信息，并且由“CRUMSK”、“ARU MSK”、“MCU MSK”以及“WFU MSK”构成，它们中的每个由一位构成。当“CRU MSK”被设置为“Ob”(数据“O”)时，与其相应的“CRU”变为无效(中断能力也可以变为无效)，以及“CRU MSK”被设置为“1”，而“CRU”变为有效(中断能力也可以变为有效)。“ARU MSK”、“MCU MSK”以及“WFU MSK”也是同样的。</p>
    <p>[0276]	“Error Status”是配置为表示整个卡的错误状态的信息，并且由分别由一位构成的“命令响应错误(CRE) ”和“异步命令响应错误(ARE) ”构成。当图28中所示的“命令响应状态”改变为错误状态(以被设置，例如，当命令响应状态的值改变为0x02或者0x08至Oxff时)时，“CRE”是被设置的标识。当图29所示的“异步命令响应状态”被改变为错误状态(以被设置，例如当异步命令响应状态的值改变为0x02或者0x08至Oxff时)时，“ARE”是被设置的标识。</p>
    <p>[0277]	“WLA N”是表示无线局域网状态的信息，并且表示“初始”、“扫描”、“关联”、“STA”以及“AP”之一的状态，它们在图42中示出。</p>
    <p>[0278]	“应用”是表示当前执行的应用的信息，并且表示“初始应用”、“服务器上传应用”、“P2P服务器应用”、“P2P约束服务器应用”、“P2P客户端应用”、“DLNA服务器应用”以及“DLNA控制器应用”之一的状态，它们在图41中被示出。</p>
    <p>[0279]	“SSID”示出该卡当前连接到的或构成的无线局域网的SSID名。当该卡在该卡未被连接到无线局域网的状态下时，在该卡连接到无线局域网或者在该无线局域网被构成时指示将被使用的SSD名。</p>
    <p>[0280]	“网络认证”表示当前连接到无线局域网或者构成无线局域网的网络的认证系统和数据加密方案，并且“开放系统和无加密”、“开放系统和WEP”、“共享密钥和WEP”、“WPA和TKIP ”、“WPA 和 AES ”、“WPA-PSK 和 TKIP”、“WPA_PSL 和 AES，，、“WPA2 和 TKIP”、“WPA2 和 AES ”、“WPA2-PSK 和 TKIP ” 和 “WPA2-PSK 和 AES ” 中的一个被选择。</p>
    <p>[0281]	“HTTP处理”表示该卡当前是否正在执行HTTP消息的传送/接收。</p>
    <p>[0282]	“HTTP过程”以百分比表示HTTP消息的传送/接收进度。该卡能够从当前正在被传送/接收的HTTP消息头中获知消息的全部尺寸，并且从已经传送/接收的HTTP消息的尺寸计算进度。</p>
    <p>[0283]	“Date”表示当前日期。</p>
    <p>[0284]	“Time”表示当前时间。</p>
    <p>[0285]	“媒体改变”是表示该卡中NAND存储器模块的文件分配表(FAT)信息是否被更新的信息。当FAT信息被更新，如果在主机中存在高速缓存的FAT信息，主机需要再次将FAT信息高速缓存到该卡中。应当注意的是，通过执行配置为终止应用的“EndApplication”命令或者配置为初始化状态信息的“Reset”命令,可以设置该信息为初始值。</p>
    <p>[0286]	“SSID列表更新”是表示“SSID列表”是否被更新的信息。当“ScanWiFi”命令被执行时，该卡执行搜索无线局域网，创建“SSIDLIST”文件，并且设置“SSID列表更新”信息。通过参考该信息，主机能够获知该卡的搜索工作是否被完成。应当注意的是，通过再次执行“ScanWiFi ”命令或者通过执行配置为初始化状态信息的“Reset”命令,可以设置该信息为初始值。[0287]	“文件列表更新”是表示“文件列表”是否被更新的信息。在P2P客户端应用中，当接收方侧的访问被许可，该卡记录从发送方侧接收到的“文件列表”作为“FILELIST”，并且设置“文件列表更新”信息。通过参考该信息，主机能够获知该卡是否已经获取“文件列表”。通过执行配置为终止应用的“EndApplication”命令或者配置为初始化状态信息的“Reset”命令,可以设置该信息为初始值。</p>
    <p>[0288]	“响应数据更新”是表示“响应日期”是否被更新的信息。通过使用“SendHttpMessageByRegister”等，主机通过W1-Fi SD卡寄存器执行HTTP消息的传送/接收，并且该卡接收HTTP响应消息，并设置“响应数据”信息。通过参考该信息，主机可以获知该卡已经接收了 HTTP响应消息，并且使得参考W1-Fi SD卡响应数据寄存器变为可能。通过执行配置为终止应用的“EndApplication”命令或者配置为初始化状态信息的“Reset”命令，可以设置该信息为初始值。当主机通过使用命令CMD48或者通过执行配置为初始化状态信息的“Reset”命令已经完成所有“响应数据”的读取时，可以设置该信息为初始值。</p>
    <p>[0289]	“响应数据大小”是表示所接收的响应数据的大小的信息。通过参考该信息，主机能够确定将要发出的用于读取响应数据的命令CMD48的发出次数。</p>
    <p>[0290]	“信号强度”是表示当前信号强度的信息。“无信号”、“I级”、“2级”、“3级”、“4级”和“5级”之一被设置。</p>
    <p>[0291]	“MAC地址”是表示W1-Fi SD卡的MAC地址的信息。</p>
    <p>[0292]	“ID”是表示W1-Fi SD卡ID的信息。这个值反映被设置为图33所示的用户可设置的“卡配置信息”的ID信息的值。</p>
    <p>[0293]	“DHCP使能”是表示“DHCP”是否被启用的信息。该值反映设置为图33所示的用户可设置的“卡配置信息”的“DHCP”信息的值。</p>
    <p>[0294]	“IP地址”是表示当前设置的IP地址的信息。</p>
    <p>[0295]	“子网掩码”是表示当前设置的子网掩码的信息。</p>
    <p>[0296]	“缺省网关”是表示当前设置的缺省网关的信息。</p>
    <p>[0297]	“首选DNS服务器”是表示当前设置的首选DNS服务器的信息。</p>
    <p>[0298]	“备用DNS服务器”是表示当前设置的备用DNS服务器的信息。</p>
    <p>[0299]	“超时”是表示到当卡执行超时处理时超时的信息。这个值反映设置为图33所示的用户可设置的“卡配置信息”的“超时”信息的值。</p>
    <p>[0300]	“节电模式”是表示该卡是否是正在节电模式下运行的信息。尽管该信息反映被设置为图33所示的用户可设置的“卡配置信息”的“节电模式”信息的值，不支持节电模式的卡一直都被设置为正常模式。</p>
    <p>[0301]	“WPS模式”是表示当通过使用“WPS”执行无线局域网的连接或者构建时采用的WPS系统的信息。该信息可以通过“SetWPS”命令设置，并且配置为使用设置的pin码执行pin码认证的“利用PIN的WPS”和配置为执行按钮认证的“利用PBC的WPS”之一被设置。应当注意的是当“SetWPS”命令未被执行时，设置“WPS”未被使用的模式，并且执行无线局域网的连接或者构建无需使用“WPS”。</p>
    <p>[0302]	“代理服务器选择的数量”是表示记录在图33所示的用户可设置的“卡配置信息”中的“代理服务器名”中的哪个代理服务器被使用的信息。该信息反映设置为“卡配置信息”的“所选代理服务器”信息的值。[0303]	“当前邮件账户名”是表示当前邮件账户名的信息。该信息反映由“ SetMai IAccount ”命令设置的值。</p>
    <p>[0304]	图28示出W1-Fi SD卡命令响应状态寄存器的配置示例。</p>
    <p>[0305]	“W1-Fi SD卡寄存器标识符”是表示该寄存器是W1-Fi SD卡命令响应状态寄存器的信息，并且字符串“WIFISDRS ”被记录在其中。</p>
    <p>[0306]	“W1-Fi SD卡寄存器的大小”是表示寄存器大小的信息，并且主机参考该信息，由此识别命令CMD48应当被发出几次，以及多大尺寸的数据应当被读取。</p>
    <p>[0307]	“W1-Fi SD命令响应状态的数量”是表示通过W1-Fi SD卡命令响应状态寄存器的一次读取能够获得多少“W1-Fi SD命令响应状态”的信息。</p>
    <p>[0308]	“W1-Fi SD命令响应状态”是由“状态记录”、“W1-Fi SD命令id”、“Wi_Fi SD命令序列id”、“命令响应状态”和“用于错误状态的为供应商保留的”构成。</p>
    <p>[0309]	“状态记录”是表示“W1-Fi SD命令响应状态”是否出现的标志。当该标志被设置为“O”时，无信息呈现(主机不需要读取“W1-Fi SD命令响应状态”)并且，当该标识被设置为“I”时，呈现信息(主机需要读取“W1-Fi SD命令响应状态”)。</p>
    <p>[0310]	“W1-Fi SD命令id”表示通过W1-Fi SD卡命令寄存器由主机发出的W1-Fi SD命令的类型，并且在图23、图24和图25中所示的W1-Fi SD命令中的一个命令被记录。</p>
    <p>[0311]	“W1-Fi SD命令序列id”是当主机已经发出命令时，为了识别每个命令，由主机分配给命令的值的一个，并且设置相同的值。</p>
    <p>[0312]	“命令响应状态”是表示由主机发出的命令的状态的信息，并且表示诸如发出的命令是否已经无任何问题而被卡接收并且处理、发出的命令是否由于任何问题而已经接收失败、发出的命令的处理是否已经被完成，发出的命令的处理是否已经被挂起以及发出的命令的处理是否还未成功的状态。例如，当发出的命令的设置有问题时，或者当因为卡侧正在处理另一个命令，新命令不能被接收时，存在命令的接收不能被执行的可能性。</p>
    <p>[0313]	“用于错误状态的为供应商保留的”是表示当已经出现错误时，错误出现的原因的信息。</p>
    <p>[0314]	图29示出W1-Fi SD卡异步命令响应状态寄存器的配置示例。</p>
    <p>[0315]	“W1-Fi SD卡寄存器标识符”是表示该寄存器是W1-Fi SD卡异步命令响应状态寄存器的信息，并且字符串“WIFISDPS ”被记录在其中。</p>
    <p>[0316]	“W1-Fi SD卡寄存器的大小”是表示寄存器大小的信息，并且主机参考该信息获知应当发出多少次命令CMD48，并且应当读取多大的数据。</p>
    <p>[0317]	“W1-Fi SD异步命令响应状态的数量”是表示通过一次W1-Fi SD卡异步命令响应状态寄存器的读取，可以获取多少“异步命令响应状态”的信息。</p>
    <p>[0318]	“W1-Fi SD异步命令响应状态”由“状态记录”、“W1-Fi SD命令id”、“Wi_Fi SD命令序列id”、“异步命令响应状态”和“为供应商保留的用于错误状态”构成。</p>
    <p>[0319]	“状态记录”是表示“W1-Fi SD命令响应状态”是否呈现的标志。当该标志被设置为“O”时，无信息呈现(主机不需要读“W1-Fi SD命令响应状态”)，而当该标志被设置为“I”时，信息呈现(主机需要读取“W1-FiSD命令响应状态”)。</p>
    <p>[0320]	“W1-Fi SD命令id”表示通过W1-Fi SD卡命令寄存器由主机发出的W1-Fi SD命令的类型，并且记录在图23、图24和图25中所示的W1-Fi SD命令中的一个。[0321]	“W1-Fi SD命令序列id”是当主机已经发出命令时，为了识别每个命令，由主机分配给命令的其中一个值，并且相同的值被设置。</p>
    <p>[0322]	“异步命令响应状态”是表示主机发出的命令的状态的信息，并且表示诸如发出的命令是否已经无任何问题而被卡接收并且处理、发出的命令是否由于任何问题而已经接收失败、发出的命令的处理是否已经被完成，发出的命令的处理是否已经被挂起以及发出的命令的处理是否还未成功的状态。</p>
    <p>[0323]	“用于错误状态的为供应商保留的”是表示当错误已经出现时，错误出现的原因的信息。</p>
    <p>[0324]	图30示出W1-Fi SD卡响应数据寄存器的配置示例。</p>
    <p>[0325]	“W1-Fi SD卡标识符”是表明该寄存器是W1-Fi SD卡响应数据寄存器的信息，并且字符串“WIFISDRD”被记录在其中。</p>
    <p>[0326]	“W1-Fi SD卡寄存器的大小”是表示寄存器大小的信息，并且主机参考该信息获知应当发出多少次命令CMD48，并且应当读取多大的数据。</p>
    <p>[0327]	“W1-Fi SD响应数据的数量”是表示通过一次W1-Fi SD卡响应数据寄存器的读取，可以获取多少“响应数据”的信息。</p>
    <p>[0328]	“W1-Fi SD命令id”表示通过W1-Fi SD卡命令寄存器由主机发出的W1-Fi SD命令的类型，并且在图23、图24和图25中所示的W1-Fi SD命令中的一个被记录。</p>
    <p>[0329]	“W1-Fi SD命令序列id”是当主机已经发出命令时，为了识别每个命令，由主机分配给命令的其中一个值，并且相同的值被设置。</p>
    <p>[0330]	“响应数据大小”是表示“响应数据”的大小，并且作为“响应数据”，在通过W1-FiSD命令写寄存器传送HTTP请求消息时，或者在通过W1-Fi SD响应数据寄存器接收HTTP响应消息时，当发出诸如“SendMessageByRegister”命令的命令时,接收的数据被记录。</p>
    <p>[0331]	图31示出W1-Fi SD卡ID列表寄存器的配置示例。</p>
    <p>[0332]	“W1-Fi SD卡寄存器标识符”是表明该寄存器是W1-Fi SD卡ID列表寄存器的信息，并且字符串“WIFISDIL”被记录在其中。</p>
    <p>[0333]	“W1-Fi SD卡寄存器的大小”是表示寄存器大小的信息，并且通过参考该信息，主机获知应当发出多少次命令CMD48，并且应当读取多大的数据。</p>
    <p>[0334]	“接收方ID的数量”表示多少接收方ID被包括在该列表中。也就是说，其表示有多少分别正在执行“P2P客户端应用”请求的接收方，该请求用于访问正在执行“P2P约束服务器应用”的发送方。</p>
    <p>[0335]	“接收方ID”是请求访问发送方的接收方的ID。该接收方的ID通过接收方的“卡</p>
    <p>配置信息”设置。</p>
    <p>[0336]	“接收方MAC地址”是请求访问发送方的接收方的MAC地址。</p>
    <p>[0337]	“接收方许可”是表示请求访问发送方的接收方访问是否被发送方许可的信息。也就是说，“接收方许可”是表示发送方是否已经许可每个接收方通过使用“SelectID”命令访问发送方。</p>
    <p>[0338]	图32示出W1-Fi SD卡SSID历史寄存器的配置示例。</p>
    <p>[0339]	“W1-Fi SD卡寄存器标识符”是表明该寄存器是W1-Fi SD卡SSID历史寄存器的信息，并且字符串“WIFISDSH”被记录在其中。[0340]	“W1-Fi SD卡寄存器的大小”是表示寄存器大小的信息，并且参考该信息，主机获知应当发出多少次命令CMD48，并且应当读取多大的数据。</p>
    <p>[0341]	在“SSID”中，记录当此前该卡已经被连接到无线局域网或者当无线局域网已经被构建时在SSID历史列表中使用的SSID的名称。</p>
    <p>[0342]	在“MAC地址”中，记录对应于当此前该卡已经被连接到无线局域网或者当无线局域网已经被构建时在SSID历史列表中使用的SSID的访问点(AP)的MAC地址。</p>
    <p>[0343]	应当注意的是，尽管未记载在寄存器中，但诸如密码、通道等每个SSID的信息被保存在卡中，并且，当主机被连接到无线局域网或者当无线局域网被构建时，如果特定的SSID未被指定，卡对于卡能够连接的或者通过使用前述信息能够构建的SSID执行搜索。</p>
    <p>[0344]	图33示出W1-Fi SD卡“配置信息”的配置示例。</p>
    <p>[0345]	“W1-Fi SD卡标识符”是表示该信息是W1-Fi SD卡“配置信息”的信息，并且字符串“WIFISDCI ”被记录在其中。</p>
    <p>[0346]	“配置信息的大小”是表示W1-Fi SD卡“配置信息”的大小的信息。</p>
    <p>[0347]	“ID”是配置为设置该卡的ID的信息，并且在“P2P客户端应用”的执行时，当接收方的ID被发送到发送方时被使用。</p>
    <p>[0348]	“DHCP使能”是配置为设置DHCP是否用于IP地址等的设置的信息。</p>
    <p>[0349]	“IP地址”是当IP地址被手动设置时使用的信息。</p>
    <p>[0350]	“子网掩码”是当“子网掩码”被手动设置时使用的信息。</p>
    <p>[0351]	“缺省网关”是当“缺省网关”被手动设置时使用的信息。</p>
    <p>[0352]	“首选DNS服务器”是当首选DNS服务器被手动设置时使用的信息。</p>
    <p>[0353]	“备用DNS服务器”是当备用DNS服务器被手动设置时使用的信息。</p>
    <p>[0354]	“超时”是配置为设置等待到当卡执行超时处理时的时间的信息。图27中所示的W1-Fi SD卡状态寄存器的“超时”信息反映该值，并且主机能够参考该信息。</p>
    <p>[0355]	“节电模式”是配置为设置该卡是否运行在节电模式下的信息。在卡不支持节电模式中，该设置被忽略。</p>
    <p>[0356]	“代理服务器数量”是被设置给该卡的代理服务器的数量。</p>
    <p>[0357]	“选择的代理服务器”是表示当前在使用被设置给该卡的代理服务器中的哪个。(例如指示列表的号码)</p>
    <p>[0358]	“代理服务器名称长度”是设置的代理服务器的名称的字符数。</p>
    <p>[0359]	“代理服务器名称”是被设置的代理服务器名称。</p>
    <p>[0360]	“端口号”是被设置的代理服务器的端口号。</p>
    <p>[0361]	作为“邮件地址”，执行邮件的传送/接收的用户的邮件地址被设置。</p>
    <p>[0362]	进一步,尽管未示出，该卡能够连接到的web服务的主机名，连接到web服务的必要信息(例如，用户账户名，密码以及令牌数据)等也能够被记录。</p>
    <p>[0363]	应当注意的是，对除信息项中的一部分外的对应于图26和图27中示出的W1-FiSD卡状态寄存器的信息项进行设置，并且对于哪个值被用于实际操作，可以通过发出命令CMD48参考W1-Fi SD卡状态寄存器。</p>
    <p>[0364]	图34示出通过使用写命令(CMD49)发出W1-Fi SD卡的命令的情况下的时序图，即当访问W1-Fi SD卡命令写寄存器被获得时的时序图。在此，图34中的CMD和DAT表示该卡接口上的命令总线和数据总线，并且卡操作表示在那时的卡的运行状态。</p>
    <p>[0365]	当写命令(CMD49)从主机设备发出时，SD卡11返回响应(Rl)给主机设备20。</p>
    <p>[0366]	接下来，主机设备20将W1-Fi SD卡命令写寄存器的数据(Wi_Fi SD卡命令)连同CRC &#8212;起发送至SD卡11。发送至SD卡11的数据被记录在SD卡11的指定扩展寄存器中。在SD卡11中，执行发送数据的分析，并且因此使数据总线进入忙状态。由此，额外的命令不能由主机设备20发出。</p>
    <p>[0367]	在执行数据的分析之后，当SD卡11能够接收命令时，SD卡11设置“0x01”至W1-FiSD卡状态寄存器的命令状态，并且当卡11不能接收命令时，设置“0x02”到其上。如果SD卡11能够接收命令，SD卡11转向命令的执行处理。通过图24至28所示的W1-Fi SD卡状态寄存器上的命令状态能够参考命令的执行状态。当命令的执行处理完成时，命令的执行状态被从命令状态中删除，并且执行结果反映在W1-Fi SD卡状态寄存器上用以换取命令执行状态的另一个状态信息项中。</p>
    <p>[0368]	图35是相应于图17的图，并且示出通过多个写命令(CMD49)发出W1-Fi SD卡命令情况下的时序图，即W1-Fi SD卡命令写寄存器的大小超过512字节的情况下的时序图。</p>
    <p>[0369]	当命令CMD49从主机设备20发出时，SD卡11返回响应(Rl)给主机放备20。</p>
    <p>[0370]	接下来，主机设备20首先将W1-Fi SD卡命令写寄存器的数据(W1-FiSD卡命令)的η分之一(I / η)连同CRC&#8212;起发送至SD卡11。也就是说，超过512字节量的数据的前512字节被传输。被传输的数据被记录在SD卡11的指定扩展寄存器中。此时，在SD卡11中，执行发送到其上的数据的分析，并且因此，使数据总线进入忙状态，由此，额外的命令不能由主机设备20发出。在这种情况下，SD卡11执行数据的分析。</p>
    <p>[0371]	在第一个数据中，记录数据大小(Nr)，并且因此通过数据分析知道命令CMD45将被相继发出。在此之后，忙状态被取消，并且状态被设置在等待下一命令CMD49的发出的地方。在忙状态被取消后，主机设备20以与以上描述相同的方式发出命令49，并且传输W1-Fi SD卡命令写寄存器的数据的剩余部分。在最后的命令CMD49从主机设备20发出，并且W1-Fi SD卡命令写寄存器的数据的最后η分之一(η / η)被传输之后，SD卡11分析数据(命令)，并执行命令的处理。</p>
    <p>[0372]	图36是相应于图20的图，并且示出多个W1-Fi SD卡命令被包括在由一个写命令(CMD49)发出的数据中的情况下的时序图。</p>
    <p>[0373]	例如，当相继执行多个文件的传输时，多个W1-Fi SD卡命令的发出被采用。</p>
    <p>[0374]	当命令CMD49由主机设备20发出时，SD卡11返回响应(Rl)至主机设备20。</p>
    <p>[0375]	接下来，主机设备20将W1-Fi SD卡命令写寄存器的数据连同CRC &#8212;起发送至SD卡11。在SD卡11的指定扩展寄存器中记录发送至SD卡11的数据。在SD卡11中，分析发送至其的数据(命令#1至#η)，因此，使数据总线进入忙状态，并且额外的命令不能由主机设备20发出。</p>
    <p>[0376]	在执行数据的分析之后，当SD卡11能够接收命令时，SD卡11为多个发出的命令的每个命令设置“0x01”至W1-Fi SD卡状态寄存器上的命令状态，并且当SD卡11不能接收命令时，为多个发出的命令的每个命令设置“0x02”至W1-Fi SD卡状态寄存器上的命令状态。如果SD卡11能够接收命令，SD卡11执行每个命令。通过W1-Fi SD卡状态寄存器上的命令状态，能够参考所有命令的执行状态。[0377]	当一个命令的执行处理被完成时，命令的执行状态被从命令状态中删除，并且执行结果反映在W1-Fi SD卡状态寄存器上的另一个状态信息项中，以交换命令执行状态。</p>
    <p>[0378]	接下来，执行仍未执行的命令。尽管图32中作为示例示出命令的执行处理依次被执行的时序图，也可以并行实施命令的执行处理。进一步,通过优化命令的执行顺序,SD卡11也可以实施命令的执行处理。</p>
    <p>[0379]	根据图36的实施例，多个W1-Fi SD卡命令包括在由一个命令发出的数据中，并且因此，可以有效地传输和执行W1-Fi SD卡命令。</p>
    <p>[0380]	图37示出使用读命令(CMD48)从W1-Fi SD卡11获取数据的情况的时序图，即获得对W1-Fi SD卡状态寄存器、W1-Fi SD卡响应数据寄存器、W1-Fi SD卡ID列表寄存器或者W1-Fi SD卡SSID历史寄存器的访问的情况。</p>
    <p>[0381]	当读命令(CMD48)从主机设备20发出时，SD卡11返回响应(Rl)至主机设备20。</p>
    <p>[0382]	接下来，根据命令CMD48的一个或多个自变量，SD卡11准备扩展寄存器中的W1-FiSD卡状态寄存器、W1-Fi SD卡响应数据寄存器、W1-FiSD卡ID列表寄存器和W1-Fi SD卡SSID历史寄存器中的一个的数据(例如，状态)。更进一步，SD卡11将扩展寄存器中的数据连同CRC &#8212;起发送到主机设备20。</p>
    <p>[0383]	图38是相应于图17的图，并且示出使用多个读命令(CMD48)获取W1-Fi SD卡数据的情况的时序图，即W1-Fi SD卡响应数据寄存器等的大小超过512字节的情况。</p>
    <p>[0384]	当命令CMD48从主机设备20发出时，SD卡11返回响应(Rl)至主机设备20。</p>
    <p>[0385]	接下来，SD卡11根据命令CMD48的一个或多个自变量，在扩展寄存器中准备W1-FiSD卡响应数据寄存器等的数据，并且将扩展寄存器中的数据连同CRC &#8212;起发送至主机设备20。</p>
    <p>[0386]	主机设备20分析接收到的数据。数据大小(Nr)被记录在第一数据中，并且因此获知需要依次被发出的命令CMD48。由此，在数据分析完成之后，下一命令CMD48被发出。此后被执行的操作与图35所示的命令CMD49的操作相同，并且因此省略其描述。</p>
    <p>[0387]	根据图38所示的实施例，可以安全地读取数据长度超过512字节的数据。</p>
    <p>[0388]	图39示出由SD卡支持的应用示例。</p>
    <p>[0389]	图40示出在启动时执行的主机设备20的操作。</p>
    <p>[0390]	当主机设备20启动时，主机设备20发出读命令(CMD48)，读取扩展寄存器31的页面O中的数据，并且确认作为由SD卡11拥有的扩展功能的无线通信功能(Sll，S12)。也就是说，确认什么无线通信功能(诸如W1-Fi和蓝牙)在SD卡11中被实现。然后，确定主机设备20是否支持SD卡11的扩展功能(S13)。结果，当主机设备20支持扩展功能时，读取扩展寄存器31的页面i(i是除O以外的值)中的数据(S14)，以便使得扩展功能有效，并且，确认SD卡11符合的例如标准的名称、版本、简档、设备信息等(S15)。基于以上，主机设备20使得由主机设备20拥有的最佳驱动器有效(S16)。由此，可以访问SD卡11的扩展功&#20489;泛。</p>
    <p>[0391]	接下来，确定是否已经确认扩展寄存器的所有页面的功能(S17)。结果，当存在剩余未确认的页时，确认下一页面中的卡的功能(S18,S16),并且,当所有页面已经被确认时，功能设置被终止。</p>
    <p>[0392]	图41是应用的状态转换图。[0393]	图39中所示的每个应用以“初始应用”是其初始化状态的方式被配置，通过“StartApplication”命令使每个应用进行到其他每个应用的转换，并且通过“EndApplication”命令,使每个应用返回到初始状态。由此，可以防止各个应用被同时执行、减少卡实现的负担并且简化主机的应用的使用方法。</p>
    <p>[0394]	图42是无线局域网的状态转换图。</p>
    <p>[0395]	无线局域网的状态被分类为“初始/失败”、“扫描”、“AP”、“STA”以及“关联”。</p>
    <p>[0396]	“初始/失败”表示无线局域网的初始状态；然而，当任何处理不成功时，无线局域网进行到与初始状态相同的状态的转换。</p>
    <p>[0397]	“扫描”是表示当前正在通过命令执行的搜索的状态。当搜索被终止，并且“SSIDLIST”文件被输出时，状态返回到初始状态。</p>
    <p>[0398]	“AP”是无线局域网当前被作为访问点构建的状态。“AP”是执行配置为从初始状态建立基础设施的AP的命令，或者执行配置为启动一需要变成AP的应用的命令的状态。</p>
    <p>[0399]	“关联”是一种状态，其中为了连接到作为基础设施的STA的无线局域网执行关联，并且DHCP服务器执行IP地址的设定等。当以上处理成功时，该状态使得转换到建立到无线局域网的连接作为STA的状态，并且，当处理失败时，状态返回到补充说明(supplementary-note)状态。</p>
    <p>[0400]	应当注意的是，无线局域网的当前状态被反映在图24所示的W1-Fi SD卡状态寄存器的WLAN信息中，并且主机能够通过发出命令CMD48获知各个时间的无线局域网状态，并执行相应于无线局域网当前状态的命令。</p>
    <p>[0401]	图43示出W1-Fi SD卡内的目录配置。</p>
    <p>[0402]	“DCM”目录是配置为记录由照相机文件系统(DCF)的设计规则指定的摄像数据的目录。进一步，MISC文件是配置为记录由数字打印顺序格式(DPOF)标准指定的影印以及其他数据的目录。“WIFISD”目录是配置为记录与当前实施例中W1-Fi SD卡相关联的数据的目录。</p>
    <p>[0403]在“WIFISD”	目录下，“ DOWNLOAD ” 目录、“CONFIG” 目录、“SSID LIST” 文件以及“FILELIST”文件被记录。</p>
    <p>[0404]	“DOWNLOAD”目录是配置为记录从其他方的服务器接收到的HTTP响应消息的目录。当 “SendHttpMessage” 命令、“SendHttpFile” 命令、“SendHttpSSLMessage” 命令或者“SendSSLFile”命令被执行时，卡传送HTTP请求消息至其他方的服务器，并且卡将来自其他方的服务器的HTTP响应消息作为文件保存在“RESPONSE”目录下。此时，HTTP请求线、HTTP消息头和HTTP消息体被记录在该文件中，并且此时的文件名通过使用所发出的命令的“W1-Fi SD命令序列id”与其他HTTP响应消息相区别，并且使得主机参考HTTP响应消息变为可能。当文件将被记录时，卡也可以分析HTTP响应消息，提取附加到HTTP响应消息上的数据并且将数据作为另一个文件保存。例如，当数据(其MME类型是image / jpeg)被附加到HTTP响应消息时，卡识别MME类型的子类型，并且将数据保存在JPEG目录下。作为此时的文件名，使用诸如“DL000000.JPEG”至“DL999999.JPEG”的指定的序列号中的一个。当关于下载的文件的文件名信息被包括在HTTP响应消息中时，文件名也可以被使用。当数据(其MME类型是未知的)被包括在HTTP响应消息中时，整个消息被保存在“UNDEF”目录下。作为此时的文件名，使用指定的序列号“DL000000”至“DL999999”中的一个。[0405]	“CONFIG”文件是配置为记录图33所示的“Wi_Fi SD卡配置信息”的文件，并且主机能够编辑该文件。进一步，当主机执行“StartApplication”命令以执行到无线局域网的连接或者无线局域网的建立时，“卡配置信息”的设置信息被用于到无线局域网的连接以及无线局域网的设定。</p>
    <p>[0406]	“SSIDLIST”文件是输出文件。当“scanWiFi”命令被执行时，并且当卡输出列表至文件时，可连接SSID名、信号强度以及“AP”的MAC地址作为列表被存储在“SSIDLIST”文件中。主机可以通过参考该列表选择要被连接的SSID名，并且能够通过使用“SetSSID”命令来设置所选择的SSID名。</p>
    <p>[0407]	“FILELIST”文件是通过记录执行“P2P[约束]服务器应用”的发送方能够作为文件传送给执行“P2P客户端应用”的接收方的文件列表形成的文件。可以在“FILELIST”文件中记录要被传送的文件的缩略图文件的文件路径和文件名以及该文件的元数据文件的文件路径和文件名连同该文件的文件路径和文件名。由此，在执行从发送方的文件获取之前，接收方可以仅接收缩略图文件，并且当确认该缩略图时，仅选择并接收必要的文件。更进一步，在执行文件获取之前，可以从发送方仅获取元数据文件，通过使用包括在元数据文件中的信息(例如，拍摄的拍摄时间信息、拍摄地点信息、拍摄设备信息、拍摄内容信息等)对可获取的文件分类，并且可以向用户提供配置为选择将要获取的文件的层级菜单。应当注意的是，当缩略图文件和元数据文件不存在时，它们可以被省略。</p>
    <p>[0408]	图44是示出W1-Fi SD卡的命令处理流程的视图。</p>
    <p>[0409]	1.通过使用命令CMD49写入“Wi_Fi命令信息”至W1-Fi SD卡命令写寄存器，主机发出W1-Fi SD命令至该卡。</p>
    <p>[0410]	2.当命令被发出时，表示该卡是否已经接收发出的命令的信息被该卡记录在W1-Fi SD卡命令响应状态寄存器的“命令响应状态”中。更进一步，当发出的命令是异步命令时，信息也被记录在W1-Fi SD卡异步命令响应状态寄存器的“命令响应状态”中。</p>
    <p>[0411]	3.主机能够通过使用命令CMD48读取W1-Fi SD卡命令响应状态寄存器或者W1-FiSD卡异步命令响应寄状态存器的“命令响应信息”，并且确认卡已经接收由主机发出的命令或者卡由于某些原因(在发出的命令和自变量中已经存在错误，或者卡已经在命令处理的过程中，并且因此该开已经在卡不能接收新命令的状态下)不能够接收该命令。</p>
    <p>[0412]	4.更进一步，主机能够通过使用命令CMD48读取W1-Fi SD卡命令响应状态寄存器或者W1-Fi SD卡异步命令响应状态寄存器的“命令响应状态”，并且确认由主机发出的命令的处理状态(命令处于未处理状态，处于正在处理状态，处于处理后的成功状态，处于处理后的未成功状态或者处于处理挂起状态)。</p>
    <p>[0413]	5.处理已经完成的命令能够依次从W1-Fi SD卡命令响应状态寄存器或者W1-FiSD卡异步命令响应状态寄存器中删除，并且以后可以保持需要被参考的命令如现状。进一步，作为命令处理完成的结果，更新W1-Fi SD卡状态寄存器的“媒体改变”、“SSID列表更新”、“文件列表更新”、“响应数据更新”等信息项。</p>
    <p>[0414]	在此，W1-Fi SD卡命令响应状态寄存器或者W1-Fi SD卡异步命令响应状态寄存器能够以队列形式实现。由此，对于主机而言可以通过之前获知的卡能够接收的命令的数量通过由主机确定的时间发出命令。卡依据与卡能够接收的命令数量相应的数量，接受来自主机的命令发出，并且不接受数量超出以上数量的命令。卡按照接收的顺序处理命令。已经完成处理的命令可以被从队列中删除。如果主机发出额外的命令，所有处理完成的命令被从队列中删除。从而，卡可以接受与被删除的命令数量相应的数量的命令。</p>
    <p>[0415]	图50是示出命令响应流程的视图。</p>
    <p>[0416]	(I)初始地，命令响应状态处于“初始”状态。如果卡接受命令，状态进入“命令正在处理”状态。如果拒绝命令(例如，卡处于忙，卡不支持该命令，等等)，状态进入“命令被拒绝”状态，并且状态寄存器中的“CRU(命令响应更新)”和“CRE(命令响应错误)”被设置为“ lb”。(根据状态记录的时间可以跳过初始状态)</p>
    <p>[0417]	(2)主机设备通过读取命令响应状态和错误状态确认发出的命令被接受或是被拒绝。</p>
    <p>[0418]	(3)如果卡接受多个命令，卡在W1-Fi SD卡命令写寄存器数据中按照顺序，顺序地处理发出的命令。</p>
    <p>[0419]	(4)如果卡成功地完成命令处理，状态进入“处理成功”状态，并且在iSDIO状态中的“CRU(命令响应更新)”被设置为“lb”。如果失败，例如，网络错误、自变量错误、文件系统错误(文件未找到，文件打开/关闭错误等)，状态进入“处理失败”状态，并且状态寄存器中的“CRU(命令响应更新)”和“CRE(命令响应错误)”被设置为“lb”。(根据处理的速度，命令处理状态可以跳过)。</p>
    <p>[0420]	(5)当命令被记录在队列中时，主机设备可以通过发出“Abort”命令终止该命令。如果卡能够接受该终止，状态进入“处理终止”状态，并且iSDIO状态中的“CRU (命令响应更新)”被设置为“lb”。</p>
    <p>[0421 ] (6)主机设备通过读取命令响应状态确认命令处理是否已经成功或者失败。</p>
    <p>[0422]	图45是示出W1-Fi SD卡设置流程的视图。</p>
    <p>[0423]	当在卡中不存在“CONFIG”文件时，主机创建包括“卡配置信息”的“CONFIG”文件。此时，由主机指定的值(当没有值被指定时，是初始值)被设置为“卡配置信息”中的每个信息项。当无线局域网被连接到该卡或者被构建时，被设置为“卡配置信息”的值自动地被设置到该卡。当“CONFIG”文件不存在时，该卡在初始值被设置为“卡配置信息”的前提下运行。</p>
    <p>[0424]	然而，关于SSID和密码短语，在连接到无线局域网或者建立无线局域网之前，主机需要执行“SetSSID”命令以设置记录在主机中的SSID和密码短语。这是因为密码短语被记录在文件中，以便防止密码短语外流至外部。</p>
    <p>[0425]	在到无线局域网的连接或者无线局域网的建立之后，设置的SSID和“卡配置信息”的信息项怎样被设置，可以使用命令CMD48通过参考W1-Fi SD卡状态寄存器被获知。</p>
    <p>[0426]	更进一步，设置的SSID的历史连同密码短语以及“AP”的MAC地址被记录在卡中，并且，甚至在与SSID相关的信息未通过使用“SetSSID”命令被设置时，可以通过使用以前的历史执行无线局域网的连接/建立。应当注意的是，关于该信息，通过使用命令CMD48，能够参考W1-Fi SD卡SSID历史寄存器，并且关于非必需的SSID (例如，当前不存在的SSID)，能够通过使用“RemoveSSID”命令从W1-Fi SD卡SSID历史寄存器中删除特定的SSID。</p>
    <p>[0427]	图46是示出P2P应用流程的视图。</p>
    <p>[0428]	1:发送方主机创建“FILELIST”文件，该文件通过到列表中形成可以由接收方访问的文件名称而获得。[0429]	2:为了建立无线局域网，发送方主机通过使用命令CMD49发出“ SetSSID ”命令以设置SSID的名称、密码短语和认证系统至发送方卡。</p>
    <p>[0430]	3:为了启动“P2P约束服务器应用”或者“P2P服务器应用”，发送方主机通过命令CMD49 发出 “StartApplication”命令。</p>
    <p>[0431]	4:为了搜索接收方卡能够连接到的无线局域网，接收方主机通过使用命令CMD49发出“ScanWiFi”命令。</p>
    <p>[0432]	4.1:为了连接到无线局域网，接收方卡执行搜索(未示出)。</p>
    <p>[0433]	4.1.1:接收方卡创建“SSIDLIST”文件，该文件通过到接收方卡的列表中形成该卡能够连接到的SSID的名称而获得(未示出)。</p>
    <p>[0434]	5:接收方主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“SSID列表更新”，以确认由接收方卡执行的对无线局域网的搜索已经无任何问题而被完成。</p>
    <p>[0435]	6:接收方主机读取该卡中的“SSIDLIST”文件。</p>
    <p>[0436]	7:接收方主机从“SSIDLIST”文件中选择SSID，并且通过使用命令CMD49发出“SetSSID”命令，以便为接收方卡设置SSID和密码短语。在此，当接收方主机未执行SSID选择时，接收方卡使用卡中记录的“SSID历史”中的SSID设置以及过去的设置。进一步，也可以通过WPS为接收方卡和发送方卡执行SSID设置。</p>
    <p>[0437]	8:为了启动“P2P客户端应用”，接收方主机通过使用命令CMD49执行“StartAppliction” 命 令。</p>
    <p>[0438]	8.1:接收方卡请求来自发送方卡的关联。</p>
    <p>[0439]	8.2:当接收方卡连接到发送方卡时，接收方卡请求作为DHCP服务器的发送方卡执行IP地址分配。</p>
    <p>[0440]	8.3:当IP地址被分配给接收方卡时，接收方卡向发送方卡传送以下HTTP请求消息，该消息配置为将接收方的ID通知给发送方卡。在此，作为“ReceiverlD”，接收方的“ID”被设置，作为“ReceiverMACAddress”，接收方的MAC地址被设置，并且作为“SenderlPaddress”,发送方的IP地址被设置。</p>
    <p>[0441]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00351.png"> <img id="idf0001" file="CN103477333AD00351.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00351.png" class="patent-full-image" alt="Figure CN103477333AD00351"> </a> </div>
    <p>[0442]	9:发送方主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“ID列表更新”，并且确认“ID列表”被更新。(在P2P约束服务器应用不约束其他接收方的情况下，该处理可以被忽略)</p>
    <p>[0443]	10:当“ID列表”被更新时，发送方主机通过使用命令CMD48读取W1-Fi SD卡ID列表寄存器。(在P2P约束服务器应用未约束其他接收方的情况下，该处理可以被省略。)</p>
    <p>[0444]	11:发送方主机通过使用命令CMD49发出“SelectID”命令，并且选择将被许可的接收方的ID以执行来自列表中接收方ID的接收。(在P2P约束服务器应用未约束其他接收方的情况下，该处理可以被省略。)[0445]	11.1:发送方卡传送以下HTTP请求消息给发送方以通知接收方卡已经许可接收。在此,“ReceiverlPaddress”表示接收方的IP地址。(在P2P约束服务器应用未约束其他</p>
    <p>接收方的情况下，该处理可以被省略。)</p>
    <p>[0446]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00361.png"> <img id="idf0002" file="CN103477333AD00361.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00361.png" class="patent-full-image" alt="Figure CN103477333AD00361"> </a> </div>
    <p>[0447]	11.1.1:如果接收被许可，接收方卡传送以下HTTP请求消息至发送方卡以便从发送方卡下载“FILELIST”文件。在此，“SenderlPaddress”表示发送方的IP地址。(在P2P约束服务器应用未约束其他接收方的情况下，该处理可以在接收被许可的前提下被执行。)</p>
    <p>[0448]	12:接收方主机读取W1-Fi SD卡状态寄存器的“文件列表更新”，以确认“FILELIST”文件的下载已经被完成。</p>
    <p>[0449]	13:接收方主机读取卡中的“FILELIST”文件。</p>
    <p>[0450]	14:接收方主机通过使用命令CMD49发出“GetFile”命令，并且指示接收方卡基于写入到“FILELIST”文件中的信息(URL)执行缩略图文件和元数据文件的下载。</p>
    <p>[0451]	14.1:接收方卡传送以下HTTP请求消息给发送方卡，并且下载指定的缩略图文件或者兀数据文件以将文件记录在卡中。在此,“SenderlPaddress”表示发送方的IP地址，并且“filepath”表不文件路径，以及“filename”表示文件名。</p>
    <p>[0452]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00362.png"> <img id="idf0003" file="CN103477333AD00362.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00362.png" class="patent-full-image" alt="Figure CN103477333AD00362"> </a> </div>
    <p>[0453]	15:接收方主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“当前HTTP”或者W1-Fi SD卡命令响应状态寄存器的“命令响应状态”，并且确认缩略图文件或者元数据文件的下载已经完成。上述过程被重复的次数相应于缩略图文件或者元数据文件的数量。</p>
    <p>[0454]	16:接收方用户通过使用提前获取的缩略图文件或者元数据文件选择要被接收的文件。接收方主机通过使用命令CMD49发出“GetFile”命令，并且基于在“FILELIST”文件中描述的信息(URL)，指示接收方卡下载由用户选择的文件。</p>
    <p>[0455]	16.1:接收方卡传送以下HTTP请求消息至发送方卡，下载指定文件，并且将文件记录在卡中。在此，“SenderlPaddress”表示发送方的IP地址，“fil印ath”表示文件路径，“filename”表示文件名。</p>
    <p>[0456]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00363.png"> <img id="idf0004" file="CN103477333AD00363.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00363.png" class="patent-full-image" alt="Figure CN103477333AD00363"> </a> </div>
    <p>[0457]	17:接收方主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“当前HTTP”或者W1-Fi SD卡命令响应状态寄存器的“命令响应状态”，并且确认由用户指定的文件的下载已经完成。上述过程被重复的次数相应于由用户指定的文件的数量。</p>
    <p>[0458]	18:当由接收方卡执行的所有文件的下载被完成时，接收方主机通过使用命令CMD49发出“EndApplication”命令，并且指示接收方卡终止应用，以及终止到无线局域网的连接。</p>
    <p>[0459]	18.1:接收方卡传送以下HTTP请求消息至发送方卡以通知发送方卡下载已经完成。在此,“SenderlPaddress”表示发送方的IP地址。</p>
    <p>[0460]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00371.png"> <img id="idf0005" file="CN103477333AD00371.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103477333A/CN103477333AD00371.png" class="patent-full-image" alt="Figure CN103477333AD00371"> </a> </div>
    <p>[0461]	18.1.1已经从所有已连接的接收方卡通知下载的完成，并且发送方卡终止无线局域网的建立。</p>
    <p>[0462]	19:发送方主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“WLAN”，并且确认无线局域网的建立已经被终止。</p>
    <p>[0463]	20:当无线局域网的建立已经被终止时，发送方主机发出“EndApplication”命令以指示发送方卡终止该应用。</p>
    <p>[0464]	图47是示出服务器上传应用的流程的视图。</p>
    <p>[0465]	1:为了搜索主机能够连接的无线局域网，主机通过使用命令CMD49发出“ScanWiFi” 命令。</p>
    <p>[0466]	1.1:为了连接到无线局域网，卡执行搜索。</p>
    <p>[0467]	1.1.1:卡创建“SSIDLIST”文件，该文件通过到卡的列表中将卡形成该卡能够连接到的SSID的名称而获得。</p>
    <p>[0468]	2:主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“SSID列表更新”，以确认由卡执行的无线局域网的搜索已经无任何问题被完成。</p>
    <p>[0469]	3:主机读取卡中的“SSIFLIST”文件。</p>
    <p>[0470]	4:主机从“SSIDLIST”文件中选择SSID，并且通过使用命令CMD49发出“SetSSID”命令以便设置SSID和密码短语至卡。在此，当主机不执行SSID的选择时，卡使用记录在卡中的“SSID历史”中的SSID的设置以及以往的设置。进一步，可以通过“WPS”执行对卡和连接到卡的“AP”的SSID设置。</p>
    <p>[0471]	5:为了启动服务器上传应用，主机通过使用命令CMD49执行“StartApplication”命令。</p>
    <p>[0472]	5.1:卡请求来自“AP”的关联。</p>
    <p>[0473]	5.2:当卡连接到“AP”时 ，卡请求作为DHCP服务器的“AP”以执行IP地址分配。</p>
    <p>[0474]	6:主机读取W1-Fi SD卡状态寄存器的“WLAN”，并且确认到无线局域网的连接正在进行而无任何问题。</p>
    <p>[0475]	7:当发出“SendHttpMessage，，命令、“SendHttpFiIe”命令、“SendHttpSSLMessage”命令或者“SendHttpSSLFile”命令时，主机在卡中创建包括要被传送到其他方的服务器的HTTP请求消息内容的文件。另一方面，当发出“SendHttpMessageByRegister”命令、“SendHttpFileByRegister” 命令、“SendHttpSSLMessageByRegister，，命令或者“SendHttpSSLFileByRegister”命令时，主机创建要被传送到其他方服务器的HTTP请求消息，该消息不在文件中而是在主机设备的存储器中。</p>
    <p>[0476]	8:主机通过使用命令 CMD49 发出 “SendHttpMessage” 命令、“SendHttpFile” 命令、“ SendHttpSSLMessage，，命令、“ SendHttpSSLF i Ie，，命令、“ SendHttpMessageByRegister ”命令、“SendHttpFileByRegister” 命令、“Sen dHttpSSLMessageByRegister” 命令或者“SendHttpSSLFileByRegister”命令以指不卡传送HTTP请求消息。</p>
    <p>[0477]	8.1:卡从卡中创建的文件或者从W1-Fi SD卡命令写寄存器中读取HTTP请求消息，并且传送HTTP消息至其他方的服务器。此时，在“SendHttpFile”命令、“SendHttpSSLFile” 命令、“SendHttpFileByRegister” 命令或者“SendHttpSSLFileByRegister”命令的情况下，HTTP请求消息的传送通过将HTTP请求消息中的特定字符串转移至卡的指定文件中执行，即通过将卡中的文件附加至HTTP请求消息执行。</p>
    <p>[0478]	8.1.1:其他方服务器响应于传送的HTTP请求消息，将HTTP响应消息返回给该卡。在此，在该卡已经发出“SendHttpMessage”命令、“SendHttpFile”命令、“SendHttpSSLMessage”命令或者“SendHttpSSLFile”命令的情况下，该卡将HTTP响应消息作为文件记录在卡中。另一方面，在该卡已经发出SendHttpMessageByRegister”命令、“SendHttpFileByRegister” 命令、“SendHttpSSLMessageByRegister” 命令或者“SendHttpSSLFileByRegister”命令的情况下，该卡将HTTP响应消息记录在W1-Fi SD卡响应数据寄存器的“message”中。</p>
    <p>[0479]	9:主机通过使用命令CMD48读取W1-Fi SD卡状态寄存器的“当前HTTP”或者W1-Fi SD卡命令响应状态寄存器的“命令响应状态”以确认HTTP请求消息的传送和HTTP响应消息的接收已经被完成。</p>
    <p>[0480]	10:主机读取文件中记录的HTTP响应消息。可替换地，主机通过使用命令CMD48读取HTTP响应消息中记录的HTTP响应消息。上述过程重复的次数相应于用户指定的文件数量。</p>
    <p>[0481]	11:主机通过使用命令CMD49发出“EndApplication”命令以指示卡终止应用，以及连接到无线局域网。</p>
    <p>[0482]	图48是示出P2P应用中发送方侧主机的“文件列表”生成处理和文件传送处理的流程的视图。</p>
    <p>[0483]	发送方主机启动P2P服务器应用或者P2P约束服务器应用。</p>
    <p>[0484]	更进一步，发送给主机显示配置为选择要被传送至用户的文件的菜单，并且发送方用户根据该菜单选择将要被传送的文件(S21)。</p>
    <p>[0485]	发送方主机提取所选择的文件的文件路径和文件名(S22)。更进一步，发送方主机提取所选择文件的元数据(S23)。</p>
    <p>[0486]	在此，当存在所选择文件的元数据文件时，提取元数据文件的文件名和文件路径。</p>
    <p>[0487]	另一方面，关于缩略图，发送方主机首先确认所选择文件的缩略图是否存在在卡中(S24)。如果在其中存在缩略图，发送方主机提取文件路径和文件名作为用于传送的缩略图文件(S25)。接下来，如果不存在缩略图，发送方主机确认缩略图是否被包括在文件中(S26)，并且如果缩略图被包括在其中，发送方主机拷贝缩略图至卡作为用于传送的缩略图文件，并且从文件中提取文件路径和文件名(S27)。如果缩略图不包括在文件中，发送方主机创建文件的缩略图，在卡中保存缩略图，并且提取文件路径和文件名(S28)。</p>
    <p>[0488]	发送方主机创建来自以上描述的提取的数据的“FILELIST”文件，并在卡中保存该文件(S29)。</p>
    <p>[0489]	发送方卡依照来自接收方卡的请求传送“FILELIST”文件至接收方卡(S30)。更进一步，发送方卡依据来自接收方卡的请求传送“文件列表”中描述的文件至接收方卡。</p>
    <p>[0490]	当传送被完成时，发送方主机终止P2P服务器应用或者P2P约束服务器应用。</p>
    <p>[0491]	图49是示出P2P应用中接收方侧主机的文件选择处理和文件获取处理的流程的视图。</p>
    <p>[0492]	接收方主机启动P2P客户端应用。</p>
    <p>[0493]	更进一步，在接收方卡从发送方卡获取“文件列表”后，接收方主机读取“文件列表” (S41)。</p>
    <p>[0494]	当接收方用户期望获取发送方卡的所有文件时，接收方用户从发送方侧下载“文件列表”中描述的所有文件，并且将文件保存在接收方卡中的文件夹中(S42，S43)。</p>
    <p>[0495]当接收方用户期望从发送方侧卡选择并获取部分文件时，接收方主机为接收方用户提供用于文件选择的菜单。</p>
    <p>[0496]	在此时，当菜单中未示出缩略图时，可获取文件的元数据被显示在菜单上(S44，S45)。</p>
    <p>[0497]	当菜单中示出缩略图时，如果缩略图文件存在在发送方卡中，接收方主机获取缩略图文件，并在菜单上显示可获取文件的缩略图和元数据(S46，S47, S48)。如果缩略图文件在发送方卡中不存在，接收方主机或接收方卡创建替代缩略图(S49)，并在菜单上显示可获取文件的缩略图和元数据(S48)。</p>
    <p>[0498]	在此，如果元数据文件类似缩略图文件，在发送方卡中存在，接收方主机可以获取元数据文件，并可以通过参考元数据文件在菜单上显示更详细的元数据。</p>
    <p>[0499]	接收方用户基于显示的菜单选择将被获得的文件(S50)。</p>
    <p>[0500]	接收方主机从发送方卡下载所选择的文件，并将文件保存在接收方卡的文件夹中(S43)。</p>
    <p>[0501]	当接收完成时，接收方主机终止P2P客户端应用。</p>
    <p>[0502]	根据上述实施例，可获得以下益处。</p>
    <p>[0503]	众多卡制造商在SD卡中实现任意功能,并且因此并入在SD卡中的通信功能的类型具有更广的范围。为了控制这些通信功能，对于各种控制项而言有必要将定义分配给SD卡的命令空间。然而，通信功能的范围很广，并且因此如果为所有通信功能的控制进行的定义被建立，命令的地址空间就变得不足。相反，根据以上实施例，通过使用由多个页面构成的扩展寄存器，控制由SD卡拥有的通信功能，并且因此，通过定义用于作为通信对象的数据的传递的页面，可以有效地将通信功能的控制的定义分配给命令空间。</p>
    <p>[0504]	进一步，根据以上实施例，通过使用由命令(CMD48，CMD49)指定的扩展寄存器，可以容易地控制通信功能。</p>
    <p>[0505]	更进一步，对于存储器主机控制器而言，甚至可以通过使用命令(CMD48，CMD49)有效地控制扩展寄存器。</p>
    <p>[0506]	尽管已经描述特定实施例，但仅通过示例的方式呈现这些实施例，并且并非意图限制本发明的范围。实际上，在此描述的新的实施例可以以各种其他形式实现；更进一步，在此描述的实施例的形式中的各种省略、替换即以及改变可以在不背离本发明精神的情况下实现。所附的权利要求以及它们的等价物意图覆盖落入本发明范围和精神内的形式和变型。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN1464453A?cl=zh">CN1464453A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2002年6月6日</td><td class="patent-data-table-td patent-date-value">2003年12月31日</td><td class="patent-data-table-td ">联想(北京)有限公司</td><td class="patent-data-table-td ">基于分布式文件系统的文件存储系统及其文件访问方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101895572A?cl=zh">CN101895572A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年6月28日</td><td class="patent-data-table-td patent-date-value">2010年11月24日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">一种sd卡与主控设备之间的数据交互方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20070061581">US20070061581</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2005年12月22日</td><td class="patent-data-table-td patent-date-value">2007年3月15日</td><td class="patent-data-table-td ">Micky Holtzman</td><td class="patent-data-table-td ">Methods used in a secure yet flexible system architecture for secure devices with flash mass storage memory</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20070094504">US20070094504</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2006年11月22日</td><td class="patent-data-table-td patent-date-value">2007年4月26日</td><td class="patent-data-table-td ">C-Guys, Inc.</td><td class="patent-data-table-td ">Sdio controller</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0013380000">G06F13/38</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F2213/3804">G06F2213/3804</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F2213/3814">G06F2213/3814</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=WRHpCAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F13/385">G06F13/385</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2013年12月25日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年1月22日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/1996fdf38d26fbb9f75e/CN103477333A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E8%83%BD%E5%A4%9F%E6%8E%A7%E5%88%B6%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E5%8A%9F%E8%83%BD%E7%9A%84%E5%AD%98%E5%82%A8.pdf?id=WRHpCAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0BVuTtgsmnU5mmLKM6i4cjoak8JQ"},"sample_url":"https://www.google.com/patents/reader?id=WRHpCAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>