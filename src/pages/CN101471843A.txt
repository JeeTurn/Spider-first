<!DOCTYPE html><html><head><title>专利 CN101471843A - 中继服务器以及中继通信系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="中继服务器以及中继通信系统"><meta name="DC.contributor" content="谷本好史" scheme="inventor"><meta name="DC.contributor" content="村田机械株式会社" scheme="assignee"><meta name="DC.date" content="2008-12-23" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供一种在终端之间共享资源的情况下，容易取得资源信息和资源实体的同步的中继服务器和中继通信系统。在发出了共享资源信息的同步指示的情况下，中继服务器根据该共享资源信息，向各个资源共享终端发送该同步指示。接收到同步指示的各个资源共享终端在该共享资源信息中包含本机是所有者的资源的情况下，将资源信息与资源实体进行比较。其结果，在资源信息与资源实体不一致的情况下，把该资源信息更新为最新的信息，并向中继服务器(1)发送包含该资源信息的共享资源信息的更新指示。这样，能够利用一次的同步指示，进行网络整体的资源信息的同步。"><meta name="DC.date" content="2009-7-1"><meta name="citation_patent_publication_number" content="CN:101471843:A"><meta name="citation_patent_application_number" content="CN:200810187906"><link rel="canonical" href="https://www.google.com/patents/CN101471843A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101471843A?cl=zh"/><meta name="title" content="专利 CN101471843A - 中继服务器以及中继通信系统"/><meta name="description" content="本发明提供一种在终端之间共享资源的情况下，容易取得资源信息和资源实体的同步的中继服务器和中继通信系统。在发出了共享资源信息的同步指示的情况下，中继服务器根据该共享资源信息，向各个资源共享终端发送该同步指示。接收到同步指示的各个资源共享终端在该共享资源信息中包含本机是所有者的资源的情况下，将资源信息与资源实体进行比较。其结果，在资源信息与资源实体不一致的情况下，把该资源信息更新为最新的信息，并向中继服务器(1)发送包含该资源信息的共享资源信息的更新指示。这样，能够利用一次的同步指示，进行网络整体的资源信息的同步。"/><meta property="og:title" content="专利 CN101471843A - 中继服务器以及中继通信系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101471843A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101471843A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101471843A&amp;usg=AFQjCNEYZV6xmB_3rzOuWkMQ70s8CkpAvw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/9059c9c710138783d01b/CN101471843A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/9059c9c710138783d01b/CN101471843A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101471843A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101471843A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101471843A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101471843B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101471843A?cl=zh" style="display:none"><span itemprop="description">本发明提供一种在终端之间共享资源的情况下，容易取得资源信息和资源实体的同步的中继服务器和中继通信系统。在发出了共享资源信息的同步指示的情况下，中继服务器根据该共享资源信息，向各个资源共享终端发送该同步...</span><span itemprop="url">https://www.google.com/patents/CN101471843A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101471843A - 中继服务器以及中继通信系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101471843A - 中继服务器以及中继通信系统" title="专利 CN101471843A - 中继服务器以及中继通信系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101471843 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200810187906</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2009年7月1日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2008年12月23日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年12月25日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101471843B?hl=zh-CN&amp;cl=zh">CN101471843B</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2075975A1?hl=zh-CN&amp;cl=zh">EP2075975A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2075975B1?hl=zh-CN&amp;cl=zh">EP2075975B1</a>, </span><span class="patent-bibdata-value"><a href="/patents/US8949419?hl=zh-CN&amp;cl=zh">US8949419</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20090164636?hl=zh-CN&amp;cl=zh">US20090164636</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200810187906.3, </span><span class="patent-bibdata-value">CN 101471843 A, </span><span class="patent-bibdata-value">CN 101471843A, </span><span class="patent-bibdata-value">CN 200810187906, </span><span class="patent-bibdata-value">CN-A-101471843, </span><span class="patent-bibdata-value">CN101471843 A, </span><span class="patent-bibdata-value">CN101471843A, </span><span class="patent-bibdata-value">CN200810187906, </span><span class="patent-bibdata-value">CN200810187906.3</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%B0%B7%E6%9C%AC%E5%A5%BD%E5%8F%B2%22">谷本好史</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E6%9D%91%E7%94%B0%E6%9C%BA%E6%A2%B0%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%22">村田机械株式会社</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101471843A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101471843A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101471843A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (1),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (14),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200810187906&amp;usg=AFQjCNHEixmjqTM37U5S7NhRXm7EzpCdRA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101471843A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHmVWMMMT6M7yW918t7oQs3_SzJ4g"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT75809676" lang="ZH" load-source="patent-office">中继服务器以及中继通信系统</invention-title>
    </span><br><span class="patent-number">CN 101471843 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA53564677" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供一种在终端之间共享资源的情况下，容易取得资源信息和资源实体的同步的中继服务器和中继通信系统。在发出了共享资源信息的同步指示的情况下，中继服务器根据该共享资源信息，向各个资源共享终端发送该同步指示。接收到同步指示的各个资源共享终端在该共享资源信息中包含本机是所有者的资源的情况下，将资源信息与资源实体进行比较。其结果，在资源信息与资源实体不一致的情况下，把该资源信息更新为最新的信息，并向中继服务器(1)发送包含该资源信息的共享资源信息的更新指示。这样，能够利用一次的同步指示，进行网络整体的资源信息的同步。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(17)</span></span></div><div class="patent-text"><div mxw-id="PCLM22658937" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1. 一种中继服务器，其特征在于，具有：中继组信息登记部，其存储包含能够与本机之间相互连接的其他中继服务器的中继组的信息；共享资源信息登记部，当在上述中继组内在多个客户终端之间将资源共享的情况下，存储共享资源信息，且该共享资源信息包含与该资源相关的信息、和将该资源共享的客户终端亦即资源共享终端的账户的信息；和控制部，其通过接收上述共享资源信息的同步指示，向上述资源共享终端或本机以外的中继服务器发送同步指示，并且在接收到上述同步指示的上述资源共享终端能够操作上述资源实体的情况下，使该资源共享终端检查该资源实体，并根据需要更新上述共享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 根据权利要求l所述的中继服务器，其特征在于，上述控制部通过接收从上述客户终端发送的同步指示，把同步指示 分发给上述自身以外的中继服务器或本机下属的资源共享终端。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 根据权利要求l所述的中继服务器，其特征在于，在本机下属的资源共享终端中进行了上述共享资源信息的更新的 情况下，把该更新反映在上述自身以外的中继服务器和本机下属的资源 共享终端的至少任意一方的共享资源信息中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 根据权利要求2所述的中继服务器，其特征在于，在本机下属的资源共享终端中进行了上述共享资源信息的更新的 情况下，把该更新反映在上述自身以外的中继服务器和本机下属的资源 共享终端的至少任意一方的共享资源信息中。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 根据权利要求l所述的中继服务器，其特征在于，接收到上述同步指示的上述资源共享终端，对于该资源共享终端本 机能够操作的上述资源确认是否存在实体，在不存在上述实体的情况 下，从上述共享资源信息中删除与对应的资源相关的信息，更新上述共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6. 根据权利要求2所述的中继服务器，其特征在于， 接收到上述同步指示的上述资源共享终端，对于该资源共享终端本机能够操作的上述资源确认是否存在实体，在不存在上述实体的情况 下，从上述共享资源信息中删除与对应的资源相关的信息，更新上述共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7. 根据权利要求3所述的中继服务器，其特征在于，接收到上述同步指示的上述资源共享终端，对于该资源共享终端本 机能够操作的上述资源确认是否存在实体，在不存在上述实体的情况 下，从上述共享资源信息中删除与对应的资源相关的信息，更新上述共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8. 根据权利要求4所述的中继服务器，其特征在于，接收到上述同步指示的上述资源共享终端，对于该资源共享终端本 机能够操作的上述资源确认是否存在实体，在不存在上述实体的情况 下，从上述共享资源信息中删除与对应的资源相关的信息，更新上述共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9. 根据权利要求5所述的中继服务器，其特征在于，在上述共享资源信息登记部中可登记多个共享资源信息，在与不存 在上述实体的资源相关的信息被包含在多个上述共享资源信息中的情 况下，从各个共享资源信息中删除与对应的资源相关的信息，更新该共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 根据权利要求6所述的中继服务器，其特征在于，在上述共享资源信息登记部中可登记多个共享资源信息，在与不存 在上述实体的资源相关的信息被包含在多个上述共享资源信息中的情 况下，从各个共享资源信息中删除与对应的资源相关的信息，更新该共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11. 根据权利要求7所述的中继服务器，其特征在于，在上述共享资源信息登记部中可登记多个共享资源信息，在与不存 在上述实体的资源相关的信息被包含在多个上迷共享资源信息中的情 况下，从各个共享资源信息中删除与对应的资源相关的信息，更新该共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12. 根据权利要求8所述的中继服务器，其特征在于， 在上述共享资源信息登记部中可登记多个共享资源信息，在与不存在上述实体的资源相关的信息被包含在多个上述共享资源信息中的情 况下，从各个共享资源信息中删除与对应的资源相关的信息，更新该共 享资源信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13. 根据权利要求l所述的中继服务器，其特征在于， 能够分发以上述共享资源信息中的特定的资源为对象的同步指示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14. 根据权利要求2所述的中继服务器，其特征在于， 能够分发以上述共享资源信息中的特定的资源为对象的同步指示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15. 根据权利要求3所述的中继服务器，其特征在于， 能够分发以上述共享资源信息中的特定的资源为对象的同步指示。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16. 根据权利要求5所述的中继服务器，其特征在于， 能够分发以上述共享资源信息中的特定的资源为对象的同步指示。</div>
    </div>
    </div> <div class="claim"> <div num="17" class="claim">
      <div class="claim-text">17. &#8212;种中继通信系统，其特征在于， 具有多个中继服务器和多个客户终端， 上述中继服务器具有：中继组信息登记部，其存储包含能够与本机之间相互连接的其他中 继服务器的中继组的信息；共享资源信息登记部，其在上述中继组内在多个上述客户终端之间 将资源共享的情况下，存储共享资源信息，且该共享资源信息包含与该 资源相关的信息、和将该资源共享的上述客户终端亦即资源共享终端的 账户的信息；和控制部，其通过接收上述共享资源信息的同步指示，向上述资源共 享终端或本机以外的中继服务器分发同步指示，并且在接收到上述同步 指示的上述资源共享终端能够操作上述资源实体的情况下，使该资源共 享终端检查该资源实体，并根据需要更新上述共享资源信息。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES27853616" lang="ZH" load-source="patent-office" class="description">
    <p>中继服务器以及中继通信系统</p>
    <p>技术领域</p>
    <p>本申请主张于2007年12月25日提出的日本专利申请2007-333156号 的优先权，并在此引用其全部内容。</p>
    <p>本发明涉及通过网络实现资源共享的中继服务器以及中继通信系统。 背景技术</p>
    <p>一直以来，7&gt;知有被称为虚拟专用网络（Virtual Private Network:VPN)的通信系统。该VPN例如用于在与设置在各个地区的多 个分公司（据点）的LAN连接的终端之间通过因特网进行通信。利用上 述VPN，各个客户终端能够共享与处于远程的其他LAN连接的机器上 的各种资源（文件和文件夹）。</p>
    <p>但是，在上述VPN中，由于与远程的LAN上的机器共享资源，所 以在已将资源共享的各个机器之间进行关于该资源的信息的同步是非 常困难的。特别是，在管理该资源的机器未通过网络对该资源直接进行 了变更的情况下，其他机器不能识别该变更。</p>
    <p>因此，希望有一种能够容易实现与网络上的各个机器所共享的资源 有关的信息和该资源实体的同步的技术。</p>
    <p>发明内容</p>
    <p>本发明就是鉴于上述的情况而完成的，其主要目的是提供一种能够 在可以通过网络将资源共享的系统中，容易实现被共享的资源的信息和</p>
    <p>各个资源实体之间的同步的构成。</p>
    <p>根据本发明的观点，提供具有以下构成的中继服务器。即，该中继 服务器具有：存储中继组的信息的中继组信息登记部、共享资源信息登 记部、和控制部。上述中继组包含能够与本机之间相互连接的其他中继 服务器。上述共享资源信息登记部，当在上述中继组内在多个客户终端之间将资源共享的情况下，存储共享资源信息。上述共享资源信息包含 与该资源相关的信息、和将该资源共享的客户终端亦即资源共享终端的 账户的信息。上述控制部通过接收上述共享资源信息的同步指示，向上 述资源共享终端或本机以外的中继服务器分发同步指示。另外，在接收 到上述同步指示的上述资源共享终端能够操作上述资源实体的情况下， 上述控制部，使该资源共享终端检查该资源实体，并根据需要更新上述 共享资源信息。</p>
    <p>根据此构成，通过向中继组中的1个服务器发出1次同步指示，可 检查由资源共享终端或其他中继服务器所共享的全部资源的信息，并更 新共享资源信息。从而可容易地使资源实体与共享资源信息的内容一 致。</p>
    <p>在上述中继服务器中，优选，上述控制部通过接收从上述客户终端 发送的同步指示，把同步指示分发给各个中继服务器或本机下属的资源 共享终端。</p>
    <p>根据此构成，可由操作各个客户终端的用户发送同步指示。</p>
    <p>在上述中继服务器中，优选&#37318;用以下的构成。即，在本机下属的资 源共享终端中进行了上述共享资源信息的更新的情况下，中继服务器把 该更新反映在各个中继服务器和本机下属的资源共享终端的至少任意 一方的共享资源信息中。</p>
    <p>根据此构成，上述中继组中包含的中继服务器和各个中继服务器下</p>
    <p>属的资源共享终端可自动地获得最新的共享资源信息。从而可进行网络 整体的共享资源信息的同步。</p>
    <p>在上述中继服务器中，优选采用以下的构成。即，接收到上述同步 指示的上述资源共享终端，对于该资源共享终端本机能够操作的上述资 源确认是否存在实体。在不存在上述实体的情况下，资源共享终端从上 述共享资源信息中删除与对应的资源相关的信息，更新上述共享资源信 息。</p>
    <p>根据此构成，可在资源实体已被删除的情况下，从共享资源信息中 自动删除与对应的资源相关的信息。从而可防止将不存在实体的资源进行共享的情况。</p>
    <p>在上述中继服务器中，优选采用以下的构成。即，在上述共享资源 信息登记部中可登记多个共享资源信息。在与不存在上述实体的资源相 关的信息被包含在多个上述共享资源信息中的情况下，中继服务器从各 个共享资源信息中删除与对应的资源相关的信息，更新该共享资源信 息。</p>
    <p>另外，所谓"删除与资源相关的信息，，，除了从共享资源信息中删 除与资源相关的信息以外，还包括把表示该资源已被删除的信息作为与 资源相关的信息进行记录。</p>
    <p>根据此构成，能够利用 一次的同步指示进行多个共享资源信息的更新。</p>
    <p>在上述中继服务器中，优选能够分发以上述共享资源信息中的特定 的资源为对象的同步指示。</p>
    <p>根据此构成，即使在对特定的资源希望使其与实体同步的情况下， 也能够应对。而且，由于预先知道同步对象的资源，所以可进行高效率 的处理。</p>
    <p>根据本发明的其他观点，提供以下构成的中继通信系统。即，该中 继通信系统具有多个中继服务器和多个客户终端。该中继服务器具有存 储中继组的信息的中继组信息登记部、共享资源信息登记部、和控制部。 上述中继组包含能够与本机之间相互连接的其他中继服务器。上述共享 资源信息登记部在上述中继组内在多个上述客户终端之间将资源共享 的情况下，存储共享资源信息。上述共享资源信息包含与该资源相关的 信息、和将该资源共享的上述客户终端亦即资源共享终端的账户的信 息。上述控制部通过接收上述共享资源信息的同步指示，向上述资源共 享终端或本机以外的中继服务器分发同步指示。另外，上述控制部，在 接收到上述同步指示的上述资源共享终端能够操作上述资源实体的情 况下，使该资源共享终端检查该资源实体，并根据需要更新上述共享资 源信息。</p>
    <p>根据此构成，可实现利用一次的同步指示可容易地取得共享资源信息中的关于资源的信息和被共享的资源实体之间的同步的中继通信系 统。</p>
    <p>通过以下参照附图对本发明的优选实施方式进行的详细描述，本发明 的其它特征、构件、过程、步骤、特性及优点会变得更加清楚。</p>
    <p>附图说明</p>
    <p>图l是本发明的一实施方式涉及的中继通信系统的网络构成图。</p>
    <p>图2是外部服务器的功能方框图。 图3是客户终端的功能方框图。 图4是中继服务器的功能方框图。</p>
    <p>图5是表示客户终端、中继服务器、以及外部服务器的关系的图。 图6是表示中继组信息的内容的图。 图7是表示共享资源信息的内容的图。</p>
    <p>图8是表示共享资源信息中的同类资源信息的详细内容的图。</p>
    <p>图9是表示根据同步指示被更新了内容的同类资源信息的图。</p>
    <p>图IO是表示制成中继组的通信处理的顺序图。</p>
    <p>图11是表示在中继组中把客户终端作为资源可共享终端进行登记 的通信处理的顺序图。</p>
    <p>图12是表示在中继组中登记共享资源的通信处理的顺序图。</p>
    <p>图13是表示本发明的一实施方式涉及的中继通信系统中的共享资 源信息同步处理的顺序图。</p>
    <p>图14 ^!表示本发明的其他实施方式涉及的中继通信系统中的共享 资源信息同步处理的顺序图。</p>
    <p>图15是表示接收到同步指示的服务器向共享成员终端发送同步指令的处理的顺序图。</p>
    <p>图16是表示接收到同步指示的共享成员终端更新共享资源信息的 处理的顺序图。</p>
    <p>具体实施方式</p>
    <p>下面，参照附图，对本发明的实施方式进行说明。图l是表示本发 明的一实施方式涉及的中继通信系统的整体构成的说明图。</p>
    <p>如图1所示，本实施方式的中继通信系统由与WAN连接的多个 LAN构成。另外，该中继通信系统具有中继服务器1、外部服务器2、 客户终端5、和文件服务器6等。</p>
    <p>WAN ( Wide Area Network)是把不同的LAN相互连接的网络。在 本实施方式中，作为WAN, 4吏用因特网。</p>
    <p>LAN (Local Area Network)是在被限定的场所构建的规模比较小 的网络。LAN存在多个，并分别被构建在相互物理分离的场所。在本 实施方式中，假设是在东京分公司构建LAN91，在大阪分公司、名古 屋分公司、福冈分公司分别构建LAN92、 93、 94的情况。而且，这些 4个LAN91、 92、 93、 94各自与作为全球网络的因特网连接。</p>
    <p>下面，参照图2,说明外部服务器2。图2是外部服务器2的功能 方框图。该外部服务器2是在配置在各个LAN中的中继服务器1之间 的通信中使用的装置，其被设置在因特网上。</p>
    <p>图2所示的外部服务器2具备作为SIP( Session Initiation Protocol) 服务器的功能。具体是，外部服务器2具备：作为用以中继SIP方法 (method )和应答（response)等的SIP代理服务器（proxy server)的 功能；和作为用以登记中继服务器1的账户的SIP注册服务器（register server)的功食fe。</p>
    <p>如图2所示，在外部服务器2中，作为主要构成部分而具有WAN 接口 201、控制部202、和中继服务器账户信息数据库203。</p>
    <p>WAN接口 201是使用全球IP地址，与连接在因特网中的中继服务器1等各装置进行通信的接口 。</p>
    <p>中继服务器账户信息数据库203是用以将已存在登记请求的中继服 务器1的账户与全球IP地址对应进行管理的数据库。</p>
    <p>控制部202是处理部，用以对通过WAN接口 201进行的各种通信 进行控制，其控制依据TCP/IP和UDP、 SIP等协议的通信处理。该控 制部202例如进行从各个中继服务器1接收该中继服务器1的账户并登 记到中继服务器账户信息数据库203中的处理。另外，进行把从中继服 务器l发送的各种SIP方法和应答等通信数据向其他中继服务器1中继 的处理等。</p>
    <p>下面，参照图3,说明客户终端5。图3是客户终端5的功能方框图。</p>
    <p>该客户终端5是用户可直接操作的终端，例如相当于用户在日常业 务中使用的个人计算机（PC)等。因此，在LAN内通常存在多个客户 终端5,但在本实施方式中，如图1所示，举例说明分别地在LAN91 中连接有客户终端11、 12;在LAN92中连接有客户终端21、 22;在 LAN93中连接有客户终端31、 32;在LAN94中连接有客户终端41、 42的情况。各个客户终端5被赋予在同一 LAN中被唯一管理的专用IP 地址。</p>
    <p>如图3所示，在客户终端5中，作为主要构成部分而具有LAN接 口 601、控制部602、资源存储部603、和共享资源信息数据库604。</p>
    <p>LAN接口 601是使用上述专用IP地址，与连接于同一LAN中的中 继服务器1和文件服务器6等各个装置进行通信的接口 。</p>
    <p>资源存储部603，存储该客户终端5能够操作的文件和文件夹等资 源实体。</p>
    <p>共享资源信息数据库604，用于存储各个客户终端5所保有的共享 资源信息。</p>
    <p>控制部602是用以对通过LAN接口 601进行的各种通信进行控制 的处理部。该控制部602控制依据了 TCP/IP和UDP、 SIP等的协议的通信处理。</p>
    <p>控制部602例如进行用以对存储在资源存储部603中的资源的移 动、变更和删除等进行控制的处理。另外，控制部602在从中继服务器 1接收到共享资源信息的变更通知时，进行更新存储在共享资源信息数 据库604中的共享资源信息的处理。</p>
    <p>下面，参照图4等说明中继服务器1。图4是各个中继服务器1的 功能方框图。</p>
    <p>如图1所示，中继服务器1在每个LAN中分别设置了 1台。具体 是，分别地，在LAN91中设置了中继服务器R1、在LAN92中设置了 中继服务器R2、在LAN93中设置了中继服务器R3、在LAN94中设置 了中继服务器R4。</p>
    <p>中继服务器1与LAN连接，并能够与连接于同一 LAN中的各个客 户终端5进行通信。另外，中继服务器l还与因特网连接，并（通过上 述外部服务器2 )能够与连接于其他LAN中的中继服务器1进行通信。 为了进行该通信，对各个中继服务器l赋予专用IP地址和全球IP地址 的双方。</p>
    <p>如图4所示，在中继服务器1中，作为主要构成部分而具有LAN 接口 501、 WAN接口 502、控制部503、账户信息数据库504、中继组 信息数据库505、和共享资源信息数据库506。</p>
    <p>LAN接口 501是用于使用专用IP地址进行本装置与连接于同一 LAN中的客户终端5之间的通信的接口。例如，在LAN91中，中继服 务器Rl能够使用LAN接口 501与各个客户终端11、 12进行通信。</p>
    <p>WAN接口 502是使用全球IP地址，与连接在因特网中的外部服务 器2等各个装置进行通信的接口。</p>
    <p>各个中继服务器1具备作为SIP注册服务器的功能，并使用SIP进 行各个中继服务器1与各个客户终端5之间的通信。例如，在LAN92 中，中继服务器R2作为SIP注册服务器而发挥功能，接收与LAN92 连接的各个客户终端21、 22的账户，并登记到账户信息数据库504中。因此，如图5所示那样，中继服务器l,在与客户终端5的关系方 面，作为从该客户终端5接收账户并进行登记（REGISTER)的服务器 发挥功能。另外，在与外部服务器2的关系方面，中继服务器l作为向 外部服务器2发送账户并进行登记（REGISTER )的客户端发挥功能。</p>
    <p>图4的账户信息数据库504，是用以将已存在登记请求的客户终端 5的账户与专用IP地址对应进行管理的数据库。</p>
    <p>中继组信息数据库505，是用以将已登记在账户信息数据库504中 的客户终端5所关联的中继组信息进行管理的数据库。</p>
    <p>共享资源信息数据库506是用以将已登记在账户信息数据库504中 的客户终端5所关联的共享资源信息进行管理的数据库。</p>
    <p>控制部503是控制通过LAN接口 501和WAN接口 502进行的各种 通信的处理部，其控制依据了 TCP/IP、 UDP、 SIP等协i义的各种通信 处理。</p>
    <p>该控制部503,例如执行如下的处理：把本装置的账户发送给外部 服务器2，并请求登记的处理；制成中继组信息，并存储在中继组信息 数据库505中的处理。另外，控制部50 3执行制成共享资源信息并存储 在共享资源信息数据库506中的处理等。</p>
    <p>下面，说明文件服务器6。如图l所示，该文件服务器6构成为， 与LAN连接，并能够与连接于同一 LAN中的各个客户终端5进行通信。</p>
    <p>文件服务器6构成为可存储文件和文件夹等资源实体，其作为替代 各个客户终端5所具有的上述资源存储部603 (图3)的资源存储单元 而发挥功能。即，在本实施方式中，各客户终端5可操作的资源，可考 虑有被保存在该客户终端5的本地硬盘内的情况、和被保存在作为网络 驱动器的文件服务器6内的情况。该文件服务器6在各个LAN中不是 必须的，在图1的例中，在LAN92、 94中省略了设置。</p>
    <p>下面，对该中继通信系统所处理的信息，即中继组信息和共享资源 信息进行说明。</p>
    <p>首先，参照图6说明中继组信息。图6是表示中继组信息的内容例的图。</p>
    <p>在图6中，表示中继服务器R3中的中继组信息数据库505的存储 内容例。该例是在中继组信息数据库505中存储有2个中继组信息100a、 100b。</p>
    <p>各个中继组信息100a、 100b包含l个组识别信息101、和通过相互 许可连接而构成中继组的中继服务器1的信息（中继账户信息）102、 资源可共享终端信息110。</p>
    <p>组识别信息101是用于识别该中继组信息100的信息，在每次制成 中继组信息100时赋予了不同的ID而能唯一地识别。由此，操作者等 可根据组识别信息101来确定中继组，可简单地进行组构成的变更等。</p>
    <p>中继账户信息102包含通过相互许可连接而构成中继组的各个中继 服务器1的账户的信息。例如，在图6的上侧所示的中继组信息100a 中，记载有构成中继组的3个中继服务器R1、 R2、 R3的账户。另夕卜， 在图6的下侧所示的中继组信息100b中，记载有构成该中继组的1个 中继服务器R3的账户。</p>
    <p>在中继账户信息102中， 一同登记有赋予给各个中继服务器1的账 户的具体的名称，从而可容易识别用户。例如，如果是中继服务器Rl (relay-serverl)的中继账户信息102a,则对中继服务器Rl的账户 (relay-serverl@net)赋予了名称（分7〉司A)。</p>
    <p>如上所述,将中继组信息100a、 100b制成为按照每个中继组可唯 一地识别。而且在中继组信息100a、 100b中包含通过相互许可连接而 构成一组（中继组）的各个中继服务器的账户（中继账户信息102)。因 此，只要参照中继组信息100a、 100b，即可得知哪个LAN与哪个LAN 构成一组。</p>
    <p>下面，对能够包含在上述中继组信息100中的资源可共享终端信息 IIO进行说明。</p>
    <p>如图6所示，资源可共享终端信息110与各个中继组信息IOO对应 而被登记。例如资源可共享终端信息110a与中继组信息100a对应而被登记，资源可共享终端信息110b与中继组信息100b对应而被登记。</p>
    <p>各个资源可共享终端信息110a、 110b包含单独终端信息111，且该 单独终端信息111记载了在对应的中继组信息100a、 100b所涉及的中 继组中已许可了资源的共享的客户终端5。该单独终端信息111是记载 了可进行资源的共享的客户终端5各自的账户的信息。</p>
    <p>例如，与图6上侧的资源可共享终端信息110a对应的中继组信息 100a定义为由3个中继月艮务器Rl、 R2、 R3构成的中继组。如图1所 示，在中继服务器R1所连接的LAN91中，存在2台客户终端11、 12。 图6上侧的资源可共享终端信息110a的例中，这2台都作为在上述中 继组中可将资源共享的终端而被选择，其账户信息作为单独终端信息 111而被登记。同样，在中继服务器R2所连接的LAN92中，客户终端 21、 22双方都作为资源可共享终端而被选择，在中继服务器R3所连接 的LAN93中，虽然存在客户终端31、32，但在资源可共享终端信息110a 的例中，只有客户终端31作为资源可共享终端而被选择，账户信息作 为单独终端信息111而被登记。</p>
    <p>与图6下侧的资源可共享终端信息110b对应的中继组信息100b定 义为，只由中继服务器R3构成的中继组。该资源可共享终端信息110b 的例中，在中继服务器R3所连接的LAN93中，2台客户终端31、 32 双方都作为资源可共享终端而被选择，其账户信息作为单独终端信息 111而被登记。</p>
    <p>在单独终端信息lll中，除了各个资源可共享终端的账户以外，还 登记有被赋予给该账户的具体名称，从而可容易识别用户。例如，在客 户终端11的情况下，记载了对该账户（例如，clientll@relay-serverl. net)赋予的名称（client 11)。并且，在单独终端信息111中，记载了 营业部和开发部等用于表示该资源可共享终端的所属的所属识&#21029;数据 112。</p>
    <p>此外，在资源可共享终端信息110中，将各自的单独终端信息111， 与和资源可共享终端连接在同一 LAN中的中继服务器的中继账户信息 102相关联而记载。例如，将与客户终端ll相关的单独终端信息111, 以和中继服务器R1的中继账户信息102a相关联的形式记载。另外，如图6的例所示，中继组信息数据库505能够分别存储多个 中继组信息IOO和资源可共享终端信息110。另外，在2个中继组中的 资源可共享终端信息110a、 110b的双方中，将客户终端31设为资源可 共享终端，并记载有其单独终端信息111。这样，能够在多个中继组中， 把l个客户终端5作为资源可共享终端而选择，并且把表示该信息的资 源可共享终端信息IIO存储在中继组信息数据库505中。</p>
    <p>在构成中继组的各个中继服务器1之间交换各个中继组信息100。 例如，将图6上侧的中继组信息100a在3个中继服务器Rl、 R2、 R3 之间进行交换，并存储在各个中继服务器R1、 R2、 R3的中继组信息数 据库505中。另外，将图6下侧的中继组信息100b只在中继服务器R3 中保持，并存储在中继服务器R3的中继组信息数据库505中。</p>
    <p>下面，参照图7至图9，对共享资源信息的内容进行说明。图7示 例了被存储在客户终端11的共享资源信息数据库604中的共享资源信 息120。此外，与此相同的信息还被存储在与客户终端11连接在同一 LAN中的中继服务器R1的共享资源信息数据库506中。</p>
    <p>共享资源信息120由以下信息构成：账户识别信息121,用以表示 是与客户终端ll相关的共享资源信息；和与该客户终端ll相关联的单 独共享资源信息122。</p>
    <p>账户识别信息121，是为了对每个客户终端5制成共享资源信息 120,而用于将其识别的信息。</p>
    <p>单独共享资源信息122由共享资源识别信息123、同类账户信息 124、和同类资源信息125等构成。</p>
    <p>共享资源识别信息123是用于识别该单独共享资源信息122的信 息，在每次制成单独共享资源信息122时赋予了不同的ID而能够唯一 地识别。这里，共享资源识别信息123由与已经存在共享资源信息120 的制成请求的客户终端5相关联的ID、和用于容易进行该识别的名称 构成。上述ID例如可以是20071001150032clientll@relay-serverl等， 容易识别的名称例如可以是workspacel等。</p>
    <p>由此，用户等能够根据共享资源识别信息123来确定单独共享资源信息122,所以可简单地对其内容进行编辑等。</p>
    <p>图8表示图7所示的同类资源信息125的具体内容。如图8所示， 同类资源信息125是表示客户终端5所保有的文件或文件夹等资源实体 的资源信息126的集合体。</p>
    <p>各个资源信息126由进行共享的资源的名称的信息、可操作该资源 实体的客户终端5 (所有者客户终端）的账户的信息、表示该资源实体 的所在的地址信息、关于该资源的状态信息、和关于该资源的详细信息 构成。</p>
    <p>所谓进行共享的资源的名称是在由多个客户终端5将资源共享时赋 予该资源的名称，例如记载为name= "folderA"。在所有者客户终端的 账户的信息中，将识别所有者客户终端的账户例如记载为owner =clientll@relay-serverl. net。表示该资源实体的所在的地址是表示共 享资源在资源存储部603 (或文件服务器6)中的实际存储的位置的信 息，例如使用全通路记载为value = "c: /folderA")等。状态信息是表 示该资源的状态的信息，例如记载为status= "ok"等。关于资源的详 细信息是时标或文件尺寸（字节单位）等，例如，关于时标，可记载为 date= "2007/01/01 10 : 23 : 54"。</p>
    <p>图7的同类账户信息124是共享由同类资源信息125表示的资源实 体的客户终端5的账户（例如，clientll@relay-serverl. net)的信息的 集合体。</p>
    <p>在图8的同类资源信息125a的例中，所有者客户终端是ll。而且， 能够通过该所有者客户终端11间接操作资源实体的客户终端（用户客 户终端）是图7的同类账户信息124所记载的客户终端中的所有者客户 终端ll以外的终端。即，在此例中，客户终端12、 21、 22、 31是用户 客户终端。</p>
    <p>如图8所示那样，可以记载多个同类资源信息125，并且被记载 在各个同类资源信息125中的所有者客户终端也可以相互不同。因此， 所有者客户终端与用户客户终端的关系不是固定的，被记载在同类账户 信息124中的客户终端的任意一个都可以成为所有者客户终端。此外，在以下的说明中，有时把被记载在该同类账户信息124中的客户终端称 为共享成员终端。</p>
    <p>图7的例中的作为共享成员终端的客户终端11、 12、 21、 22、 31 的每个，与构成图6的中继组信息100a所记载的中继组的3台中继服 务器R1、 R2、 R3的任意一台连接在同一LAN中。另外，各个共享成 员终端，都是在该中继组中的资源可共享终端信息110a中，作为资源 可共享终端而记载了单独终端信息111的客户终端。</p>
    <p>上述共享成员终端的每个，把具有以上说明的内容的单独共享资 源信息122的共享资源信息120存储在共享资源信息数据库604中。</p>
    <p>下面，参照图9,对基于资源实体与同类资源信息125之间的同 步，更新共享资源信息120的情况进行说明。图9示例了图7的共享资 源信息120所包含的同类资源信息（图8)中的125a、 125e的内容被更 新的情况。</p>
    <p>图9的同类资源信息125a，表示用户操作客户终端11,更新了共 享时的名称为"fileOOZX.xls"的文件（资源实体的所在位置为 〃network/z: 〃folderZ/预算单.xls)的示例。即，由于该文件的实体的 内容已被更新，所以，基于与文件实体的同步，将同类资源信息125a 的用长方框包围的部分（时标和文件尺寸信息），从图8的状态进行了 更新。</p>
    <p>另外，在图9的同类资源信息125e中，表示了用户操作客户终端 31，删除了共享时的名称为"filel00.pdf"的文件（资源实体的所在位 置为"c: /temp/documentl.pdf，）的示例。</p>
    <p>在图9所示的例中，在"filel00.pdr的资源实体被删除的同时， 该资源信息中的状态信息被改写。即，同类资源信息125e的用长方形 框包围的部分被改写为status = "file not found"。</p>
    <p>此外，在资源实体被删除的情况下，也可以取代在上述状态信息 中记录表示文件被删除的信息，而把该"filel00.pdf"所涉及的资源信 息126从共享资源信息120中删除。对于同类资源信息125，若如上述那样被改写了，则将其分发给 其他共享成员终端。其他的共享成员终端可根据改写后的同类资源信息 125的时标、文件尺寸信息、以及状态信息，明确地检测出该资源实体 被变更或被删除的情况。</p>
    <p>下面，参照图10的顺序编号11&#12316;19，对中继组的生成以及登记阶 段进行说明。图10所示的顺序编号11~19的处理一般是作为网络的初 始设定由用户和操作者来进行。</p>
    <p>首先，在中继服务器Rl中，由操作者执行用于在与中继服务器 R2之间新形成中继组的方法（createGroup方法）。该createGroup方 法指定了形成中继组的对方中继服务器R2的账户（relay-server2@ net )。</p>
    <p>于是，在中继服务器Rl中新制成中继组信息100a。此时，对该 中继组信息赋予识别ID ( 0001@relay-serverl )，并记载在组识别信息 101中。</p>
    <p>然后，在中继服务器Rl中执行消息发布指令（MESSAGE方法）， 向外部服务器2发送针对成为对方的中继服务器R2的group-info消息 (顺序编号11 )。在该消息中，包含有由上述createGroup方法制成的 中继组信息的识别ID等。</p>
    <p>该MESSAGE方法指定了消息发送目的地的中继服务器R2的账 户（sip: relay-server2@net)。外部服务器2通过参照中继服务器账户 信息数据库203，取得中继服务器R2的全球IP地址，把来自中继服务 器Rl的group-info消息中继到中继服务器R2。接收到消息的中继服务 器R2通过外部服务器2向中继服务器Rl返回OK应答。</p>
    <p>如上述那样，经由外部服务器2来进行本实施方式的各中继服务 器l之间的通信，并且以下也是同样。因此，在以下的说明中，省略对 经由外部服务器2的通信处理的具体说明。</p>
    <p>然后，中继服务器Rl向中继服务器R2发送服务器信息的发送请 求消息（request-server-info消息）（顺序编号12)。接收到该消息的中 继服务器R2与OK应答一同向中继服务器Rl返回关于本机的信息(server-info )。</p>
    <p>接下来，相反地，由中继服务器R2发送针对中继服务器Rl的 request-server-info消息（顺序编号13)。中继服务器Rl向中继服务 R2返回关于本机的信息（server-info )。</p>
    <p>通过如上述那样交换相互的关于服务器的信息，把两个中继服务 器Rl、 R2的信息记载在中继组信息100中所包含的中继账户信息102 中，并存储在各中继服务器R1、 R2的中继组信息数据库505中。</p>
    <p>然后，在中继服务器R2中，由操作者执行在此前制成的中继组 (由中继服务器R1、 R2构成的中继组）中新添加中继服务器R3的方 法（addGroup方法）。该addGroup方法指定了要加入的中继月良务器 R3的账户（relay-server3@net )、和要加入的中继组的识别ID (0001@relay-serverl )。</p>
    <p>于是，中继服务器R2向成为加入对方的中继服务器R3发送 group-info消息（顺序编号14 )。在该消息中，包含有由上述addGroup 方法指定的中继组的识别ID等。接收到该消息的中继服务器R3向中 继服务器R2返回OK应答。然后，与在顺序编号12、 13中说明的完全 相同，在中继服务器R2与中继服务器R3之间交换服务器信息（顺序 编号15、 16)。</p>
    <p>然后，中继服务器R2向中继服务器Rl发送叩date-group-info 消息，该update-group-info消息用以通知在中继组中增加了中继服务 器R3的情况（顺序编号17)。接收到此消息的中继服务器Rl向中继服 务器R2返回OK应答。然后，在中继服务器R3与中继服务器R1之间 交换服务器信息（顺序编号18、 19)。</p>
    <p>这样，将表示由3个中继服务器R1、 R2、 R3形成中继组的情况 的中继组信息100 (具体是，图6的符号100a所表示的内容的信息）存 储在各个中继服务器R1、 R2、 R3的中继组信息数据库505中。</p>
    <p>此外，虽然在图10中未图示，但在中继服务器R3中，进一步， 不指定形成中继组的其他中继服务器而执行createGroup方法。由此， 制成只由中继服务器R3形成的中继组信息100b,并赋予识别ID(0002@relay -sever2 )，存储在R3的中继组信息数据库505中。</p>
    <p>下面，参照图11的顺序编号21&#12316;29，说明针对中继组的资源可共 享终端的登记阶段。</p>
    <p>在中继服务器Rl中，由操作者执行在由3台中继服务器R1、R2、 R3构成的中继组中，作为资源可共享终端而登记客户终端11的方法 (addTerminal方法）。该addTerminal方法指定客户终端11的账户、 和表示登记目的地的中继组的识别ID ( 0001@relay-serverl )。</p>
    <p>一旦执行了该addTerminal方法，则中继服务器Rl检索本机的 中继组信息数据库505。而且，在与所指定的识别ID的中继组信息对 应的资源可共享终端信息110中，追加上述客户终端11的单独终端信 息111。</p>
    <p>然后，中继服务器Rl立即根据中继组信息数据库505的储存内 容，利用上述识别ID确定中继组信息100，检查该中继组由怎样的中 继服务器构成。于是，根据图6的中继组信息100a得知，成为对象的 中继组由本机（中继服务器R1)、和2台中继服务器R2、 R3构成。</p>
    <p>因此，中继服务器Rl首先向中继服务器R2发送add-group-info 消息，且该add-group-info消息用于请求向中继组追加资源可共享终端 (顺序编号21)。在该消息中，包含有成为对象的客户终端11的账户、 和登记目的地的中继组的识别ID等。接收到该消息的中继服务器R2, 在存储于中继组信息数据库505中的资源可共享终端信息110中追加上 述客户终端11的单独终端信息111后，返回OK应答。</p>
    <p>然后，中继服务器Rl向客户终端11发送group-info消息（顺序 编号22)。在该消息中，包含被追加了客户终端11的单独终端信息111 的资源可共享终端信息110。接收到此消息的客户终端11把接收到的资 源可共享终端信息110的内容，存储在适当的存储单元中。</p>
    <p>接下来，中继服务器Rl还向中继服务器R3发送add-group-info 消息，且该add-group-info消息用于请求向中继组追加资源可共享终端 (顺序编号23)。接收到此消息的中继服务器R3，在存储于中继组信息 数据库505中的资源可共享终端信息110中追加上述客户终端11的单独终端信息lll后，返回OK应答。</p>
    <p>由此，在存储于3个中继服务器R1、 R2、 R3的中继组信息数据 库505中的中继组信息100中的资源可共享终端信息110中，作为资源 可共享终端，登记了客户终端11的单独终端信息111。</p>
    <p>然后，在中继服务器R2中，由操作者执行指定上述中继组的识 别ID，并作为资源可共享终端而登记客户终端21的方法（addTerminal 方法）。</p>
    <p>于是，中继服务器R2检索本机的中继组信息数据库505，在与由 识别ID指定的中继组信息对应的资源可共享终端信息110中，追加上 述客户终端21的单独终端信息111。</p>
    <p>然后，中继服务器R2向中继服务器Rl发送add-group-info消息， 且该add-group-info消息用于请求向中继组追加资源可共^终端（顺序 编号24)。在该消息中，包含有成为对象的客户终端21的账户、和登记 目的地的中继组的识别ID等。</p>
    <p>接收到此消息的中继服务器Rl,在存储于中继组信息数据库505 中的资源可共享终端信息110中追加上述客户终端21的单独终端信息 111。并且，中继服务器R1向与本机连接在同一LAN中的，已经被作 为资源可共享终端存储的客户终端11发送add-group-info消息（顺序 编号24.1)。接收到该消息的客户终端11把上述客户终端21的单独终 端信息111存储在适当的存储单元中。然后，客户终端11向中继服务 器R1返回OK应答，接收到该应答的中继服务器R1向中继服务器R2 返回OK应答。</p>
    <p>并且，中继服务器R2向客户终端21发送group-info消息（顺序 编号25)。在该消息中，包含被追加了客户终端11和21的单独终端信 息111的资源可共享终端信息110。接收到此消息的客户终端21把接收 的资源可共享终端信息110的内容，存储在适当的存储单元中。</p>
    <p>接下来，中继服务器R2还向中继服务器R3发送add-group-info 消息，且该add-group-info消息用于请求向中继组追加资源可共享终端 (顺序编号26)。接收到此消息的中继服务器R3，在存储于中继组信息数据库505中的资源可共享终端信息110中追加上述客户终端21的单 独终端信息lll，然后返回OK应答。</p>
    <p>由此，成为了在存储于3个中继服务器R1、 R2、 R3的中继组信 息数据库505中的中继组信息100中的资源可共享终端信息110中，作 为资源可共享终端而登记了客户终端11和21的单独终端信息111的状 态。</p>
    <p>然后，由操作者执行在中继服务器R3中，指定上述中继组的识 别ID，并作为资源可共享终端而登记客户终端31的方法（addTerminal 方法）。</p>
    <p>于是，中继服务器R3检索本机的中继组信息数据库505，在与由 识别ID指定的中继组有关的资源可共享终端信息110中，追加上述客 户终端31的单独终端信息111。</p>
    <p>然后，中继服务器R3向中继服务器Rl发送add-gro叩-info消息， 且该add-group-info消息用于请求向中继组追加资源可共享终端（顺序 编号27)。在该消息中，包含有成为对象的客户终端31的账户、和登记 目的地的中继组的识别ID等。</p>
    <p>接收到此消息的中继服务器Rl，在存储于中继组信息数据库505 中的资源可共享终端信息110中追加上述客户终端31的单独终端信息 111。并且，中继服务器R1向与本机连接在同一LAN中的，已经被作 为资源可共享终端存储的客户终端11发送add-group-info消息（顺序 编号27.1)。接收到该消息的客户终端11把上述客户终端31的单独终 端信息111存储在适当的存储单元中。然后客户终端11向中继服务器 Rl返回OK应答，接收到该应答的中继服务器R1向中继服务器R3返 回OK应答。</p>
    <p>然后，中继服务器R3向客户终端31发送group-info消息（顺序 编号28)。在该消息中，包含被追加了客户终端31的单独终端信息111 的资源可共享终端信息110。接收到此消息的客户终端31把接收的资源 可共享终端信息110的内容，存储在适当的存储单元中。</p>
    <p>接下来，中继服务器R3还向中继服务器R2发送add-group-info消息，且该add-group-info消息用于请求向中继组追加资源可共享终端 (顺序编号29)。接收到该消息的中继服务器R2，在存储于中继组信息 数据库505中的资源可共享终端信息110中追加上述客户终端31的单 独终端信息111。并且，中继服务器R2向与本机连接在同一 LAN中的， 已经被作为资源可共享终端存储的客户终端21发送add-group-info消 息（顺序编号29.1)。接收到该消息的客户终端21把上述客户终端31 的单独终端信息111存储在适当的存储单元中。然后客户终端21向中 继服务器R2返回OK应答，接收到该应答的中继服务器R2向中继服 务器R3返回OK应答。</p>
    <p>由此，成为了在存储于3个中继服务器R1、 R2、 R3的中继组信 息数据库505中的中继组信息100中的资源可共享终端信息110中，作 为资源可共享终端而登记了客户终端11、 21和31的单独终端信息111 的状态。</p>
    <p>另外，虽然在图11中未图示，但是，之后进一步进行把客户终端 12、 22追加在上述中继组信息（识别ID为0001@relay-serverl)中的 操作。由此，在中继组信息100中的资源可共享终端信息110中作为资 源可共享终端，登记有客户终端ll、 12、 21、 22、和31的单独终端信 息111 (参照图6的符号110a)。并且，在中继服务器R3中，接下来执 行把客户终端31、 32追加在其他中继组信息（识别ID为 0002@relay-server2 )中的操作。</p>
    <p>此外，在图11中，对作为资源可共享终端而登记客户终端的处理 进行了说明，但中继服务器1也可以进行删除客户终端5的作为资源可 共享终端的登记的处理（deleteTerminal方法）。在这种情况下，是从资 源可共享终端信息no中删除被指定的客户终端5的单独终端信息111。</p>
    <p>下面，参照图12，对实际共享客户终端5的资源时的动作进行说 明。这里，以把客户终端11所拥有的文件夹"folderA"，在识别ID为 0001@relay-serverl的中继组中与客户终端12、 21、 22、和31共享的 情况举例说明。</p>
    <p>用户在操作客户终端11，指定了识别ID为0001@relay-serverl 的中继组的基础上，指示客户终端11显示该中继组中的资源可共享终端。客户终端11通过与中继服务器R1通信，取得资源可共享终端的信 息，在画面上显示被指定的中继组中的资源可共享终端的一览表。</p>
    <p>这里，由于是指定了识别ID为0001@relay-serverl的中继组， 所以根据图6上侧所示的资源可共享终端信息110a,把4台客户终端 12、 21、 22和31作为资源可共享终端进行显示。用户把所显示的客户 终端12、 21、 22和31的4台都作为实际将资源共享的终端（上述用户 客户终端）而指定。此外，虽然在此处的说明中对将资源共享的终端全 部进行了指定，但也可以只指定其中一部分。</p>
    <p>于是，客户终端11向中继服务器Rl发送共享资源的制成请求 (CreateSharedResource指令)(图13的顺序编号31 )。在该消息中， 包含中继组的识别ID、和被指定的用户客户终端12、 21、 22、 31的信息。</p>
    <p>接收到该消息的中继服务器Rl制成共享资源信息120,并存储在 本机的共享资源信息数据库506中。另外，根据中继组的识别ID，参 照中继组信息数据库505的内容，向构成该中继组的其他中继服务器 R2、 R3发送policy-data消息，通知所制成的共享资源信息120 (顺序 编号31.1、 31.2)。另外，由被指定的用户客户终端向本机下属的客户终 端12发送policy-data消息，通知共享资源信息120 (顺序编号31.3 )。</p>
    <p>接收到消息的各个中继服务器R2、 R3把该共享资源信息120存 储在本机的共享资源信息数据库506中，并且向被指定的各个用户终端 21、 22、 31发送policy-data消息，通知共享资源信息120 (顺序编号 31.1.1、 31.1.2、 31.2.1)。</p>
    <p>接收到该policy-data消息的各个用户客户终端12、 22、 22、 31 对存储在本机的共享资源信息数据库604中的共享资源信息120进行变 更。然后，向发送源的中继服务器R1、 R2、 R3返回OK应答。接收到 OK应答的中继服务器R2、 R3向中继服务器Rl返回OK应答，接收 到该应答的中继服务器Rl向客户终端11返回OK应答。</p>
    <p>由此，则在存储于中继服务器R1、 R2、 R3的共享资源信息数据 库506中的共享资源信息120中，记载了共享资源识别信息123和同类账户信息124。在存储于客户终端ll、 12、 21、 22、 31的共享资源信息 数据库604中的共享资源信息120中，也记载了相同内容。</p>
    <p>然后，用户通过操作客户终端11，执行addResource方法，由此 来进行在共享资源信息120中增加表示进行共享的资源实体的资源信息 (图8的符号126)的处理。在此处的说明中，设进行了下述指定：从 存储于客户终端11的资源存储部603中的资源实体中选择"folderA"， 并把其与其他客户终端12、 21、 22、 31共享。</p>
    <p>接收到该指定的客户终端11向中继服务器Rl发送包含被指定的 信息的共享资源变更请求（UpdataSharedResource指令）（顺序编号 32)。接收到共享资源变更请求的中继服务器Rl把被变更的共享资源信 息存储在本机的共享资源信息数据库506中。而且，中继服务器R1向 用户终端21、 22、 31所连接的各个中继服务器R2、 R3发送policy-data 消息，通知被变更的共享资源信息120 (顺序编号32.1、 32.2)。另外， 由被指定的用户客户终端向本机下属的客户终端12发送policy-data消 息，通知共享资源信息120 (顺序编号步骤32.3)。</p>
    <p>接收到消息的各个中继服务器R2、 R3把该共享资源信息120存 储在本机的共享资源信息数据库506中。并且，向被指定的各个用户终 端21、 22、 31发送policy-data消息，通知共享资源信息120 (顺序编 号32.1.1、 32.1.2、 32.2.1)。</p>
    <p>接收到该policy-data消息的各个用户客户终端12、 21、 22、 31 对存储于本机的共享资源信息数据库604中的共享资源信息120进行变 更。然后，向发送源的中继服务器R1、 R2、 R3返回OK应答，接收到 OK应答的中继服务器R2、 R3向中继服务器Rl返回OK应答，接收 到该应答的中继服务器Rl向客户终端11返回OK应答。</p>
    <p>下面，参照图13的顺序编号41&#12316;44，对进行已登记的共享资源信 息与资源实体的同步的处理进行说明。</p>
    <p>首先，在客户终端   11    中，执行用于用 ID (20071001150032clientllrelay-serverl)或名称（workspacel)指定共 享资源信息，并核对资源的指令（CheckResouce指令）。可以定期执行该指令，也可以由用户根据需要适当地执行。若执行了该指令，则客户</p>
    <p>终端11调查在本机的共享资源信息数据库604中所存储的该共享资源 信息120。于是，由于得知是同类资源信息125中的本机是所有者客户 终端的共享资源，所以对该资源检查资源的实体。具体是，检查是否存 在资源实体、和文件尺寸以及时标信息是否与资源信息126中记载的内 容不同等。</p>
    <p>然后，客户终端11向中继服务器Rl发送同步指示（顺序编号41 )。 该同步指示包含指示对哪个共享资源信息进行同步的信息。接收到同步 指示的中继服务器Rl调查本机的共享资源信息数据库506中包含的该 共享资源信息120的同类账户信息124。于是，得知客户终端12、 21、 22、 31是用户客户终端。然后，如果参照中继组信息100，则得知客户 终端21、 22、 31与本机属于同一中继组，是中继服务器R2、 R3的下 属。</p>
    <p>然后，中继服务器Rl向中继服务器R2、 R3发送同步消息（顺 序编号41.1、 41.2)。该同步消息包含用于指示对哪个共享资源信息进行 同步的信息。另外，中继服务器R1向作为本机下属的共享成员终端的 已发送了同步指示的客户终端11以外的客户终端（客户终端12)，发送 同步指示（顺序编号42)。</p>
    <p>从中继服务器Rl接收到同步消息的中继服务器R2、 R3调查在 本机的共享资源信息数据库506中包含的该共享资源信息120的同类账 户信息124。于是，由于得知本机下属的作为该用户客户终端的客户终 端（在本例中是21、 22、 31),所以向该客户终端发送同步指示。该处 理的顺序编号是41.1.1、 41.1.2、和41.2.1。另外，该同步指示中包含用 于指示对哪个共享资源信息进行同步的信息。</p>
    <p>接收到同步指示的各客户终端12、 21、 22、 31,执行资源核对指 令（CheckResource )。由于该指令的详细动作与在客户终端11中说明 的情况相同，所以省略说明。在资源实体与共享资源信息之间未发现不 同的情况下，各个客户终端向对本机发送了同步指示的中继服务器1返 回OK应答。</p>
    <p>下面，参照图13，对发现了资源实体与共享资源信息的不一致的情况下的处理进行说明。</p>
    <p>设在根据图13的顺序编号41.2.1的同步指示，客户终端31进行 了资源实体的检查时，检测到文件的实体^^删除的情况（Resource Not Found:filel00.pdf )。</p>
    <p>客户终端31,若检测到本机所保有的filel00.pdf的实体已被删除 的情况，则从存储于本机的共享资源信息数据库604中的共享资源信息 120中，删除与filel00.pdf相关的资源信息126。另外，客户终端31向 中继服务器R3发送资源信息删除指示（deleteResource指令）（顺序编 号43 )。该资源信息删除指示中包含用于指示成为操作对象的共享资源 信息的resource&#8212;infol、和该应,皮删除的文件名"filel00.pdf5，。</p>
    <p>接收到资源信息删除指示的中继服务器R3参照存储于本机的共 享资源信息数据库506中的由resource_infol所指示的共享资源信息。 由此，得知filel00.pdf的用户客户终端ill、 12、 21、 22。另外，中继 服务器R3参照存储于本机的中继组信息数据库505中的中继组信息。 由此，得知上述各个客户终端是中继服务器R1、 R2的下属。</p>
    <p>因此，中继服务器R3向中继服务器Rl、 R2发送共享资源信息 删除消息（顺序编号43.1和43.2)。接收到消息的各个中继服务器R1、 R2向本机下属的将该被删除的文件共享的客户终端发送资源信息删除 指示（顺序编号43.1.1、 43.1.2、和43.2.1、 43.2.2)。此时的资源信息删 除消息和删除指示中包含用于指示成为操作对象的共享资源信息的 resource_infol、和该应被删除的文件名"filel00.pdr。</p>
    <p>接收到资源信息删除指示的各个用户客户终端从由 resource一infol所指示的共享资源信息120中包含的同类资源信息125 中，删i对应的文件涉及的资源信息126。而且，把更新后的共享资源 信息120存储在本机的共享资源信息数据库604中。然后，向作为资源 信息删除指示的发送源的中继服务器发送OK应答。</p>
    <p>接收到OK应答的中继服务器Rl、 R2与上述用户客户终端同样 地删除对应的资源信息126,并向中继服务器R3发送OK应答。由此， 客户终端31对共享资源信息120进行的更新也被反映在中继服务器和其他共享成员终端所存储的共享资源信息120中。</p>
    <p>另夕卜，在检测到filel00.pdf的实体已被删除的情况的客户终端31 中，执行CheckAnotherResourceinfo指令，检测有无作为资源信息而 包含filel00.pdf的其他共享资源信息。</p>
    <p>如上所述，在本实施方式中，登记有由客户终端11、 12、 21、 22、 31构成的中继组、和由客户终端31、 32构成的中继组（图6的中继组 信息100a、 100b)。在图13的例中，进行以下假设进行了说明：在前 者的中继组中被共享、且根据同步指示检测出不存在实体的filel00.pdf， 在后者的中继组中也在客户终端31、 32之间被共享。此外，省略了由 客户终端31、 32构成的中继组中的共享资源信息的具体内容的图示。</p>
    <p>客户终端31，若检测出不存在filel00.pdf的实体的情况，则利用 上述CheckAnotherResourceinfo指令检查;其他共享资源信息中是否 包含该文件。由此得知在由客户终端31、 32构成的中继组的共享资源 信息中包含不存在实体的文件filel00.pdf。</p>
    <p>于是，客户终端31利用resourceJnfo2指定该其他的共享资源信 息，向中继服务器R3发送filel00.pdf"^I删除指示（顺序编号44)。与 由resource&#8212;info2指定的共享资源信息相关连的是客户终端31、 32，所 以中继服务ll R3把资源信息删除指示发送给客户终端32。由于以后的 处理与上述相同，所以省略说明。这样，还可以把同步指示发送给与最 初发送了同步指示的客户终端11属于不同的中继组的终端。</p>
    <p>通过这样构成，若基于针对1个共享资源信息的同步指示，发现 了资源实体与资源信息的不一致，则，信息更新指示能够自动地到达系 统整体，从而可将系统整体保持为最新的状态。</p>
    <p>如上所述，本实施方式的中继服务器1具有中继组信息数据库 505、共享资源信息数据库506、和控制部503。在中继组信息数据库505 中存储有关于中继组的中继组信息100，且该中继组包含能够与本机之 间相互连接的其他中继服务器1。当在上述中继组内在多个客户终端5 之间将资源共享的情况下，在共享资源信息数据库506中存储有共享资 源信息120。在该共享资源信息120中，包含同类资源信息125、和同类账户信息124，且该同类资源信息125是与在客户终端5之间共享的 资源相关的信息，该同类账户信息124是作为将该资源共享的客户终端 5的资源共享终端的账户信息。而且，中继服务器Rl的上述控制部503 例如图13的顺序编号41以后所示那样，通过从客户终端11接收上述 共享资源信息120的同步指示（Synchronize指令），向各个中继服务器 R2、 R3发送Synchronize消息，并且，向本机下属的资源共享终端12 发送Synchronize指令。另外，例如，中继服务器R3，若从中继服务器 Rl接收到同步指示（Synchronize消息），则根据上述中继组信息100 和上述共享资源信息120，向本机下属的资源共享终端31发送 Synchronize指令。而且，中继服务器R3使接收到Synchronize指令的 上述资源共享终端31，对于该资源共享终端31本机可操作的共享资源， 检查该共享资源的实体，根据需要更新上述共享资源信息。</p>
    <p>由此，通过从客户终端11向中继组中的1个中继服务器R1发送 1次同步指示，可检查由客户终端11以外的资源共享终端5或其他中继 服务器R2、 R3所共享的全部的资源的信息，并更新共享资源信息120。 因此，能够容易地使资源的实体与共享资源信息120的内容一致。</p>
    <p>另外，构成为，如顺序编号41、 41.1、和41.2所示那样，中继月良 务器Rl的上述控制部503，接收从客户终端11发送的Synchronize指 令，由此，把同步指示（Synchronize消息）分发给各个中继服务器R2、 R3。</p>
    <p>由此，用户可通过操作客户终端11，使共享资源信息与资源实体同步。</p>
    <p>另外，构成为，中继服务器R3，在本机下属的资源共享终端31 中进行了上述共享资源信息120的更新的情况下，根据上述中继组信息 100和上述共享资源信息120，把该更新反映在各个中继服务器Rl、 R2 的共享资源信息120中。</p>
    <p>由此，上述中继组中包含的中继服务器l和各个中继服务器l下 属的资源共享终端5可自动地得到最新的共享资源信息120。从而可容 易地进行网络整体的共享资源信息的同步。另外，构成为，从中继服务器R3接收到同步指示（Synchronize 指令）的上述资源共享终端31，对于该资源共享终端31本机可操作的 共享资源确认是否存在实体，在不存在上述实体的情况下，从上述共享 资源信息120中删除对应的资源信息126，更新上述共享资源信息120。</p>
    <p>由此，可以在已将资源实体删除的情况下，自动地从共享资源信 息120中删除对应的资源信息126。从而可防止将不存在实体的资源进 行共享的情况。</p>
    <p>另外，构成为在中继服务器1的共享资源信息数据库506中可登 记多个共享资源信息120。而且，中继服务器R3，在多个上述共享资源 信息120中包含不存在上述实体的文件"filel00.pdf"的资源信息126 的情况下，如顺序编号43和44所示那样，从各个共享资源信息120中 删除对应的资源信息126,更新该共享资源信息120。</p>
    <p>由此，能够利用一次的同步指示进行多个共享资源信息120的更新。</p>
    <p>图14是示例表示单独地指定资源信息并进行共享资源信息的更 新时的动作的顺序图。在图14中，假设在客户终端ll、 12、 21、 22、 31之间共享图7所示的共享资源信息所涉及的单独共享资源信息122 的情况。</p>
    <p>若从客户终端11向中继服务器Rl发送了关于folderB和folderE 的同步指示（顺序编号51),中继服务器Rl则向中继服务器R3发送 folderE的同步消息（顺序编号51.1)。另外，中继服务器R1向客户终 端12发送folderB的同步指示（顺序编号52 )。中继服务器R3向客户 终端31发送folderE的同步指示（顺序编号51.1.1 )。</p>
    <p>在图14的例中，与图13的例不同，不向中继服务器R2和客户 终端21、 22发送同步消息和同步指示。这是因为，在指定资源信息并 发送同步指示的情况下，中继服务器R1只要参照在本机的共享资源信 息数据库506中存储的共享资源信息，只向能够操作该资源信息所涉及 的资源实体的终端发送同步指示即可。从而可减少网络流量，增加性能。 另外，可以通过特别指定希望知道是否已被更新的资源，而得到该资源的信息。</p>
    <p>另外，图14表示关于已不存在资源实体的情况下（Resource Not Found: "filel00.pdf5，）的处理的其他实施方式。</p>
    <p>在该实施方式中，在已不存在资源实体的情况下，不是如图13 那样发送资源信息删除指示，而是发送资源信息更新指示（顺序编号 61),更新资源信息。具体是，发送向该资源信息的规定的位置写入例 如status = "file not found"的之类的状态信息（参照图9)。此外，由 于顺序编号61以后的处理流程与资源信息删除指示的情况大致相同， 所以省略说明。</p>
    <p>通过这样地进行处理，与单纯从共享资源信息中删除资源信息的 情况相比，可更明确地显示该资源实体已被删除的情况。另外，对于暂 时不能访问该资源实体的情况，当又能够进行访问时可容易恢复。</p>
    <p>此外，在文件的实体被改写更新，时标和文件尺寸被变更的情况 下，可以通过在共享资源信息120的与该文件相关的资源信息126中， 不改写状态信息而改写时标和文件尺寸的部分，实现同步。</p>
    <p>如上所述，上述中继服务器Rl构成为能够分发以上述共享资源 信息120中的特定的资源（"folderB"等）为对象的同步指示（顺序编 号51.1、 52等）。</p>
    <p>由此，还能应对希望对特定的资源使其与实体同步的情况。另外， 由于预先知道同步对象的资源，所以可进行高效率的处理。</p>
    <p>下面，参照图15、图16，对中继服务器1和客户终端5的详细动 作进行说明。</p>
    <p>图15是本实施方式涉及的中继服务器1从客户终端5或其他中继 服务器l取得了共享资源信息的同步指示的情况下，向该共享资源信息 所记载的共享成员终端发送同步指示时的动作流程图。中继服务器1首 先在发布了同步指示之前进行待机（S101),在发送来同步指示时，载 入所指示的共享资源信息（S102)。</p>
    <p>然后，中继服务器1检查该共享资源信息中是否存在共享成员终端（S103)，如果存在，则发送该共享资源信息的同步信号（S104)。此 时，在应发送同步信号的共享成员终端是本机下属的客户终端的情况 下，中继服务器l自身向该客户终端5发送同步指示。在该共享成员终 端不是本机的下属的情况下，中继服务器1向在下属中具有该共享成员 终端的其他中继服务器1发送同步指示（同步消息）。接收到同步消息 的该其他的中继服务器1跳出S101的判定循环，转移到S102的处理， 向该自己下属的共享成员终端发送同步指示。这样，可以间接地把同步 指示也发送到属于其他LAN的共享成员终端。</p>
    <p>然后，返回S103,检查是否存在其他共享成员终端。在不存在共 享成员终端的情况下，或完成了向全部共享成员终端发送同步指示的情 况下，结束处理。</p>
    <p>图16是本实施方式涉及的客户终端5从中继服务器1接收到同步 指示时的动作流程图。</p>
    <p>客户终端5首先在发布了同步指示之前进行待机（S201 )，在发送 来同步指示时载入所指示的共享资源信息（S202)。然后，客户终端5 检查在上述共享资源信息中是否存在本机是所有者的共享资源（S203 )。 在本实施方式中，由于资源实体的检查是由可操作该资源实体的终端进 行，所以在不存在本机是所有者的共享资源的情况下，结束处理。</p>
    <p>在存在本机是所有者的共享资源的情况下，客户终端5取得该共 享资源实体的信息（S204),检测是否能够进行对实体的访问（S205)。 如果能够进行对实体的访问，则返回到对其他共享资源的检查。在不能 进行对实体的访问的情况下，客户终端5进行从共享资源信息中删除对 应的资源信息的处理（S206),向中继服务器1发送共享资源信息的更 新指令（S207)。然后，检查是否存在包含该被删除的共享资源的其他 共享资源信息（S208)。</p>
    <p>在存在对应的其他共享资源信息的情况下，返回S206,继续进行 从该其他共享资源信息中删除资源信息的处理。在不存在对应的共享资 源信息的情况下，返回S203，继续进行在S202中最初被指示的共享资 源信息中所包含的其他共享资源实体的检查。以上对本发明的优选实施方式进行了说明，但以上的构成例如可 以进行以下的变更。</p>
    <p>在本实施方式中，是通过作为SIP服务器的外部服务器2进行各 个中继服务器l之间的通信，但也可以取代此变更为不通过外部服务器 2而在中继服务器1之间直接通信的构成。</p>
    <p>在本实施方式中，在共享资源信息中，作为资源的详细信息，记 开了该资源的时标和文件尺寸，但也可以取代此或在此基础上记载资源 实体的散列值等。在这种情况下，由于能够更可靠地检查该资源的变更、 改动、破损等，因而是理想的。</p>
    <p>虽然参照优选实施方式描述了本发明，但是可以以多种方式改进本 发明，并且可以推知与上面提出和描述的实施方式不同的多种实施方式， 这对本技术领域的普通技术人员而言是显而易见的。因此，所附权利要求</p>
    <p>书意在涵盖本发明的所有落入本发明主旨和范围内的改进方案。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103401896A?cl=zh">CN103401896A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年7月15日</td><td class="patent-data-table-td patent-date-value">2013年11月20日</td><td class="patent-data-table-td ">四川公用信息产业有限责任公司</td><td class="patent-data-table-td ">一种多Android客户端服务共享方法及系统</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012460000">H04L12/46</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L67/1065">H04L67/1065</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F17/30194">G06F17/30194</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L67/28">H04L67/28</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L67/104">H04L67/104</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L67/1059">H04L67/1059</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L67/1063">H04L67/1063</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/66">H04L12/66</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L41/0893">H04L41/0893</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UCFrBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L67/1095">H04L67/1095</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">H04L29/08N9P1B</span>, <span class="nested-value">H04L29/08N9P2B</span>, <span class="nested-value">H04L29/08N9P</span>, <span class="nested-value">H04L29/08N27</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2009年7月1日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2010年12月22日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年6月18日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/9059c9c710138783d01b/CN101471843A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%AD%E7%BB%A7%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%A5%E5%8F%8A%E4%B8%AD%E7%BB%A7%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F.pdf?id=UCFrBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U316uzPh-qQnOLAkipT4kqsyX2NCw"},"sample_url":"https://www.google.com/patents/reader?id=UCFrBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>