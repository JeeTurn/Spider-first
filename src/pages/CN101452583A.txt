<!DOCTYPE html><html><head><title>专利 CN101452583A - 电子票提供、检验方法、装置及系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="电子票提供、检验方法、装置及系统"><meta name="DC.contributor" content="乐祖晖" scheme="inventor"><meta name="DC.contributor" content="任晓明" scheme="inventor"><meta name="DC.contributor" content="斐 刘" scheme="inventor"><meta name="DC.contributor" content="征 李" scheme="inventor"><meta name="DC.contributor" content="琳 李" scheme="inventor"><meta name="DC.contributor" content="鸣 陆" scheme="inventor"><meta name="DC.contributor" content="中国移动通信集团公司" scheme="assignee"><meta name="DC.date" content="2008-12-31" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种电子票提供方法、装置及系统，用以解决现有技术中存在的电子票有可能泄露给不可信的检票终端的问题。其中，本发明公开的该方法包括步骤：存储有待检验电子票的用户终端确定将要对所述电子票进行检验的检票终端对所述电子票进行检验的权限；以及在确定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端提供所述电子票。此外，本发明还公开了一种电子票检验方法、装置及系统。"><meta name="DC.date" content="2009-6-10"><meta name="citation_patent_publication_number" content="CN:101452583:A"><meta name="citation_patent_application_number" content="CN:200810247066"><link rel="canonical" href="https://www.google.com/patents/CN101452583A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101452583A?cl=zh"/><meta name="title" content="专利 CN101452583A - 电子票提供、检验方法、装置及系统"/><meta name="description" content="本发明公开了一种电子票提供方法、装置及系统，用以解决现有技术中存在的电子票有可能泄露给不可信的检票终端的问题。其中，本发明公开的该方法包括步骤：存储有待检验电子票的用户终端确定将要对所述电子票进行检验的检票终端对所述电子票进行检验的权限；以及在确定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端提供所述电子票。此外，本发明还公开了一种电子票检验方法、装置及系统。"/><meta property="og:title" content="专利 CN101452583A - 电子票提供、检验方法、装置及系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101452583A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101452583A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=WnJqBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101452583A&amp;usg=AFQjCNH3IfG674_1rIiJxpjCbdyMg9V7cw" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/7f81cdd9445f295c3aeb/CN101452583A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/7f81cdd9445f295c3aeb/CN101452583A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101452583A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101452583A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101452583A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101452583B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101452583A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种电子票提供方法、装置及系统，用以解决现有技术中存在的电子票有可能泄露给不可信的检票终端的问题。其中，本发明公开的该方法包括步骤：存储有待检验电子票的用户终端确定将要对所述电子票进行检验...</span><span itemprop="url">https://www.google.com/patents/CN101452583A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101452583A - 电子票提供、检验方法、装置及系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101452583A - 电子票提供、检验方法、装置及系统" title="专利 CN101452583A - 电子票提供、检验方法、装置及系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101452583 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200810247066</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2009年6月10日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2008年12月31日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2008年12月31日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101452583B?hl=zh-CN&amp;cl=zh">CN101452583B</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200810247066.5, </span><span class="patent-bibdata-value">CN 101452583 A, </span><span class="patent-bibdata-value">CN 101452583A, </span><span class="patent-bibdata-value">CN 200810247066, </span><span class="patent-bibdata-value">CN-A-101452583, </span><span class="patent-bibdata-value">CN101452583 A, </span><span class="patent-bibdata-value">CN101452583A, </span><span class="patent-bibdata-value">CN200810247066, </span><span class="patent-bibdata-value">CN200810247066.5</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%B9%90%E7%A5%96%E6%99%96%22">乐祖晖</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BB%BB%E6%99%93%E6%98%8E%22">任晓明</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%96%90+%E5%88%98%22">斐 刘</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%BE%81+%E6%9D%8E%22">征 李</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%90%B3+%E6%9D%8E%22">琳 李</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%B8%A3+%E9%99%86%22">鸣 陆</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%AD%E5%9B%BD%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E9%9B%86%E5%9B%A2%E5%85%AC%E5%8F%B8%22">中国移动通信集团公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101452583A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101452583A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101452583A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (6),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (1),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=WnJqBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200810247066&amp;usg=AFQjCNFr3tSXPZwtpm6aamcWdJXKWnlNTQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=WnJqBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101452583A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNH9f2mPSTwWux5IGItA3R1HHJXcNA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT75762861" lang="ZH" load-source="patent-office">电子票提供、检验方法、装置及系统</invention-title>
      </span><br><span class="patent-number">CN 101452583 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA53517862" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种电子票提供方法、装置及系统，用以解决现有技术中存在的电子票有可能泄露给不可信的检票终端的问题。其中，本发明公开的该方法包括步骤：存储有待检验电子票的用户终端确定将要对所述电子票进行检验的检票终端对所述电子票进行检验的权限；以及在确定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端提供所述电子票。此外，本发明还公开了一种电子票检验方法、装置及系统。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(12)</span></span></div><div class="patent-text"><div mxw-id="PCLM13507011" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1、一种电子票提供方法，其特征在于，包括：存储有待检验电子票的用户终端确定将要对所述电子票进行检验的检票终端对所述电子票进行检验的权限；以及在确定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端提供所述电子票。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2、 如权利要求1所述的方法，其特征在于，存储有待检验电子票的用户 终端确定所述检票终端对所述电子票进行检验的权限，具体包括：息；以及接收所述4企票终端反馈的第 一校验值，所述第 一校验值为所述检票终端对 接收到的所述电子票的属性信息进行加密计算得到的；所述存储有电子票的用户终端利用自身存储的密钥参数以及加密算法，对 所述电子票的属性信息进行加密计算，得到第二校验值；以及比较自身计算得到的第二校验值与接收到的第一校验值是否一致，如果 是，则确定所述检票终端具有对所述电子票进行检验的权限；否则，确定所述 检票终端不具有对所述电子票进行检验的权限。</div>
    </div>
    </div> <div class="claim"> <div num="3" class="claim">
      <div class="claim-text">3、 一种电子票提供装置，其特征在于，包括：确定单元，用于确定将要对待检验的电子票进行检验的检票终端对所述电 子票进行检验的权限；以及提供单元，用于在确定单元确定出所述检票终端具有对所述电子票进行检 验的权限时，向所述检票终端提供所述电子票。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4、 如权利要求3所述的装置，其特征在于，所述确定单元具体包括： 发送模块，用于向所述检票终端发送所述电子票的属性信息； 接收模块，用于接收所述检票终端反馈的第一校验值，所述第一校验值为所述检票终端对接收到的由发送模块发送的所述电子票的属性信息进行加密计算得到的；计算模块，用于利用所述电子票提供装置自身存储的密钥参数以及加密算 法，对所述电子票的属性信息进行加密计算，得到第二4交-睑值；比较模块，用于比较计算模块计算得到的第二校验值与接收模块接收到的 第一校验值是否一致；确定模块，用于当比较模块得到的比较结果为是时，确定所述检票终端具 有对所述电子票进行检验的权限，否则，确定所述检票终端不具有对所述电子 票进行检验的权限。</div>
    </div>
    </div> <div class="claim"> <div num="5" class="claim">
      <div class="claim-text">5、 一种电子票抬r验方法，其特征在于，包括：检票终端在对用户终端中存储的待检验电子票进行检验前，确定用户终端 中存储的待检验电子票的被检验权限；以及当确定用户终端中存储的待检验电子票具有被检验权限时，对所述电子票 进行4企验。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6、 如权利要求5所述的方法，其特征在于，所述4企票终端确定待^r验电 子票的被检验权限，具体包括：所述检票终端获得所述用户终端提供的待检验电子票的属性信息及第一 校验值，所述第一校验值为所述用户终端利用自身存储的密钥参数与加密算法 对所述电子票的属性信息进行加密计算得到的；所述检票终端利用自身存储的密钥参数以及加密算法对用户终端发来的 属性信息进行加密计算，得到第二校验值；以及比较计算得到的第二校验值与接收到的第一校验值是否一致，如果是，则 确定所述电子票具有被检验权限；否则确定所述电子票不具有被检验权限。</div>
    </div>
    </div> <div class="claim"> <div num="7" class="claim">
      <div class="claim-text">7、 一种电子票抬r验装置，其特征在于，包括：确定单元，用于在对用户终端中存储的待4全验电子票进行4企验前，确定用 户终端中存储的待检验电子票的被检验权限；以及检验单元，用于当确定单元确定用户终端中存储的待&#26545;r验电子票具有被检 验权限时，对所述电子票进行检验。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8、 如权利要求7所述的装置，其特征在于，所述确定单元具体包括： 获得模块，用于获得所述用户终端提供的待4企验电子票的属性信息及第一校验值，所述第一校验值为所述用户终端利用自身存储的密钥参数与加密算法 对所述电子票的属性信息进行加密计算得到的；计算模块，用于利用所述电子票检验装置自身存储的密钥参数以及加密算 法，对用户终端发来的属性信息进行加密计算，得到第二才交-险值；比较模块，用于比较计算模块计算得到的第二校验值与接收到的第一校验 值是否一致；确定模块，用于当比较模块得到的比较为是时，确定所述电子票具有被检 验权限，否则，确定所述电子票不具有被检验权限。</div>
    </div>
    </div> <div class="claim"> <div num="9" class="claim">
      <div class="claim-text">9、 一种电子票提供方法，其特征在于，包括：终端对所述电子票进行检验的权限；以及在确定出所述冲全票终端具有对所述电子票进行才企-睑的权限时，向所述4企票终端发送用于通知所述检票终端确定所迷电子票的被检验权限的第一通知消 自&#8226;所述用/终端接收所述检票终端发来的用于通知所述用/终端提供电子 票信息的第二通知消息，所述第二通知消息为检票终端根据所述第 一通知消息，在确定出所述电子票具有被检验权限时发来的；所述用户终端根据所述第二通知消息，向所述检票终端提供所述电子票。</div>
    </div>
    </div> <div class="claim"> <div num="10" class="claim">
      <div class="claim-text">10、 一种电子票提供系统，包括检票终端以及存储有待检验电子票的用户终端，其特征在于，其中：用户终端，用于确定将要对所述电子票进行才全验的检票终端对所述电子票进行检验的权限，以及在确定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端发送用于通知所述检票终端确定所述电子票的被检验权限的第一通知消息；并接收所述检票终端发来的用于通知所述用户终端提供电 子票信息的第二通知消息，以及根据所述第二通知消息，向所述检票终端提供 所述电子票；;险票终端，用于才艮据所述用户终端发来的第一通知消息，确定所述电子票 的被检验权限，以及在确定出所述电子票具有被检验权限时，向所述用户终端 发送所述第二通知消息。</div>
    </div>
    </div> <div class="claim"> <div num="11" class="claim">
      <div class="claim-text">11、 一种电子票4t验方法，其特征在于，包括：检票终端在对用户终端中存储的待检验电子票进行4企验前，确定所述电子 票的被检验权限；以及当确定所述电子票具有被4企验权限时，向所述用户终端发送用于通知所述 用户终端确定所述检票终端对所述电子票进行检验的权限的消息；检票终端接收所述用户终端发来的所述电子票，其中所述电子票为用户终 端根据接收到的所述消息，在确定出所述检票终端具有对所述电子票进行检验 的权限时发来的；所述检票终端对所述电子票进行检验。</div>
    </div>
    </div> <div class="claim"> <div num="12" class="claim">
      <div class="claim-text">12、 一种电子票检验系统，包括检票终端以及存储有待检验电子票的用户 终端，其特征在于，其中：检票终端，用于在对用户终端中存储的待检验电子票进行检验前，确定所 述电子票的被检验权限，以及当确定所述电子票具有被检验权限时，向所述用 户终端发送用于通知所述用户终端确定所述检票终端对所述电子票进行检验 的权限的消息；并接收所述用户终端发来的所述电子票，以及对所述电子票进 行检验；用户终端，用于根据所述检票终端发来的所述消息，确定所述检票终端对 所述电子票进行4企l全的权限，以及在确定出所述4企票终端具有对所述电子票进 行检验的权限时，向所述检票终端发送所述电子票。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES18894024" lang="ZH" load-source="patent-office" class="description">
    <p>电子票提供、检验方法、装置及系统</p>
    <p>技术领域</p>
    <p>本发明涉及通信网络中的电子票技术领域，尤其涉及一种电子票提供方 法、装置及系统、电子票检验方法、装置及系统。</p>
    <p>背景技术</p>
    <p>目前，电子票以其安全性、方便性、节约纸张等优点逐步为大众所接受， 从而广泛地出现在日常生活中各个需购票的场合（比如观看电影、乘火车、游 览旅游景点、观看体育比赛、参加展览活动、就餐等），为了在各个需购票的 场合使用电子票，需要有相应的一套电子票系统，用于生成、分发、校验电子 票（用于校验电子票的终端称为检票终端）。目前广泛应用的电子票系统主要</p>
    <p>有如下三种：</p>
    <p>一种是二维码形式的电子票系统：这种电子票系统生成的电子票是二维码 形式的，即通过将票据信息在一个矩阵空间中通过黑、白像素在矩阵中的不同 分布进行编码，从而生成电子票。二维码电子票携带的信息量大，能以彩信、 短信方式通过无线通信网络传输，能在移动终端显示屏上显示。</p>
    <p>一种是固定格式的电子票系统：这种电子票系统生成的电子票，其长度、 大小是固定的，其中包含的字段也是固定的。比如， 一个用于生成电子电影票 的系统，其生成的具有固定格式的电子电影票中包含的字段有：电影院名称、 影厅、座位号、票类型、影片名称、观影日期、观影时间、票价等。</p>
    <p>一种是模版电子票系统：该电子票系统生成的电子票尽可能的包含各种票 据应该包含的属性。比如，为了生成能通用于公园系统、电影院系统、火车系 统的电子票，则才莫版式的电子票中需要包括公园门票、电影票、火车票的属性。</p>
    <p>在现有技术中，当检票终端对电子票进行检验时，即使该检票终端为不可信的检票终端，仔慵a E"T茶的用尸&#32066;&#29802;仍然全、付该ET条反逸绘TI 进行检验，从而有可能导致电子票信息泄露给该不可信的检票终端，从而不利 于电子票信息的保密性。</p>
    <p>此外，当检票终端对电子票进行检验时，主要是对电子票包含的属性信息 进行检验，比如对电子电影票中包含的电影院名称、影厅、座位号、票类型、 影片名称、观影日期、观影时间、票价等信息进行检验，因此，若伪造的电子 电影票中包含与合法的电子电影票一致的属性信息，而检票终端对伪造的电子 电影票的检验又是先于对合法的电子电影票的冲企验时，才艮据对该伪造电子电影 票包含的属性信息的检验结果，检票终端会让该伪造的电子电影票检验通过， 而后续对合法的电子电影票进行检验时，则会认为该合法的电子电影票为已检 验的废票。由此可见，采用现有技术中的电子票冲企验方法，有可能会产生拥有 合法电子票的用户不能正常使用电子票的问题。</p>
    <p>发明内容</p>
    <p>本发明实施例提供一种电子票提供方法、装置，用以解决现有技术中存在 的电子票有可能泄露给不可信的检票终端的问题。</p>
    <p>本发明实施例还提供一种电子票检验方法、装置，用以解决采用现有技术 中的电子票检验方法，有可能会导致伪造电子票检测通过，而拥有合法电子票 的用户不能正常使用电子票的问题。</p>
    <p>本发明实施例还提供一种电子票提供系统及电子票检验系统。</p>
    <p>为此，本发明实施例采用以下技术方案：</p>
    <p>一种电子票提供方法，包括步骤：存储有待检验电子票的用户终端确定将</p>
    <p>定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端提供 所述电子票。</p>
    <p>较佳地，在储右传;H&#32102;电子&#31966;的用卢铬&#31441;硇</p>
    <p>7进行检验的权限，具体包括：所述存储有电子票的用户终端向所述检票终端发 送所述电子票的属性信息；以及接收所述检票终端反馈的第一校验值，所述第 一校验值为所述检票终端对接收到的所述电子票的属性信息进行加密计算得 到的；所述存储有电子票的用户终端利用自身存储的密钥参数以及力。密算法， 对所述电子票的属性信息进行加密计算，得到第二校&#8212;验值；以及比较自身计算 得到的第二校验值与接收到的第一校验值是否一致，如果是，则确定所述检票 终端具有对所述电子票进行检验的权限；否则，确定所述^f企票终端不具有对所 述电子票进行检验的权限。</p>
    <p>一种电子票提供装置，包括：确定单元，用于确定将要对待检验的电子票 进行检验的检票终端对所述电子票进行检验的权限；以及提供单元，用于在确</p>
    <p>终端提供所述电子票。</p>
    <p>较佳地，上述确定单元具体包括：发送^^莫块，用于向所述4企票终端发送所 述电子票的属性信息；接收模块，用于接收所述检票终端反馈的第一校验值， 所述第 一校验值为所述检票终端对接收到的由发送模块发送的所述电子票的 属性信息进行加密计算得到的；计算模块，用于利用所述电子票提供装置自身 存储的密钥参数以及加密算法，对所述电子票的属性信息进行加密计算，得到 第二校验值；比较模块，用于比较计算模块计算得到的第二校验值与接收模块 接收到的第一校验值是否一致；确定模块，用于当比较模块得到的比较结果为 是时，确定所述检票终端具有对所述电子票进行检验的权限，否则，确定所述 检票终端不具有对所述电子票进行检验的权限。</p>
    <p>一种电子票检验方法，包括步骤：检票终端在对用户终端中存储的待检验 电子票进行检验前，确定用户终端中存储的待检验电子票的被4企验权限；以及 当确定用户终端中存储的待检验电子票具有被检验权限时，对所述电子票进行 检验。</p>
    <p>一种电子票检验装置，包括确定单元，用于在对用户终端中存储的待检验电子票进行检验前，确定用户终端中存储的待检验电子票的被检验权限；以及 检验单元，用于当确定单元确定用户终端中存储的待检验电子票具有被检验权 限时，对所述电子票进行4企验。</p>
    <p>一种电子票提供方法，包括步骤：存储有待^r验电子票的用户终端确定将</p>
    <p>定出所述检票终端具有对所述电子票进行检验的权限时，向所述检票终端发送 用于通知所述检票终端确定所述电子票的被检一睑权限的第一通知消息；所述 用户终端接收所述检票终端发来的用于通知所述用户终端提供电子票信息的 第二通知消息，所述第二通知消息为检票终端根据所述第一通知消息，在确定 出所述电子票具有被检验权限时发来的；所述用户终端根据所述第二通知消 息，向所述检票终端提供所述电子票。</p>
    <p>一种电子票提供系统，包括检票终端以及存储有待检验电子票的用户终 端，其中：用户终端，用于确定将要对所述电子票进行4t验的检票终端对所述 电子票进行检验的权限，以及在确定出所述检票终端具有对所述电子票进行检 验的权限时，向所述检票终端发送用于通知所述检票终端确定所述电子票的4皮 检验权限的第 一通知消息；并接收所述检票终端发来的用于通知所述用户终端 提供电子票信息的第二通知消息，以及根据所述第二通知消息，向所述检票终 端提供所述电子票；冲全票终端，用于根据所述用户终端发来的第一通知消息， 确定所述电子票的被检验权限，以及在确定出所述电子票具有被检验权限时， 向所述用户终端发送所迷第二通知消息。</p>
    <p>一种电子票检验方法，包括步骤：检票终端在对用户终端中存储的待检&#8212;验 电子票进行检验前，确定所述电子票的被检验权限；以及当确定所述电子票具 有被检-睑权限时，向所述用户终端发送用于通知所述用户终端确定所述检票终 端对所述电子票进行;^验的权限的消息；检票终端接收所述用户终端发来的所 述电子票，其中所述电子票为用户终端根据接收到的所述消息，在确定出所述 检票终端具有对所述电子票进行检验的权限时发来的；所述检票终端对所述电子票进行检验。</p>
    <p>一种电子票检验系统，包括检票终端以及存储有待检验电子票的用户终</p>
    <p>端，其中：检票终端，用于在对用户终端中存储的待检验电子票进行检验前， 确定所述电子票的被检验权限，以及当确定所述电子票具有被4企&#8212;睑权限时，向</p>
    <p>,确</p>
    <p>行检验的权限的消息；并接收所述用户终端发来的所述电子票，以及对所述电 子票进行检验；用户终端，用于根据所述检票终端发来的所述消息，确定所述 检票终端对所述电子票进行检验的权限，以及在确定出所述;f企票终端具有对所 述电子票进行4企验的权限时，向所述检票终端发送所述电子票。</p>
    <p>曰月忠？^.你l i闺：H"在J法右;f条i务&#8212;怜由.年至的F沐端确</p>
    <p>票进行检验的检票终端对所述电子票进行检验的权限；以及在确定出所述检票</p>
    <p>终端具有对所述电子票进行检验的权限时，才向所述检票终端提供所述电子 票，从而使得检票过程是基于确定检票终端为可信终端的前提下进行的，因此 能够保证检票过程的安全性，避免了现有技术中存在的有可能将电子票泄露给 不可信的检票终端的问题。</p>
    <p>票进行检验前，确定用户终端中存储的待检验电子票的被检验权限；以及当确 定用户终端中存储的待检验电子票具有被检验权限时，才对所述电子票进行检 验，从而保证检票终端后续检验的电子票均为合法的电子票，解决采用现有技 术中的检票方法可能会导致伪造电子票检验通过，而拥有合法电子票的用户不 能正常使用电子票的问题。</p>
    <p>附图说明</p>
    <p>图1为本发明实施例提供的一种电子票提供方法的具体流程示意图； ,明中用户沐&#34399;箱</p>
    <p>具体过程示意图；图3a为本发明实施例提供的一种电子票提供方法应用在的一种系统的具 体结构示意图；</p>
    <p>图3b为本发明实施例提供的一种电子票提供方法的具体应用过程示意图； 图3c为本发明实施例中SIM卡内的文件存储结构示意图； 图4为本发明实施例提供的一种电子票检验方法的具体实现流程图； 图5为本发明实施例中检票终端确定用户终端中存储的待检验电子票的被 检验权限的具体过程示意图；</p>
    <p>图6为本发明实施例提供的一种电子票检验方法的具体应用过程示意图； 图7为本发明实施例提供的另一种电子票提供方法的具体流程示意图； 图8为本发明实施例提供的另一种电子票提供方法的具体应用流程示意</p>
    <p>图；</p>
    <p>图9为本发明实施例提供的另一种电子票检验方法的具体流程示意图。</p>
    <p>具体实施方式</p>
    <p>本发明实施例首先提供一种电子票提供方法，通过在进行检票流程之前，</p>
    <p>对该电子票进行检验的权限，并在确定出该检票终端具有对该电子票进行检验 的权限时，才向该4企票终端提供该电子票，从而避免了用户终端将自身存储的 电子票发送给不可信的检票终端而造成的电子票泄露的问题。</p>
    <p>下面结合各个附图对本发明实施例技术方案的主要实现原理、具体实施方 式及其对应能够达到的有益效果进行详细的阐述。</p>
    <p>如图1所示，为本发明实施例提供的该电子票提供方法的具体流程示意图， 包括以下步骤：</p>
    <p>步骤11,存储有待检验电子票的用户终端确定将要对所述电子票进行检验 的检票终端对所述电子票进行检验的权限；</p>
    <p>步骤12,在确定出所述检票终端具有对所述电子票进行检验的权限时，向</p>
    <p>ii所述检票终端提供所述电子票。</p>
    <p>在上述步骤11中，该用户终端确定冲企票终端对电子票进行4企验的权限的</p>
    <p>具体过程可以但不限于用如图2所示的流程示意图进行表示，该流程示意图包 括以下步骤：</p>
    <p>步骤21,存储有电子票的该用户终端向^f企票终端发送待^r-验的电子票的属 性信息；</p>
    <p>步骤22，接收检票终端反馈的第一校验值，该第一校验值为检票终端对接 收到的电子票的属性信息进行加密计算得到的；</p>
    <p>步骤23，用户终端利用自身存储的密钥参数以及加密算法，对电子票的属 性信息进行力。密计算，得到第二校验值；</p>
    <p>步骤24，用户终端比较自身计算得到的第二校验值与接收到的第一校验值 是否一致，如果是，则执行步骤25,否则，执行步骤26;</p>
    <p>步骤25，确定该检票终端具有对该电子票进行检验的权限，流程结束； 步骤26,确定该4企票终端不具有对该电子票进行^N险的权限，流程结束。 以下以一个具体的应用过程为例，详细说明本发明实施例提供的该方法在 实际中的应用，该应用过程可以在如图3a所示的系统中进行的，该系统主要 包括：电子票系统、读写卡器、包含SIM卡的非接触手机终端以及包含有PSAM 卡的检票终端，此外，IF1为读写卡器与电子票系统之间的接口， IF2为读写卡 器与非接触手机终端之间的接口， IF3为电子票系统与非接触手机终端之间的 接口 ， IF4为电子票系统与检票终端之间的接口 ， IF5为检票终端与非接触手机 终端之间的接口。</p>
    <p>在说明本发明实施例提供的该方法的应用过程之前，需要对下述步骤中的 一些定义做简单的介绍：下表l中的"标签长度参数"（TLV, Tag、 Length、 Value)格式对应记录电子票每个属性的属性标识信息、属性参数长度信息以及 属性参数：属性标识信息（属性标识信息即与电子票的各属性如电子电影票的 电影名称、上映时间等分别对应的标识0X00、 0X01)相当于Tag,所占存储空间为设定值；属性参数，相当于Value,可以通过GB编码或者ASCII码或 者其它编码来表达，例如，票据类型的参数为"火车票"，则电子票中记录的 属性参数可以是"火车票"的GB码&#8212;&#8212;0xBBF0B3B5C6Bl，"车次"的参数 为"T56"，则电子票中记录的属性参数可以是"T56"的GB码&#8212;&#8212; 0xA3D4A3B5A3B6，该属性参数的存储空间不固定，属性参数长度信息（相当 于Length)用以指示该属性的属性参数占用存储空间的大小。也就是先记录第 一个属性的属性标识信息，该属性标识信息所占存储空间大小等于设定值C， 然后记录第 一个属性的属性参数长度信息（属性参数长度信息所占存储空间大 小等于设定值D),之后记录第一个属性的属性参数；之后记录第二个属性的 属性标识信息……依次类推。</p>
    <p>基于图3a所示的系统，本发明实施例提供的该方法的应用过程如图3b所 示，包括以下步骤：</p>
    <p>步骤31:包含存储有电子票的SIM卡的非接触手机终端向检票终端发送 待检验的电子票的属性信息及伪随机数（ICC)，非接触手机终端向检票终端发 送的该属性信息可以但不限于采用下表l的格式，且该属性信息可以但不限于 包含如表l所示的内容，此外，SIM卡内的文件结构符合ISO/IEC 7816-4， SIM 卡内对文件进行存储的存储结构示意图如图3c所示， 一张SIM卡中可以存储 多张电子票（如图中的电子票1~N),非接触手机终端向检票终端发送的为即 将进行^r票的电子票的属性信息；</p>
    <p>表l:</p>
    <p>&lt;table&gt;table see original document page 13&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;对表1中各字段的说明如下：</p>
    <p>电子票应用使用编号：SIM中的电子票应用的唯一标识，不同SIM卡中电 子票应用使用编号均不相同；</p>
    <p>用于计算MAC1的电子票信息标签：取值为'A0B0'，该标签下的电子票 信息将用于计算MAC1 (后文将介绍MAC1的计算方法）；</p>
    <p>用于计算MAC1的电子票信息长度：表明"用于计算MAC1的电子票信 息"的实际长度；</p>
    <p>用于计算MAC1的电子票信息：按TLV结构组织，每个票属性是一个TLV 结构，该票属性的Value (值）用于计算MAC1，同时该属性的Value可能同 时用于其它用途（例如：电子票的有效性检查）；</p>
    <p>其它电子票信息标签：取值为'A0B1'，该标签下电子票信息将不参与 MAC1的计算；</p>
    <p>其它电子票信息长度：表明"其它电子票信息"的实际长度；其它电子票 信息：按TLV结构组织，每个票属性是一个TLV结构，该票属性的Value (值） 供检票终端4吏用；</p>
    <p>电子票脱机交易序号：用于SIM卡电子票的脱机交易，在检票交易MAC1 验证通过的情况下，由SIM卡将其加l,当该值达到最大值后归零重新计数； 伪随机数：由SIM卡生成，用于计算过程密钥（SESSKey)。 步骤32，检票终端接收到该非接触手机终端发送来的如表1所示的电子票 属性信息及ICC后，删除TLV格式中的属性标识信息（Tag)与属性参数长度 信息（Length),并将TLV格式中剩余的各个属性参数（Value)进行连接后重 新计算得到"用于计算MAC1的电子票信息长度"，并将包含该计算得到的"用 于计算MAC1的电子票信息长度"的如表2所示的命令报文提供给自身的 PSAM卡，该命令报文的格式及内容可以但不限于如下表2所示：</p>
    <p>表2:&lt;table&gt;table see original document page 14&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;&lt;table&gt;table see original document page 15&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;</p>
    <p>步骤33, PSAM卡根据检票终端提供的如表2所示的命令报文，利用自身 存储的由密钥中心生成并分配的检票根密钥（CRKey)以及3DES算法（或 AES算法），对表2中的电子票应用使用编号进行加密计算，得到检票子密钥 (CSKey),并利用该CSKey对ICC、电子票脱机交易序号、PSAM卡自身存 储的检票终端脱机交易序号进行加密计算，得到过程密钥（SESSKey),进一 步地，该PSAM卡利用SESSKey及对应的算法，对命令报文中的用于计算 MAC1的电子票信息（只包含原TLV中的Value信息）、电子票脱机交易序号、 交易类型标识、交易日期、交易时间进行加密计算，得到第一校-验值MACl;</p>
    <p>步骤34, PSAM卡将MAC1、检票终端脱机交易序号以及关于自身使用的 密钥等信息提供给检票终端，其中，PSAM卡也可以在步骤31中非接触手机 终端发送如表1所示的属性信息之前，就将关于自身使用的密钥等信息提供给 检票终端；</p>
    <p>步骤35，检票终端将包含MAC1、检票终端脱机交易序号等信息的命令报 文以及包含PSAM卡使用的密钥等信息的命4^艮文均发送给非接触手机终端，</p>
    <p>式及内容，而包含PSAM卡使用的密钥等信息的命令报文格式及内容可以但不 限于为如表4所示的格式及内容，由于PSAM卡也可以在步骤31中非接触手 机终端发送如表1所示的属性信息之前，就将关于自身使用的密钥等信息提供 给检票终端，因此检票终端也可以在非接触手机终端发送如表1所示的属性信 息之前或之后就将如表4所示的信息发送给非接触手机终端；表3:</p>
    <p>&lt;table&gt;table see original document page 16&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;步骤36，非接触手机终端中的SIM卡根据检票终端发送来的如表3、表4 所示的命令报文，在自身存储的检票根密钥索引号与由密钥中心生成并分配的 检票子密钥CSKey的对应关系以及算法标识与算法的对应关系中分别确定出 对应的CSKeyl以及算法，并利用确定的CSKeyl对表3中检票终端脱机交易 序号、自身存储的电子票脱机交易序号、以及表l中的由自身产生的ICC进行 加密计算，得到过程密钥（SESSKeyl),进一步地，SIM卡利用SESSKeyl及 查找到的算法，对用于计算MAC1的电子票信息（只包含原TLV中的Value 信息）、表3中的交易类型标识、交易日期、交易时间进行加密计算，得到第 二校验值MAC1';</p>
    <p>步骤37，非接触手机终端中的SIM卡比较自身得到的第二校验值MAC1' 与接收到的表3中的第一校验值MAC1是否一致，如果一致则说明PSAM卡 中存储的CRKey与SIM卡中存储的CSKey为同一密钥中心所分配的，而且该 检票终端对该待检-验的电子票具有检验的权限，从而执行步骤38，否则，SIM 卡确定该检票终端不具有对待4全验的电子票进行4企验的权限，并通知用户该检 票终端为不可信的^r票终端，流程结束；</p>
    <p>步骤38，非接触手机终端中的SIM卡确定该检票终端具有对待检验的电子票进行检验的权限，该非接触手机终端向检票终端提供该电子票。</p>
    <p>由上述步骤可知，由于非接触手机终端在向检票终端提供待检验的电子票 之前，先确认该检票终端是否具有对该电子票进行检验的权限，待确认出该检 票终端具有对该电子票进行检验的权限（即确定该检票终端为可信的、合法的 检票终端）时，才向该检票终端提供该电子票，从而避免了非接触手机终端将 电子票泄露给不可信和/或不合法的检票终端的问题。</p>
    <p>需要说明的是，由于相同行业的公司提供的电子票中包含的密钥以及相同 行业的公司使用的4企票终端所包含的密钥有可能分别对应相同，因此，比如，</p>
    <p>餐厅A提供的电子就餐票A中存储的密钥与餐厅B提供的电子就餐票B中存 储的密钥有可能一致，且餐厅A使用的检票终端A与餐厅B使用的检票终端 B中存储的密钥也有可能一致，因此，有可能发生检票终端B误检了电子就餐 票A的情况。为了避免该情况的发生，餐厅A可以分别为电子就餐票A及检 票终端A分配商家密钥Token A,而餐厅B则可以分别为电子就餐票B及检票 终端B分配商家密钥Token B，因此，上述步骤33中，当PSAM卡生成第一 校验值MAC1的同时，还可以根据PSAM卡自身存储的Token 1及对应的算法， 对命令报文中的用于计算MAC1的电子票信息（只包含原TLV中的Value信 息）、电子票脱机交易序号、交易类型标识、交易日期、交易时间进行加密计 算，得到Token第一校验值，并将该Token第一校验值发送给非接触手机终端， 再由非接触手机终端根据自身存储的Token 2及对应的算法，执行同样的对上 述加密对象进行加密计算的过程，生成Token第二校验值，非接触手机终端比 较MAC1与MAC1'，并比较Token第一校验值与Token第二校验值，并当得 到的比较结果为：MAC1与MAC1'&#8212;致，且Token第一校验值与Token第二校 验值一致时，判断该检票终端可以对电子票进行检验，而当得到的比较结果为： MACl与MACl'&#8212;致，Token第一校验值与Token第二校验值不一致时，判断 该检票终端虽为可信的检票终端，但不能对该电子票进行4企验。</p>
    <p>相应地，本发明实施例提供一种电子票提供装置，用以解决现有技术中存在的用户终端有可能将自身存储的电子票信息发送给不可信的检票终端而造 成的电子票信息泄露的问题。</p>
    <p>本发明实施例提供的该电子票提供装置包括以下单元：</p>
    <p>确定单元，用于确定将要对待检验的电子票进行检验的检票终端对所述电 子票进行检验的权限；提供单元，用于在确定单元确定出所述4企票终端具有对 所述电子票进行检验的权限时，向所述^r票终端提供所述电子票。</p>
    <p>较佳地，对应于确定单元的功能的一种实现方式，该确定单元具体可以包 括以下模块：</p>
    <p>发送模块，用于向所述检票终端发送所述电子票的属性信息；接收&#27798;莫块， 用于接收所述检票终端反馈的第 一校验值，所述第一4交-睑值为所述4企票终端对 接收到的由发送模块发送的所述电子票的属性信息进行加密计算得到的；计算 模块，用于利用所述电子票提供装置自身存储的密钥参数以及加密算法，对所 述电子票的属性信息进行加密计算，得到第二校验值；比较模块，用于比较计 算模块计算得到的第二校验值与接收模块接收到的第一校验值是否一致；确定 模块，用于当比较模块得到的比较结果为是时，确定所述检票终端具有对所述 电子票进行检验的权限，否则，确定所述检票终端不具有对所述电子票进行检 验的权限。</p>
    <p>由于现有技术中还存在着采用现有的电子票抬r验方法，有可能会产生拥有 合法电子票的用户不能正常使用电子票的问题，为此，本发明实施例提供一种 电子票检验方法，用以解决现有技术中存在的该问题。本发明实施例提供的该 电子票检验方法的具体实现流程图如图4所示，包括以下步骤：</p>
    <p>步骤41，检票终端在对用户终端中存储的待4企验电子票进行4企验前，确定 用户终端中存储的待检验电子票的被检验权限；</p>
    <p>步骤42，当确定用户终端中存储的待检验电子票具有被检验权限时，对所 述电子票进行4b险。</p>
    <p>较佳地，上述步骤41中检票终端确定用户终端中存储的待检验电子票的被检验权限的具体过程可以但不限于采用如图5所示的流程示意图进行表示， 该流程示意图包括以下步骤：</p>
    <p>步骤51 ，检票终端获得该用户终端提供的待检验电子票的属性信息及第一 校验值，该第一校验值为该用户终端利用自身存储的密钥参数与加密算法对该 电子票的属性信息进行加密计算得到的；</p>
    <p>步骤52,该检票终端利用自身存储的密钥参数以及加密算法对用户终端发 来的属性信息进行加密计算，得到第二校验值；</p>
    <p>步骤53,该检票终端比较计算得到的第二校验值与接收到的第一校验值是 否一致，如果是，则执行步骤54，否则则执行步骤55;</p>
    <p>步骤54,确定该电子票具有被检验权限，流程结束；</p>
    <p>步骤55，确定该电子票不具有被检验权限，流程结束。</p>
    <p>以下以一个具体的应用过程为例，详细说明本发明实施例提供的该电子票 4企验方法在实际中的应用，该应用过程同样可以在如图3a所示的系统中进行， 应用过程的具体示意图如图6所示，包括以下步骤：</p>
    <p>步骤61,当检票终端检测到用户使用的非接触手机终端已经进入检票终端 自身的有效工作区时，向该非接触手机终端发送用于通知该非接触手机终端提 供身份校验值的消息，该消息中包含检票终端脱机交易序号；</p>
    <p>步骤62,该非接触手机终端接收到上述消息后，该非接触手机终端中的 SIM卡利用自身存储的检票子密钥（CSKey)对自身存储的电子票脱机交易序 号、上述消息中包含的检票终端脱机交易序号以及自身产生伪随机数ICC进行 加密计算，得到过程密钥（SESSKey)，进一步地，SIM卡利用该SESSKey及 对应的算法对自身存储的待检验的电子票的提供商编号、电子票序号进行加密 计算，得到第一校验值MAC2;</p>
    <p>步骤63,该非接触手机终端将包含MAC2、 ICC、电子票脱机交易序号、 电子票应用使用编号、自身使用的CSKey的索引号、算法标识、电子票的提 供商编号、电子票序号等信息的消息发送给检票终端；步骤64，检票终端中的PSAM卡根据接收到由非接触手机终端发送来的 上述消息中的CSKey的索引号，在自身存储的CSKey的索引号与4企票才艮密钥 (CRKey)的对应关系中，确定出CRKey2,并才艮据确定出的该CRKey2以及 自身存储的3DES算法（或AES算法）对上述消息中的电子票应用使用编号进 行加密计算，得到CSKey2，检票终端根据上述消息中的算法标识，在自身存 储的算法标识与算法的对应关系中，确定出SIM卡所使用的算法，并根据 CSKey2及确定的算法，对电子票脱机交易序号、自身存储的检票终端脱机交 易序号、ICC进行加密计算，得到过程密钥（SESSKeyl)，进一步地，利用 SESSKeyl对上述消息中的电子票的提供商编号、电子票序号进行加密计算， 得到第二校验值MAC2';</p>
    <p>步骤65,检票终端比较自身计算得到的MAC2'与接收到MAC2是否一致， 如果一致则执行步骤66,否则，检票终端确定该待检验的电子票不具有被检验 权限，并向非接触手机终端通知该检验的电子票不具有被检验权限，流程结束；</p>
    <p>步骤66，检票终端确定该待检验的电子票具有被检验权限，通知非接触手 机终端提供电子票，并对非接触手机终端提供的电子票进行检验，流程结束。</p>
    <p>相应地，本发明实施例提供一种电子票检验装置，用以解决采用现有技术 中有可能会产生拥有合法电子票的用户不能正常使用电子票的问题。本发明实 施例提供的该电子票4企验装置主要包含以下单元：</p>
    <p>确定单元，用于在对用户终端中存储的待检验电子票进行检验前，确定用 户终端中存储的待检验电子票的被检验权限；以及检验单元，用于当确定单元 确定用户终端中存储的待检验电子票具有被检验权限时，对所述电子票进行检 验。</p>
    <p>较佳地，对应于确定单元的功能的一种实现方式，该确定单元具体可以包 括以下模块：</p>
    <p>获得模块，用于获得所述用户终端提供的待4全验电子票的属性信息及第一 校验值，所述第一校验值为所述用户终端利用自身存储的密钥参数与加密算法对所述电子票的属性信息进行加密计算得到的；计算模块，用于利用所述电子 票检验装置自身存储的密钥参数以及加密算法，对用户终端发来的属性信息进 行加密计算，得到第二校验值；比较模块，用于比较计算模块计算得到的第二 校验值与接收到的第一校验值是否一致；确定模块，用于当比较模块得到的比 较为是时，确定所述电子票具有被检验权限，否则，确定所迷电子票不具有被 检验权限。</p>
    <p>采用本发明实施例提供的电子票提供方案，可以实现用户终端在提供电子 票给检票终端之前，先确定出该检票终端为具有对该电子票进行检验的权限的 检票终端；而&#37318;用本发明实施例提供的电子票检验方案，则可以实现检票终端 在对电子票进行检验前，先确定出该电子票具有被检验权限。为了保证具有检 验权限的检票终端检验的电子票为具有与该检票终端对应的被检验权限的电</p>
    <p>该电子票相对应的检验权限的检票终端，本发明实施例还提供了以下两种方 案，用以实现电子票与检票终端之间的双向认证，从而在保证电子票不泄露给 不可信的检票终端的同时，还解决了采用现有技术中的检票方法可能会导致伪 造电子票检验通过，而拥有合法电子票的用户不能正常使用电子票的问题。</p>
    <p>本发明实施例提供一种电子票提供方法，通过用户终端先对检票终端的合 法性进行确定，再由^r票终端对电子票的合法性进行确定，从而解决了现有技 术中电子票有可能泄露给不可信的检票终端，以及检票终端有可能使伪造电子 票检验通过而导致拥有合法电子票的用户不能正常使用电子票的问题。</p>
    <p>本发明实施例提供该电子票提供方法的具体流程示意图如图7所示，包括</p>
    <p>步骤71,存储有待检验电子票的用尸终端&#30889; 检票终端对该电子票进行检验的权限；</p>
    <p>步骤72，该用户终端在确定出该检票终端具有对该电子票进行4全验的权限 时，向该检票终端发送用于通知该检票终端确定该电子票的被检验权限的第一通知消息；</p>
    <p>步骤73,该用户终端接收该检票终端发来的用于通知该用户终端提供电子 票信息的第二通知消息，该第二通知消息为检票终端根据该第一通知消息，在 确定出该电子票具有被:^r-睑权限时发来的；</p>
    <p>步骤74,该用户终端根据该第二通知消息，向该检票终端提供该待检验的 电子票。</p>
    <p>以下以电子票存储在非接触手机终端的SIM卡中为例，对发明实施例提供 的该方法的具体应用流程进行i&#20812;明，该应用流程的具体示意图如图8所示，包 括步骤：</p>
    <p>步骤81，当检票终端检测到用户使用的非接触手机终端已经进入检票终端 自身的有效工作区时，向该非接触手机终端中的SIM卡发送含有电子票应用标 识（AID, Application ID)的应用选择命令（SELECT ADF )，该应用选择命令 的格式符合ISO/IEC 7816-4;</p>
    <p>步骤82,该非接触手机终端接收到SELECT ADF后，使用该手机终端的 用户通过该手机终端从安全存储芯片中存储的多张（或一张）电子票中选择一 张需要检验的电子票，移动终端根据用户的选择将该电子票的状态设为"待检" 状态；</p>
    <p>步骤83，该非接触手机终端中的SIM卡向4企票终端发送包含发卡方专用 数据在内的文件控制信息（FCI, File Controlling Imformation),该FCI的内容 及格式可以但不限于如下表5所示：</p>
    <p>表5:</p>
    <p>数据字段的描述	长度（字节）</p>
    <p>发卡方标识符	8</p>
    <p>发卡方应用版本号	1</p>
    <p>SIM卡应用序列号	10</p>
    <p>SIM卡应用启用日期	4</p>
    <p>SIM卡应用有效曰期	4</p>
    <p>发卡方自定义FCI数据	2</p>
    <p>22步骤84，检票终端根据接收到的FCI,检测SIM卡是否有效以及检测检 票终端自身是否支持该SIM卡；</p>
    <p>在该步骤84中，检测SIM卡是否有效主要包括：</p>
    <p>1、 检票终端将FCI中包含的如表1中所示的发卡方标识符发卡方标识符 进行匹配，或将如表1中所示的SIM卡应用序列号与自身存储的黑名单中的 SIM卡应用序列号进行匹配，当得到发卡方标识符与SIM卡应用序列号中至少 有一项的匹配结果为一致时，判断该SIM卡在黑名单中，；险票终端向非接触手 机终端发出用于提示该SIM卡在黑名单中的提示信息，流程结束；</p>
    <p>2、 检票终端比较FCI中包含的如表1中所示的SIM卡应用有效日期与检 票当天的日期，当比较得到SIM卡应用有效日期已经过期时，检票终端向非接 触手机终端发出用于提示该SIM卡已过期的提示信息，流程结束。</p>
    <p>而检测检票终端自身是否支持该SIM卡则主要包括：</p>
    <p>检票终端将FCI中包含的如表1中所示的SIM卡应用序列号与自身存储 的能够支持的发卡方标识符进行匹配，或将如表1所示的发卡方应用版本号与 自身存储的能够支持的发卡方应用版本号进行匹配，当得到发卡方标识符、发 卡方应用版本号中至少有一项的匹配结果为不一致时，检票终端确定自身不能 支持该SIM卡，并向非接触手机终端发出用于提示该检票终端不能支持该SIM 卡的提示信息，流程结束。</p>
    <p>冲艮据该步骤84的检测结果，当检测到SIM有效且该检票终端支持该SIM 卡时，执行步骤85;</p>
    <p>步骤85,检票终端向非接触手机终端发送INITIALIZE FOR CHECK命令 报文，该命令报文用于指示非接触手机终端进行检票初始化操作，其格式符合 ISO/IEC 7816-4,其内容与格式可以如下表6所示：</p>
    <p>表6:</p>
    <p>&lt;table&gt;table see original document page 23&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;P2	曹</p>
    <p>Ix	'0C，</p>
    <p>Data	参见表4</p>
    <p>Le	'00'</p>
    <p>步骤86，若4全票终端向非接触手机终端发送的INITIALIZE FOR CHECK</p>
    <p>命令执行成功，则该非接触手机终端向检票终端返回状态码'9000，，同时返 回INITIALIZE FOR CHECK响应报文，该报文内容及格式可以如表1所示， 不再赘述；若检票终端向非接触手机终端发送的INITIALIZE FOR CHECK命 令执行不成功，则该非^接触手机终端可以向;f企票终端返回如下表7所示的 INITIALIZE FOR CHECK命令状态码（例如，状态码'9101，对应的告警信息 为'没有待检电子票，，而当状态码'卯00'对应的告警信息不在表7中时， 则需要对电子票的有效性进行重新判断）：</p>
    <p>表7:</p>
    <p>SW1	SW2	说明</p>
    <p>'65，		内存错误</p>
    <p>6A	86	参数错误</p>
    <p>'67,	曹	长度错误</p>
    <p>'69'	'or	命令不接受（无效状态）</p>
    <p>'6D，	'00'	INS不支持或错误</p>
    <p>'6E，	曹	CLA不支持或错误</p>
    <p>'91'	'or	没有待检电子票</p>
    <p>'91'	'02'	不支持指定的密钥索引号</p>
    <p>'9r	'03，	不支持指定的算法标识</p>
    <p>'91，	'04'	电子票提供商编号同待检电子票不匹配</p>
    <p>步骤87，检票终端向非接触手机终端发送的INITIALIZE FOR CHECK命 令执行成功，且该非接触手机终端向检票终端返回如表1所示的响应报文后， 检票终端删除TLV格式中的属性标识信息（Tag)与属性参数长度信息</p>
    <p>(Length),并将TLV格式中剩余的各个属性参数（Value)进行连接后重新计 算得到"用于计算MAC1的电子票信息长度"，并将包含该计算得到的"用于 计算MAC1的电子票信息长度，，的如表2所示的命令报文INIT_PSAM_FOR</p>
    <p>CHECK提供给自身的PSAM卡；步骤88, PSAM卡根据检票终端提供的如表2所示的命令报文 IMT&#8212;PSAM&#8212;FOR_CHECK,利用自身存储的检票根密钥（CRKey)以及3DES 算法（或AES算法），对表2中的电子票应用使用编号进行加密计算，得到检 票子密钥（CSKey),并利用该CSKey对ICC、电子票脱机交易序号、PSAM 卡自身存储的检票终端脱机交易序号进行加密计算，得到过程密钥 (SESSKey),进一步地，该PSAM卡利用SESSKey及对应的算法，对命令报 文中的用于计算MAC1的电子票信息（只包含原TLV中的Value信息）、电子 票脱机交易序号、交易类型标识、交易日期、交易时间进行加密计算，得到第 一校验值MACl;</p>
    <p>步骤89，若上述步骤88执行成功，则PSAM卡将如下表8所示的 INIT_PSAM&#8212;FOR_CHECK响应报文反馈给检票终端，否则，PSAM卡将如下 表9所示的INIT&#8212;PSAM&#8212;FOR&#8212;CHECK命令状态码反馈给检票终端，若PSAM 卡向检票终端反馈的是INIT_PSAM_FOR&#8212;CHECK命令状态码，则检票终端在 接收到该INIT_PSAM_FOR&#8212;CHECK命令状态码后，可以结束流程，或根据 INIT一PSAM一FOR一CHECK命令状态码指示的错误进行相应调试后，由检票终 端重新执行向PSAM卡发送INIT_PSAM_FOR &#8212;CHECK命令报文的步骤；</p>
    <p>表8:</p>
    <p>&lt;table&gt;table see original document page 25&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;表9:	&lt;table&gt;table see original document page 25&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;步骤810，检票终端在接收到IMT PSAM FOR CHECK响应报文后，向非接触手机终端发送DEBIT FOR CHECK命令报文，该命令报文的格式及内容 可以如下表IO所示：</p>
    <p>表10:</p>
    <p>&lt;table&gt;table see original document page 26&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;步骤811,非接触手机终端中的SIM卡根据检票终端发送来的如表3、表 4所示的命令报文，在自身存储的检票根密钥索引号与检票子密钥CSKey的对 应关系以及算法标识与算法的对应关系中分别确定出对应的CSKeyl以及算 法，并利用确定的CSKeyl对表3中检票终端脱机交易序号、自身存储的电子 票脱机交易序号、以及表l中的由自身产生的ICC进行加密计算，得到过程密 钥（SESSKeyl)，进一步地，SIM卡利用SESSKeyl及查找到的算法，对用于 计算MAC1的电子票信息（只包含原TLV中的Value信息）、表3中的交易类 型标识、交易日期、交易时间进行加密计算，得到第二校验值MACl';</p>
    <p>步骤812,非接触手机终端中的SIM卡比较自身得到的第二校验值MACl' 与接收到的表3中的第一校验值MAC1是否一致，如果一致则执行步骤813, 否则，SIM卡确定该检票终端不具有对待检验的电子票进行检验的权限，执行 步骤814中的相应内容；</p>
    <p>步骤813，非接触手机终端中的SIM卡确定该检票终端具有对待检验的电 子票进行检验的权限后，利用SESSKeyl对电子票提供商编号、电子票序号进 行加密，得到第一校验值MAC2，并且，在该步骤中，SIM卡还可以生成脱机 检票交易流程中的TAC值，该TAC值是利用电子票提供商提供的TAC密钥左 右8位字节进行异或运算得到的结果，对检票终端提供的交易类型标识、PS AM 卡中存放的终端机编号、检票终端脱机交易序号、交易日期、交易时间以及SIM卡自身存储的电子票提供商编号、电子票序列号进行加密计算得到的值；</p>
    <p>步骤814，若上述步骤813执行成功，则非接触手机终端向检票终端返回 状态码'9000'，并发送包含MAC2的DEBIT FOR CHECK响应报文，该报文 的内容及格式可以如下表]1所示；若当步骤812中判断得到MAC1'与MAC1 不一致，或发生DEBIT FOR CHECK命令报文接收失败等错误，则非接触手机 终端向检票终端返回如表12所示的DEBIT FOR CHECK命令状态码，若非接</p>
    <p>在接收到该DEBIT FOR CHECK命令状态码后，可以结束流程，或根据DEmT FOR CHECK命令状态码指示的错误进行相应调试后，由检票终端重新执行向 非接触手机终端发送DEBIT FOR CHECK命令才艮文的步骤； 表11:</p>
    <p>&lt;table&gt;table see original document page 27&lt;/column&gt;&lt;/row&gt;
&lt;table&gt;</p>
    <p>步骤815,检票终端利用SESSKey及对应的算法，对表ll中的电子票提 供商编号、电子票序号进行加密计算，得到第二校验值MAC2，；</p>
    <p>步骤816,检票终端比较自身计算得到的MAC2'与接收到MAC2是否一致， 如果一致则执行步骤817，否则，检票终端确定该待检-险的电子票不具有被才企 验权限，并发出用于指示"正在检验的电子票可能是伪造电子票，'的报警信息， 流程结束；步骤817,检票终端确定该待检验的电子票具有被检验权限，通知非接触 手机终端提供电子票，并对非接触手机终端提供的电子票进行检验，在对电子 票进行检验完毕后，还可以采用将表11中的TAC值打印到检票凭证上的方式， 使持有该检票凭证的用户得知整个检票流程的完整性，流程结束。由于在图8 所示的过程中，用于计算MAC2及MAC2'的电子票信息为电子票提供商编号 及电子票序号信息，因此，若验证得到MAC2与MAC2' &#8212;致，则该步骤817 中，检票终端可以直接确定该待检验的电子票^r票通过，并将该电子票中的检 验标识修改为"已检验"。</p>
    <p>需要说明的是，图8所示的过程中，为了避免发生上述的类似检票终端B 误检了电子就餐票A的情况，PSAM卡与SIM卡中还可以分别存储商家密钥， 当PSAM卡生成第一校验值MAC1的同时，还可以根据PSAM卡自身存储的 Token 1及对应的算法，对命令报文中的用于计算MAC1的电子票信息（只包 含原TLV中的Value信息）、电子票脱机交易序号、交易类型标识、交易日期、 交易时间进行加密计算，得到Token第一校验值，并将该Token第一校验值发 送给非接触手机终端，再由非接触手机终端根据自身存储的Token 2及对应的 算法，执行同样的对上述加密对象进行加密计算的过程，生成Token第二校验 值，非接触手机终端比较MAC1与MAC1',并比较Token第一校验值与Token 第二校验值，并当得到的比较结果为：MACl与MACl'&#8212;致，且Token第一校 验值与Token第二校验值一致时，判断该检票终端可以对电子票进行检验，而 当得到的比较结杲为：MACl与MACl'&#8212;致，Token第一校验值与Token第二 校验值不一致时，判断该4企票终端虽为可信的检票终端，但不能对该电子票进 行检验。</p>
    <p>相应地，本发明实施例提供一种电子票提供系统，包括检票终端以及存储 有待检验电子票的用户终端，其中，该用户终端用于确定将要对该电子票进行 检验的检票终端对该电子票进行检验的权限，以及在确定出该检票终端具有对 该电子票进行检验的权限时，向该检票终端发送用于通知该;险票终端确定该电</p>
    <p>28子票的被检验权限的第一通知消息；并接收该检票终端发来的用于通知所述用 户终端提供电子票信息的第二通知消息，以及根据所述第二通知消息，向该检 票终端提供该电子票；</p>
    <p>该检票终端则用于根据该用户终端发来的第 一通知消息，确定该电子票的 被检验权限，以及在确定出该电子票具有被检验权限时，向该用户终端发送第 二通知消息。</p>
    <p>此外，本发明实施例还提供一种电子票检^r方法，通过检票终端先确定电 子票的合法性，再由用户终端确定该检票终端的合法性，从而解决了现有技术 中检票终端有可能使伪造电子票检验通过而导致拥有合法电子票的用户不能 正常使用电子票，以及电子票有可能泄露给不可信的检票终端的问题。</p>
    <p>本发明实施例提供的该电子票检验方法的具体流程示意图如图9所示，包 括以下步骤：</p>
    <p>步骤91,检票终端在对用户终端中存储的待检验电子票进行检验前，确定 该电子票的被检验权限；</p>
    <p>步骤92,当确定该电子票具有被检验权限时，向该用户终端发送用于通知 该用户终端确定该;险票终端对该电子票进行检ar的^J艮的消息；</p>
    <p>步骤93,检票终端接收该用户终端发送来的该电子票，其中该电子票为用 户终端根据接收到的该消息，在确定出该检票终端具有对该电子票进行检验的 权限时发来的；</p>
    <p>步骤94,该4企票终端对该用户终端发送来的该电子票进行检-睑。 相应地，本发明实施例还提供一种电子票检验系统，包括检票终端以及存 储有待检验电子票的用户终端，其中，该检票终端用于在对用户终端中存储的 待检验电子票进行检验前，确定该电子票的被检验权限，以及当确定该电子票 具有被检验权限时，向该用户终端发送用于通知该用户终端确定该检票终端对 该电子票进行检验的权限的消息；并接收该用户终端发送来的该电子票，以及 对该电子票进行4t验；</p>
    <p>29该用户终端则用于根据该检票终端发送的消息，确定该;险票终端对该电子 票进行检验的权限，以及在确定出该检票终端具有对该电子票进行检验的权限 时，向该检票终端发送该电子票。</p>
    <p>本发明实施例仅以存储有电子票的非接触手机终端为例，具体说明了本发 明实施例提供的各方案，凡是将本发明实施例提供的各方案应用于解决现有技 术中存在的有可能将电子票泄露给不可信的检票终端的问题和/或现有技术中 的检票方法可能会导致伪造电子票检验通过，而拥有合法电子票的用户不能正 常使用电子票的问题，即使存储电子票的载体不同和/或电子票的格式、内容不 同，都在本发明的保护范围之内。</p>
    <p>明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及 其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101866498B?cl=zh">CN101866498B</a></td><td class="patent-data-table-td patent-date-value">2009年9月30日</td><td class="patent-data-table-td patent-date-value">2012年5月9日</td><td class="patent-data-table-td ">深圳市安捷信联科技有限公司</td><td class="patent-data-table-td ">一种基于智能卡的电子票实现方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103310278A?cl=zh">CN103310278A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年6月17日</td><td class="patent-data-table-td patent-date-value">2013年9月18日</td><td class="patent-data-table-td ">广东华大集成技术有限责任公司</td><td class="patent-data-table-td ">基于国密算法的票务应用系统、购票方法及票务管理方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103400418A?cl=zh">CN103400418A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年7月26日</td><td class="patent-data-table-td patent-date-value">2013年11月20日</td><td class="patent-data-table-td ">电子科技大学</td><td class="patent-data-table-td ">一种基于nfc移动终端的电子票务售票和检票方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103400418B?cl=zh">CN103400418B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年7月26日</td><td class="patent-data-table-td patent-date-value">2016年2月3日</td><td class="patent-data-table-td ">电子科技大学</td><td class="patent-data-table-td ">一种基于nfc移动终端的电子票务售票和检票方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2602766A1?cl=zh">EP2602766A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年8月1日</td><td class="patent-data-table-td patent-date-value">2013年6月12日</td><td class="patent-data-table-td ">China Mobile Communications Corporation</td><td class="patent-data-table-td ">Electronic ticket storage apparatus and electronic ticket checking system and method</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2602766A4?cl=zh">EP2602766A4</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年8月1日</td><td class="patent-data-table-td patent-date-value">2014年6月11日</td><td class="patent-data-table-td ">China Mobile Comm Corp</td><td class="patent-data-table-td ">Electronic ticket storage apparatus and electronic ticket checking system and method</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=WnJqBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G07B0015060000">G07B15/06</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2009年6月10日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年8月5日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2010年8月25日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/7f81cdd9445f295c3aeb/CN101452583A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E7%94%B5%E5%AD%90%E7%A5%A8%E6%8F%90%E4%BE%9B_%E6%A3%80%E9%AA%8C%E6%96%B9%E6%B3%95_%E8%A3%85%E7%BD%AE%E5%8F%8A.pdf?id=WnJqBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3ybrU2Yus9F69fHiyUc9c6aIsf8g"},"sample_url":"https://www.google.com/patents/reader?id=WnJqBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>