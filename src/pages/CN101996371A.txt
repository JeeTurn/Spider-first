<!DOCTYPE html><html><head><title>专利 CN101996371A - 广告投放方法、装置及系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_5115ea495017d9115e613207d3810e5a/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_5115ea495017d9115e613207d3810e5a__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="广告投放方法、装置及系统"><meta name="DC.contributor" content="李克鹏" scheme="inventor"><meta name="DC.contributor" content="谭银燕" scheme="inventor"><meta name="DC.contributor" content="邵刚" scheme="inventor"><meta name="DC.contributor" content="华为技术有限公司" scheme="assignee"><meta name="DC.date" content="2009-8-17" scheme="dateSubmitted"><meta name="DC.description" content="本发明实施例涉及一种广告投放方法、装置及系统，其中方法包括：广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请求选择待投放的广告信息；根据与选择到的所述广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性；根据所述广告信息的有效性确定是否投放所述广告信息。通过本发明实施例，能够准确可控地实现终端侧和网络侧总的曝光频次限制，使得广告平台能避免无效的广告投放，降低广告主的成本，提高广告的投资回报率。"><meta name="DC.date" content="2011-3-30"><meta name="citation_patent_publication_number" content="CN:101996371:A"><meta name="citation_patent_application_number" content="CN:200910166304"><link rel="canonical" href="https://www.google.com/patents/CN101996371A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101996371A?cl=zh"/><meta name="title" content="专利 CN101996371A - 广告投放方法、装置及系统"/><meta name="description" content="本发明实施例涉及一种广告投放方法、装置及系统，其中方法包括：广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请求选择待投放的广告信息；根据与选择到的所述广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性；根据所述广告信息的有效性确定是否投放所述广告信息。通过本发明实施例，能够准确可控地实现终端侧和网络侧总的曝光频次限制，使得广告平台能避免无效的广告投放，降低广告主的成本，提高广告的投资回报率。"/><meta property="og:title" content="专利 CN101996371A - 广告投放方法、装置及系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101996371A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101996371A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101996371A&amp;usg=AFQjCNF_iGallHCvBMxHKeLaa7eIER9z0A" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/e99e7138add85ce41bea/CN101996371A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/e99e7138add85ce41bea/CN101996371A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101996371A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101996371A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101996371A?cl=zh" style="display:none"><span itemprop="description">本发明实施例涉及一种广告投放方法、装置及系统，其中方法包括：广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请求选择待投放的广告信息；根据与选择到的所述广告信息关联的由广告服务器生成的广告...</span><span itemprop="url">https://www.google.com/patents/CN101996371A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101996371A - 广告投放方法、装置及系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101996371A - 广告投放方法、装置及系统" title="专利 CN101996371A - 广告投放方法、装置及系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101996371 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200910166304</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2011年3月30日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2009年8月17日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2009年8月17日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/EP2461285A1?hl=zh-CN&amp;cl=zh">EP2461285A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP2461285A4?hl=zh-CN&amp;cl=zh">EP2461285A4</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20120150639?hl=zh-CN&amp;cl=zh">US20120150639</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2011020423A1?hl=zh-CN&amp;cl=zh">WO2011020423A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200910166304.4, </span><span class="patent-bibdata-value">CN 101996371 A, </span><span class="patent-bibdata-value">CN 101996371A, </span><span class="patent-bibdata-value">CN 200910166304, </span><span class="patent-bibdata-value">CN-A-101996371, </span><span class="patent-bibdata-value">CN101996371 A, </span><span class="patent-bibdata-value">CN101996371A, </span><span class="patent-bibdata-value">CN200910166304, </span><span class="patent-bibdata-value">CN200910166304.4</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E5%85%8B%E9%B9%8F%22">李克鹏</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%B0%AD%E9%93%B6%E7%87%95%22">谭银燕</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%82%B5%E5%88%9A%22">邵刚</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8D%8E%E4%B8%BA%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">华为技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101996371A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101996371A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101996371A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (6),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200910166304&amp;usg=AFQjCNG5XIRKdEBa5hePv4mmIcHfzE2mGA"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101996371A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNEyv2u5nukwvciAt4w5hAIU-ayTZQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT102097134" lang="ZH" load-source="patent-office">广告投放方法、装置及系统</invention-title>
    </span><br><span class="patent-number">CN 101996371 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA83934434" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明实施例涉及一种广告投放方法、装置及系统，其中方法包括：广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请求选择待投放的广告信息；根据与选择到的所述广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性；根据所述广告信息的有效性确定是否投放所述广告信息。通过本发明实施例，能够准确可控地实现终端侧和网络侧总的曝光频次限制，使得广告平台能避免无效的广告投放，降低广告主的成本，提高广告的投资回报率。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(21)</span></span></div><div class="patent-text"><div mxw-id="PCLM35389001" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种广告投放方法，其特征在于包括：广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请求选择待投放 的广告信息；根据与选择到的所述广告信息关联的由广告服务器生成的广告元数据，判断所述广告 信息的有效性；根据所述广告信息的有效性确定是否投放所述广告信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的广告投放方法，其特征在于所述判断所述广告信息的有效性 包括判断所述广告信息是否满足以下任一删除条件：所述广告信息已过有效期； 所述广告信息的总曝光次数已经达到； 所述广告信息的总体预算已经达到； 所述广告信息已经被撤销。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的广告投放方法，其特征在于所述方法进一步包括当判断出所 述广告信息不满足任一所述删除条件时，还包括判断所述广告信息是否满足以下任一暂停 条件：所述广告信息的每日预算已经达到；所述广告信息针对一受众用户的频次限制已经达到。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求3所述的广告投放方法，其特征在于根据所述广告信息的有效性确定 是否投放所述广告信息包括：当满足任一所述删除条件时，删除所述广告信息； 当满足任一所述暂停条件时，延时投放所述广告信息；当不满足任一所述删除条件且不满足任一所述暂停条件时，立即投放所述广告信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求1所述的广告投放方法，其特征在于所述根据所述广告投放请求选择 待投放广告信息包括：在本地缓存中选择待投放的广告信息；或者当在本地缓存中未选择 到所述广告信息时，向广告服务器发送广告选择请求，并接收所述广告服务器选择到的所 述广告信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求1所述的广告投放方法，其特征在于判断所述广告信息的有效性之前 还包括：根据所述广告元数据中的有效性指示信息确定所述广告信息是否需要进行有效性 检验。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求1&#12316;6中任一所述的广告投放方法，其特征在于根据与选择到的所述 广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性包括：向广告服务器发送有效性检验请求，以使得所述广告服务器根据保存的所述更新后的 广告元数据判断所述广告信息的有效性；接收所述广告服务器根据判断出的所述广告信息的有效性发送的广告投放指示消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求7所述的广告投放方法，其特征在于根据所述广告信息的有效性投放 所述广告信息包括：根据所述广告投放指示消息投放所述广告信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求1&#12316;6中任一所述的广告投放方法，其特征在于根据与选择到的所述 广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性包括：向广告服务器发送元数据更新请求；根据来自于所述广告服务器的更新后的广告元数据更新本地缓存的与选择到的所述 广告信息关联的广告元数据；根据本地缓存的更新后的广告元数据判断所述广告信息的有效性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求1&#12316;6中任一所述的广告投放方法，其特征在于根据与选择到的所述 广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性包括：广告服务器收集所述广告客户端或业务服务器上报的已投放的广告信息的投放计量 数据；所述广告服务器根据该广告服务器中保存的更新后的广告元数据及所述投放计量数 据判断所述广告信息的有效性，并根据判断出的所述广告信息的有效性向所述广告客户端 或业务服务器发送广告投放指示消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求5所述的广告投放方法，其特征在于所述广告选择请求中包括缓存 指示信息，所述根据与选择到的所述广告信息关联的更新后的广告元数据判断所述广告信 息的有效性包括：所述广告服务器根据所述缓存指示信息创建需要进行本地缓存的广告信息与请求选 择该广告信息的广告客户端或业务服务器之间的订阅对应表；所述广告服务器根据该广告服务器中保存的所述更新后的广告元数据判断所述订阅 对应表中记录的广告信息的有效性；所述广告服务器根据判断出的所述广告信息的有效性向所述订阅对应表中记录的相 应广告客户端或业务服务器发送广告投放指示消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求1&#12316;6中任一所述的广告投放方法，其特征在于根据与选择到的所述 广告信息关联的由广告服务器生成的广告元数据，判断所述广告信息的有效性包括：向广告服务器发送广告更新订阅请求，以使得所述广告服务器根据所述广告更新订阅 请求创建被订阅的广告信息与请求订阅该广告信息的广告客户端或业务服务器之间的订 阅对应表，所述广告服务器并根据该广告服务器中保存的所述更新后的广告元数据，判断 所述订阅对应表中记录的广告信息的有效性；接收所述广告服务器根据判断出的所述广告信息的有效性向所述订阅对应表中记录 的相应广告客户端或业务服务器发送的广告投放指示消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求2所述的广告投放方法，其特征在于还包括：当广告服务器判断广告 满足删除条件时，下发广告删除指示给广告客户端或业务服务器。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求13所述的广告投放方法，其特征在于所述下发广告删除指示给广告 客户端或业务服务器包括：直接以通知的方式下发所述广告删除指示给所述广告客户端或 业务服务器；或者将所述广告删除指示携带于针对所述广告投放请求的响应消息中下发给 所述广告客户端或业务服务器。</div>
    </div>
    </div> <div class="claim"> <div num="15" class="claim">
      <div class="claim-text">15.	一种广告投放装置，其特征在于包括：广告选择模块，用于根据接收到的广告投放请求选择待投放的广告信息；有效性判断模块，用于根据与广告选择模块选择的所述广告信息关联的由广告服务器 生成的广告元数据判断所述广告信息的有效性；投放模块，用于根据有效性判断模块判断出的所述广告信息的有效性确定是否投放所 述广告信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16.根据权利要求15所述的广告投放装置，其特征在于进一步包括：收发模块，用于向广告服务器发送元数据更新请求，并接收所述广告服务器返回的更 新后的广告元数据；更新模块，用于根据所述更新后的广告元数据更新本地缓存的与选择到的所述广告信 息关联的广告元数据。</div>
    </div>
    </div> <div class="claim"> <div num="17" class="claim">
      <div class="claim-text">17.	&#8212;种广告投放系统，其特征在于包括：广告投放装置和广告服务器； 所述广告投放装置包括：广告选择模块，用于根据接收到的广告投放请求选择待投放的广告信息； 投放模块，用于根据来自于所述广告服务器的广告投放指示消息确定是否投放所述广 告fn息；所述广告服务器包括：有效性判断模块，用于根据自身保存的更新后的广告元数据判断所述广告信息的有效性；投放指示模块，用于根据有效性判断模块送出的所述广告信息的有效性向所述广告投 放装置发送广告投放指示消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18.根据权利要求17所述的广告投放系统，其特征在于所述广告投放装置还包括： 检验请求模块，用于向所述广告服务器发送有效性检验请求，使有效性判断模块当接收到所述有效性检验请求后，根据所述广告服务器自身保存的更新后的广告元数据判断所 述广告信息的有效性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19.根据权利要求17所述的广告投放系统，其特征在于所述广告服务器还包括： 收集模块，用于收集所述广告投放装置已投放的广告信息的投放计量数据；所述有效性判断模块还用于根据该广告服务器中保存的更新后的广告元数据及由收 集模块收集到的所述投放计量数据，判断所述广告信息的有效性。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20.根据权利要求17所述的广告投放系统，其特征在于所述广告投放装置还包括：广告获取模块，用于当广告选择模块在本地缓存中未找到所述广告信息时，向所述广 告服务器发送广告选择请求，并接收所述广告服务器选择的所述广告信息；其中所述广告 选择请求中包括缓存指示信息，用于说明从广告服务器获取到的广告信息是否要进行本地 保存；所述广告服务器还包括：建表模块，用于根据所述缓存指示信息创建需要进行本地缓存的广告信息与请求选择 该广告信息的广告投放装置之间的订阅对应表；所述有效性判断模块还用于根据该广告服务器中保存的所述更新后的广告元数据判 断所述订阅对应表中记录的广告信息的有效性。</div>
    </div>
    </div> <div class="claim"> <div num="21" class="claim">
      <div class="claim-text">21.	&#8212;种广告投放系统，其特征在于包括：广告投放装置和广告服务器； 所述广告投放装置包括：更新订阅模块，用于向所述广告服务器发送广告更新订阅请求； 投放模块，用于根据来自于所述广告服务器的广告投放指示消息确定是否投放所述广 告fn息；所述广告服务器包括：建表模块，用于根据所述广告更新订阅请求创建被订阅的广告信息与请求订阅该广告 信息的广告客户端或业务服务器之间的订阅对应表；有效性判断模块，用于根据该广告服务器中保存的所述更新后的广告元数据判断所述 订阅对应表中记录的广告信息的有效性；投放指示模块，用于根据有效性判断模块判断出的所述广告信息的有效性向所述订阅 对应表中记录的相应广告客户端或业务服务器发送广告投放指示消息。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES41201299" lang="ZH" load-source="patent-office" class="description">
    <p>广告投放方法、装置及系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及通信技术领域，尤其涉及一种广告投放方法、装置及系统。 背景技术</p>
    <p>[0002]	移动广告业务是通过移动媒体投放广告信息的技术。现有用于支持移动广告 业务的系统是基于开放移动联盟（Open Mobile Alliance，简称0MA)的移动广告系统 (Mobile Advertising Enabler，简称MobAd)。基于该系统，现有的广告投放方法是预先从 移动广告系统的广告服务器（Advertisement Server，简称Ad Server)中获取待投放的广 告信息缓存于业务服务器（Service Provider Application，简称SP App)和广告客户端 (Advertisement Engine，简称Ad Engine)中，通过业务服务器或广告客户端向受众用户终 端投放广告。其中，广告服务器和业务服务器位于网络侧，广告客户端和业务客户端位于终 端侧。</p>
    <p>[0003]	现有的广告客户端或业务服务器本地缓存的广告信息，可能由于广告的投放 任务已经达到而使得广告无效，或对某个受众用户的曝光（即展示给用户）频次限制 (Frequency Capping)达到暂时不能投放，或广告主修改了广告任务和广告投放策略原等 因，使得广告元数据被修改。但是保存在缓存中的广告数据却没有进行相应的同步，因此， 会导致广告无效投放、误投、投放任务完不成等后果。</p>
    <p>[0004]	其中，曝光频次限制是指限制一个受众观看某个具体广告的次数，由于现有的广 告信息既可以从终端侧的广告客户端下发到业务客户端，也可以从网络侧的业务服务器下 发到终端上的业务客户端，因此无法准确可控地实现总的曝光频次控制。</p>
    <p>发明内容</p>
    <p>[0005]	本发明提供一种广告投放方法、装置及系统，以便能够准确可控地实现总的曝光 频次控制。</p>
    <p>[0006]	本发明的一个实施例提供了一种广告投放方法，其中包括：</p>
    <p>[0007]	广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请求选择待 投放的广告信息；</p>
    <p>[0008]	根据与选择到的所述广告信息关联的由广告服务器生成的广告元数据，判断所述 广告信息的有效性；</p>
    <p>[0009]	根据所述广告信息的有效性确定是否投放所述广告信息。</p>
    <p>[0010]	本发明另一实施例提供了一种广告投放装置，其中包括：</p>
    <p>[0011]	广告选择模块，用于根据接收到的广告投放请求选择待投放的广告信息；</p>
    <p>[0012]	有效性判断模块，用于根据与广告选择模块选择的所述广告信息关联的由广告服 务器生成的广告元数据判断所述广告信息的有效性；</p>
    <p>[0013]	投放模块，用于根据有效性判断模块判断出的所述广告信息的有效性确定是否投 放所述广告信息。[0014]	本发明再一实施例提供了一种广告投放系统，其中包括：广告投放装置和广告服 务器；</p>
    <p>[0015]	所述广告投放装置包括：</p>
    <p>[0016]	广告选择模块，用于根据接收到的广告投放请求选择待投放的广告信息；</p>
    <p>[0017]	投放模块，用于根据来自于所述广告服务器的广告投放指示消息确定是否投放所 述广告信息；</p>
    <p>[0018]	所述广告服务器包括：</p>
    <p>[0019]	有效性判断模块，用于根据自身保存的更新后的广告元数据判断所述广告信息的 有效性；</p>
    <p>[0020]	投放指示模块，用于根据有效性判断模块送出的所述广告信息的有效性向所述广 告投放装置发送广告投放指示消息。</p>
    <p>[0021]	本发明又一实施例提供了一种广告投放系统，其中包括：广告投放装置和广告服 务器；</p>
    <p>[0022]	所述广告投放装置包括：</p>
    <p>[0023]	更新订阅模块，用于向所述广告服务器发送广告更新订阅请求；</p>
    <p>[0024]	投放模块，用于根据来自于所述广告服务器的广告投放指示消息确定是否投放所 述广告信息；</p>
    <p>[0025]	所述广告服务器包括：</p>
    <p>[0026]	建表模块，用于根据所述广告更新订阅请求创建被订阅的广告信息与请求订阅该 广告信息的广告客户端或业务服务器之间的订阅对应表；</p>
    <p>[0027]	有效性判断模块，用于根据该广告服务器中保存的所述更新后的广告元数据判断 所述订阅对应表中记录的广告信息的有效性；</p>
    <p>[0028]	投放指示模块，用于根据有效性判断模块判断出的所述广告信息的有效性向所述 订阅对应表中记录的相应广告客户端或业务服务器发送广告投放指示消息。</p>
    <p>[0029]	通过本发明实施例，由于在投放广告客户端或业务服务器中缓存的广告信息之 前，根据与选择到的所述广告信息关联的由广告服务器更新后的广告元数据判断所述广告 信息的有效性，因此解决了本地缓存的广告元数据与广告主登记到广告服务器上的广告元 数据不同步的问题，从而能够准确可控地实现终端侧和网络侧总的曝光频次限制，使得广 告平台能避免无效的广告投放，降低广告主的成本，提高广告的投资回报率。</p>
    <p>附图说明</p>
    <p>[0030]	图1为本发明实施例一所述广告投放方法的流程图；</p>
    <p>[0031]	图2为图1中步骤102及103的具体流程图；</p>
    <p>[0032]	图3为本发明实施例二所述广告投放方法的流程图；</p>
    <p>[0033]	图4为本发明实施例二所示广告投放方法的信令图；</p>
    <p>[0034]	图5为本发明实施例三所述广告投放方法的流程图；</p>
    <p>[0035]	图6为本发明实施例三所示广告投放方法的信令图；</p>
    <p>[0036]	图7为本发明实施例四所述广告投放方法的流程图；</p>
    <p>[0037]	图8为本发明实施例五所述广告投放方法的流程图；[0038]	图9为本发明实施例五所示广告投放方法的信令图；</p>
    <p>[0039]	图10为本发明实施例六所述广告投放方法的流程图；</p>
    <p>[0040]	图11为本发明实施例六所示广告投放方法的信令图；</p>
    <p>[0041]	图12为广告投放指示消息的消息格式的示意图；</p>
    <p>[0042]	图13为用于实现本发明实施例一所述广告投放方法的广告投放装置的结构示意 图；</p>
    <p>[0043]	图14为用于实现本发明实施例二所述广告投放方法的广告投放系统的结构示意 图；</p>
    <p>[0044]	图15为用于实现本发明实施例三所述广告投放方法的广告投放装置的结构示意 图；</p>
    <p>[0045]	图16为用于实现本发明实施例四所述广告投放方法的广告投放系统的结构示意 图；</p>
    <p>[0046]	图17为用于实现本发明实施例五所述广告投放方法的广告投放系统的结构示意 图；</p>
    <p>[0047]	图18为用于实现本发明实施例六所述广告投放方法的广告投放系统的结构示意 图；</p>
    <p>[0048]	图19为实际移动广告系统中各部分的接口说明示意图。 具体实施方式</p>
    <p>[0049]	图1为本发明实施例一所述广告投放方法的流程图，如图所示，该方法包括：</p>
    <p>[0050]	步骤101，广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请 求选择待投放的广告信息。</p>
    <p>[0051]	其中，广告投放请求可以来自于终端上的业务客户端（Ad App)，当受众用户运行 游戏程序或打开某个网页时该业务客户端会发送广告投放请求，其中该广告投放请求可以 携带用户标识、业务提供者标识或广告客户端标识、终端信息（如型号等）、上下文数据、广 告提供者、广告位标识、广告大小及广告尺寸等广告参数中的一个或多个。</p>
    <p>[0052]	其中，根据所述广告投放请求选择待投放的广告信息可以具体为：广告客户端或 业务服务器在本地缓存中进行广告选择，如果在本地缓存中未找到所述广告信息，则可以 向广告服务器发送广告选择请求，从而接收所述广告服务器选择的所述广告信息。具体的， 在选择广告时可以根据广告投放请求中携带的广告参数中的一个或多个进行广告信息的 选择。</p>
    <p>[0053]	步骤102，根据与选择的所述广告信息关联的由广告服务器生成的广告元数据判 断所述广告信息的有效性。</p>
    <p>[0054]	此处，步骤102可以分为两种情况，一种是该有效性判断由广告客户端或业务服 务器完成，另一种是该有效性判断由广告服务器完成，有效性判断的具体过程可以在下面 的各个方法实施例中分别进行介绍。</p>
    <p>[0055]	其中，在判断所述广告信息的有效性之前可以先根据所述广告元数据中的有效性 指示信息判断所述广告信息是否需要进行有效性检验，当确定所述广告信息需要进行有效 性检验之后再开始判断所述广告信息的有效性。[0056]	广告主对广告投放活动限制了总体预算或每日预算、广告投放总量和/或曝光频 次限制等广告投放策略信息。所述有效性检验指示信息可以是广告服务器制定并预设到 广告客户端中或业务服务器中的，也可以是广告客户端（比如用户）或业务服务器自行设 定的。设定方法不作特别限定，例如可以通过消息下发，或者也可以在业务订购时制定等方 式。根据该有效性检验指示信息的指示内容即可以判断出是否需要进行有效性检验。</p>
    <p>[0057]	&#8212;般对于单个的广告信息，广告服务器、广告客户端和业务服务器都会保存其广 告元数据（Ad Metadata)。广告元数据可以包括以下内容中的一个或多个：广告标识、广告 位信息、多用途互联网邮件扩展（Multipurpose Internet Mail Extensions，简称MIME)类 型、MIME版本、广告存放位置、广告大小、广告交互类型、广告交互通用资源标志符（Uniform Resource Identifier,简称URI)、广告宽度、广告高度、广告长度、广告关键字、可展示时 间、有效期、频度信息和优先级等。另外，广告服务器需要进行宏观的控制，其保存的广告元 数据信息会更丰富一些，还可以包括总曝光频次限制、广告投放总量、广告投放策略和/或 计量数据收集策略等信息。</p>
    <p>[0058]	在此步骤中，如果待投放的广告是从广告客户端或业务服务器的本地缓存中选择 出来的，则需要向广告服务器发送有效性请求或广告元数据请求或是直接根据缓存的广告 元数据来判断。如果待投放的广告是从广告服务器请求的，则由广告服务器来完成有效性 判断，并发送有效性指示给广告客户端或业务服务器。</p>
    <p>[0059]	步骤103，根据所述广告信息的有效性确定是否投放所述广告信息。</p>
    <p>[0060]	具体地，当所述广告信息有效时，立即投放所述广告信息；当所述广告信息暂时无 效时，延时投放所述广告信息；当所述广告信息完全无效时，删除所述广告信息且不对其进 行投放。具体内容可以参考如下描述。</p>
    <p>[0061]	如图2所示，其中步骤102和步骤103可以具体包括如下步骤，步骤102可以包括 步骤102A和102B，步骤103可以包括步骤103AU03B和103C。</p>
    <p>[0062]	步骤102A，判断所述广告信息是否满足任一删除条件，当判断出所述广告信息不 满足任一所述删除条件时，表明该广告信息有可能是有效的，则继续执行步骤102B ；否则 表明该广告信息完全无效，则执行步骤103A。</p>
    <p>[0063]	其中，删除条件可以包括：所述广告信息超过有效期；所述广告信息的总曝光次 数已经到达；所述广告信息的总体预算已经达到；所述广告信息被撤销。具体地说明如下：</p>
    <p>[0064]	对于有效期的判断过程是：判断当前时间是否超出广告元数据中有效期的开始时 间（ValidStartTime)和结束时间（ValidEndTime)，如果超出此时间，则为无效，如果在有 效期之内，则为有效。</p>
    <p>[0065]	对于总曝光次数的判断过程是：广告服务器事先收集广告客户端或业务服务器上 报的计量数据，其中包括曝光次数（即“Impression”次数或点击次数），广告服务器比较预 设的（即广告主所购买的）总曝光次数和当前收集的总曝光次数，判断已有的曝光次数是 否超出预设值，如果超过，则投放过多，需要将广告无效掉，如果没有超过，则投放不足，需 要继续投放，广告有效。</p>
    <p>[0066]	对于总体预算的判断过程是：根据收集的计量数据进行费用计算，如果已耗费的 费用不足预算，则需要继续投放，广告有效；如果已耗费的费用超过预算，则不再投放，广告 无效。对广告信息被撤销的判断过程是，如果广告主决定撤销广告（比如经费不足）或广告服务器（比如运营商的运营策略确定需要撤销广告），广告服务器会对被撤销的广告进 行标记或删除。</p>
    <p>[0067]	步骤102B，判断所述广告信息是否满足任一暂停条件；当判断出所述广告信息不 满足任一所述暂停条件时，表明该广告信息有效，则执行步骤103C ；否则表明该广告信息 暂时无效，则执行步骤103B。</p>
    <p>[0068]	其中，暂停条件可以包括：所述广告信息的每日预算已经达到，和/或所述广告信 息针对一受众用户的频次限制已经达到。具体说明如下：</p>
    <p>[0069]	对于每日预算的判断过程与总体预算的判断过程类似，不同的是，只针对每天进 行统计和判断。因为有时候，广告主会要求针对每一天进行预算和安排。广告主不希望广 告投放过于密集或过于疏散。</p>
    <p>[0070]	对于单个用户的频次限制的判断过程与总频次的判断过程类似，不同的是，只针 对单个用户进行统计和判断。因为有时候，广告主会要求针对单个用户进行投放安排。广 告主不希望对单个用户投放次数过多或过少，这样的广告效果都不会太好。</p>
    <p>[0071]	步骤103A，当满足任一所述删除条件时，表明该广告信息完全无效，则删除所述广 告信息，且不对其进行投放；</p>
    <p>[0072]	步骤103B，当满足任一所述暂停条件时，表明该广告信息暂时无效，则延时投放所 述广告信息；</p>
    <p>[0073]	延时后的再次投放时间可以根据曝光频次限制等条件进行设定。例如，广告服务 器可以基于计量数据的收集和统计，在广告投放的某一天，某个广告被投放次数过多，超过 了当天的频次限制，广告服务器需要将此广告推迟到第二天或下一个星期进行投放，以达 到更好的投放效果。具体延迟时间依赖于广告服务器或广告主定义的策略。</p>
    <p>[0074]	步骤103C，当不满足任一所述删除条件且不满足任一所述暂停条件时，表明该广 告信息有效，则立即投放所述广告信息。</p>
    <p>[0075]	此处需要说明的是，在立即投放所述广告信息之前，若是广告主更新元数据中的 广告定向条件，即更新了接收该广告信息的目标受众条件或更新了承载广告的目标业务条 件，则根据广告投放请求中携带的广告参数（如上下文数据等）再次进行广告选择，看广告 是否适合广告参数。其中，广告定向条件可以包括对用户的定向和对承载广告的内容和/ 或业务的定向，若是此用户符合广告定向条件，但是该业务不符合，则这条广告本次不能投 放，但下次可能可以投放，所以要更新广告元数据。若两个定向条件都不满足，即使更新了 元数据，在本地缓存中也不会选中此广告，此时可由本地缓存库的维护机制来删除此广告。</p>
    <p>[0076]	通过本实施例所述方法，由于在投放广告信息之前，根据与选择到的所述广告信 息关联的由广告服务器更新后的广告元数据判断所述广告信息的有效性，因此解决了本地 缓存的广告元数据与广告主登记到广告服务器上的广告元数据不同步的问题，从而能够准 确可控地实现终端侧和网络侧总的曝光频次限制，使得广告平台能避免无效的广告投放， 降低广告主的成本，提高广告的投资回报率。</p>
    <p>[0077]	此处需要说明的是，如果业务服务器或广告客户端已经向广告服务器批量预定了 广告曝光次数，则可以在预定的广告曝光次数未达到时，直接投放广告，而不需要判断所述 广告信息的有效性。</p>
    <p>[0078]	图3为本发明实施例二所述广告投放方法的流程图，如图所示，该方法包括：[0079]	步骤301，广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请 求选择待投放的广告信息。</p>
    <p>[0080]	具体说明请参见有关图1所示步骤101的相关解释，此处不再赘述。</p>
    <p>[0081]	该实施例中广告信息的有效性判断由广告服务器完成，具体包括如下步骤 302-304。</p>
    <p>[0082]	步骤302，广告客户端或业务服务器向广告服务器发送有效性检验请求，以使得所 述广告服务器根据自身保存的更新后的广告元数据，判断所述广告信息的有效性。</p>
    <p>[0083]	其中，该有效性检验请求中可以携带待检验广告信息的广告标识（ID)和/或受众 用户标识（ID)等广告参数，以使得广告服务器得知要对哪些广告信息进行有效性检验。具 体的广告元数据的更新过程是：广告服务器收集来自于广告客户端和业务服务器的计量数 据，修改频次限制（FrequencyCap信息）；基于广告服务器的内部策略或广告主的要求，修 改有效期、优先级和可展示时间等。</p>
    <p>[0084]	其中根据广告元数据判断广告信息的有效性的具体过程可以参考实施例一的相 关描述。</p>
    <p>[0085]	步骤303，所述广告客户端或业务服务器接收所述广告服务器根据所述广告信息 的有效性而发送的广告投放指示消息。</p>
    <p>[0086]	其中，所述广告投放指示消息是广告服务器根据所述广告信息的有效性作出的， 即当广告服务器在判断得出广告信息的有效性后，会向广告客户端或业务服务器发送广告 投放指示消息。所述广告投放指示消息可以包括广告处理指示信息，用于指示业务服务器 或广告客户端如何对本地缓存的广告信息进行处理，例如可以包括立即投放广告信息、删 除广告信息或延时投放广告信息等。</p>
    <p>[0087]	步骤304，所述广告客户端或业务服务器根据所述广告投放指示消息确定是否投 放所述广告信息。</p>
    <p>[0088]	此处，当所述广告客户端或业务服务器收到广告服务器发送的广告投放指示消息 时，实施例一中的步骤103可以为广告客户端或业务服务器根据所述广告投放指示消息确 定是否投放所述广告信息。</p>
    <p>[0089]	如图4所示，为本发明实施例二所述方法的具体信令流程图，包括如下信令过程：</p>
    <p>[0090]	401 ：广告客户端或业务服务器接收广告投放请求，该步骤具体可以参考上述实施 例的相关部分的描述；</p>
    <p>[0091]	402 ：根据所述广告投放请求在本地缓存中选择待投放的广告信息，即选择符合所 述广告参数的广告信息；</p>
    <p>[0092]	403 ：本地缓存中是否有被请求的广告信息，若有，则选择成功，转向404 ；否则，转 向 403a ；</p>
    <p>[0093]	403a ：向广告服务器（Ad server)发送广告选择请求；</p>
    <p>[0094]	403b:广告服务器根据该广告选择请求选择所需的广告信息返回给广告客户端或 业务服务器；</p>
    <p>[0095]	404:判断选择到的广告信息是否需要进行有效性检验（Check)，若是，则转向 404b ；否则，转向404a ；</p>
    <p>[0096]	404a ：直接投放选择到的广告信息，流程结束。[0097]	404b ：向广告服务器发送有效性检验请求；</p>
    <p>[0098]	405:广告服务器根据该广告服务器中保存的所述更新后的广告元数据，判断所述 广告信息的有效性，具体的判断该广告信息是否符合删除条件或暂停条件可以参考上述实 施例的相关描述，在此不再赘述；</p>
    <p>[0099]	406:广告服务器根据判断出的所述广告信息的有效性向所述广告客户端或业务 服务器发送广告投放指示消息；</p>
    <p>[0100]	407:广告客户端或业务服务器根据广告投放指示消息判断是否允许投放广告信 息，若允许立即投放，则转向407a ；否则根据广告投放指示消息对广告信息进行相应处理， 如删除或延时投放，可以转向402重新选择被请求的广告信息或者延时投放所述广告信 息；</p>
    <p>[0101]	407a ：立即投放广告信息。</p>
    <p>[0102]	其中，由广告服务器返回的广告投放指示消息可以用可扩展标记语言 (Extensible Markup Language,简称 XML)表示如下：</p>
    <p>[0103]	1.广告允许被投放，不需要在缓存中修改广告相关数据</p>
    <p>[0104]	〈placement-decision〉</p>
    <p>[0105]	&lt;adid&gt;XX&lt;/adid&gt;</p>
    <p>[0106]	&lt;decision&gt;Y&lt;/decision〉</p>
    <p>[0107]	&lt;action&gt;keep&lt;/action&gt;</p>
    <p>[0108]	&lt;/placement-decision&gt;</p>
    <p>[0109]	2.广告允许被投放，同时通知在缓存中修改广告相关数据</p>
    <p>[0110]	〈placement-decision〉</p>
    <p>[0111]	&lt;adid&gt;XX&lt;/adid&gt;</p>
    <p>[0112]	&lt;decision&gt;Y&lt;/decision〉</p>
    <p>[0113]	&lt;action&gt;update&lt;/action)</p>
    <p>[0114]	&lt;AdContentData&gt;XXX&lt;/AdContentData&gt;</p>
    <p>[0115]	&lt;/placement-decision&gt;</p>
    <p>[0116]	3.广告不允许被投放，并且通知删除缓存中广告相关数据：</p>
    <p>[0117]	〈placement-decision〉</p>
    <p>[0118]	&lt;adid&gt;XX&lt;/adid&gt;</p>
    <p>[0119]	&lt;decision&gt;N&lt;/decision)</p>
    <p>[0120]	&lt;action&gt;delete&lt;/action&gt;</p>
    <p>[0121]	&lt;/placement-decision&gt;</p>
    <p>[0122]	4.暂缓广告的投放，设置广告能再次投放的时间：</p>
    <p>[0123]	〈placement-decision〉</p>
    <p>[0124]	&lt;adid&gt;XX&lt;/adid&gt;</p>
    <p>[0125]	&lt;decision&gt;N&lt;/decision)</p>
    <p>[0126]	&lt;action&gt;keep&lt;/action)</p>
    <p>[0127]	&lt;renew-start-time&gt;2009. 7. l〈/renew-start_time&gt;</p>
    <p>[0128]	&lt;renew-end-time&gt;2009. 7. 5&lt;/renew-end-time&gt;[0129]	&lt;/placement_decision&gt;</p>
    <p>[0130]	5.广告不允许被投放，并且修改广告相关数据：</p>
    <p>[0131]	〈placement-decision〉</p>
    <p>[0132]	&lt;adid&gt;XX&lt;/adid&gt;</p>
    <p>[0133]	&lt;decision&gt;N&lt;/decision&gt;</p>
    <p>[0134]	&lt;action&gt;update&lt;/action)</p>
    <p>[0135]	&lt;AdContentData&gt;XXX&lt;/AdContentData&gt;</p>
    <p>[0136]	&lt;/placement-decision&gt;</p>
    <p>[0137]	现有技术中，广告主在进行广告活动时，都会制定广告目标，如在指定时期内，广 告的受众覆盖率、对目标受众的影响程度等。为使在限定的广告预算范围内，广告的覆盖率 高，并且对受众产生有效的影响，广告主会在广告元数据中的投放策略信息中明确广告的 总曝光数和限制每个受众观看广告的频次。每个受众观看的广告的频次过高，在有限预算 内则广告的覆盖范围会变小，同时，对受众进行广告轰炸，会使受众对广告反感。若每个受 众观看的广告频次过低，则广告对受众影响不大。另外，广告平台在投放广告主的广告时， 如果总曝光数低于预算，会受到广告主的处罚。所以，在进行广告投放时，需要同时进行广 告曝光总数和广告频次的控制。然而，当广告主需要对广告元数据中的投放策略信息进行 更新时，仅对广告服务器上的广告元数据进行更新，因此会造成业务服务器和广告客户端 本地缓存的广告元数据与广告服务器上保存的广告元数据的更新不同步的问题。</p>
    <p>[0138]	本实施例所述方法通过在投放广告前向广告服务器发送有效性检验请求，由广告 服务器根据该广告服务器中保存的所述更新后的广告元数据，判断所述广告信息的有效 性，能够解决上述业务服务器和广告客户端本地缓存的广告元数据与广告服务器上保存的 广告元数据的更新不同步的问题，从而准确可控地实现了总的曝光频次限制，减少因为投 放不足带来的罚款（Penalty)，并使广告平台能避免无效的广告投放及广告投放过多带来 的广告位资源损失，防止对广告受众形成&#39479;扰，减少无效广告费用，降低广告主的成本，提 高广告的投资回报率。</p>
    <p>[0139]	图5为本发明实施例三所述广告投放方法的流程图，如图所示该方法包括如下步 骤：</p>
    <p>[0140]	步骤501，广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请 求选择待投放的广告信息。</p>
    <p>[0141]	具体说明请参见有关图1所示步骤101的相关解释，此处不再赘述。</p>
    <p>[0142]	其中，本实施例中的广告信息有效性判断由广告客户端或业务服务器来完成，具 体包括如下步骤502-504。</p>
    <p>[0143]	步骤502，广告客户端或业务服务器向广告服务器发送元数据（metadata)更新请 求，并接收所述广告服务器返回的更新后的广告元数据。</p>
    <p>[0144]	具体地，该元数据更新请求中可以携带待检验广告信息的广告标识（ID)和受众 用户标识（ID)等广告参数，使广告服务器得知要更新哪些广告信息的广告元数据。</p>
    <p>[0145]	步骤503，所述广告客户端或业务服务器根据所述更新后的广告元数据更新本地 缓存的与选择到的所述广告信息关联的广告元数据。</p>
    <p>[0146]	其中，接收的所述广告服务器的更新后的广告元数据包括广告主根据投放效果进行修改更新后形成的广告元数据，例如修改了广告元数据中的定向条件和投放策略等，具 体的广告元数据的更新过程可参见前述步骤302中的说明；并且也可以包括经过一段时间 投放后，广告数据的变化，如剩余的广告曝光次数和预算等。</p>
    <p>[0147]	步骤504，所述广告客户端或业务服务器根据本地缓存的更新后的广告元数据判 断所述广告信息的有效性。</p>
    <p>[0148]	具体的广告信息有效性的判断过程可以包括判断是否满足更新后的删除条件和/ 或暂停条件等，具体过程请参见上述各个实施例的相关描述，此处不再赘述。</p>
    <p>[0149]	步骤505，所述广告客户端或业务服务器根据所述广告信息的有效性确定是否投 放所述广告信息。</p>
    <p>[0150]	其中，广告信息的有效性的具体内容可以参考上述各个实施例的相关描述，在此 不再赘述。</p>
    <p>[0151]	请参考图6，其为本发明实施例三所述方法的具体信令流程图，包括如下信令过 程：</p>
    <p>[0152]	601至603b用于进行广告信息的选择，具体过程可参考图4中所示的401至 403b ；</p>
    <p>[0153]	604:判断选择到的广告信息是否需要进行有效性检验（Check)，若是，则转向 604b ；否则，转向604a，其中判断是否要进行有效性检验的具体过程可以参考上述各个实 施例的相关描述，在此不再赘述；</p>
    <p>[0154]	604a ：直接投放选择到的广告信息，流程结束；</p>
    <p>[0155]	604b ：向广告服务器发送元数据更新请求；</p>
    <p>[0156]	605 ：广告服务器根据所述元数据检验请求选择更新后的广告元数据；</p>
    <p>[0157]	606 ：广告服务器返回更新后的广告元数据；</p>
    <p>[0158]	607:所述广告客户端或业务服务器根据本地缓存的更新后的广告元数据判断所 述广告信息的有效性，以决定是否允许投放，若允许立即投放，则转向607a ；否则，根据判 断出的有效性对广告信息进行相应处理，如删除或延时等，则可以转向602重新选择被请 求的广告信息或者延时投放所述广告信息；</p>
    <p>[0159]	607a:立即投放广告信息。</p>
    <p>[0160]	其中，向广告服务器发送的元数据更新请求及广告服务器返回的更新后的广告元 数据可以用XML编程语言表示如下：</p>
    <p>[0161]	1.请求广告元数据：</p>
    <p>[0162]	&lt;AdEngineMetadataRequest&gt;</p>
    <p>[0163]	&lt;AdID&gt;XX&lt;/AdID&gt;</p>
    <p>[0164]	&lt;UserID&gt;YY&lt;/UserID&gt;</p>
    <p>[0165]	&lt;/AdEngineMetadataRequest&gt;</p>
    <p>[0166]	2.返回广告元数据：</p>
    <p>[0167]	&lt;AdEngineMetadataResponse&gt;</p>
    <p>[0168]	&lt;AdID&gt;XX&lt;/AdID&gt;</p>
    <p>[0169]	&lt;UserID&gt;YY&lt;/UserID&gt;</p>
    <p>[0170]	&lt;AdMetadata&gt;[0171]</p>
    <p>[0172]</p>
    <p>[0173]</p>
    <p>[0174]</p>
    <p>[0175]</p>
    <p>&lt;ValidStartTime&gt;2009-7-7&lt;/ValidStartTime&gt; &lt;ValidEndTime&gt;2009-7-10&lt;/ValidEndTime&gt; &lt;FrequencyCap&gt;2&lt;/FrequencyCap&gt;</p>
    <p>[0176]	本实施例所述方法与图3所示实施例的区别在于：对广告信息有效性的判断不是 由广告服务器进行的，而是由业务服务器和广告客户端基于从广告服务器获取的更新后的 广告元数据进行的，不但准确可控地实现了总的曝光频次限制的目的，而且还减轻了广告 服务器的处理负担。</p>
    <p>[0177]	图7为本发明实施例四所述广告投放方法的流程图，如图所示该方法包括如下步 骤：</p>
    <p>[0178]	步骤701，广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请 求选择待投放的广告信息。</p>
    <p>[0179]	具体说明请参见有关图1所示步骤101的相关解释，此处不再赘述。</p>
    <p>[0180]	其中，本实施例中广告信息的有效性判断由广告服务器完成，其具体过程可以包 括步骤702和703。</p>
    <p>[0181]	步骤702，广告服务器收集广告客户端或业务服务器已投放的广告信息的投放计 量数据，以使得所述广告服务器根据该广告服务器中保存的更新后的广告元数据及所述投 放计量数据，判断所述广告信息的有效性。</p>
    <p>[0182]	步骤703，广告客户端或业务服务器接收所述广告服务器根据判断出的所述广告 信息的有效性发送的广告投放指示消息。</p>
    <p>[0183]	其中，广告投放指示消息的具体内容可以参考上述各个实施例的相关描述，在此 不再赘述。</p>
    <p>[0184]	步骤704，根据所述广告投放指示消息确定是否投放所述广告信息。</p>
    <p>[0185]	此处，当所述广告客户端或业务服务器收到广告服务器发送的广告投放指示消息 时，实施例一中的步骤103可以为广告客户端或业务服务器根据所述广告投放指示消息确 定是否投放所述广告信息。</p>
    <p>[0186]	具体地，如图19所示，为实际移动广告系统中各部分的接口说明示意图，其中， 业务服务器可以通过“MobAd-2”接口向广告服务器发送各种消息；广告客户端可以通过 “MobAd-3”接口和“Delv-Ι”与广告服务器进行信息交互；业务客户端可以通过“MobAd-1” 向广告服务器发送各种消息。本发明实施例所述的广告投放指示消息可通过广告服务器 与业务服务器之间的通知（Notification)接口发送给业务服务器，或是在应答来自业务 服务器的广告请求消息的广告响应消息中携带发送；并通过广告服务器与广告客户端之 间的“Delv-Γ’接口发送给广告客户端，或是在应答来自广告客户端的广告请求消息的广 告响应消息中携带发送。图中，实线方框表示移动广告系统的内部组件（componet)；虚 线方框表示位于移动广告系统之外的实体（entity)；实线箭头表示强制接口（Mandatory Interface)；虚线箭头表示可选接口 (Optional Interface)。</p>
    <p>[0187]	比如，广告服务器给广告客户端在广告响应消息中携带广告删除指示的消息实例 为：</p>
    <p>15[0188]	&lt;AdEngineAdResponse&gt;</p>
    <p>[0189]	&lt;AdContentData AdId =，，XX，，&gt;Ad Content Data&lt;/AdContentData&gt;</p>
    <p>[0190]	&lt;DeletedAdId&gt;AdId_Example&lt;/DeletedAdId&gt;</p>
    <p>[0191]	&lt;/AdEngineAdResponse&gt;</p>
    <p>[0192]	广告服务器给广告客户端直接发送通知消息中携带广告删除指示的消息实例 为：</p>
    <p>[0193]	&lt;AdServerPushNotification&gt;</p>
    <p>[0194]	&lt;NotificationType&gt;Ad Deletion&lt;/NotificationType&gt;</p>
    <p>[0195]	&lt;AdId&gt;AdId_Example&lt;/AdId&gt;</p>
    <p>[0196]	&lt;/AdServerPushNotification&gt;</p>
    <p>[0197]	对于业务服务器，广告服务器下发的消息与此类似，不再赘述。</p>
    <p>[0198]	如前所述，在判断有效性时也可以包括判断所述广告信息是否满足任一删除条件 及任一暂停条件。例如：当广告投放计量数据中记载的广告总曝光次数达到后，表示该广告 信息的投放目标已经完成，该广告信息已无效，则发送广告删除指示消息，指示广告客户端 或业务服务器将本地缓存的广告信息删除；当某个广告信息对某个受众用户达到频次限制 后，发送广告投放限制指示消息，指示广告客户端或业务服务器在规定时间内，暂停投放此 广告信息，只有经过一段时间后才能恢复有效，所以广告信息仍可以保存在本地缓存中，并 不删除。</p>
    <p>[0199]	通过本实施例所述方法，由广告服务主动收集已投放的广告信息的投放计量数据 并结合该广告服务器中保存的更新后的广告元数据实现了对广告信息的有效性检验，并采 用主动推送方式向所述广告客户端或业务服务器发送广告投放指示消息从而也实现了准 确可控地实现了总的曝光频次限制的目的。</p>
    <p>[0200]	图8为本发明实施例五所述广告投放方法的流程图，如图所示该方法包括如下步 骤：</p>
    <p>[0201]	步骤801，广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放请 求选择待投放的广告信息。</p>
    <p>[0202]	具体说明请参见有关图1所示步骤101的相关解释，此处不再赘述。</p>
    <p>[0203]	其中，本实施例中广告信息的有效性判断由广告服务器完成，其具体过程可以包 括步骤802-805。</p>
    <p>[0204]	步骤802，广告客户端或业务服务器当未在本地缓存中找到要投放的广告信息时， 向广告服务器发送广告选择请求，并接收所述广告服务器选择到的所述广告信息，其中所 述广告选择请求中包括缓存指示信息，用于说明选择到的广告信息是否要进行本地保存。</p>
    <p>[0205]	步骤803，所述广告服务器根据所述缓存指示信息创建需要进行本地缓存的广告 信息与请求选择该广告信息的广告客户端或业务服务器之间的订阅对应表。</p>
    <p>[0206]	步骤804，所述广告服务器根据该广告服务器中保存的所述更新后的广告元数据 判断所述订阅对应表中记录的广告信息的有效性。</p>
    <p>[0207]	具体的广告信息有效性的判断过程可以参见上述各实施例的相关描述，此处不再 赘述。</p>
    <p>[0208]	步骤805，所述广告服务器根据判断出的所述广告信息的有效性向所述订阅对应表中记录的相应广告客户端或业务服务器发送广告投放指示消息。</p>
    <p>[0209]	其中，广告投放指示消息的具体内容可以参考上述各个实施例的相关描述，在此 不再赘述。</p>
    <p>[0210]	步骤806，广告客户端或业务服务器根据所述广告投放指示消息确定是否投放所 述广告信息。</p>
    <p>[0211]	此处，当所述广告客户端或业务服务器收到广告服务器发送的广告投放指示消息 时，实施例一中的步骤103可以为广告客户端或业务服务器根据所述广告投放指示消息确 定是否投放所述广告信息。</p>
    <p>[0212]	以下举例说明本实施例所述方法的信令流程过程，如图9所示，包括如下过程：</p>
    <p>[0213]	901 ：广告客户端或业务服务器向广告服务器发送广告选择请求，其中包括缓存指 不信息；</p>
    <p>[0214]	902 ：广告服务器返回选择到的广告信息；</p>
    <p>[0215]	903 ：根据缓存指示信息确定出选择到的广告信息要进行本地缓存；</p>
    <p>[0216]	904:根据所述缓存指示信息创建需要进行本地缓存的广告信息与请求选择该广 告信息的广告客户端或业务服务器之间的订阅对应表；</p>
    <p>[0217]	905:判断有效性；</p>
    <p>[0218]	906 ：发送广告投放指示消息。</p>
    <p>[0219]	通过本实施例所述方法，以一种隐式订阅方式，由广告服务器自动为需要进行本 地缓存的广告信息创建订阅对应表，并根据该广告服务器中保存的所述更新后的广告元数 据判断所述订阅对应表中记录的广告信息的有效性，从而实现了准确可控地实现了总的曝 光次数、曝光频次限制的目的。</p>
    <p>[0220]	图10为本发明实施例六所述广告投放方法的流程图，如图所示该方法包括如下 步骤：</p>
    <p>[0221]	步骤1001，广告客户端或业务服务器接收到广告投放请求后，根据所述广告投放 请求选择待投放的广告信息。</p>
    <p>[0222]	具体说明请参见有关图1所示步骤101的相关解释，此处不再赘述。</p>
    <p>[0223]	其中，本实施例中广告信息的有效性判断由广告服务器完成，其具体过程可以包 括步骤 1002-1005。</p>
    <p>[0224]	步骤1002，广告客户端或业务服务器向广告服务器发送广告更新订阅请求。</p>
    <p>[0225]	具体地，该广告更新订阅请求中包含广告列表，以订阅广告列表中所列广告信息 的更新消息。</p>
    <p>[0226]	步骤1003，所述广告服务器根据所述广告更新订阅请求创建被订阅的广告信息与 请求订阅该广告信息的广告客户端或业务服务器之间的订阅对应表。</p>
    <p>[0227]	步骤1004，所述广告服务器根据该广告服务器中保存的所述更新后的广告元数据 判断所述订阅对应表中记录的广告信息的有效性。</p>
    <p>[0228]	具体的判断有效性的过程可以参见上述各实施例的说明，此处不再赘述。</p>
    <p>[0229]	步骤1005，所述广告服务器根据判断出的所述广告信息的有效性向所述订阅对应 表中记录的相应广告客户端或业务服务器发送广告投放指示消息。</p>
    <p>[0230]	步骤1006，根据所述广告投放指示消息确定是否投放所述广告信息。[0231]	此处，当所述广告客户端或业务服务器收到广告服务器发送的广告投放指示消息 时，实施例一中的步骤103可以为广告客户端或业务服务器根据所述广告投放指示消息确 定是否投放所述广告信息。</p>
    <p>[0232]	如图11所示，本发明实施例六所述方法的信令流程，包括如下过程：</p>
    <p>[0233]	1101 ：广告客户端或业务服务器向广告服务器发送广告更新订阅请求，其中包括 要订阅的广告列表；</p>
    <p>[0234]	1102:根据所述广告更新订阅请求创建被订阅的广告信息与请求订阅该广告信息 的广告客户端或业务服务器之间的订阅对应表；</p>
    <p>[0235]	1103:判断有效性；</p>
    <p>[0236]	1104 ：发送广告投放指示消息。</p>
    <p>[0237]	其中，向广告服务器发送的广告更新订阅请求及广告服务器返回的广告投放指示 消息可以用XML编程语言表示如下：</p>
    <p>[0238]	1.广告更新订阅请求：</p>
    <p>[0239]	&lt;SPAppSubscribe&gt;</p>
    <p>[0240]	&lt;AdID&gt;XXl&lt;/AdID&gt;</p>
    <p>[0241]	&lt;AdID&gt;XX2&lt;/AdID&gt;</p>
    <p>[0242]	&lt;SPID&gt;YY&lt;SPID&gt;</p>
    <p>[0243]	&lt;/SPAppSubscribe&gt;</p>
    <p>[0244]	2.广告投放指示消息：</p>
    <p>[0245]	&lt;SPAppNotification&gt;</p>
    <p>[0246]	&lt;AdID&gt;XXl&lt;/AdID&gt;</p>
    <p>[0247]	&lt;SPID&gt;YY&lt;SPID&gt;</p>
    <p>[0248]	&lt;Action&gt;Delete&lt;/Action&gt;</p>
    <p>[0249]	&lt;/SPAppNotification&gt;</p>
    <p>[0250]	通过本实施例所述方法，以一种显式订阅方式，广告客户端或业务服务器主动向 广告服务器订阅待更新的广告信息的更新消息，由广告服务器创建订阅对应表并根据该广 告服务器中保存的所述更新后的广告元数据判断所述订阅对应表中记录的广告信息的有 效性，从而实现了准确可控地实现了总的曝光次数、曝光频次限制的目的。</p>
    <p>[0251]	本领域普通技术人员可以理解：实现上述方法实施例的全部或部分步骤可以通过 程序指令相关的硬件来完成，前述的程序可以存储于一计算机可读取存储介质中，该程序 在执行时，执行包括上述方法实施例的步骤；而前述的存储介质包括：R0M、RAM、磁碟或者 光盘等各种可以存储程序代码的介质。</p>
    <p>[0252]	图7、8和10所示实施例中，由广告服务器发送的广告投放指示消息的消息格式举 例如图12所示，其中各消息字段的说明参见表1。</p>
    <p>[0253]	表 1</p>
    <p>[0254]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN101996371A/CN101996371AD00191.png"> <img id="idf0001" file="CN101996371AD00191.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN101996371A/CN101996371AD00191.png" class="patent-full-image" alt="Figure CN101996371AD00191"> </a> </div>
    <p>[0255]	其中，表1中所示的操作类型（Action type)可以用指定的数值来表示，每个数值 及其对应的意义说明参见表2。</p>
    <p>[0256]表	2</p>
    <p>[0257]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN101996371A/CN101996371AD00192.png"> <img id="idf0002" file="CN101996371AD00192.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN101996371A/CN101996371AD00192.png" class="patent-full-image" alt="Figure CN101996371AD00192"> </a> </div>
    <p>[0258] 其中，广告投放指示消息例如可以用XML编程语言表示如下，其中描述了删除广 告、更新广告元数据、请求上报广告metrics的通知消息：</p>
    <p>[0259]	&lt; ？ xml version = “ 1.0〃 encoding = “ UTF-8" ？ &gt;</p>
    <p>[0260]	〈notification〉</p>
    <p>[0261]	&lt;digest&gt;XX&lt;/digest&gt;</p>
    <p>[0262]	〈header〉</p>
    <p>[0263]	&lt;sender&gt;XX&lt;/sender&gt;</p>
    <p>[0264]	&lt;reciever&gt;XX&lt;/reciever&gt;</p>
    <p>[0265]	&lt;msglength&gt;XX&lt;/msglength&gt;</p>
    <p>[0266]	〈/header〉</p>
    <p>[0267]	&lt;body&gt;</p>
    <p>[0268]	//notification for deleting ads</p>
    <p>[0269]	〈Action〉</p>
    <p>[0270]	&lt;Action-type&gt;l&lt;/Action-type&gt;</p>
    <p>[0271]	&lt;action-object&gt;</p>
    <p>[0272]	&lt;ADID&gt;A1&lt;/ADID&gt;</p>
    <p>[0273]	&lt;ADID&gt;A2&lt;/ADID&gt;[0274]	&lt;/action-object&gt;</p>
    <p>[0275]	〈/Action〉</p>
    <p>[0276]	//notification for updating an ad metadata</p>
    <p>[0277]	〈Action〉</p>
    <p>[0278]	&lt;Action-type&gt;2&lt;/Action-type&gt;</p>
    <p>[0279]	&lt;action-object&gt;</p>
    <p>[0280]	&lt;ADID&gt;A3&lt;/ADID&gt;</p>
    <p>[0281]	&lt;Ad-metadata&gt;</p>
    <p>[0282]	&lt;targeting&gt;XXXXX&lt;/targeting&gt;</p>
    <p>[0283]	&lt;Impressiongs&gt;XX&lt;/Impressions&gt;</p>
    <p>[0284]	&lt;renew~time&gt;XX&lt;/renew-t ime&gt;</p>
    <p>[0285]	......</p>
    <p>[0286]	&lt;/Ad-metadata&gt;</p>
    <p>[0287]	&lt;/action-object&gt;</p>
    <p>[0288]	〈/Action〉</p>
    <p>[0289]	//notification for reporting ad metrics</p>
    <p>[0290]	〈Action〉</p>
    <p>[0291 ]	&lt;Action-type&gt;3&lt;/Action-type&gt;</p>
    <p>[0292]	&lt;action-object&gt;</p>
    <p>[0293]	&lt;ADID&gt;A4&lt;/ADID&gt;</p>
    <p>[0294]	&lt;/action-object&gt;</p>
    <p>[0295]	〈/Action〉</p>
    <p>[0296]	&lt;/body&gt;</p>
    <p>[0297]	〈/notification〉</p>
    <p>[0298]	图13为用于实现本发明实施例一所述广告投放方法的广告投放装置的结构示意</p>
    <p>图。如图所示，该广告投放装置1300包括：广告选择模块1301、有效性判断模块1302及投 放模块1303。其中，广告投放装置1310具体可以为广告客户端或业务服务器，该系统的工 作原理如下：</p>
    <p>[0299]	广告选择模块1301根据接收到的广告投放请求选择待投放的广告信息。可以具 体为：在本地缓存中进行广告选择，如果在本地缓存中未找到所述广告信息，则可以向广告 服务器发送广告选择请求，从而接收所述广告服务器选择的所述广告信息。有效性判断模 块1302根据与广告选择模块1301选择的所述广告信息关联的由广告服务器生成的广告元 数据判断所述广告信息的有效性。投放模块1303根据有效性判断模块1302判断出的所述 广告信息的有效性确定是否投放所述广告信息。</p>
    <p>[0300]	具体地，当所述广告信息有效时，立即投放所述广告信息；当所述广告信息暂时无 效时，延时投放所述广告信息；及当所述广告信息完全无效时，删除所述广告信息且不对其 进行投放。具体说明请参见图2及其相关步骤说明，此处不再赘述。</p>
    <p>[0301]	通过本实施例所述装置，由于在投放广告信息之前，根据与选择到的所述广告信 息关联的由广告服务器更新后的广告元数据判断所述广告信息的有效性，因此解决了本地缓存的广告元数据与广告主登记到广告服务器上的广告元数据不同步的问题，从而能够准 确可控地实现终端侧和网络侧总的曝光频次限制，使得广告平台能避免无效的广告投放， 降低广告主的成本，提高广告的投资回报率。</p>
    <p>[0302]	图14为用于实现本发明实施例二所述广告投放方法的广告投放系统的结构示意 图。如图所示，该广告投放系统1400包括广告投放装置1410和广告服务器1420。本实施 例中广告信息的有效性判断由广告服务器1420完成。其中，广告投放装置1410具体可以 为广告客户端或业务服务器，该系统的工作原理如下：</p>
    <p>[0303]	广告投放装置1410中的广告选择模块1411根据接收到的广告投放请求选择待投 放的广告信息。可以具体为：在本地缓存中进行广告选择，如果在本地缓存中未找到所述广 告信息，则可以向广告服务器1420发送广告选择请求，从而接收所述广告服务器1420选择 的所述广告信息；检验请求模块1412向广告服务器1420发送有效性检验请求；</p>
    <p>[0304]	广告服务器1420中的有效性判断模块1421根据自身保存的更新后的广告元数据 判断所述广告信息的有效性；并由投放指示模块1422根据有效性判断模块1421送出的所 述广告信息的有效性向广告投放装置1410发送广告投放指示消息；</p>
    <p>[0305]	广告投放装置1410中的投放模块1413根据所述广告投放指示消息确定是否投放 所述广告信息。其中，该广告投放装置1410具体可以为广告客户端或业务服务器。</p>
    <p>[0306]	本实施例所述系统通过在投放广告前向广告服务器发送有效性检验请求，由广告 服务器根据该广告服务器中保存的所述更新后的广告元数据，判断所述广告信息的有效 性，能够解决上述业务服务器和广告客户端本地缓存的广告元数据与广告服务器上保存的 广告元数据的更新不同步的问题，从而准确可控地实现了总的曝光频次限制，减少因为投 放不足带来的罚款（Penalty)，并使广告平台能避免无效的广告投放及广告投放过多带来 的广告位资源损失，防止对广告受众形成&#39479;扰，减少无效广告费用，降低广告主的成本，提 高广告的投资回报率。</p>
    <p>[0307]	图15为用于实现本发明实施例三所述广告投放方法的广告投放装置的结构示意 图。如图所示，该广告投放装置1500包括：广告选择模块1501、收发模块1502、更新模块 1503、有效性判断模块1504及投放模块1505。其工作原理如下：</p>
    <p>[0308]	广告投放装置1500中的广告选择模块1501根据接收到的广告投放请求选择待投 放的广告信息。可以具体为：在本地缓存中进行广告选择，如果在本地缓存中未找到所述广 告信息，则可以向广告服务器发送广告选择请求，从而接收所述广告服务器选择的所述广 告信息；收发模块1502向广告服务器发送元数据更新请求，并接收所述广告服务器返回的 更新后的广告元数据；更新模块1503根据所述更新后的广告元数据更新本地缓存的与选 择到的所述广告信息关联的广告元数据；有效性判断模块1504根据本地缓存的更新后的 广告元数据判断所述广告信息的有效性；投放模块1505根据有效性判断模块1504判断出 的所述广告信息的有效性确定是否投放所述广告信息。</p>
    <p>[0309]	本实施例所述装置与图14所示实施例的区别在于：对广告信息有效性的判断不 是由广告服务器进行的，而是由业务服务器和广告客户端基于从广告服务器获取的更新后 的广告元数据进行的，不但准确可控地实现了总的曝光频次限制的目的，而且还减轻了广 告服务器的处理负担。</p>
    <p>[0310]	图16为用于实现本发明实施例四所述广告投放方法的广告投放系统的结构示意图。如图所示，该广告投放系统1600包括广告投放装置1610和广告服务器1620。本实施 例中广告信息的有效性判断由广告服务器1620完成。其中，广告投放装置1610具体可以 为广告客户端或业务服务器，该系统的工作原理如下：</p>
    <p>[0311]	广告投放装置1610中的广告选择模块1611根据接收到的广告投放请求选择待投 放的广告信息。可以具体为：在本地缓存中进行广告选择，如果在本地缓存中未找到所述广 告信息，则可以向广告服务器1620发送广告选择请求，从而接收所述广告服务器1620选择 的所述广告信息。</p>
    <p>[0312]	广告服务器1620中的收集模块1621收集广告投放装置1610已投放的广告信息 的投放计量数据；有效性判断模块1622根据该广告服务器1620中保存的更新后的广告元 数据及由收集模块1621收集到的所述投放计量数据，判断所述广告信息的有效性；由投放 指示模块1623根据有效性判断模块1622判断出的所述广告信息的有效性发送广告投放指 示消息；</p>
    <p>[0313]	广告投放装置1610中的投放模块1612根据所述广告投放指示消息确定是否投放 所述广告信息。</p>
    <p>[0314]	通过本实施例所述系统，由广告服务主动收集已投放的广告信息的投放计量数据 并结合该广告服务器中保存的更新后的广告元数据实现了对广告信息的有效性检验，并采 用主动推送方式向所述广告客户端或业务服务器发送广告投放指示消息从而也实现了准 确可控地实现了总的曝光频次限制的目的。</p>
    <p>[0315]	图17为用于实现本发明实施例五所述广告投放方法的广告投放系统的结构示意 图。如图所示，该广告投放系统1700包括广告投放装置1710和广告服务器1720。其中，广 告投放装置1710具体可以为广告客户端或业务服务器，该系统的工作原理如下：</p>
    <p>[0316]	广告投放装置1710中的广告选择模块1711根据接收到的广告投放请求选择待投 放的广告信息。可以具体为：在本地缓存中进行广告选择，如果在本地缓存中未找到所述广 告信息，则通过广告获取模块1712向广告服务器1720发送广告选择请求，并接收所述广告 服务器1720选择的所述广告信息；其中所述广告选择请求中包括缓存指示信息，用于说明 从广告服务器获取到的广告信息是否要进行本地保存。</p>
    <p>[0317]	广告服务器1720中的建表模块1721根据所述缓存指示信息创建需要进行本地缓 存的广告信息与请求选择该广告信息的广告投放装置1710之间的订阅对应表；有效性判 断模块1722根据该广告服务器1720中保存的所述更新后的广告元数据判断所述订阅对应 表中记录的广告信息的有效性；投放指示模块1723根据有效性判断模块1722判断出的所 述广告信息的有效性向所述订阅对应表中记录的相应广告投放装置1710发送广告投放指 示消息；</p>
    <p>[0318]	广告投放装置1710中的投放模块1713根据所述广告投放指示消息确定是否投放 所述广告信息。</p>
    <p>[0319]	通过本实施例所述系统，以一种隐式订阅方式，由广告服务器自动为需要进行本 地缓存的广告信息创建订阅对应表，并根据该广告服务器中保存的所述更新后的广告元数 据判断所述订阅对应表中记录的广告信息的有效性，从而实现了准确可控地实现了总的曝 光次数、曝光频次限制的目的。</p>
    <p>[0320]	图18为用于实现本发明实施例六所述广告投放方法的广告投放系统的结构示意图。如图所示，该广告投放系统1800包括广告投放装置1810和广告服务器1820。其中，广 告投放装置1810具体可以为广告客户端或业务服务器，该系统的工作原理如下：</p>
    <p>[0321]	广告投放装置1810中的更新订阅模块1811向广告服务器1820发送广告更新订 阅请求；具体地，该广告更新订阅请求中包含广告列表，以订阅广告列表中所列广告信息的 更新消息；</p>
    <p>[0322]	广告服务器1820中的建表模块1821根据所述广告更新订阅请求创建被订阅的广 告信息与请求订阅该广告信息的广告客户端或业务服务器之间的订阅对应表；有效性判断 模块1822根据该广告服务器1820中保存的所述更新后的广告元数据判断所述订阅对应表 中记录的广告信息的有效性；投放指示模块1823根据有效性判断模块1822判断出的所述 广告信息的有效性向所述订阅对应表中记录的相应广告客户端或业务服务器发送广告投 放指示消息；</p>
    <p>[0323]	广告投放装置1810中的投放模块1812根据所述广告投放指示消息确定是否投放 所述广告信息。</p>
    <p>[0324]	通过本实施例所述系统，以一种显式订阅方式，广告客户端或业务服务器主动向 广告服务器订阅待更新的广告信息的更新消息，由广告服务器创建订阅对应表并根据该广 告服务器中保存的所述更新后的广告元数据判断所述订阅对应表中记录的广告信息的有 效性，从而实现了准确可控地实现了总的曝光次数、曝光频次限制的目的。</p>
    <p>[0325]	本发明的各个装置实施例和系统实施例中的相关有效性判断、广告投放指示消息 等的具体处理过程可以参考上述各个方法实施例的相关部分的描述，而且各个装置实施例 和系统实施例中的没有提到但在方法中介绍的处理过程，也可以参照上述各个方法实施例 的相关部分的描述，在此不再赘述。</p>
    <p>[0326]	最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽 管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然 可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替 换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精 神和范围。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103200206A?cl=zh">CN103200206A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年1月6日</td><td class="patent-data-table-td patent-date-value">2013年7月10日</td><td class="patent-data-table-td ">腾讯科技（深圳）有限公司</td><td class="patent-data-table-td ">一种展示广告的方法及客户端</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/EP2802114A4?cl=zh">EP2802114A4</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年12月24日</td><td class="patent-data-table-td patent-date-value">2015年5月27日</td><td class="patent-data-table-td ">Tencent Tech Shenzhen Co Ltd</td><td class="patent-data-table-td ">Method and client for displaying advertisements</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0017300000">G06F17/30</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06Q0030000000">G06Q30/00</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06Q30/0251">G06Q30/0251</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=UcpyBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06Q30/00">G06Q30/00</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">G06Q30/00</span>, <span class="nested-value">G06Q30/0251</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2011年3月30日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2011年7月27日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/e99e7138add85ce41bea/CN101996371A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_5115ea495017d9115e613207d3810e5a.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E5%B9%BF%E5%91%8A%E6%8A%95%E6%94%BE%E6%96%B9%E6%B3%95_%E8%A3%85%E7%BD%AE%E5%8F%8A%E7%B3%BB%E7%BB%9F.pdf?id=UcpyBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U2nP0mGgu4QfM3wDDdJZlffK0NU7g"},"sample_url":"https://www.google.com/patents/reader?id=UcpyBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>