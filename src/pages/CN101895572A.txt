<!DOCTYPE html><html><head><title>专利 CN101895572A - 一种sd卡与主控设备之间的数据交互方法及系统 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种sd卡与主控设备之间的数据交互方法及系统"><meta name="DC.contributor" content="梁国和" scheme="inventor"><meta name="DC.contributor" content="中兴通讯股份有限公司" scheme="assignee"><meta name="DC.date" content="2010-6-28" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种SD卡与主控设备之间的数据交互方法，包括：将网络服务器嵌入到SD卡中，提供相应的资源和服务；主控设备通过HTTP协议访问SD卡上的资源和服务。本发明还相应地公开了一种SD卡与主控设备之间的数据交互系统，包括主控设备和SD卡，所述主控设备包括：网络浏览器、网络传输模块、BIP网关、APDU编解码模块和SD卡传输模块；所述SD卡包括：SD卡传输模块、APDU编解码模块、BIP网关和网络服务器。本发明通过在SD卡中嵌入网络服务器，使主控设备能够通过HTTP协议访问SD卡上的资源和服务，所以，SD卡能够很好的实现与主控设备的交互，将不再以存储、安全为主，从而应用于范围较广。"><meta name="DC.date" content="2010-11-24"><meta name="DC.relation" content="CN:101010927:A" scheme="references"><meta name="DC.relation" content="CN:101273553:A" scheme="references"><meta name="DC.relation" content="CN:101600263:A" scheme="references"><meta name="DC.relation" content="CN:101655903:A" scheme="references"><meta name="DC.relation" content="US:20090119364:A1" scheme="references"><meta name="DC.relation" content="WO:2009116731:A2" scheme="references"><meta name="citation_patent_publication_number" content="CN:101895572:A"><meta name="citation_patent_application_number" content="CN:201010220685"><link rel="canonical" href="https://www.google.com/patents/CN101895572A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101895572A?cl=zh"/><meta name="title" content="专利 CN101895572A - 一种sd卡与主控设备之间的数据交互方法及系统"/><meta name="description" content="本发明公开了一种SD卡与主控设备之间的数据交互方法，包括：将网络服务器嵌入到SD卡中，提供相应的资源和服务；主控设备通过HTTP协议访问SD卡上的资源和服务。本发明还相应地公开了一种SD卡与主控设备之间的数据交互系统，包括主控设备和SD卡，所述主控设备包括：网络浏览器、网络传输模块、BIP网关、APDU编解码模块和SD卡传输模块；所述SD卡包括：SD卡传输模块、APDU编解码模块、BIP网关和网络服务器。本发明通过在SD卡中嵌入网络服务器，使主控设备能够通过HTTP协议访问SD卡上的资源和服务，所以，SD卡能够很好的实现与主控设备的交互，将不再以存储、安全为主，从而应用于范围较广。"/><meta property="og:title" content="专利 CN101895572A - 一种sd卡与主控设备之间的数据交互方法及系统"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101895572A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101895572A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=ei2BBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101895572A&amp;usg=AFQjCNFFqtFAamz8ZIyKUVrzbvWNyhoACg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/359a41ccc95f3f10b929/CN101895572A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/359a41ccc95f3f10b929/CN101895572A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101895572A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101895572A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101895572A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101895572B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101895572A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种SD卡与主控设备之间的数据交互方法，包括：将网络服务器嵌入到SD卡中，提供相应的资源和服务；主控设备通过HTTP协议访问SD卡上的资源和服务。本发明还相应地公开了一种SD卡与主控设备之间的数据交互系统...</span><span itemprop="url">https://www.google.com/patents/CN101895572A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101895572A - 一种sd卡与主控设备之间的数据交互方法及系统</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101895572A - 一种sd卡与主控设备之间的数据交互方法及系统" title="专利 CN101895572A - 一种sd卡与主控设备之间的数据交互方法及系统"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101895572 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201010220685</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2010年11月24日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2010年6月28日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2010年6月28日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101895572B?hl=zh-CN&amp;cl=zh">CN101895572B</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201010220685.2, </span><span class="patent-bibdata-value">CN 101895572 A, </span><span class="patent-bibdata-value">CN 101895572A, </span><span class="patent-bibdata-value">CN 201010220685, </span><span class="patent-bibdata-value">CN-A-101895572, </span><span class="patent-bibdata-value">CN101895572 A, </span><span class="patent-bibdata-value">CN101895572A, </span><span class="patent-bibdata-value">CN201010220685, </span><span class="patent-bibdata-value">CN201010220685.2</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%A2%81%E5%9B%BD%E5%92%8C%22">梁国和</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%B8%AD%E5%85%B4%E9%80%9A%E8%AE%AF%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">中兴通讯股份有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101895572A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101895572A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101895572A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (6),</span> <span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (7),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (2)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=ei2BBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201010220685&amp;usg=AFQjCNH5nMo0qI1QclAn3CwzZ-8Nh_imNw"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=ei2BBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101895572A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGsP7VKrlmtpTjna4fNVm2TrZ5bJQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT98978105" lang="ZH" load-source="patent-office">一种sd卡与主控设备之间的数据交互方法及系统</invention-title>
      </span><br><span class="patent-number">CN 101895572 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA81427858" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种SD卡与主控设备之间的数据交互方法，包括：将网络服务器嵌入到SD卡中，提供相应的资源和服务；主控设备通过HTTP协议访问SD卡上的资源和服务。本发明还相应地公开了一种SD卡与主控设备之间的数据交互系统，包括主控设备和SD卡，所述主控设备包括：网络浏览器、网络传输模块、BIP网关、APDU编解码模块和SD卡传输模块；所述SD卡包括：SD卡传输模块、APDU编解码模块、BIP网关和网络服务器。本发明通过在SD卡中嵌入网络服务器，使主控设备能够通过HTTP协议访问SD卡上的资源和服务，所以，SD卡能够很好的实现与主控设备的交互，将不再以存储、安全为主，从而应用于范围较广。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(12)</span></span></div><div class="patent-text"><ol mxw-id="PCLM33813589" lang="ZH" load-source="patent-office" class="claims">
    <li class="claim"> <div num="1" class="claim">
      <div class="claim-text">一种SD卡与主控设备之间的数据交互方法，其特征在于，该方法包括：将网络服务器嵌入到SD卡中，提供相应的资源和服务；主控设备通过HTTP协议访问SD卡上的资源和服务。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的方法，其特征在于，所述主控设备通过HTTP协议访问SD卡上 的资源和服务为：网络浏览器根据用户操作，将相应的命令和/或数据通过网络传输模块传输到主控设 备的承载无关协议BIP网关；主控设备的BIP网关对来自网络传输模块的命令和/或数据进行TCP/IP协议到BIP 协议的转换，之后传输到主控设备的应用协议数据单元APDU编解码模块；主控设备的APDU编解码模块根据来自主控设备的BIP网关的命令和/或数据执行相 应的编码操作及信令控制，并通过主控设备的SD卡传输模块将编码后的命令和/或数据传 输到SD卡的SD卡传输模块；SD卡的APDU编解码模块对SD卡的SD卡传输模块接收的命令和/或数据进行解码并 进行相应的信令控制；SD卡的BIP网关对SD卡的APDU编解码模块解码后的命令和/或数据进行BIP协议到 TCP/IP协议的转换后，传输到网络服务器；网络服务器根据来自SD卡的BIP网关的命令和/或数据进行相应的处理，并返回相应 的命令和/或数据。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的方法，其特征在于，所述网络服务器返回相应的命令和/或数 据为：SD卡的BIP网关对来自网络服务器返回的命令和/或数据进行TCP/IP协议到BIP协 议的转换；SD卡的APDU编解码模块对SD卡的BIP网关返回的命令和/或数据进行编码并进行 相应的信令控制，以及将编码后的命令和/或数据通过SD卡的SD卡传输模块、主控设备的 SD卡传输模块传输到主控设备的APDU编解码模块；主控设备的APDU编解码模块对来自主控设备的SD卡传输模块的命令和/或数据进行 解码并进行相应的信令控制；主控设备的BIP网关对主控设备的APDU编解码模块解码后的命令和/或数据进行BIP 协议到TCP/IP协议的转换，并将转换后的命令和/或数据通过网络传输模块传输到网络浏IrWSB 见益。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求2或3所述的方法，其特征在于，所述BIP网关具有两种模式：服务器 模式和客户端模式；其中，所述BIP网关运行在服务器模式时，执行BIP协议到TCP/IP协 议，或者TCP/IP协议到BIP协议的转换；所述BIP网关运行在客户端模式时，将SD卡作为 客户端访问远端服务器，支持远程应用下载。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求2或3所述的方法，其特征在于，所述APDU编解码模块对命令和/或 数据进行编码为：将APDU嵌入到包括一个起始位、一个结束位、两个字节的循环冗余校验 码CRC校验位以及APDU的通信结构中，所述APDU由两个字节的长度字段和APDU命令/响 应组成，所述长度字段定义为APDU长度加2 ；所述APDU编解码模块对命令和/或数据进行解码为：将APDU从包括一个起始位、一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中提取出来，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求5所述的方法，其特征在于，该方法还包括：定义APDU最大长度，当 APDU长度小于所述APDU最大长度时，不足以0补齐。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求6所述的方法，其特征在于，所述APDU最大长度为TCP/IP包最大长度 +APDU开销。</div>
    </div>
    </li> <li class="claim"> <div num="8" class="claim">
      <div class="claim-text">8.	&#8212;种SD卡与主控设备之间的数据交互系统，其特征在于，该系统包括：SD卡和主控 设备，所述SD卡，用于通过嵌入网络服务器提供相应的资源和服务； 所述主控设备，用于通过HTTP协议访问SD卡上的资源和服务。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求8所述的系统，其特征在于，所述主控设备包括：网络浏览器、网络传 输模块、BIP网关、APDU编解码模块和SD卡传输模块；所述SD卡包括：SD卡传输模块、APDU 编解码模块、BIP网关和网络服务器；其中，所述网络浏览器，用于根据用户操作，将相应的命令和/或数据通过网络传输模块传 输到主控设备的承载无关协议BIP网关；所述主控设备的BIP网关，用于对来自网络传输模块的命令和/或数据进行TCP/IP协 议到BIP协议的转换，之后传输到主控设备的APDU编解码模块；所述主控设备的APDU编解码模块，用于根据来自所述BIP网关的命令和/或数据执行 相应的编码操作及信令控制，并通过主控设备的SD卡传输模块将编码后的命令和/或数据 传输到SD卡的SD卡传输模块；所述SD卡的APDU编解码模块，用于对SD卡的SD卡传输模块接收的命令和/或数据 进行解码并进行相应的信令控制；所述SD卡的BIP网关，用于对SD卡的APDU编解码模块解码后的命令和/或数据进行 BIP协议到TCP/IP协议的转换后，传输到网络服务器；所述网络服务器，用于根据来自SD卡的BIP网关的命令和/或数据进行相应的处理， 并返回相应的命令和/或数据。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求9所述的系统，其特征在于，所述SD卡的BIP网关，还用于对来自网络服务器返回的命令和/或数据进行TCP/IP 协议到BIP协议的转换；所述SD卡的APDU编解码模块，还用于对SD卡的BIP网关返回的命令和/或数据进行 编码并进行相应的信令控制，以及将编码后的命令和/或数据通过SD卡的SD卡传输模块、 主控设备的SD卡传输模块传输到主控设备的APDU编解码模块；所述主控设备的APDU编解码模块，还用于对来自主控设备的SD卡传输模块的命令和 /或数据进行解码并进行相应的信令控制；所述主控设备的BIP网关，还用于对主控设备的APDU编解码模块解码后的命令和/或 数据进行BIP协议到TCP/IP协议的转换，并将转换后的命令和/或数据通过网络传输模块 传输到网络浏览器。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求9或10所述的系统，其特征在于，所述BIP网关具有两种模式：服务 器模式和客户端模式；其中，所述BIP网关运行在服务器模式时，执行BIP协议到TCP/IP协议，或者TCP/IP协议到BIP协议的转换；所述BIP网关运行在客户端模式时，将SD卡作为 客户端访问远端服务器，支持远程应用下载。</div>
    </div>
    </li> <li class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求9或10所述的系统，其特征在于，所述APDU编解码模块对命令和/ 或数据进行编码为：将APDU嵌入到包括一个起始位、一个结束位、两个字节的循环冗余校 验码CRC校验位以及APDU的通信结构中，所述APDU由两个字节的长度字段和APDU命令/ 响应组成，所述长度字段定义为APDU长度加2 ；所述APDU编解码模块对命令和/或数据进行解码为：将APDU从包括一个起始位、一 个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中提取出来，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2。4</div>
    </div>
  </li> </ol>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES39064152" lang="ZH" load-source="patent-office" class="description">
    <p>一种SD卡与主控设备之间的数据交互方法及系统</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及移动通信技术，尤其涉及一种SD(Secure Digital Memory Card)卡与 主控设备之间的数据交互方法及系统。</p>
    <p>背景技术</p>
    <p>[0002]	SD卡是一种基于半导体闪存工艺的存储卡，它被广泛地应用于便携式装置，例如 数码相机、个人数码助理（PDA)和多媒体播放器等。</p>
    <p>[0003]	SD卡最初是从MMC (Multimedia Card)卡基础上发展起来的，可以与MMC卡实现 兼容，但SD卡数据传输速率更快，此外，SD卡还特别增加了 CPRM (Content protection for Recordable Media)功能，用于卡内数据的授权访问，实现内容保护。SD卡家族还包括Mini SD 卡、TransFlash (Micro SD)卡、MicroSD 卡、SDIO 卡等。</p>
    <p>[0004]	随着SD卡存储技术的发展，逐渐出现了 Mini SD卡和Micro SD卡，这种小体积SD 卡的出现，大大拓展了 SD卡的应用范围，这使得SD卡应用在一些小型手机中成为可能；另 一方面，Mini SD卡、Micro SD卡功能与SD卡功能兼容，只要将其插入特定转接卡中，即可 当作标准SD卡来使用，这样，Mini SD卡、Micro SD卡便可用于那些使用标准SD卡的数码 设备，加速了 Mini SD卡、Micro SD卡的市场普及。</p>
    <p>[0005]	高级安全SD卡是一种符合由SDA协会（SD Association)制订的“高级安全SD扩 展规范”的多媒体卡。将传统的SD存储卡技术和智能卡技术有机的结合，向SD卡发送APDU 指令和存储文件可同时进行。如BlackBerry设备支持采用Mc-EX安全系统的microSD卡。</p>
    <p>[0006]	与智能卡相比，SD卡具有速率快的特点，但仍有以下缺点：现有SD卡还是以存储、 安全为主，无法很好地实现与主控设备的交互，并且，现有SD卡不支持TCP/IP，不能支持远 程应用，所以，应用于范围有限。</p>
    <p>发明内容</p>
    <p>[0007]	有鉴于此，本发明的主要目的在于提供一种SD卡与主控设备之间的数据交互方 法及系统，能够很好地实现SD卡与主控设备的交互，且能支持远程应用，从而扩大SD卡的 应用范围。</p>
    <p>[0008]	为达到上述目的，本发明的技术方案是这样实现的：</p>
    <p>[0009]	一种SD卡与主控设备之间的数据交互方法，包括：</p>
    <p>[0010]	将网络服务器嵌入到SD卡中，提供相应的资源和服务；</p>
    <p>[0011]	主控设备通过HTTP协议访问SD卡上的资源和服务。</p>
    <p>[0012]	所述主控设备通过HTTP协议访问SD卡上的资源和服务为：</p>
    <p>[0013]	网络浏览器根据用户操作，将相应的命令和/或数据通过网络传输模块传输到主 控设备的承载无关协议BIP网关；</p>
    <p>[0014]	主控设备的BIP网关对来自网络传输模块的命令和/或数据进行TCP/IP协议到 BIP协议的转换，之后传输到主控设备的应用协议数据单元APDU编解码模块；</p>
    <p>5[0015]	主控设备的APDU编解码模块根据来自主控设备的BIP网关的命令和/或数据执 行相应的编码操作及信令控制，并通过主控设备的SD卡传输模块将编码后的命令和/或数 据传输到SD卡的SD卡传输模块；</p>
    <p>[0016]	SD卡的APDU编解码模块对SD卡的SD卡传输模块接收的命令和/或数据进行解 码并进行相应的信令控制；</p>
    <p>[0017]	SD卡的BIP网关对SD卡的APDU编解码模块解码后的命令和/或数据进行BIP协 议到TCP/IP协议的转换后，传输到网络服务器；</p>
    <p>[0018]	网络服务器根据来自SD卡的BIP网关的命令和/或数据进行相应的处理，并返回 相应的命令和/或数据。</p>
    <p>[0019]	所述网络服务器返回相应的命令和/或数据为：</p>
    <p>[0020]	SD卡的BIP网关对来自网络服务器返回的命令和/或数据进行TCP/IP协议到BIP 协议的转换；</p>
    <p>[0021]	SD卡的APDU编解码模块对SD卡的BIP网关返回的命令和/或数据进行编码并进 行相应的信令控制，以及将编码后的命令和/或数据通过SD卡的SD卡传输模块、主控设备 的SD卡传输模块传输到主控设备的APDU编解码模块；</p>
    <p>[0022]	主控设备的APDU编解码模块对来自主控设备的SD卡传输模块的命令和/或数据 进行解码并进行相应的信令控制；</p>
    <p>[0023]	主控设备的BIP网关对主控设备的APDU编解码模块解码后的命令和/或数据进 行BIP协议到TCP/IP协议的转换，并将转换后的命令和/或数据通过网络传输模块传输到 网络浏览器。</p>
    <p>[0024]	所述BIP网关具有两种模式：服务器模式和客户端模式；其中，所述BIP网关运行 在服务器模式时，执行BIP协议到TCP/IP协议，或者TCP/IP协议到BIP协议的转换；所述 BIP网关运行在客户端模式时，将SD卡作为客户端访问远端服务器，支持远程应用下载。</p>
    <p>[0025]	所述APDU编解码模块对命令和/或数据进行编码为：将APDU嵌入到包括一个起 始位、一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2 ；</p>
    <p>[0026]	所述APDU编解码模块对命令和/或数据进行解码为：将APDU从包括一个起始位、 一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中提取出来，所 述APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加 2。</p>
    <p>[0027]	该方法还包括：定义APDU最大长度，当APDU长度小于所述APDU最大长度时，不足 以0补齐。</p>
    <p>[0028]	所述APDU最大长度为TCP/IP包最大长度+APDU开销。</p>
    <p>[0029]	一种SD卡与主控设备之间的数据交互系统，包括：SD卡和主控设备，</p>
    <p>[0030]	所述SD卡，用于通过嵌入网络服务器提供相应的资源和服务；</p>
    <p>[0031]	所述主控设备，用于通过HTTP协议访问SD卡上的资源和服务。</p>
    <p>[0032]	所述主控设备包括：网络浏览器、网络传输模块、BIP网关、APDU编解码模块和SD 卡传输模块；所述SD卡包括：SD卡传输模块、APDU编解码模块、BIP网关和网络服务器；其 中，[0033]	所述网络浏览器，用于根据用户操作，将相应的命令和/或数据通过网络传输模 块传输到主控设备的承载无关协议BIP网关；</p>
    <p>[0034]	所述主控设备的BIP网关，用于对来自网络传输模块的命令和/或数据进行TCP/ IP协议到BIP协议的转换，之后传输到主控设备的APDU编解码模块；</p>
    <p>[0035]	所述主控设备的APDU编解码模块，用于根据来自所述BIP网关的命令和/或数据 执行相应的编码操作及信令控制，并通过主控设备的SD卡传输模块将编码后的命令和/或 数据传输到SD卡的SD卡传输模块；</p>
    <p>[0036]	所述SD卡的APDU编解码模块，用于对SD卡的SD卡传输模块接收的命令和/或 数据进行解码并进行相应的信令控制；</p>
    <p>[0037]	所述SD卡的BIP网关，用于对SD卡的APDU编解码模块解码后的命令和/或数据 进行BIP协议到TCP/IP协议的转换后，传输到网络服务器；</p>
    <p>[0038]	所述网络服务器，用于根据来自SD卡的BIP网关的命令和/或数据进行相应的处 理，并返回相应的命令和/或数据。</p>
    <p>[0039]	所述SD卡的BIP网关，还用于对来自网络服务器返回的命令和/或数据进行TCP/ IP协议到BIP协议的转换；</p>
    <p>[0040]	所述SD卡的APDU编解码模块，还用于对SD卡的BIP网关返回的命令和/或数据 进行编码并进行相应的信令控制，以及将编码后的命令和/或数据通过SD卡的SD卡传输 模块、主控设备的SD卡传输模块传输到主控设备的APDU编解码模块；</p>
    <p>[0041]	所述主控设备的APDU编解码模块，还用于对来自主控设备的SD卡传输模块的命 令和/或数据进行解码并进行相应的信令控制；</p>
    <p>[0042]	所述主控设备的BIP网关，还用于对主控设备的APDU编解码模块解码后的命令和 /或数据进行BIP协议到TCP/IP协议的转换，并将转换后的命令和/或数据通过网络传输 模块传输到网络浏览器。</p>
    <p>[0043]	所述BIP网关具有两种模式：服务器模式和客户端模式；其中，所述BIP网关运行 在服务器模式时，执行BIP协议到TCP/IP协议，或者TCP/IP协议到BIP协议的转换；所述 BIP网关运行在客户端模式时，将SD卡作为客户端访问远端服务器，支持远程应用下载。</p>
    <p>[0044]	所述APDU编解码模块对命令和/或数据进行编码为：将APDU嵌入到包括一个起 始位、一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2 ；</p>
    <p>[0045]	所述APDU编解码模块对命令和/或数据进行解码为：将APDU从包括一个起始位、 一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中提取出来，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2。</p>
    <p>[0046]	本发明SD卡与主控设备之间的数据交互方法及系统，将网络服务器嵌入到SD卡 中，从而主控设备通过HTTP协议访问SD卡上的资源和服务。本发明通过在SD卡中嵌入网 络服务器，使主控设备能够通过HTTP协议访问SD卡上的资源和服务，所以，SD卡能够很好 的实现与主控设备的交互，将不再以存储、安全为主，从而应用于范围较广。</p>
    <p>附图说明</p>
    <p>[0047]	图1为本发明SD卡与主控设备之间的数据交互方法流程示意图；[0048]	图2为本发明一通信结构的示意图；</p>
    <p>[0049]	图3为本发明SD卡与主控设备之间数据交互方法的详细流程示意图；</p>
    <p>[0050]	图4为本发明SD卡与主控设备之间的数据交互系统结构示意图</p>
    <p>[0051]	图5为本发明SD卡侧的硬件功能框图；</p>
    <p>[0052]	图6为本发明实施例SD卡与主控设备之间的数据交互系统结构示意图。 具体实施方式</p>
    <p>[0053]	本发明的基本思想是：将网络服务器嵌入到SD卡中，从而主控设备通过HTTP协议 访问SD卡上的资源和服务。</p>
    <p>[0054]	图1为本发明SD卡与主控设备之间的数据交互方法流程示意图，如图1所示，该 方法包括：</p>
    <p>[0055]	步骤101 ：将网络服务器嵌入到SD卡中，以提供相应的资源和服务。</p>
    <p>[0056]	步骤102 ：主控设备通过HTTP协议访问SD卡上的资源和服务。</p>
    <p>[0057]	需要说明的是，主控设备可以是终端设备，也可以是其他与SD卡连接并用于SD卡 控制的各种控制设备，如带有SD卡插槽的笔记本电脑、带有智能SD卡插槽的PDA等。由于 使用HTTP协议来交换数据，可以使用网络浏览器作为主控设备应用程序的用户界面。本发 明中网络浏览器作为应用程序的用户界面，通过URL标识的SD卡应用可以被网络浏览器触 发，应用可以执行一种特殊任务也可以同步的创建内容并返回网络浏览器，页面包含了应 用的列表，用户打开网络浏览器，访问这个页面就可以看到所有存储在SD卡内的应用，当 用户选择了某个应用的超级链接，就可以进入到该应用的二级管理页面。二级管理页面列 举了应用可能的操作，用户继续点击页面上的链接，就可完成应用之类的管理操作。</p>
    <p>[0058]	需要说明的是，由于网络浏览器是使用TCP/IP协议来发送HTTP消息，SD卡可以 使用承载无关协议（BIP)来传输HTTP协议，这样必须通过BIP网关来完成TCP/IP协议到 BIP协议的转换，该转换过程可以由相应的BIP网关来完成。需要说明的是，BIP网关一般 具有服务器模式和客户端模式，其运行在服务器模式时，用来提供SD卡和主控单元的数据 交换，即BIP协议到TCP/IP协议，或者TCP/IP协议到BIP协议的转换；工作在客户端模式 时，将SD卡作为客户端访问远端服务器，支持远程应用下载。</p>
    <p>[0059]	需要说明的是，SD卡与主控设备的物理接口采用标准的SD卡接口 SD/SPIBUS接 口，主控设备与SD卡的信令交互都基于应用协议数据单元（ApplicationProtocol Data Unit, APDU)完成相关命令传输，具体将APDU消息内嵌在通信格式中。</p>
    <p>[0060]	本发明根据SD卡的物理接口、传输帧格式、传输速率特点，提供一种基于SD卡的 通信结构，APDU被嵌入到以下通信结构中，通过该结构可以简单实现基于SD卡接口，完成 APDU的传递。SD卡和主控设备都必须遵循这个结构。</p>
    <p>[0061 ] 图2为本发明一通信结构的示意图，如图2所示，整个格式包括：一个起始位、一个 结束位、两个字节的循环冗余校验码（CRC)校验位以及APDU，其中APDU由两个字节的长度 字段和APDU命令/响应组成，长度字段定义为APDU长度加2。本发明还可以定义APDU最 大长度，当APDU长度小于该APDU最大长度时，不足以0补齐。本发明还可以定义APDU最 大长度为TCP/IP包最大长度+APDU开销，一次将TCP/IP传送完成，提高传输效率。而现有 的智能卡协议最大传输长度一般受制于IS07816接口，比如，SIM卡的最大长度有的定义为255字节，当传输的TCP/IP包大于255字节时，需要拆包进行传输。相比之下，本发明利用 了 SD卡高速传输的特点定义通信结构，提高了传输效率。</p>
    <p>[0062]	需要说明的是，现有访问Smart Card Web Server地址使用的是本地地址 127.0.0. 1，及特定端口 3516，则本地地址（Iocalhost) 127. 0. 0. 1可以被主控设备上的 HTTP应用来寻址BIP网关，不同的应用可以使用不同的端口，即本发明可以采用端口定义 的方式来区分智能卡与SD卡，例如，可以将SD卡端口定义为3517，从而手机用户只需要在 网络浏览器上输入http://127. 0. 0. 1:3517就能访问SD卡里的相关应用了。</p>
    <p>[0063]	需要说明的是，本发明还可以提供RESET SD命令，使SD执行ATR(Answer To Reset)过程。本发明一 RESET SCWS命令结构如下所示：</p>
    <p>[0064]</p>
    <span class="patent-image-not-available"> </span>
    <p>[0065]	表 1</p>
    <p>[0066]	Pl = ‘01，时，执行IS07816-3规定的冷复位，如硬件不支持，执行热复位；Pl = ‘81，时，执行IS07816-3规定的热复位。</p>
    <p>[0067]	图3为本发明SD卡与主控设备之间数据交互方法的详细流程示意图，如图3所 示，该方法具体包括：</p>
    <p>[0068]	步骤301 ：网络浏览器根据用户操作，将相应的命令和/或数据通过网络传输模块 传输到主控设备的BIP网关。</p>
    <p>[0069]	步骤302 ：主控设备的BIP网关对来自网络传输模块的命令和/或数据进行TCP/ IP协议到BIP协议的转换，之后传输到主控设备的APDU编解码模块。</p>
    <p>[0070]	步骤303 ：主控设备的APDU编解码模块根据来自主控设备的BIP网关的命令和/ 或数据执行相应的编码操作及信令控制，并通过主控设备的SD卡传输模块将编码后的命 令和/或数据传输到SD卡的SD卡传输模块。</p>
    <p>[0071]	步骤304 :SD卡的APDU编解码模块对SD卡的SD卡传输模块接收的命令和/或数 据进行解码并进行相应的信令控制。</p>
    <p>[0072]	步骤305 :SD卡的BIP网关对SD卡的APDU编解码模块解码后的命令和/或数据 进行BIP协议到TCP/IP协议的转换后，传输到网络服务器。</p>
    <p>[0073]	步骤306 ：网络服务器根据来自SD卡的BIP网关的命令和/或数据进行相应的处 理，并返回相应的命令和/或数据。</p>
    <p>[0074]	网络服务器返回相应的命令和/或数据的具体过程为：</p>
    <p>[0075]	SD卡的BIP网关对来自网络服务器返回的命令和/或数据进行TCP/IP协议到BIP 协议的转换。</p>
    <p>[0076]	SD卡的APDU编解码模块对SD卡的BIP网关返回的命令和/或数据进行编码并进 行相应的信令控制，以及将编码后的命令和/或数据通过SD卡的SD卡传输模块、主控设备的SD卡传输模块传输到主控设备的APDU编解码模块。</p>
    <p>[0077]	主控设备的APDU编解码模块对来自主控设备的SD卡传输模块的命令和/或数据 进行解码并进行相应的信令控制。</p>
    <p>[0078]	主控设备的BIP网关对主控设备的APDU编解码模块解码后的命令和/或数据进 行BIP协议到TCP/IP协议的转换，并将转换后的命令和/或数据通过网络传输模块传输到 网络浏览器。</p>
    <p>[0079]	上述BIP网关具有两种模式：服务器模式和客户端模式；其中，所述BIP网关运行 在服务器模式时，执行BIP协议到TCP/IP协议，或者TCP/IP协议到BIP协议的转换；所述 BIP网关运行在客户端模式时，将SD卡作为客户端访问远端服务器，支持远程应用下载。</p>
    <p>[0080]	上述APDU编解码模块对命令和/或数据进行编码为：将APDU嵌入到包括一个起 始位、一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2 ； [0081 ] 上述APDU编解码模块对命令和/或数据进行解码为：将APDU从包括一个起始位、 一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中提取出来，所 述APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加 2。</p>
    <p>[0082]	可以定义APDU最大长度，当APDU长度小于所述APDU最大长度时，不足以0补齐， 所述APDU最大长度为TCP/IP包最大长度+APDU开销。</p>
    <p>[0083]	图4为本发明SD卡与主控设备之间的数据交互系统结构示意图，如图4所示，该 系统包括主控设备41和SD卡42，主控设备41进一步包括：网络浏览器411、网络传输模块 412,BIP网关413、APDU编解码模块414和SD卡传输模块415 ；SD卡42包括：SD卡传输模 块421、APDU编解码模块422、BIP网关423和网络服务器424 ；其中，</p>
    <p>[0084]	网络浏览器411，用于根据用户操作，将相应的命令和/或数据通过网络传输模块 412传输到BIP网关413。网络传输模块412运行在主控设备上应用和BIP网关之间，用于 通过网络通信协议将来自网络浏览器411的命令和/或数据传输到BIP网关413，所述网络 通信协议包括TCP/IP协议栈、HTTP协议等。</p>
    <p>[0085]	BIP网关413，用于对来自网络传输模块的命令和/或数据进行TCP/IP协议到BIP 协议的转换，之后传输到APDU编解码模块414 ；以及对APDU编解码模块414解码后的命令 和/或数据进行BIP协议到TCP/IP协议的转换，并将转换后的命令和/或数据通过网络传 输模块412传输到网络浏览器411。SD卡不支持TCP/IP协议，BIP网关主要是提供一个让 SD卡能访问主控设备各种高速通道，也就是借用主控设备高速通道完成BIP网关和SD卡的</p>
    <p>通{曰。</p>
    <p>[0086]	BIP网关可以分为Client模式和Server模式两种模式，其通过Server模式用来 提供主控设备网络浏览器访问卡内网络服务器的通道。</p>
    <p>[0087]	主控设备开机向SD卡发送Open Channel命令，建立与网络服务器之间的连接。服 务器之后一直处于侦听请求状态，之后通过Send Data/Receive Data命令发送接收命令。</p>
    <p>[0088]	APDU编解码模块414，用于根据来自BIP网关413的命令和/或数据执行相应的 编码操作及信令控制，并通过SD卡传输模块415将编码后的命令和/或数据传输到SD卡 传输模块421 ；以及对来自SD卡传输模块415的命令和/或数据进行解码并进行相应的信</p>
    <p>10令控制。</p>
    <p>[0089]	所述命令包括但不限于：</p>
    <p>[0090]	Open Channel ：这一命令要求主控设备打开一个高速通道，SD卡应提供打开通道 必须的全部信息；</p>
    <p>[0091]	Close Channel ：这一命令要求主控设备关闭指定某一的高速通道；</p>
    <p>[0092]	Send Data ：这一个命令要求主控设备通过指定通道发送SD卡上的数据；</p>
    <p>[0093]	Receive Data ：这一命令要求主控设备通过响应命令将指定通道的数据传送到SD 卡上。</p>
    <p>[0094]	控制设备对SD卡的驱动控制按SD卡的种类不同，而有所差别，SD卡一般支持SPI Bus或SD Bus两种模式。</p>
    <p>[0095]	APDU编解码模块422，用于对SD卡传输模块421接收的命令和/或数据进行解码 并进行相应的信令控制；以及对BIP网关423返回的命令和/或数据进行编码并进行相应 的信令控制；以及将编码后的命令和/或数据通过SD卡传输模块421、SD卡传输模块415 传输到APDU编解码模块414。</p>
    <p>[0096]	BIP网关423，用于对APDU编解码模块422解码后的命令和/或数据进行BIP协 议到TCP/IP协议的转换，之后传输到网络服务器424 ；以及对网络服务器424返回的命令 和/或数据进行TCP/IP协议到BIP协议的转换。</p>
    <p>[0097]	网络服务器424，用于根据来自BIP网关423的命令和/或数据进行相应的处理， 并返回相应的命令和/或数据。SD卡应用包括传统SD卡的存储及安全功能。SD卡能够 与运行在主控模块上的客户端HTTP应用进行交互。SD卡根据HTTP应用要求返回相关的 xHTML页面。</p>
    <p>[0098]	所述BIP网关具有两种模式：服务器模式和客户端模式；其中，所述BIP网关运行 在服务器模式时，执行BIP协议到TCP/IP协议，或者TCP/IP协议到BIP协议的转换；所述 BIP网关运行在客户端模式时，将SD卡作为客户端访问远端服务器，支持远程应用下载。</p>
    <p>[0099]	所述APDU编解码模块对命令和/或数据进行编码为：将APDU嵌入到包括一个起 始位、一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中，所述 APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加2 ；</p>
    <p>[0100]	所述APDU编解码模块对命令和/或数据进行解码为：将APDU从包括一个起始位、 一个结束位、两个字节的循环冗余校验码CRC校验位以及APDU的通信结构中提取出来，所 述APDU由两个字节的长度字段和APDU命令/响应组成，所述长度字段定义为APDU长度加 2。</p>
    <p>[0101]	传统的SD卡一般没有CPU处理器，为实现本发明需要支持CPU或未处理器完成相 应的功能。为完成发明在SD卡上增加应用处理器，SD卡侧的硬件功能框图如图5所示。</p>
    <p>[0102]	下面结合附图对技术方案的实施作进一步的详细描述。</p>
    <p>[0103]	本实施例以移动终端为主控设备，图6为本发明实施例SD卡与主控设备之间的数 据交互系统结构示意图。</p>
    <p>[0104]	本实施例中，移动终端支持网络浏览器、HTTP协议、TCP/IP、BIP协议和APDU协议。 但BIP协议、APDU协议一般针对智能卡（如SIM卡），其低层协议为IS07816接口。</p>
    <p>[0105]	为实现本发明，且使移动终端改动最小。本实施例扩展移动终端APDU模块，增加SD卡传输模块以及APDU复用功能。</p>
    <p>[0106]	本地地址（Iocalhost) 127. 0. 0. 1被主控设备上的HTTP应用来寻址BIP网关。访 问Smart Card Web Server地址使用的是本地地址127. 0. 0. 1，及特定端口 3516。不同的 应用可以使用不同的端口。</p>
    <p>[0107]	本发明可以采用端口定义的方式来区分智能卡与SD卡。如可以将SD卡端口定义 为3517，从而手机用户只需要在网络浏览器上输入http://127. 0. 0. 1 ：3517就能访问SD卡 里的相关应用了。</p>
    <p>[0108]	SD卡传输模块定义基于SD卡APDU的通信结构，为移动终端与SD卡的通信协议， 其中APDU嵌在该通信格式中。</p>
    <p>[0109]	移动终端上的SD卡一般采用Micro SD卡。本实施例的Micro SD卡不仅包括传 统的存储及安全功能还有新增的SCWS业务。因为传统的SD卡一般没有CPU处理器，为实 现本发明需要支持CPU或未处理器完成相应的功能。本实施例采用智能SD卡。</p>
    <p>[0110]	在智能SD卡里嵌入了一个网络服务器，并提供了相应应用。通过URL标识的SD 卡上的应用可以被网络浏览器触发。应用可以执行一种特殊任务也可以同步的创建内容并 返回网络浏览器。页面包含了应用的列表，用户打开网络浏览器，访问这个页面就可以看到 所有存储在卡内应用，当用户选择了某个应用的超级链接，就可以进入到该应用的二级管 理页面。二级管理页面列举了应用可能的操作，用户继续点击页面上的链接，就可完成应用 之类的管理操作。</p>
    <p>[0111]	本实施例中，BIP支持远程下载，通过Open Channel参数选择支持BIP客户端模 式。即SD卡可以作为客户端进行访问远端服务器，完成远程下载功能。</p>
    <p>[0112]	本发明通过在SD卡上实现SCWS功能。这种网页浏览的模式可以使信息交互变得 更加简单。SCWS既充分利用了终端网络浏览器强大的用户交互能力无需额外开发独立的 UI界面，又充分利用HTTP、TCP/IP协议栈的通讯能力，减少了终端和SD卡在应用层数据交 互的复杂性。为SD卡的业务推广提供了广阔的空间。</p>
    <p>[0113]	以上所述，仅为本发明的较佳实施例而已，并非用于限定本发明的保护范围。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101010927A?cl=zh">CN101010927A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2005年6月10日</td><td class="patent-data-table-td patent-date-value">2007年8月1日</td><td class="patent-data-table-td ">雅斯拓股份有限公司</td><td class="patent-data-table-td ">用于sim和终端之间的通信的协议转换“载体无关协议”－tcp/ip</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101273553A?cl=zh">CN101273553A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2006年9月25日</td><td class="patent-data-table-td patent-date-value">2008年9月24日</td><td class="patent-data-table-td ">日本电气株式会社</td><td class="patent-data-table-td ">移动无线电通信设备及管理该设备的连接状态的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101600263A?cl=zh">CN101600263A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年6月30日</td><td class="patent-data-table-td patent-date-value">2009年12月9日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">数据传输方法及终端</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101655903A?cl=zh">CN101655903A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2001年8月1日</td><td class="patent-data-table-td patent-date-value">2010年2月24日</td><td class="patent-data-table-td ">三因迪斯克公司</td><td class="patent-data-table-td ">电子系统中对带有不同接口的小型电子电路卡的使用</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20090119364">US20090119364</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年11月7日</td><td class="patent-data-table-td patent-date-value">2009年5月7日</td><td class="patent-data-table-td ">Oberthur Technologies</td><td class="patent-data-table-td ">Method and system for exchange of data between remote servers</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2009116731A2?cl=zh">WO2009116731A2</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年2月26日</td><td class="patent-data-table-td patent-date-value">2009年9月24日</td><td class="patent-data-table-td ">Sk Telecom Co., Ltd.</td><td class="patent-data-table-td ">&#50948;&#52824; &#44592;&#48152; &#49436;&#48708;&#49828;&#47484; &#51228;&#44277;&#54616;&#44592; &#50948;&#54620; &#48169;&#48277; &#48143; &#49828;&#47560;&#53944; &#52852;&#46300;</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102647438A?cl=zh">CN102647438A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月16日</td><td class="patent-data-table-td patent-date-value">2012年8月22日</td><td class="patent-data-table-td ">株式会社东芝</td><td class="patent-data-table-td ">主机可容易进行数据收发的存储系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102647438B?cl=zh">CN102647438B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月16日</td><td class="patent-data-table-td patent-date-value">2015年2月18日</td><td class="patent-data-table-td ">株式会社 东芝</td><td class="patent-data-table-td ">主机可容易进行数据收发的存储系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103024087A?cl=zh">CN103024087A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月22日</td><td class="patent-data-table-td patent-date-value">2013年4月3日</td><td class="patent-data-table-td ">中国银联股份有限公司</td><td class="patent-data-table-td ">同时支持大容量存储和以太网通信的系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103413562A?cl=zh">CN103413562A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2013年8月9日</td><td class="patent-data-table-td patent-date-value">2013年11月27日</td><td class="patent-data-table-td ">珠海市杰理科技有限公司</td><td class="patent-data-table-td ">无线音频适配器及音频播放设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN103477333A?cl=zh">CN103477333A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月16日</td><td class="patent-data-table-td patent-date-value">2013年12月25日</td><td class="patent-data-table-td ">株式会社东芝</td><td class="patent-data-table-td ">能够控制无线通信功能的存储器系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013041060A1?cl=zh">WO2013041060A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年9月24日</td><td class="patent-data-table-td patent-date-value">2013年3月28日</td><td class="patent-data-table-td ">China Unionpay Co., Ltd.</td><td class="patent-data-table-td ">同时支持大容量存储和以太网通信的系统及方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2013152501A1?cl=zh">WO2013152501A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年4月13日</td><td class="patent-data-table-td patent-date-value">2013年10月17日</td><td class="patent-data-table-td ">Phytrex Technology Corporation</td><td class="patent-data-table-td ">移动通讯装置、信号处理单元及信息处理方法</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=ei2BBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04W0092080000">H04W92/08</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=ei2BBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029080000">H04L29/08</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2010年11月24日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2012年5月9日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/359a41ccc95f3f10b929/CN101895572A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8Dsd%E5%8D%A1%E4%B8%8E%E4%B8%BB%E6%8E%A7%E8%AE%BE%E5%A4%87%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0.pdf?id=ei2BBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3KGyxv-HMIdXNE72sqWvov_2Tibw"},"sample_url":"https://www.google.com/patents/reader?id=ei2BBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>