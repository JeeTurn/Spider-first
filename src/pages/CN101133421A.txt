<!DOCTYPE html><html><head><title>专利 CN101133421A - 用于运行时刻用户帐户创建操作的方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="用于运行时刻用户帐户创建操作的方法"><meta name="DC.contributor" content="伊万&#183;M.&#183;米尔曼" scheme="inventor"><meta name="DC.contributor" content="希泽尔&#183;M.&#183;辛顿" scheme="inventor"><meta name="DC.contributor" content="文卡特&#183;拉格哈万" scheme="inventor"><meta name="DC.contributor" content="沙恩&#183;B.&#183;维登" scheme="inventor"><meta name="DC.contributor" content="国际商业机器公司" scheme="assignee"><meta name="DC.date" content="2006-3-15" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供了一种支持联盟计算环境内交互的不同企业的计算机系统的方法、系统、设备和计算机程序产品。即便用户在启动单点登录操作前未在联盟伙伴处建立用户帐户，也可在联盟伙伴的计算系统处为用户启动联盟单点登录操作。例如，身份提供方在试图为用户获得对受控资源的访问时可启动在服务提供方处的单点登录操作。当服务提供方识别出对于允许通过身份提供方进行单点登录操作的用户它不具有链接用户帐户时，服务提供方创建本地用户帐户。服务提供方也可根据需要从身份提供方拉取用户属性，以执行用户帐户创建操作。"><meta name="DC.date" content="2008-2-27"><meta name="citation_patent_publication_number" content="CN:101133421:A"><meta name="citation_patent_application_number" content="CN:200680007058"><link rel="canonical" href="https://www.google.com/patents/CN101133421A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101133421A?cl=zh"/><meta name="title" content="专利 CN101133421A - 用于运行时刻用户帐户创建操作的方法"/><meta name="description" content="本发明提供了一种支持联盟计算环境内交互的不同企业的计算机系统的方法、系统、设备和计算机程序产品。即便用户在启动单点登录操作前未在联盟伙伴处建立用户帐户，也可在联盟伙伴的计算系统处为用户启动联盟单点登录操作。例如，身份提供方在试图为用户获得对受控资源的访问时可启动在服务提供方处的单点登录操作。当服务提供方识别出对于允许通过身份提供方进行单点登录操作的用户它不具有链接用户帐户时，服务提供方创建本地用户帐户。服务提供方也可根据需要从身份提供方拉取用户属性，以执行用户帐户创建操作。"/><meta property="og:title" content="专利 CN101133421A - 用于运行时刻用户帐户创建操作的方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101133421A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101133421A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=zr1aBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101133421A&amp;usg=AFQjCNGECCpEfDEeW2fDW5DtC-RDjqYwDQ" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/27dc3b5cee57166915a4/CN101133421A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/27dc3b5cee57166915a4/CN101133421A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101133421A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101133421A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101133421A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN100568256C?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101133421A?cl=zh" style="display:none"><span itemprop="description">本发明提供了一种支持联盟计算环境内交互的不同企业的计算机系统的方法、系统、设备和计算机程序产品。即便用户在启动单点登录操作前未在联盟伙伴处建立用户帐户，也可在联盟伙伴的计算系统处为用户启动联盟单点登录...</span><span itemprop="url">https://www.google.com/patents/CN101133421A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101133421A - 用于运行时刻用户帐户创建操作的方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101133421A - 用于运行时刻用户帐户创建操作的方法" title="专利 CN101133421A - 用于运行时刻用户帐户创建操作的方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101133421 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200680007058</td></tr><tr><td class="patent-bibdata-heading"> 专利合作条约 (PCT) 编号</td><td class="single-patent-bibdata">PCT/EP2006/060762</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2008年2月27日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2006年3月15日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2005年4月1日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN100568256C?hl=zh-CN&amp;cl=zh">CN100568256C</a>, </span><span class="patent-bibdata-value"><a href="/patents/EP1864240A1?hl=zh-CN&amp;cl=zh">EP1864240A1</a>, </span><span class="patent-bibdata-value"><a href="/patents/US7631346?hl=zh-CN&amp;cl=zh">US7631346</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20060236382?hl=zh-CN&amp;cl=zh">US20060236382</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2006103176A1?hl=zh-CN&amp;cl=zh">WO2006103176A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200680007058.2, </span><span class="patent-bibdata-value">CN 101133421 A, </span><span class="patent-bibdata-value">CN 101133421A, </span><span class="patent-bibdata-value">CN 200680007058, </span><span class="patent-bibdata-value">CN-A-101133421, </span><span class="patent-bibdata-value">CN101133421 A, </span><span class="patent-bibdata-value">CN101133421A, </span><span class="patent-bibdata-value">CN200680007058, </span><span class="patent-bibdata-value">CN200680007058.2, </span><span class="patent-bibdata-value">PCT/2006/60762, </span><span class="patent-bibdata-value">PCT/EP/2006/060762, </span><span class="patent-bibdata-value">PCT/EP/2006/60762, </span><span class="patent-bibdata-value">PCT/EP/6/060762, </span><span class="patent-bibdata-value">PCT/EP/6/60762, </span><span class="patent-bibdata-value">PCT/EP2006/060762, </span><span class="patent-bibdata-value">PCT/EP2006/60762, </span><span class="patent-bibdata-value">PCT/EP2006060762, </span><span class="patent-bibdata-value">PCT/EP200660762, </span><span class="patent-bibdata-value">PCT/EP6/060762, </span><span class="patent-bibdata-value">PCT/EP6/60762, </span><span class="patent-bibdata-value">PCT/EP6060762, </span><span class="patent-bibdata-value">PCT/EP660762</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E4%BC%8A%E4%B8%87%C2%B7M.%C2%B7%E7%B1%B3%E5%B0%94%E6%9B%BC%22">伊万&#183;M.&#183;米尔曼</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%B8%8C%E6%B3%BD%E5%B0%94%C2%B7M.%C2%B7%E8%BE%9B%E9%A1%BF%22">希泽尔&#183;M.&#183;辛顿</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%96%87%E5%8D%A1%E7%89%B9%C2%B7%E6%8B%89%E6%A0%BC%E5%93%88%E4%B8%87%22">文卡特&#183;拉格哈万</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%B2%99%E6%81%A9%C2%B7B.%C2%B7%E7%BB%B4%E7%99%BB%22">沙恩&#183;B.&#183;维登</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%9B%BD%E9%99%85%E5%95%86%E4%B8%9A%E6%9C%BA%E5%99%A8%E5%85%AC%E5%8F%B8%22">国际商业机器公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101133421A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101133421A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101133421A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (5),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=zr1aBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200680007058&amp;usg=AFQjCNEHUKNFWFR_fHvs1EXbPOVFw586Fg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=zr1aBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101133421A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNHHEDrTx4FJGrCbrIaVz2xF-jLk6g"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT70504852" lang="ZH" load-source="patent-office">用于运行时刻用户帐户创建操作的方法</invention-title>
      </span><br><span class="patent-number">CN 101133421 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA38274539" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供了一种支持联盟计算环境内交互的不同企业的计算机系统的方法、系统、设备和计算机程序产品。即便用户在启动单点登录操作前未在联盟伙伴处建立用户帐户，也可在联盟伙伴的计算系统处为用户启动联盟单点登录操作。例如，身份提供方在试图为用户获得对受控资源的访问时可启动在服务提供方处的单点登录操作。当服务提供方识别出对于允许通过身份提供方进行单点登录操作的用户它不具有链接用户帐户时，服务提供方创建本地用户帐户。服务提供方也可根据需要从身份提供方拉取用户属性，以执行用户帐户创建操作。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(21)</span></span></div><div class="patent-text"><div mxw-id="PCLM5757011" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种用于在分布式数据处理系统内管理用户认证的方法，其中，第一和第二系统在联盟计算环境内进行交互，且支持单点登录操作，以提供对保护资源的访问，所述方法包括：    代表用户触发单点登录操作，以便获得对第二系统所托管的保护资源的访问，其中，第二系统需要该用户的用户帐户以便在提供对保护资源的访问之前完成单点登录操作；    在第二系统处从第一系统接收与用户相关联的标识符；以及    在触发单点登录操作之后，但是当在第二系统处生成对访问保护资源的响应之前，至少部分地基于与用户相关联的接收的标识符，在第二系统处为该用户创建用户帐户，其中，所创建的用户帐户代表用户支持第一系统与第二系统之间的单点登录操作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2. 根据权利要求l的方法，还包括：在触发单点登录操作之后，在第一系统处为该用户创建别名标识符。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3. 根据权利要求1或2的方法，还包括：从第二系统向第一系统发送消息，以将该用户的认证信息从第一 系统拉取到第二系统，以便在第二系统处为该用户触发单点登录操作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4. 根据前面任何权利要求的方法，还包括：在第二系统处从第一 系统接收消息，以将该用户的认证信息从第 一系统推送到第二系统，以便在第二系统处为用户触发单点登录操作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5. 根据前面任何权利要求的方法，还包括： 响应于在第二系统处确定第二系统不具有用于在第二系统处为用户完成用户帐户创建的足够用户属性信息，从第二系统向第一系统 发送用于检索用户属性信息的请求消息；以及在第二系统处，从第一系统接收包含有由第二系统使用以便在第 二系统处为用户完成用户帐户创建的用户属性信息的响应消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6. 根据权利要求5的方法，还包括：执行初步用户帐户创建操作，以便在检索该用户的用户属性信息之前开始该用户的用户帐户的创建；以及执行最后用户帐户创建操作，以便在检索用户的用户属性信息之 后完成用户的用户帐户的创建。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7. 根据权利要求5或6的方法，还包括： 由第一系统从第四系统检索用户属性信息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8. 根据前面任何权利要求的方法，其中，第一系统支持身份提 供方，第二系统支持服务提供方。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9. 根据权利要求8的方法，还包括：在接收与用户相关联的标识符之前，由服务提供方提示用户提供 或选择身份提供方的标识符。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10. 根据先前任何权利要求的方法，还包括： 响应于在第二系统处确定第二系统不具有用于在第二系统处为用户完成用户帐户创建的足够用户属性信息，向第四系统发送用于检 索用户属性信息的请求消息；以及在第二系统处，从第四系统接收包含有由第二系统使用以便在第 二系统处为用户完成用户帐户创建的用户属性信息的响应消息。</div>
    </div>
    </div> <div class="claim"> <div num="11" class="claim">
      <div class="claim-text">11. 一种用于在数据处理系统内管理用户认证的设备，其中，第 一和第二系统在联盟计算环境内进行交互，且支持单点登录操作，以提供对保护资源的访问，所述设备包括：用于代表用户触发单点登录操作，以便获得对第二系统所托管的 保护资源的访问的装置，其中，第二系统需要该用户的用户帐户以便 在提供对保护资源的访问之前完成单点登录操作；用于在第二系统处从第 一 系统接收与用户相关联的标识符的装 置；以及用于在触发单点登录操作之后，但是当在第二系统处生成对访问 保护资源的响应之前，至少部分地基于与用户相关联的接收的标识符， 在第二系统处为该用户创建用户帐户的装置，其中，所创建的用户帐 户代表用户支持第 一 系统与第二系统之间的单点登录操作。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12. 根据权利要求ll的设备，还包括：用于在触发单点登录操作之后，在第一系统处为该用户创建别名 标识符的装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13. 根据权利要求11或12的设备，还包括：用于从第二系统向第一 系统发送消息，以将该用户的认证信息从 第一系统拉取到第二系统，以便在第二系统处为该用户触发单点登录 操作的装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14. 根据权利要求11至13中任何权利要求的设备，还包括：用于在第二系统处从第 一 系统接收消息，以将该用户的认证信息 从第一系统推送到第二系统，以便在第二系统处为用户触发单点登录 操作的装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15. 根据权利要求11至14中任何权利要求的设备，还包括： 用于响应于在第二系统处确定第二系统不具有用于在笫二系统处为用户完成用户帐户创建的足够用户属性信息，从第二系统向第一 系统发送用于检索用户属性信息的请求消息的装置；以及用于在第二系统处，从第一系统接收包含有由第二系统使用以便 在第二系统处为用户完成用户帐户创建的用户属性信息的响应消息的 装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="16" class="claim">
      <div class="claim-text">16. 根据权利要求15的设备，还包括：用于执行初步用户帐户创建操作，以便在检索该用户的用户属性 信息之前开始该用户的用户帐户的创建的装置；以及用于执行最后用户帐户创建操作，以便在检索用户的用户属性信 息之后完成用户的用户帐户的创建的装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17. 才艮据权利要求15或16的设备，还包括： 用于通过第一系统从第四系统检索用户属性信息的装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18. 根据权利要求11至17中任何权利要求的设备，其中，第一系 统支持身份提供方，第二系统支持服务提供方。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19. 根据权利要求18的设备，还包括：用于在接收与用户相关联的标识符之前，由服务提供方提示用户提供或选择身份提供方的标识符的装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="20" class="claim">
      <div class="claim-text">20. 根据权利要求11至19中任何权利要求的设备，还包括： 响应于在第二系统处确定第二系统不具有用于在第二系统处为用户完成用户帐户创建的足够用户属性信息，向第四系统发送用于检 索用户属性信息的请求消息的装置；以及用于在第二系统处，从第四系统接收包含有由第二系统使用以便 在第二系统处为用户完成用户帐户创建的用户属性信息的响应消息的 响应消息。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="21" class="claim">
      <div class="claim-text">21. &#8212;种计算机程序，包括当在计算机上运行所述程序时适于执 行权利要求1至10中任何权利要求的所有步骤的程序代码装置。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES10465293" lang="ZH" load-source="patent-office" class="description">
    <p>用于运行时刻用户帐户创建操作的方法 技术领域</p>
    <p>本发明涉及改进型数据处理系统，特别是，涉及用于多计算机数 据传输的方法和设备。更具体来说，本发明涉及联网计算机系统。</p>
    <p>背景技术</p>
    <p>企业通常希望在各种网络（包括因特网）上以用户友好方式对授 权用户提供对保护资源的安全访问。尽管提供安全认证机制减小了对 保护资源进行未授权访问的风险，但这些认证机制可能变成访问保护 资源的障碍。用户通常期望能够从与一个应用的交互转变到与另一应 用进行交互，而不涉及对支持这些应用的每个具体系统进行保护的认 证障碍。</p>
    <p>当用户变得更为老练时，他们期望计算机系统协调其动作，以便 减少用户的负担。用户可能设想， 一旦他或她经过了某些计算机系统 的认证，认证应在用户工作会话期间都有效，或者至少对特定时期有 效，而不涉及用户几乎看不到的各种计算机系体结构边界。企业通常 试图在其所部署系统的操作特性中满足这些期望，这不仅能宽慰用户， 而且能提高用户效率，而无论用户效率是涉及雇员生产力还是客户满 意度。</p>
    <p>更具体而言，利用许多应用具有可通过公共浏览器进行访问的</p>
    <p>Web用户界面的现有计算环境，用户期望具有更大程度的用户友好性， 以及较低或^艮少从一 个Web应用移到另一 Web应用的障碍。在此情形 中，用户期望能够从与 一个因特网域上应用的交互跳到与另 一域上应 用的交互，而且不涉及保护每个特定域的认证障碍。然而，即便许多 系统通过易于使用、基于Web的界面提供安全认证，用户仍可能不得 不考虑使用户在一组域上的访问受到妨碍的多个认证过程。使用户在</p>
    <p>给定时帧中进行多个认证过程可极大影响用户效率。</p>
    <p>例如，已使用各种技术减少用户以及计算机系统管理员的认证负</p>
    <p>担。通常将这些技术描述为"单点登录"（sso)过程，这是由于它</p>
    <p>们具有共同的目的：当用户完成登录操作（即，完成认证）后，用户 随后便无需执行另一认证操作。因此，该目标是，用户在特定用户会 话期间仅需完成一次认证处理。</p>
    <p>为了减小用户管理成本和提高企业之间的互操作性，创建了联盟 (federated)计算空间。联盟是符合某些互操作性标准的企业的申〉耦 合关联；联盟提供了在这些企业间关于联盟内用户的某些计算操作的 信任机制。例如，联盟伙伴可作为用户的归属域或身份提供方。在同</p>
    <p>初级管理，例如，接i:由用户身份提供方提供的单点登录令牌。、</p>
    <p>随着企业支持联盟企业交互，这些企业应提供反映两个企业间合 作增强的用户体验。如上所述，用户可对作为身份提供方的一方进行 认证，然后，单点登录到作为服务提供方的联盟企业伙伴。结合单点 登录功能，也应支持附加用户生命周期功能，例如，单点退出 (single-sign-off)、用户服务供应和帐户链接/解除链接。</p>
    <p>单点登录解决方案要求用户在身份提供方和服务提供方处可以 以某种方式或其他方式进行识别；身份提供方需能够对用户进行识别 和认证，服务提供方需能够响应单点登录请求，基于对用户的某种形 式的断定，对用户进行识别。各种现有技术的单点登录解决方案，例 如，在自由联盟ID-FF规范中描述的那些方案，需要用户在身份提供 方和服务提供方处具有可认证帐户，以此作为联盟单点登录操作的先 决条件。某些联盟方案支持在域上的先验用户帐户创建事件，以用于 建立这些帐户，从而满足用户在身份提供方和服务提供方处具有可认 证帐户以作为联盟单点操作先决条件的要求。尽管某些联盟解决方案 提供联盟用户生命周期管理操作的健壮集，例如，用户帐户创建、用 户帐户管理、用户属性管理、帐户暂停和帐户删除，然而这些联盟管 理系统不提供适于某些联盟伙伴或某些联盟目的的轻量解决方案。</p>
    <p>因此，提供使企业能够以无需大量先验处理的轻量方式向联盟计 算环境中的用户提供广泛的单点登录体验的方法和系统会是有利的。</p>
    <p>发明内容</p>
    <p>本发明提供了一种支持在联盟计算环境内交互的不同企业的计 算机系统的方法、系统、设备和计算机程序产品。即便用户在启动单 点登录操作前未在联盟伙伴处建立用户帐户，也可在联盟伙伴的计算 系统处为用户启动联盟单点登录操作。例如，身份提供方在试图代表 用户获得对控制资源的访问时能够启动在服务提供方处的单点登录操 作。当服务提供方识别出它不具有来自身份提供方的针对该用户、允 许进行单点登录操作的链接用户帐户时，服务提供方至少部分地基于 来自身份提供方的信息创建本地用户帐户。服务提供方也能够根据需 要从身份提供方拉取用户属性，以执行用户帐户创建操作。</p>
    <p>优选地，采用前向信道（front-channel)信息检索机制获得用户 属性信息。更优选地，在前向信道信息检索机制中使用超文本传输协 议（HTTP)。</p>
    <p>优选是，采用后向信道（back-channel)信息检索机制获得用户 属性信息。更优选地，在后向信道信息检索机制中使用简单对象访问 协议（SOAP )。</p>
    <p>附图说明</p>
    <p>下面，将结合附图，参照本发明的优选实施例，仅以示例性方式， 描述本发明，在附图中：</p>
    <p>图1A表示数据处理系统的典型网络，每个数据处理系统均可实现 本发明；</p>
    <p>图1B表示在可实现本发明的数据处理系统内可使用的典型的计 算机体系结构；</p>
    <p>图1C的数据流图表示，当客户机试图访问服务器处的保护资源 时，可使用的典型认证处理；</p>
    <p>图lD的网络图表示其中可实现本发明的典型Web环境； 图1E的框图表示可能需要自用户进行多个认证操作的典型在线 事务示例；</p>
    <p>图2的框图说明了关于用户启动的事务的联盟环境术语，其中， 用户对第一个联盟企业启动事务，作为响应，启动联盟环境内下游实 体处的动作；</p>
    <p>图3的框图说明了，在给定域处先前存在的数据处理系统与可用 于支持本发明实施例的某些联盟体系结构部件进行的集成；</p>
    <p>图4的框图说明了可使用联盟体系结构内某些部件建立信任关系 以支持本发明实现的方式示例；</p>
    <p>图5的框图说明了根据能够支持本发明的示例性联盟体系结构， 使用信任代理和信任中间方的联盟域之间的信任关系的示例性集合；</p>
    <p>图6的框图说明了支持联盟单点登录操作的联盟环境；</p>
    <p>图7的框图说明了在联盟域中用于实现联盟用户生命周期管理功 能以便支持本发明的某些部件；</p>
    <p>图8的数据流图显示出，由联盟身份提供方启动以便获得对联盟 服务提供方处保护资源的访问的、基于HTTP重定向的典型现有技术 单点登录操作；</p>
    <p>图9A-9B的数据流图表示，根据本发明的实施例，当在联盟服务 提供方处执行运行时刻链接用户帐户创建操作时，由联盟身份提供方 启动以获得对联盟服务提供方处保护资源的访问的、基于HTTP重定 向的单点登录操作；</p>
    <p>图9C-9E的数据流图表示，根据本发明的实施例，由联盟身份提 供方启动，以便通过用于由联盟服务提供方获得用户属性的可选方法， 获得对联盟服务提供方处保护资源的访问的、基于HTTP重定向的单 点登录操作；</p>
    <p>图10的流程图表示，在由身份提供方启动的单点登录操作期间， 在服务提供方处执行运行时刻链接用户帐户创建操作的更详细的处 理；</p>
    <p>图11A的数据流图显示出，根据本发明的实施例，当在联盟月良务 提供方处执行运行时刻链接用户帐户创建操作时，由联盟服务提供方 启动以允许对联盟服务提供方处的保护资源进行访问的、基于HTTP 重定向的拉取型单点登录操作；以及图11B-11D所示一组数据流图表示，根据本发明的实施例，当在 联盟服务提供方处执行运行时刻链接用户帐户创建操作时，由联盟服 务提供方启动，以通过对来自联盟身份提供方的用户属性信息的附加 检索，允许对联盟服务提供方处的保护资源进行访问的、基于HTTP 重定向的拉取型单点登录操作。具体实施方式一般而言，可包括或涉及本发明的设备包括广泛各种数据处理技 术。因此，作为背景，在更详细描述本发明之前，先描述在分布式数 据处理系统内硬件和软件部件的典型组织结构。现参照附图，图1A表示数据处理系统的典型网络，每个数据处理 系统均可实现本发明。分布式数据处理系统100包括网络101，网络IOI 是可用于在分布式数据处理系统100内连接在一起的各种设备和计算 机之间提供通信链路的介质。网络101可包括永久连接，例如，有线或 光缆，或通过电话或无线通信构成的临时连接。在所示示例中，服务 器102和服务器103与存储单元104&#8212;起与网络101相连。此外，客户机 105-107也与网络101相连。客户机105-107和服务器102-103可由各种计 算设备（例如，大型机、个人计算机、个人数字助理（PDA)等）代 表。分布式数据处理系统100可包括附加服务器、客户机、路由器、其 他设备，以及未示出的对等体系结构。在所示示例中，分布式数据处理系统100可包括因特网，其中网 络101表示彼此使用各种协议进行通信的网络和网关的世界集合，这些 协议例如为LDAP (轻量目录访问协议）、TCP/IP (传输控制协议/ 网际协议）、HTTP (超文本传输协议）等。当然，分布式数据处理 系统100也可包括许多不同类型的网络，例如，内部网、局域网（LAN)，</p>
    <p>或广域网（WAN)。例如，服务器102直接支持客户机109和网络110， 网络110包括无线通信链路。支持网络的电话111通过无线链路112与网 络110相连，PDA 113通过无线链路114与网络110相连。通过使用合适 的技术（例如，蓝牙无线技术）创建所谓的个人区域网或个人自组织 网络，电话111和PDA 113也能够通过无线链路115在它们之间直接传 输数据。&#37318;用相似方式，PDA 113能够通过无线通信链路116向PDA 107 传输数据。本发明可在各种硬件平台上和软件环境中实现。图1A意在作为异 构计算环境的示例，而并非作为本发明的体系结构限制。现参照图1B，该图表示在可实现本发明的数据处理系统（例如， 如图1A所示）内可使用的典型的计算机体系结构。数据处理系统120 包含有与内部系统总线123相连的一个或多个中央处理单元（CPU) 122，内部系统总线将随机存取存储器（RAM) 124、只读存储器126 和输出/输出适配器128互连，输入/输出适配器128支持多种I/0设备， 例如，打印机130、盘单元132，或未示出的其他i殳备，例如，音频输 ,出系统等。系统总线123也连接用于提供对通信链路136的访问的通信 适配器134。用户接口适配器148连接多种用户设备，例如，键盘140 和鼠标142,或未示出的其他设备，例如，触摸屏、记录笔、麦克风等。 显示适配器144将系统总线123连接至显示设备146。本领域普通技术人员应该理解，如图1B所示硬件可根据系统实现 方式而有所变化。例如，系统可具有一个或多个处理器，例如，基于 Intel Pentium的处理器和数字信号处理器（DSP)，以及一种或各种 易失性和非易失性存储器。（Intel、 Intel标志、Intel Inside、 Intel Inside 标志、Intel Centrino、 Intel Centrino标志、Celeron、 Intel Xeon、 Intel SpeedStep、 Itanium和Penthim是Intel^^司或其下属&#20034;〉司在美国或其他 国家的商标或注册商标。）除图1B所示硬件外，还可使用其他外围设 备，或以此取代图1B所示硬件。所示示例并不意在表示对本发明的体 系结构限制。除能够在各种硬件平台上实现外，本发明还可实现在各种软件环</p>
    <p>境中。可使用常用的操作系统对每个数据处理系统内的程序执行进行控制。例如， 一个设备可运行Unix操作系统，而另一设备包含简单Java 运行环境。（Java和所有基于Java的商标是Sun Microsystems公司在 美国，其他国家，或二者的注册商标。）示意性计算机平台可包括浏 览器，浏览器是众所周知的软件应用，用于访问各种格式的超文本文 档，例如，图形文件、字处理文件、可扩展标记语言（XML)、超文 本标语言（HTML)、手持式设备标记语言（HDML)、无线标记语 言（WML)，以及各种其他格式和类型的文件。还应注意到，可考 虑使如图1A所示分布式数据处理系统完全能够支持各种对等子网和 对等服务。现参照图1C，所示数据流图表示出，当客户机试图访问服务器处 的保护资源时，可使用的典型认证处理。如图所示，在客户机工作站 150处的用户通过在客户机工作站上执行的用户Web浏览器，试图通过 计算机网络访问服务器151上的保护资源。保护资源或受控资源是访问 受到控制或限制的资源（应用程序、对象、文档、网页、文件、可执 行代码，或其他计算资源、通信型资源等）。保护资源通过统一资源 定位符（URL)，或更普遍而言，统一资源标识符（URI)进行标识， 统一资源标识符能够仅由经认证和/或授权的用户使用。计算机网络可 为因特网、内部网，或其他网络，如图1A或图1B所示，服务器可为 Web应用服务器（WAS)、服务器应用、servlet进程等。当用户请求服务器端保护资源（例如，在域"ibm.com"内的Web 页面）时，启动该处理（步骤152)。术语"服务器端"和"客户机端" 分别表示在服务器或客户机处的功能或实体。Web浏览器（或相关的 应用或applet)生成发送到正托管域"ibm.com"的Web服务器的HTTP 请求（步骤153)。应将术语"请求"和"响应"理解为包括适于传输 特定操作中涉及的信息（例如，消息、通信协议信息，或其他相关信 息）的数据格式化。服务器确定它不具有用于客户机的活动会话（步骤154)，从而， 服务器启动和完成在服务器与客户机之间的SSL (安全套接字层）会200680007058.2</p>
    <p>话的建立（步骤155)，这需要在客户机与服务器之间进行多次信息传 输。建立SSL会话之后，在SSL会话内传输随后的通信消息；由于在 SSL会话内进行加密通信，任何保密信息都保证安全。然而，服务器需要在允许用户访问保护资源之前确定用户的身 份，从而，服务器需通过向客户机发送某种类型的认证询问，使用户 执行认证处理（步骤156)。认证询问可采用各种格式，例如，HTML 形式。然后，用户提供请求或所需的信息（步骤157)，例如，用户名 或其他类型用户标识符，以及相关密码或其他形式的保密信息。将认证响应信息发送到服务器（步骤158)，于此，例如通过检 索先前提交的注册信息并将提供的认证信息与用户存储的信息进行匹 配，服务器对用户或客户机进行认证（步骤159 )。假设认证是成功的， 则为经过认证的用户或客户机建立活动会话。服务器为客户机建立会 话标识符，在会话内来自客户机的任何随后请求消息将伴有会话标识 符。然后，服务器检索最初请求的Web网页，并向客户机发送HTTP 响应消息（步骤160)，从而满足用户关于保护资源的最初请求。于此， 用户可通过点击浏览器窗口内的超文本链接来请求在"ibm.com"内 的另 一 网页（步骤161)，浏览器向服务器发送另一HTTP请求消息（步 骤162)。于此，服务器识别出用户具有活动会话（步骤163)，这是 由于在HTTP请求消息中将用户的会话标识符返回到服务器，服务器 在另一HTTP响应消息中将请求的Web网页向回发送到客户机（步骤 164)。尽管图1C表示出典型的现有技术处理，但应该注意，也可示 出其他可选会话状态管理技术，例如，URL重写入或使用cookie来识 别具有活动会话的用户，这可包括使用用于提供认证证据的同一 cookie 。现参照图1D，该图示出其中可实现本发明的典型Web环境。在该 环境中，在客户机171处浏览器170的用户希望访问在DNS域173中Web 应用服务器172上或在DNS域175中Web应用服务器174上的保护资源。按照与图1C所示相似的方式，用户可请求在许多域的其中 一个域 处的保护资源。与图1C相比，图1C在特定域处仅示出单个服务器，而 图1D所示的每个域具有多个服务器。具体而言，每个域可具有相关认 证服务器176和177。在该示例中，当客户机171发出对在域173处保护资源的请求时， Web应用服务器172确定它不具有对于客户机171的活动会话，它请求 认证服务器176执行与客户机171的适当认证操作。认证服务器176将认 证操作的结果传送到Web应用服务器172。如果对用户（或代表用户的 浏览器170或客户机171)进行成功认证，则Web应用服务器172建立对 于客户机171的会话，并返回请求的保护资源。通常， 一旦用户经由认 证服务器的认证，则可设置cookie，并将其存储在浏览器中的cookie 高速&#32233;存中。图1D仅仅作为示例，表示在多个服务器（特别是用于执 行认证操作的服务器）之间可共享域的处理资源的一种方式。采用相似方式，在客户机171发送关于在域175处保护资源的请求 之后，认证服务器177执行与客户机171的合适认证操作，此后，Web 应用服务器174建立针对客户机171的会话，并返回请求的保护资源。 因此，图1D表示出，客户机171可具有在不同域中的多个并发会话， 也需要完成多个认证操作以建立这些并发会话。现参照图1E，所示框图表示可能需要来自用户的多个认证操作的 典型在线事务的示例。再次参看图1C和图1D,可能需要用户在获得对 控制资源的访问之前完成认证操作，如图1C所示。尽管在图1C中未示 出，然而可在服务器151上部署认证管理器，以检索和利用对用户进行 认证所需的用户信息。如图1D所示，用户可具有在不同域173和175内 的多个当前会话，尽管在图1D中未示出，然而除认证服务器之外或取 代认证服务器，每个域可采用认证管理器。&#37318;用相似方式，图1E还示 出一组域，其中每个域都支持某些类型的认证管理器。图1E示出了用 户在访问需要用户对每个域完成认证操作的多个域时可能遇到的某些 困难。可对用户100在ISP域191处进行注册，ISP域191可支持为完成关 于域191的事务而对用户190进行认证的认证管理器192。ISP域191可以  是提供因特网连接服务、电子邮件服务以及可能的其他电子商务服务的因特网服务提供方（ISP)。或者，ISP域191可以是经常被用户190 访问的因特网门户。同样，域193， 195和197表示典型Web服务提供方。政府域193支 持为完成各种政府相关事务而对用户进行认证的认证管理器194。4艮行 域195支持为完成与在线银行的事务而对用户进行认证的认证管理器 196。电子商务域197支持为完成在线购买而对用户进行认证的认证管 理器198。如先前所述，当用户试图通过访问不同域处的资源而从一个域移 到因特网或万维网内的另一个域时，可使用户经历多个用户认证请求 或要求，这可大大减慢用户在一组域上的进行速度。使用图1E作为示 例性环境，用户190可能忙于与电子商务域197的复杂在线事务，其中， 用户正试图购买在线服务，而且该在线服务受限于至少18岁大且具有 有效驾驶执照、有效信用卡和美国银行帐户的用户。该在线事务可涉 及域191, 193, 195和197。通常，用户或许在参与典型在线事务的每个域内未保持有身份和 /或属性。在该示例中，用户1卯可通过用户的ISP注册他或她的身份， 但为了完成在线事务，还可能需要用户向域193, 195和197进行认证。 如果每个域没有为用户保持身份，则用户的在线事务可能失败。即便 可通过每个域对用户进行认证，但并不保证不同域能够在其之间传输 信息以便完成用户的事务。前面给出了对某些现有技术的简要描述，下面对关于其中本发明 可起到作用的联盟计算机环境的其余附图进行描述。不过，在更详细 描述本发明之前，先引入以下术语。术语术语"实体"或"方"通常指组织、个人，或代表组织、个人或 另一系统而起作用的系统。术语"域"意味着在网络环境内的附加特 性，但术语"实体"、"方"和"域"可互换使用。例如，术语"域"</p>
    <p>还可表示DNS (域名系统）域，或更普遍而言，表示包括各种设备和 作为针对外部实体而言的逻辑单元的应用的数据处理系统。应将术语"请求"和"响应"理解为包括适于传输特定操作中所涉及的信息（例如，消息、通信协议信息或其他相关信息）的数据格 式化。保护资源为访问受到控制或限制的资源（应用、对象、文档、 网页、文件、可执行代码或其他计算资源、通信型资源等）。令牌提供了成功操作的直接见证，它由执行操作的实体引入，例 如，在成功认证操作之后生成的认证令牌。Kerberos令牌是可与本发 明一起使用的认证令牌的一个示例。在Kohl等人的"The Kerberos Network Authentication Service ( V5 ) " (Internet Engineering Task Force (IETF ) Request for Comments ( RFC ) 1510， 90/1993 )中， 可找到关于Kerberos的更多信息。断言提供了某些动作的间接见证。断言可提供身份、认证、属性、 授权决策或其他信息和/或操作的间接见证。通过不是认证服务但收受 (listen to)认证服务的实体，认证断言提供认证的间接见证。安全断言标记语言（SAML)断言是可与本发明一起使用的可能 断言格式的示例。SAML已由结构化信息标准促进组织（OASIS， Organization for the Advancement of Structured Information Standards)发布，OASIS是非盈利性全球协会。在"Assertions and rotocol for the OASIS Security Assertion Marku Language ( SAML )" (Committee Specification 01, 05/31/2002 )中描述SAML如下：安全断言标记语言（SAML)是用于交换安全信息的基于XML 的框架结构。该安全信息按照关于主体的断言的形式进行表示，其中， 主体是在某些安全域中具有身份的实体（个人或计算机）。主体的典 型示例为人，并通过他或她在具体因特网DNS域中的电子邮件地址来 标识。断言可传输关于主体所执行的认证动作、主体属性以及关于是 否允许主体访问特定资源的授权决策的信息。将断言表示为XML结 构，且具有嵌套结构，从而，单个断言可包含有关于认证、授权和属 性的数个不同内部声明。注意，包含认证声明的断言仅仅描述先前发 生的认证动作。断言通过SAML授权机构，即，认证授权机构、属性 授权机构以及策略决策点发出。SAML定义了可被客户机用来向 SAML授权机构请求断言并从其获得响应的协议。可将该协议（由基 于XML的请求和响应消息格式组成）绑定到许多不同的底层通信和传 输协议；SAML目前定义出一个绑定，通过HTTP到SOAP。 SAML授 权机构在创建其响应时，可使用各种信息源，例如，外部策略存储和 在请求中作为输入接收的断言。从而，当客户机一直消耗断言时， S AML授权机构可作为断言的制造者和消耗者。SAML规范表明，断言是提供由发出者作出的一个或多个声明的 信息包。SAML允许发出者作出三个不同种类的断言声明：认证，其 中，在特定时间由特定装置对指定主体进行认证；授权，其中，已准 许或拒绝关于允许指定主体访问指定资源的请求；以及属性，其中， 指定主体与提供的属性相关。如下面将进一步描述的，如有必要，可 将多个断言转换成其他断言格式。认证是对用户提供的或代表用户的一组证书进行验证的处理。通 过对用户知道的某事物、用户具有的某事物或属于用户的某事物（即， 关于用户的某些物理特征）进行验证，来实现认证。用户知道的某事 物可包括共享机密，例如，用户密码，或仅对于用户知道的某事物进 行验证，例如，用户密码密钥。用户具有的事物可包括智能卡或硬件 令牌。关于用户的某些某些物理特征可能包括生物特征输入，例如， 指&#32011;或视网膜图。认证证书是用于各种认证协议中的 一组询问/应答信息。例如，用户名和密码组合是最熟悉的认证证书形式。认证证书的其他形式可 包括各种询问/应答信息、公共密钥基础设施（PKI)证书、智能卡、 生物特征等。认证证书有别于认证断言；由用户通过认证服务器或服务挺交认证证书作为认证协议序列的一部分，且认证断言是关于用户 认证证书被成功提交和验证的声明，随后，在有必要时在实体之间进行传输。</p>
    <p>可包含本发明的计算环境的联盟模型在万维网情形中，用户越来越期望能够从与一个因特网域上应用 的交互跳到与另 一域上另 一应用的交互，且每个特定域之间的信息障 碍最小。用户不想因对于单个事务必须对多个域进行认证而受到困扰。 换而言之，用户期望组织机构应该协作，但用户通常期望域保持其秘 密。此外，用户可能想要对永久性存储私人信息的域进行限制。在许 多企业和组织机构正在公布竟争认证技术的快速演变异构环境中，存 在着这些用户期望。在允许企业为用户提供单点登录体验的联盟模型内，支持本发 明。换而言之，可在联盟、异构环境内实现本发明。作为可从联盟、异构环境获益的事务示例，再次参看图1E，用户190能够向域191进行 认证，然后使域191为事务中可能涉及的每个下游域提供合适的断言。 这些下游域需能够理解和信任认证断言和/或其他类型的断言，即^_在 域191与这些其他下游域之间不存在预建立的断言格式时也如此。除认 识这些断言外，下游域需能够将断言内包含的身份转换成表示特定域 内用户190的身份，即便不存在预建立身份映射关系时也是如此。不过， 应该注意，本发明可应用于各种类型的域，并不限于作为示例性域的 图1E内表示的ISP类型域。在企业通常具有其本身用户注册表并与其自身用户集保持关系 的联盟环境内，支持本发明。每个企业通常具有其自身的对这些用户 进行认证的手段。然而，结合本发明一起使用的联盟方案允许企业以 集体方式协作，以便在一个企业中的用户通过企业在企业联盟中的参 与能够影响（leverage)与企业集的关系。可允许用户对任何联盟企 业处的资源的访问，就好像它们与每个企业都具有直接关系。用户无 需在每个有关企业处进行注册，用户无需经常对他们本身进行识别和 认证。因此，在该联盟环境内，认证方案允许在信息技术的快速演化 异构环境内的单点登录体验。在本发明的情形中，联盟是相协作以便向用户提供单点登录、使 用简便体验的一组不同实体（例如，企业、组织机构、协会等）；与 两企业无需具有用于定义对用户如何转换以及转换什么样信息的直 接、预建立关系的典型单点登录环境相比，联盟环境是不同的。在联 盟环境内，实体提供由其他实体提供的用于处理对用户进行认证、接 受认证断言（例如，认证令牌）的服务，以及提供某些转换形式，用 于将所担保用户的身份转换成在本地实体内理解的身份。联盟&#32233;解了服务提供方的管理负担。针对作为整体的联盟而言，服务提供方能够信赖其信任关系；服务提供方无需管理认证信息，例 如，用户密码信息，这是由于其能够信赖由用户认证归属域或身份提 供方完成的i人证。支持本发明的系统还涉及联盟身份管理系统，该联盟身份管理系 统建立了使松耦合的认证、用户登记、用户简档管理和/或认证服务在 安全域上协作的基础。联盟身份管理允许驻留在相异安全域中的JJ良务 安全合作和协作，即便在底层安全机制和这些相异域处的操作系统平 台存在差异时也是如此。身份提供方与服务提供方如上所述以及后面将更详细地描述的，联盟环境为用户提供了重 要的益处。联盟环境允许用户在第一实体处进行认证，第一实体可作 为发出关于用户在第二实体处使用的认证断言的发出方。然后，用户 通过提供第一实体发出的认证断言，能够访问在不同的第二实体（称 为信赖方）处的保护资源，而不必显式地在第二实体处重新进行认证。 从发出方向信赖方传递的信息采用断言的形式，该断言可包含采用声 明形式的不同类型信息。例如，断言可以是关于用户认证身份的声明， 或者它可以是关于与特定用户相关的用户属性信息的声明。现参照图2，图2的框图表示关于用户启动的事务的联盟环境术 语，其中，用户对第一个联盟企业启动事务，作为响应，启动联盟环 境内下游实体处的动作。图2显示出，对于给定联盟操作，根据联盟内 实体的情形，术语可有所不同。更具体而言，图2表示出，支持本发明 的计算环境支持信任的传递性和认证断言过程的传递性；域或实体能</p>
    <p>够基于其对另一域或另一实体所断言的身份的信任而发出断言。用户202通过对于企业204处的保护资源的请求启动事务。如果用 户202已由企业204进行了认证，或者最终将在事务期间由企业204进行 认证，则对于该联盟会话，可将企业204称为用户的归属域。假设事务 需要企业206进行某种类型的操作，且企业204将断言传输到企业206， 则企业204对于该特定操作而言是发出实体，企业206对于该操作而言 为信赖实体。发出实体发出信赖域使用的断言；发出实体通常但并非必须是用 户的归属域或用户身份提供方。因此，通常由发出方使用典型的认证操作对用户进行认证。然而，可允许发出方先前充当信赖方，从而，它从不同发出方接收了断言。换而言之，由于用户启动的事务可通过联盟环境内的一系列企业而级联进行，接收方可随后作为下游事务的发出方。 一般而言，能够代表用户发出认证断言的任何实体都能够担 当发出实体。信赖实体为从发出实体接收断言的实体。信赖实体能够接受、信 任和理解代表用户的第三方（即，发出实体）发出的断言；信赖实体 的责任通常是使用合适的认证权威机构解释认证断言。信赖实体是信 赖于代表用户或另一实体提供的断言的实体。以此方式，能够使用户 在信赖实体处得到单点登录体验，而无需作为与用户交互会话的一部分由信赖实体提示用户提供用户的认证证书。再次参看图2，假设事务需要其他操作，以便企业206向企业208 传输断言，则企业206作为担当起对于随后或次级事务操作而言的发出 实体的上游实体，企业208作为担当起对于该操作而言的信赖实体的下 游实体；在此情形中，可将企业208视为对最初事务的另一下游实体， 不过，还可仅针对两个实体描述随后事务。如图2所示，联盟实体可作为用户的归属域，它提供关于联盟用 户的身份信息和属性信息。提供身份信息、身份或认证断言或身份服 务的联盟计算环境内的实体可称为身份提供方。在同一联盟内的其他 实体或联盟伙伴可信赖身份提供方对用户的认证证书进行初级管理，例如，接受由用户身份提供方提供的单点登录令牌；可将用户进^f亍认 证处的域称为用户（认证）归属域。身份提供方可以是用户的雇主、 用户的ISP，或某些其他商业实体物理支持的身份提供方。身份提供方是特定类型的服务，其作为服务向联盟计算环境内的 其他实体提供身份信息。对于大多数联盟事务而言，认证断言的发出 方通常作为身份提供方；任何其他实体可区别于身份提供方。可将在 联盟计算环境内提供服务的任何其他实体分类为服务提供方。 一旦用 户向身份提供方进行了认证，则可仅在给定联盟会话或给定联盟事务 期间将联盟内的其他实体或企业视为服务提供方。在某些情形中，在联盟环境内可存在可作为用户的身份提供方的 多个实体。例如，用户可在多个联盟域处具有帐户，每个联盟域都能 够作为用户的身份提供方；这些域不必具有关于其他域或者关于用户 在不同域处身份的信息。尽管有可能在联盟环境内存在可作为身份提供方的多个企业，例 如，由于具有能够生成和验证用户认证证书等等的多个企业，联盟事 务通常仅涉及单个身份提供方。如果仅具有能够对用户进行认证的单 个联盟实体，例如，由于在联盟内有且仅有一个使用户执行联盟登记 或注册操作的实体，则预期该实体将担当起用户的身份提供方，以便 支持在联盟环境中的用户事务。在需要多个服务提供方进行互操作的某些联盟事务内，下游服务 提供方可接受来自上游服务提供方的断言；上游服务提供方可担当对 于担当信赖方的下游服务提供方的发出实体的条件可取决于服务提供 方之间信任关系的类型和服务提供方之间事务的类型。然而，在简单 联盟事务的范围内，仅具有一个担当发出实体的实体。在可将联盟框架结构添加到现有系统并且对现有非联盟体系结 构影响最小的给定计算环境内，可支持本发明。因此，在任何给定企 业或服务提供方处的操作（包括认证操作）不必因实体也可参与联盟 环境内的事实而改变。换而言之，即便可将实体的计算系统集成到联 盟环境中，用户也能够继续以非联盟方式直接与企业执行多个操作，</p>
    <p>包括认证操作。然而，用户可以能够在执行针对给定实体的联盟操作 的同时，具有同样终端用户体验，就好像用户以非联盟方式执行与给 定实体相似的操作。因此，应该注意，当给定企业加入联盟时，并不是所有给定企业的用户都必须参与联盟事务；某些企业用户可与企业 的计算系统进行交互，而不执行任何联盟事务。此外，在给定企业的计算环境内的用户注册，例如，在计算机系 统中的用户帐户的建立，不必因企业也可参与到联盟环境中的事实而 改变。例如，用户通过独立于联盟环境的传统或先前存在的注册程序， 仍可在一个域上建立帐户。因此，在某些情形中，在企业处的用户帐 户建立可以包含或不包含当企业参与到联盟计算环境内时在联盟上有 效的帐户信息的建立。联盟体系结构一传统系统的联盟前端现在参照图3，所示框图表示，在给定域处先前存在的数据处理成::;环境包括为用户提^"各种服务的联盟实体。用^312与客户机 设备314进行交互，客户机设备314可支持浏览器应用216和多个其他客 户机应用318。用户312不同于客户机设备314，浏览器316，或者承担 起在用户与其他设备和服务之间接口的任何其他软件。在某些情形中，的客户机应用。 一般而言，尽管请求者是中间方，例如，基于客户机 的应用、浏览器、SOAP客户机等，但可将其假设代表用户起作用。浏览器应用316可以是典型的浏览器，包括在移动设备上的那些 浏览器，其包括有许多模块，例如，HTTP通信部件320和标记语言 (ML)解释器322。浏览器应用316还可支持插件，例如，Web服务客 户机324，和/或可下载的applet，它可能需要或不需要虚拟机运行时刻 环境。Web服务客户机324可使用简单对象访问协议（SOAP)，它是 用于定义在非集中式、分布式环境中结构化和有类型（typed)信息的 轻量协议。SOAP是基于XML的协议，包括三部分：定义用于描述在 消息中有什么以及如何对其进行处理的框架结构的包封；用于解释应 用定义的数据类型的实例的编码规则集；和用于表示远程过程调用和 响应的约定。用户312可使用浏览器应用316访问基于Web的服务，但 用户312也可通过在客户机设备314上的其他Web服务客户机访问Web 服务。某些联盟操作可经由用户的浏览器利用HTTP重定向在联盟环 境的实体之间交换信息。然而，应该注意，本发明可通过多个通信协议得以支持，且并不意味其受限于基于HTTP的通信。例如，在必要 时在联盟环境中的实体可直接进行通信；无需通过用户的浏览器对消 息进行重定向。本发明可采用这样的方式得以支持，即，可将联盟环境所需的部 件与预存在的系统进行集成。图3表示出用于将这些部件实现为事先存 在的系统的前端的一个实施例。可将在联盟域处的事先存在的部件视 为传统应用或后端处理部件330，其按照与图4所示相似的方式，包括 认证服务运行时刻（ASR)服务器332。 ASR服务器332负责当域控制 对应用服务器334的访问时对用户进行认证，可将应用服务器334视为 用于生成、检索或者支持或处理保护资源335。域可继续使用传统用户 注册应用336对用户进行注册，以便其对应用服务器334进行访问。关 于传统操作对注册用户进行认证所需的信息存储在企业用户注册表 338中；企业用户注册表338也可以是联盟部件能够访问的。加入联盟环境后，域可继续在不干予联盟部件的条件下起作用。 换而言之，可将域配置成使得用户可在不通过接触点 (point-of-contact)服务器或实现该接触点服务器功能的其他部件的 情况下，继续直接访问特定应用服务器或其他保护资源；以此方式访 问系统的用户将经历典型i人证流程和典型访问。然而，由此，直接访 问传统系统的用户将不能建立为域的接触点服务器所已知的联盟会 话。可通过使用联盟前端处理340将域的传统功能集成到联盟环境 中，联盟前端处理340包括接触点服务器342和本身与安全令牌服务 (STS) 346进行交互的信任代理服务器344 (或更简单而言，信任代</p>
    <p>理344或信任服务344 )，后面，将参照图4对它们进行详细描述。联盟 配置应用348允许管理用户对联盟前端部件进行配置，以便允许他们通 过联盟接口单元350与传统后端部件进行交互。联盟功能可在不同系统部件或模块中实现。在优选实施例中，用于执行联盟操作的多数功能 可通过单个联盟应用内的逻辑部件集合实现；联盟用户生命周期管理应用352包括信任服务344以及单点登录协议服务（SPS) 354。信任服 务344可包括身份与属性服务（I&amp;AS) 356，其作为部分联盟功能，用 于身份映射操作、属性检索等。在单点登录操作期间，身份与属性服 务356也可由单点登录协议服务354使用。在某些情形可&#37318;用联盟用户 注册表358以保持用于联盟特定目的的用户相关信息。在给定企业处的传统或事先存在的认证服务可使用各种众所周 知的认证方法或令牌，例如，用户名/密码或基于智能卡令牌的信息。 然而，在支持本发明的优选联盟计算系统中，可在联盟环境中通过使 用接触点服务器使用传统认证服务的功能。在不通过接触点服务器的 情况下，用户可继续直接访问传统认证服务器，不过，以此方式访问 系统的用户将经历典型的认证流程和典型的访问；根据本发明，直接 访问传统认证系统的用户将不能生成联盟认证断言以作为身份证明。 联盟前端的角色之一是将接触点服务器处接收的联盟认证令牌转换成 传统认证服务理解的格式。因此，通过接触点服务器访问联盟环境的 用户将无需向传统认证服务重新进行认证。优选地，用户通过接触点 服务器和信任代理的组合向传统认证服务进行认证，使得看起来好像 用户参与了认证会话。联盟体系结构一接触点服务器、信任代理和信任中间方 现参照图4，所示框图表示出，可使用联盟体系结构内某些部件 建立信任关系以支持本发明实现的方式的示例。联盟环境包括联盟企 业或为用户提供各种服务的相似实体。用户可通过客户机设备上的应 用，试图访问各个实体（例如，企业410)处的资源。在每个联盟企业 处的接触点服务器，例如，在企业410处的接触点（POC)服务器412，</p>
    <p>是进入联盟环境的入口点，以便从客户机进行请求，访问企业410所支 持和使得可用的资源。接触点服务器使得对现有非联盟体系结构（例 如，传统系统）内现有部件的影响最小，这是由于接触点服务器处理 许多联盟要求。接触点服务器提供会话管理、协议转换以及可能启动 认证和/或属性断言转换。例如，接触点服务器可将HTTP或HTTPS消 息转换成SOAP，反之亦然。如后面将进行更详细描述的那样，接触 点服务器还可用于调用信任代理转换断言，例如，可将自发出方接收 的S AML令牌转换成接收方所理解的Kerberos令牌。信任服务（也称为信任代理、信任代理服务器、或信任服务）， 例如，在企业410处的信任代理（TP) 414，建立和保持在联盟中两个 实体之间的信任关系。信任服务通常能够进行从发出方所用格式到接 收方所理解格式的认证令牌格式转换（通过安全令牌服务，后面将对 此进行更详细描述）。合起来，使用接触点服务器和信任服务使得实现联盟体系结构对 现有非联盟系统集的影响最小。因此，示例性联盟体系结构需对于每 个联盟实体实现至少一个接触点服务器和至少一个信任服务，而不管 该实体是企业、域，或其他逻辑或物理实体。不过，示例性联盟体系 结构无需对现有非联盟系统集进行任何变化。优选地，对于给定联盟 实体具有单个信任服务，尽管出于可用性目的可具有信任服务部件的多个实例，或者对于联盟实体内的众多更小实体，例如，企业内的独 立子机构，可具有多个信任服务。给定实体可属于多于一个的联盟， 尽管该情形无需多个信任服务，这是由于单个信任服务就可对多个联 盟内的信任关系进行管理。信任服务的一个角色可以是通过另 一域和/或该域中的信任服务 确定或负责确定所需令牌类型。信任服务有能力和有责任来进行从发 出方所用格式到接收方所理解格式的认证令牌格式转换。信任服务414 还可用于对于企业410进行的任何用户身份转换或属性转换，或该职责 可通过不同身份与属性服务（例如，如图3所示身份与属性服务356) 得以支持。此外，信任服务可支持将别名实现为用户身份表示，用于</p>
    <p>在不提供关于用户实际世界身份的任何附加信息的条件下唯一识别出 用户。此外，信任代理可发出授权和/或会话证书，以便为接触点服务 器使用。然而，信任服务可调用信任中间方进行协助，后面将进一步 对此进行描述。可需要身份转换以将发出方已知的用户身份和属性映 射到对于接收方有意义的用户身份和属性。通过在发出实体处的信任 服务，在接收实体处的信任服务，或通过二者，可调用该转换。信任服务414，或与以上所述不同的身份与属性服务，可包括（或 与之进行交互）内在化部件，如安全令牌服务（STS)部件416所示， 该部件将提供令牌转换以及将调用认证服务运行时刻（ASR)418，以 验证和生成令牌。安全令牌服务提供信任服务所需的令牌发出和验证 服务，信任服务可包括身份转换。因此，安全令牌服务包括到现有认 证服务运行时刻的接口 ，或者它将认证服务运行时刻并入该服务自身 中。不是内在化在信任服务内，而是可将安全令牌服务部件实现为单 独的部件，例如由信任服务进行调用，或者可将其内在化在事务服务 器内，以作为应用服务器的一部分。例如，安全令牌服务部件可接收发出Kerberos令牌的请求。作为 该用户（为其创建该令牌）的认证信息的一部分，请求可包含二进制 令牌，该令牌包含用户名和密码。安全令牌服务部件将针对例如LDAP 运行时刻（典型的认证）对用户名和密码进行验证，以及将调用 Kerberos KDC (密钥发行中心）为该用户生成Kerberos票据。将该令 牌返回到信任服务，以便在企业内使用，然而，这样的使用可包括， 将令牌外在化，以便传输到联盟内的另一域。按照类似于参照图1D所述的方式，用户可能希望访问在联盟环境 内多个企业（例如，企业410和企业420)处的资源。按照类似于以上 对于企业410所述的方式，企业420包括接触点服务器422、信任服务 424、安全令牌服务（STS) 426和i人证服务运行时刻428。尽管用户可 通过每个企业直接启动各个事务，但用户可通过级联在联盟环境内的 企业410启动事务。企业410可能需要与联盟环境内的多个其他企业（例 如，企业420)合作，以完成特定事务，即便当用户启动事务时可能还不明白该必要性。企业420作为下游实体而被涉及，如有必要，企业410 可向企业420提供断言，以便进一步进行用户的联盟事务。可能存在有信任服务不知道如何解释相关联接触点服务器所接 收的认证令牌和/或如何对给定用户身份和属性进行转换的情形。在此 情形中，信任服务可选择调用在信任中间方部件（例如，信任中间方 430)处的功能。信任中间方保持有与各个信任代理/服务的关系，从 而在信任服务之间提供传递信任。使用信任中间方允许在联盟环境内 的每个实体，例如，企业410和420，建立与信任中间方的信任关系， 而非建立与联盟环境中每个实体的多个独立信任关系。例如，当企业 420作为在用户于企业410处启动的事务的下游实体而被涉及时，可使 企业410处的信任服务414确信：如有必要，通过调用信任中间方430 处的协助，在企业420处的信任服务424能够理解来自信任服务414的断 言。尽管图4示出联盟环境具有单个信任中间方，不过，联盟环境还可 具有多个信任中间方。应该注意，尽管图4将接触点服务器412、信任服务414、安全令 牌服务部件416和认证服务运行时刻418作为不同实体，但无需将这些 部件实现在独立部件上。例如，有可能将这些独立部件的功能实现为 单个应用，作为单个物理设备上的应用，或作为多个物理设备上的分 布式应用。此外，图4示出对于企业的单个接触点服务器、单个信任服 务和单个安全令牌服务器，但对于每个企业，可选配置可包括多个接触点服务器、多个信任服务和多个安全令牌服务器。可采用各种形式 (例如，软件应用、对象、模块、软件库等）实现接触点服务器、信 任服务、安全令牌服务和其他联盟实体。信任服务/STS能够接受和验证许多不同的认证证书，包括诸如用 户名和密码组合的传统证书和Kerberos票据，以及联盟认证令牌格式， 包括由第三方生成的认证令牌。信任服务/STS可允许接受认证令牌以 作为别处的认证证明。认证令牌由发出方生成，用于表示用户已向该 发出方进行了认证。发出方产生认证令牌以作为对用户的认证身份进 行断言的手段。信任服务/STS也能够对属性令牌或用于确保通信会话</p>
    <p>或会话安全的令牌（例如，按照类似SSL会话标识符的方式用于对会 话信息进行管理的令牌）进行处理。安全令牌服务按照需要调用认证服务运行时刻。认证服务运行时 刻支持能够对用户进行认证的认证服务。认证服务担当认证权威机构， 用于通过认证响应来提供认证成功或失败的指示。信任服务/STS可使 认证服务内在化，例如，全新安装有无需与现有传统框架结构进4亍交 互的Web服务的情形。否则，安全令牌服务部件将调用外部认证月良务 以验证认证令牌。例如，安全令牌服务部件将对包含有用户名/密码的 二进制令牌进行"拆包（unpack)"，然后使用LDAP服务访问用户 注册表以便验证提交的证书。当被诸如应用服务器之类的另 一部件所使用时，安全令牌服务部 件可用于生成单点登录到传统认证系统所需的令牌；可将该功能与单 点登录协议服务内的功能（例如，如图3所示的SPS 354)进行组合或 替换。因此，可将安全令牌服务用于内部目的（即，企业内部）和外 部目的（即，遍及在联盟中的企业）的令牌转换。作为内部目的的示 例，Web应用服务器可通过IBM CICS (客户信息控制系统）事务网 关与大型机相接口 ； CICS属于为关键任务应用提供企业级在线事务管 理和连通性的应用服务器和连接器系列。Web应用服务器可调用安全 令牌服务部件将Kerberos票据（由Web应用服务器内部使用）转换成 CICS事务网关所需的IBM RACF通行票据。（IBM, RACF和CICS 是国际商用机器公司的注册商标）。下面，使用以上引出的术语，例如，"身份提供方"和"服务提 供方"，解释如图4所示实体。作为建立和保持信任关系的一部分，身 份提供方的信任服务能够确定服务提供方的信任服务需要/接受什么 样的令牌类型。从而，当从安全令牌服务调用令牌服务时，信任服务 使用该信息。当需要身份提供方的信任服务为服务提供方生成认证断 言时，信任服务确定出所需令牌类型，并向安全令牌服务请求合适的 令牌。当服务提供方的信任服务从身份提供方接收认证断言时，信任服 务知道它预期什么断言类型以及它需要的以便在服务提供方内内部使 用什么样的断言类型。因此，服务提供方的信任服务请求安全令牌服 务基于在接收认证断言中的令牌生成所需的内部使用令牌。信任服务和信任中间方能够将从身份提供方接收的断言转换成 服务提供方所理解的格式。信任中间方能够解释对于与其具有直接信 任关系的每个信任服务的断言格式（或多个格式），从而允许信任中 间方在身份提供方和服务提供方之间提供断言转换。该转换可由任一 方通过其本地信任服务进行请求。从而，身份提供方的信任服务能够 在发送到服务提供方之前请求断言转换。同样，服务提供方的信任服 务可请求关于从身份提供方接收的断言的转换。断言转换包括用户身份转换、认证断言转换、属性断言转换或其 他形式的断言转换。如以上所述，断言转换由联盟内的信任部件（例 如，信任服务和信任中间方）进行处理。信任服务可在本地，在身份 提供方处或服务提供方处执行转换，或者，信任服务可从信任中间方 调用协助。假设身份提供方和服务提供方已经与信任中间方具有各自信任 关系，如有必要，信任中间方可在发出方与信赖方之间动态地创建（即， 在居间撮合）新的信任关系。在信任中间方提供的最初信任关系居间 撮合操作之后，身份提供方和服务提供方可直接保持关系，使得无需 为未来转换要求而调用信任中间方。应该注意，认证令牌转换可发生在三个可能地方：身份提供方的信任服务、服务提供方的信任服务和 信任中间方。优选地，身份提供方的信任服务生成由信任中间方所理 解的认证断言，以便发送到服务提供方。然后，服务提供方请求将来 自信任中间方的该令牌转换成可由服务提供方理解的格式。令牌转换 可发生在转换之前，转换之后，或认证断言的转换之前和之后。在联盟体系结构内的信任关系在能够支持本发明的示例性联盟环境内，必须管理两种类型的 "信任域"：企业信任域和联盟信任域。这两种类型信任域之间的差</p>
    <p>别部分地基于决定与信任域的信任关系的业务协定和用于建立信^壬的技术。企业信任域包含由企业进行管理的那些部件；在信任域内的所 有部件可彼此隐式信任。 一般而言，不存在在企业内建立信任所需的 业务协定，这是由于所部署的技术例如通过要求在部件之间进行相互 认证的SSL会话或通过替换在单个牢固控制的数据中心内的部件，在 企业内创建固有信任，使得物理控制和接近表明隐式信任。参照图2B， 传统应用和后端处理系统可表示企业信任域，其中，部件在安全内部 网络上进行通信。联盟信任域是跨企业边界的域；从一方面来看，联盟信任域可表 示不同企业信任域之间的信任关系。联盟信任域通过跨联盟伙伴之间 企业边界的信任代理建立联盟信任域。信任关系涉及某些类型的引导 过程，由此，在信任代理之间建立最初信任。此引导过程的一部分可 包括建立共享秘密密钥和定义预期和/或允许的令牌类型和标识符转 换的规则。 一般而言，该引导过程可被带外实现，这是由于该过程也 可包括业务协定的建立，该业务协定决定了联盟中的企业参与以及与 该参与相关的责任。在联盟商业模型中存在用于建立信任的多个可能机制。在联盟模 型中，联盟参与方之间信任的基本理念是出于商业原因，以便提供在 参与方之间所传递的断言（包括令牌和属性信息）为有效的保证级别。 如果不存在信任关系，则服务提供方不能信赖从身份提供方接收的断 言；它们不能被服务提供者用来确定如何对从身份提供方接受的任何 信息进行解释。例如，大型公司可能想要链接数千个全球客户，该公司将使用非 联盟解决方案。作为第一示例，公司将要求全球客户使用来自商业证 书权威机构的数字证书建立相互信任。商业证书权威机构使得公司处 的服务器信任在每个全球客户处的服务器。作为第二示例，公司将使 用Kerberos实现第三方信任；公司及其全球客户将实现信任的第三方 Kerberos域服务，该服务实现基于共享秘密的信任。作为第三示例， 公司将通过私有安全消息令牌建立专用方案，其中，该令牌被该公司</p>
    <p>全球客户的服务器相互信任。如果需要公司管理与少量全球客户的信任关系，则这些方法的任 何一种都是可行的，但如果有数百或数千个潜在联盟伙伴，则这可能 变得不可管理。例如，当公司有可能强制其更小伙伴实现专用方案时， 该公司将不太可能对其更大伙伴施加许多要求。企业可能采用通过信任代理以及可能通过信任中间方建立和保 持的信任关系。附图中所示出的示例性联盟体系结构的优点在于，它要求。， 、、 '、 B… 土然而，该示例性联盟体系结构在建立联盟中的参与所需的业务和 责任协定的初步工作的方面，并未使企业及其潜在联盟伙伴得以&#32233;解。 此外，参与方不能忽视信任关系的技术性引导。示例性联盟体系结构允许该引导较为灵活，例如，第一联盟伙伴能够发出具有特定信息的Kerberos票据，而第二联盟伙伴能够发出具有特定信息的SAML认证断言。在示例性联盟体系结构中，由信任代理对信任关系进行管理，信 任代理可包括（或者可与之交互）安全令牌服务，其用于基于在两个 信任代理之间预建立的关系，对从身份提供方接收的令牌进行验证和 转换。在联盟企业建立与另一联盟企业的信任关系（和令牌转换）不可行的情形中，可调用信任中间方；然而，联盟企业会需要建立与信 任中间方的关系。现参照图5，所示框图表示出，根据能够支持本发明的示例性联 盟体系结构，使用信任代理和信任中间方的联盟域之间信任关系的示例性集合。尽管图4引出了信任中间方，然而图5说明了在示例性联盟 体系结构内传递信任关系的重要性。联盟域502-506分别包含有信任代理508-512。信任代理508与信任 代理510具有直接信任关系514。信任代理520与信任代理510具有直接 信任关系516。信任中间方520与信任代理512具有直接信任关系518。 信任中间方520用于代表联盟参与方，基于与其他联盟伙伴的传递信任</p>
    <p>建立信任关系。传递信任的原理允许信任代理510和信任代理512通过 信任中间方520具有代理信任关系522。信任代理510或512需要知道如 何转换或验证其他断言；可调用信任中间方将断言转换成在其他信任 代理处有效、可信和理解的断言。可通过使用ebXML (使用XML的电子商务）以XML表示用于针 对联盟企业之间信任关系规定合同责任和义务的业务协定。例如，可 将直接信任关系按照ebXML文档来表示；共享直接信任关系的每个联 盟域将具有表示为ebXML文档的合同拷贝。可在ebXML设计内指定 以及在ebXML注册表内发布在联盟内各实体的操作特性；想要参与特 定联盟（例如，以便操作信任代理或信任中间方）的任何企业，需要 符合该特定联盟对于联盟内所有信任代理或信任中间方所指定的发布 要求。安全令牌服务将按照转换其他域令牌的方式，对关于操作细节 的这些ebXML文档进行解析。不过，应该注意，可采用其他标准和机 制支持本发明，以便规定关于实现在联盟内信任关系的方式的细节，在联盟体系结构内的单点登录在给定用户会话期间，用户可访问多个联盟域，以使用由这些域 提供的Web服务。域能够发布它们使用诸如UDDI和WSDL (这二者都 使用XML作为公共数据格式）之类的标准规范提供的关于服务的描 述。通过也符合这些标准规范的应用，用户找出可用的服务和服务提 供方。SOAP提供了用于传递以XML表示的请求和响应的范例。除其 它之外，在联盟环境内的实体可采用这些标准。在联盟内，用户期望具有这样的单点登录体验，即，用户完成单 个认证操作，该认证操作足够用于用户会话的期间，而与在该会话期 间访问的联盟伙伴无关。可将会话定义成从（以及包括）最初用户认 证（即，登录）到退出的事务集。在会话内，用户的动作将部分由针 对该会话授予用户的特权来决定。上面描述的联盟体系结构支持单点登录操作。为利于单点登录体 验，支持联盟环境的Web环境还将支持使用第三方生成的认证断言或</p>
    <p>安全令牌，以便提供用户认证的证明。该断言将包含关于用户向发出 方进行成功认证的某种证明，以及该用户的标识符。例如，用户可通 过一个联盟伙伴完成传统认证操作，例如，通过提供联盟伙伴为了对 用户建立认证证书而使用的用户名和密码，然后，联盟伙伴能够向不同联盟伙伴提供由认证/发出方生成的S AML认证断言。联盟环境还允许Web服务或其他应用请求Web服务，此外，还对 这些Web服务进行认证。在Web服务环境中的认证是对Web服务请求 的声明身份进行验证的动作，使得企业能够将访问限于授权客户机。 请求或调用Web服务的用户几乎总是经过认证的，从而，在支持本发 明的联盟环境内的认证需求与用于用户认证的现有要求或Web服务没 有任何不同。因联盟框架结构P的存在而受到影响。、例;，通过HTTP/S利用基于形^ (form)的认证机制进行认证以便访问在特定域处非联盟资源的现有用 户，并不由于在该域处引入对于联盟环境的支持而受到影响。认证部 分地由接触点服务器进行处理，接触点服务器进而可调用独立信任代 理或信任服务部件；接触点服务器的使用将对于现有域框架结构的影 响最小。例如，可将接触点服务器配置成用于传递将由该域处后端或 传统应用和系统所处理的所有非联盟请求。接触点服务器可选择调用基于HTTP的认证方法，例如，基本认 证，基于形式的认证，或某些其他认证方法。通过识别出由用户提供 作为认证证明的断言，例如，SAML认证断言，接触点服务器还支持 联盟域，其中，该断言跨于企业域之间。接触点服务器可调用信任服 务，信任服务进而可调用其安全令牌服务，以便对认证证书/安全令牌进行认证oWeb服务或其他应用的认证包括与用户认证相同的处理。来自 Web服务的请求携带包含认证断言的安全令牌，该安全令牌将采用与 用户提交的令牌相同的方式由信任服务进行验证。来自Web服务的请 求应伴有该令牌，这是由于，如UDDI中发布的，WebJi艮务将发现被请</p>
    <p>求的服务需要什么样的认证断言/安全令牌。现参看图6，所示框图表示出支持联盟单点登录操作的联盟环境。 用户600通过客户机设备以及合适的客户机程序，例如，浏览器，希望 访问由企业/域610提供的Web服务，企业/域610支持充当联盟环境内联 盟域的数据处理系统。域610支持接触点服务器612和信任代理或信任 服务614;同样，域620支持接触点服务器622和信任代理或信任J5良务 624，而域630支持接触点服务器632和信任代理或信任服务634。信任 代理/服务依赖信任中间方进行协助，如上所述。附加域和信任代理/ 服务可参与联盟环境。图6用于描述在域610与域620之间的联盟单点登 录操作；在域610与域630之间可出现类似操作。用户完成针对域610的认证操作；该认证操作由接触点服务器612 进行处理。当用户请求访问需要认证身份（例如，出于访问控制目的 或出于个性化目的）的某些资源时，触发该认证操作。接触点服务器 612可调用传统认证服务，或者，它可调用信任代理614来验证用户给 出的认证证书。在用户的联盟会话期间，域610成为用户的身份提供方 或归属域。在稍后时刻，用户启动在联盟伙伴（例如，也支持联盟域的企业 620 )处的事务，从而，触发联盟单点登录操作。例如，用户可启动在 域620处的新事务，或用户的最初事务可级联成在其他域处的一个或多 个附加事务。作为另一示例，用户可通过接触点服务器612，例如，通 过选择处在域610内网页上的专用链接，或通过请求在域610内托管的 门户网页，调用对于域620中资源的联盟单点登录操作，但显示出处在 域620中资源。接触点服务器612向信任代理614发送请求，以便为用户 生成要被格式化成域620可理解或信任的联盟单点登录令牌。信任代理 614将该令牌返回到接触点服务器612,接触点612将该令牌发送到域中 的接触点服务器622。域610充当在域620处用户的发出方，域620作为 信赖方。用户的令牌将通过用户的请求传输到域620;可使用HTTP重 定向经由用户的浏览器发送该令牌，或者，可代表在信任代理614提供 的令牌中标识别的用户，通过直接调用接触点服务器622的请求将其发送。接触点服务器622接收请求以及联盟单点登录令牌，并调用信任 代理624。信任代理624接收联盟单点登录令牌，对令牌进行验证，假 设令牌有效并可信，则为用户生成本地有效的令牌。信任代理624将本 地有效令牌返回到接触点服务器622，接触点服务器622为域620内的用 户建立会话。如果需要的话，接触点服务器622可启动在另一联盟伙伴 处的联盟单点登录。在域620处令牌的验证通过信任代理624进行处理，其中可能借助 于安全令牌服务。根据域610提供的令牌的类型，安全令牌服务可能需 要访问域620处的用户注册表。例如，域620可提供包含用户名和密码 的二进制安全令牌，以便与在域620处的用户注册表进行验证。因此， 在该示例中，企业对来自联盟伙伴的安全令牌简单地进行验证。域610:安全令牌。&#28961;、、 ， i     、       '        、 、联盟单点登录不仅需要对代表用户提交给信赖域的安全令牌进 行验证，而且还要基于在安全令牌中包含的信息确定在信赖域处的本 地有效用户标识符。直接信任关系和建立这样的关系所需的业务协定 的一个结果是：至少一方，即发出域或信赖域或二者，将了解如何将 发出域提供的信息转换成在信赖域处有效的标识符。在以上简要示例 中，假设发出域（即，域610)能够向信赖域（即，域620)提供在域 620中有效的用户标识符。在此情形中，信赖域无需调用任何身份映射 功能。在域620处的信任代理624将为用户生成为用户进行"担保 (vouch-for)"的安全令牌。接受的令牌类型、令牌上所需的签名， 以及其他要求，都作为联盟的业务协定的一部分而预先建立。控制标 识符转换的规则和算法也作为联盟的业务协定而预先建立。在两个参 与方之间直接信任关系的情形中，对于这两方，将建立标识符转换算 法，且该算法可以不与联盟中任何其他方相关。然而，不总会是这样的情形，即，发出域将知道如何将用户从域 610的本地标识符映射到域620的本地标识符。在某些情形中，可以是 信赖域知道如何进行这样的映射，而在一些其他情形中，双方都不知 道如何进行该转换，在此情形中，需要调用第三方信任中间方。换而 言之，在居间撮合的信任关系的情形中，发出域和信赖域彼此不具有直接信任关系。然而，它们与信任中间方（例如，信任中间方650)将 具有直接信任关系。标识符映射规则和算法将作为该规则的 一部分得 以建立，在居间撮合信任关系所需的标识符转换中，信任中间方将使 用该信息进行协助。域620接收由接触点服务器622处的域610发出的令牌，接触点服 务器622调用信任代理624对令牌进行验证并执行身份映射。在此情形 中，由于信任代理624不能将用户从域610的本地标识符映射到域620 的本地标识符，信任代理624调用信任中间方650，信任中间方650对令 牌进行验证，并执行标识符映射。在获得对于该用户的本地标识符之 后，信任代理624 (可能通过其安全令牌服务）能够生成在域620处后 端应用所需的任何本地令牌，例如，可能需要Kerberos令牌实现从接 触点服务器到应用服务器的单点登录。获得本地有效令牌之后，若需 要的话，接触点服务器能够为用户建立本地会话。接触点服务器还负 责对用户请求的粗粒度授权，并将授权请求转发到域620内合适的应用 服务器。联盟用户生命周期管理以上参照图2-6的描述内容的一部分解释了可用于联盟环境中的 部件结构，而其他部分解释了用于支持在联盟环境上单点登录操作的 处理。服务提供方或在联盟环境内的信赖域没有必要一定对用户的认 证证书进行管理，那些信赖域能够影响由用户的身份提供方或归属域 提供的单个单点登录令牌。不过，以上参照图2-6的描述并未解释可在 联盟伙伴的联盟域处采用有益方式完成联盟用户生命周期管理的显式 处理。联盟用户生命周期管理功能/服务包括用于支持或管理关于多个 联盟域处特定用户帐户或给定用户的用户简档的联盟操作；在某些情  形中，将功能或操作限定在对于用户的给定联盟会话。换而言之，联 盟用户生命周期管理功能是指可能仅在联盟计算环境内单个用户会话 的生命周期期间允许对多个联盟伙伴上的联盟操作进行管理的功能。每个联盟域可能管理着关于各个联盟域处功能的用户帐户、用户 简档、或某些类型的用户会话。例如，特定联盟域可能不对特定联盟 域内的本地用户帐户或用户简档进行管理，但在成功完成联盟域处单 点登录操作之后联盟域可能对联盟事务的本地用户会话进行管理。作 为该特定联盟域支持的联盟用户生命周期管理功能的一部分，联盟域 可参与单点退出操作，以便完成联盟事务之后允许联盟域终止本地用户会话，从而，提供安全性，以及促进对资源的有效利用。在联盟用户生命周期管理功能利用的另 一示例中，用户可能忙于 需要多个联盟域的参与的在线事务。联盟域可能对用户简档进行本地 管理，以便在涉及联盟域的每个用户联盟会话期间针对联盟域定制用 户体验。作为由该特定联盟域支持的联盟用户生命周期管理功能的一 部分，在给定联盟事务期间，结合来自参与给定联盟事务的其他联盟 域处其他简档的信息，可以以无缝方式使用在联盟域的本地用户简档 中的信息。例如，可采用某种类型的合并操作将来自用户的多个本地 用户简档的信息进行组合，以便按照用户不知晓不同来源或用户信息 源的方式，将用户的信息以可视化方式（例如，在网页中）呈现给用 户。联盟用户生命周期功能也可包括关于帐户链接/解除链接的功 能。对用户提供在联盟伙伴上公共唯一的用户标识符，以作为在一个 联盟伙伴处满足请求的一部分，这使得能够进行单点登录以及实现对 于用户属性的检索（有必要的话）。此外，联盟伙伴可通过使用公共 唯一用户标识符以匿名方式引用用户，来向身份提供方请求附加属性。现参照图7，所示框图表示出，在联盟域中用于实现联盟用户生 命周期管理功能以便支持本发明的某些部件。图7表示出在单个联盟域 (例如如图3所示联盟域）处的元素。图7中的某些元素与以上参照其 他图（例如，图3)描述的元素相似或相同：接触点服务器/服务702相  当于接触点接触点服务器342;应用服务器704相当于应用服务器334， 其运行用于对保护资源访问进行控制的服务；保护或受控资源706相当 于保护资源335;以及联盟用户生命周期管理（FULM)应用708相当 于联盟用户生命周期管理应用352。尽管在图3中未示出防火墙，但在 图7中示出了防火墙。防火墙710和防火墙712创建外部DMZ (电子非 军事化区，electronic DeMilitarized Zone ),保护企业的计算环境免 受来自该企业域外部（例如，通过因特网）的计算威胁。图3和图7所示出的不同方面并非是不相容或交叉目的的。与图7 所示示例相比，图3并未示出防火墙，不过接触点服务器342处在联盟 前端340的内部；此外，将联盟用户生命周期管理应用352包含在联盟 前端340内部。在图7中，示出接触点服务器702处在防火墙710和712 之间的DMZ内部，其构成企业域的电子或物理前端，此外，联盟用户 生命周期管理应用/服务708在电路上处在防火墙712之后。按照需要， 信任服务714、单点登录协议服务716和身份与属性服务718采用企业用 户注册表720和联盟用户注册表722。可通过将图3的联盟前端340和后 端330视为部件的逻辑结构，而将图7中DMZ和其他部件视为构成物理 或电路前端和物理或电路后端，任何一方均可包含联盟部件，使图3 与图7的不同方面协调一致。重申一遍接触点实体/服务的角色，接触点实体提供至少关于用 户通过联盟功能与企业的计算环境交互方面的会话管理；在企业计算 环境的传统后端内的应用也可实现其自身会话管理功能。假设企业实 现关于联盟计算环境的策略功能，则接触点实体可充当对于某些其他 联盟伙伴的策略判决点的策略实施点。此外，假设可允许其实现联盟 功能，则在不采用单点登录操作的那些情形中，接触点实体负责启动 针对用户的直接认证操作。这样，可&#37318;用各种形式实现接触点实体， 例如，作为反向代理服务器，作为Web服务器插件，或&#37318;用某些其他 方式。也可将接触点功能实现在应用服务器自身内部，在此情形中， 联盟用户生命周期管理服务可在逻辑上处于DMZ内部。更重要的是，再次参看图7，联盟用户生命周期管理应用708也包  括对于与联盟用户生命周期管理插件724 (在图3中未示出）相接口、 相交互或者与之互操作的支持。在图7所示示例性体系结构中，联盟协 议运行时刻插件提供的功能涉及各种类型、独立发布或开发的联盟用 户生命周期管理标准或简档，例如，WS-联盟被动客户机；和自由联 盟ID-FF单点登录（B/A， B/P和LECP)、注册方名称标识符、联盟终 止通知和单点退出。可在不同URI处访问联盟协议集。该方法允许联 盟用户生命周期管理应用在单个应用内同时支持联盟用户生命周期管 理的多个标准或规范，例如，WS-联盟Web服务规范与自由联盟的规 范，从而，使得对支持不同联盟协议的整个环境的配置影响最小。更具体而言，由接触点服务器通过将用户请求重定向和/或转发 到合适的联盟用户生命周期管理应用，来调用合适的联盟用户生命周 期管理功能。再次参照图7，接触点服务器702接收用户请求730，然后 对其进行分析，以确定已接收请求的类型，它可通过已接收的请求消 息的类型表示，或者，如以上提到的，通过确定在请求消息内的目的 URI来实现。当对于保护资源的请求732继续被转发到应用服务器704 时，将对于联盟用户生命周期管理功能的请求734 (例如，调用单点退 出操作的请求）转发到联盟用户生命周期管理应用708，由联盟用户生 命周期管理应用708按照需要调用合适的联盟用户生命周期管理插件， 以满足所接收请求。当定义了新联盟协议或新联盟功能时，或当现有 联盟协议或功能以某种方式进行修改或重新定义时，可通过插入新的 支持模块简单添加支持，或可通过修改先前安装的插件进行重新定义。图7中的联盟用户生命周期管理应用的示例性实施方式说明了在 提供可插件特征的同时，联盟用户生命周期管理应用能够支持多个同 时的联盟用户生命周期管理功能，从而允许在需要时以插件形式对联 盟用户生命周期管理应用添加新功能，而无需对现有框架结构进行任 何改变。例如，假设本发明使用基于Java的联盟用户生命周期管理应 用实现，可通过对联盟用户生命周期管理应用的Java CLASSPATH配 置新开发的Java类，添加对于新联盟协议（例如，新公布的单点登录 协议）的支持，其中这些新类与支持本发明的协议接口一道支持新的 标准。示例性联盟体系结构对现有环境产生这样的影响，即，其中将集 成联盟用户生命周期管理解决方案。能够很容易地对联盟用户生命周 期管理应用进行管理，以便支持新的协议/标准。同时，它们在演进中 对总体框架结构的变化最小。为支持新联盟用户生命周期管理功能而 可能需要的任何改变几乎专门位于联盟用户生命周期管理应用内，这 将需要对联盟用户生命周期管理应用进行配置，以便理解添加的功能。在其他联盟部件中，例如，在接触点服务器处，可存在最小配置 改变，以便在继续支持现有联盟用户生命周期管理功能时，允许总体 框架结构能够调用新的联盟用户生命周期管理功能。然而，联盟用户 生命周期管理应用在功能上独立于其余联盟部件，原因在于，联盟用 户生命周期管理应用可能仅需与联盟环境的其他联盟部件进行最小交 互。例如，在示例性实施例中，如果与对外部实体不透明或不可访问 的专用、内部联盟用户生命周期管理数据库相反，要将联盟用户生命周期管理信息（例如，根据自由联盟简档的Nameldentifier值）存储在 外部可访问的联盟用户生命周期管理数据库中，则联盟用户生命周期 管理功能可与基于企业的数据库（例如，LDAP数据库）进行集成。因此，现有环境需进行最小修改，以便支持联盟用户生命周期管 理功能。此外，对联盟用户生命周期管理功能的改变，包括添加新功 能，对现有联盟环境的影响最小。因此，当公布新的单点登录标准时， 4艮容易地添加对于该标准的支持。传统用户认证涉及仅在企业计算环境与终端用户之间的交互；企 业选择实现该认证交换的方式是企业的选择，这不对任何其他企业产 生影响。然而，当需要支持联盟或跨域单点登录功能时，它变成企业 伙伴彼此交互的要求。该要求不能通过使用专用协议可伸缩地实现。 尽管直接对接触点实体添加对基于标准的联盟协议的支持看起来好像 是健壮的解决方案，但必须对已作为企业计算环境内现有部件的接触 点实体进行修改；此外，当每次这些公共联盟协议中的一个改变时， 必须对其进行修改。</p>
    <p>将该功能移到接触点实体之外提供了更加模块化的方法，其中， 该可插入功能使得易于维护这些协议的迁移或更新。在单点登录操作期间的运行时刻链接用户帐户创建现参照图8，所示数据流图表示出，由联盟身份提供方启动以便 获得对联盟服务提供方处保护资源的访问的、基于HTTP重定向的典 型现有技术单点登录操作。尽管图8内所示处理和随后的附图采用基于 HTTP的通信，不过，本发明并不限于基于HTTP的通信，而是可以&#37318; 用其他通信协议；特别是，本发明并不限于由基于HTTP重定向技术 所表示的前向信道通信，而是可将其同样应用到后向信道技术，例如， SOAP/HTTP或SOAP/MQ。在图8所示数据流程，客户机的用户（也称 为用户代理，例如Web浏览器应用）不仅在身份提供方处，而且还在服 务提供方处，已建立了用户帐户（步骤802 )，用户已向身份提供方进 行了认证（步骤804)。图8所示示例性数据流程的先决条件之一是，至少该用户已通过 服务提供方具有联盟帐户；换而言之，服务提供方从身份提供方接收 用户的用户身份信息时，它就需要识别出该信息，以便当身份提供方 启动对于用户的单点登录操作时，执行该操作。对于步骤804，先决条 件仅仅是，在时间上先前的某时刻用户已向身份提供方进行了认证， 当前与身份提供方具有有效会话；且对于在步骤804建立会话无需任何 要求。应该注意，也可能存在其他情形，例如，身份提供方在与用户 的某交互之后稍后时刻，确定身份提供方对于认证用户仅执行某些操 作。还应注意，启动单点登录的其它情形是可能的，例如，用户将通 过请求服务提供方处的保护资源，例如，使用在浏览器应用内的书签 URL，来启动单点登录操作。单点登录处理开始于身份提供方处，其中从身份提供方向客户机 发送提议（offer)，以提供对联盟资源的访问（步骤806);提议可 具有针对联盟Web站点处（或更一般而言，在联盟域处）的资源的超 链接的形式，可使提议具有响应于来自客户机（未示出）的先前HTTP请求消息(用于查看在身份提供方网站上的特定网页）的HTTP响应消 息的形式。然后，用户选择在身份提供方已知的服务提供方处的所提 议联盟资源之一 （步骤808 );选择可通过从客户机到身份提供方的 HTTP请求消息来实现。身份提供方构建用于代表用户请求对所选联盟资源的访问的消 息，使得消息也包括单点登录请求（步骤810)，身份提供方通过单点 登录请求，例如，&#37318;用HTTP重定向消息（具有状态/原因代码"302" 的HTTP响应消息）的形式，向客户机发送资源请求（步骤812)。重 定向消息将客户机重定向到合适的位置，例如，如重定向消息的 "Location"报头内的URI所标识的位置，该URI标识出在对针对请求 的联盟资源的访问进行控制的服务提供方处的合适服务。应该注意，在现有技术中，启动推送型（push-type)单点登录操 作的优选方式是在身份提供方启动的请求中包括单点登录断言信息， 并响应在服务提供方处直接触发的请求，将其发送到服务提供方。例 如，在实现自由联盟ID-FF1.2规范中规定的单点登录操作的计算环境 中，构建AuthnResponse。在某些情形中，需要身份提供方将客户机 重定向到服务提供方处的触发URL,此后，触发URL将导致服务提供 方构建消息，例如，在自由联盟规范内的AuthnRequest消息，将该消 息重定向到身份提供方，进而使身份提供方构建响应，例如， AuthnResponse;这是用来通过自由联盟ID-FF l.l实现基于推送的 SSO的手段。出口请求消息可包括两个不同的请求： 一个是用于代表客户机的 用户对于单点登录操作的请求操作，另一个是用于访问客户机用户已选出的保护资源的请求操作。或者，用于访问联盟资源的请求可包括 为用户执行单点登录操作的显式请求，以使得单点登录处理仅仅是用 于访问所选资源的更大过程的一部分。对于请求单点登录操作提供信 息的方式可以有所变化。例如，重定向消息的"Location" HTTP报头 也可包括查询部件，例如，将其附加到URI并在URI内通过"？"字符 分界，该部件可包含各种信息，包括用于实现单点登录操作的安全令 牌。响应于从身份提供方接收重定向消息，客户机将HTTP Get消息 发送到由来自身份提供方的HTTP重定向消息中的URI所标识的月良务 提供方处的合适服务（步骤814)。以此方式，客户机访问在服务提供 方处的合适服务，这是由于在HTTP Get消息中的URI仍包含在服务提 供方处的服务所需的附加信息。服务提供方从客户机接收请求消息，假设请求的单点登录方面成 功完成（步骤816)，使得用户在服务提供方处具有活动会话，则服务 提供方对请求消息的资源访问方面进行处理（步骤818)。在对请求消 息进行处理之后，服务提供方通过向客户机发送HTTP响应消息进行 响应（步骤820)，从而结束该过程。现参照图9A-9B，所示数据流图根据本发明的实施例描述了基于 HTTP重定向的单点登录操作，当在联盟服务提供方处执行运行时刻 链接用户帐户创建操作时，由联盟身份提供方启动该操作以获得对联 盟服务提供方处保护资源的访问。按照与图8中所示相似方式，图 9A-9B表示出身份提供方可在所选服务提供方处请求单点登录操作的 过程。然而，图8在步骤816处仅表示出一般化的单点登录操作，关于 单点登录操作方面，在图9A-9B中所示的处理不同于图8中所示的处 理。与图8中所示处理不同，对于图9A-9B中示出的处理没有有关客户 机的用户已在服务提供方处建立了用户帐户的先决条件。更具体而言，对于单点登录操作的现有技术解决方案具有某些先决条件，也就是服务提供方和身份提供方都必须识别出用户，且他们 必须具有称呼该用户的一致性方式，即，别名标识符，或更简单而言， 别名；在启动单点登录操作之前，这两个先决条件必须成立，以便该 单点登录操作成功，否则将失败。在这些现有技术解决方案中，将别 名包含在从身份提供方向服务提供方发送的单点登录响应中，并由服 务提供方所使用，以识别用户，构建关于用户的会话。这些先决条件 存在于现有技术解决方案内，而无论是：（a)单点登录操作由服务提 供方触发，例如，当用户访问处在服务提供方处的保护资源且服务提</p>
    <p>供方需要进行对于用户的会话时，从而，通过向身份提供方发送请求，启动单点登录操作；还是（b)，单点登录操作由身份提供方触发， 例如，当身份提供方具有在相关服务提供方处链接资源的列表时，并 在用户选择这些链接的其中一个时，通过身份提供方启动单点登录操 作。相比之下，本发明排除了这些先决条件，如下面描述的本发明的 多个示例性实施例所示。参照图9A，用户向对身份提供方进行了认证（步骤902 )。通过 步骤902，用户在某一先前时刻向身份提供方进行了认证，且当前与身 份提供方具有有效会话；对于在步骤902建立会话的原因没有任何要 求。应该注意，启动单点登录操作的其他情形可具有不同的步骤序列。 例如，用户可在无需认证会话的条件下浏览由身份提供方提供的信息； 在与用户进行一定交互之后的某时刻，用户请求资源，使得身份提供 方确定身份提供方仅执行对于认证用户的特定操作，之后，启动与用 户的认证操作。单点登录处理开始于身份提供方处，其中从身份提供方向客户机 发送提议，以提供对联盟资源的访问（步骤904);提议可采用针对联 盟网站处（更一般而言，在联盟域处）的资源的超链接的形式，可使 得提议具有响应于来自客户机（未示出）的用于查看身份提供方网站 上特定网页的先前HTTP请求消息的HTTP响应消息的形式。然后，用 户选择在身份提供方所知道的服务提供方处的所提议联盟资源之一 (步骤906);该选择可通过从客户机到身份提供方的HTTP请求消息 实现。如果用户还具有可用于联盟单点登录操作的联盟身份，则身份提 供方为该用户创建别名（步骤908)。身份提供方创建用于代表用户请 求对所选联盟资源进行访问的消息，以使该消息还包括单点登录请求 (步骤910)，即，推送型单点登录请求。推送型单点登录请求通过身 份提供方发起，并将其以自动方式推送到服务提供方，以便对服务提 供方提供对用户身份进行认证的消息；相比之下，推送型单点登录请 求是由正试图以请求（solicited )方式拉取用户的认证信息的服务提供</p>
    <p>方启动。或者，可模拟推送型单点登录操作，特别是当不显式支持推 送型单点登录操作时尤为如此。当身份提供方向服务提供方发送请求 时，发生模拟推送型单点登录操作，例如，通过在服务提供方处的专 用服务（例如，站点间传输服务）实现，由此，服务提供方向身份提供方发出单点登录请求；在身份提供方对来自服务提供方的请求做出 响应后，如同进行显式推送型单点登录操作那样，处理步骤相同。身份提供方通过单点登录请求，例如，采用HTTP重定向消息（具 有状态/原因代码"302"的HTTP响应消息）的形式，将资源请求发送 到客户机（步骤912 )。重定向消息将客户机重定向到合适位置（例如， 由重定向消息的"Location"报头内URI所标识），该URI用于标识出务。响应于接收来自身份提供方的重定向消息，客户机将HTTP Get 消息发送到由来自身份提供方的HTTP重定向消息中的URI所标识的 服务提供方处的合适服务（步骤914)。服务提供方接收和处理来自客户机的所接收请求消息（步骤 916)。在步骤916，服务提供方从所接收消息中检索被身份提供方与 用户相关联的别名标识符或别名信息，但服务提供方不将其识别为与 服务提供方处先前存在的用户帐户相关联。因此，在步骤916,服务提 供方确定用户不具有被身份提供方与用户关联的用户帐户，即，用于 向服务提供方通知服务提供方应接受来自身份提供方的关于单点登录 的信息以便对用户进行认证的的链接用户帐户。换而言之，在步骤916，提供方的用户帐户进行连接的用户帐户。该识别显然出于以下原因。应该注意，用户可能在服务提供方处 已具有一个或多个帐户。由于唯一用户帐户基于唯一的用户标识符， 从而这些帐户可独立使用；给定一用户标识符，服务提供方确定与该 用户标识符（即，特定用户帐户）相关联的特权。假定链接用户帐户 独立于用户在服务提供方处可能具有的任何其他用户帐户，并假定链 接用户帐户需要唯一用户标识符与链接用户帐户相关联，链接用户帐 户基于对于服务提供方已知的任何其他用户标识符而言独立而唯一的用户标识符；该特定用户标识符成为别名标识符，尽管在某些实施例 中，可使用多个数据变量内某种形式的别名信息，以代替单个别名数 据变量。因此，在服务提供方识别出所提供的别名标识符不与在服务提供 方处先前存在的用户帐户相关联之后，服务提供方开始执行操作，以 便确保成功执行单点登录操作。由于用户还未与服务提供方联盟，服 务提供方通过在请求消息内由身份提供方提供的别名信息，为用户创 建新的帐户（步骤918)，以使得用户在服务提供方处具有活动会话。应该注意，创建该帐户所需的最小信息将是识别该帐户（由服务 提供方内部生成）和身份提供方提供的任何别名信息所需的任何本地 信息；之后，基于对于用户提供的别名，将新创建的用户帐户链接到 身份提供方，以使得服务提供方能够与身份提供方协作地代表用户执 行单点登录操作。如果对服务提供方的请求包括用户属性以及对于该 用户的别名标识符，则可将这些属性添加到本地帐户；然而，应该注 意，在某些实施例中，服务提供方仅使用别名标识符，而无需来自身 份提供方的任何附加用户属性信息，可能通过对服务提供方确定的、 且独立于自身份提供方接收的任何信息的缺省用户属性本地集进行分 配，可创建链接用户帐户。不管是否提供任何附加属性，应注意的是， 对于直接认证，最好不要启用该帐户；因此，用户获得对服务提供方 处资源的访问的仅有方式将是，由身份提供方触发的单点登录操作所 建立的会话的结果。创建了链接用户帐户之后，服务提供方执行请求的资源访问（步 骤920)。执行资源访问之后，服务提供方通过向客户机发送HTTP响 应消息做出响应（步骤922 )，从而，结束处理。本发明的单点登录操作（例如，图9A所示实施例）不同于现有技 术的单点登录解决方案（例如，如图8所示操作），这是由于，服务提 供方在本发明的单点登录操作期间识别出服务提供方对于用户不具有 将用户链接到身份提供方处帐户以便支持单点登录操作的用户帐户，  然而，通过本发明，服务提供方能够动态地执行操作，以便允许单点 登录操作进行。更具体而言，服务提供方，例如，在其用户注册表或 数据库内，不具有允许服务提供方对于单点登录操作确定用户的本地身份、进而确定用户特权的足够信息；在没有该信息的条件下，服务 提供方不能确定对用户要给出的合适特权集，因此，如果服务提供方 允许单点登录操作继续的话，也不能确定出为用户给出的会话/访问控 制权限的类型。在现有技术中，服务提供方不能为用户自动创建活动 会话以及允许对保护资源的访问；对于本发明，服务提供方通过基于 由身份提供方对服务提供方提供（例如，如在自身份提供方通过客户 机进行重定向的请求中提供）的用户身份和可能的属性信息来创建链 接用户帐户，动态地在服务提供方处执行运行时刻链接用户帐户创建 操作。服务提供方愿意并能够通过其联盟计算环境，基于其与身份提 供方的信任关系，执行这样的操作。以此方式，可通过服务提供方满 足单点登录请求，导致为用户创建活动会话，并且能够进行用于访问 保护资源的请求。采用类似于图9A所示的相似的方式，图9B表示出身份提供方可 请求在所选服务提供方处单点登录操作的处理；附图中相似的元件通 过相似的附图标记表示。然而，图9A仅表示出在步骤918处的一般化 运行时刻用户帐户创建操作，在运行时刻链接用户帐户创建操作方面， 图9B所示处理不同于图9A中所示的处理，这体现在图9B的步骤 930-942上。与图9A中所示处理不同，在图9B中所示的处理中，服务 提供方基于身份提供方向服务提供方提供的信息，不能在服务提供方 处立即创建用户帐户，或立即完成其创建。现参照图9B，在图9B中的单点登录处理（步骤930)存在差异， 这是由于服务提供方在单点登录操作期间识别出，对于来自身份提供 方的单点登录请求中要求和断言的身份，服务提供方不具有预先存在 的用户帐户，即，代表用户将服务提供方连接到身份提供方的预先存 在的用户帐户，此外，在单点登录请求中包含的信息在服务提供方处 不足以创建有效帐户。从而，服务提供方识别出，它需要来自身份提 供方关于用户的更多信息。更具体而言，服务提供方不具有为用户创建有效帐户所需的足够用户属性信息；例如，可能具有服务提供方所 需的、但在接收单点登录请求中未包含的属性。由于这些附加要求， 服务提供方基于它接收的信息，还不能创建或者彻底创建出它需要的 用户帐户注册表/数据库表项。在图9B所示实施例中，服务提供方通过向客户机发送HTTP重定 向消息（具有状态/原因代码"302"的HTTP响应消息）而进行响应（步 骤932);来自服务提供方的消息包含对于附加用户属性信息的请求。 通过使用由身份提供方向服务提供方先前提供的返回URI，重定向消 息将客户机重定向到身份提供方。响应于从服务提供方接收重定向消 息，客户机向来自服务提供方的HTTP重定向消息中URI所标识的身份 提供方，发送HTTPGet消息（步骤934)。然后，身份提供方对接收的消息进行处理（步骤936)，以构建 包含有身份提供方存储的关于客户机用户的用户属性信息的响应。识 别具体用户属性的方式可以不同。例如，由身份提供方提供的用户属 性信息可包含服务提供方显式请求的用户属性信息。此外，或可选地， 身份提供方提供的用户属性信息可包含服务提供方隐式请求的用户属 性信息，即，由身份提供方确定的足够用于在服务提供方处执行用户 帐户创建操作的用户属性信息。此外，身份提供方可执行用于使对于 附加用户属性信息的接收请求与身份提供方的先前单点登录请求协调 一致的操作，以便服务提供方在没有足够理由进行的条件下，不会试 图获取用户属性。在身份提供方于步骤936处构建消息后，身份提供方例如采用 HTTP重定向消息（具有状态/原因代码"302"的HTTP响应消息）的 形式，向客户机发送具有附加用户属性的消息（步骤938)。重定向消 息将客户机重定向到合适位置，例如，如在重定向消息的"Location" 内的URI所标识的位置，其标识出在服务提供方处的合适服务；可通 过服务提供方在其对于附加用户属性的请求中提供该合适位置。响应 于从身份提供方接收重定向消息，客户机向来自身份提供方的HTTP</p>
    <p>重定向消息中的URI所标识的服务提供方处的合适服务，发送HTTP Get消息(步骤940)。假定在接收消息中给定附加用户属性信息，通过基于接收用户属 性信息创建链接用户帐户，服务提供方执行在服务提供方处的运行时 刻链接用户帐户创建操作（步骤942);以此方式，可通过服务提供方 满足单点登录请求（以及任何随后的单点登录请求），服务提供方还 为用户创建活动会话，并在步骤920和924处可进行用于访问保护资源 的请求。在某些实施例中，服务提供方可初步创建用户帐户，然而使 用户帐户完成创建受到延迟；在这些实施例中，在步骤942处，服务提 供方完成用户帐户的创建。应该注意，关于这些处理的描述是基于 HTTP重定向属性检索的场景，通过后向信道方法，例如，从服务提 供方对身份提供方的基于SOAP/HTTP的SAML属性查询，可实现这些 处理。现参照图9C-9E，所示数据流图根据本发明的实施例描述了基于 HTTP重定向的单点登录操作，该操作由联盟身份提供方启动，以便 通过用于由联盟服务提供方获得用户属性的可选方法，获得对联盟服 务提供方处保护资源的访问。首先在服务提供方在单点登录操作期间 获得用户属性方式方面，图9C-9E不同于图9A-9B所示的处理；在图 9A-9B以及图9C-9E所示的处理都通过身份提供方来启动。此外，在图 9B所示的数据流中，在步骤942处，服务提供方执行运行时刻链接用 户帐户创建操作；相比之下，在图9C-9E所示的数据流中，服务提供 方可在多个步骤上，通过部分创建链接用户帐户，然后完成运行时刻 链接用户帐户创建操作，以此执行运行时刻链接用户帐户创建操作， 如下面更详细的描述。现参照图9C，处理开始于用户对处在身份提供方处的公共资源， 即，并不是在对其访问之前需针对用户实现认证操作的保护资源的资 源，进行浏览（步骤952)。在随后某时刻，用户客户机向身份提供方 发送用于对需进行认证操作的保护资源进行访问的请求（步骤954); 例如，用户可能试图在身份提供方与服务提供方（即，身份提供方的</p>
    <p>联盟伙伴）所参与的联盟计算环境内，浏览身份提供方关于服务提供 方处的资源所保持的信息。作为对用户请求的响应，身份提供方执行与用户的认证操作（步骤956)。在该示例中，身份提供方此后提供到 联盟服务提供方处资源的链接（步骤958)，然后，用户选择或启动对 服务提供方处资源进行访问的操作（步骤960)。如果用户还具有可用于联盟单点登录操作的别名标识符，则身份 提供方为用户创建别名（步骤962)，这可包括，执行用于将别名标识 符与用户相关联，特别是，将别名标识符与用户相关的其它信息（例 如，用户属性信息）相关联的操作。身份提供方构建用于代表用户请 求对所选联盟资源进行访问的消息，以便使该消息还包括单点登录请 求（步骤964)，即，推送型单点登录请求。身份提供方通过单点登录 请求，例如，采用HTTP重定向消息（具有状态/原因代码"302"的 HTTP响应消息）的形式，将资源请求发送到客户机（步骤966)。重 定向消息将客户机重定向到合适位置（例如，由重定向消息的 "Location"报头内URI所标识），该URI用于标识出在对针对请求的 联盟资源的访问进行控制的服务提供方处的合适服务。响应于接收来 自身份提供方的重定向消息，客户机将HTTP Get消息发送到由来自身 份提供方的H TTP重定向消息中的URI所标识的服务提供方处的合适 服务（步骤968 )。然后，服务提供方处理单点登录响应（步骤970)，它可包括， 例如，为用户提取最新创建的别名标识符，以及提取最初由身份提供 方向服务提供方提供的关于用户的任何用户属性信息。服务提供方试 图创建新用户帐户（步骤972),但基于在单点登录响应中身份提供方 向服务提供方提供的联盟用户身份信息，在服务提供方处不能立即创 建或不能创建出完全合适的用户帐户。换而言之，根据该实现方式， 此时服务提供方不能创建或确定它不能创建用户帐户，或服务提供方 以有限时间或有限访问特权创建用户帐户。更具体而言，服务提供方 例如在其用户注册表或数据库和身份提供方最初提供的信息的组合 内，不具有允许服务提供方确定用户合适特权集所需的信息；没有该</p>
    <p>信息，服务提供方不能确定对用户给出的会话/访问控制权限的类型。 因此，服务提供方在单点登录操作期间识别出，服务提供方对于该用 户仍不具有链接用户帐户，同时还识别出，服务提供方需要来自身份提供方的关于用户的更多信息（步骤974)。服务提供方从身份提供方拉取附加用户属性信息以便完成用户 帐户创建操作的方式可有所变化；变型的两个示例如图9D和图9E所 示。图9D表示出前向信道属性检索操作，而图9E表示出后向信道属性 检索操作。因此，如图9C所示数据流图沿续到图9D或图9E中；在这 两种情形中，图9D和图9E的数据流图包含有相似步骤，并对其以相似 的附图标记表示。现参照图9D，服务提供方通过向客户机发送HTTP重定向消息 (具有状态/原因代码"302"的HTTP响应消息）对其关于缺少用户属 性信息的确定做出响应（步骤976);来自服务提供方的消息包含有对 于附加用户属性信息的请求。通过使用先前由身份提供方向服务提供 方提供的返回URI，重定向消息将客户机重定向到身份提供方。响应于接收来自服务提供方的重定向消息，客户机将HTTP Get 消息发送到由来自服务提供方的HTTP重定向消息中的URI所标识的 身份提供方（步骤978)。然后身份提供方对接收消息进行处理（步骤 980 )，以构建包含有身份提供方关于客户机用户所存储的用户属性信 息的响应。识别具体用户属性的方式可以不同。例如，由身份提供方 所提供的用户属性信息可包括由服务提供方显式请求的用户属性信 息。此外或可选地，由身份提供方提供的用户属性信息可包括由服务 提供方隐式请求的用户属性信息，即，由身份提供方确定的足够用于 在服务提供方处执行用户帐户创建操作的用户属性信息。此外，身份 提供方可执行用于将对于附加用户属性信息的接收请求与服务提供方 先前的单点登录请求协调一致的操作，以确保服务提供方在没有足够 理由进行的条件下不试图获得用户属性。在身份提供方于步骤980处构建消息后，身份提供方，例如，采 用HTTP重定向消息（具有状态/原因代码"302"的HTTP响应消息）的形式，向客户机发送具有用户属性的消息（步骤982)。响应于从身 份提供方接收重定向消息，客户机向来自身份提供方的HTTP重定向 消息中的URI所标识的服务提供方处的合适服务，发送HTTP Get消息 (步骤984 )。假定在接收消息中给定用户属性信息，基于接收用户属性信息， 服务提供方执行或完成在服务提供方处的用户帐户创建操作（步骤 986);以此方式，可通过服务提供方实现单点登录请求，服务提供方 还为用户创建活动会话，并可进行用于访问保护资源的请求。在图9D 和图9E中，服务提供方提供对最初所请求的保护资源的访问（步骤 988),服务提供方向客户机发送包含因访问保护资源所得到的信息的 HTTP响应消息（步骤990)，从而，结束该处理。现参照图9E，通过从服务提供方直接向身份提供方发送SOAP消 息，服务提供方对其关于缺少用户属性信息的确定做出响应（步骤 992);来自服务提供方的消息包含有对于所需用户属性信息的请求。 然后，身份提供方对接收消息进行处理（步骤994)，以构建包含有身份提供方关于客户机用户所存储的用户属性信息的响应；同样，识别 具体用户属性的方式可以不同。身份提供方将具有所需用户属性的SOAP响应消息发送到客户机（步骤996 )。假定在接收消息中给定用 户属性信息，基于接收用户属性信息，服务提供方执行或完成在服务 提供方处的运行时刻用户帐户创建操作（步骤998);以此方式，可通 过服务提供方满足单点登录请求，服务提供方还为用户创建活动会话， 并可在步骤988和9卯进行用于访问保护资源的请求。现参照图IO，所示流程图表示，在由身份提供方启动的单点登录 操作期间，在服务提供方处执行运行时刻链接用户帐户创建操作的更 详细处理。图10所示流程图表示出，在图9B所示数据流图内在服务提 供方处进行的以服务提供方为中心的某些处理。处理开始于服务提供方接收来自身份提供方的用于基于单点登 录操作代表用户访问服务提供方处保护资源的请求（步骤1002)。应 该注意，保护资源可以是与用于满足单点登录请求的服务提供方功能</p>
    <p>相对应的端点；换而言之，可将来自身份提供方的请求直接重定向到 已知功能，以实现单点登录操作，这是由于用户未请求特定后端资源， 而仅仅是对服务提供方的总体访问。服务提供方从接收请求消息提取 用户标识符（步骤1004 )，并确定是否识别出用户标识符（步骤1006 )。如果服务提供方未识别出用户标识符，则服务提供方出于合适的 安全考虑，不能创建用于保护性访问其所托管计算资源的活动会话。 服务提供方提取在接收消息中可能包含的任何用户属性信息（步骤 1008)，并确定服务提供方此时是否具有足够用于为用户创建用户帐 户的用户信息（步骤1010)，例如生成用户注册表的表项所需的信息， 或确定通常由服务提供方执行以便为用户在服务提供方处创建本地用 户帐户的任何操作。如果服务提供方不具有足够用于为用户创建用户帐户的用户信 息，则服务提供方可向身份提供方发送请求，以获得附加用户属性信 息（步骤1012);这可采用同步或异步方式执行。服务提供方随后从 身份提供方接收附加用户属性（步骤1014)。应该注意，可将本发明的实施例实现为使得可针对属性信息提供 方执行服务提供方的用户属性检索操作。例如，服务提供方可向属性 信息提供方而非身份提供方发送关于用户属性的请求。或者，服务提 供方可向身份提供方发送关于用户属性的请求，身份提供方随后通过 向属性信息提供方发送请求来争得协助，从而代表服务提供方担当起 中间信任代理的作用。在联盟计算环境内关于属性信息提供方使用的 附加信息，可参看Blakley等人的 "Method and system for use-determined attribute storage in a federated environment"(美国 专利申请公开号US 2004/0128378 Al, 2004年7月1日出版，基于美国 专利申请号10/334,605，于2002年12月31日递交），该专利与本发明申 请具有共同受让人，从而将其引作参考。当在步骤1014处接收附加用户属性后，或者基于在步骤1008处提 取的在最初请求内可具有的任何用户属性信息，服务提供方执行链接 用户帐户创建操作（步骤1016);如以上所述，所执行用于在服务提</p>
    <p>供方处为用户创建链接用户帐户的操作可以不同。当在服务提供方处 创建了链接用户帐户之后，服务提供方能进行对最初请求的处理。然后，服务提供方判断是否有足够多的信息启动为用户新创建的帐户（步骤1018)。如果服务提供方依然没有足够多的信息用于启动 用户帐户，则判断服务提供方是否已经进行了太多次意在获得用户属 性以启动用户帐户的尝试（步骤1020);如果判断结果为否，则处理 返回步骤1012，试图获得必要的用户属性。否则，服务提供方执行某 种出错处理（步骤1022 )，这可能涉及将出错响应向回发送到身份提 供方。如果在步骤1018处服务提供方具有足够多的信息用来启动用户 帐户，则服务提供方为用户创建活动会话（步骤1024),这或是基于 在步骤1006处对所识别用户身份的成功认证，或是基于在步骤1016处 新创建的用户身份。然后，服务提供方为用于访问保护资源的最初请 求生成响应（步骤1026)，服务提供方将该响应发送到身份提供方（步 骤1028)，从而，结束该处理。可以在图7或图3中所示的示例性数据处理系统的场境中，描述参 照图9B所述的示例性数据流，或参照图10所述的示例性处理。为了执行单点登录操作，身份与属性服务（I&amp;AS) 356或718需 能够按照某种方式，在用户注册表内由单点登录请求识别出用户身份。 用户注册表可以是本地注册表，例如，专用于联盟功能的安装，如联 盟用户注册表358或720，或者可以是由企业内其他应用所共享的企业 注册表，诸如，企业用户注册表338或722。用户帐户信息或用户注册 信息需要I&amp;AS 356或718能够构建对用户进行本地识别的适当信息。 该信息可由用户名，属性集所表示，例如，组和/或角色和/或称呼， 或者隐性标识符，例如，自由联盟规范中描述的Nameldentifier。如果 身份提供方对于请求单点登录的用户所断言的信息，在本地注册表内 并未找到，则I&amp;AS 356或718不能按照本地的方式构建关于该用户的 信息，例如，创建由本地企业内实体使用的有效证书；此外，接触点 服务器342或702不能为该用户建立会话，并且该用户不能访问保护资源。本发明提供了 一种机制，用于防止为未经识别的用户（这在现有 技术方法中将会遇到)生成某种形式的错误代码。在附图所示本发明的 实施例中，当所接收用户身份信息未经识别时，为了满足企业的数据存储要求，I&amp;AS 356或718可试图适当创建用户帐户，记录或表项。 I&amp;AS 356或718在执行这些操作时基于身份提供方与服务提供方的联 盟伙伴之间的信任关系，例如，如在允许这种动作的配置策略内所提 供的。在最初请求中接收到的用户身份信息，可以是实际用户名值， 或者诸如自由联盟Nameldentifier的隐性数据值；可将该用户身份信息 用作为针对用户注册表的指针，由此，在随后某时刻，可访问该用户 信息，或者可通过一种临时的方式使用该信息，直至创建永久数据记 录为止，例如，作为针对包含临时信息的高速&#32233;存的指针。如果最初的单点登录请求包含关于用户的属性数据，则在为用户 本地创建用户帐户时，可将该属性信息直接添加到用户注册表。不过， 最初接收到的请求并非必然包含为用户本地创建用户帐户所需的全部 信息。在此情形中，与单点登录协议服务（SPS) 354或716&#8212;起工作 的I&amp;AS356或718，可向用户身份提供方发出属性查询，诸如，SAML 属性查询和/或WS-AttributeService请求，以检索关于该用户的附加信 息。从而，服务提供方可按照运行时刻方式（即，在暂停单点登录操 作时，或从另一临时观点来看，与单点登录操作并行发生或者与其一 部分并行发生），为用户创建用户帐户。服务提供方对这种运行时刻链接用户帐户创建操作所基于的信 任级别可以有所不同；所有服务提供方不必都允许实现全自动的、动 态确定的链接用户帐户创建操作。从而，在有些情况下，服务提供方 可能要求必须采取本地工作流程操作，例如，本地管理批准处理的类 型。并非按照全自动处理为用户直接创建用户帐户，联盟用户生命周 期管理（FULM)应用/服务352或708可将用户信息，包括附加的、带 外检索的用户属性，存储到某些形式的本地数据库中，而本地数据库 进而触发本地工作流程/批准处理。该要求允许在服务提供方处的管理 用户，根据本地策略要求等批准创建用户帐户。从而，运行时刻用户 创建操作可以是异步的，在此情形中，服务提供方可以向用户发送消 息，表明在服务提供方处正在为用户创建帐户，并表明用户可以在随 后某时刻在服务提供方处试图进行登录操作。如果用户需要被添加到的地方不止I&amp;AS可访问的用户注册表，则FULM服务352或708可以将 该信息发送到本地数据库，可从本地数据库启动本地用户帐户创建处 理；在此情形中，除本地I&amp;AS可访问的数据库之外，可在多个目的地 中为用户创建帐户/记录。应该注意，服务提供方可选择准许用户进行 时间受限、访问受限的会话，从而将用户限制于可访问资源的子集， 而非资源的全部集合，直至某一后续事件，例如，用于批准更宽访问 的某种工作流程处理得以完成，或者直至后来关于应给予用户的特权 进行了判断；之后，将以对于适当的资源访问级别，创建用户帐户。现在参照图11A，所示数据流图根据本发明的实施例描述了基于 HTTP重定向的拉取型单点登录操作，该操作当在联盟服务提供方处 执行运行时刻链接用户帐户创建操作时，由联盟服务提供方启动以允 许对联盟服务提供方处的保护资源进行访问。图11A-11D所示处理与 图9A-9B所示处理的区别主要在于单点登录操作的启动；图9A-9B所示 处理由身份提供方启动，而图11A-11D所示处理由服务提供方启动。参照图IIA，该处理开始于用户对服务提供方所托管的公共资源， 即，并不是在对其访问之前需针对用户实现认证操作的保护资源的资 源，进行浏览（步骤1102)。在随后某时刻，用户客户机向身份提供 方发送用于对需进行认证操作的保护资源进行访问的请求（步骤 1104)。服务提供方识别出，它不具有用户的优选身份提供方的标识 符，服务提供方提醒用户按照某种方式提供该信息（步骤1106)，例 如，通过网页中可由用户选择的控制。然后，客户机将关于用户所选 择的优选身份提供方的适当信息发送到服务提供方（步骤1108)。之后，服务提供方为用户构建拉取型单点登录请求（步骤lllO )。 在此示例中，服务提供方假定该用户是联盟用户，例如，假定身份提 供方为用户保持有某种联盟&#21029;名标识符。服务提供方例如以HTTP重  定向消息（具有状态/原因代码"302"的HTTP响应消息）的形式，将 单点登录请求发送到客户机（步骤1112)。响应于从服务提供方接收 重定向消息，客户机将HTTP Get消息发送到如来自服务提供方的 HTTP重定向消息中URI所标识的身份提供方（步骤1114)。如果需要的话，响应于接收到的拉取型单点登录请求，身份提供 方通过客户机对客户机用户进行认证操作（步骤1116);例如，如果 用户在身份提供方处已经登录，即，如果用户在身份提供方处已经具 有活动会话，则不需要认证操作。身份提供方对所接收请求进行评估(步骤1118)，身份提供方确定服务提供方还没有将用户身份作为联 盟请求的一部分提供给身份提供方。如果身份提供方还确定用户依然 不具有联盟身份，则身份提供方为该用户创建联盟身份，例如，为用 户创建别名标识符（步骤1120)。身份提供方构建拉取型单点登录响 应（步骤1122)，该响应包含为用户新创建的联盟身份，并且可选择 性地包含由身份提供方关于该用户管理的附加用户属性信息；该拉取 型单点登录响应可以具有或不具有与推送型单点登录响应相同的数据 格式特性。身份提供方例如按照HTTP重定向消息（具有状态/响应码"302"的HTTP响应消息）的形式，将单点登录响应发送到客户机（步 骤1124)。响应于从身份提供方接收到的重定向消息，客户机将HTTP Get消息发送到如来自身份提供方的HTTP重定向消息中URI所标识的 服务提供方（步骤1126)。然后，服务提供方处理单点登录响应（步骤1128),包括，例如， 拉取出为用户新创建的联盟标识符，并且也可以包括拉取与用户有关 的附加用户属性信息。之后，服务提供方用身份提供方提供的联盟标 识符为用户创建新链接用户帐户（步骤1130)，这也可能涉及使用来 自身份提供方的关于用户的某些用户属性信息（如果身份提供方已经 发送了该信息，以及如果服务提供方在创建新用户帐户时需要该信 息）。在用户基于新创建的用户帐户具有活动会话之后，服务提供方 提供对最初请求的保护资源的访问（步骤1132)，服务提供方将包括 因访问保护资源所获得的信息的HTTP响应消息发送到客户机（步骤 1134)，从而，结束该处理。现在参照图11B-11D，所示一组数据流图根据本发明的实施例描 述了基于HTTP重定向的拉取型单点登录操作，该操作当在联盟^L务 提供方处执行运行时刻链接用户帐户创建操作时，由联盟服务提供方 启动，以通过对来自联盟身份提供方的用户属性信息的附加检索，允 许对联盟服务提供方处的保护资源进行访问。按照与图11A，图11B中 所示类似的方式，描述了服务提供方可在所选定的身份提供方处请求 单点登录操作的处理；附图中相似的元件用相似附图标记来表示。不 过，图11仅示出了步骤1130处一般化的运行时刻链接用户帐户创建操 作，图11B中所示的处理与图11A中所示的处理在运行时刻链接用户帐 户创建操作方面存在差异，其涉及在图11A-11B中步骤1150"" 1164。现在参照图11B，与图11A中所示的处理不同，服务提供方试图 创建新用户帐户（步骤1150)，不过基于在单点登录中由身份提供方 提供给服务提供方的联盟用户身份信息，在服务提供方处不能立即创 建，或不能创建完全合适的用户帐户。换而言之，根据实施方式，服 务提供方不能创建或确定其不能在该时刻创建用户帐户，或者服务提 供方以时间受限或访问受限的特权创建用户帐户。从而，图11B中的 单点登录处理是不同的，这是由于服务提供方在单点登录操作期间识 别出服务提供方对于该用户还不具有链接用户帐户，同时还识别出服 务提供方需要来自身份提供方的与该用户有关的附加信息（步骤 1152)。更具体而言，服务提供方例如在其用户注册表或数据库中， 不具有能够使服务提供方确定具备用户合适特权集的足够信息；没有 该信息的话，服务提供方不能确定给予用户的会话/访问控制权的类 型。服务提供方从身份提供方提取出附加用户属性信息以完成链接 用户帐户创建操作的方式可有所不同；图IIC中步骤1154-1164或图 11D中步骤1172-1178表示出两个变型示例。图11C表示前向信道属性 检索操作，而图11D表示后向信道属性检索操作。从而，图11B中所示 的数据流图延续到图11C或图11D;在两种情况下，图11C和图11D中</p>
    <p>的数据流图以相似步骤结束。在图11C和图11D中，服务提供方提供对 在步骤1132处最初请求的保护资源的访问，服务提供方将包含有在步 骤l 134中由于访问保护资源所得到的信息的HTTP响应消息，发送到 客户机，从而，结束该处理。现在参照图11C，通过将HTTP重定向消息（具有状态/原因代码 "302"的HTTP响应消息）发送到客户机（步骤1154)，服务提供方 对其缺少用户属性信息的判断做出反应；来自服务提供方的消息包含 对附加用户属性信息的请求。重定向消息使用之前由身份提供方提供 给服务提供方的返回URI，将客户机重定向到身份提供方。响应于从 服务提供方接收到的重定向消息，客户机将HTTP Get消息发送到如来 自服务提供方的HTTP重定向消息中URI标识的身份提供方（步骤 1156)。然后，身份提供方对所接收消息进行处理（步骤1158)，以 构建包含由身份提供方关于客户机用户所保存的用户属性信息的响 应。识别具体用户属性的方式可有所不同。例如，由身份提供方提供 的用户属性信息可包括由服务提供方显式请求的用户属性信息。此外， 或可选的，身份提供方所提供的用户属性信息可包括由服务提供方隐 式请求的用户属性信息，即，由身份提供方确定的足以在服务提供方 处执行链接用户帐户创建操作的用户属性信息。此外，身份提供方可 执行用于使对于附加用户属性信息的接收请求与服务提供方先前的单 点登录请求协调一致的操作，以确保服务提供方在没有足够理由的条 件下，不试图获得用户属性。在身份提供方在步骤1158处构建消息之后，身份提供方例如按照 HTTP重定向消息（具有状态/原因代码"302"的HTTP响应消息）的 形式，将具有附加用户属性的消息发送到客户机（步骤1160)。响应 于从身份提供方接收到重定向消息，客户机将HTTP Get消息发送到如 来自身份提供方的HTTP重定向信息中URI标识的服务提供方处适当 服务（步骤1162)。假设在接收到的消息中给定附加用户属性信息，则服务提供方基 于接收用户属性信息，执行或完成在服务提供方处的运行时刻链接用</p>
    <p>户帐户创建操作（步骤1164);以此方式，可由服务提供方完成单点 登录请求，服务提供方还为用户创建活动会话，并在步骤1132和1134 处，可进行访问保护资源的请求。现在参照图11D,服务提供方通过将SOAP消息从服务提供方直 接发送到身份提供方，对其缺少用户属性信息的确定做出响应（步骤 1172);来自服务提供方的消息包含对附加用户属性信息的请求。然 后，身份提供方对所接收消息进行处理（步骤1174)，以构建包括由 身份提供方关于客户机用户所存储的用户属性信息的响应；同样，如 上所述，识别具体用户属性的方式可有所不同。身份提供方将具有附 加用户属性的SOAP消息发送到客户机（步骤1176)。假设接收到的 消息中存在附加用户属性信息，则服务提供方基于接收到的用户属性 信息执行或完成在服务提供方处的运行时刻链接用户帐户创建操作 (1178);按照这种方式，服务提供方可完成单点登录请求，服务提 供方还为用户创建活动会话，并且在步骤1132和1134处可进行访问保 护资源的请求。结论鉴于上面给出的本发明的详细描述，应当明白本发明的优点。当 身份提供方代表用户试图在服务提供方处启动单点登录操作以获得对 属于服务提供方的受控资源的访问时，服务提供方可能在接收请求中 未识别出用户标识符或者其他用户身份信息。在现有技术中，这种情 形将产生差错。通过本发明，服务提供方可动态地执行链接用户帐户创建操作， 以作为单点登录操作的一部分。如果需要，服务提供方可以从身份提 供方拉取出附加用户属性信息，以便按照由服务提供方的身份管理功 能本地所需的方式，获得对于用户的所需用户属性。重要的是要注意，尽管按照全功能化数据处理系统的场境描述了 本发明，不过，本领域普通技术人员可知，本发明的处理能够&#37318;用计 算机可读介质中的指令形式，以及各种其他形式得以发布，而与用于 载介质的具体类型无关。计算机可读介质的示例包括EPROM， ROM,磁带，纸张，软盘，硬盘驱动器，RAM和 CD-ROM的介质，以及诸如数字和模拟通信链路的传输型介质。方法通常被认为是能够导致预期结果的自身一致性步骤序列。这 些步骤需要对物理量进行物理处理。通常，尽管并非必要，这些量也 &#37318;取能够存储，转移，组合，比较和其他处理的电或磁信号的形式。 很方便的是，在有些时侯，主要是出于一般用途的原因，将这些信号 称作位，值，参数，小项，元素，对象，符号，特性，项，数等。不 过，应当注意，所有这些项或类似的项都与适当的物理量有关，且仅 仅是用于这些量的方便标记。出于说明的目的给出了关于本发明的描述，而非穷举所披露的实 施例或对所披露的实施例进行限制。本领域普通技术人员显然可想到 各种变型和改变。实施例的选择是为了解释本发明的原理及其实际应 用，本领域普通技术人员理解到，为了适合其他预期用途，本发明能 够以各种变型来实现各种实施例。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102065131A?cl=zh">CN102065131A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月3日</td><td class="patent-data-table-td patent-date-value">2011年5月18日</td><td class="patent-data-table-td ">湖南大学</td><td class="patent-data-table-td ">单点登录的方式和登录认证</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102801713A?cl=zh">CN102801713A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年7月23日</td><td class="patent-data-table-td patent-date-value">2012年11月28日</td><td class="patent-data-table-td ">中国联合网络通信集团有限公司</td><td class="patent-data-table-td ">网站登录方法、系统和访问管理平台</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=zr1aBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0021200000">G06F21/20</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=zr1aBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F21/41">G06F21/41</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=zr1aBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L63/0815">H04L63/0815</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">G06F21/41</span>, <span class="nested-value">H04L63/08B</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2008年2月27日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2008年4月23日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年12月9日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/27dc3b5cee57166915a4/CN101133421A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E7%94%A8%E4%BA%8E%E8%BF%90%E8%A1%8C%E6%97%B6%E5%88%BB%E7%94%A8%E6%88%B7%E5%B8%90%E6%88%B7%E5%88%9B%E5%BB%BA%E6%93%8D.pdf?id=zr1aBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U1_FRvbCsPODFCM3wyaWcPAml9vcw"},"sample_url":"https://www.google.com/patents/reader?id=zr1aBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>