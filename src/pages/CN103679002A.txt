<!DOCTYPE html><html><head><title>专利 CN103679002A - 监控文件变化的方法、装置及服务器 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="监控文件变化的方法、装置及服务器"><meta name="DC.contributor" content="黄柏林" scheme="inventor"><meta name="DC.contributor" content="李名进" scheme="inventor"><meta name="DC.contributor" content="张晔" scheme="inventor"><meta name="DC.contributor" content="小米科技有限责任公司" scheme="assignee"><meta name="DC.date" content="2013-12-12" scheme="dateSubmitted"><meta name="DC.description" content="本公开是关于一种监控文件变化的方法、装置及服务器，属于计算机领域。该方法包括：获取监控目录，并扫描监控目录包含的每个文件；生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合；将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对；根据比对结果确定监控目录包含的文件是否发生变化。本公开通过比对当前文件信息与参考文件信息来确认文件是否被修改，并及时发现文件的增删情况。另外，通过扫描监控目录包含的每一个文件，并生成每个文件对应的签名值的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。"><meta name="DC.date" content="2014-3-26"><meta name="DC.relation" content="CN:101236554:A" scheme="references"><meta name="DC.relation" content="CN:101604268:A" scheme="references"><meta name="DC.relation" content="CN:101639880:A" scheme="references"><meta name="DC.relation" content="CN:102360410:A" scheme="references"><meta name="DC.relation" content="US:20100169972:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:103679002:A"><meta name="citation_patent_application_number" content="CN:201310681390"><link rel="canonical" href="https://www.google.com/patents/CN103679002A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN103679002A?cl=zh"/><meta name="title" content="专利 CN103679002A - 监控文件变化的方法、装置及服务器"/><meta name="description" content="本公开是关于一种监控文件变化的方法、装置及服务器，属于计算机领域。该方法包括：获取监控目录，并扫描监控目录包含的每个文件；生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合；将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对；根据比对结果确定监控目录包含的文件是否发生变化。本公开通过比对当前文件信息与参考文件信息来确认文件是否被修改，并及时发现文件的增删情况。另外，通过扫描监控目录包含的每一个文件，并生成每个文件对应的签名值的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。"/><meta property="og:title" content="专利 CN103679002A - 监控文件变化的方法、装置及服务器"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN103679002A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN103679002A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=h1T5CAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN103679002A&amp;usg=AFQjCNESaS4ow0Uf5YyxNt9y5RtPeLNqqg" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/5476f30414db675e1062/CN103679002A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/5476f30414db675e1062/CN103679002A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN103679002A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN103679002A?cl=en&amp;hl=zh-CN"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN103679002A?cl=zh" style="display:none"><span itemprop="description">本公开是关于一种监控文件变化的方法、装置及服务器，属于计算机领域。该方法包括：获取监控目录，并扫描监控目录包含的每个文件；生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合；将...</span><span itemprop="url">https://www.google.com/patents/CN103679002A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN103679002A - 监控文件变化的方法、装置及服务器</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN103679002A - 监控文件变化的方法、装置及服务器" title="专利 CN103679002A - 监控文件变化的方法、装置及服务器"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN103679002 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201310681390</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2014年3月26日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2013年12月12日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2013年12月12日</td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201310681390.9, </span><span class="patent-bibdata-value">CN 103679002 A, </span><span class="patent-bibdata-value">CN 103679002A, </span><span class="patent-bibdata-value">CN 201310681390, </span><span class="patent-bibdata-value">CN-A-103679002, </span><span class="patent-bibdata-value">CN103679002 A, </span><span class="patent-bibdata-value">CN103679002A, </span><span class="patent-bibdata-value">CN201310681390, </span><span class="patent-bibdata-value">CN201310681390.9</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%BB%84%E6%9F%8F%E6%9E%97%22">黄柏林</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%9D%8E%E5%90%8D%E8%BF%9B%22">李名进</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%BC%A0%E6%99%94%22">张晔</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%B0%8F%E7%B1%B3%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E8%B4%A3%E4%BB%BB%E5%85%AC%E5%8F%B8%22">小米科技有限责任公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103679002A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103679002A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103679002A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (5),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (3),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (1)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=h1T5CAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201310681390&amp;usg=AFQjCNFeKzkeeA4dgj9IUPytRPqeQj58Rg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=h1T5CAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D103679002A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGpl78XjX9SklF8DIDDrF5b5-IPyA"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT134711756" lang="ZH" load-source="patent-office">监控文件变化的方法、装置及服务器</invention-title>
      </span><br><span class="patent-number">CN 103679002 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA132095470" lang="ZH" load-source="patent-office">
    <div class="abstract">本公开是关于一种监控文件变化的方法、装置及服务器，属于计算机领域。该方法包括：获取监控目录，并扫描监控目录包含的每个文件；生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合；将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对；根据比对结果确定监控目录包含的文件是否发生变化。本公开通过比对当前文件信息与参考文件信息来确认文件是否被修改，并及时发现文件的增删情况。另外，通过扫描监控目录包含的每一个文件，并生成每个文件对应的签名值的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(15)</span></span></div><div class="patent-text"><div mxw-id="PCLM59891554" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种监控文件变化的方法，其特征在于，所述方法包括:  获取监控目录，并扫描所述监控目录包含的每个文件；  生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；  将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，所述参考文件信息集合中的每条参考文件信息包括预先扫描所述监控目录后得到的一个文件的文件名及对应的签名值；  根据比对结果确定所述监控目录包含的文件是否发生变化。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的方法，其特征在于，所述生成与扫描的每个文件对应的签名值，包括:  获取扫描的每个文件的文件特征信息，所述文件特征信息包括文件名、文件大小、文件权限、文件修改时间和/或文件内容；  根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的方法，其特征在于，所述根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值，包括:  根据所述每个文件的文件特征信息通过哈希算法计算生成每个文件对应的签名值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求1至3中任一项权利要求所述的方法，其特征在于，所述将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，包括:  按文件名对所述当前文件信息集合中的每条当前文件信息及所述参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表；  设置第一指针和第二指针，并将所述第一指针指向所述第一列表的第一条当前文件信息和所述第二指针指向所述第二列表的第一条参考文件信息；  从所述第一指针指向的第一条当前文件信息和所述第二指针指向的第一条参考文件信息开始，判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同；   如果所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名相同，则判断所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值是否相同；  如果所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值相同，则确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件未发生变化，否则，确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件被修改；  将所述第一指针和所述第二指针分别下移一位，返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求4所述的方法，其特征在于，所述判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同之后，还包括:  如果所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名不同，则比较所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名的文件名顺序；  如果所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在前，则确定所述第一指针指向的当前文件信息对应的文件为所述监控目录中新增加的文件，并将所述第一指针下移一位；返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束；如果所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在后，则确定所述第二指针指向的参考文件信息对应的文件为所述监控目录中被删除的文件，并将所述第二指针下移一位；返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求4所述的方法，其特征在于，所述判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同之后，还包括:  判断所述第一指针指向的当前文件信息或所述第二指针指向的参考文件信息是否为空;  如果所述第一指针指向的当前文件信息为空，所述第二指针指向的参考文件信息不为空，则确定所述第二指针指向的参考文件信息对应的文件至所述第二列表末尾的参考文件信息对应的文件为被删除的文件；   如果所述第二指针指向的参考文件信息为空，所述第一指针指向的当前文件信息不为空，则确定所述第一指针指向的当前文件信息对应的文件至所述第一列表末尾的当前文件信息对应的文件为新增加的文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求1所述的方法，其特征在于，所述得到包含文件名及签名值的当前文件信息集合之后，还包括:  存储所述当前文件信息集合，作为监控文件变化的参考文件信息集合。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8.&#8212;种监控文件变化的装置，其特征在于，所述装置包括:  获取模块，用于获取监控目录；  扫描模块，用于扫描所述监控目录包含的每个文件；  生成模块，用于生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；  比对模块，用于将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，所述参考文件信息集合中的每条参考文件信息包括预先扫描所述监控目录后得到的一个文件的文件名及对应的签名值；  确定模块，用于根据比对结果确定所述监控目录包含的文件是否发生变化。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9.根据权利要求8所述的装置，其特征在于，所述生成模块，包括:  获取单元，用于获取扫描的每个文件的文件特征信息，所述文件特征信息包括文件名、文件大小、文件权限、文件修改时间和/或文件内容；  生成单元，用于根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10.根据权利要求9所述的装置，其特征在于，所述生成单元，用于根据所述每个文件的文件特征信息通过哈希算法计算生成每个文件对应的签名值。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11.根据权利要求8至10中任一项权利要求所述的装置，其特征在于，所述比对模块，包括:  排序单元，用于按文件名对所述当前文件信息集合中的每条当前文件信息及所述参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表；  设置单元，用于设置第一指针和第二指针，并将所述第一指针指向所述第一列表的第一条当前文件信息和所述第二指针指向所述第二列表的第一条参考文件信息；  第一判断单元，用于从所述第一指针指向的第一条当前文件信息和所述第二指针指向的第一条参考文件信息开始，判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同；  第二判断单元，用于当所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名相同时，判断所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值是否相同；  第一确定单元，用于当所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值相同时，确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件未发生变化，否则，确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件被修改；  第一下移单元，用于将所述第一指针和所述第二指针分别下移一位；  第一返回单元，用于返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12.根据权利要求11所述的装置，其特征在于，所述比对模块，还包括:  比较单元，用于当所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名不同时，比较所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名的文件名顺序；  第二确定单元，用于当所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在前时，确定所述第一指针指向的当前文件信息对应的文件为所述监控目录中新增加的文件；  第二下移单元，用于将所述第一指针下移一位；  第二返回单元，用于返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束；  第三确定单元，用于当所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在后时，确定所述第二指针指向的参考文件信息对应的文件为所述监控目录中被删除的文件；  第三下移单元， 用于将所述第二指针下移一位；第三返回单元，用于返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13.根据权利要求11所述的装置，其特征在于，所述比对模块，还包括:  第三判断单元，用于判断所述第一指针指向的当前文件信息或所述第二指针指向的参考文件信息是否为空；  第四确定单元，用于当所述第一指针指向的当前文件信息为空，所述第二指针指向的参考文件信息不为空时，确定所述第二指针指向的参考文件信息对应的文件至所述第二列表末尾的参考文件信息对应的文件为被删除的文件；当所述第二指针指向的参考文件信息为空，所述第一指针指向的当前文件信息不为空时，确定所述第一指针指向的当前文件信息对应的文件至所述第一列表末尾的当前文件信息对应的文件为新增加的文件。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="14" class="claim">
      <div class="claim-text">14.根据权利要求8所述的装置，其特征在于，所述装置，还包括:  存储模块，用于存储所述当前文件信息集合，作为监控文件变化的参考文件信息集合。</div>
    </div>
    </div> <div class="claim"> <div num="15" class="claim">
      <div class="claim-text">15.一种服务器，其特征在于，所述服务器包括有存储器，以及一个或者一个以上的程序，其中一个或者一个以上程序存储于存储器中，且经配置以由一个或者一个以上处理器执行，所述一个或者一个以上程序包含用于进行以下操作的指令:  获取监控目录，并扫描所述监控目录包含的每个文件；  生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；  将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，所述参考文件信息集合中的每条参考文件信息包括预先扫描所述监控目录后得到的一个文件的文件名及对应的签名值；  根据比对结果确定所述监控目录包含的文件是否发生变化。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES67876625" lang="ZH" load-source="patent-office" class="description">
    <p>监控文件变化的方法、装置及服务器</p>
    <p>技术领域</p>
    <p>[0001]	本公开涉及计算机领域，特别涉及一种监控文件变化的方法、装置及服务器。</p>
    <p>背景技术</p>
    <p>[0002]	随着计算机技术的迅速发展，利用计算机处理的事务越来越多，相应地，产生的文件也越来越多。通常，在计算机的文件系统中保存有运行应用程序的各种文件，当这些文件中的某些文件被篡改后，可能会给应用程序造成无法挽回的损失。例如，当某一应用程序中的核心配置文件被修改、被删除或在应用程序的文件系统中增加其他具有危害性的文件后，可能会给应用程序造成无法挽回的损失。因此，有必要提出一种监控文件变化的方法，以确保计算机文件系统的安全性。</p>
    <p>发明内容</p>
    <p>[0003]	为了克服相关技术中存在的问题，本公开提供了一种监控文件变化的方法、装置及服务器。所述技术方案如下:</p>
    <p>[0004]	第一方面，本公开提供了一种监控文件变化的方法，所述方法包括:</p>
    <p>[0005]	获取监控目录，并扫描所述监控目录包含的每个文件；</p>
    <p>[0006]	生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；</p>
    <p>[0007]	将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，所述参考文件信息集合中的每条参考文件信息包括预先扫描所述监控目录后得到的一个文件的文件名及对应的签名值；</p>
    <p>[0008]	根据比对结果确定所述监控目录包含的文件是否发生变化。</p>
    <p>[0009]	结合第一方面，在第一方面的第一种可能的实现方式中，所述生成与扫描的每个文件对应的签名值，包括:</p>
    <p>[0010]	获取扫描的每个文件的文件特征信息，所述文件特征信息包括文件名、文件大小、文件权限、文件修改时间和/或文件内容；</p>
    <p>[0011]	根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</p>
    <p>[0012]	结合第一方面的第一种可能的实现方式，在第一方面的第二种可能的实现方式中，所述根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值，包括:</p>
    <p>[0013]	根据所述每个文件的文件特征信息通过哈希算法计算生成每个文件对应的签名值。</p>
    <p>[0014]	结合第一方面至第一方面的第二种可能的实现方式中的任一种可能的实现方式，在第一方面的第三种可能的实现方式中，所述将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，包括:</p>
    <p>[0015]	按文件名对所述当前文件信息集合中的每条当前文件信息及所述参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表；</p>
    <p>[0016]	设置第一指针和第二指针，并将所述第一指针指向所述第一列表的第一条当前文件信息和所述第二指针指向所述第二列表的第一条参考文件信息；</p>
    <p>[0017]	从所述第一指针指向的第一条当前文件信息和所述第二指针指向的第一条参考文件信息开始，判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同；</p>
    <p>[0018]	如果所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名相同，则判断所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值是否相同；</p>
    <p>[0019]	如果所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值相同，则确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件未发生变化，否则，确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件被修改；</p>
    <p>[0020]	将所述第一指针和所述第二指针分别下移一位，返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0021]	结合第一方面的第三种可能的实现方式，在第一方面的第四种可能的实现方式中，所述判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同之后，还包括:</p>
    <p>[0022]	如果所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名不同，则比较所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名的文件名顺序；</p>
    <p>[0023]	如果所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在前，则确定所述第一指针指向的当前文件信息对应的文件为所述监控目录中新增加的文件，并将所述第一指针下移一位；返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束；</p>
    <p>[0024]	如果所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在后，则确定所述第二指针指向的参考文件信息对应的文件为所述监控目录中被删除的文件，并将所述第二指针下移一位；返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0025]	结合第一方面的第三种可能的实现方式，在第一方面的第五种可能的实现方式中，所述判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同之后，还包括:</p>
    <p>[0026]	判断所述第一指针指向的当前文件信息或所述第二指针指向的参考文件信息是否为空；</p>
    <p>[0027]	如果所述第一指针指向的当前文件信息为空，所述第二指针指向的参考文件信息不为空，则确定所述第二指针指向的参考文件信息对应的文件至所述第二列表末尾的参考文件信息对应的文件为被删除的文件；</p>
    <p>[0028]	如果所述第二指针指向的参考文件信息为空，所述第一指针指向的当前文件信息不为空，则确定所述第一指针指向的当前文件信息对应的文件至所述第一列表末尾的当前文件信息对应的文件为新增加的文件。</p>
    <p>[0029]	结合第一方面，在第一方面的第六种可能的实现方式中，所述得到包含文件名及签名值的当前文件信息集合之后，还包括:</p>
    <p>[0030]	存储所述当前文件信息集合，作为监控文件变化的参考文件信息集合。</p>
    <p>[0031]	第二方面，本公开提供了一种监控文件变化的装置，所述装置包括:</p>
    <p>[0032]	获取模块，用于获取监控目录；</p>
    <p>[0033]	扫描模块，用于扫描所述监控目录包含的每个文件；</p>
    <p>[0034]	生成模块，用于生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；</p>
    <p>[0035]	比对模块，用于将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，所述参考文件信息集合中的每条参考文件信息包括预先扫描所述监控目录后得到的一个文件的文件名及对应的签名值；</p>
    <p>[0036]	确定模块，用于根据比对结果确定所述监控目录包含的文件是否发生变化。</p>
    <p>[0037]	结合第二方面，在第二方面的第一种可能的实现方式中，所述生成模块，包括:</p>
    <p>[0038]	获取单元，用于获取扫描的每个文件的文件特征信息，所述文件特征信息包括文件名、文件大小、文件权限、文件修改时间和/或文件内容；</p>
    <p>[0039]	生成单元，用于根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</p>
    <p>[0040]	结合第二方面的第一种可能的实现方式，在第二方面的第二种可能的实现方式中，所述生成单元，用于根据所述每个文件的文件特征信息通过哈希算法计算生成每个文件对应的签名值。</p>
    <p>[0041]	结合第二方面至第二方面的第二种可能的实现方式中的任一种可能的实现方式，在第二方面的第三种可能的实现方式中，所述比对模块，包括:</p>
    <p>[0042]	排序单元，用于按文件名对所述当前文件信息集合中的每条当前文件信息及所述参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表；</p>
    <p>[0043]	设置单元，用于设置第一指针和第二指针，并将所述第一指针指向所述第一列表的第一条当前文件信息和所述第二指针指向所述第二列表的第一条参考文件信息；</p>
    <p>[0044]	第一判断单元，用于从所述第一指针指向的第一条当前文件信息和所述第二指针指向的第一条参考文件信息开始，判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同；</p>
    <p>[0045]	第二判断单元，用于当所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名相同时，判断所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值是否相同；</p>
    <p>[0046]	第一确定单元，用于当所述第一指针指向的当前文件信息中的签名值和所述第二指针指向的参考文件信息中的签名值相同时，确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件未发生变化，否则，确定所述第一指针指向的当前文件信息对应的文件相对所述第二指针指向的参考文件信息对应的文件被修改；</p>
    <p>[0047]	第一下移单元，用于将所述第一指针和所述第二指针分别下移一位；</p>
    <p>[0048]	第一返回单元，用于返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0049]	结合第二方面的第三种可能的实现方式，在第二方面的第四种可能的实现方式中，所述比对模块，还包括:</p>
    <p>[0050]	比较单元，用于当所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名不同时，比较所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名的文件名顺序；</p>
    <p>[0051]	第二确定单元，用于当所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在前时，确定所述第一指针指向的当前文件信息对应的文件为所述监控目录中新增加的文件；</p>
    <p>[0052]	第二下移单元，用于将所述第一指针下移一位；</p>
    <p>[0053]	第二返回单元，用于返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束；</p>
    <p>[0054]	第三确定单元，用于当所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在后时，确定所述第二指针指向的参考文件信息对应的文件为所述监控目录中被删除的文件；</p>
    <p>[0055]	第三下移单元，用于将所述第二指针下移一位；</p>
    <p>[0056]	第三返回单元，用于返回判断所述第一指针指向的当前文件信息中的文件名和所述第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将所述第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0057]	结合第二方面的第三种可能的实现方式，在第二方面的第五种可能的实现方式中，所述比对模块，还包括:</p>
    <p>[0058]	第三判断单元，用于判断所述第一指针指向的当前文件信息或所述第二指针指向的参考文件信息是否为空；</p>
    <p>[0059]	第四确定单元，用于当所述第一指针指向的当前文件信息为空，所述第二指针指向的参考文件信息不为空时，确定所述第二指针指向的参考文件信息对应的文件至所述第二列表末尾的参考文件信息对应的文件为被删除的文件；当所述第二指针指向的参考文件信息为空，所述第一指针指向的当前文件信息不为空时，确定所述第一指针指向的当前文件信息对应的文件至所述第一列表末尾的当前文件信息对应的文件为增加的文件。</p>
    <p>[0060]	结合第二方面，在第二方面的第六种可能的实现方式中，所述装置，还包括:[0061]	存储模块，用于存储所述当前文件信息集合，作为监控文件变化的参考文件信息</p>
    <p>隹A</p>
    <p>   口 O</p>
    <p>[0062]	第三方面，本公开提供了一种监控文件变化的服务器，所述服务器包括有存储器，以及一个或者一个以上的程序，其中一个或者一个以上程序存储于存储器中，且经配置以由一个或者一个以上处理器执行，所述一个或者一个以上程序包含用于进行以下操作的指令:</p>
    <p>[0063]	获取监控目录，并扫描所述监控目录包含的每个文件；</p>
    <p>[0064]	生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；</p>
    <p>[0065]	将所述监控目录的当前文件信息集合与预先存储的所述监控目录的参考文件信息集合进行比对，所述参考文件信息集合中的每条参考文件信息包括预先扫描所述监控目录后得到的一个文件的文件名及对应的签名值；</p>
    <p>[0066]	根据比对结果确定所述监控目录包含的文件是否发生变化。</p>
    <p>[0067]	本公开的一些有益效果可以包括:</p>
    <p>[0068]	通过扫描获取到的监控目录所包含的每个文件，生成与扫描的每个文件对应的签名值后，得到包含文件名及签名值的当前文件信息集合，并将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，根据比对结果确定监控目录包含的文件是否发生变化，不仅能够确认文件是否被修改，而且能够及时发现监控目录中文件的增删情况。另外，通过扫描监控目录包含的每一个文件、生成每个文件对应的签名值以得到当前文件信息的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。</p>
    <p>[0069]	应当理解的是，以上的一般描述和后文的细节描述仅是示例性的，并不能限制本公开。</p>
    <p>附图说明</p>
    <p>[0070]	为了更清楚地说明本公开中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本公开的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。</p>
    <p>[0071]	图1是本公开一个实施例提供的一种监控文件变化的方法的示例性流程图；</p>
    <p>[0072]	图2是本公开另一个实施例提供的一种监控文件变化的方法的示例性流程图；</p>
    <p>[0073]	图3是本公开另一个实施例提供的一种确定文件变化情况的示例性流程图；</p>
    <p>[0074]	图4是本公开另一个实施例提供的一种确定文件变化情况的示例性流程图；</p>
    <p>[0075]	图5是本公开另一个实施例提供的一种监控文件变化的装置结构示意图；</p>
    <p>[0076]	图6是本公开另一个实施例提供的一种生成模块的结构示意图；</p>
    <p>[0077]	图7是本公开另一个实施例提供的一种比对模块的结构示意图；</p>
    <p>[0078]	图8是本公开另一个实施例提供的一种比对模块的结构示意图；</p>
    <p>[0079]	图9是本公开另一个实施例提供的一种比对模块的结构示意图；</p>
    <p>[0080]	图10是本公开另一个实施例提供的一种监控文件变化的装置结构示意图；</p>
    <p>[0081]	图11是本公开另一个实施例提供的一种服务器的结构示意图。[0082]	通过上述附图，已示出本公开明确的实施例，后文中将有更详细的描述。这些附图和文字描述并不是为了通过任何方式限制本公开构思的范围，而是通过参考特定实施例为本领域技术人员说明本公开的概念。</p>
    <p>具体实施方式</p>
    <p>[0083]	为使本公开的目的、技术方案和优点更加清楚明白，下面结合实施方式和附图，对本公开做进一步详细说明。在此，本公开的示意性实施方式及其说明用于解释本公开，但并不作为对本公开的限定。</p>
    <p>[0084]	本公开实施例提供一种监控文件变化的方法，以下结合附图对本公开进行详细说明。</p>
    <p>[0085]	随着计算机技术的不断发展，利用计算机处理的事务越来越多，因此，会产生越来越多的计算机文件，形成了包含众多文件的计算机文件系统。为了确保计算机文件系统的安全，需要对关键目录下的文件的变化情况进行实时监控，以及时发现文件系统中文件的变化情况。本公开实施例提供了一种监控文件变化的方法，利用该方法能够实现对文件系统中关键目录下的文件的变化情况进行实时监控。其中，本公开实施例提供的监控文件变化的方法能够及时发现关键目录下文件是否被修改，是否有新增加的文件以及是否有被删除的文件。</p>
    <p>[0086]	在一个实施例中，提供了一种监控文件变化的方法。参见图1，本公开实施例提供的方法流程包括:</p>
    <p>[0087]	在步骤101中，获取监控目录，并扫描监控目录包含的每个文件。</p>
    <p>[0088]	在步骤102中，生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值。</p>
    <p>[0089]	在步骤103中，将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，参考文件信息集合中的每条参考文件信息包括预先扫描监控目录后得到的一个文件的文件名及对应的签名值。</p>
    <p>[0090]	在步骤104中，根据比对结果确定监控目录包含的文件是否发生变化。</p>
    <p>[0091]	本公开实施例提供的方法，通过扫描获取到的监控目录所包含的每个文件，生成与扫描的每个文件对应的签名值后，得到包含文件名及签名值的当前文件信息集合，并将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，根据比对结果确定监控目录包含的文件是否发生变化，不仅能够确认文件是否被修改，而且能够及时发现监控目录中文件的增删情况。另外，通过扫描监控目录包含的每一个文件、生成每个文件对应的签名值以得到当前文件信息的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。</p>
    <p>[0092]	在另一个实施例中，生成与扫描的每个文件对应的签名值，包括:</p>
    <p>[0093]	获取扫描的每个文件的文件特征信息，文件特征信息包括文件名、文件大小、文件权限、文件修改时间和/或文件内容；</p>
    <p>[0094]	根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</p>
    <p>[0095]	在另一个实施例中，根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值，包括:[0096]	根据所述每个文件的文件特征信息通过哈希算法计算生成每个文件对应的签名值。</p>
    <p>[0097]	在另一个实施例中，将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，包括:</p>
    <p>[0098]	按文件名对当前文件信息集合中的每条当前文件信息及参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表；</p>
    <p>[0099]	设置第一指针和第二指针，并将第一指针指向第一列表的第一条当前文件信息和第二指针指向第二列表的第一条参考文件信息；</p>
    <p>[0100]	从第一指针指向的第一条当前文件信息和第二指针指向的第一条参考文件信息开始，判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同；</p>
    <p>[0101]	如果第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名相同，则判断第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值是否相同；</p>
    <p>[0102]	如果第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值相同，则确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件未发生变化，否则，确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件被修改；</p>
    <p>[0103]	将第一指针和第二指针分别下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0104]	在另一个实施例中，判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同之后，还包括:</p>
    <p>[0105]	如果第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名不同，则比较第一指针指向的当前文件信息中的文件名对应的二进制数值和第二指针指向的参考文件信息中的文件名的文件名顺序；</p>
    <p>[0106]	如果第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在前，则确定第一指针指向的当前文件信息对应的文件为监控目录中新增加的文件，并将第一指针下移一位；返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束；</p>
    <p>[0107]	如果所述第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在后，则确定第二指针指向的参考文件信息对应的文件为监控目录中被删除的文件，并将第二指针下移一位；返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0108]	在另一个实施例中，判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同之后，还包括:[0109]	判断第一指针指向的当前文件信息或第二指针指向的参考文件信息是否为空；</p>
    <p>[0110]	如果第一指针指向的当前文件信息为空，第二指针指向的参考文件信息不为空，则确定第二指针指向的参考文件信息对应的文件至第二列表末尾的参考文件信息对应的文件为被删除的文件；</p>
    <p>[0111]	如果第二指针指向的参考文件信息为空，第一指针指向的当前文件信息不为空，则确定第一指针指向的当前文件信息对应的文件至第一列表末尾的当前文件信息对应的文件为新增加的文件。</p>
    <p>[0112]	在另一个实施例中，得到包含文件名及签名值的当前文件信息集合之后，还包括:</p>
    <p>[0113]	存储当前文件信息集合，作为监控文件变化的参考文件信息集合。</p>
    <p>[0114]	在另一个实施例中，提供了一种监控文件变化的方法。参见图2，本公开实施例提供的方法流程包括:</p>
    <p>[0115]	在步骤201中，获取监控目录，并扫描该监控目录包含的每个文件。</p>
    <p>[0116]	由于本公开实施例提供的方法支持通过扫描监控目录中包含的文件来监控该监控目录下文件的变化情况，因此，为了获得该监控目录中包含的每个文件的情况，在监控文件的具体变化情况之前，需要获取监控目录，并扫描该监控目录包含的每个文件。关于获取监控目录以及扫描该监控目录包含的每个文件的方式，本公开实施例不作具体限定。</p>
    <p>[0117]	另外，为了实时发现监控目录包含的文件的变化情况，可以定时对监控目录进行扫描。关于定时扫描监控目录的时间间隔，本公开实施例不作具体限定。具体实施时，可以根据监控目录包含的文件的重要程度设置定时扫描的时间间隔，例如，可以每隔5min (分钟)、IOmin扫描监控目录包含的文件等。</p>
    <p>[0118]	在步骤202中，生成与扫描的每个文件对应的签名值。</p>
    <p>[0119]	其中，生成与扫描的每个文件对应的签名值的方式，可以有很多种，具体实施时，包括但不限于采用如下方式:</p>
    <p>[0120]	获取扫描的每个文件的文件特征信息，并根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</p>
    <p>[0121]	其中，文件特征信息包括但不限于文件名、文件大小、文件权限、文件修改时间和/或文件内容。另外，如果操作系统支持，该文件属性还可以包括该文件所属的组/用户。</p>
    <p>[0122]	具体地，由于文件特征信息可以有很多种组合方式，因此，根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值包括但不限于如下几种情况:</p>
    <p>[0123]	第一种情况:如果文件特征信息仅包括文件名、文件大小、文件权限、文件修改时间等文件属性信息，则在生成与扫描的每个文件对应的签名值时，可以仅根据文件属性信息生成对应的签名值。由于利用该方法生成与扫描的每个文件对应的签名值时，通过访问文件属性信息即可实现，因此，生成签名的操作简单且快捷。</p>
    <p>[0124]	第二种情况:如果文件特征信息如果仅包括文件内容，则可以直接根据文件内容生成对应的签名值。由于该方法直接根据文件内容生成对应的签名值，因此，可以监控文件中任何内容的变化，能够更好地确保文件的安全性。例如，即使文件中的某个字节被修改，该被修改情况也可以通过签名值显示出来，确保能够发现文件中的任何被修改情况。</p>
    <p>[0125]	第三种情况:如果文件特征信息既包括文件名、文件大小、文件权限、文件修改时间等文件属性信息，也包括文件内容，则同时根据文件属性信息和文件内容生成与扫描的每个文件对应的签名值。需要说明的是，由于采用该方法生成与扫描的每个文件对应的签名值时，除了需要获取文件属性信息外，还需要获取文件内容，因此，生成签名值的速度可能会比较慢，适合于监控比较小的文件的变化情况。然而，由于将文件内容也作为生成签名值的一部分内容，因此，通过该种方式能够识别出文件中的任何改动，能够更好地确保文件的安全性。</p>
    <p>[0126]	关于根据扫描的每个文件的文件特征信息生成每个文件对应的签名值时采用的算法，可以有很多种。例如，可以根据每个文件的文件特征信息通过哈希hash算法生成一个hash值，并将该hash值作为签名值。</p>
    <p>[0127]	在步骤203中，根据扫描的每个文件的文件名及生成的签名值，得到包含文件名及签名值的当前文件信息集合，其中，当前文件信息集合中的每条当前文件信息包括扫描的一个文件的文件名及对应的签名值。</p>
    <p>[0128]	其中，当前文件信息集合包括但不限于该监控目录下当前包含的所有文件的当前文件信息，并且当前文件信息集合中的每条当前文件信息包括扫描的一个文件的文件名及对应的签名值。</p>
    <p>[0129]	在步骤204中，将监控目录的当前文件信息集合与预先存储的该监控目录的参考文件信息集合进行比对，根据比对结果确定监控目录包含的文件是否发生变化，其中，参考文件信息集合中的每条参考文件信息包括预先扫描该监控目录后得到的每个文件的文件名及对应的签名值。</p>
    <p>[0130]由于在获得当前文件信息集合和获得参考文件信息集合时，可能存在扫描文件的扫描顺序或其它原因，造成获得的当前对文件信息集合和参考文件信息集合中包含的各个文件的文件信息是杂乱无章的情况。因此，为了增加可比性，将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对之前，需要对当前文件信息集合和参考文件信息集合进行整理，以保证后续在比对当前文件信息集合和参考文件信息集合中的每条文件信息时简单快快捷。具体整理过程中，可以先对当前文件信息集合和参考文件信息集合中的每条文件信息采用相同的排序方式进行排序。</p>
    <p>[0131]	本公开实施例不对具体的排序方式进行限定，由于在当前文件信息集合和参考文件信息集合中包括了扫描的每个文件的文件名及对应的签名值，而利用文件名可以很好地区分各个不同的文件，因此，本公开实施例提供的方法通过按文件名对当前文件信息集合中的每条当前文件信息及参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表。另外，按照文件名对当前文件信息集合和参考文件信息集合进行排序时，也可以有很多种方法。例如，可以预先设置按照文件名排序的某种规则来限定哪种类型的文件名排在前面，哪种类型的文件名排在后面，本公开实施例不对按照文件名进行排序的方式作具体限定。由于计算机能够快捷地处理二进制数值，因此，下面以按照文件名的对应的二进制数值对当前文件信息集合中的每条当前文件信息和参考文件信息中的每条参考文件信息进行排序对本公开实施例进行解释说明。</p>
    <p>[0132]	其中，按文件名对应的二进制数值对当前文件信息集合中的每条当前文件信息及参考文件信息集合中的每条参考文件信息分别排序包括但不限于按文件名对应的二进制数值由小到大的顺序和按文件名对应的二进制数值由大到小的顺序对前文件信息集合中的每条当前文件信息及参考文件信息集合中的每条参考文件信息分别排序。</p>
    <p>[0133]	需要说明的是，为了使按照文件名对应的二进制数值进行排序时，获得的排序结果唯一，可以在监控目录包含的每个文件的文件名中携带文件的绝对路径信息。由于文件系统中，每个包含绝对路径信息的文件名是唯一的，因此，排序结果必然是唯一的。当然，文件名也可以不包含绝对路径信息，保证监控目录中包含的文件按照文件名对应的二进制数值排序后，排序结果唯一即可。</p>
    <p>[0134]	另外，在按照文件名对应的二进制数值进行排序之前，需要先将文件名转换为对应的二进制数值。将文件名转换为对应的二进制数值时，可以先按由左到右的顺序将文件名包含的每一个字母、数字或汉字、符号等内容转换为相应的ASCII码，然后再将ASCII码转化为对应的二进制数值。当然，还可以采用其他方法将文件名转换为对应的二进制数值，本公开实施例对此不作具体限定。</p>
    <p>[0135]	由于第一列表和第二列表为按照一定的排序方式对扫描的每个文件的文件信息排序后获得的列表，为了确保在比对第一列表和第二列表中包含的文件信息时不重不漏，可以分别对第一列表和第二列表设置第一指针和第二指针，来指明每一次比对过程使用的文件信息，并将第一指针指向第一列表的第一条当前文件信息、第二指针指向第二列表的第一条参考文件信息，使得在比对第一列表和第二列表中的文件信息时，可以从第一列表和第二列表中存储的第一条文件信息的位置比起。</p>
    <p>[0136]	又由于在获得第一列表和第二列表时，按照文件名排序的方式不一样，判断得到的文件的变化情况不一样。因此，接下来以在获取第一列表和第二列表时，按照文件名对应的二进制数值从小到大的顺序排序，将第一列表和第二列表中包含的当前文件信息和参考文件信息进行比对，并根据比对结果来确定监控目录包含的文件是否发生变化的情况为例进行具体说明。</p>
    <p>[0137]	参见图3，将第一列表和第二列表进行比对，并根据比对结果来确定监控目录包含的文件是否发生变化的方式包括但不限于通过以下步骤来实现:</p>
    <p>[0138]	A:从第一指针指向的第一条当前文件信息和第二指针指向的第一条参考文件信息开始，判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同；如果第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名相同，执行步骤B;如果第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名不相同，执行步骤F。</p>
    <p>[0139]	B:判断第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值是否相同，如果第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值相同，执行步骤C ;如果第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值不相同，执行步骤D。</p>
    <p>[0140]	C:确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件未发生变化，并执行步骤E。</p>
    <p>[0141]	D:确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件被修改，并执行步骤E。</p>
    <p>[0142]	E:将第一指针和第二指针分别下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0143]	F:比较第一指针指向的当前文件信息中的文件名对应的二进制数值和第二指针指向的参考文件信息中的文件名对应的二进制数值的大小；如果第一指针指向的当前文件信息中的文件名对应的二进制数值较小，即第一指针指向的当前文件信息中的文件名比第二指针指向的参考文件信息中的文件名的文件名顺序在前，则执行步骤G ;如果第二指针指向的参考文件信息中的文件名对应的二进制数值较小，即第一指针指向的当前文件信息中的文件名比第二指针指向的参考文件信息中的文件名的文件名顺序在后，则执行步骤H。</p>
    <p>[0144]	G:确定第一指针指向的当前文件信息对应的文件为监控目录中新增加的文件，并将第一指针下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0145]	H:确定第二指针指向的参考文件信息对应的文件为监控目录中被删除的文件，并将第二指针下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0146]	另外，由于监控目录中包含的文件可能由于新增加文件或被删除文件而存在第一列表和第二列表中包含的文件信息的数目不一致的问题，在这种情况下，有可能在第一列表或第二列表中出现某一指针指向的文件信息为空，而另一指针指向的文件信息不为空的情况。因此，在比对第一指针和第二指针指向文件信息的过程中，还需要判断第一指针指向的当前文件信息或第二指针指向的参考文件信息是否为空。在该种情况下，如果第一指针指向的当前文件信息为空，第二指针指向的参考文件信息不为空，则确定第二指针指向的参考文件信息对应的文件至第二列表末尾的参考文件信息对应的文件为被删除的文件；如果第二指针指向的参考文件信息为空，第一指针指向的当前文件信息不为空，则确定第一指针指向的当前文件信息对应的文件至第一列表末尾的当前文件信息对应的文件为新增加的文件。</p>
    <p>[0147]	下面以一个具体的例子来对上述将第一列表和第二列表进行比对，并根据比对结果来确定该监控目录包含的文件是否发生变化进行举例说明。如表一所示，以表一所示的第一列表和第二列表包含的文件信息已按照文件名对应的二进制数值由小到大的顺序进行了排序为例。</p>
    <p>[0148]表一</p>
    <p>[0149]</p>
    <div class="patent-image small-patent-image"> <a href="//patentimages.storage.googleapis.com/CN103679002A/CN103679002AD00171.png"> <img id="idf0001" file="CN103679002AD00171.tif" img-content="drawing" img-format="tif" src="//patentimages.storage.googleapis.com/CN103679002A/CN103679002AD00171.png" class="patent-full-image" alt="Figure CN103679002AD00171"> </a> </div>
    <p>[0150]	结合上述内容以及表一所示的内容，在判断监控目录中的文件是否发生变化时，从第一列表和第二列表中的第一个文件信息的位置比起。首先，判断第一指针和第二指针指向的文件名是否相同。由表一得知，第一指针和第二指针指向的文件名均为/etc/，因此，进一步判断该文件名/etc/对应的签名值是否相同。由于在第一列表和第二列表中/etc/对应的签名值分别为356443432和453445454，即签名值并不相同，因此，确定文件名/etc/对应的文件被修改。</p>
    <p>[0151]	接下来,将第一指针和第二指针分别下移一位,此时由表一得第一指针指向/etc/check, sh,而第二指针指向/etc/hosts。由于第一指针和第二指针指向的文件名不同，因此，需要判断指针和第二指针指向的文件名对应的二进制数值的大小。由于第一列表和第二列表在排序时，采用按照文件名对应的二进制数值由小到大的顺序排序，且由于在第一列表中，/etc/hosts在/etc/check, sh的下一行，由此可以判断/etc/check, sh对应的二进制数值较小，即/etc/check, sh比/etc/hosts的文件名顺序在前，因此,判断/etc/check,sh为监控目录下新增加的文件，并将第一指针的位置下移一位。</p>
    <p>[0152]	接下来，由表一得,第一指针指向/etc/hosts,与第二指针指向的文件名相同。因此，继续判断/etc/hosts对应的签名是否相同，由表一得到在第一列表和第二列表中，/etc/hosts对应的签名值均为234354523，因此，判断/etc/hosts对应的文件未被修改。</p>
    <p>[0153]	然后，将第一指针和第二指针分别下移一位，此时由表一得第一指针指向/etc/resolv.conf,而第二指针指向/etc/lost_file,由于第一指针和第二指针指向的文件名不同，因此，需要判断指针和第二指针指向的文件名对应的二进制数值的大小，由第二列表得到 /etc/lost_file 对应的二进制数值较小，即 /etc/resolv.conf 比 /etc/lost_file 的文件名顺序在后，因此，确定/etC/l0St_file为被删除的文件。</p>
    <p>[0154]	接着,将第二指针下移一位,使第二指针指向/etc/resolv.conf,此时由于第一指针和第二指针指向的文件名均为/etc/resolv.conf,需要进一步判断/etc/resolv.conf对应的签名值。由于第一列表中/etc/resolv.conf对应的签名值为645343434，第二列表中/etc/resolv.conf对应的签名值为545432334,因此,确定/etc/resolv.conf对应的文件被修改。</p>
    <p>[0155]	继续将第一指针和第二指针同时下移一位，此时发现第一指针指向的文件名为/etc/sesolv,而第二指针指向的文件名为空，因此，判断第一列表至第一列表中末尾的最后一个当前文件信息均为新增加的文件。</p>
    <p>[0156]	接下来以在获取第一列表和第二列表时，按照文件名对应的二进制数值从大到小的顺序排序，来对将第一列表和第二列表中包含的当前文件信息和参考文件信息进行比对，并根据比对结果来确定监控目录包含的文件是否发生变化的情况进行具体说明。其中，参见图4，根据比对结果来确定监控目录包含的文件是否发生变化包括但不限于通过以下步骤来实现:</p>
    <p>[0157]	a:从第一指针指向的第一条当前文件信息和第二指针指向的第一条参考文件信息开始，判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同；如果第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名相同，执行步骤b;如果第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名不相同，执行步骤f。</p>
    <p>[0158]	b:判断第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值是否相同，如果第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值相同，执行步骤c ;如果第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值不相同，执行步骤d。</p>
    <p>[0159]	c:确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件未发生变化，并执行步骤e。</p>
    <p>[0160]	d:确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件被修改，并执行步骤e。</p>
    <p>[0161]	e:将第一指针和第二指针分别下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0162]	f:比较第一指针指向的当前文件信息中的文件名对应的二进制数值和第二指针指向的参考文件信息中的文件名对应的二进制数值的大小；如果第一指针指向的当前文件信息中的文件名对应的二进制数值较大，即第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在前，则执行步骤g;如果第二指针指向的参考文件信息中的文件名对应的二进制数值较大，即第一指针指向的当前文件信息中的文件名比所述第二指针指向的参考文件信息中的文件名的文件名顺序在后，则执行步骤h。</p>
    <p>[0163]	g:确定第一指针指向的当前文件信息对应的文件为监控目录中新增加的文件，并将第一指针下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0164]	h:确定第二指针指向的参考文件信息对应的文件为监控目录中被删除的文件，并将第二指针下移一位，返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0165]	另外，由于监控目录中包含的文件可能由于存在新增加的文件或删除的文件而存在文件信息的数目不一致的问题，在这种情况下，有可能在第一列表或第二列表中出现某一指针指向的文件信息为空，而另一指针指向的文件信息不为空的情况。因此，在比对第一指针和第二指针指向文件信息的过程中，还需要判断判断第一指针指向的当前文件信息或第二指针指向的参考文件信息是否为空；如果第一指针指向的当前文件信息为空，第二指针指向的参考文件信息不为空，则确定第二指针指向的当前文件信息对应的文件至第一列表末尾的当前文件信息对应的文件为被删除的文件。如果第二指针指向的参考文件信息为空，第一指针指向的当前文件信息不为空，则确定第一指针指向的参考文件信息对应的文件至第二列表末尾的参考文件信息对应的文件为新增加的文件。</p>
    <p>[0166]	由于按照文件名对应的二进制数值由大到小排序时，可以将表一所包含的内容倒置，并参照上述按照文件名对应的二进制数值由小到大排序确定文件的变化情况，因此在此不再举例说明。</p>
    <p>[0167]	在另一个实施例中，在得到包含文件名及签名值的当前文件信息集合之后，还可以存储当前文件信息集合，作为监控文件变化的参考文件信息集合。</p>
    <p>[0168]	在另一个实施例中，在获得监控列表中文件的变化情况后，还可以将监控目录中文件的变化情况通知对应的管理者，使管理者可以实时掌握监控目录中文件的变化情况。其中，将监控目录中文件的变化情况通知对应的管理者的方式可以有很多种，例如，可以通过邮件、短信、发系统消息或记录监控日志等方式，本公开实施例对此不作具体限定。</p>
    <p>[0169]	本公开实施例提供的方法，通过扫描获取到的监控目录所包含的每个文件，生成与扫描的每个文件对应的签名值后，得到包含文件名及签名值的当前文件信息集合，并将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，根据比对结果确定监控目录包含的文件是否发生变化，不仅能够确认文件是否被修改，而且能够及时发现监控目录中文件的增删情况。另外，通过扫描监控目录包含的每一个文件、生成每个文件对应的签名值以得到当前文件信息的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。</p>
    <p>[0170]	在另一个实施例中，提供了一种监控文件变化的装置，参见图5，该装置包括:</p>
    <p>[0171]	获取模块301，用于获取监控目录；</p>
    <p>[0172]	扫描模块302，用于扫描监控目录包含的每个文件；</p>
    <p>[0173]	生成模块303，用于生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；</p>
    <p>[0174]	比对模块304，用于将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，参考文件信息集合中的每条参考文件信息包括预先扫描监控目录后得到的一个文件的文件名及对应的签名值；</p>
    <p>[0175]	确定模块305，用于根据比对结果确定监控目录包含的文件是否发生变化。</p>
    <p>[0176]	在另一个实施例中，参见图6，生成模块303，包括:</p>
    <p>[0177]	获取单元3031，用于获取扫描的每个文件的文件特征信息，文件特征信息包括文件名、文件大小、文件权限、文件修改时间和/或文件内容；</p>
    <p>[0178]	生成单元3032，用于根据扫描的每个文件的文件特征信息生成与扫描的每个文件对应的签名值。</p>
    <p>[0179]	在另一个实施例中，生成单元3032，用于根据每个文件的文件特征信息通过哈希算法计算生成每个文件对应的签名值。</p>
    <p>[0180]	在另一个实施例中，参见图7，比对模块304，包括:</p>
    <p>[0181]	排序单元3041，用于按文件名对当前文件信息集合中的每条当前文件信息及参考文件信息集合中的每条参考文件信息分别排序，得到包含排序后的当前文件信息的第一列表及包含排序后的参考文件信息的第二列表；</p>
    <p>[0182]	设置单元3042，用于设置第一指针和第二指针，并将第一指针指向第一列表的第一条当前文件信息和第二指针指向第二列表的第一条参考文件信息；</p>
    <p>[0183]	第一判断单元3043，用于从第一指针指向的第一条当前文件信息和第二指针指向的第一条参考文件信息开始，判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同；</p>
    <p>[0184]	第二判断单元3044，用于当第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名相同时，判断第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值是否相同；</p>
    <p>[0185]	第一确定单元3045，用于当第一指针指向的当前文件信息中的签名值和第二指针指向的参考文件信息中的签名值相同时，确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件未发生变化，否则，确定第一指针指向的当前文件信息对应的文件相对第二指针指向的参考文件信息对应的文件被修改；</p>
    <p>[0186]	第一下移单元3046，用于将第一指针和第二指针分别下移一位；</p>
    <p>[0187]	第一返回单元3047，用于返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0188]	在另一个实施例中，参见图8，比对模304，还包括:</p>
    <p>[0189]	比较单元3048，用于当第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名不同时，比较第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名的文件名顺序；</p>
    <p>[0190]	第二确定单元3049，用于当第一指针指向的当前文件信息中的文件名比第二指针指向的参考文件信息中的文件名的文件名顺序在前时，确定第一指针指向的当前文件信息对应的文件为监控目录中新增加的文件；</p>
    <p>[0191]	第二下移单元30410，用于将第一指针下移一位；</p>
    <p>[0192]	第二返回单元30411，用于返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束；</p>
    <p>[0193]	第三确定单元30412，用于当第一指针指向的当前文件信息中的文件名比第二指针指向的参考文件信息中的文件名的文件名顺序在后时，确定第二指针指向的参考文件信息对应的文件为监控目录中被删除的文件；</p>
    <p>[0194]	第三下移单元30413，用于将第二指针下移一位；</p>
    <p>[0195]	第三返回单元30414，用于返回判断第一指针指向的当前文件信息中的文件名和第二指针指向的参考文件信息中的文件名是否相同的步骤，直至将第一列表中的当前文件信息或第二列表中的参考文件信息比对结束。</p>
    <p>[0196]	在另一个实施例中，参见图9，比对模304，还包括:</p>
    <p>[0197]	第三判断单元30415，用于判断第一指针指向的当前文件信息或第二指针指向的参考文件信息是否为空；[0198]	第四确定单元30416，用于当第一指针指向的当前文件信息为空，第二指针指向的参考文件信息不为空时，确定第二指针指向的参考文件信息对应的文件至第二列表末尾的参考文件信息对应的文件为被删除的文件；当第二指针指向的参考文件信息为空，第一指针指向的当前文件信息不为空时，确定第一指针指向的当前文件信息对应的文件至第一列表末尾的当前文件信息对应的文件为新增加的文件。</p>
    <p>[0199]	在另一个实施例中，参见图10，装置，还包括:</p>
    <p>[0200]	存储模块306，用于存储当前文件信息集合，作为监控文件变化的参考文件信息集</p>
    <p>八</p>
    <p>口 ο</p>
    <p>[0201]	本公开实施例提供的装置，通过扫描获取到的监控目录所包含的每个文件，生成与扫描的每个文件对应的签名值后，得到包含文件名及签名值的当前文件信息集合，并将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，根据比对结果确定监控目录包含的文件是否发生变化，不仅能够确认文件是否被修改，而且能够及时发现监控目录中文件的增删情况。另外，通过扫描监控目录包含的每一个文件、生成每个文件对应的签名值以得到当前文件信息的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。</p>
    <p>[0202]	在另一个实施例中，提供了一种服务器，该服务器包括有存储器，以及一个或者一个以上的程序，其中一个或者一个以上程序存储于存储器中，且经配置以由一个或者一个以上处理器执行，所述一个或者一个以上程序包含用于进行以下操作的指令:</p>
    <p>[0203]	获取监控目录，并扫描监控目录包含的每个文件；</p>
    <p>[0204]	生成与扫描的每个文件对应的签名值，得到包含文件名及签名值的当前文件信息集合，每条当前文件信息包括扫描的一个文件的文件名及对应的签名值；</p>
    <p>[0205]	将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，参考文件信息集合中的每条参考文件信息包括预先扫描监控目录后得到的一个文件的文件名及对应的签名值；</p>
    <p>[0206]	根据比对结果确定监控目录包含的文件是否发生变化。</p>
    <p>[0207]	本公开实施例提供的终端，通过扫描获取到的监控目录所包含的每个文件，生成与扫描的每个文件对应的签名值后，得到包含文件名及签名值的当前文件信息集合，并将监控目录的当前文件信息集合与预先存储的监控目录的参考文件信息集合进行比对，根据比对结果确定监控目录包含的文件是否发生变化，不仅能够确认文件是否被修改，而且能够及时发现监控目录中文件的增删情况。另外，通过扫描监控目录包含的每一个文件、生成每个文件对应的签名值以得到当前文件信息的操作，确保操作系统能提供文件访问功能即可，适用的操作系统的类型较多，适用范围广。</p>
    <p>[0208]	图11是本公开中服务器的结构示意图。该服务器1100可因配置或性能不同而产生比较大的差异，可以包括一个或一个以上中央处理器(central processing units, CPU)1122(例如，一个或一个以上处理器)和存储器1132，一个或一个以上存储应用程序1142或数据1144的存储介质1130 (例如一个或一个以上海量存储设备)。其中，存储器1132和存储介质1130可以是短暂存储或持久存储。存储在存储介质1130的程序可以包括一个或一个以上模块(图示没标出)，每个模块可以包括对服务器中的一系列指令操作。更进一步地，中央处理器1122可以设置为与存储介质1130通信，在服务器1100上执行存储介质1130中的一系列指令操作。</p>
    <p>[0209]	服务器1100还可以包括一个或一个以上电源1126，一个或一个以上有线或无线网络接口 1150，一个或一个以上输入输出接口 1158，一个或一个以上键盘1156，和/或，一个或一个以上操作系统 1141，例如 Windows ServerTM, Mac OS XTM，UnixTM, LinuxTM，FreeBSDTM 等等。</p>
    <p>[0210]	以上所述的具体实施方式，对本公开的目的、技术方案和有益效果进行了进一步详细说明，所应理解的是，以上所述仅为本公开的具体实施方式而已，并不用于限定本公开的保护范围，凡在本公开的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本公开的保护范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101236554A?cl=zh">CN101236554A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2007年11月29日</td><td class="patent-data-table-td patent-date-value">2008年8月6日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">一种数据库海量数据比对的方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101604268A?cl=zh">CN101604268A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年7月13日</td><td class="patent-data-table-td patent-date-value">2009年12月16日</td><td class="patent-data-table-td ">浪潮电子信息产业股份有限公司</td><td class="patent-data-table-td ">一种监控目录变化事件过滤方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101639880A?cl=zh">CN101639880A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年7月31日</td><td class="patent-data-table-td patent-date-value">2010年2月3日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">一种文件检测方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102360410A?cl=zh">CN102360410A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年9月30日</td><td class="patent-data-table-td patent-date-value">2012年2月22日</td><td class="patent-data-table-td ">许式伟</td><td class="patent-data-table-td ">文件系统的用户操作发现方法和应用该方法的同步系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20100169972">US20100169972</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2008年12月31日</td><td class="patent-data-table-td patent-date-value">2010年7月1日</td><td class="patent-data-table-td ">Microsoft Corporation</td><td class="patent-data-table-td ">Shared repository of malware data</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=h1T5CAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0021500000">G06F21/50</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=h1T5CAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0021570000">G06F21/57</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=h1T5CAABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F21/64">G06F21/64</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2014年4月23日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/5476f30414db675e1062/CN103679002A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E7%9B%91%E6%8E%A7%E6%96%87%E4%BB%B6%E5%8F%98%E5%8C%96%E7%9A%84%E6%96%B9%E6%B3%95_%E8%A3%85%E7%BD%AE%E5%8F%8A%E6%9C%8D.pdf?id=h1T5CAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0cKb2L0ENmpmXK5THpmXUqxSaeiw"},"sample_url":"https://www.google.com/patents/reader?id=h1T5CAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>