<!DOCTYPE html><html><head><title>专利 CN103218228A - 一种安卓设备内置硬盘实现ntfs文件系统的方法及装置 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_50a6672b5f82ffbd39b7a9e87fd4594c/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_50a6672b5f82ffbd39b7a9e87fd4594c__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种安卓设备内置硬盘实现ntfs文件系统的方法及装置"><meta name="DC.contributor" content="蒋世民" scheme="inventor"><meta name="DC.contributor" content="陈仔俊" scheme="inventor"><meta name="DC.contributor" content="卓世杰" scheme="inventor"><meta name="DC.contributor" content="广东欧珀移动通信有限公司" scheme="assignee"><meta name="DC.date" content="2013-4-10" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开一种安卓设备内置硬盘实现NTFS文件系统的方法及装置，所述方法包括：基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；对所述生成的可执行文件进行源码修改；编译所述修改后的源码生成系统镜像并加载到安卓平台。该方法突破了内核程序的限制，将开发者从处理文件系统模块与系统内核之间关系的复杂任务中解脱出来，使得开发者专注于文件系统设计和实现上，降低了任务的复杂度,同时，采用NTFS文件系统进行磁盘管理，能够有效提高磁盘空间的利用率，满足在安卓平台上播放超高清视频及超大软件应用的要求。"><meta name="DC.date" content="2013-7-24"><meta name="DC.relation" content="CN:102831173:A" scheme="references"><meta name="DC.relation" content="US:20030140174:A1" scheme="references"><meta name="citation_reference" content="吴一民，刘伟安: &quot;基于Fuse的用户态文件系统的设计&quot;, 《微计算机信息》, vol. 26, no. 23, 25 February 2010 (2010-02-25)"><meta name="citation_reference" content="张艳玲，徐海峰: &quot;在Android平台上开发FUSE文件系统&quot;, 《电脑编程技巧与维护》, 18 February 2012 (2012-02-18), pages 67 - 68"><meta name="citation_patent_publication_number" content="CN:103218228:A"><meta name="citation_patent_application_number" content="CN:201310123311"><link rel="canonical" href="https://www.google.com/patents/CN103218228A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN103218228A?cl=zh"/><meta name="title" content="专利 CN103218228A - 一种安卓设备内置硬盘实现ntfs文件系统的方法及装置"/><meta name="description" content="本发明公开一种安卓设备内置硬盘实现NTFS文件系统的方法及装置，所述方法包括：基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；对所述生成的可执行文件进行源码修改；编译所述修改后的源码生成系统镜像并加载到安卓平台。该方法突破了内核程序的限制，将开发者从处理文件系统模块与系统内核之间关系的复杂任务中解脱出来，使得开发者专注于文件系统设计和实现上，降低了任务的复杂度,同时，采用NTFS文件系统进行磁盘管理，能够有效提高磁盘空间的利用率，满足在安卓平台上播放超高清视频及超大软件应用的要求。"/><meta property="og:title" content="专利 CN103218228A - 一种安卓设备内置硬盘实现ntfs文件系统的方法及装置"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN103218228A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN103218228A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=N7_HCAABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN103218228A&amp;usg=AFQjCNGf4UnSw18tw3n6Bsx6H6Ej8qib6w" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/e124a559c36e04d7a0c8/CN103218228A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/e124a559c36e04d7a0c8/CN103218228A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN103218228A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN103218228A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN103218228A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN103218228B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN103218228A?cl=zh" style="display:none"><span itemprop="description">本发明公开一种安卓设备内置硬盘实现NTFS文件系统的方法及装置，所述方法包括：基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；对所述生成的可执行文件进行源码修改；编译所述修改后的源码生成系统镜像并加载到...</span><span itemprop="url">https://www.google.com/patents/CN103218228A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN103218228A - 一种安卓设备内置硬盘实现ntfs文件系统的方法及装置</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN103218228A - 一种安卓设备内置硬盘实现ntfs文件系统的方法及装置" title="专利 CN103218228A - 一种安卓设备内置硬盘实现ntfs文件系统的方法及装置"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN103218228 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201310123311</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2013年7月24日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2013年4月10日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2013年4月10日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103218228B?hl=zh-CN&amp;cl=zh">CN103218228B</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201310123311.2, </span><span class="patent-bibdata-value">CN 103218228 A, </span><span class="patent-bibdata-value">CN 103218228A, </span><span class="patent-bibdata-value">CN 201310123311, </span><span class="patent-bibdata-value">CN-A-103218228, </span><span class="patent-bibdata-value">CN103218228 A, </span><span class="patent-bibdata-value">CN103218228A, </span><span class="patent-bibdata-value">CN201310123311, </span><span class="patent-bibdata-value">CN201310123311.2</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%92%8B%E4%B8%96%E6%B0%91%22">蒋世民</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E9%99%88%E4%BB%94%E4%BF%8A%22">陈仔俊</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%8D%93%E4%B8%96%E6%9D%B0%22">卓世杰</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%B9%BF%E4%B8%9C%E6%AC%A7%E7%8F%80%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">广东欧珀移动通信有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN103218228A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103218228A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN103218228A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#npl-citations">非专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (2),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=N7_HCAABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201310123311&amp;usg=AFQjCNGrqLmdKsRjJatjueGp91Ql0F2TVQ"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=N7_HCAABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D103218228A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNFDKElU3COHHW0_XSVT9c72Xy2SDw"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT126600360" lang="ZH" load-source="patent-office">一种安卓设备内置硬盘实现ntfs文件系统的方法及装置</invention-title>
      </span><br><span class="patent-number">CN 103218228 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA118037626" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开一种安卓设备内置硬盘实现NTFS文件系统的方法及装置，所述方法包括：基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；对所述生成的可执行文件进行源码修改；编译所述修改后的源码生成系统镜像并加载到安卓平台。该方法突破了内核程序的限制，将开发者从处理文件系统模块与系统内核之间关系的复杂任务中解脱出来，使得开发者专注于文件系统设计和实现上，降低了任务的复杂度,同时，采用NTFS文件系统进行磁盘管理，能够有效提高磁盘空间的利用率，满足在安卓平台上播放超高清视频及超大软件应用的要求。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(8)</span></span></div><div class="patent-text"><div mxw-id="PCLM53770121" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种安卓设备内置硬盘实现NTFS文件系统的方法，其特征在于，所述方法包括:  基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；  对所述生成的可执行文件进行源码修改；  编译所述修改后的源码生成系统镜像并加载到安卓平台。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的安卓设备内置硬盘实现NTFS文件系统的方法，其特征在于，所述对所述生成的可执行文件进行源码修改包括，  增加对NTFS文件系统操作的mount操作源码；  或者，增加对NTFS文件系统操作的mount及格式化操作源码。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求1所述的安卓设备内置硬盘实现NTFS文件系统的方法，其特征在于，所述对所述生成的可执行文件进行源码修改包括，  将原有对FAT文件系统操作的mount操作源码更改为NTFS系统操作的mount操作源码；  或者，将原有对FAT文件系统操作的mount及格式化操作源码全部更改为NTFS系统操作的mount及格式化操作源码。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求1至3之一所述的安卓设备内置硬盘实现NTFS文件系统的方法，其特征在于，通过void进程对生成的可执行文件进行源码修改。</div>
    </div>
    </div> <div class="claim"> <div num="5" class="claim">
      <div class="claim-text">5.一种安卓设备内置硬盘实 现NTFS文件系统的装置，其特征在于，所述装置包括，  编译模块，用于基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；  修改模块:用于对所述生成的可执行文件进行源码修改；  所述编译模块还用于对所述修改后的源码进行编译生成系统镜像；  其中，所述生成的系统镜像由安卓平台进行加载。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6.根据权利要求5所述的安卓设备内置硬盘实现NTFS文件系统的装置，其特征在于，所述修改模块用于增加对NTFS文件系统操作的mount操作源码；或者，用于增加对NTFS文件系统操作的mount及格式化操作源码。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7.根据权利要求5所述的安卓设备内置硬盘实现NTFS文件系统的装置，其特征在于，所述修改模块用于将原有对FAT文件系统操作的mount操作源码更改为NTFS系统操作的mount操作源码；或者，用于将原有对FAT文件系统操作的mount及格式化操作源码全部更改为NTFS系统操作的mount及格式化操作源码。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8.根据权利要求5至7之一所述的安卓设备内置硬盘实现NTFS文件系统的装置，其特征在于，所述修改模块通过void进程对生成的可执行文件进行源码修改。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES60801412" lang="ZH" load-source="patent-office" class="description">
    <p>一种安卓设备内置硬盘实现NTFS文件系统的方法及装置</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及通讯设备应用技术领域。尤其涉及一种安卓设备内置硬盘实现NTFS文件系统的方法及装置。</p>
    <p>背景技术</p>
    <p>[0002]	安卓(Android)系统是新一代的智能平台，越来越多的电子终端使用Android系统作为其操作系统。文件系统是操作系统用于明确磁盘或分区上的文件的方法和数据结构，即在磁盘上组织文件的方法。文件系统负责为用户建立文件，存入、读出、修改、转储文件，控制文件的存取，当用户不再使用时撤销文件等。</p>
    <p>[0003]	当前Android设备内置硬盘使用的文件系统主要是FAT文件系统，该系统由于其出色的兼容性，在各种手持设备上都得到了非常成功的应用。FAT文件系统使用文件分配表进行磁盘管理，对磁盘的管理能力强，文件存储安全可靠，灵活性强。但是其有两个主要缺点:一是不支持大于4GB的单个文件的存储；二是FAT文件系统采用较大的簇进行数据存储，磁盘空间利用率低。随着高清视频技术的普及、视频文件越来越大、超大游戏及应用软件的流行，FAT文件系统在安卓平台上应用的局限性越来越大。此外，FAT文件系统都是定义在操作系统内核层面上的，如果采用其他文件系统替代FAT文件系统，如NTFS文件系统等，为了使操作系统能够识别新的文件系统，必需重写内核，操作复杂，而且内核态代码难以调试，生产率较低。</p>
    <p>发明内容 </p>
    <p>[0004]	本发明所要解决的技术问题是提供一种安卓设备内置硬盘实现NTFS文件系统的方法及装置，以突破内核程序的限制，将开发者从处理文件系统模块与系统内核之间关系的复杂任务中解脱出来，同时，能够有效提高磁盘空间的利用率，且满足在安卓平台上播放超高清视频及超大软件应用。</p>
    <p>[0005]	一种安卓设备内置硬盘实现NTFS文件系统的方法，所述方法包括:</p>
    <p>[0006]	基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；</p>
    <p>[0007]	对所述生成的可执行文件进行源码修改；</p>
    <p>[0008]	编译所述修改后的源码生成系统镜像并加载到安卓平台。</p>
    <p>[0009]	进一步地，所述对所述生成的可执行文件进行源码修改包括，</p>
    <p>[0010]	增加对NTFS文件系统操作的mount操作源码；</p>
    <p>[0011]	或者，增加对NTFS文件系统操作的mount及格式化操作源码。</p>
    <p>[0012]	进一步地，所述对所述生成的可执行文件进行源码修改包括，</p>
    <p>[0013]	将原有对FAT文件系统操作的mount操作源码更改为NTFS系统操作的mount操作源码；</p>
    <p>[0014]	或者，将原有对FAT文件系统操作的mount及格式化操作源码全部更改为NTFS系统操作的mount及格式化操作源码。[0015]	进一步地，通过void进程对生成的可执行文件进行源码修改。</p>
    <p>[0016]	相应地，本发明还公开一种安卓设备内置硬盘实现NTFS文件系统的装置，所述装置包括，</p>
    <p>[0017]	编译模块，用于基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；</p>
    <p>[0018]	修改模块:用于对所述生成的可执行文件进行源码修改；</p>
    <p>[0019]	所述编译模块还用于对所 述修改后的源码进行编译生成系统镜像；</p>
    <p>[0020]	其中，所述生成的系统镜像由安卓平台进行加载。</p>
    <p>[0021 ] 进一步地，所述修改模块用于增加对NTFS文件系统操作的mount操作源码；或者，用于增加对NTFS文件系统操作的mount及格式化操作源码。</p>
    <p>[0022]	进一步地，所述修改模块用于将原有对FAT文件系统操作的mount操作源码更改为NTFS系统操作的mount操作源码；或者，用于将原有对FAT文件系统操作的mount及格式化操作源码全部更改为NTFS系统操作的mount及格式化操作源码。</p>
    <p>[0023]	进一步地，所述修改模块通过void进程对生成的可执行文件进行源码修改。</p>
    <p>[0024]	本发明的技术方案，基于fuse框架实现用户态NTFS文件系统，突破了内核程序的限制，使得开发者只需要关注fuse的接口定义，在不需要了解fuse的内部机制的情况下也可开发用户级应用的文件系统，减少了开发的工作量，降低了任务的复杂度，提高了程序的稳定性，相对传统内核及文件系统，具有更好的灵活性和扩展性，更便于备份和迁移。</p>
    <p>附图说明</p>
    <p>[0025]	图1为本发明实施例所述fuse工作过程示意图；</p>
    <p>[0026]	图2为本发明第一实施例提供的安卓设备内置硬盘实现NTFS文件系统的方法流程图；</p>
    <p>[0027]	图3为本发明第二实施例提供的安卓设备内置硬盘实现NTFS文件系统的方法流程图；</p>
    <p>[0028]	图4为void进程框图；</p>
    <p>[0029]	图5为本发明第三实施例提供的安卓设备内置硬盘实现NTFS文件系统的装置结构框图。</p>
    <p>具体实施方式</p>
    <p>[0030]	下面结合附图和实施例对本发明作进一步的详细说明。此处所描述的具体实施例仅仅用于解释本发明，而非对本发明的限定。</p>
    <p>[0031]	Fuse (Filesystem in Userspace,用户空间文件系统)提供一个完整的接口让用户可以轻松的创建一个属于自己的用户级文件系统。图1为本发明实施例所述fuse工作过程示意图。如图1所示，Fuse由一个内核模块(fuse, ko), &#8212;个用户级函数(libfuse.*)以及一套文件系统加载机制(mount工具)组成。内核模块仅仅提供内核的接入口，给了文件系统一个框架，由文件系统本身的主要实现代码位于用户空间中。开发者通过实现fuse提供的两组接口 fuse_lowlevel_ops, fuse_operations之一即可实现一个用户空间文件系统。用户级函数库给用户提供了编程的接口，具体实现操作有开发者在用户空间实现。文件系统加载机制用于挂载用户编写的文件系统。Fuse工作过程如下:[0032]	使用fuse框架实现的hello实例程序被调用，用户级文件系统被挂载到当前系统中，挂载点为/tmp/fuse。当用户执行ls-1/tmp/fuse命令时,VFS相关接口函数被调用，并交给fuse内核模块处理。内核模块通过一种映射机制,调用hello文件系统相关函数来处理相应请求。</p>
    <p>[0033]	Fuse是建议在VFS机制之上的，它与Ext2、Ext3等实际的文件系统处于同一个层面上，区别于这些实际的文件系统，Fuse将来自于VFS的请求，转换到用户级函数来处理。使用Fuse开发文件系统，开发者不需要与VFS打交道，不需要了解Linux文件系统的架构、文件系统内核模块开发的流程以及相关的背景知识。</p>
    <p>[0034]	图2为本发明第一实施例提供的安卓设备内置硬盘实现NTFS文件系统的方法流程图。如图2所示，所述流程包括:</p>
    <p>[0035]	步骤201:配置android设备软件编译环境。</p>
    <p>[0036]	步骤202:在Iinux内核中启用fuse。</p>
    <p>[0037]	android 内核本身就是Iinux内核的一个子集，Iinux内核本身对FAT是完全支持的。用户空间文件系统(File system in Userspace,简称fuse)是操作系统中的概念,指完全在用户态实现的文件系统。Linux通过内核模块对此进行支持。一些文件系统如ZFS，glusterfs 和 luster 使用 fuse 实现。</p>
    <p>[0038]	Linux用于支持用户空间文件系统的内核模块名叫fuse, fuse是一个通用操作系统重要的组成部分。Linux从2.6.14版本开始通过fuse模块支持在用户空间实现文件系统。用户空间编程可以选择多种语言实现，如c++，java等，还可以复制自己的库。</p>
    <p>[0039]	在用户空间实现文件系统能够大幅提高生产率，简化了为操作系统提供新的文件系统的工作量，特别适用于各种虚拟文件系统和网络文件系统。</p>
    <p>[0040]	步骤203:编译生成支持NTFS文件系统的读写的可执行文件。</p>
    <p>[0041]	本实施例中，fuse使用fuse_operations来给用于提供编程结构，让用户通过注册自己编写的函数到给结构体来实现自己的文件系统。所述文件是一个通过模块编译的二进制文件，NTFS文件系统的所有操作均通过此文件进行.可以说它就是一个NTFS文件系统。</p>
    <p>[0042]	步骤204:增加对NTFS文件系统操作的mount及格式化操作源码。</p>
    <p>[0043]	本步骤中也可以只增加对NTFS文件系统操作的mount操作源码。</p>
    <p>[0044]	本实施例中，通过void进程对生成的可执行文件进行源码修改。void进程用于管理和控制Android平台外部存储设备,包括SD插拨、挂载、卸载、格式化等；vold进程接收来自内核的外部设备消息。</p>
    <p>[0045]	图4为void进程框图。如图4所示,Vold接收来自内核的事件,通过netlink机制。Netlink是一种特殊的socket ;Netlink是一种在内核与用户应用间进行双向数据传输的非常好的方式，用户态应用使用标准的socket API就可以使用netlink提供的强大功能；Netlink是一种异步通信机制,在内核与用户态应用之间传递的消息保存在socket缓存队列中；内核通过Netlink发送uEvent格式消息给用户空间程序；外部设备发生变化，Linux内核发送uevent消息。</p>
    <p>[0046]	步骤205:编译修改后的源码生成系统镜像。</p>
    <p>[0047]	所述系统镜像是一种文件，和装载有操作系统的光盘一样，只不过光盘是一个看得见的实物，系统镜像是一个是看不见的文件。</p>
    <p>[0048]	步骤206:将生成的系统镜像加载到android设备中。</p>
    <p>[0049]	通过安卓平台的指定路径即可加载所述系统镜像，通过NTFS文件系统进行内置</p>
    <p>磁盘管理。</p>
    <p>[0050]	本实施所述的方法在保留原有FAT文件系统的基础上，实现ntfs文件系统，同时支持两种文件系统。</p>
    <p>[0051]	图3为本发明第二实施例提供的安卓设备内置硬盘实现NTFS文件系统的方法流程图。如图3所示，具体流程包括:</p>
    <p>[0052]	步骤301:配置android设备软件编译环境。</p>
    <p>[0053]	步骤302:在Iinux内核中启用fuse。</p>
    <p>[0054]	android内核本身就是Iinux内核的一个子集，Iinux内核本身对fat是完全支持的。用户空间文件系统(File system in Userspace,简称fuse)是操作系统中的概念,指完全在用户态实现的文件系统。Linux通过内核模块对此进行支持。一些文件系统如ZFS，glusterfs 和 luster 使用 fuse 实现。</p>
    <p>[0055]	Linux用于支持用户空间文件系统的内核模块名叫fuse, fuse是一个通用操作系统重要的组成部分。Linux从2.6.14版本开始通过fuse模块支持在用户空间实现文件系统。用户空间编程可以选择多种语言实现，如c++，java等，还可以复制自己的库。</p>
    <p>[0056]	在用户空间实现文件系统能够大幅提高生产率，简化了为操作系统提供新的文件系统的工作量，特别适用于各种虚拟文件系统和网络文件系统。</p>
    <p>[0057]	步骤303:编译生成支持NTFS文件系统的读写的可执行文件。</p>
    <p>[0058]	Fuse使用fuse_operations来给用于提供编程结构，让用户通过注册自己编写的函数到给结构体来实现自己的文件系统。所述文件是一个通过模块编译的二进制文件，ntfs文件系统的所有操作均通过此文件进行.可以说它就是一个ntfs文件系统。</p>
    <p>[0059]	步骤304:将原有对FAT文件系统操作的mount及格式化操作源码全部更改为NTFS系统操作的mount及格式化操作源码。</p>
    <p>[0060]	本步骤中还可以只将原有对FAT文件系统操作的mount操作源码更改为NTFS系统操作的mount操作源码。</p>
    <p>[0061]	本实施例中，通过void进程对生成的可执行文件进行源码修改。void进程用于管理和控制Android平台外部存储设备,包括SD插拨、挂载、卸载、格式化等；vold进程接收来自内核的外部设备消息。</p>
    <p>[0062]	步骤305:编译修改后的源码生成系统镜像。</p>
    <p>[0063]	所述系统镜像是一种文件，和装载有操作系统的光盘一样，只不过光盘是一个看得见的实物，系统镜像是一个是看不见的文件。</p>
    <p> [0064]	步骤306:将生成的系统镜像加载到android设备中。</p>
    <p>[0065]	通过安卓平台的指定路径即可加载所述系统镜像，通过NTFS文件系统进行内置</p>
    <p>磁盘管理。</p>
    <p>[0066]	本实施所述的方法将原有FAT文件系统全部更改为ntfs文件系统，只支持NTFS文件系统。</p>
    <p>[0067]	图5为本发明第三实施例提供的安卓设备内置硬盘实现NTFS文件系统的装置。所述装置包括编译模块501，用于基于fuse框架编译生成支持NTFS文件系统读写的可执行文件；</p>
    <p>[0068]	修改模块502，用于对所述生成的可执行文件进行源码修改；</p>
    <p>[0069]	所述编译模块501还用于对所述修改后的源码进行编译生成系统镜像；</p>
    <p>[0070]	其中，所述生成的系统镜像由安卓平台进行加载。</p>
    <p>[0071]	所述修改模块502用于增加对NTFS文件系统操作的mount操作源码；或者，用于增加对NTFS文件系统操 作的mount及格式化操作源码。</p>
    <p>[0072]	所述修改模块502用于将原有对FAT文件系统操作的mount操作源码更改为NTFS系统操作的mount操作源码；或者，用于将原有对FAT文件系统操作的mount及格式化操作源码全部更改为NTFS系统操作的mount及格式化操作源码。</p>
    <p>[0073]	所述修改模块502通过void进程对生成的可执行文件进行源码修改。其中void进程的工作过程可参考图4部分的详细描述。</p>
    <p>[0074]	所述NTFS文件系统采用簇进行数据存储，且支持单个文件达到2T，单个分区容量达到4T。</p>
    <p>[0075]	Android设备内置硬盘使用NTFS文件系统，由于其采用了更小的簇进行数据存储，极大的提高了硬盘空间的利用率，同时突破了 FAT文件系统单个文件不能大于4G限制，使超高清视频(大于4G)的观看及超大软件的应用成为现实。</p>
    <p>[0076]	上述仅为本发明的较佳实施例及所运用技术原理。本领域技术人员会理解，本发明不限于这里所述的特定实施例，对本领域技术人员来说能够进行各种明显的变化、重新调整和替代而不会脱离本发明的保护范围。因此，虽然通过以上实施例对本发明进行了较为详细的说明，但是本发明不仅仅限于以上实施例，在不脱离本发明构思的情况下，还可以包括更多其他等效实施例，而本发明的范围由所附的权利要求范围决定。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102831173A?cl=zh">CN102831173A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年7月27日</td><td class="patent-data-table-td patent-date-value">2012年12月19日</td><td class="patent-data-table-td ">Tcl集团股份有限公司</td><td class="patent-data-table-td ">基于Android系统的内存扩展方法、装置及终端设备</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20030140174">US20030140174</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2003年1月2日</td><td class="patent-data-table-td patent-date-value">2003年7月24日</td><td class="patent-data-table-td ">Tsutomu Ohishi</td><td class="patent-data-table-td ">Method for generating application for information processing apparatus and image forming apparatus</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="npl-citations"></a><div class="patent-section-header"><span class="patent-section-title">非专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th colspan="3"class="patent-data-table-th">参考文献</th></tr></thead><tr><td class="patent-data-table-td ">1</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">吴一民，刘伟安: "<a href='http://scholar.google.com/scholar?q="%E5%9F%BA%E4%BA%8EFuse%E7%9A%84%E7%94%A8%E6%88%B7%E6%80%81%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1"'>基于Fuse的用户态文件系统的设计</a>", 《微计算机信息》, vol. 26, no. 23, 25 February 2010 (2010-02-25)</td></tr><tr><td class="patent-data-table-td ">2</td><td class="patent-data-table-td "><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td ">张艳玲，徐海峰: "<a href='http://scholar.google.com/scholar?q="%E5%9C%A8Android%E5%B9%B3%E5%8F%B0%E4%B8%8A%E5%BC%80%E5%8F%91FUSE%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"'>在Android平台上开发FUSE文件系统</a>", 《电脑编程技巧与维护》, 18 February 2012 (2012-02-18), pages 67 - 68</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=N7_HCAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0009445000">G06F9/445</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=N7_HCAABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0009440000">G06F9/44</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2013年7月24日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2013年8月21日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2016年2月24日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/e124a559c36e04d7a0c8/CN103218228A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_50a6672b5f82ffbd39b7a9e87fd4594c.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E5%AE%89%E5%8D%93%E8%AE%BE%E5%A4%87%E5%86%85%E7%BD%AE%E7%A1%AC%E7%9B%98%E5%AE%9E%E7%8E%B0ntfs.pdf?id=N7_HCAABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U23D54NTv_AqR0DHO_0WGikSz3Vpw"},"sample_url":"https://www.google.com/patents/reader?id=N7_HCAABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>