<!DOCTYPE html><html><head><title>专利 CN101374118A - 一种消息互连的方法、系统及装置 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_6e802a6b2b28d51711baddc2f3bec198/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_6e802a6b2b28d51711baddc2f3bec198__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="一种消息互连的方法、系统及装置"><meta name="DC.contributor" content="卞永刚" scheme="inventor"><meta name="DC.contributor" content="刚 梁" scheme="inventor"><meta name="DC.contributor" content="牟伦建" scheme="inventor"><meta name="DC.contributor" content="珏 王" scheme="inventor"><meta name="DC.contributor" content="王啸波" scheme="inventor"><meta name="DC.contributor" content="许国军" scheme="inventor"><meta name="DC.contributor" content="成 黄" scheme="inventor"><meta name="DC.contributor" content="华为技术有限公司" scheme="assignee"><meta name="DC.date" content="2007-8-23" scheme="dateSubmitted"><meta name="DC.description" content="本发明公开了一种消息互连的方法，包括：会话初始化协议(SIP)消息服务器接收SIP消息，向接收方路由转发所述SIP消息；接收回复所述SIP消息的SIP响应；当根据所述SIP响应确定需要进行消息互连时，将所述SIP消息发送至互连网关；互连网关将所述SIP消息或通过根据所述SIP消息建立的会话接收的SIP会话消息进行协议转换，并发送到对应的非SIP消息系统。本发明还公开了一种包括SIP消息服务器和互连网关的消息互连系统、以及一种SIP消息服务器及一种互连网关。使用本发明确保了将SIP消息互连转发至接收方终端对应的非SIP消息系统。"><meta name="DC.date" content="2009-2-25"><meta name="citation_patent_publication_number" content="CN:101374118:A"><meta name="citation_patent_application_number" content="CN:200710146146"><link rel="canonical" href="https://www.google.com/patents/CN101374118A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN101374118A?cl=zh"/><meta name="title" content="专利 CN101374118A - 一种消息互连的方法、系统及装置"/><meta name="description" content="本发明公开了一种消息互连的方法，包括：会话初始化协议(SIP)消息服务器接收SIP消息，向接收方路由转发所述SIP消息；接收回复所述SIP消息的SIP响应；当根据所述SIP响应确定需要进行消息互连时，将所述SIP消息发送至互连网关；互连网关将所述SIP消息或通过根据所述SIP消息建立的会话接收的SIP会话消息进行协议转换，并发送到对应的非SIP消息系统。本发明还公开了一种包括SIP消息服务器和互连网关的消息互连系统、以及一种SIP消息服务器及一种互连网关。使用本发明确保了将SIP消息互连转发至接收方终端对应的非SIP消息系统。"/><meta property="og:title" content="专利 CN101374118A - 一种消息互连的方法、系统及装置"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&sa=N&tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?cl=zh&hl=zh-CN&tbm=isch&source=og&sa=N&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?cl=zh&hl=zh-CN&sa=N&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?cl=zh&hl=zh-CN&sa=N&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?cl=zh&hl=zh-CN&sa=N&tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN101374118A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN101374118A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN101374118A&amp;usg=AFQjCNEq5rhrBPRp35WwU3xFOTy3Rm-Qng" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/18168a4342c570591d28/CN101374118A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/18168a4342c570591d28/CN101374118A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN101374118A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN101374118A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN101374118A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN101374118B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN101374118A?cl=zh" style="display:none"><span itemprop="description">本发明公开了一种消息互连的方法，包括：会话初始化协议(SIP)消息服务器接收SIP消息，向接收方路由转发所述SIP消息；接收回复所述SIP消息的SIP响应；当根据所述SIP响应确定需要进行消息互连时，将所述SIP消息发送至互连网关 ...</span><span itemprop="url">https://www.google.com/patents/CN101374118A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN101374118A - 一种消息互连的方法、系统及装置</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN101374118A - 一种消息互连的方法、系统及装置" title="专利 CN101374118A - 一种消息互连的方法、系统及装置"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN101374118 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 200710146146</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2009年2月25日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2007年8月23日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2007年8月23日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101374118B?hl=zh-CN&amp;cl=zh">CN101374118B</a>, </span><span class="patent-bibdata-value"><a href="/patents/US8799373?hl=zh-CN&amp;cl=zh">US8799373</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20100146066?hl=zh-CN&amp;cl=zh">US20100146066</a>, </span><span class="patent-bibdata-value"><a href="/patents/WO2009026822A1?hl=zh-CN&amp;cl=zh">WO2009026822A1</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">200710146146.7, </span><span class="patent-bibdata-value">CN 101374118 A, </span><span class="patent-bibdata-value">CN 101374118A, </span><span class="patent-bibdata-value">CN 200710146146, </span><span class="patent-bibdata-value">CN-A-101374118, </span><span class="patent-bibdata-value">CN101374118 A, </span><span class="patent-bibdata-value">CN101374118A, </span><span class="patent-bibdata-value">CN200710146146, </span><span class="patent-bibdata-value">CN200710146146.7</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%8D%9E%E6%B0%B8%E5%88%9A%22">卞永刚</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E5%88%9A+%E6%A2%81%22">刚 梁</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%89%9F%E4%BC%A6%E5%BB%BA%22">牟伦建</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%8F%8F+%E7%8E%8B%22">珏 王</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E7%8E%8B%E5%95%B8%E6%B3%A2%22">王啸波</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E8%AE%B8%E5%9B%BD%E5%86%9B%22">许国军</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%88%90+%E9%BB%84%22">成 黄</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E5%8D%8E%E4%B8%BA%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%22">华为技术有限公司</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN101374118A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101374118A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN101374118A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#forward-citations"> 被以下专利引用</a> (11),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (20),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D200710146146&amp;usg=AFQjCNEuqXA4psOLLjlwa1Q-LTscTs6lHg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D101374118A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNGYs6-rGkR7yHcKENCWaGteyJhRtg"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT84954162" lang="ZH" load-source="patent-office">一种消息互连的方法、系统及装置</invention-title>
      </span><br><span class="patent-number">CN 101374118 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA61188865" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明公开了一种消息互连的方法，包括：会话初始化协议(SIP)消息服务器接收SIP消息，向接收方路由转发所述SIP消息；接收回复所述SIP消息的SIP响应；当根据所述SIP响应确定需要进行消息互连时，将所述SIP消息发送至互连网关；互连网关将所述SIP消息或通过根据所述SIP消息建立的会话接收的SIP会话消息进行协议转换，并发送到对应的非SIP消息系统。本发明还公开了一种包括SIP消息服务器和互连网关的消息互连系统、以及一种SIP消息服务器及一种互连网关。使用本发明确保了将SIP消息互连转发至接收方终端对应的非SIP消息系统。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(23)</span></span></div><div class="patent-text"><div mxw-id="PCLM13335471" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.一种消息互连的方法，其特征在于，该方法包括：SIP消息服务器接收会话初始化协议SIP消息，向接收方路由转发所述SIP消息；接收回复所述SIP消息的SIP响应；当根据所述SIP响应确定需要进行消息互连时，将所述SIP消息发送至互连网关；互连网关将所述SIP消息或通过根据所述SIP消息建立的会话接收的SIP会话消息进行协议转换，并发送到对应的非SIP消息系统。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2、 如权利要求l所述的方法，其特征在于，所述SIP消息服务器SIP响应 确定需要进行消息互连为：SIP消息服务器根据所述SIP响应，以及发送方预 先设置的转发信息或所述SIP消息中携带的关于互连的指示，确定需要进行消 息互连。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3、 如权利要求l所述的方法，其特征在于，所述SIP消息服务器将SIP消 息发送到互连网关包括：SIP消息服务器确定互连类型；根据所述互连类型及预先设置的互连类型与互连网关的对应关系，选择对 应的互连网关，将所述SIP消息转发至所述互连网关。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4、 如权利要求l所述的方法，其特征在于，所述互连网关通过SIP消息建 立的会话接收SIP会话消息之前，该方法进一步包括：SIP消息服务器确定互连类型，根据所述互连类型及预先设置的互连类型 与互连网关的对应关系，选择对应的互连网关；将所述SIP消息发送至互连网 关，在发送方终端与互连网关之间建立会话。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5、 如权利要求3或4所述的方法，其特征在于，所述SIP消息服务器确定 互连类型为：根据发送方预先设置的互连转发信息，和/或所述SIP消息的类型，和/或所 述SIP消息中的请求统一资源标识符Request URI,确定互连类型。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="6" class="claim">
      <div class="claim-text">6、 如权利要求3或4所述的方法，其特征在于，所述SIP消息服务器确定 互连类型包括：SIP消息服务器根据所述SIP消息中的Request URI查询电话号码映射域名 系统ENUM DNS服务器，或查询网络地址本，或向接收方网络查询接收方配 置信息，获取接收方终端的业务信息；根据所述获取的接收方终端的业务信息， 确定互连类型。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="7" class="claim">
      <div class="claim-text">7、 如权利要求l所述的方法，其特征在于，所述互连网关将所述SIP消息 进行协议转换，并转发到对应的非SIP消息系统包括：互连网关选择接收方终端的业务，并根据所述选择的业务将SIP消息进行 协议转换后，发送至所述选才&#22890;的业务对应的非SIP消息系统。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="8" class="claim">
      <div class="claim-text">8、 如权利要求l所述的方法，其特征在于，所述互连网关将通过SIP消息 建立的会话接收的SIP会话消息进行协议转换，并转发到对应的非SIP消息系 统包括：互连网关根据所述SIP消息，在自身与发送方终端之间建立会话；通过所 述建立的会话接收SIP会话消息；互连网关选择接收方终端的业务，并根据所述选择的业务确定互连类型； 将所述SIP会话消息进行互连类型对应的协议转换后，发送至对应的非SIP消 息系统。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="9" class="claim">
      <div class="claim-text">9、 如权利要求7或8所述的方法，其特征在于，所述互连网关选择接收方 终端的业务包括：互连网关根据所述SIP消息中的Request URI，查询ENUM DNS服务器， 或查询网络地址本，或查询接收方终端的网络服务器，获取Request URI对应 的接收方终端业务信息，在所述业务信息中选择一个接收方终端的业务。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="10" class="claim">
      <div class="claim-text">10、 如权利要求9所述的方法，其特征在于，所述业务信息中包含各业务 的优先级信息，所述在所述业务信息中选择一个接收方终端的业务为：根据所述各业务的 优先级信息，在所述业务信息中选择一个业务。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="11" class="claim">
      <div class="claim-text">11、 如权利要求1所述的方法，其特征在于，所述向接收方路由转发所述SIP消息之前，该方法进一步包括：判断所述SIP消息中的Request URI是否为SIP URI，如果是，则执行所述 向接收方路由转发所述SIP消息的步骤；否则，判断是否能够根据所述Request URI获取SIP URI,如果是，则执行 所述向接收方路由转发所述SIP消息的步骤；如果不能#4居所述Request URI 获取SIPURI，则直接执行所述确定需要进行消息互连的步骤。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="12" class="claim">
      <div class="claim-text">12、 如权利要求1所述的方法，其特征在于，所述路由转发所述SIP消息 之前，该方法进一步包括：获取接收方终端的业务信息，判断所述业务信息是否与所述SIP消息对应 的业务类型相同；如果是，则执行所述向接收方路由转发SIP消息的步骤；否 则，直接执行所述确定需要进行消息互连的步骤。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="13" class="claim">
      <div class="claim-text">13、 如权利要求1所述的方法，其特征在于，所述路由转发所述SIP消息 之前，该方法进一步包括：根据所述SIP消息中R叫uestURI对应的域，判断接收方网络设备是否支持 所述SIP消息对应的业务，如果是，则执行所述向接收方路由转发SIP消息的 步骤；否则直接执行所述确定需要进行消息互连的步骤。</div>
    </div>
    </div> <div class="claim"> <div num="14" class="claim">
      <div class="claim-text">14、 一种消息互连的系统，其特征在于，该系统包括会话初始化协议SIP 消息服务器和互连网关，所述SIP消息服务器，用于接收SIP消息，向接收方路由转发所述SIP消 息；接收回复所述SIP消息的SIP响应，根据所述SIP响应确定需要进行消息 互连时，将所述SIP消息发送至互连网关；所述互连网关，用于接收所述SIP消息，将所述SIP消息进行协议转换， 并发送到对应的非SIP消息系统；或者接收所述SIP消息，根据SIP消息在自 身与发送方终端之间建立会话，通过所述建立的会话接收SIP会话消息，进行 协议转换后，发送至对应的非SIP消息系统。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="15" class="claim">
      <div class="claim-text">15、 如权利要求14所述的系统，其特征在于，该系统进一步包括网络地址 本和/或电话号码映射域名系统ENUM DNS服务器和/或用户信息数据库，用于 保存接收方终端的业务信息和/或发送方的转发设置；所述SIP消息服务器或互连网关进一步用于获取接收方终端的业务信息和/ 或发送方的转发设置，根据所述接收方终端的业务信息和/或发送方的转发设 置，确定互连类型。</div>
    </div>
    </div> <div class="claim"> <div num="16" class="claim">
      <div class="claim-text">16、 一种会话初始化协议SIP消息服务器，其特征在于，该SIP消息服务 器包括收发模块、确定模块和互连模块，所述收发模块，用于接收SIP消息，路由转发所述SIP消息，并接收回复 的SIP响应；所述确定模块，用于根据所述收发模块接收到的SIP响应，判断是否需要 互连；所述互连模块，用于当所述确定模块确定需要进行消息互连时，将所述SIP 消息转发至互连网关。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="17" class="claim">
      <div class="claim-text">17、 如权利要求16所述的SIP消息服务器，其特征在于，所述SIP消息服 务器进一步包括存储模块，用于存储互连类型与互连网关的对应关系；所述互连模块进一步根据所述SIP响应确定互连类型，并#^居所述对应关 系，将所述SIP消息转发至互连类型对应的互连网关。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="18" class="claim">
      <div class="claim-text">18、 如权利要求17所述的SIP消息服务器，其特征在于，所述SIP消息服 务器进一步包括接收方业务信息获取模块，用于从网络地址本或电话号码映射所述互连模块进一步根据所述接收方终端的业务信息，确定互连类型。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="19" class="claim">
      <div class="claim-text">19、 如权利要求16所述的SIP消息服务器，其特征在于，所述SIP消息服 务器进一步包括判断模块，用于根据获取的接收方业务信息，判断所述业务信 息中是否包含与所述SIP消息对应的业务类型相同的业务；或者根据所述SIP 消息中的请求统一资源标识符R叫uest URI对应的域，判断接收方网络设备是 否支持所述SIP消息对应的业务；如果是，则由所述收发模块转发SIP消息； 否则所述确定模块向所述互连模块发送所述SIP消息。</div>
    </div>
    </div> <div class="claim"> <div num="20" class="claim">
      <div class="claim-text">20、 一种互连网关，其特征在于，该互连网关包括：接收模块、转换模块和转发模块，所述接收模块，用于接收会话初始化协议SIP消息； 所述转换模块，用于将所述SIP消息进行协议转换后，发送到转发模块； 所述转发模块，用于将所述转换模块转换后的消息发送到所述业务对应的 非SIP消息系统。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="21" class="claim">
      <div class="claim-text">21、 如权利要求20所述的互连网关，其特征在于，所述互连网关进一步包 括会话模块，所述接收模块进一步在接收到SIP消息后，发送至所述会话模块； 所述会话模块用于根据所述SIP消息与发送方终端建立会话；接收SIP会 话消息，发送至转换模块；所述转换模块，进一步将所述SIP会话消息进行协议转换后，发送至转发模块。</div>
    </div>
    </div> <div class="claim"> <div num="22" class="claim">
      <div class="claim-text">22、 一种互连网关，其特征在于，该互连网关包括：接收模块、接收方业 务信息获取模块、选择模块、转换模块和转发模块，所述接收^t块，用于接收会话初始化协议SIP消息；所述接收方业务信息获取模块，用于从网络地址本、电话号码域名系统 ENUMDNS服务器或接收方网络设备查询接收方终端的业务信息；所述选择模块，用于从所述接收方业务信息获取模块获取的业务信息中， 选择一个业务；所述转换模块，用于将所述SIP消息进行协议转换，转换为所述选择模块 选择的业务对应的消息；所述转发模块，用于将所述转换模块转换后的消息发送到所述业务对应的 非SIP消息系统。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="23" class="claim">
      <div class="claim-text">23、 如权利要求22所述的互连网关，其特征在于，所述互连网关进一步包 括会话模块，所述接收模块进一步在接收到SIP消息后，发送至所述会话模块； 所述会话模块用于根据所述SIP消息与发送方终端建立会话；接收SIP会话消息，发送至转换模块；所述转换模块，进一步将所述SIP会话消息进行协议转换后，发送至转发模块。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES18722496" lang="ZH" load-source="patent-office" class="description">
    <p>一种消息互连的方法、系统及装置</p>
    <p>技术领域</p>
    <p>本发明涉及通信技术，具体涉及一种消息互连的方法、系统及装置。 背景技术</p>
    <p>随着移动通信技术的迅速发展，同时也为满足用户的各种通信要求，目</p>
    <p>前存在多种消息业务，包括：短消息业务（SMS, Short Message Service )、 多媒体消息业务(MMS， Multimedia Messaging Service )、即时消息和呈现 业务（IMPS, Instant Messaging and Presence Service )、基于会话初始化协 议（SIP， Session Initiated Protocol )的SIP即时消息和呈现支持扩展（SIMPLE, SIP Instant Message and Presence Leveraging Extensions )即时消息(IM, Instant Messaging )及融合IP消息（CPM, Converged IP Message )等基于标准协议 的消息，还包括一些基于私有协议的消息业务，例如：飞信、移动即时通信 业务及移动MSN等。</p>
    <p>目前，大多数使用消息业务的用户是在使用传统的消息业务，例如SMS 、 MMS等。当部署新的消息业务，例如SIP SIMPLE IM或CPM时，为了方 便用户使用，必须考虑新的消息业务与传统消息业务的互连，即能够将基于 新的消息业务的消息进行协议转换后，传输至传统消息业务系统中，由使用 传统消息业务的用户接收该消息。</p>
    <p>图1为现有的第一种消息互连的方法流程图。如图l所示，该方法包括 以下步骤：</p>
    <p>步骤100中，发送方终端给使用不同协议类型的接收方终端发送消息， 首先将所发消息中携带接收方使用的协议类型后，发送至发送方网络设备， 例如发送方消息服务器；步骤101中，发送方网络设备根据消息中指示的接 收方使用的协议类型，确定需要进行消息互连，因此将消息发送至互连网关</p>
    <p>(IW-GW， Interworking Gateway);步骤102中，互连网关将消息进行协 议转换，即进行信令转换或信令和数据格式转换后，使用接收方使用的协议 发送至接收方网络设备，例如接收方消息服务器；步骤103中，由接收方网 络设备将转换后的消息发送至接收方终端。</p>
    <p>可见，该方案在发送方终端给使用不同协议类型的接收方终端发送消息 时，必须在消息中指示接收方使用的协议类型，如果发送方终端不知道接收 方使用的协议类型，则无法将消息发送到接收方网络设备，也就无法发送至 接收方终端。</p>
    <p>图2为现有第二种消息互连的方法流程图。该方法流程中，接收方对应 多个使用不同协议类型的接收方终端，例如使用即时通信业务的接收方终端 和移动终端。如图2所示，该方法包括以下步骤：</p>
    <p>步骤200中，发送方终端将发送给接收方的消息发送到发送方网络设 备，例如发送方消息服务器；步骤201中，发送方网络设备将消息路由到与 发送方终端使用相同协议类型的接收方网络设备A;步骤202中，接收方网 络设备A判断接收方终端A不在线，则根据接收方终端A中的转发设置， 例如转发至同一接收方的使用另一协议类型的接收方终端B，将消息转发至 互连网关；步骤203中，互连网关将消息进行协议转换后，发送到该接收方 终端B对应的接收方网络设备B,例如接收方消息服务器；步骤204中，由 接收方网络设备B将进行协议转换后的消息转发至接收方终端B，该接收方 终端B为接收方终端A的转发设置中使用另一协议类型的接收方终端。</p>
    <p>例如，使用即时通信业务的发送方终端给同样使用即时通信业务的接收 方终端发送消息，同时，接收方网络的设置中包含转发设置，例如将消息转 发至该接收方的移动终端。即时通信业务服务器在接收到消息后，发现接收 方终端不在线，则根据接收方终端中的转发设置将消息转发至互连网关，由 互连网关将消息转换为短消息后，发送至接收方的移动终端。</p>
    <p>该方案虽然可以将消息转发至接收方的另一接收方终端，但是，必须是</p>
    <p>根据接收方网络中的设置进行转发，如果接收方网络中没有转发设置，则无</p>
    <p>法将消息发送到接收方网络设备B,也就无法发送到接收方终端；同时，如 果接收方网络不支持发送方网络的协议类型，或者接收方没有订购发送方终 端使用的业务，则消息也无法发送至接收方网络设备B。</p>
    <p>综上，发送方终端发送SIP消息时，使用现有的消息互连方法无法确保 将SIP消息发送至接收方终端对应的非SIP消息系统，例如短消息业务 (SMS， Short Message Service )系统、多媒体消息业务（MMS, Multimedia Messaging Service )系统、邮件系统或IMPS系统。</p>
    <p>发明内容</p>
    <p>本发明实施例提供一种消息互连的方法，确保将SIP消息互连转发至接收 方终端对应的非SIP消息系统。</p>
    <p>本发明实施例还提供一种消息互连的系统，确保将SIP消息互连转发至接 收方终端对应的非SIP消息系统。</p>
    <p>本发明实施例还提供一种SIP消息服务器，确保将SIP消息互连转发至接 收方终端对应的非SIP消息系统。</p>
    <p>本发明实施例还提供一种互连网关，确保将SIP消息互连转发至接收方 终端对应的非SIP消息系统。</p>
    <p>为达到上述目的，本发明实施例的技术方案是这样实现的：</p>
    <p>一种消息互连的方法，包括：</p>
    <p>接收SIP消息，向接收方路由转发所述SIP消息；</p>
    <p>SIP消息服务器接收回复所述SIP消息的SIP响应；当根据所述SIP响应确 定需要进行消息互连时，将所述SIP消息发送至互连网关；</p>
    <p>互连网关将所述SIP消息或通过根据所述SIP消息建立的会话接收的 SIP会话消息进行协议转换，并发送到对应的非SIP消息系统。</p>
    <p>一种消息互连的系统，包括SIP消息服务器和互连网关，</p>
    <p>所述SIP消息服务器，用于接收SIP消息，向接收方路由转发所述SIP消</p>
    <p>息；接收回复所述SIP消息的SIP响应，根据所述SIP响应确定需要进行消息</p>
    <p>互连时，将所述SIP消息发送至互连网关；</p>
    <p>所述互连网关，用于接收所述SIP消息，将所述SIP消息进行协议转换，</p>
    <p>并发送到对应的非SIP消息系统；或者接收所述SIP消息，根据SIP消息在</p>
    <p>自身与发送方终端之间建立会话，通过所述建立的会话接收SIP会话消息，</p>
    <p>进行协议转换后，发送至对应的非SIP消息系统。</p>
    <p>一种SIP消息服务器，包括收发模块、确定模块和互连模块， 所述收发模块，用于接收SIP消息，路由转发所述SIP消息，并接收回复</p>
    <p>的SIP响应；</p>
    <p>所述确定模块，用于根据所述收发模块接收到的SIP响应，判断是否需要 互连；</p>
    <p>所述互连模块，用于当所述确定模块确定需要进行消息互连时，将所述 SIP消息转发至互连网关。</p>
    <p>一种互连网关，包括：接收模块、转换模块和转发模块，</p>
    <p>所述接收模块，用于接收会话初始化协议SIP消息；</p>
    <p>所述转换模块，用于将所述SIP消息进行协议转换后，发送到转发模块；</p>
    <p>所述转发模块，用于将所述转换模块转换后的消息发送到所述业务对应 的非SIP消息系统。</p>
    <p>一种互连网关，包括：接收模块、接收方业务信息获取模块、选#^莫块、 转换模块和转发模块，</p>
    <p>所述接收模块，用于接收会话初始化协议SIP消息；</p>
    <p>所述接收方业务信息获取模块，用于从网络地址本、电话号码域名系统 ENUMDNS服务器或接收方网络设备查询接收方终端的业务信息；</p>
    <p>所述选择模块，用于从所述接收方业务信息获取模块获取的业务信息中，</p>
    <p>选^r一个业务；</p>
    <p>所述转换模块，用于将所述SIP消息进行协议转换，转换为所述选择模块 选"f&#22890;的业务对应的消息；</p>
    <p>所述转发模块，用于将所述转换模块转换后的消息发送到所述业务对应 的非SIP消息系统。</p>
    <p>与现有技术相比，本发明实施例所提供的技术方案，SIP消息服务器向</p>
    <p>接收方路由转发接收到的SIP消息，并根据回复的SIP响应确定需要进行互 连，然后将该SIP消息发送至互连网关，由互连网关将该SIP消息或通过根 据该SIP消息建立的会话接收的SIP会话消息进行协议转换，并发送至对应 的非SIP消息系统。因此当支持SIP消息对应业务的接收方终端不在线，或 接收方终端不支持SIP消息对应的业务，或发送方终端不清楚接收方终端所 使用的协议类型，或接收方终端没有进行转发设置时，都可以根据SIP响应 确定需要进行互连，并由互连网关将SIP消息或SIP会话消息进行协议转换 后，发送至对应的非SIP消息系统，从而确保将SIP消息发送至接收方终端 对应的非SIP消息系统。</p>
    <p>附图说明</p>
    <p>图1为现有的第一种消息互连的方法流程图；</p>
    <p>图2为现有的第二种消息互连的方法流程图；</p>
    <p>图3为本发明实施例中消息互连的方法流程图；</p>
    <p>图4为本发明实施例一消息互连的系统结构图；</p>
    <p>图5为本发明实施例一 SIP消息服务器的结构示意图；</p>
    <p>图6为本发明实施例一 SIP消息服务器进行消息互连的方法流程图；</p>
    <p>图7为本发明实施例一 CPM用户发送消息的方法流程图；</p>
    <p>图8为本发明实施例一 IM用户发送消息的方法流程图；</p>
    <p>图9为本发明实施例二消息互连的系统结构图；</p>
    <p>图10为本发明实施例二 SIP消息服务器和互连网关的结构示意图；</p>
    <p>图11为本发明实施例二互连网关的消息处理方法流程图；</p>
    <p>图12为本发明实施例二 CPM用户发送消息的方法流程图。</p>
    <p>具体实施方式</p>
    <p>下面结合附图及具体实施例对本发明进行详细说明。</p>
    <p>图3为本发明实施例中消息互连的方法流程图。如图3所示，该方法包</p>
    <p>括以下步骤：</p>
    <p>步骤300中，接收并向接收方路由转发发送方终端提交的SIP消息；并 在步骤301接收回复该SIP消息的SIP响应消息；步骤302中，根据接收到 的SIP响应消息，判断是否需要互连，是则执行步骤303:将SIP消息发送 至互连网关，由互连网关将接收到的SIP消息或#4居该SIP消息建立的会话 接收的SIP会话消息进行协议转换后，发送到接收方终端对应的非SIP消息 系统，然后结束流程；否则执行步骤304:向发送方终端转发SIP响应消息。</p>
    <p>实施例一：</p>
    <p>本实施例在进行消息互连时，由SIP消息服务器判断消息互连类型，并 转发至接收方终端对应的互连网关，该互连网关将SIP消息进行协议转换后， 发送到接收方终端对应的非SIP消息系统。</p>
    <p>本发明实施例 一 消息互连的系统包括SIP消息服务器和互连网关，其中 SIP消息服务器，用于接收SIP消息，向接收方路由转发SIP消息，并根据 回复该SIP消息的SIP响应确定需要进行消息互连时，根据SIP响应确定互 连类型，将SIP消息发送至互连类型对应的互连网关。</p>
    <p>互连网关，用于将接收到的SIP消息进行协议转换后，发送至对应的非 SIP消息系统；接收SIP消息，根据SIP消息在自身与发送方终端之间建立 会话，通过建立的会话接收SIP会话消息，进行协议转换后，发送至对应的 非SIP消息系统。</p>
    <p>本例中确定互连类型也就是选择接收方终端的业务。</p>
    <p>图4为本发明实施例一消息互连的系统结构图，如图4所示，该系统除 包括SIP消息服务器和互连网关外，还可以进一步包括网络地址本和/或电 话号石马映射域名系统（ENUM DNS， Telephone Number Mapping Domain</p>
    <p>Name System )服务器和/或用户信息数据库，用于存储接收方终端的业务信 息、发送方的转发设置、或接收方终端的业务信息和发送方的转发设置，其 中接收方终端业务信息例如是接收方终端标识与业务标识的对应关系。SIP 消息服务器可以进一步根据接收方终端的业务信息和/或发送方终端的转发 设置确定互连类型。SIP消息服务器还可以进一步根据接收方终端的业务信 息，判断接收方终端是否支持SIP消息对应的业务，例如是否支持SIMPLE 或CPM,是则将SIP消息发送至接收方网络设备，否则确定互连类型。</p>
    <p>SIP消息服务器为SIMPLE IM服务器或CPM服务器等基于SIP的消息 服务器。</p>
    <p>本实施例中可以是每对应一种互连类型设置一个互连网关，也可以是多 种互连类型设置一个互连网关，每个互连网关分别设置对应互连类型的逻辑 模块，分别处理与该互连类型对应的消息互连转发。</p>
    <p>图5为本发明实施例一 SIP消息服务器的结构示意图。如图5所示，该 SIP消息服务器包括收发模块、确定模块和互连模块。</p>
    <p>其中，收发模块接收S1P消息，向接收方路由转发SIP消息，并接收回复 该SIP消息的SIP响应；确定模块根据所述收发模块接收到的SIP响应，判断 是否需要互连，当确定需要互连时，向互连模块发送所述SIP消息；互连模块， 用于确定互连类型，将SIP消息转发至互连类型对应的互连网关。</p>
    <p>SIP消息服务器可以进一步包括存储模块，用于存储互连类型与互连网关 的对应关系；此时，互连模块可以进一步根据SIP响应并根据存储模块保存的 互连类型与互连网关的对应关系，将SIP消息转发至互连类型对应的互连网关。</p>
    <p>SIP消息服务器进一步包括接收方业务信息获取模块，用于从网络地址本 或ENUM DNS服务器或接收方网络服务器获取接收方终端的业务信息；对应 的互连模块进一步根据接收方终端的业务信息，确定互连类型。</p>
    <p>SIP消息服务器进一步包括判断模块，用于根据获取的接收方业务信息， 判断所述业务信息中是否包含与SIP消息对应的业务类型相同的业务，或者根 据SIP消息中的Request URI对应的域，判断接收方网络设备是否支持所述SIP</p>
    <p>消息对应的业务；如果是，则由收发模块转发SIP消息；否则由确定模块向互 连模块发送SIP消息。</p>
    <p>图6为本发明实施例一 SIP消息服务器进行消息互连的方法流程图。如 图6所示，该方法包括以下步骤：</p>
    <p>步骤600:接收SIP消息客户端，即发送方终端发送的SIP消息，获取 SIP消息中的请求统一资源标识符（R叫uest URI， Request Uniform Resource Identifier )。</p>
    <p>该Request URI为接收方的地址信息，发送方网络根据该R叫uest URI 路由SIP消息到接收方网络。</p>
    <p>步骤601:判断Request URI是否为SIP URI，如果是则执行步骤602， 否则执行步骤606。</p>
    <p>本步骤中，判断R叫uest URI是否为SIP URI的过程为现有技术，在此 不再详述。</p>
    <p>步骤602:根据SIPURI所属域，判断该域是否提供和发送方终端相同 的消息业务，如果是则执行步骤603,否则执行步骤605。</p>
    <p>本步骤中，发送方网络设备需要保存有其他网络所提供业务的信息，例 如可以在网络地址本中或SIP消息服务器中预先保存其他网络所提供业务的 信息.执行本步骤时，SIP消息服务器根据SIP URI所属域及预先保存的信息， 判断该域是否支持SIP消息对应的业务。SIP消息对应的业务包括基于SIP 的SIMPLE IM业务或CPM业务。</p>
    <p>本步骤可以省略，也就是说如果步骤601的判断结果为"是，，，可以直 接执行步骤603。</p>
    <p>步骤603:向接收方路由转发该SIP消息，并接收回复该SIP消息的SIP</p>
    <p>响应消息。</p>
    <p>步骤604:根据SIP响应消息，判断是否需要互连，是，则执行步骤605， 否则执行步骤609。</p>
    <p>本步骤中，可以根据SIP响应消息的内容判断是否需要互连。如果发送失败，则由于SIP响应消息会携带发送失败的原因值，则SIP消息服务器可</p>
    <p>以根据其中的失败原因值判断是否需要互连。例如，SIP 404 NOT FOUND 表示该Request URI不可路由，SIP 480 Temporarily Unavailable表示该用户 暂时不可达，SIP消息服务器在接收到这携带这类原因值的SIP响应消息时，</p>
    <p>确定需要进行互连。</p>
    <p>SIP消息服务器还可以进一步根据发送方的用户设置或SIP消息中关于 互连的指示，判断是否需要互连。例如：发送方终端或网络设置或SIP消息 中指示：接收方网络不支持和发送方终端相同的消息业务时需要互连；接收 方终端不在线时需要互连；接收方终端没有使用消息转发功能时需要互连等 等，本步骤中SIP消息服务器就可以根据这些信息判断是否需要互连。</p>
    <p>步骤605:选择互连类型，将该SIP消息发送至对应的互连网关，并结 束消息互连处理流程。</p>
    <p>本步骤中，选择互连类型就是要选择接收方终端的业务，例如选择接收 方终端支持的短消息业务或多媒体消息业务等。可以根据发送方的设置、SIP 消息的类型、Request URI类型等信息判断互连类型，及预先设置的互连类 型与互连网关的对应关系，选择互连网关。例如，发送方预先设置了将SIP 消息转换为短消息后发送，则选择互连类型为短消息。如果R叫uestURI类 型为移动终端的号码，则选择互连类型为短消息或多媒体消息。</p>
    <p>本步骤还可能需要根据R叫uest URI查询ENUM DNS服务器，或者查 询网络地址本，获取接收方终端对应的其他业务信息，根据获取的业务信息 确定互连类型，例如获取的接收方终端的业务信息包括多媒体消息业务和短 消息业务，且业务信息还包括各业务对应的优先级，则可以选择优先级最高 的业务。</p>
    <p>如果SIP消息服务器和互连网关之间采用其他协议，则需要将SIP消息 进行协议转换后，再发送到互连网关。</p>
    <p>步骤606:判断是否能根据Request URI查询到SIPURI，是则执行步骤 607,否则执行步骤605。本步骤可以通过查询发送方的网络地址本或查询ENUM DNS服务器来 实现。例如在网络地址本或ENUM DNS服务器预先设置了接收方终端的 Request URI与SIP URI的对应关系，通过执行本步骤，就可以查找到对应 的SIP URI。</p>
    <p>步骤607:判断是否能获取接收方终端的业务信息，是则执行步骤608, 否则执行步骤602。</p>
    <p>本步骤可以通过查询ENUM DNS服务器的结果或查询网络地址本的结 果，判断是否能获取接收方终端的业务信息，也可以通过向接收方网络服务 器查询接收方的业务信息。例如，在ENUM DNS服务器、网络地址本或接 收方网络服务器预先保存了接收方终端的SIP URI与其业务信息的对应关 系，通过查询，即可获取接收方终端的业务信息。</p>
    <p>步骤608:判断接收方终端是否使用和发送方终端相同的SIP消息业务， 是则执行步骤603,否则执行步骤605。</p>
    <p>步骤609:转发SIP响应消息至发送方终端。</p>
    <p>以上所描述的SIP消息服务器进行消息互连的方法流程中，步骤601~ 步骤602及步骤606&#12316;步骤608可以省略，也就是说SIP消息服务器可以只 根据接收方网络设备返回的SIP响应消息判断是否需要互连。当步骤601&#12316; 步骤602省略时，SIP消息服务器执行步骤603，路由转发接收到的SIP消 息，接收SIP响应，此时接收到的SIP响应消息可能是由SIP消息服务器对 应的SIP/IP核（CORE )发现该SIP消息中的Request URI不可路由回复的， 也可能是由接收方网络设备发现接收方终端不可达时回复的，无论是从 SIP/IP CORE还是接收方网络设备接收到的SIP响应消息，都可以作为步骤 604判断是否需要进行互连的依据。</p>
    <p>如果SIP消息为以SIP MESSAGE发送的消息，则SIP消息服务器将SIP 消息转发至对应的互连网关后，该互连网关进行协议转换，然后发送到接收 方终端对应的非SIP消息系统，由非SIP消息系统按照现有技术，将消息转 发到接收方终端。互连网关对消息进行协议转换为现有技术，在此不再赘述。</p>
    <p>下面首先以CPM用户发送SIP消息给不支持CPM的接收方终端为例，</p>
    <p>对本发明实施例的技术方案进行详细说明。</p>
    <p>图7为本发明实施例一 CPM用户发送消息的方法流程图。如图7所示， 该方法包括以下步骤：</p>
    <p>步骤700:发送方终端发送SIP消息给SIP/IP CORE。</p>
    <p>其中，该SIP消息的R叫uest URI为SIP URI，首先SIP消息被路由到 发送方的SIP/IP CORE。</p>
    <p>步骤701:根据触发条件，发送方的SIP/IP CORE将SIP消息触发到应 用月良务器（AS， Application Server )。</p>
    <p>本步骤中，SIP/IP CORE根据触发条件将SIP消息触发到应用服务器是 现有技术，在此不再详述。</p>
    <p>步骤702: AS根据图6所示的消息互连处理流程，根据在发送方网络 存储的接收方网络信息，判断接收方网络不提供CPM业务，进一步根据发 送方i殳定的转发功能，确定需要进行互连；并通过ENUM查询或网络地址 本查询，获取接收方终端的业务信息，根据查询到的接收方其他业务的优先 级和SIP消息的消息体内容，例如本例中查询到的接收方终端的业务信息中 SMS方式优先级最高，且SIP消息的消息体长度较小，则确定以SMS方式 将消息转发。</p>
    <p>步骤703&#12316;步骤705: AS在SIP消息的Route头域中增加处理SIP消息 和SMS消息互连的IW-GW地址，将SIP消息发送到SIP/IP CORE; SIP/IP CORE将SIP消息路由到IW-GW;并接收IW-GW返回的SIP 202 Accepted响应。</p>
    <p>步骤706&#12316;步骤708:将SIP 202 Accepted响应按照与SIP消息相反的路</p>
    <p>径返回到发送方终端。</p>
    <p>步骤709: IW-GW将接收到的SIP消息转换为短消息。</p>
    <p>在本步骤，如果SIP消息中指示了需要发送报告，则IW-GW还需要暂</p>
    <p>时存储该SIP消息，并且关联暂存的SIP消息和转换后的短消息；IW-GW</p>
    <p>还需要将转换后消息的发送者设为一个包含分配给IW-GW的服务提供商</p>
    <p>(SP， Service Provider )号码和唯一标识发送方终端的号码，用于4^收方终 端回复响应消息时根据该号码路由到IW-GW，并由IW-GW路由至发送方 终端。由于短消息系统只支持数字的号码，因此该唯一标识发送方终端的号 码，来源于对发送方终端SIP URI进行反向ENUM查询得到的结果，如果 发送者以TELURI标识，则直接用其中的电话号码。</p>
    <p>本步骤与步骤705&#12316;步骤708的执行不限制顺序，可以根据IW-GW的设 置灵活进行调整。</p>
    <p>步骤710:根据步骤709的转换结果，IW-GW将转换后的消息发给对 应的短消息中心，然后短消息中心按照现有的短消息发送方法，发送短消息 到接收方终端。</p>
    <p>步骤711:短消息中心返回发送报告。</p>
    <p>步骤712: IW-GW接收返回的发送报告，根据该发送报告构造SIP消息。</p>
    <p>步骤713&#12316;步骤716: IW-GW将构造的SIP消息通过SIP/IP CORE,发 送至发送方终端；并通过SIP/IP CORE接收发送方终端返回的SIP 200 OK 响应。</p>
    <p>由于短消息大小限制， 一个SIP消息可能会转换成多个短消息，因此步 骤710&#12316;步骤716可能多次执行。根据发送报告构造的SIP消息可能会经过 AS转发至发送方终端。</p>
    <p>如果SIP消息为SIP会话邀请(INVITE )类的SIP消息，则SIP消息服 务器确定互连类型后，将SIP消息发送到互连网关，互连网关^f艮据该SIP消 息建立与发送方终端之间的会话，如果SIP消息服务器参与SIP会话消息的 传输，则SIP消息服务器通过已建立的会话接收SIP会话消息，并将接收到 的SIP会话消息，通过已建立的会话传输至互连网关，由互连网关对SIP会 话消息进行协议转换后，发送至对应的非SIP消息系统；如果SIP消息服务 器不参与SIP会话消息的传输，则互连网关直接和发送方终端建立会话，通</p>
    <p>过已建立的会话接收SIP会话消息，进行协议转换后，发送至对应的非SIP</p>
    <p>消息系统。下面以IM用户发送SIP消息给没有订购IM业务的接收方终端</p>
    <p>为例，对本发明实施例的技术方案进行详细说明。</p>
    <p>图8为本发明实施例一 IM用户发送消息的方法流程图。如图8所示， 该方法包括以下步骤：</p>
    <p>步骤800:发送方终端发送SIP INVITE到发送方SIP/IP CORE A。 步骤801:根据触发条件，发送方SIP/IP CORE A将SIP INVITE触发</p>
    <p>到AS。</p>
    <p>步骤802: AS进行相应的处理，例如计费、将自己加入消息会话中继 协议（MSRP， Message Session Relay Protocol)路径，然后将SIP INVITE 返回给SIP/IP CORE A。</p>
    <p>步骤803&#12316;步骤805: SIP/IP CORE A路由SIP INVITE到SIP/IP CORE B; SIP/IP CORE B确定该请求是一个IM业务的请求，例如SIP INVITE中 Accept-Contact头域的值为"+g.oma.sip-im"，而根据接收方的用户签约信 息，判断接收方终端不是IM用户，因此SIP/IP CORE B返回SIP响应，表 示接收方不是IM用户；SIP/IP CORE A收到SIP/IP CORE B返回的SIP响 应，将SIP响应路由到AS。</p>
    <p>步骤806: AS根据SIP响应，判断需要进行消息互连，并确定互连类型。</p>
    <p>本步骤中，AS可以获取发送方偏好设置，根据获取的用户偏好设置， 确定以其他方式发送该IM，同时根据发送方的网络地址本查询或进行 ENUM查询，获取接收方终端的其他业务及对应的标识，本例中AS根据发 送方网络地址本查询到接收方终端可以接收多媒体消息，并获得对应的移动 台国际综合服务凄t字网络（MSISDN， Mobile Station Integrated Services Digital Network )号，确定通过多媒体消息将IM发送给接收方终端。</p>
    <p>步骤807: AS将SIP INVITE的Request URI设成查找到的接收方TEL URI,同时将IM和多媒体消息互连的互连网关地址加入SIP INVITE的Route</p>
    <p>头域，将4务改后的SIP INVITE发送到SIP/IP CORE A。</p>
    <p>步骤808: SIP/IP CORE A根据Route头域信息，将SIP INVITE路由到 对应的IW-GW。</p>
    <p>步骤809~步骤812: IW-GW接收SIP INVITE,返回SIP 200 OK响应； 按照与SIP INVITE相反的路径返回到发送方终端，从而才艮据SIP INVITE, 通过SIP 200 OK响应在发送方终端和IW-GW之间建立MSRP会话。</p>
    <p>实际应用中，本步骤可以在互连网关与发送方终端之间建立直接的会 话，也可以在互连网关和SIP消息服务器之间建立会话，SIP消息服务器和 发送方终端之间建立会话，这样互连网关和发送方终端之间就通过SIP消息 服务器建立了间接的会话。这些都是现有技术，不再详述，从逻辑上看，都 可以认为是互连网关和发送方终端之间建立了会话。</p>
    <p>步骤S13&#12316;步骤814:发送方终端利用建立好的MSRP会话通道，通过 MSRP发送（SEND )将SIP会话消息，本例中为IM,发送到IW-GW; IW-GW 接收MSRP SEND消息，返回MSRP 200 OK响应。</p>
    <p>一个IM可能会通过多个MSRP SEND发送，因此这两个步骤可以重复 多次。</p>
    <p>如果SIP消息服务器参与SIP会话消息的传输，则本步骤包括SIP消息 服务器通过会话接收SIP会话消息，并通过会话发送至互连网关。</p>
    <p>步骤815: IW-GW根据收到的MSRP SEND消息进行对应的处理，将 MSRP消息转换为多々某体消息（MM， Multimedia Message )。</p>
    <p>IW-GW还可以选择在收到完整的消息之后再进行协议转换，或者收到 单个MSRP SEND之后即进行协议转换；IW-GW还需要将转换后消息的发 送者设成一个电话号码，该号码包含一个分配给IW-GW的SP号码，用于 将接收方终端回复的消息路由到该IW-GW;同时包含能唯一标识发送方终 端的号码，以将接收方终端回复的消息路由到发送方终端。该唯一标识发送 方终端的号码通过根据发送者SIP URI进行反向ENUM查询得到，如果发 送者以TELURI标识，则直接用其中的电话号码。</p>
    <p>步骤816&#12316;步骤817:根据步骤815的转换结果，IW-GW将转换后的消 息发给对应的多媒体消息业务中心（MMSC， Multimedia Messaging Service Center);然后由MMSC按照现有的多媒体消息发送方法发送到接收方终端； 然后返回响应。</p>
    <p>根据IW-GW的处理策略，可能会有多个多媒体消息发送，因此这两个 步骤可以重复多次。</p>
    <p>步骤818&#12316;步骤819: IW-GW接收返回的响应，4艮据关联的MSRP SEND 构造对应的MSRP报告（REPORT ) ; IW-GW将构造的MSRP REPORT发</p>
    <p>给发送方终端。</p>
    <p>步骤820&#12316;步骤821:发送方终端向IW-GW发送SIP BYE请求，以中断 MSRP会话；IW-GW向发送方终端返回SIP200OK响应，中断MSRP会话。</p>
    <p>实施例二：</p>
    <p>本实施例中，SIP消息服务器只将需要进行互连的SIP消息转发至互连 网关，由互连网关判断互连类型，并进行消息互连处理。</p>
    <p>本实施例中的消息互连系统包括SIP消息服务器和互连网关。</p>
    <p>其中，SIP消息服务器，用于接收SIP消息，向接收方路由转发SIP消息； 并根据回复该SIP消息的SIP响应消息，确定需要进行消息互连时，将SIP消 息发送至互连网关。</p>
    <p>互连网关，用于接收SIP消息，确定互连类型后，将SIP消息进行协议 转换，并发送到对应的非SIP消息系统；或者接收SIP消息，^4居SIP消息 在自身与发送方终端之间建立会话，通过建立的会话接收SIP会话消息，然 后互连类型，将SIP会话消息进行协议转换后，发送至对应的非SIP消息系 统。</p>
    <p>图9为本发明实施例二消息互连的系统结构图。如图9所示，本实施例 中的消息互连系统可以进一步包括网络地址本和/或ENUM DNS服务器和/ 或用户信息数据库，用于保存接收方终端的业务信息时，互连网关根据从网 络地址本或ENUM DNS服务器或用户信息数据库或接收方网络服务器，获</p>
    <p>取的接收方终端的业务信息确定互连类型，即在接收方终端的业务信息中， 选择一 个业务，或者当业务信息包含优先级信息时，选择优先级最高的业务， 从而确定互连类型。</p>
    <p>SIP消息服务器为SIMPLE IM或CPM等基于SIP的消息服务器。</p>
    <p>本实施例中，互连网关提供单一接口给SIP消息服务器。也可以为发送 方终端所属的域设置一个互连网关，同时为接收方终端所属的域设置一个互 连网关，接收方域的互连网关将SIP消息进行协议转换后，路由到接收方域 的互连网关，由接收方域的互连网关确定互连类型，并转换消息后发送到接 收方终端的非SIP消息系统。</p>
    <p>图10为本发明实施例二 SIP消息服务器及互连网关的结构示意图。如 图IO所示，SIP消息服务器包括：收发模块接收SIP消息，向接收方路由转 发SIP消息，并接收回复该SIP消息的SIP响应；确定模块根据收发模块接收 到的SIP响应，判断是否需要互连，当确定需要互连时，向互连模块发送SIP 消息；互连^f莫块，用于将SIP消息转发至互连网关。</p>
    <p>SIP消息服务器进一步包括接收方业务信息获取模块和判断模块，接收 方业务信息获取模块用于从网络地址本或ENUM DNS服务器或接收方网络 服务器获取接收方终端的业务信息；判断模块，用于根据获取的接收方业务 信息，判断业务信息中是否包含与SIP消息对应的业务类型相同的业务，或 者根据SIP消息中的Request URI对应的域，判断接收方网络设备是否支持 SIP消息对应的业务；如果是，则由收发模块转发SIP消息；否则由确定模 块向互连模块发送SIP消息。</p>
    <p>互连网关包括接收模块、接收方业务信息获取模块、选择模块、转换模 块和转发模块。</p>
    <p>其中，接收模块，用于接收SIP消息；接收方业务信息获取模块，用于 从网络地址本、ENUM DNS服务器或接收方网络设备查询接收方终端的业 务信息；选择模块，用于从接收方业务信息获取模块获取的业务信息中，选 择一个业务；转换模块，用于将SIP消息进行协议转换，转换为选择模块选</p>
    <p>择的业务对应的消息；转发模块，用于将转换模块转换后的消息发送到对应 的非SIP消息系统。</p>
    <p>本实施例中，互连网关的转换模块可以有多个，每个对应不同的接收方 业务，由选择模块确定将选择发业务信息发送至哪个转换模块进行协议转换。</p>
    <p>互连网关进一步包括会话模块，此时接收模块进一步在接收到SIP消息后， 发送至会话模块；会话模块根据SIP消息与发送方终端建立会话；当SIP消息 服务器参与SIP会话消息的传输时，SIP消息服务器的互连模块进一步与互连 网关建立会话，收发模块进一步接收SIP消息对应的SIP会话消息；通过已建 立的会话将SIP会话消息发送至互连网关。</p>
    <p>相应地，互连网关的会话模块接收SIP会话消息，发送至转换模块；转换 模块再将所述SIP会话消息进行协议转换后，发送至转发模块。</p>
    <p>图11为本发明实施例二互连网关的消息处理方法流程图。如图11所示， 该方法包括以下步骤：</p>
    <p>步骤1100:互连网关接收由SIP消息服务器发送来的SIP消息。</p>
    <p>如果SIP消息服务器和互连网关之间采用其他协议，则接收其他协议的 消息。</p>
    <p>步骤1101:判断能否获得接收方终端的其他业务信息，如果能，则执 行步骤1102，如果不能，则执行步骤1105。</p>
    <p>本步骤中，可以根据SIP消息中的接收方终端业务标识，直接判断接收 方终端是否有其他业务，例如接收方业务标识为MSISDN号，则判断出接 收方可以接收短消息，也可以根据SIP消息中的接收方终端业务标识进行 ENUM DNS查询，或查询发送方用户的网络地址本，或向接收方网络服务 器查询获取接收方的其他业务信息。例如接收方业务标识为SIPURI,通过 ENUM DNS查询获得接收方的其他业务信息，获得接收方使用MMS业务， 其对应标识为某个MSISDN号。</p>
    <p>步骤1102:选择合适的接收方业务发送消息。本步骤中，互连网关可以根据所接收到的SIP消息内容，和/或ENUM DNS查询到的接收方业务的优先级选择互连类型；如果接收到的是SIP会话 邀请，网关根据邀请中描述的会话类型，选择合适的接收方业务，代替接收 方先接收邀请，然后接收实际的消息内容，将实际的消息内容以其他消息业 务的格式发送，如果接收方的消息业务支持会话，则网关可以将SIP会话邀 请转换成其他消息业务的会话邀请并发送。</p>
    <p>如果本步骤选择不到合适的接收方业务，可以认为发送失败，执行步骤 1105。</p>
    <p>步骤1103:判断是否发送成功，如果是则执行步骤1104，否则执行步 骤1105。</p>
    <p>本步骤中，互连网关可以根据接收方消息业务系统的应答，判断是否发 送成功。</p>
    <p>步骤1104:返回对应接收消息的成功应答，流程结束； 步骤1105:返回对应接收消息的失败应答，流程结束。 本实施例中，如果SIP消息为以SIP MESSAGE发送的SIP消息，则SIP 消息服务器在判断需要互连后，不需要判断互连类型，而是直接发送到互连 网关，由互连网关确定互连类型，进行协议转换后，发送至对应的非SIP消 息系统。下面以CPM用户发送SIP消息到不支持CPM的接收方终端为例， 对本发明实施例二的技术方案进行详细说明。</p>
    <p>图12为本发明实施例二 CPM用户发送消息的方法流程图。如图12所 示，该方法中，除步骤1202和步骤1209分别与图7中的步骤702和步骤 709有所不同外，其它步骤均于图7中的对应步骤相同，在此不再详述。</p>
    <p>步骤1202: AS根据在发送方网络存储的接收方网络信息，判断接收方 网络不提供CPM业务，进一步根据发送方的转发设置，或根据SIP响应消 息，确定通过互连网关进行互连转发。</p>
    <p>步骤1209: IW-GW收到SIP消息后，判断接收方终端支持的消息类型， 确定通过短消息进行互连转发，然后将SIP消息转换为短消息。</p>
    <p>本步骤中，互连网关通过ENUM查询或网络地址本查询，获取4妾收方 的其他业务及标识，然后根据查询到的接收方支持业务的优先级和SIP消</p>
    <p>息的消息体内容，例如本例中查询到的接收方业务中SMS方式优先级最高， 且SIP消息的消息体内容长度较小时，确定以SMS方式转发消息，因此将 SIP消息转换成短消息。</p>
    <p>如果SIP消息中指示了需要发送报告，则IW-GW还需要暂时存储该SIP 消息，并且关联暂存的SIP消息和转换后的短消息；IW-GW还需要将转换 后消息的发送者设成一个号码，该号码包含一个分配给IW-GW的SP号码， 用于将接收方终端回复的消息路由到IW-GW;同时包含能唯一标识发送方 终端的号码，以将接收方终端回复的响应消息^各由至发送方终端。该唯一标 识发送方终端的号码可以才艮据发送方终端的SIP URI进4亍反向ENUM查询 得到，如果发送者以TELURI标识，则直接用其中的电话号码。</p>
    <p>本实施例中，如果SIP消息是SIP INVITE类的消息，则SIP消息服务 器在确定需要进行互连后，将该SIP消息发送到互连网关，由该互连网关确 定互连类型，并发送方终端建立会话；互连网关通过建立的会话接收SIP会 话消息，进行互连类型对应的协议转换后，发送到对应的非SIP消息系统。</p>
    <p>由以上所述可以看出，本发明实施例所提供的技术方案，由SIP消息服 务器路由转发SIP消息，并根据接收到的SIP响应确定需要进行消息互连时， 将SIP消息发送至互连网关，由互连网关进行协议转换并转发；对于需要通 过SIP会话承载的SIP会话消息，也可以在发送方SIP终端与互连网关建立 会话后，由互连网关通过会话接收SIP会话消息后，进行协议转换并转发。 从而使得在发送方终端不清楚接收方终端支持的协议类型及接收方没有进 行转发设置的情况下，或者在接收方终端不支持SIP消息对应的业务的情况 下，或者在支持SIP消息对应业务的接收方终端不在线的情况下，都可以根 据SIP响应通过互连网关发送至接收方终端对应的非SIP消息系统，从而确 保了将SIP消息发送至接收方终端对应的非SIP消息系统，然后由非SIP消 息系统发送至接收方终端。以上所述仅为本发明的较佳实施例而已，并非用于限定本发明的保护范 围。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等， 均应包含在本发明的保护范围之内。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="forward-citations"></a><div class="patent-section-header"><span class="patent-section-title"> 被以下专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101997842B?cl=zh">CN101997842B</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年8月11日</td><td class="patent-data-table-td patent-date-value">2015年5月20日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">大消息模式cpm消息传输方法及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101998302B?cl=zh">CN101998302B</a></td><td class="patent-data-table-td patent-date-value">2009年8月10日</td><td class="patent-data-table-td patent-date-value">2014年7月16日</td><td class="patent-data-table-td ">中兴通讯股份有限公司</td><td class="patent-data-table-td ">消息发送方法、装置、系统及用于融合业务系统的pf、cf和isf</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102143446A?cl=zh">CN102143446A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年12月29日</td><td class="patent-data-table-td patent-date-value">2011年8月3日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">消息互连过程中的用户定制信息的处理方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102143446B?cl=zh">CN102143446B</a></td><td class="patent-data-table-td patent-date-value">2010年12月29日</td><td class="patent-data-table-td patent-date-value">2014年8月20日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">消息互连过程中的用户定制信息的处理方法和装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102223283A?cl=zh">CN102223283A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年4月13日</td><td class="patent-data-table-td patent-date-value">2011年10月19日</td><td class="patent-data-table-td ">华为技术有限公司</td><td class="patent-data-table-td ">路由方法、装置及系统</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102238284A?cl=zh">CN102238284A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2011年6月28日</td><td class="patent-data-table-td patent-date-value">2011年11月9日</td><td class="patent-data-table-td ">北京神州泰岳软件股份有限公司</td><td class="patent-data-table-td ">手机即时通讯方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102238284B?cl=zh">CN102238284B</a></td><td class="patent-data-table-td patent-date-value">2011年6月28日</td><td class="patent-data-table-td patent-date-value">2014年7月23日</td><td class="patent-data-table-td ">北京神州泰岳软件股份有限公司</td><td class="patent-data-table-td ">手机即时通讯方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102594736A?cl=zh">CN102594736A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2012年2月13日</td><td class="patent-data-table-td patent-date-value">2012年7月18日</td><td class="patent-data-table-td ">杭州普诺科技有限公司</td><td class="patent-data-table-td ">一种gps设备接入网关装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN102594736B?cl=zh">CN102594736B</a></td><td class="patent-data-table-td patent-date-value">2012年2月13日</td><td class="patent-data-table-td patent-date-value">2014年10月15日</td><td class="patent-data-table-td ">浙江工业大学</td><td class="patent-data-table-td ">一种gps设备接入网关装置</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US8745145">US8745145</a></td><td class="patent-data-table-td patent-date-value">2009年11月27日</td><td class="patent-data-table-td patent-date-value">2014年6月3日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">Method and system for transmitting large message mode CPM messages</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/WO2011017942A1?cl=zh">WO2011017942A1</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2010年4月28日</td><td class="patent-data-table-td patent-date-value">2011年2月17日</td><td class="patent-data-table-td ">Zte Corporation</td><td class="patent-data-table-td ">消息发送方法、装置及系统</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029120000">H04L29/12</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029060000">H04L29/06</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0029080000">H04L29/08</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=H04L0012580000">H04L12/58</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/581">H04L12/581</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/5835">H04L12/5835</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L29/06197">H04L29/06197</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L51/04">H04L51/04</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L12/66">H04L12/66</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L51/066">H04L51/066</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L65/104">H04L65/104</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L69/08">H04L69/08</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L65/1006">H04L65/1006</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=0c1nBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=H04L65/1069">H04L65/1069</a></span></td></tr><tr><td class="patent-data-table-td "> 欧洲专利分类号</td><td class="patent-data-table-td "><span class="nested-value">H04L29/06E</span>, <span class="nested-value">H04L29/06M2S1</span>, <span class="nested-value">H04L29/06M2H2</span>, <span class="nested-value">H04L29/06M2N2S4</span>, <span class="nested-value">H04L12/58C2</span>, <span class="nested-value">H04L12/66</span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2009年2月25日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2009年4月22日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Request of examination as to substance</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2015年7月29日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Granted</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/18168a4342c570591d28/CN101374118A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_6e802a6b2b28d51711baddc2f3bec198.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E4%B8%80%E7%A7%8D%E6%B6%88%E6%81%AF%E4%BA%92%E8%BF%9E%E7%9A%84%E6%96%B9%E6%B3%95_%E7%B3%BB%E7%BB%9F%E5%8F%8A%E8%A3%85.pdf?id=0c1nBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U3d_s54xX0Kjr1594evna_DnLue4w"},"sample_url":"https://www.google.com/patents/reader?id=0c1nBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>