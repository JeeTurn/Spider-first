<!DOCTYPE html><html><head><title>专利 CN102385493A - 打印系统、中继装置、打印服务器及打印方法 -  Google 专利</title><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){var d=void 0!=b?b:(new Date).getTime();this.t[a]=[d,c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(e){}};this.tick("start",null,a)}var a;window.performance&&(a=window.performance.timing);var f=a?new e(a.responseStart):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart,d=a.responseStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_",
"_wtsrt",d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();})();
</script><link rel="stylesheet" href="/patents/css/_1ec17bec5b1e6ba0eab577be28b6afb9/kl_intl_patents_bundle.css" type="text/css" /><script src="/books/javascript/atb_1ec17bec5b1e6ba0eab577be28b6afb9__zh_cn.js"></script><script>function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: "zh",gaTrack: true,gaId: "UA-27188110-1",multilanguagePage: true});}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><meta name="DC.type" content="Patent"><meta name="DC.title" content="打印系统、中继装置、打印服务器及打印方法"><meta name="DC.contributor" content="池田元气" scheme="inventor"><meta name="DC.contributor" content="佳能株式会社" scheme="assignee"><meta name="DC.date" content="2011-8-24" scheme="dateSubmitted"><meta name="DC.description" content="本发明提供一种打印系统、中继装置、打印服务器及打印方法。在所述打印系统中，打印服务器、所述中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印系统中的所述中继装置包括：搜索单元，搜索能够与所述中继装置进行通信的打印装置；发送单元，向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置。"><meta name="DC.date" content="2012-3-21"><meta name="DC.relation" content="CN:101533339:A" scheme="references"><meta name="DC.relation" content="US:20100165376:A1" scheme="references"><meta name="citation_patent_publication_number" content="CN:102385493:A"><meta name="citation_patent_application_number" content="CN:201110244462"><link rel="canonical" href="https://www.google.com/patents/CN102385493A?cl=zh"/><meta property="og:url" content="https://www.google.com/patents/CN102385493A?cl=zh"/><meta name="title" content="专利 CN102385493A - 打印系统、中继装置、打印服务器及打印方法"/><meta name="description" content="本发明提供一种打印系统、中继装置、打印服务器及打印方法。在所述打印系统中，打印服务器、所述中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印系统中的所述中继装置包括：搜索单元，搜索能够与所述中继装置进行通信的打印装置；发送单元，向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置。"/><meta property="og:title" content="专利 CN102385493A - 打印系统、中继装置、打印服务器及打印方法"/><meta property="og:type" content="book"/><meta property="og:site_name" content="Google Books"/><meta property="og:image" content="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><link rel="image_src" href="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"/><script>if (window['_OC_timingAction']) {window['_OC_timingAction']('patents_refpage');}</script><style>#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}

#gbar { padding:.3em .6em !important;}</style></head><body ><div id=gbar><nobr><a class=gb1 href="https://www.google.com/search?tab=tw">搜索</a> <a class=gb1 href="https://www.google.com/search?hl=zh-CN&tbm=isch&source=og&tab=ti">图片</a> <a class=gb1 href="https://maps.google.com/maps?hl=zh-CN&tab=tl">地图</a> <a class=gb1 href="https://play.google.com/?hl=zh-CN&tab=t8">Play</a> <a class=gb1 href="https://www.youtube.com/results?tab=t1">YouTube</a> <a class=gb1 href="https://news.google.com/nwshp?hl=zh-CN&tab=tn">新闻</a> <a class=gb1 href="https://mail.google.com/mail/?tab=tm">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=to">云端硬盘</a> <a class=gb1 style="text-decoration:none" href="https://www.google.com/intl/zh-CN/options/"><u>更多</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a target=_top id=gb_70 href="https://www.google.com/accounts/Login?service=&continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN&hl=zh-CN" class=gb4>登录</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div role="alert" style="position: absolute; left: 0; right: 0;"><a href="https://www.google.com/patents/CN102385493A?cl=zh&amp;hl=zh-CN&amp;output=html_text" title="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"><img border="0" src="//www.google.com/images/cleardot.gif"alt="屏幕阅读器用户请注意：点击此链接可进入无障碍模式。阅读器在无障碍模式下具有同样的基本功能，但可让用户获得更好的体验。"></a></div><div class="kd-appbar"><h2 class="kd-appname"><a href="/patents?hl=zh-CN"> 专利</a></h2><div class="kd-buttonbar left" id="left-toolbar-buttons"><a id="appbar-write-review-link" href=""></a><a id="appbar-view-print-sample-link" href=""></a><a id="appbar-view-ebook-sample-link" href=""></a><a id="appbar-patents-prior-art-finder-link" href="https://www.google.com/patents/related/CN102385493A"></a><a id="appbar-patents-discuss-this-link" href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://patents.stackexchange.com/redirect/google-patents%3Fpublication%3DCN102385493A&amp;usg=AFQjCNFI8f3It_DjevrLSmdvXW-y-d1U8w" data-is-grant="false"></a><a id="appbar-read-patent-link" href="//docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/0f4a2d6d74130c0cd81f/CN102385493A.pdf"></a><a id="appbar-download-pdf-link" href="//patentimages.storage.googleapis.com/pdfs/0f4a2d6d74130c0cd81f/CN102385493A.pdf"></a><a class="appbar-content-language-link" data-selected="true" data-label="中文" href="/patents/CN102385493A?cl=zh&amp;hl=zh-CN"></a><a class="appbar-content-language-link" data-label="英语" href="/patents/CN102385493A?cl=en&amp;hl=zh-CN"></a><a class="appbar-application-grant-link" data-selected="true" data-label="申请" href="/patents/CN102385493A?hl=zh-CN&amp;cl=zh"></a><a class="appbar-application-grant-link" data-label="授权" href="/patents/CN102385493B?hl=zh-CN&amp;cl=zh"></a></div><div class="kd-buttonbar right" id="right-toolbar-buttons"></div></div><div id="books-microdata" itemscope=""itemtype="http://schema.org/Book"itemid="https://www.google.com/patents/CN102385493A?cl=zh" style="display:none"><span itemprop="description">本发明提供一种打印系统、中继装置、打印服务器及打印方法。在所述打印系统中，打印服务器、所述中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印系统中的所述中继装置包括：搜索单元...</span><span itemprop="url">https://www.google.com/patents/CN102385493A?cl=zh&amp;utm_source=gb-gplus-share</span><span class="main-title" itemprop="name">专利 CN102385493A - 打印系统、中继装置、打印服务器及打印方法</span><img itemprop="image" src="https://www.google.com/patents?id=&amp;printsec=frontcover&amp;img=1&amp;zoom=1"alt="专利 CN102385493A - 打印系统、中继装置、打印服务器及打印方法" title="专利 CN102385493A - 打印系统、中继装置、打印服务器及打印方法"></div><div style="display: none"><ol id="ofe-gear-menu-contents" class="gbmcc"><li class="gbe gbmtc"><a class="gbmt goog-menuitem-content" id="" href="https://www.google.com/advanced_patent_search?hl=zh-CN"> 高级专利搜索</a></li></ol></div><div id="volume-main"><div id="volume-center"><div class=vertical_module_list_row><div id=intl_patents class=about_content><div id=intl_patents_v><table class="patent-bibdata patent-drawings-missing"><tr><td class="patent-bibdata-heading"> 公开号</td><td class="single-patent-bibdata">CN102385493 A</td></tr><tr><td class="patent-bibdata-heading">发布类型</td><td class="single-patent-bibdata">申请</td></tr><tr><td class="patent-bibdata-heading"> 专利申请号</td><td class="single-patent-bibdata">CN 201110244462</td></tr><tr><td class="patent-bibdata-heading">公开日</td><td class="single-patent-bibdata">2012年3月21日</td></tr><tr><td class="patent-bibdata-heading"> 申请日期</td><td class="single-patent-bibdata">2011年8月24日</td></tr><tr><td class="patent-bibdata-heading"> 优先权日<span class="patent-tooltip-anchor patent-question-icon"data-tooltip-text="优先日期属于假设性质，不具任何法律效力。Google 对于所列日期的正确性并没有进行法律分析，也不作任何陈述。"></span></td><td class="single-patent-bibdata">2010年8月27日</td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">公告号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102385493B?hl=zh-CN&amp;cl=zh">CN102385493B</a>, </span><span class="patent-bibdata-value"><a href="/patents/US8605318?hl=zh-CN&amp;cl=zh">US8605318</a>, </span><span class="patent-bibdata-value"><a href="/patents/US20120050794?hl=zh-CN&amp;cl=zh">US20120050794</a></span></span></td></tr><tr class="patent-bibdata-list-row alternate-patent-number"><td class="patent-bibdata-heading"> 公开号</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value">201110244462.4, </span><span class="patent-bibdata-value">CN 102385493 A, </span><span class="patent-bibdata-value">CN 102385493A, </span><span class="patent-bibdata-value">CN 201110244462, </span><span class="patent-bibdata-value">CN-A-102385493, </span><span class="patent-bibdata-value">CN102385493 A, </span><span class="patent-bibdata-value">CN102385493A, </span><span class="patent-bibdata-value">CN201110244462, </span><span class="patent-bibdata-value">CN201110244462.4</span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 发明者</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=ininventor:%22%E6%B1%A0%E7%94%B0%E5%85%83%E6%B0%94%22">池田元气</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading"> 申请人</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="https://www.google.com/search?tbo=p&amp;tbm=pts&amp;hl=en&amp;q=inassignee:%22%E4%BD%B3%E8%83%BD%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE%22">佳能株式会社</a></span></span></td></tr><tr class="patent-bibdata-list-row "><td class="patent-bibdata-heading">导出引文</td><td><span class="patent-bibdata-value-list"><span class="patent-bibdata-value"><a href="/patents/CN102385493A.bibtex?cl=zh">BiBTeX</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102385493A.enw?cl=zh">EndNote</a>, </span><span class="patent-bibdata-value"><a href="/patents/CN102385493A.ris?cl=zh">RefMan</a></span></span></td></tr><tr class="patent-internal-links"><td colspan=2><span class="patent-bibdata-value"><a href="#backward-citations">专利引用</a> (2),</span> <span class="patent-bibdata-value"><a href="#classifications">分类</a> (5),</span> <span class="patent-bibdata-value"><a href="#legal-events">法律事件</a> (3)</span> </td></tr><tr><td colspan=2 class="patent-bibdata-external-link-spacer-top"></td></tr><tr class="patent-bibdata-external-link-spacer-bottom"></tr><tr><td colspan=2><span class="patent-bibdata-heading">外部链接:&nbsp;</span><span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://211.157.104.87:8080/sipo/zljs/hyjs-yx-new.jsp%3Frecid%3D201110244462&amp;usg=AFQjCNGSEcgHGXksY7GfuOwqdimgOfQeUg"> 中国国家知识产权局</a>, </span><span class="patent-bibdata-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://worldwide.espacenet.com/publicationDetails/biblio%3FCC%3DCN%26NR%3D102385493A%26KC%3DA%26FT%3DD&amp;usg=AFQjCNG97K-WnrGxR785lI8eILJNp9bsDQ"> 欧洲专利数据库 (Espacenet)</a></span></span></td></tr><tr class="patent-bibdata-group-spacer"></tr></table><div class="number-and-title"><span class="patent-title"><invention-title mxw-id="PT112062045" lang="ZH" load-source="patent-office">打印系统、中继装置、打印服务器及打印方法</invention-title>
      </span><br><span class="patent-number">CN 102385493 A</span></div><div class="patent-section patent-abstract-section"><div class="patent-section-header"><span class="patent-section-title"> 摘要</span></div><div class="patent-text"><abstract mxw-id="PA95530061" lang="ZH" load-source="patent-office">
    <div class="abstract">本发明提供一种打印系统、中继装置、打印服务器及打印方法。在所述打印系统中，打印服务器、所述中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印系统中的所述中继装置包括：搜索单元，搜索能够与所述中继装置进行通信的打印装置；发送单元，向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置。</div>
  </abstract>
  </div></div><div class="patent-section patent-claims-section"><div class="patent-section-header"><span class="patent-section-title">权利要求<span class="patent-section-count">(8)</span></span></div><div class="patent-text"><div mxw-id="PCLM40874886" lang="ZH" load-source="patent-office" class="claims">
    <div class="claim"> <div num="1" class="claim">
      <div class="claim-text">1.	一种打印系统，在所述打印系统中，打印服务器、中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，其中，所述中继装置包括：搜索单元，其被配置为搜索能够与所述中继装置进行通信的打印装置； 发送单元，其被配置为向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，其被配置为，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置，并且所述打印服务器包括：装置存储单元，其被配置为存储由所述中继装置的所述发送单元发送的所述打印装置的信息；关联存储单元，其被配置为基于由所述中继装置的所述发送单元发送的所述中继装置的信息和所述打印装置的信息，存储所述中继装置与所述打印装置之间的关联；接收单元，其被配置为接收向存储在所述装置存储单元中的所述打印装置发出的打印指令；以及指令单元，其被配置为响应于所述接收单元接收的所述打印指令、基于存储在所述关联存储单元和所述装置存储单元中的信息，发出包括要打印的所述文档数据的所述位置信息、以及所述打印装置的信息的打印指令。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="2" class="claim">
      <div class="claim-text">2.根据权利要求1所述的打印系统，其中，用作所述打印装置且能够与所述扪印服务器进行通信的能够通信的打印装置、以及用作所述打印装置且无法与所述打印服务器进行通信的无法通信的打印装置连接至网络， 所述能够通信的打印装置和所述无法通信的打印装置能够相互通信， 所述能够通信的打印装置包括打印单元，该打印单元被配置为接收由所述打印服务器发出的、包括要打印的所述文档数据的所述位置信息的打印指令，基于所述位置信息下载所述文档数据，并打印所述文档数据，所述中继装置还包括确定单元，该确定单元被配置为确定所述搜索单元找到的所述打印装置是所述能够通信的打印装置还是所述无法通信的打印装置，所述发送单元还将所述确定单元获得的确定结果的信息发送至所述打印服务器， 所述打印服务器的所述关联存储单元还基于由所述中继装置的所述发送单元发送的所述中继装置的所述确定单元获得的所述确定结果，存储所述无法通信的打印装置与所述中继装置之间的关联，并且所述打印服务器的所述指令单元包括：关联确定单元，其被配置为确定所述接收单元接收的所述打印指令要发出到的所述打印装置，是否是具有存储在所述关联存储单元中的与所述中继装置之间的关联的所述无法通信的打印装置；打印指令单元，其被配置为，在所述关联确定单元确定所述打印装置不具有存储在所述关联存储单元中的关联的情况下，将包括要打印的所述文档数据的所述位置信息的所述打印指令发送至所述打印装置；以及中继指令单元，其被配置为，在所述关联确定单元确定所述打印装置具有存储在所述关联存储单元中的所述关联的情况下，将包括要打印的所述文档数据的所述位置信息、以及所述接收单元接收的所述打印指令要发出到的所述打印装置的信息的所述打印指令，发送至与所述打印装置相关联地存储的所述中继装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="3" class="claim">
      <div class="claim-text">3.根据权利要求2所述的打印系统，其中，所述能够通信的打印装置包括所述中继装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="4" class="claim">
      <div class="claim-text">4.根据权利要求2所述的打印系统，其中，当所述中继指令单元无法将所述打印指令发送至一个能够通信的打印装置时，所述中继指令单元将所述打印指令发送至作为由所述接收单元接收的所述打印指令的发送目的地的、与所述打印装置相关联地存储的另一能够通信的打印装置。</div>
    </div>
    </div> <div class="claim-dependent"> <div num="5" class="claim">
      <div class="claim-text">5.根据权利要求1所述的打印系统，其中，所述打印服务器位于互联网上，而所述中继装置和所述多个打印装置位于本地网络上，并且所述打印服务器的所述装置存储单元将所述发送单元发送的所述打印装置的信息、与用于识别所述中继装置所属的所述本地网络的标识符一起存储。</div>
    </div>
    </div> <div class="claim"> <div num="6" class="claim">
      <div class="claim-text">6.	一种打印系统中的中继装置，在所述打印系统中，打印服务器、所述中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述中继装置包括：搜索单元，其被配置为搜索能够与所述中继装置进行通信的打印装置； 发送单元，其被配置为向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，其被配置为，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置。</div>
    </div>
    </div> <div class="claim"> <div num="7" class="claim">
      <div class="claim-text">7.	&#8212;种打印系统中的打印服务器，在所述打印系统中，所述打印服务器、中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印服务器包括：装置存储单元，其被配置为存储由所述中继装置的发送单元发送的所述打印装置的信息；关联存储单元，其被配置为基于由所述中继装置的所述发送单元发送的所述中继装置的信息和所述打印装置的信息，存储所述中继装置与所述打印装置之间的关联；接收单元，其被配置为接收向存储在所述装置存储单元中的所述打印装置发出的打印指令；以及指令单元，其被配置为响应于所述接收单元接收的所述打印指令、基于存储在所述关联存储单元和所述装置存储单元中的信息，发出包括要打印的文档数据的位置信息、以及所述打印装置的信息的打印指令。</div>
    </div>
    </div> <div class="claim"> <div num="8" class="claim">
      <div class="claim-text">8.	&#8212;种打印系统中的打印方法，在所述打印系统中，打印服务器、中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印方法包括：在所述中继装置中执行的：搜索步骤，搜索能够与所述中继装置进行通信的打印装置；发送步骤，向所述打印服务器发送所述中继装置的信息以及在所述搜索步骤中找到的所述打印装置的信息；以及中继步骤，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置，以及在所述打印服务器中执行的：装置存储步骤，存储在所述中继装置的所述发送步骤中发送的所述打印装置的信息； 关联存储步骤，基于在所述中继装置的所述发送步骤中发送的所述中继装置和所述打印装置的信息，存储所述中继装置与所述打印装置之间的关联；接收步骤，接收向在所述装置存储步骤中存储的所述打印装置发出的打印指令；以及指令步骤，响应于在所述接收步骤中接收的所述打印指令、基于在所述关联存储步骤和所述装置存储步骤中存储的信息，发出包括要打印的所述文档数据的所述位置信息、以及所述打印装置的信息的打印指令。</div>
    </div>
  </div> </div>
  </div></div><div class="patent-section patent-description-section"><div class="patent-section-header"><span class="patent-section-title"> 说明</span></div><div class="patent-text"><div mxw-id="PDES46337280" lang="ZH" load-source="patent-office" class="description">
    <p>打印系统、中继装置、打印服务器及打印方法</p>
    <p>技术领域</p>
    <p>[0001]	本发明涉及打印系统、中继装置、打印服务器及打印方法。本发明尤其涉及包括互联网上的打印服务器和本地网络上的打印装置的打印系统。</p>
    <p>背景技术</p>
    <p>[0002]	例如，随着高速、大容量网络的普及以及企业中信息基础设施成本的降低，在互联网上提供软件功能作为服务的SaaS (软件即服务，Software as a Service)逐渐流行起来。 甚至要求传统上构建在诸如办公室的局部区域中的网络上的打印系统，能够处理作为互联网上的服务的SaaS。也就是说，将互联网上的打印服务器构建为SaaS、并管理本地网络上的打印机和打印作业已成为可能。</p>
    <p>[0003]	然而，例如，基于安全考虑，由于在本地网络与互联网之间设置的防火墙提供的保护，互联网上的打印服务器无法直接访问本地网络上的打印机。因此，例如使用以下配置/ 序列，从打印服务器向打印机发出打印指令。</p>
    <p>[0004]	(1)用户在诸如本地网络上的PC的终端上运行的Web浏览器上显示打印服务器提供的网址。</p>
    <p>[0005]	(2)当用户经由Web浏览器进行与打印指令相对应的操作时，将指令从Web浏览器发送至打印服务器。</p>
    <p>[0006]	(3)打印服务器生成包括管理/存储的打印机的地址、重定向至该地址的指令、以及要打印的文档数据的位置（URL (Uniform Resource Locator，统一资源定位符））的响应， 并将其发送至Web浏览器。</p>
    <p>[0007]	(4) Web浏览器将该响应重定向至打印机的地址。</p>
    <p>[0008]	(5)打印机接收重定向的响应。然后，打印机从该URL获取要打印的文档数据，并对其进行打印（拉打印，pull-print)。</p>
    <p>[0009]	以此方式，由于打印服务器无法直接访问打印机，因此，其将包括要打印的文档数据的位置信息的打印指令发送至打印机，并请求打印机访问该文档数据。然后，打印机对文档数据进行拉打印。为了实现该特征，与互联网上的打印服务器协作的打印机需要执行拉打印的能力。</p>
    <p>[0010]	针对传统的打印系统，提出了如下方法。打印服务器确定打印机是否具有拉打印功能，并根据确定结果在发送要打印的文档数据与提供要打印的文档数据的位置的通知之间切换要向打印机发出的打印指令（例如，参见日本专利特许第03899910号公报）。</p>
    <p>[0011]	当如上述现有技术中所述的打印服务器被构建为互联网上的SaaS时，打印服务器无法直接访问本地网络上的打印机。因此。如果打印服务器没有预先保持本地网络上的各打印机的信息，则该打印服务器无法在本地网络中搜索到该打印机，从而，既不能确定打印机的位置，又不能确定打印机的功能。结果，无法辨别是否能够向未登记的打印机发出指定使用拉打印功能的打印指令。此外，互联网上的打印服务器不能够向不具有执行使用互联网上的SaaS的拉打印的功能的打印机（例如传统打印机或廉价扪印机）发出打印指令。[0012]	此外，从上述打印指令的配置/序列的示例中明显看出，在打印系统中，用户必须预先将打印机的信息登记在打印服务器上，从而从打印服务器向打印机发出打印指令。尽管上述现有技术没有描述将打印机登记在打印服务器上的方法，但是，当本地网络上存在大量打印机时，用户必须单独登记这些打印机，从而导致了用户的不便。</p>
    <p>发明内容</p>
    <p>[0013]	考虑上述现有技术的问题而做出本发明，并且，在包括互联网上的打印服务器和本地网络上的打印机的打印系统中，本发明简化了打印控制以及各装置之间定义的管理。</p>
    <p>[0014]	根据本发明的一方面，提供了一种打印系统，在所述打印系统中，打印服务器、中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，其中，所述中继装置包括：搜索单元，其被配置为搜索能够与所述中继装置进行通信的打印装置；发送单元，其被配置为向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，其被配置为，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置，并且所述打印服务器包括：装置存储单元， 其被配置为存储由所述中继装置的所述发送单元发送的所述打印装置的信息；关联存储单元，其被配置为基于由所述中继装置的所述发送单元发送的所述中继装置的信息和所述打印装置的信息，存储所述中继装置与所述打印装置之间的关联；接收单元，其被配置为接收向存储在所述装置存储单元中的所述打印装置发出的打印指令；以及指令单元，其被配置为响应于所述接收单元接收的所述打印指令、基于存储在所述关联存储单元和所述装置存储单元中的信息，发出包括要打印的所述文档数据的所述位置信息、以及所述打印装置的信息的打印指令。</p>
    <p>[0015]	根据本发明的另一方面，提供了一种打印系统中的中继装置，在所述打印系统中， 打印服务器、所述中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述中继装置包括：搜索单元，其被配置为搜索能够与所述中继装置进行通信的打印装置；发送单元，其被配置为向所述打印服务器发送所述中继装置的信息以及所述搜索单元找到的所述打印装置的信息；以及中继单元，其被配置为，接收由所述打印服务器发出的、 包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令， 基于所述打印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置。</p>
    <p>[0016]	根据本发明的另一方面，提供了一种打印系统中的打印服务器，在所述打印系统中，所述打印服务器、中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理，所述打印服务器包括：装置存储单元，其被配置为存储由所述中继装置的发送单元发送的所述打印装置的信息；关联存储单元，其被配置为基于由所述中继装置的所述发送单元发送的所述中继装置的信息和所述打印装置的信息，存储所述中继装置与所述打印装置之间的关联；接收单元，其被配置为接收向存储在所述装置存储单元中的所述打印装置发出的打印指令；以及指令单元，其被配置为响应于所述接收单元接收的所述打印指令、基于存储在所述关联存储单元和所述装置存储单元中的信息，发出包括要打印的文档数据的位置信息、以及所述打印装置的信息的打印指令。</p>
    <p>[0017]	根据本发明的另一方面，提供了一种打印系统中的打印方法，在所述打印系统中， 打印服务器、中继装置以及多个打印装置连接至网络，并且，所述打印系统进行打印处理， 所述打印方法包括：在所述中继装置中执行的：搜索步骤，搜索能够与所述中继装置进行通信的打印装置；发送步骤，向所述打印服务器发送所述中继装置的信息以及在所述搜索步骤中找到的所述打印装置的信息；以及中继步骤，接收由所述打印服务器发出的、包括要打印的文档数据的位置信息以及用于进行打印处理的打印装置的信息的打印指令，基于所述扪印指令中包括的所述位置信息下载所述文档数据，并将所述打印指令和所下载的文档数据二者发送至所述打印指令指定的所述打印装置，以及在所述打印服务器中执行的：装置存储步骤，存储在所述中继装置的所述发送步骤中发送的所述打印装置的信息；关联存储步骤，基于在所述中继装置的所述发送步骤中发送的所述中继装置和所述打印装置的信息，存储所述中继装置与所述打印装置之间的关联；接收步骤，接收向在所述装置存储步骤中存储的所述打印装置发出的打印指令；以及指令步骤，响应于在所述接收步骤中接收的所述打印指令、基于在所述关联存储步骤和所述装置存储步骤中存储的信息，发出包括要打印的所述文档数据的所述位置信息、以及所述打印装置的信息的打印指令。</p>
    <p>[0018]	根据本发明，能够更加容易地将内部网上的打印机登记在互联网上的打印服务器上。此外，互联网上的扪印服务器甚至能够向不具有拉打印功能的打印机发出打印指令。</p>
    <p>[0019]	通过以下参照附图对示例性实施例的描述，本发明的其他特征将变得清楚。</p>
    <p>附图说明</p>
    <p>[0020]	图1是示出打印系统的示意性配置的框图；</p>
    <p>[0021]	图2A和2B是示出打印服务器和终端的示意性配置的框图；</p>
    <p>[0022]	图3A和3B是示出打印机（能够/不能够拉打印）的示意性配置的框图；</p>
    <p>[0023]	图4是示出示意性逻辑配置的框图；</p>
    <p>[0024]	图5是示出数据格式的示意图；</p>
    <p>[0025]	图6A和6B是示出数据结构的示意表；</p>
    <p>[0026]	图7A、7B、7C和7D是例示画面示例的画面图；</p>
    <p>[0027]	图8是示出处理过程的流程图；</p>
    <p>[0028]	图9是示出处理过程的流程图；</p>
    <p>[0029]	图10是示出处理过程的流程图；</p>
    <p>[0030]	图IlA和IlB是示出数据格式的示意图；</p>
    <p>[0031]	图12A和12B是例示画面示例的画面图；</p>
    <p>[0032]	图13A、13B和13C是例示画面示例的画面图；以及</p>
    <p>[0033]	图14A、14B、14C和14D是示出处理过程的流程图。</p>
    <p>具体实施方式</p>
    <p>[0034]	下面将参照附图描述实施本发明的方式。</p>
    <p>[0035]	&lt;配置描述&gt;</p>
    <p>[0036](打印系统）[0037]	图1是示出根据本发明的实施例的打印系统的配置的框图。打印服务器101是作为SaaS构建在互联网102上的服务。打印服务器101管理本地网络上的打印机以及要由该打印机执行的作业。此外，打印服务器101根据例如来自用户的指令向各打印机发出并发送打印指令。本地网络103在诸如办公室的预定区域中。用作诸如PC的信息处理装置的终端104、以及打印机105至109连接到本地网络103。本地网络103和打印服务器101 经由互联网102彼此连接。防火墙（未示出）被设置在互联网102和本地网络103之间。 因此，位于互联网102上的打印服务器101既不能够直接访问位于本地网络103上的终端 104，也不能够直接防问位于本地网络103上的打印机105至109。</p>
    <p>[0038]	CR打印机105和106 (能够通信的打印装置）具有拉打印功能。使用此功能，CR 打印机105和106能够直接请求互联网102上的打印服务器101发送文档，并响应于该请求下载并打印文档。NR打印机107、108和109 (无法通信的打印装置）没有这种拉打印功能。因此，这些NR打印机既不能直接从互联网102上的打印服务器101下载文档，也不能打印该文档。在本实施例中，为了方便，将具有拉打印功能的打印机统称为“CR打印机”。此外，为了方便，将没有拉打印功能的打印机统称为“NR打印机”。而且，当不区分拉打印功能的存在与否时，CR打印机和NR打印机也将被统称为“打印机”。</p>
    <p>[0039]	尽管在图1中示出了能够实现本实施例的系统配置，但是，本发明不限于此。例如，其他装置可以安装在本地网络103中，或者，可以使用包括数量上大于或小于这里例示的数量的NR打印机和CR打印机的配置。同时，在本实施例中，CR打印机作为中继装置使用，其对向NR打印机发出的打印指令进行中继。因此，CR打印机和中继装置是相同的装置。 然而，CR打印机和中继装置可以是物理上不同的装置。</p>
    <p>[0040](物理配置）</p>
    <p>[0041]	下面将描述打印服务器101、终端104、CR打印机105和NR打印机107的物理配置。请注意，CR打印机106和CR打印机105具有相同的配置。同样地，NR打印机108和 109具有与NR打印机107相同的配置。</p>
    <p>[0042]	图2A是示出打印服务器101的示意性物理配置的框图。CPU 201、RAM 202、ROM 203、通信接口 204、视频接口 205、输入单元（例如键盘和鼠标）206以及硬盘207经由系统总线208相互连接。CPU 201基于操作系统（下文缩写为OS)和应用程序（例如，本发明中的扪印系统程序）来进行硬件控制和算术运算。RAM 202作为CPU 201的工作区来存储各种类型的数据。</p>
    <p>[0043]	ROM 203存储例如所谓的BIOS，BIOS与OS协作控制数据在例如硬盘207中的输入/输出。通信接口 204与CPU 201执行的OS的通信程序协作。通信接口 204与经由网络连接的外部装置进行通信，以交换各种类型的数据。视频接口 205在显示设备上输出并显示显示数据。输入单元206用来将指令输入到打印服务器101。硬盘207存储例如OS和</p>
    <p>应用程序。</p>
    <p>[0044]	图2B是示出用作信息处理装置的终端104的示意性物理配置的框图。CPU 301、 RAM 302,ROM 303、通信接口 304、视频接口 305以及输入单元（例如键盘和鼠标）306经由系统总线307相互连接。CPU 301基于OS程序和应用程序（例如，本发明中的Web浏览器程序）来进行硬件控制和算术运算。MM 302作为CPU 301的工作区来存储各种类型的数据。[0045]	ROM 303存储例如OS和Web浏览器程序。通信接口 304与CPU 301执行的OS的通信程序协作。通信接口 304与经由网络连接的外部装置进行通信，以交换各种类型的数据。视频接口 305在显示设备上输出并显示显示数据。输入单元306用来将指令输入到终端 104。</p>
    <p>[0046]	图3A是示出CR打印机105的示意性物理配置的框图。请注意，CR打印机106和 CR打印机105具有相同的配置。CPU 40URAM 402、R0M403、通信接口 404、打印机引擎405、 硬盘406以及操作面板407经由系统总线408相互连接。CPU 401基于控制器程序（例如， 本发明中的CR打印机控制程序）来进行硬件控制和算术运算。</p>
    <p>[0047]	RAM 402作为CPU 401的工作区来存储各种类型的数据。ROM 403存储例如所谓的BIOS，BIOS控制数据在例如硬盘406中的输入/输出。通信接口 404与CPU 401执行的控制器程序协作。通信接口 404与经由网络连接的外部装置进行通信，以交换各种类型的数据。打印机引擎405与CPU 401执行的控制器程序协作。</p>
    <p>[0048]	CPU 401经由通信接口 404从外部装置接收作为文档数据的PDL(页面描述语言， Page Description Language)数据。该PDL数据是被定义用来通过各打印装置进行打印的信息。在本实施例中，在下文中，还将PDL数据称为文档数据（或简称为“文档”）。作为另选方案，CPU 401从外部装置下载PDL数据。CPU 401以电学方式对获取的PDL数据进行处理，以将其分解成青色（C)、品红色（M)、黄色⑴和黑色（Bk)分量，并将分解的数据作为图像信号提供给打印机引擎405并打印出来。硬盘406存储例如控制器程序。操作面板407 由例如触摸屏或显示器形成，并能够接收用户指令和显示数据。</p>
    <p>[0049]	图3B是示出NR打印机107的示意性物理配置的框图。请注意，NR打印机108和 109具有与NR打印机107相同的配置。CPU 501, RAM 502, ROM 503、通信接口 504、打印机引擎505以及操作面板506经由系统总线507相互连接。</p>
    <p>[0050]	CPU 501基于控制器程序（本发明中的NR打印机控制程序）来进行硬件控制和算术运算。RAM 502作为CPU 501的工作区来存储各种类型的数据。ROM 503存储控制器程序。通信接口 504与CPU 501执行的控制器程序协作。通信接口 504与经由网络连接的外部装置进行通信，以交换各种类型的数据。</p>
    <p>[0051]	打印机引擎505与CPU 501执行的控制器程序协作。CPU 501经由通信接口 504 从外部装置接收PDL数据。CPU 501以电学方式对获取的PDL数据进行处理，以将其分解成青色（C)、品红色（M)、黄色⑴和黑色（Bk)分量，并将分解的数据作为图像信号提供给扪印机引擎505并打印出来。操作面板506由例如触摸屏或显示器形成，并能够接收用户指令和显示数据。</p>
    <p>[0052]	NR打印机107包括为了降低成本而使用比CR打印机105便宜的硬件组件的组成元件。也就是说，CPU 501的处理能力低于CPU 401。RAM502的容量低于RAM 402。NR打印机107没有配备硬盘。</p>
    <p>[0053]	尽管参照图2A、2B、3A和3B给出了本实施例适用的物理配置的示例，但是，本发明不限于这些配置。例如，扪印服务器101和终端104仅需要普通信息处理装置的配置。而且，本发明适用于NR打印机和CR打印机，只要在它们之间具有功能上的差异即可，这种差异可能会引起本发明待解决的问题，因此，它们可以具有相同的物理配置。例如，当CR打印机的拉打印功能临时不可用时，该CR打印机甚至可以接收由另一 CR打印机中继的打印指令。</p>
    <p>[0054](逻辑配置）</p>
    <p>[0055]	图4是示出打印服务器101、终端104、CR打印机105和NR打印机107的示意性逻辑配置的框图。请注意，CR打印机106与CR打印机105具有相同的配置。类似地，NR打印机108和109与NR打印机107具有相同的配置。</p>
    <p>[0056]	在打印服务器101中，CPU 201可以将存储在硬盘207中的OS和应用程序存储在 RAM 202中。存储完成后，CPU 201将准备执行应用程序。</p>
    <p>[0057]	打印服务器101包括逻辑组成部分：用户验证单元601、Web页生成单元602、打印机管理单元603和打印文档管理单元604。这些组成部分是由CPU 201执行应用程序来实现的。也就是说，这些组成部分是由以下物理配置的组合来实现的：CPU 201和RAM 202 中的存储应用程序的区域、以及用于存储当CPU 201执行应用程序时获得的信息的区域 (RAM202和硬盘207中）。</p>
    <p>[0058]	用户验证单元601管理用户信息并进行用户验证。Web页生成单元602生成用来向终端104发送响应的Web页。打印机管理单元603存储并管理打印机的信息。打印文档管理单元604管理由打印机打印的文档，并且根据CR打印机的请求将由该文档生成的PDL 数据发送回给CR打印机。例如，通过用户使用互联网102上的另一服务来生成该文档。另一服务将文档发送到打印服务器101。打印文档管理单元604经由通信接口 204接收文档， 并将其存储在硬盘207中。此时，打印文档管理单元604将该文档与由用户验证单元601 管理的用户相关联地存储。</p>
    <p>[0059]	在终端104中，CPU 301可以将存储在ROM 303中的OS程序和应用程序存储在RAM 302中。程序存储完成后，CPU 301将准备执行应用程序。</p>
    <p>[0060]	终端104包括Web浏览器单元611作为逻辑组成部分。Web浏览器单元611是通过CPU 301执行应用程序来实现的。也就是说，Web浏览器单元611是由以下物理配置的组合来实现的：CPU 301和RAM 302中的存储应用程序的区域、以及用于存储当CPU 301执行应用程序时获得的信息的区域（RAM 302中）。</p>
    <p>[0061]	Web浏览器单元611将由打印服务器101的Web页生成单元602、或者由CR打印机105 (或CR打印机106)的Web页生成单元621生成的Web页转换成为显示数据。例如， Web浏览器单元611经由视频接口中305在显示器上显示显示数据。</p>
    <p>[0062]	在CR打印机105中，CPU 401可以将存储在硬盘406中的控制器程序存储在RAM 402中。程序存储完成后，CPU 401将准备执行控制器程序。CR打印机105包括如下逻辑组成部分：Web页生成单元621、打印机登记单元622、装置检测响应单元623、打印文档获取单元624、打印单元625和打印中继单元626。这些组成部分是由CPU 401执行控制器程序来实现的。也就是说，这些组成部分是由以下物理配置的组合来实现的：CPU 401和RAM 402中的存储应用程序的区域、以及用于存储当CPU 401执行应用程序时获得的信息的区域（RAM 402和硬盘406中）。</p>
    <p>[0063]	Web页生成单元621生成用来向终端104发送响应的Web页。打印机登记单元622 具有如下功能。打印机登记单元622在本地网络103中搜索打印机。打印机登记单元622 获取找到的打印机的信息（例如，IP地址和型号代码）。打印机登记单元622确定找到的打印机是否能够进行拉打印。本实施例中的确定，在这里指示确定所找到的打印机是CR打</p>
    <p>10印机还是NR打印机。打印机登记单元622经由通信接口 404向打印服务器101发送找到的打印机的信息、以及这些打印机是否能够进行拉打印的确定结果。</p>
    <p>[0064]	装置检测响应单元623经由通信接口 404，接收来自另一设备的装置检测请求，并经由通信接口 404发送对该请求的响应。打印文档获取单元624经由通信接口 404从打印服务器101下载要打印的文档（PDL数据）。打印单元625将由打印文档获取单元624获取的文档转换为图像信号，将其输出到打印机引擎405，并打印出来。打印中继单元626将由打印文档获取单元624获取的文档（PDL数据）发送（中继）至NR打印机107，因此，NR 打印机107将其打印出来。</p>
    <p>[0065]	在NR打印机107中，CPU 501可以将存储在ROM 503中的控制器程序存储在RAM 502中。程序存储完成后，CPU 501将准备执行控制器程序。NR扪印机107包括如下逻辑组成部分：装置检测响应单元631和打印单元632。这些组成部分是由CPU 501执行控制器程序来实现的。也就是说，这些组成部分是由以下物理配置的组合来实现的：CPU 501和 RAM 502中的存储控制器程序的区域、以及用于存储当CPU 501执行控制器程序时获得的信息的区域（RAM 502中）。</p>
    <p>[0066]	装置检测响应单元631经由通信接口 504，接收来自另一设备的装置检测请求，并经由通信接口 504发送对该请求的响应。打印单元632经由通信接口 504从外部装置接收 PDL数据。打印单元632将PDL数据转换为电信号，将其输出到打印机引擎505，并打印出来。</p>
    <p>[0067]	以上参照图4描述了构成本实施例中的打印系统的各装置的逻辑配置。然而，这里描述的配置仅仅给出了示例，并且可以提供用于实现上述功能的不同的物理配置，只要它们能够实现相同的功能。此外，可以提供用于实现其他功能的部分。</p>
    <p>[0068]	&lt;打印服务器上的打印机的登记&gt;</p>
    <p>[0069](从CR打印机发送到打印服务器的数据）</p>
    <p>[0070]	图5是示出当CR打印机105在打印服务器101上登记打印机信息时所发送的数据的格式的示意图。以下对打印机信息做详细描述。这里提到的数据是与URL相关联的信息（URL700)，该URL是向打印服务器101的Web页生成单元602发出请求所针对的Web 页的位置信息（如图5所示）。通过用作本地网络103上的各打印机的信息的数据（参数）来指定URL 700，并且URL 700包括以下各项：该打印机在本地网络103上的IP地址 (“address")，该打印机的型号代码（“model")以及指示该打印机是否是CR打印机的信息（该信息可以取值"yes(是）"或"no(否）"作为"crtype")。请注意，指定与要登记的打印机的数量相同的参数。图5中显示的URL 700给出了以下示例，即指定五个打印机的信息作为参数。图5示出了 CR打印机105、CR打印机106、NR打印机107、NR打印机108和NR打印机109的信息，并按照该顺序从顶部开始显示。</p>
    <p>[0071](打印服务器管理的打印机信息）</p>
    <p>[0072]	图6A和6B是示出指示由打印服务器101的打印机管理单元603管理的打印机信息的数据的结构的示意表。图6A所示的打印机信息表800是存储打印机信息的数据表。一个记录（行）指示由一个用户（或设备）登记的一个打印机。打印机信息表800实现设备存储单元的功能。</p>
    <p>[0073]	ID数据项801是存储标识符的数据项，该标识符用来唯一识别打印机信息表800中的各记录。IP地址数据项802是指示本地网络上的给定打印机的IP地址的数据项。注释数据项803是指示用户任意输入的字符串的数据项。型号代码数据项804是指示用来识别给定打印机的型号的信息的数据项。全局地址数据项805是指示分配给给定打印机所属的本地网络的全局地址的数据项。</p>
    <p>[0074]	打印服务器101是互联网上的服务，并在多个本地网络上登记打印机的信息。在这些打印机中，有些打印机属于不同的本地网络，但尽管如此，它们在本地网络上具有相同的IP地址。为了区分这些打印机，这些打印机所属的本地网络需要标识，因此管理全局地址数据项805。用户名数据项806是指示已经将给定打印机登记在打印服务器101上的用户的名称的数据。打印机管理单元603针对各用户管理各打印机。</p>
    <p>[0075]	图6B中示出的打印机关联表810是存储CR打印机与NR打印机之间的关联的数据表。一个记录指示一个CR打印机和与其相对应的NR打印机之间的关联。为了通过NR 打印机打印文档，基于打印机关联表810中存储的关联，设置下载并中继PDL数据的CR打印机。换句话说，打印机关联表810定义了如下信息，该信息指示当预定的NR打印机是打印指令的发送目的地时，能够在将打印指令发送到该预定的NR打印机时，将该打印指令中继到该预定的NR打印机的CR打印机。打印机关联表810实现了关联存储单元。</p>
    <p>[0076]	NR打印机ID数据项811是指示NR打印机的数据项。NR打印机ID数据项811链接到打印机信息表800的ID数据项801。CR扪印机ID数据项812是指示CR打印机的数据项。CR打印机ID数据项812链接到打印机信息表800的ID数据项801。在打印机关联表810中，三个NR打印机（ID = 3,4,5)与一个CR打印机（ID = 1)相关联。这三个NR打印机(ID = 3,4,5)还与另一 CR打印机(ID = 2)相关联。此外，一个NR打印机(ID = 7) 也与另一 CR打印机（ID = 6)相关联。</p>
    <p>[0077]	如打印机关联表810所示，多个NR打印机可以与单一 CR打印机相关联。当然，可以以一一对应的方式形成将NR扪印机与CR打印机相关联的表。此外，单一 NR打印机可以与多个CR打印机相关联。如果单一 NR打印机与多个CR打印机相关联，则还能够通过例如将具有较高优先级级别的CR打印机以较高的级别登记在表中，来确定通过较高优先级使用的CR打印机。此外，在本实施例中，打印机信息表800和打印机关联表810被存储在打印服务器101的硬盘207中。</p>
    <p>[0078]	(画面示例）</p>
    <p>[0079]	将描述当打印机被登记在打印服务器101上时由终端104的Web浏览器单元611 获取的Web页。Web浏览器单元611解释这些Web页以生成显示数据，并经由视频接口 305 将其输出到例如显示器上。用户能够使用输入单元306执行与显示内容相关联的操作（输入和发出指令）。</p>
    <p>[0080]	图7A是例示用来请求打印机登记的Web页（打印机登记请求页900)的显示示例的画面图。当用户经由OK按钮901发出给定指令，并且该用户未通过验证时，画面切换到图7B所示的画面。当用户已经通过验证时，画面切换到图7C所示的画面。</p>
    <p>[0081]	图7B是例示用来请求用户验证的Web页（用户验证页1000)的显示示例的画面图。用户名输入栏1001显示输入的用户名。密码输入栏1002显示输入的密码。用户输入用户名和密码，并经由登录按钮1003发出给定指令。如果用户验证成功，则画面切换到图 7C所示的画面。如果用户验证失败，则不切换画面。另外，在这种情况下，可以显示指示用户验证失败的消息（未示出)，并且可以初始化输入到图7B所示画面中的数据。</p>
    <p>[0082]	图7C是例示用来请求打印机登记的Web页（打印机登记页1100)的显示示例的画面图。打印机登记页1100显示通过CR打印机105在本地网络103上找到的打印机的列表。已经登记在打印服务器101上的打印机通过阴影线显示，因此，用户针对该打印机既不能进行选择操作，又不能进行注释输入操作。例如，从顶部起的第四个记录对应于已经登记的打印机（打印机型号：LBP0002)。</p>
    <p>[0083]	复选框1101至1104显示关于这些打印机是否要登记在打印服务器101上的信息。在这种情况下，注释输入栏1105至1108显示针对这些打印机输入的注释内容。“注释” 指示用户任意输入的字符串。当用户经由登记按钮1109发出给定指令时，画面切换到图7D 所示的画面。</p>
    <p>[0084]	图7D是例示用来向用户通知已完成的打印机登记的Web页（打印机登记结果页 1200)的显示示例的画面图。打印机登记结果页1200显示指示打印机已经被登记的信息。</p>
    <p>[0085](打印机登记处理）</p>
    <p>[0086]	将描述当打印机登记在打印服务器101上时的处理。图8是示出由打印服务器 101、终端104和CR打印机105相互协作执行的打印机信息登记处理的序列的流程图。这里提到的处理例如通过在处理期间使用各装置的CPU读出并执行存储在各存储单元中的程序来进行。同样地，在处理期间处理的各种类型的数据被存储在该装置的临时存储单元 (例如，RAM)中，并根据需要读出这些数据。</p>
    <p>[0087]	首先，接收到用户指令的终端104的Web浏览器单元611请求CR打印机105发送打印机登记请求页900 (S1301)。当CR打印机105从终端104接收到上述请求时，其使用打印机登记单元622在本地网络103中搜索其他打印机。打印机登记单元622收集要登记在打印服务器101上的信息。基于打印机登记单元622收集的信息，Web页生成单元621生成如图5所示URL 700(S1302)。稍后将参照图9描述步骤S1302中的URL生成处理。</p>
    <p>[0088]	Web页生成单元621生成打印机登记请求页900，并将其作为响应发送回给终端 104(S1303)。URL 700作为Web页内的数据存储在打印机登记请求页900中。终端104 的Web浏览器单元611显示在步骤S1303中从CR打印机105发送回的打印机登记请求页 900(S1304)。当用户经由OK按钮901发出给定指令时（S1305)，Web浏览器单元611请求打印服务器101发送由存储在打印机登记请求页900中的URL700指定的Web页（S1306)。 这种情况下的Web页对应于打印机登记页1100。</p>
    <p>[0089]	打印服务器101的Web页生成单元602从终端104接收上述请求。Web页生成单元602临时存储URL 700中包括的参数（S1307)。Web页生成单元602确定用户是否已经通过验证（S1308)。如果用户已通过验证（步骤S1308 ：是），则通过验证的用户名已被存储，并因此而被确认，并且，处理进行到步骤S1317。如果用户还没有通过验证（步骤S1308 ： 否)，则处理进行到步骤S1309。在这种情况下，用户已经向Web页生成单元602发出了第一请求，因此确定该用户尚未通过验证。</p>
    <p>[0090]	Web页生成单元602将重定向至用户验证页1000的请求作为响应发送回给终端 104(S1309)。当从扪印服务器101接收到上述重定向的请求时，终端104的Web浏览器单元611请求打印服务器101在重定向目的地发送用户验证页1000(S1310)。当从终端104 接收到上述请求时，打印服务器101的Web页生成单元602将用户验证页1000发送回给终端 104(S1311)。</p>
    <p>[0091]	终端104的Web浏览器单元611显示在步骤S1311中从打印服务器101发送回的用户验证页1000(S1312)。如果用户经由登录按钮1003发出了给定指令（步骤S1313 ：是）， 则Web浏览器单元611将用户输入的用户名和密码发送至打印服务器101，以请求用户验证 (S1314)。当从终端104接收到上述请求时，扪印服务器101的Web页生成单元602将接收到的用户名和密码传输至用户验证单元601。用户验证单元601进行用户验证（S1315)。</p>
    <p>[0092]	用户验证单元601通过确定与用户名和密码匹配的用户是否已经登记在存储在用户验证单元601中的用户信息表（未示出)中，来进行验证。如果验证成功（步骤S1316 ： 是），则用户验证单元601将用户名传输至Web页生成单元602，并且Web页生成单元602 临时存储该用户名。Web页生成单元602生成打印机登记页1100的数据，并将其作为响应发送回给终端104(S1317)。基于在步骤S1307中临时存储的参数生成打印机登记页1100。 如果在步骤S1316中验证失败（步骤S1316 ：否），则处理返回至步骤S1311。</p>
    <p>[0093]	终端104的Web浏览器单元611显示在步骤S1317中从打印服务器101发送回的打印机登记页1100 (S1318)。如果用户经由登记按钮1109发出了给定指令（步骤S1319 ： 是），则Web浏览器单元611将用户输入的打印机选择结果和注释发送至打印服务器101， 以请求打印机登记（S1320)。</p>
    <p>[0094]	当从终端104接收到上述请求时，打印服务器101的Web页生成单元602将以下信息传输至打印机管理单元603。此时传输的信息包括在步骤S1307中临时存储的参数、接收到的打印机选择结果和注释、以及临时存储的用户名。打印机管理单元603进行打印机登记处理（S1321)。稍后将参照图10描述步骤S1321中的打印机登记处理。</p>
    <p>[0095]	当打印机管理单元603完成打印机登记处理时，Web页生成单元602将打印机登记结果页1200作为响应发送回给终端104 (S1322)。终端104的Web浏览器单元611显示在步骤S1322中从打印服务器101发送回的打印机登记结果页1200(S1323)。</p>
    <p>[0096]	(CR打印机的URL生成处理）</p>
    <p>[0097]	如图8的步骤S1302所示，CR打印机105的扪印机登记单元622在本地网络103 中搜索其他打印机，以收集要登记在打印服务器101上的信息。打印机登记单元622生成 URL 700。稍后描述该处理。请注意，在本实施例中，“URL的生成”指示与图5所示的URL 700相对应的数据的生成。</p>
    <p>[0098]	此外，这里提到的处理例如通过在处理期间使用CR打印机的CPU读出并执行存储在各存储单元中的程序来进行。同样地，在处理期间处理的各种类型的数据被存储在CR打印机的临时存储单元（例如，RAM)中，并根据需要读出这些数据。</p>
    <p>[0099]	图9是示出CR打印机105在本地网络103中搜索其他打印机、并生成URL 700 的处理的序列的流程图。CR打印机和NR打印机具有安装在其上的WS-D i SCO very (Web Service Dynamic Discovery，Web服务动态发现）。尽管在本实施例中，使用WS-Discovery 作为搜索各打印机之间的连接状态的方案，但是可以使用其他方案（例如，协议）。</p>
    <p>[0100]	CR打印机105的打印机登记单元622通过多信道广播（multicasting)，将基于 WS-Discovery的装置检测请求（Probe消息)发送至本地网络103 (S1401)。CR打印机106 的装置检测响应单元623经由通信接口 404从CR打印机105接收装置检测请求。NR打印机107、108和109的装置检测响应单元631也经由通信接口 504从CR打印机105接收装置检测请求。CR打印机106以及NR打印机107、108和109通过单点传播(unicasting) 将装置检测响应(ProbeMatch消息)发送至CR打印机105 (S1402和S1403)。此时，CR打印机106在装置检测响应中包括指示打印服务和拉打印服务作为适用服务的类型的信息。 此外，NR打印机107、108和109中的各个在装置检测响应中包括指示打印服务作为适用服务的类型的信息。请注意，在本说明书所示的流程图中，并行或串行执行在对象“=，，之间插入的处理操作，并且在完成所有这些处理操作之后，处理进行到后续步骤。例如，参照图 9，执行在对象“=”之间插入的S1402或S1403，之后，在任意一种情况下，处理进行到步骤 S1404。</p>
    <p>[0101]	当从各打印机接收到装置检测响应时，CR打印机105的打印机登记单元622生成URL 700中指示打印机登记结果页1200的地址部分（S1404)。例如，该地址部分对应 TS 5 ^τγ;^] URL 700 Φ^&#169; WftEΦ W "https://www. canon, co. jp/print-service/ forwardpr inter insert, do，，。</p>
    <p>[0102]	打印机登记单元622将CR扪印机105的信息作为参数添加至URL700 (S1405)。要存储在“address”中的IP地址、以及要存储在“model”中的型号代码预先存储在作为存储单元的ROM 403或硬盘406中。打印机登记单元622将“yes”没置为“crtype”。打印机登记单元622重复步骤S1406至S1408，重复次数等于接收到的装置检测响应的数量。</p>
    <p>[0103]	CR打印机105的打印机登记单元622确定已经发送装置检测响应的装置是CR打印机还是NR打印机（S1406)。打印机登记单元622针对接收到的装置检测响应参照指示适用服务的类型的信息部分，以在该信息部分包括拉打印服务的情况下，确定已经发送该响应的装置为CR打印机；或者在该信息部分不包括拉打印服务的情况下，确定已经发送该响应的装置为NR打印机。如果已经发送装置检测响应的装置是CR打印机（步骤S 1406 ： 是），则处理进行到步骤S 1407。如果已经发送装置检测响应的装置是NR打印机（步骤 S1406 ：否），则处理进行到步骤S1408。</p>
    <p>[0104]	在步骤S1407中，CR打印机105的打印机登记单元622在将“yes”设置为“crtype” 时，将参数添加至URL700。在步骤S1408中，CR打印机105的打印机登记单元622在将“no” 设置为“ crtype ”时，将参数添加至URL 700。在步骤S1407和S1408中，要存储在“address ” 中的IP地址、以及要存储在“model”中的型号代码包括在装置检测响应中，并且打印机登记单元622在参数中包括它们。以上述方式，URL生成处理的序列结束。</p>
    <p>[0105](打印服务器的打印机登记处理)</p>
    <p>[0106]	如图8的步骤S1321中所示，打印服务器101的打印机管理单元603基于从CR打印机105接收的信息进行打印机登记处理。稍后将描述该处理。图10是示出打印服务器 101登记打印机的处理的序列的流程图。这里提到的处理例如通过使用打印服务器的CPU 读出并执行存储在各存储单元中的程序来进行。同样地，在处理期间处理的各种类型的数据被存储在打印服务器的临时存储单元（例如，RAM)中，并根据需要读出这些数据。</p>
    <p>[0107]	打印服务器101的打印机管理单元603从Web页生成单元602接收以下信息，并开始处理。这里，该信息包括（1)添加至URL700的参数、在图8的步骤S1321中从终端104接收的⑵打印机选择结果和⑶注释，以及⑷从在与终端104进行通信期间接收的TCP/ IP包中获取的、本地网络103的全局地址和（5)当前通过验证的用户的用户名。</p>
    <p>[0108]	打印机管理单元603重复步骤S1501至S1503，重复次数等于参数（1)的数量。打印机管理单元603确定在打印机选择结果（2)中是否选择了与当前处理的参数相对应的打印机（S1501)。如果选择了该打印机（步骤S1501 ：是），则处理进行到步骤S1502。如果没有选择该打印机（步骤S1501 ：否），则对当前处理的参数的处理结束。打印机管理单元603 将记录添加至打印机信息表800 (S1502)。</p>
    <p>[0109]	打印机管理单元603将要登记的打印机的信息存储在步骤S1502中添加的记录中 (S1503)。在本实施例中，存储以下项目。针对ID数据项801，存储通过对前一记录的ID 数据项的值加一而获得的值。换句话说，添加并登记具有末使用的ID编号中的最小编号的 ID。针对IP地址数据项802，存储参数“address”的值。针对注释数据项803，存储注释 (3)。针对型号代码数据项804，存储参数“model”的值。针对全局地址数据项805，存储全局地址（4)。针对用户名数据项806，存储当前通过验证的用户的用户名（5)。</p>
    <p>[0110]	打印机管理单元603重复步骤S1504至S1507，重复次数等于参数的数量。打印机管理单元603在打印机信息表800中搜索与当前处理的参数相对应的记录（S1504)。在该处理中，检测其值与以下项目的值一致的记录。当IP地址数据项802的值与参数“address” 的值一致、全局地址数据项805的值与全局地址（4)的值一致、并且用户名数据项806的值与用户名（5)的值一致时，将它们检测为搜索结果。</p>
    <p>[0111]	打印机管理单元603确定与当前处理的参数相对应的打印机是否是CR打印机 (S1505)。通过确定参数“crtype”是否为“yes”来进行该步骤。如果该打印机是CR打印机（步骤S1505 ：是），则处理进行到步骤S1506。如果该打印机不是CR打印机（S卩，该打印机是NR打印机)(步骤S1505 ：否)，则处理进行到步骤S1507。</p>
    <p>[0112]	打印机管理单元603临时存储在步骤S1504中找到的记录的ID (ID数据项801的值），作为CR打印机的ID组（S1506)。在完成与参数数量相对应的重复处理之后，存储与参数（1)相对应并已经登记在打印服务器101上的CR打印机的ID的列表。</p>
    <p>[0113]	打印机管理单元603存储在步骤S1504中找到的记录的ID (ID数据项801的值）， 作为NR打印机的ID组（S1507)。在完成与参数数量相对应的重复处理之后，存储与参数 (1)相对应并已经登记在打印服务器101上的NR打印机的ID的列表。</p>
    <p>[0114]	打印机管理单元603重复步骤S1508至S1510，重复次数等于在步骤S1507中获取的NR打印机的ID的数量、以及在步骤S1506中获取的CR打印机的ID的数量。打印机管理单元603确定由当前处理的NR打印机及其对应的CR打印机的ID对形成的记录，是否已经登记在打印机关联表810中（S1508)。在该处理中，检测值与以下项目的值一致的记录。 当NR打印机ID数据项811的值与当前处理的NR打印机的ID的值一致、并且CR打印机ID 数据项812的值与当前处理的CR打印机的ID的值一致时，将它们检测为搜索结果。如果基于检测结果确定该记录已被登记（步骤S1508 ：是），则针对当前处理的CR打印机的ID 的处理结束。如果确定该记录未被登记（步骤S1508:否），则处理进行到步骤S1509。</p>
    <p>[0115]	在步骤S1509中，打印机管理单元603将记录添加至打印机关联表810。打印机管理单元603将要登记的打印机的信息存储在步骤S1509中添加的记录中（S1510)。而且此时，存储以下数据。针对NR打印机ID数据项811，存储当前处理的NR打印机的ID。针对CR打印机ID数据项812，存储当前处理的CR打印机的ID。以上述方式，打印机登记处理的序列结束。</p>
    <p>[0116]〈打印处理〉</p>
    <p>16[0117](数据格式）</p>
    <p>[0118]	图IlA和IlB是示出由打印服务器101生成、并由终端104发送至CR打印机以发出打印指令的数据的格式的示例的示意图。如图IlA和IlB所示，这些数据是向CR打印机的Web页生成单元621发出请求所针对的Web页的URL (URL 1600和1610)。</p>
    <p>[0119]	图IlA所示的URL 1600用来向CR打印机发出打印指令。URL 1600包括要打印的PDL数据的位置（“document”）作为参数。CR打印机通过参照PDL数据的位置信息下载PDL数据，并打印该PDL数据。</p>
    <p>[0120]	图IlB所示的URL 1610用来指示CR打印机中继打印指令。换句话说，URL 1610 用来向NR打印机发出打印指令。像URL1600那样，URL1610包括要打印的文档的位置 ("document")作为参数。URL 1610还包括作为中继目的地并接收打印指令的NR打印机的指定("target")作为参数。“target”的值为NR打印机的IP地址。CR打印机下载 "document"中指定的PDL数据，并将其发送至“target”中指定的NR打印机，以使得NR打印机打印该数据。</p>
    <p>[0121](画面示例的描述）</p>
    <p>[0122]	将描述当用户打印通过终端104的Web浏览器单元611获取的Web页时的Web页。 Web浏览器单元611解释这些Web页以生成显示数据，并经由视频接口 305将其输出在例如显示器上。用户能够使用输入单元306进行与显示内容相关联的操作（输入和发出指令）。 当接收到用户的操作时，终端104进行各种类型的处理。打印服务器101向终端104发出 Web页，并接收经由Web页输入的指令，由此实现接收单元。</p>
    <p>[0123]	图12A是例示用来指定要打印的文档的页面（文档列表页1700)的显示示例的画面图。文档列表页1700显示与当前通过验证的用户的名称相关联地存储在打印服务器101 中的文档的列表。单选按钮1701至1703基于用户输入结果显示对要打印的文档的选择。 当用户经由打印按钮1704发出给定指令时，画面切换到图12B所示的画面。</p>
    <p>[0124]	图12B是例示用来选择要打印文档的打印机的页面（打印机列表页1800)的显示示例的画面图。打印机列表页1800显示与当前通过验证的用户的名称相关联地存储在打印服务器101中的打印机的列表。尽管打印机列表页1800分别显示与终端104相同的网络上的打印机、以及与终端104不同的网络上的打印机，但是，也可以选择不同网络上的打印机。单选按钮1801至1807基于用户输入结果显示对要打印文档的打印机的选择。当用户经由下一步按钮1808发出给定指令时，画面切换到图13A所示的画面。</p>
    <p>[0125]	图13A是例示用来进行打印设置的页面（打印设置页1900)的显示示例的画面图。打印设置页1900与在打印机列表页1800中选择的打印机的功能相对应地显示诸如份数、片材大小以及双面打印的执行/不执行的设置项。当用户经由OK按钮1901发出给定指令时，请求打印，并且画面切换到图13B所示的画面。</p>
    <p>[0126]	图13B是例示指示打印正在进行中的页面（打印进行中页面2000)的显示示例的画面图。图13C是例示打印完成页（打印完成页2010)的显示示例的画面图。当通过用户经由OK按钮1901发出的给定指令请求的打印没有完成时，显示图13B所示的打印进行中页面2000。之后，当打印处理完成时，显示图13C所示的打印完成页2010。</p>
    <p>[0127](打印处理的描述）</p>
    <p>[0128]	将描述当打印服务器101管理的CR打印机或NR打印机打印文档时的处理。图14A至14D是示出由打印服务器101、终端104、CR打印机105以及NR打印机107相互协作执行的打印处理的序列的流程图。这里提到的处理例如通过在处理期间使用各装置的CPU 读出并执行存储在各存储单元中的程序来进行。同样地，在处理期间处理的各种类型的数据被存储在该装置的临时存储单元（例如，RAM)中，并根据需要读出这些数据。</p>
    <p>[0129]	将参照图14A描述直到发出打印请求之前的处理。已经接收到用户指令的终端 104的Web浏览器单元611请求打印服务器101发送文档列表页1700(S2101)。在这种情况下，打印服务器101的用户验证单元601已经进行了验证。打印服务器101的Web页生成单元602临时存储用户名。请注意，在这种情况下，也使用如参照图7A、7B、7C和7D描述的验证方法。</p>
    <p>[0130]	当从终端104接收到上述请求时，打印服务器101的Web页生成单元602生成文档列表页1700，并将其作为响应发送回给终端104(S2102)。此时，打印服务器101的Web页生成单元602将临时存储在其中的用户名传输至打印文档管理单元604。打印服务器101 的打印文档管理单元604生成与传输的用户名相关联地存储的文档的列表的信息，并将其发送回给Web页生成单元602。Web页生成单元602基于从打印文档管理单元604传输的文档的列表的信息，生成文档列表页1700。</p>
    <p>[0131]	终端104的Web浏览器单元611显示在步骤S2102中从扪印服务器101发送回的文档列表页1700(S2103)。当用户经由打印按钮1704发出给定指令时（S2104)，终端104 的Web浏览器单元611将用户输入的文档选择结果发送至打印服务器101，以请求打印机选择页(S2105)。</p>
    <p>[0132]	当从终端104接收到上述请求时，打印服务器101的Web页生成单元602临时存储接收到的文档选择结果（S2106)。打印服务器101的Web页生成单元602将以下信息传输至打印机管理单元603，以获取能够向其发出打印指令的打印机的列表的信息（S2107)。 这里，传输的信息包括⑴临时存储的当前经过验证的用户的用户名、以及⑵从在与终端 104进行通信期间接收的TCP/IP包中获取的、本地网络103的全局地址。打印服务器101 的打印机管理单元603在打印机信息表800中，搜索全局地址数据项805与全局地址（2) 相互一致、并且用户名数据项806与用户名（1)相互一致的所有记录。打印机管理单元603 将这些记录传输至打印服务器101的Web页生成单元602。</p>
    <p>[0133]	打印服务器101的Web页生成单元602临时存储在步骤S2107中获取的、能够向其发出打印指令的打印机的列表的信息（S2108)。Web页生成单元602基于在步骤S2107 中获取的打印机信息生成打印机列表页1800，并将其作为响应发送回给终端104(S2109)。</p>
    <p>[0134]	终端104的Web浏览器单元611显示在步骤S2109中从打印服务器101发送回的打印机列表页1800(S2110)。当用户经由打印机列表页1800中的下一步按钮1808发出给定指令时（步骤S2111 ：是），终端104的Web浏览器单元611将用户输入的打印机选择结果发送至打印服务器101，以请求打印设置页（S2112)。</p>
    <p>[0135]	当从终端104接收到上述请求时，打印服务器101的Web页生成单元602临时存储接收到的打印机选择结果（S2113)。Web页生成单元602生成打印设置页1900，并将其作为响应发送回给终端104(S2114)。打印服务器101的Web页生成单元602从在步骤S2113 中接收的打印机选择结果、以及在步骤S2108中存储的能够向其发出打印指令的打印机的列表的信息中，获取选择的打印机的型号代码（型号代码数据项804的值）。Web页生成单元602根据该值确定打印设置项，并根据确定结果生成打印设置页1900。</p>
    <p>[0136]	终端104的Web浏览器单元611显示在步骤S2114中从打印服务器101发送回的打印设置页1900(S2115)。当用户经由显示的打印设置页1900中的OK按钮1901发出给定指令时（步骤S2116 ：是），处理进行到图14B所示的处理过程。</p>
    <p>[0137]	下面将参照图14B描述直到打印服务器101经由终端104向CR打印机105发出打印指令或打印中继指令之前的处理。当用户经由打印设置页中的OK按钮1901发出给定指令时，Web浏览器单元611将用户输入的打印设置结果发送至打印服务器101以请求打印(S2201)。</p>
    <p>[0138]	当从终端104接收到上述请求时，打印服务器101的Web页生成单元602使打印服务器101的打印文档管理单元604，根据选择的文档生成PDL数据（S2202)。Web页生成单元602将以下信息传输至打印文档管理单元604。这里，传输的信息包括：在步骤S2106 中临时存储的文档选择结果、在步骤S2108中临时存储的能够向其发出打印指令的打印机的列表的信息、在步骤S2113中临时存储的打印机选择结果、以及接收的打印设置结果。打印服务器101的打印文档管理单元604基于这些信息、根据选择的打印机的型号代码和打印设置，将选择的文档转换为PDL数据，并存储该PDL数据。打印文档管理单元604将存储 PDL数据的位置信息传输至Web页生成单元602。能够通过CR打印机105请求该位置信息， 作为互联网102上的URL。</p>
    <p>[0139]	打印服务器101的Web页生成单元602确定CR打印机105的打印机登记单元622 选择的打印机是CR打印机还是NR打印机（S2203)。Web页生成单元602基于在步骤S2113 中临时存储的打印机选择结果、以及在步骤S2108中临时存储的能够向其发出打印指令的打印机的列表的信息，指定选择的打印机的ID (ID数据项801的值）。Web页生成单元602 将指定的ID传输至打印机登记单元622。</p>
    <p>[0140]	CR打印机105的打印机登记单元622搜索打印机关联表810，以确定NR打印机ID 数据项811与指定的ID &#8212;致的记录是否存在。打印机登记单元622将确定结果传输至Web 页生成单元602。如果该记录存在，则选择的打印机是NR打印机；否则，选择的打印机是CR 打印机。换句话说，如果该记录存在，则选择的打印机是与CR打印机相关联的NR打印机； 否则，选择的打印机是能够直接执行打印指令的CR打印机。该处理实现了关联确定单元。</p>
    <p>[0141]	如果选择的打印机是CR打印机（步骤S2203 ：是），则处理进行到步骤S2204。如果选择的打印机是NR打印机（步骤S2203 ：否），则处理进行到步骤S2207。</p>
    <p>[0142]	打印服务器101的Web页生成单元602生成URL1600，作为指示要向CR打印机发出的打印指令的数据（S2204)。针对参数“document”的值来存储在步骤S2202中传输的 PDL数据的位置。Web页生成单元602将重定向至在步骤S2204中生成的URL 1600的请求作为响应发送回给终端104(S2205)。</p>
    <p>[0143]	当从打印服务器101接收到重定向请求时，终端104的Web浏览器单元611请求 CR打印机105在重定向目的地发送Web页（S2206)。稍后将参照图14C描述步骤S2206之后的步骤中的处理。</p>
    <p>[0144]	如果在步骤S2203中确定选择的打印机是NR打印机（步骤S2203 ：否），则打印服务器101的Web页生成单元602生成URL 1610，作为指示要向CR打印机105发出的打印中继指令的数据（S2207)。Web页生成单元602将在步骤S2113中临时存储的打印机选择结果（其中，选择了 NR打印机）传输至打印服务器101的打印机管理单元603。打印机管理单元603搜索打印机关联表810以生成与该NR打印机相关联地存储的CR打印机的列表。打印机管理单元603从打印机信息表中获取这些CR打印机的IP地址。打印机管理单元603将这些信息发送回给Web页生成单元602。Web页生成单元602从自打印机管理单元603发送回的结果中，选择任意的CR打印机，并基于该打印机的信息生成URL 1610。</p>
    <p>[0145]	Web页生成单元602将重定向至在步骤S2207中生成的URL 1610的请求，作为响应发送回给终端104(S2208)。当从打印服务器101接收到上述重定向请求时，终端104的 Web浏览器单元611请求CR打印机在重定向目的地发送Web页（S2209)。稍后将参照图 14D描述步骤S2209之后的步骤中的处理。</p>
    <p>[0146]	将参照图14C描述CR打印机105进行的打印处理（拉打印）。该处理对应于图 14B所示的步骤S2206之后的步骤。当在步骤S2206中接收到从终端104发出的请求时，CR 打印机105的Web页生成单元621将参数“document”的值传输至打印文档获取单元624。 打印文档获取单元624经由通信接口 404从打印服务器101下载由“document”的值指示的 PDL文档（S2301)。CR打印机105的打印单元625将打印文档获取单元624在步骤S2301 中下载的PDL文档输出至打印机引擎405，并打印该PDL文档（S2302)。</p>
    <p>[0147]	另一方面，以下处理与步骤S2301和S2302中的处理并行进行。CR打印机105的 Web页生成单元621询问打印单元625来确定是否正在进行PDL文档的打印（S2303)。如果正在进行打印（步骤S2303 ：是），则处理进行到步骤S2304。如果没有正在进行打印（完成了打印)(步骤S2303 ：否），则处理进行到步骤S2307。</p>
    <p>[0148]	CR打印机105的Web页生成单元621将生成的打印进行中页面2000作为响应发送回给终端104(S2304)。终端104的Web浏览器单元611显示在步骤S2304中从CR打印机105发送回的打印进行中页面2000(S2305)。在打印进行中页面2000中，将经过预定时间之后请求CR打印机105进行显示更新的处理定义为Web页数据。在经过预定时间之后， 终端104的Web浏览器单元611请求CR打印机105进行显示更新（S2306)。然后，处理返回至步骤S2303。</p>
    <p>[0149]	如果没有正在进行打印（步骤S2303 ：否），则CR扪印机105的Web页生成单元 621将打印完成页2010作为响应发送回给终端104(S2307)。终端104的Web浏览器单元 611显示在步骤S2307中从CR打印机105发送回的打印完成页2010 (S2308)。在完成步骤 S2302和S2308中的处理之后，处理序列结束。</p>
    <p>[0150]	最后，将参照图14D描述CR打印机105中继打印指令、NR打印机107执行打印的处理。该处理对应于图14B所示的步骤S2209之后的步骤。当接收到在步骤S2209中发出的请求时，CR打印机105的Web页生成单元621将参数“document”的值和参数“target” 的值传输至CR打印机105的打印文档获取单元624。打印文档获取单元624经由通信接口 404从打印服务器101下载由“document”的值指示的PDL文档（S2401)。</p>
    <p>[0151]	打印文档获取单元624将下载的PDL数据以及由“target”指示的NR打印机107 的IP地址，传输至CR打印机105的打印中继单元626。打印中继单元626经由通信接口 404将PDL数据发送至由IP地址指示的NR打印机107(S2402)。NR打印机107的打印单元632经由通信接口 504接收从CR打印机105发送的PDL数据。打印单元632打印接收的PDL数据（S2403)。在打印单元632完成打印之后，其向CR打印机105通知打印完成(S2404)。</p>
    <p>[0152]	另一方面，以下处理与步骤S2401至S2404中的处理并行进行。CR打印机105的 Web页生成单元621确定NR打印机107是否已经向CR打印机105通知了打印完成（S2405)。 如果打印未完成而是在进行中（步骤S2405 ：是），则处理进行到步骤S2406。如果打印已完成（步骤S2405 ：否），则处理进行到步骤S2409。CR打印机105的Web页生成单元621 将打印进行中页面2000作为响应发送回给终端104(S2406)。终端104的Web浏览器单元 611显示在步骤S2406中从CR打印机105发送回的打印进行中页面2000 (S2407)。如之前所描述，在打印进行中页面2000中，将经过预定时间之后请求CR打印机105进行显示更新的处理定义为Web页数据。在经过预定时间之后，终端104的Web浏览器单元611请求CR 打印机105进行显示更新（S2408)。然后，处理返回至步骤S2405。</p>
    <p>[0153]	如果没有正在进行打印（步骤S2405 ：否），则CR打印机105的Web页生成单元 621将打印完成页2010作为响应发送回给终端104(S2409)。终端104的Web浏览器单元 611显示在步骤S2409中从CR打印机105发送回的打印完成页2010 (S2410)。在完成步骤 S2404和S2410中的处理之后，处理序列结束。</p>
    <p>[0154]	在图14B的步骤S2207中生成URL 1610时，可以选择向NR打印机中继打印处理的CR打印机的多个候选。在本实施例中，两个CR打印机：CR打印机105和106作为CR打印机的候选存在。在这些CR打印机中，选择任意一个作为中继打印指令的CR打印机。在本实施例中，选择CR打印机105。然而，可以生成数量上等于能够进行中继的CR打印机的URL 1610，并且URL 1610可以包含在在步骤S2208中发送至终端104的响应中。在这种情况下，</p>
    <p>在重定向之前，使用由诸如JavaScript&#174;的脚本语言描述的程序，来确认CR打印机在重定向目的地的状态。如果作为状态确认的结果，确定CR打印机例如由于断电而停机（down)， 则将打印指令重定向至另一 CR打印机（至另一 URL 1610)。这样，即使中继打印指令的CR 打印机例如由于停机而不可用，用户也能够使用另一 CR打印机来尝试中继打印指令。</p>
    <p>[0155]	以此方式，根据本实施例，根据以下序列进行处理。能够与作为SaaS构建在互联网上的打印服务器进行通信的打印机，在本地网络中搜索其他打印机。获取多个找到的扪印机的信息，并检查这些打印机是否能够进行拉打印。这些打印机将检查结果和它们的信息发送至打印服务器。打印服务器基于接收到的信息，一次登记多个打印机。打印服务器将无法进行拉打印的打印机与能够进行拉打印的打印机相互关联地存储。</p>
    <p>[0156]	以上述方式，用户能够轻松地在互联网上的服务器上登记内部网中的打印机的信息。此外，用户不仅能够选择能够进行拉打印的打印机打印文档，还能够选择无法进行拉打印的打印机打印文档。也就是说，能够进行拉打印的打印机下载互联网上的文档，并将其发送（中继）到无法进行拉打印的打印机。</p>
    <p>[0157]	尽管在本实施例中，使用具有拉打印功能的打印机代表没有拉扪印功能的打印机下载要打印的文档，但是，本发明不限于此。可以使用诸如既能够进行下载文档并根据该文档生成打印指令的处理、又能够向不具有拉打印功能的打印机发出打印指令的PC的装置。</p>
    <p>[0158]	此外，尽管打印服务器使用单一机器，但是，打印服务器可以具有通过群集多个机器来进行负载分散的配置。</p>
    <p>[0159]	本发明的各方面还可以通过读出并执行记录在存储设备上的用于执行上述实施例的功能的程序的系统或装置的计算机（或诸如CPU或MPU的设备）来实现，以及通过由系统或装置的计算机通过例如读出并执行记录在存储设备上的用于执行上述实施例的功能的程序来执行各步骤的方法来实现。鉴于此，例如经由网络或者从用作存储设备的各种类型的记录介质（例如计算机可读介质）向计算机提供程序。</p>
    <p>[0160] 虽然参照示例性实施例对本发明进行了描述，但是应当理解，本发明并不限于所公开的示例性实施例。应当对所附权利要求的范围给予最宽的解释，以使其涵盖所有这些变型例以及等同的结构和功能。</p>
  </div>
  </div></div><div class="patent-section patent-tabular-section"><a id="backward-citations"></a><div class="patent-section-header"><span class="patent-section-title">专利引用</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th">引用的专利</th><th class="patent-data-table-th"> 申请日期</th><th class="patent-data-table-th">公开日</th><th class="patent-data-table-th"> 申请人</th><th class="patent-data-table-th">专利名</th></tr></thead><tr><td class="patent-data-table-td citation-patent"><a href="/patents/CN101533339A?cl=zh">CN101533339A</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年3月10日</td><td class="patent-data-table-td patent-date-value">2009年9月16日</td><td class="patent-data-table-td ">株式会社理光</td><td class="patent-data-table-td ">打印项设置服务器装置和打印项设置方法</td></tr><tr><td class="patent-data-table-td citation-patent"><a href="/patents/US20100165376">US20100165376</a><span class='patent-tooltip-anchor' data-tooltip-text="由审查员引用"> *</span></td><td class="patent-data-table-td patent-date-value">2009年8月11日</td><td class="patent-data-table-td patent-date-value">2010年7月1日</td><td class="patent-data-table-td ">Canon Kabushiki Kaisha</td><td class="patent-data-table-td ">Printing system, print control method, and program</td></tr></table><div class="patent-section-footer">* 由审查员引用</div></div><div class="patent-section patent-tabular-section"><a id="classifications"></a><div class="patent-section-header"><span class="patent-section-title">分类</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> </th><th class="patent-data-table-th"> </th></tr></thead><tr><td class="patent-data-table-td ">国际分类号</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://web2.wipo.int/ipcpub/&amp;usg=AFQjCNER44F5jlVoswCkvW3YEcB5lW4moA#refresh=page&amp;notion=scheme&amp;version=20130101&amp;symbol=G06F0003120000">G06F3/12</a></span></td></tr><tr><td class="patent-data-table-td "> 合作分类</td><td class="patent-data-table-td "><span class="nested-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F3/1232">G06F3/1232</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F3/1288">G06F3/1288</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F3/1267">G06F3/1267</a></span>, <span class="nested-value"><a href="https://www.google.com/url?id=YP2GBwABERAJ&amp;q=http://worldwide.espacenet.com/classification&amp;usg=AFQjCNGs5WqSrPE3A4ZP63zGuM6PRNfEFA#!/CPC=G06F3/1205">G06F3/1205</a></span></td></tr></table><div class="patent-section-footer"></div></div><div class="patent-section patent-tabular-section"><a id="legal-events"></a><div class="patent-section-header"><span class="patent-section-title">法律事件</span></div><table class="patent-data-table"><thead class="patent-data-table-thead"><tr class="patent-data-table"><th class="patent-data-table-th"> 日期</th><th class="patent-data-table-th">代码</th><th class="patent-data-table-th">事件</th><th class="patent-data-table-th">说明</th></tr></thead><tr><td class="patent-data-table-td patent-date-value">2012年3月21日</td><td class="patent-data-table-td ">C06</td><td class="patent-data-table-td ">Publication</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2012年5月2日</td><td class="patent-data-table-td ">C10</td><td class="patent-data-table-td ">Entry into substantive examination</td><td class="patent-data-table-td "></td></tr><tr><td class="patent-data-table-td patent-date-value">2014年8月13日</td><td class="patent-data-table-td ">C14</td><td class="patent-data-table-td ">Grant of patent or utility model</td><td class="patent-data-table-td "></td></tr></table><div class="patent-section-footer"></div></div><div class="modal-dialog" id="patent-images-lightbox"><div class="patent-lightbox-controls"><div class="patent-lightbox-rotate-controls"><div class="patent-lightbox-rotation-text">旋转</div><div class="rotate-icon rotate-ccw-icon"></div><div class="rotate-icon rotate-cw-icon"></div></div><div class="patent-lightbox-index-counter"></div><a class="patent-lightbox-fullsize-link" target="_blank">原始图片</a><div class="patent-drawings-control patent-drawings-next"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_right.png" alt="Next page"width="21" height="21" /></div><div class="patent-drawings-control patent-drawings-prev"><img class="patent-drawings-button-img"src="/googlebooks/images/kennedy/page_left.png" alt="Previous page"width="21" height="21" /></div></div><div class="modal-dialog-content"><div class="patent-lightbox-image-holder"><div class="patent-lightbox-placeholder"></div></div></div></div><script>_OC_initPatentsAtb({image_not_available_html: " 未提供图片。\x3ca href\x3d//docs.google.com/viewer?url\x3dpatentimages.storage.googleapis.com/pdfs/0f4a2d6d74130c0cd81f/CN102385493A.pdf\x3e查看 PDF\x3c/a\x3e"});</script></div></div></div></div></div><script>(function() {var href = window.location.href;if (href.indexOf('?') !== -1) {var parameters = href.split('?')[1].split('&');for (var i = 0; i < parameters.length; i++) {var param = parameters[i].split('=');if (param[0] == 'focus') {var elem = document.getElementById(param[1]);if (elem) {elem.focus();}}}}})();</script><script>_OC_addFlags({LockSrc:"/books/javascript/lock_1ec17bec5b1e6ba0eab577be28b6afb9.js", Host:"https://www.google.com/", IsBooksRentalEnabled:1, IsBrowsingHistoryEnabled:1, IsWebReaderSvgEnabled:0, IsImageModeNotesEnabled:1, IsOfflineBubbleEnabled:1, IsFutureOnSaleVolumesEnabled:1, IsBooksUnifiedLeftNavEnabled:1, IsMobileRequest:0, IsZipitFolderCollectionEnabled:1, IsAdsDisabled:0, IsEmbeddedMediaEnabled:1, IsImageModeAnnotationsEnabled:1, IsMyLibraryGooglePlusEnabled:1, IsImagePageProviderEnabled:1, IsBookcardListPriceSmall:0, IsInternalUser:0, IsBooksShareButtonEnabled:0, IsDisabledRandomBookshelves:0});_OC_Run({"enable_p13n":false,"is_cobrand":false,"sign_in_url":"https://www.google.com/accounts/Login?service=\u0026continue=https://www.google.com/patents%3Fcl%3Dzh%26hl%3Dzh-CN\u0026hl=zh-CN"}, {"volume_id":"","is_ebook":true,"volumeresult":{"has_flowing_text":false,"has_scanned_text":true,"can_download_pdf":false,"can_download_epub":false,"is_pdf_drm_enabled":false,"is_epub_drm_enabled":false,"download_pdf_url":"https://www.google.com/patents/download/%E6%89%93%E5%8D%B0%E7%B3%BB%E7%BB%9F_%E4%B8%AD%E7%BB%A7%E8%A3%85%E7%BD%AE_%E6%89%93%E5%8D%B0%E6%9C%8D%E5%8A%A1.pdf?id=YP2GBwABERAJ\u0026hl=zh-CN\u0026output=pdf\u0026sig=ACfU3U0P3vc1w5Mf4hLoROTFdA1bDyO_Hw"},"sample_url":"https://www.google.com/patents/reader?id=YP2GBwABERAJ\u0026hl=zh-CN\u0026printsec=frontcover\u0026output=reader\u0026source=gbs_atb_hover","is_browsable":true,"is_public_domain":true}, {});</script><div id="footer_table" style="font-size:83%;text-align:center;position:relative;top:20px;height:4.5em;margin-top:2em"><div style="margin-bottom:8px"><a href="https://www.google.com/search?hl=zh-CN"><nobr>Google&nbsp;首页</nobr></a> - <a href="//www.google.com/patents/sitemap/"><nobr>站点地图</nobr></a> - <a href="http://www.google.com/googlebooks/uspto.html"><nobr>美国专利商标局 (USPTO) 专利信息批量下载</nobr></a> - <a href="/intl/zh-CN/privacy/"><nobr>隐私权政策</nobr></a> - <a href="/intl/zh-CN/policies/terms/"><nobr>服务条款</nobr></a> - <a href="https://support.google.com/faqs/answer/2539193?hl=zh-CN"><nobr> 关于 Google 专利</nobr></a> - <a href="//www.google.com/tools/feedback/intl/zh-CN/error.html" onclick="try{_OC_startFeedback({productId: '72792',locale: 'zh-CN'});return false;}catch(e){}"><nobr>发送反馈</nobr></a></div></div> <script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-27188110-1");pageTracker._setCookiePath("/patents/");pageTracker._trackPageview();</script> </body></html>